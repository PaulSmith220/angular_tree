!function(t,e,n){"use strict";function r(t,e){return e=e||Error,function(){var n,r,i=arguments[0],o="["+(t?t+":":"")+i+"] ",a=arguments[1],s=arguments;for(n=o+a.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e+2<s.length?he(s[e+2]):t}),n=n+"\nhttp://errors.angularjs.org/1.3.14/"+(t?t+"/":"")+i,r=2;r<arguments.length;r++)n=n+(2==r?"?":"&")+"p"+(r-2)+"="+encodeURIComponent(he(arguments[r]));return new e(n)}}function i(t){if(null==t||k(t))return!1;var e=t.length;return t.nodeType===vi&&e?!0:w(t)||li(t)||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){var r,a;if(t)if(S(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(li(t)||i(t)){var s="object"!=typeof t;for(r=0,a=t.length;a>r;r++)(s||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);return t}function a(t){return Object.keys(t).sort()}function s(t,e,n){for(var r=a(t),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function u(t){return function(e,n){t(n,e)}}function c(){return++ui}function l(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function f(t){for(var e=t.$$hashKey,n=1,r=arguments.length;r>n;n++){var i=arguments[n];if(i)for(var o=Object.keys(i),a=0,s=o.length;s>a;a++){var u=o[a];t[u]=i[u]}}return l(t,e),t}function h(t){return parseInt(t,10)}function p(t,e){return f(Object.create(t),e)}function d(){}function $(t){return t}function m(t){return function(){return t}}function v(t){return"undefined"==typeof t}function g(t){return"undefined"!=typeof t}function y(t){return null!==t&&"object"==typeof t}function w(t){return"string"==typeof t}function b(t){return"number"==typeof t}function x(t){return"[object Date]"===oi.call(t)}function S(t){return"function"==typeof t}function C(t){return"[object RegExp]"===oi.call(t)}function k(t){return t&&t.window===t}function A(t){return t&&t.$evalAsync&&t.$watch}function E(t){return"[object File]"===oi.call(t)}function O(t){return"[object FormData]"===oi.call(t)}function T(t){return"[object Blob]"===oi.call(t)}function M(t){return"boolean"==typeof t}function V(t){return t&&S(t.then)}function N(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function D(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}function j(t){return Gr(t.nodeName||t[0]&&t[0].nodeName)}function P(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),e}function R(t,e,n,r){if(k(t)||A(t))throw ai("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(e){if(t===e)throw ai("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],y(t)){var i=n.indexOf(t);if(-1!==i)return r[i];n.push(t),r.push(e)}var a;if(li(t)){e.length=0;for(var s=0;s<t.length;s++)a=R(t[s],null,n,r),y(t[s])&&(n.push(t[s]),r.push(a)),e.push(a)}else{var u=e.$$hashKey;li(e)?e.length=0:o(e,function(t,n){delete e[n]});for(var c in t)t.hasOwnProperty(c)&&(a=R(t[c],null,n,r),y(t[c])&&(n.push(t[c]),r.push(a)),e[c]=a);l(e,u)}}else if(e=t,t)if(li(t))e=R(t,[],n,r);else if(x(t))e=new Date(t.getTime());else if(C(t))e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex;else if(y(t)){var f=Object.create(Object.getPrototypeOf(t));e=R(t,f,n,r)}return e}function _(t,e){if(li(t)){e=e||[];for(var n=0,r=t.length;r>n;n++)e[n]=t[n]}else if(y(t)){e=e||{};for(var i in t)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(e[i]=t[i])}return e||t}function q(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var r,i,o,a=typeof t,s=typeof e;if(a==s&&"object"==a){if(!li(t)){if(x(t))return x(e)?q(t.getTime(),e.getTime()):!1;if(C(t)&&C(e))return t.toString()==e.toString();if(A(t)||A(e)||k(t)||k(e)||li(e))return!1;o={};for(i in t)if("$"!==i.charAt(0)&&!S(t[i])){if(!q(t[i],e[i]))return!1;o[i]=!0}for(i in e)if(!o.hasOwnProperty(i)&&"$"!==i.charAt(0)&&e[i]!==n&&!S(e[i]))return!1;return!0}if(!li(e))return!1;if((r=t.length)==e.length){for(i=0;r>i;i++)if(!q(t[i],e[i]))return!1;return!0}}return!1}function I(t,e,n){return t.concat(ni.call(e,n))}function U(t,e){return ni.call(t,e||0)}function F(t,e){var n=arguments.length>2?U(arguments,2):[];return!S(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,I(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function H(t,r){var i=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?i=n:k(r)?i="$WINDOW":r&&e===r?i="$DOCUMENT":A(r)&&(i="$SCOPE"),i}function L(t,e){return"undefined"==typeof t?n:(b(e)||(e=e?2:null),JSON.stringify(t,H,e))}function B(t){return w(t)?JSON.parse(t):t}function z(t){t=Qr(t).clone();try{t.empty()}catch(e){}var n=Qr("<div>").append(t).html();try{return t[0].nodeType===gi?Gr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Gr(e)})}catch(e){return Gr(n)}}function W(t){try{return decodeURIComponent(t)}catch(e){}}function G(t){var e,n,r={};return o((t||"").split("&"),function(t){if(t&&(e=t.replace(/\+/g,"%20").split("="),n=W(e[0]),g(n))){var i=g(e[1])?W(e[1]):!0;Yr.call(r,n)?li(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function Y(t){var e=[];return o(t,function(t,n){li(t)?o(t,function(t){e.push(J(n,!0)+(t===!0?"":"="+J(t,!0)))}):e.push(J(n,!0)+(t===!0?"":"="+J(t,!0)))}),e.length?e.join("&"):""}function Z(t){return J(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function J(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function K(t,e){var n,r,i=di.length;for(t=Qr(t),r=0;i>r;++r)if(n=di[r]+e,w(n=t.attr(n)))return n;return null}function X(t,e){var n,r,i={};o(di,function(e){var i=e+"app";!n&&t.hasAttribute&&t.hasAttribute(i)&&(n=t,r=t.getAttribute(i))}),o(di,function(e){var i,o=e+"app";!n&&(i=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(o))}),n&&(i.strictDi=null!==K(n,"strict-di"),e(n,r?[r]:[],i))}function Q(n,r,i){y(i)||(i={});var a={strictDi:!1};i=f(a,i);var s=function(){if(n=Qr(n),n.injector()){var t=n[0]===e?"document":z(n);throw ai("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(t){t.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng");var o=Be(r,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},u=/^NG_ENABLE_DEBUG_INFO!/,c=/^NG_DEFER_BOOTSTRAP!/;return t&&u.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(u,"")),t&&!c.test(t.name)?s():(t.name=t.name.replace(c,""),si.resumeBootstrap=function(t){return o(t,function(t){r.push(t)}),s()},void(S(si.resumeDeferredBootstrap)&&si.resumeDeferredBootstrap()))}function te(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function ee(t){var e=si.element(t).injector();if(!e)throw ai("test","no injector found for element argument to getTestability");return e.get("$$testability")}function ne(t,e){return e=e||"_",t.replace($i,function(t,n){return(n?e:"")+t.toLowerCase()})}function re(){var e;mi||(ti=t.jQuery,ti&&ti.fn.on?(Qr=ti,f(ti.fn,{scope:Ri.scope,isolateScope:Ri.isolateScope,controller:Ri.controller,injector:Ri.injector,inheritedData:Ri.inheritedData}),e=ti.cleanData,ti.cleanData=function(t){var n;if(ci)ci=!1;else for(var r,i=0;null!=(r=t[i]);i++)n=ti._data(r,"events"),n&&n.$destroy&&ti(r).triggerHandler("$destroy");e(t)}):Qr=we,si.element=Qr,mi=!0)}function ie(t,e,n){if(!t)throw ai("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function oe(t,e,n){return n&&li(t)&&(t=t[t.length-1]),ie(S(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function ae(t,e){if("hasOwnProperty"===t)throw ai("badname","hasOwnProperty is not a valid {0} name",e)}function se(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,s=0;a>s;s++)r=i[s],t&&(t=(o=t)[r]);return!n&&S(t)?F(o,t):t}function ue(t){var e=t[0],n=t[t.length-1],r=[e];do{if(e=e.nextSibling,!e)break;r.push(e)}while(e!==n);return Qr(r)}function ce(){return Object.create(null)}function le(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),i=r("ng"),o=e(t,"angular",Object);return o.$$minErr=o.$$minErr||r,e(o,"module",function(){var t={};return function(r,o,a){var s=function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name",e)};return s(r,"module"),o&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,function(){function t(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),c}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var e=[],i=[],s=[],u=t("$injector","invoke","push",i),c={_invokeQueue:e,_configBlocks:i,_runBlocks:s,requires:o,name:r,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:u,run:function(t){return s.push(t),this}};return a&&u(a),c})}})}function fe(t){var e=[];return JSON.stringify(t,function(t,n){if(n=H(t,n),y(n)){if(e.indexOf(n)>=0)return"<<already seen>>";e.push(n)}return n})}function he(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?fe(t):t}function pe(e){f(e,{bootstrap:Q,copy:R,extend:f,equals:q,element:Qr,forEach:o,injector:Be,noop:d,bind:F,toJson:L,fromJson:B,identity:$,isUndefined:v,isDefined:g,isString:w,isFunction:S,isObject:y,isNumber:b,isElement:N,isArray:li,version:xi,isDate:x,lowercase:Gr,uppercase:Zr,callbacks:{counter:0},getTestability:ee,$$minErr:r,$$csp:pi,reloadWithDebugInfo:te}),ei=le(t);try{ei("ngLocale")}catch(n){ei("ngLocale",[]).provider("$locale",vn)}ei("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Zn}),t.provider("$compile",Ke).directive({a:To,input:Wo,textarea:Wo,form:jo,script:Pa,select:qa,style:Ua,option:Ia,ngBind:Zo,ngBindHtml:Ko,ngBindTemplate:Jo,ngClass:Qo,ngClassEven:ea,ngClassOdd:ta,ngCloak:na,ngController:ra,ngForm:Po,ngHide:Ta,ngIf:aa,ngInclude:sa,ngInit:ca,ngNonBindable:Sa,ngPluralize:Ca,ngRepeat:ka,ngShow:Oa,ngStyle:Ma,ngSwitch:Va,ngSwitchWhen:Na,ngSwitchDefault:Da,ngOptions:_a,ngTransclude:ja,ngModel:wa,ngList:la,ngChange:Xo,pattern:Ha,ngPattern:Ha,required:Fa,ngRequired:Fa,minlength:Ba,ngMinlength:Ba,maxlength:La,ngMaxlength:La,ngValue:Yo,ngModelOptions:xa}).directive({ngInclude:ua}).directive(Mo).directive(ia),t.provider({$anchorScroll:ze,$animate:Wi,$browser:Ye,$cacheFactory:Ze,$controller:en,$document:nn,$exceptionHandler:rn,$filter:sr,$interpolate:$n,$interval:mn,$http:fn,$httpBackend:pn,$location:Vn,$log:Nn,$parse:Ln,$rootScope:Yn,$q:Bn,$$q:zn,$sce:Qn,$sceDelegate:Xn,$sniffer:tr,$templateCache:Je,$templateRequest:er,$$testability:nr,$timeout:rr,$window:ar,$$rAF:Gn,$$asyncCallback:We,$$jqLite:Ie})}])}function de(){return++Ci}function $e(t){return t.replace(Ei,function(t,e,n,r){return r?n.toUpperCase():n}).replace(Oi,"Moz$1")}function me(t){return!Ni.test(t)}function ve(t){var e=t.nodeType;return e===vi||!e||e===wi}function ge(t,e){var n,r,i,a,s=e.createDocumentFragment(),u=[];if(me(t))u.push(e.createTextNode(t));else{for(n=n||s.appendChild(e.createElement("div")),r=(Di.exec(t)||["",""])[1].toLowerCase(),i=Pi[r]||Pi._default,n.innerHTML=i[1]+t.replace(ji,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;u=I(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(u,function(t){s.appendChild(t)}),s}function ye(t,n){n=n||e;var r;return(r=Vi.exec(t))?[n.createElement(r[1])]:(r=ge(t,n))?r.childNodes:[]}function we(t){if(t instanceof we)return t;var e;if(w(t)&&(t=fi(t),e=!0),!(this instanceof we)){if(e&&"<"!=t.charAt(0))throw Mi("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new we(t)}e?Me(this,ye(t)):Me(this,t)}function be(t){return t.cloneNode(!0)}function xe(t,e){if(e||Ce(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),r=0,i=n.length;i>r;r++)Ce(n[r])}function Se(t,e,n,r){if(g(r))throw Mi("offargs","jqLite#off() does not support the `selector` argument");var i=ke(t),a=i&&i.events,s=i&&i.handle;if(s)if(e)o(e.split(" "),function(e){if(g(n)){var r=a[e];if(P(r||[],n),r&&r.length>0)return}Ai(t,e,s),delete a[e]});else for(e in a)"$destroy"!==e&&Ai(t,e,s),delete a[e]}function Ce(t,e){var r=t.ng339,i=r&&Si[r];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),Se(t)),delete Si[r],t.ng339=n}}function ke(t,e){var r=t.ng339,i=r&&Si[r];return e&&!i&&(t.ng339=r=de(),i=Si[r]={events:{},data:{},handle:n}),i}function Ae(t,e,n){if(ve(t)){var r=g(n),i=!r&&e&&!y(e),o=!e,a=ke(t,!i),s=a&&a.data;if(r)s[e]=n;else{if(o)return s;if(i)return s&&s[e];f(s,e)}}}function Ee(t,e){return t.getAttribute?(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1:!1}function Oe(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",fi((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+fi(e)+" "," ")))})}function Te(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=fi(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",fi(n))}}function Me(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;n>r;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ve(t,e){return Ne(t,"$"+(e||"ngController")+"Controller")}function Ne(t,e,r){t.nodeType==wi&&(t=t.documentElement);for(var i=li(e)?e:[e];t;){for(var o=0,a=i.length;a>o;o++)if((r=Qr.data(t,i[o]))!==n)return r;t=t.parentNode||t.nodeType===bi&&t.host}}function De(t){for(xe(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function je(t,e){e||xe(t);var n=t.parentNode;n&&n.removeChild(t)}function Pe(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):Qr(n).on("load",e)}function Re(t,e){var n=_i[e.toLowerCase()];return n&&qi[j(t)]&&n}function _e(t,e){var n=t.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&Ii[e]}function qe(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(v(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(i=_(i));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||i[s].call(t,n)}};return n.elem=t,n}function Ie(){this.$get=function(){return f(we,{hasClass:function(t,e){return t.attr&&(t=t[0]),Ee(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Te(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Oe(t,e)}})}}function Ue(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"==r||"object"==r&&null!==t?t.$$hashKey=r+":"+(e||c)():r+":"+t}function Fe(t,e){if(e){var n=0;this.nextUid=function(){return++n}}o(t,this.put,this)}function He(t){var e=t.toString().replace(Li,""),n=e.match(Ui);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Le(t,e,n){var r,i,a,s;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw w(n)&&n||(n=t.name||He(t)),Bi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=t.toString().replace(Li,""),a=i.match(Ui),o(a[1].split(Fi),function(t){t.replace(Hi,function(t,e,n){r.push(n)})})}t.$inject=r}}else li(t)?(s=t.length-1,oe(t[s],"fn"),r=t.slice(0,s)):oe(t,"fn",!0);return r}function Be(t,e){function r(t){return function(e,n){return y(e)?void o(e,u(t)):t(e,n)}}function i(t,e){if(ae(t,"service"),(S(e)||li(e))&&(e=A.instantiate(e)),!e.$get)throw Bi("pget","Provider '{0}' must define $get factory method.",t);return k[t+b]=e}function a(t,e){return function(){var n=O.invoke(e,this);if(v(n))throw Bi("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function s(t,e,n){return i(t,{$get:n!==!1?a(t,e):e})}function c(t,e){return s(t,["$injector",function(t){return t.instantiate(e)}])}function l(t,e){return s(t,m(e),!1)}function f(t,e){ae(t,"constant"),k[t]=e,E[t]=e}function h(t,e){var n=A.get(t+b),r=n.$get;n.$get=function(){var t=O.invoke(r,n);return O.invoke(e,null,{$delegate:t})}}function p(t){var e,n=[];return o(t,function(t){function r(t){var e,n;for(e=0,n=t.length;n>e;e++){var r=t[e],i=A.get(r[0]);i[r[1]].apply(i,r[2])}}if(!C.get(t)){C.put(t,!0);try{w(t)?(e=ei(t),n=n.concat(p(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):S(t)?n.push(A.invoke(t)):li(t)?n.push(A.invoke(t)):oe(t,"module")}catch(i){throw li(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Bi("modulerr","Failed to instantiate module {0} due to:\n{1}",t,i.stack||i.message||i)}}}),n}function $(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===g)throw Bi("cdep","Circular dependency found: {0}",e+" <- "+x.join(" <- "));return t[e]}try{return x.unshift(e),t[e]=g,t[e]=n(e,r)}catch(i){throw t[e]===g&&delete t[e],i}finally{x.shift()}}function i(t,n,i,o){"string"==typeof i&&(o=i,i=null);var a,s,u,c=[],l=Be.$$annotate(t,e,o);for(s=0,a=l.length;a>s;s++){if(u=l[s],"string"!=typeof u)throw Bi("itkn","Incorrect injection token! Expected service name as string, got {0}",u);c.push(i&&i.hasOwnProperty(u)?i[u]:r(u,o))}return li(t)&&(t=t[a]),t.apply(n,c)}function o(t,e,n){var r=Object.create((li(t)?t[t.length-1]:t).prototype||null),o=i(t,r,e,n);return y(o)||S(o)?o:r}return{invoke:i,instantiate:o,get:r,annotate:Be.$$annotate,has:function(e){return k.hasOwnProperty(e+b)||t.hasOwnProperty(e)}}}e=e===!0;var g={},b="Provider",x=[],C=new Fe([],!0),k={$provide:{provider:r(i),factory:r(s),service:r(c),value:r(l),constant:r(f),decorator:h}},A=k.$injector=$(k,function(t,e){throw si.isString(e)&&x.push(e),Bi("unpr","Unknown provider: {0}",x.join(" <- "))}),E={},O=E.$injector=$(E,function(t,e){var r=A.get(t+b,e);return O.invoke(r.$get,r,n,t)});return o(p(t),function(t){O.invoke(t||d)}),O}function ze(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,r){function i(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===j(t)?(e=t,!0):void 0}),e}function o(){var t=s.yOffset;if(S(t))t=t();else if(N(t)){var n=t[0],r=e.getComputedStyle(n);t="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else b(t)||(t=0);return t}function a(t){if(t){t.scrollIntoView();var n=o();if(n){var r=t.getBoundingClientRect().top;e.scrollBy(0,r-n)}}else e.scrollTo(0,0)}function s(){var t,e=n.hash();e?(t=u.getElementById(e))?a(t):(t=i(u.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var u=e.document;return t&&r.$watch(function(){return n.hash()},function(t,e){(t!==e||""!==t)&&Pe(function(){r.$evalAsync(s)})}),s}]}function We(){this.$get=["$$rAF","$timeout",function(t,e){return t.supported?function(e){return t(e)}:function(t){return e(t,0,!1)}}]}function Ge(t,e,r,i){function a(t){try{t.apply(null,U(arguments,1))}finally{if(S--,0===S)for(;C.length;)try{C.pop()()}catch(e){r.error(e)}}}function s(t){var e=t.indexOf("#");return-1===e?"":t.substr(e+1)}function u(t,e){!function n(){o(A,function(t){t()}),k=e(n,t)}()}function c(){l(),f()}function l(){E=t.history.state,E=v(E)?null:E,q(E,j)&&(E=j),j=E}function f(){(T!==p.url()||O!==E)&&(T=p.url(),O=E,o(N,function(t){t(p.url(),E)}))}function h(t){try{return decodeURIComponent(t)}catch(e){return t}}var p=this,$=e[0],m=t.location,g=t.history,y=t.setTimeout,b=t.clearTimeout,x={};p.isMock=!1;var S=0,C=[];p.$$completeOutstandingRequest=a,p.$$incOutstandingRequestCount=function(){S++},p.notifyWhenNoOutstandingRequests=function(t){o(A,function(t){t()}),0===S?t():C.push(t)};var k,A=[];p.addPollFn=function(t){return v(k)&&u(100,y),A.push(t),t};var E,O,T=m.href,M=e.find("base"),V=null;l(),O=E,p.url=function(e,n,r){if(v(r)&&(r=null),m!==t.location&&(m=t.location),g!==t.history&&(g=t.history),e){var o=O===r;if(T===e&&(!i.history||o))return p;var a=T&&xn(T)===xn(e);return T=e,O=r,!i.history||a&&o?(a||(V=e),n?m.replace(e):a?m.hash=s(e):m.href=e):(g[n?"replaceState":"pushState"](r,"",e),l(),O=E),p}return V||m.href.replace(/%27/g,"'")},p.state=function(){return E};var N=[],D=!1,j=null;p.onUrlChange=function(e){return D||(i.history&&Qr(t).on("popstate",c),Qr(t).on("hashchange",c),D=!0),N.push(e),e},p.$$checkUrlChange=f,p.baseHref=function(){var t=M.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var P={},R="",_=p.baseHref();p.cookies=function(t,e){var i,o,a,s,u;if(!t){if($.cookie!==R)for(R=$.cookie,o=R.split("; "),P={},s=0;s<o.length;s++)a=o[s],u=a.indexOf("="),u>0&&(t=h(a.substring(0,u)),P[t]===n&&(P[t]=h(a.substring(u+1))));return P}e===n?$.cookie=encodeURIComponent(t)+"=;path="+_+";expires=Thu, 01 Jan 1970 00:00:00 GMT":w(e)&&(i=($.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path="+_).length+1,i>4096&&r.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},p.defer=function(t,e){var n;return S++,n=y(function(){delete x[n],a(t)},e||0),x[n]=!0,n},p.defer.cancel=function(t){return x[t]?(delete x[t],b(t),a(d),!0):!1}}function Ye(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new Ge(t,r,e,n)}]}function Ze(){this.$get=function(){function t(t,n){function i(t){t!=h&&(p?p==t&&(p=t.n):p=t,o(t.n,t.p),o(t,h),h=t,h.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var a=0,s=f({},n,{id:t}),u={},c=n&&n.capacity||Number.MAX_VALUE,l={},h=null,p=null;return e[t]={put:function(t,e){if(c<Number.MAX_VALUE){var n=l[t]||(l[t]={key:t});i(n)}if(!v(e))return t in u||a++,u[t]=e,a>c&&this.remove(p.key),e},get:function(t){if(c<Number.MAX_VALUE){var e=l[t];if(!e)return;i(e)}return u[t]},remove:function(t){if(c<Number.MAX_VALUE){var e=l[t];if(!e)return;e==h&&(h=e.p),e==p&&(p=e.n),o(e.n,e.p),delete l[t]}delete u[t],a--},removeAll:function(){u={},a=0,l={},h=p=null},destroy:function(){u=null,s=null,l=null,delete e[t]},info:function(){return f({},s,{size:a})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function Je(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Ke(t,r){function i(t,e){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return o(t,function(t,i){var o=t.match(n);if(!o)throw Gi("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,i,t);r[i]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||i}}),r}var a={},s="Directive",c=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,l=/(([\w\-]+)(?:\:([^;]+))?;?)/,h=D("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,b=/^(on[a-z]+|formaction)$/;this.directive=function C(e,n){return ae(e,"directive"),w(e)?(ie(n,"directiveFactory"),a.hasOwnProperty(e)||(a[e]=[],t.factory(e+s,["$injector","$exceptionHandler",function(t,n){var r=[];return o(a[e],function(o,a){try{var s=t.invoke(o);S(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=a,s.name=s.name||e,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",y(s.scope)&&(s.$$isolateBindings=i(s.scope,s.name)),r.push(s)}catch(u){n(u)}}),r}])),a[e].push(n)):o(e,u(C)),this},this.aHrefSanitizationWhitelist=function(t){return g(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return g(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var x=!0;this.debugInfoEnabled=function(t){return g(t)?(x=t,this):x},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,r,i,u,m,g,C,k,E,O,T){function M(t,e){try{t.addClass(e)}catch(n){}}function V(t,e,n,r,i){t instanceof Qr||(t=Qr(t)),o(t,function(e,n){e.nodeType==gi&&e.nodeValue.match(/\S+/)&&(t[n]=Qr(e).wrap("<span></span>").parent()[0])});var a=D(t,e,t,n,r,i);V.$$addScopeClass(t);var s=null;return function(e,n,r){ie(e,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers,u=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=N(u));var c;if(c="html"!==s?Qr(X(s,Qr("<div>").append(t).html())):n?Ri.clone.call(t):t,o)for(var l in o)c.data("$"+l+"Controller",o[l].instance);return V.$$addScopeInfo(c,e),n&&n(c,e),a&&a(e,c,c,i),c}}function N(t){var e=t&&t[0];return e&&"foreignobject"!==j(e)&&e.toString().match(/SVG/)?"svg":"html"}function D(t,e,r,i,o,a){function s(t,r,i,o){var a,s,u,c,l,f,h,p,m;if(d){var v=r.length;for(m=new Array(v),l=0;l<$.length;l+=3)h=$[l],m[h]=r[h]}else m=r;for(l=0,f=$.length;f>l;)u=m[$[l++]],a=$[l++],s=$[l++],a?(a.scope?(c=t.$new(),V.$$addScopeInfo(Qr(u),c)):c=t,p=a.transcludeOnThisElement?R(t,a.transclude,o,a.elementTranscludeOnThisElement):!a.templateOnThisElement&&o?o:!o&&e?R(t,e):null,a(s,c,u,i,p)):s&&s(t,u.childNodes,n,o)}for(var u,c,l,f,h,p,d,$=[],m=0;m<t.length;m++)u=new ae,c=_(t[m],[],u,0===m?i:n,o),l=c.length?H(c,t[m],u,e,r,null,[],[],a):null,l&&l.scope&&V.$$addScopeClass(u.$$element),h=l&&l.terminal||!(f=t[m].childNodes)||!f.length?null:D(f,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||h)&&($.push(m,l,h),p=!0,d=d||l),a=null;return p?s:null}function R(t,e,n){var r=function(r,i,o,a,s){return r||(r=t.$new(!1,s),r.$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})};return r}function _(t,e,n,r,i){var o,a,s=t.nodeType,u=n.$attr;switch(s){case vi:B(e,Xe(j(t)),"E",r,i);for(var f,h,p,d,$,m,v=t.attributes,g=0,b=v&&v.length;b>g;g++){var x=!1,S=!1;f=v[g],h=f.name,$=fi(f.value),d=Xe(h),(m=fe.test(d))&&(h=h.replace(Yi,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var C=d.replace(/(Start|End)$/,"");W(C)&&d===C+"Start"&&(x=h,S=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6)),p=Xe(h.toLowerCase()),u[p]=h,(m||!n.hasOwnProperty(p))&&(n[p]=$,Re(t,p)&&(n[p]=!0)),te(t,e,$,p,m),B(e,p,"A",r,i,x,S)}if(a=t.className,y(a)&&(a=a.animVal),w(a)&&""!==a)for(;o=l.exec(a);)p=Xe(o[2]),B(e,p,"C",r,i)&&(n[p]=fi(o[3])),a=a.substr(o.index+o[0].length);break;case gi:K(e,t.nodeValue);break;case yi:try{o=c.exec(t.nodeValue),o&&(p=Xe(o[1]),B(e,p,"M",r,i)&&(n[p]=fi(o[2])))}catch(k){}}return e.sort(Z),e}function I(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Gi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==vi&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0)}else r.push(t);return Qr(r)}function F(t,e,n){return function(r,i,o,a,s){return i=I(i[0],e,n),t(r,i,o,a,s)}}function H(t,a,s,u,c,l,f,h,p){function d(t,e,n,r){t&&(n&&(t=F(t,n,r)),t.require=k.require,t.directiveName=E,(j===k||k.$$isolateScope)&&(t=re(t,{isolateScope:!0})),f.push(t)),e&&(n&&(e=F(e,n,r)),e.require=k.require,e.directiveName=E,(j===k||k.$$isolateScope)&&(e=re(e,{isolateScope:!0})),h.push(e))}function $(t,e,n,r){var i,a,s="data",u=!1,c=n;if(w(e)){if(a=e.match(v),e=e.substring(a[0].length),a[3]&&(a[1]?a[3]=null:a[1]=a[3]),"^"===a[1]?s="inheritedData":"^^"===a[1]&&(s="inheritedData",c=n.parent()),"?"===a[2]&&(u=!0),i=null,r&&"data"===s&&(i=r[e])&&(i=i.instance),i=i||c[s]("$"+e+"Controller"),!i&&!u)throw Gi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",e,t);return i||null}return li(e)&&(i=[],o(e,function(e){i.push($(t,e,n,r))})),i}function b(t,e,i,u,c){function l(t,e,r){var i;return A(t)||(r=e,e=t,t=n),W&&(i=b),r||(r=W?S.parent():S),c(t,e,i,r,T)}var p,d,v,y,w,b,x,S,k;if(a===i?(k=s,S=s.$$element):(S=Qr(i),k=new ae(S,s)),j&&(w=e.$new(!0)),c&&(x=l,x.$$boundTransclude=c),D&&(C={},b={},o(D,function(t){var n,r={$scope:t===j||t.$$isolateScope?w:e,$element:S,$attrs:k,$transclude:x};y=t.controller,"@"==y&&(y=k[t.name]),n=g(y,r,!0,t.controllerAs),b[t.name]=n,W||S.data("$"+t.name+"Controller",n.instance),C[t.name]=n})),j){V.$$addScopeInfo(S,w,!0,!(P&&(P===j||P===j.$$originalDirective))),V.$$addScopeClass(S,!0);var E=C&&C[j.name],O=w;E&&E.identifier&&j.bindToController===!0&&(O=E.instance),o(w.$$isolateBindings=j.$$isolateBindings,function(t,n){var i,o,a,s,u=t.attrName,c=t.optional,l=t.mode;switch(l){case"@":k.$observe(u,function(t){O[n]=t}),k.$$observers[u].$$scope=e,k[u]&&(O[n]=r(k[u])(e));break;case"=":if(c&&!k[u])return;o=m(k[u]),s=o.literal?q:function(t,e){return t===e||t!==t&&e!==e},a=o.assign||function(){throw i=O[n]=o(e),Gi("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",k[u],j.name)},i=O[n]=o(e);var f=function(t){return s(t,O[n])||(s(t,i)?a(e,t=O[n]):O[n]=t),i=t};f.$stateful=!0;var h;h=t.collection?e.$watchCollection(k[u],f):e.$watch(m(k[u],f),null,o.literal),w.$on("$destroy",h);break;case"&":o=m(k[u]),O[n]=function(t){return o(e,t)}}})}for(C&&(o(C,function(t){t()}),C=null),p=0,d=f.length;d>p;p++)v=f[p],oe(v,v.isolateScope?w:e,S,k,v.require&&$(v.directiveName,v.require,S,b),x);var T=e;for(j&&(j.template||null===j.templateUrl)&&(T=w),t&&t(T,i.childNodes,n,c),p=h.length-1;p>=0;p--)v=h[p],oe(v,v.isolateScope?w:e,S,k,v.require&&$(v.directiveName,v.require,S,b),x)}p=p||{};for(var x,C,k,E,O,T,M,N=-Number.MAX_VALUE,D=p.controllerDirectives,j=p.newIsolateScopeDirective,P=p.templateDirective,R=p.nonTlbTranscludeDirective,H=!1,B=!1,W=p.hasElementTranscludeDirective,Z=s.$$element=Qr(a),K=l,Q=u,te=0,ne=t.length;ne>te;te++){k=t[te];var ie=k.$$start,se=k.$$end;if(ie&&(Z=I(a,ie,se)),O=n,N>k.priority)break;if((M=k.scope)&&(k.templateUrl||(y(M)?(J("new/isolated scope",j||x,k,Z),j=k):J("new/isolated scope",j,k,Z)),x=x||k),E=k.name,!k.templateUrl&&k.controller&&(M=k.controller,D=D||{},J("'"+E+"' controller",D[E],k,Z),D[E]=k),(M=k.transclude)&&(H=!0,k.$$tlb||(J("transclusion",R,k,Z),R=k),"element"==M?(W=!0,N=k.priority,O=Z,Z=s.$$element=Qr(e.createComment(" "+E+": "+s[E]+" ")),a=Z[0],ee(c,U(O),a),Q=V(O,u,N,K&&K.name,{nonTlbTranscludeDirective:R})):(O=Qr(be(a)).contents(),Z.empty(),Q=V(O,u))),k.template)if(B=!0,J("template",P,k,Z),P=k,M=S(k.template)?k.template(Z,s):k.template,M=le(M),k.replace){if(K=k,O=me(M)?[]:tn(X(k.templateNamespace,fi(M))),a=O[0],1!=O.length||a.nodeType!==vi)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",E,"");ee(c,Z,a);var ue={$attr:{}},ce=_(a,[],ue),fe=t.splice(te+1,t.length-(te+1));j&&L(ce),t=t.concat(ce).concat(fe),G(s,ue),ne=t.length}else Z.html(M);if(k.templateUrl)B=!0,J("template",P,k,Z),P=k,k.replace&&(K=k),b=Y(t.splice(te,t.length-te),Z,s,c,H&&Q,f,h,{controllerDirectives:D,newIsolateScopeDirective:j,templateDirective:P,nonTlbTranscludeDirective:R}),ne=t.length;else if(k.compile)try{T=k.compile(Z,s,Q),S(T)?d(null,T,ie,se):T&&d(T.pre,T.post,ie,se)}catch(he){i(he,z(Z))}k.terminal&&(b.terminal=!0,N=Math.max(N,k.priority))}return b.scope=x&&x.scope===!0,b.transcludeOnThisElement=H,b.elementTranscludeOnThisElement=W,b.templateOnThisElement=B,b.transclude=Q,p.hasElementTranscludeDirective=W,b}function L(t){for(var e=0,n=t.length;n>e;e++)t[e]=p(t[e],{$$isolateScope:!0})}function B(e,r,o,u,c,l,f){if(r===c)return null;var h=null;if(a.hasOwnProperty(r))for(var d,$=t.get(r+s),m=0,v=$.length;v>m;m++)try{d=$[m],(u===n||u>d.priority)&&-1!=d.restrict.indexOf(o)&&(l&&(d=p(d,{$$start:l,$$end:f})),e.push(d),h=d)}catch(g){i(g)
}return h}function W(e){if(a.hasOwnProperty(e))for(var n,r=t.get(e+s),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function G(t,e){var n=e.$attr,r=t.$attr,i=t.$$element;o(t,function(r,i){"$"!=i.charAt(0)&&(e[i]&&e[i]!==r&&(r+=("style"===i?";":" ")+e[i]),t.$set(i,r,!0,n[i]))}),o(e,function(e,o){"class"==o?(M(i,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?(i.attr("style",i.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,r[o]=n[o])})}function Y(t,e,n,r,i,a,s,c){var l,f,h=[],d=e[0],$=t.shift(),m=p($,{templateUrl:null,transclude:null,replace:null,$$originalDirective:$}),v=S($.templateUrl)?$.templateUrl(e,n):$.templateUrl,g=$.templateNamespace;return e.empty(),u(E.getTrustedResourceUrl(v)).then(function(u){var p,w,b,x;if(u=le(u),$.replace){if(b=me(u)?[]:tn(X(g,fi(u))),p=b[0],1!=b.length||p.nodeType!==vi)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",$.name,v);w={$attr:{}},ee(r,e,p);var S=_(p,[],w);y($.scope)&&L(S),t=S.concat(t),G(n,w)}else p=d,e.html(u);for(t.unshift(m),l=H(t,p,n,i,e,$,a,s,c),o(r,function(t,n){t==p&&(r[n]=e[0])}),f=D(e[0].childNodes,i);h.length;){var C=h.shift(),k=h.shift(),A=h.shift(),E=h.shift(),O=e[0];if(!C.$$destroyed){if(k!==d){var T=k.className;c.hasElementTranscludeDirective&&$.replace||(O=be(p)),ee(A,Qr(k),O),M(Qr(O),T)}x=l.transcludeOnThisElement?R(C,l.transclude,E):E,l(f,C,O,r,x)}}h=null}),function(t,e,n,r,i){var o=i;e.$$destroyed||(h?h.push(e,n,r,o):(l.transcludeOnThisElement&&(o=R(e,l.transclude,i)),l(f,e,n,r,o)))}}function Z(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function J(t,e,n,r){if(e)throw Gi("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",e.name,n.name,t,z(r))}function K(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),r=!!e.length;return r&&V.$$addBindingClass(e),function(t,e){var i=e.parent();r||V.$$addBindingClass(i),V.$$addBindingInfo(i,n.expressions),t.$watch(n,function(t){e[0].nodeValue=t})}}})}function X(t,n){switch(t=Gr(t||"html")){case"svg":case"math":var r=e.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function Q(t,e){if("srcdoc"==e)return E.HTML;var n=j(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?E.RESOURCE_URL:void 0}function te(t,e,n,i,o){var a=Q(t,i);o=h[i]||o;var s=r(n,!0,a,o);if(s){if("multiple"===i&&"select"===j(t))throw Gi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",z(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){var c=u.$$observers||(u.$$observers={});if(b.test(i))throw Gi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var l=u[i];l!==n&&(s=l&&r(l,!0,a,o),n=l),s&&(u[i]=s(t),(c[i]||(c[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||t).$watch(s,function(t,e){"class"===i&&t!=e?u.$updateClass(t,e):u.$set(i,t)}))}}}})}}function ee(t,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]==a){t[i++]=r;for(var c=i,l=c+s-1,f=t.length;f>c;c++,l++)f>l?t[c]=t[l]:delete t[c];t.length-=s-1,t.context===a&&(t.context=r);break}u&&u.replaceChild(r,a);var h=e.createDocumentFragment();h.appendChild(a),Qr(r).data(Qr(a).data()),ti?(ci=!0,ti.cleanData([a])):delete Qr.cache[a[Qr.expando]];for(var p=1,d=n.length;d>p;p++){var $=n[p];Qr($).remove(),h.appendChild($),delete n[p]}n[0]=r,n.length=1}function re(t,e){return f(function(){return t.apply(null,arguments)},t,e)}function oe(t,e,n,r,o,a){try{t(e,n,r,o,a)}catch(s){i(s,z(n))}}var ae=function(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=e[i]}else this.$attr={};this.$$element=t};ae.prototype={$normalize:Xe,$addClass:function(t){t&&t.length>0&&O.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&O.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Qe(t,e);n&&n.length&&O.addClass(this.$$element,n);var r=Qe(e,t);r&&r.length&&O.removeClass(this.$$element,r)},$set:function(t,e,r,a){var s,u=this.$$element[0],c=Re(u,t),l=_e(u,t),f=t;if(c?(this.$$element.prop(t,e),a=c):l&&(this[l]=e,f=l),this[t]=e,a?this.$attr[t]=a:(a=this.$attr[t],a||(this.$attr[t]=a=ne(t,"-"))),s=j(this.$$element),"a"===s&&"href"===t||"img"===s&&"src"===t)this[t]=e=T(e,"src"===t);else if("img"===s&&"srcset"===t){for(var h="",p=fi(e),d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,$=/\s/.test(p)?d:/(,)/,m=p.split($),v=Math.floor(m.length/2),g=0;v>g;g++){var y=2*g;h+=T(fi(m[y]),!0),h+=" "+fi(m[y+1])}var w=fi(m[2*g]).split(/\s/);h+=T(fi(w[0]),!0),2===w.length&&(h+=" "+fi(w[1])),this[t]=e=h}r!==!1&&(null===e||e===n?this.$$element.removeAttr(a):this.$$element.attr(a,e));var b=this.$$observers;b&&o(b[f],function(t){try{t(e)}catch(n){i(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=ce()),i=r[t]||(r[t]=[]);return i.push(e),C.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(t)&&e(n[t])}),function(){P(i,e)}}};var se=r.startSymbol(),ue=r.endSymbol(),le="{{"==se||"}}"==ue?$:function(t){return t.replace(/\{\{/g,se).replace(/}}/g,ue)},fe=/^ngAttr[A-Z]/;return V.$$addBindingInfo=x?function(t,e){var n=t.data("$binding")||[];li(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:d,V.$$addBindingClass=x?function(t){M(t,"ng-binding")}:d,V.$$addScopeInfo=x?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:d,V.$$addScopeClass=x?function(t,e){M(t,e?"ng-isolate-scope":"ng-scope")}:d,V}]}function Xe(t){return $e(t.replace(Yi,""))}function Qe(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function tn(t){t=Qr(t);var e=t.length;if(1>=e)return t;for(;e--;){var n=t[e];n.nodeType===yi&&ri.call(t,e,1)}return t}function en(){var t={},e=!1,i=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(e,n){ae(e,"controller"),y(e)?f(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(o,a){function s(t,e,n,i){if(!t||!y(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}return function(r,u,c,l){var h,p,d,$;if(c=c===!0,l&&w(l)&&($=l),w(r)){if(p=r.match(i),!p)throw Zi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);d=p[1],$=$||p[3],r=t.hasOwnProperty(d)?t[d]:se(u.$scope,d,!0)||(e?se(a,d,!0):n),oe(r,d,!0)}if(c){var m=(li(r)?r[r.length-1]:r).prototype;return h=Object.create(m||null),$&&s(u,$,h,d||r.name),f(function(){return o.invoke(r,h,u,d),h},{instance:h,identifier:$})}return h=o.instantiate(r,u,d),$&&s(u,$,h,d||r.name),h}}]}function nn(){this.$get=["$window",function(t){return Qr(t.document)}]}function rn(){this.$get=["$log",function(t){return function(){t.error.apply(t,arguments)}}]}function on(t,e){if(w(t)){var n=t.replace(to,"").trim();if(n){var r=e("Content-Type");(r&&0===r.indexOf(Ji)||an(n))&&(t=B(n))}}return t}function an(t){var e=t.match(Xi);return e&&Qi[e[0]].test(t)}function sn(t){var e,n,r,i=ce();return t?(o(t.split("\n"),function(t){r=t.indexOf(":"),e=Gr(fi(t.substr(0,r))),n=fi(t.substr(r+1)),e&&(i[e]=i[e]?i[e]+", "+n:n)}),i):i}function un(t){var e=y(t)?t:n;return function(n){if(e||(e=sn(t)),n){var r=e[Gr(n)];return void 0===r&&(r=null),r}return e}}function cn(t,e,n,r){return S(r)?r(t,e,n):(o(r,function(r){t=r(t,e,n)}),t)}function ln(t){return t>=200&&300>t}function fn(){var t=this.defaults={transformResponse:[on],transformRequest:[function(t){return!y(t)||E(t)||T(t)||O(t)?t:L(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:_(Ki),put:_(Ki),patch:_(Ki)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},e=!1;this.useApplyAsync=function(t){return g(t)?(e=!!t,this):e};var i=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,u,c,l,h,p){function d(e){function i(t){var e=f({},t);return e.data=t.data?cn(t.data,t.headers,t.status,u.transformResponse):t.data,ln(t.status)?e:h.reject(e)}function a(t){var e,n={};return o(t,function(t,r){S(t)?(e=t(),null!=e&&(n[r]=e)):n[r]=t}),n}function s(e){var n,r,i,o=t.headers,s=f({},e.headers);o=f({},o.common,o[Gr(e.method)]);t:for(n in o){r=Gr(n);for(i in s)if(Gr(i)===r)continue t;s[n]=o[n]}return a(s)}if(!si.isObject(e))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);var u=f({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse},e);u.headers=s(e),u.method=Zr(u.method);var c=function(e){var r=e.headers,a=cn(e.data,un(r),n,e.transformRequest);return v(a)&&o(r,function(t,e){"content-type"===Gr(e)&&delete r[e]}),v(e.withCredentials)&&!v(t.withCredentials)&&(e.withCredentials=t.withCredentials),b(e,a).then(i,i)},l=[c,n],p=h.when(u);for(o(A,function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&l.push(t.response,t.responseError)});l.length;){var d=l.shift(),$=l.shift();p=p.then(d,$)}return p.success=function(t){return p.then(function(e){t(e.data,e.status,e.headers,u)}),p},p.error=function(t){return p.then(null,function(e){t(e.data,e.status,e.headers,u)}),p},p}function $(){o(arguments,function(t){d[t]=function(e,n){return d(f(n||{},{method:t,url:e}))}})}function m(){o(arguments,function(t){d[t]=function(e,n,r){return d(f(r||{},{method:t,url:e,data:n}))}})}function b(r,i){function o(t,n,r,i){function o(){s(n,t,r,i)}p&&(ln(t)?p.put(x,[t,n,sn(r),i]):p.remove(x)),e?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function s(t,e,n,i){e=Math.max(e,0),(ln(e)?m.resolve:m.reject)({data:t,status:e,headers:un(n),config:r,statusText:i})}function c(t){s(t.data,t.status,_(t.headers()),t.statusText)}function f(){var t=d.pendingRequests.indexOf(r);-1!==t&&d.pendingRequests.splice(t,1)}var p,$,m=h.defer(),w=m.promise,b=r.headers,x=C(r.url,r.params);if(d.pendingRequests.push(r),w.then(f,f),!r.cache&&!t.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(p=y(r.cache)?r.cache:y(t.cache)?t.cache:k),p&&($=p.get(x),g($)?V($)?$.then(c,c):li($)?s($[1],$[0],_($[2]),$[3]):s($,200,{},"OK"):p.put(x,w)),v($)){var S=or(r.url)?u.cookies()[r.xsrfCookieName||t.xsrfCookieName]:n;S&&(b[r.xsrfHeaderName||t.xsrfHeaderName]=S),a(r.method,x,i,o,b,r.timeout,r.withCredentials,r.responseType)}return w}function C(t,e){if(!e)return t;var n=[];return s(e,function(t,e){null===t||v(t)||(li(t)||(t=[t]),o(t,function(t){y(t)&&(t=x(t)?t.toISOString():L(t)),n.push(J(e)+"="+J(t))}))}),n.length>0&&(t+=(-1==t.indexOf("?")?"?":"&")+n.join("&")),t}var k=c("$http"),A=[];return o(i,function(t){A.unshift(w(t)?p.get(t):p.invoke(t))}),d.pendingRequests=[],$("get","delete","head","jsonp"),m("post","put","patch"),d.defaults=t,d}]}function hn(){return new t.XMLHttpRequest}function pn(){this.$get=["$browser","$window","$document",function(t,e,n){return dn(t,hn,t.defer,e.angular.callbacks,n[0])}]}function dn(t,e,r,i,a){function s(t,e,n){var r=a.createElement("script"),o=null;return r.type="text/javascript",r.src=t,r.async=!0,o=function(t){Ai(r,"load",o),Ai(r,"error",o),a.body.removeChild(r),r=null;var s=-1,u="unknown";t&&("load"!==t.type||i[e].called||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},ki(r,"load",o),ki(r,"error",o),a.body.appendChild(r),o}return function(a,u,c,l,f,h,p,$){function m(){w&&w(),b&&b.abort()}function v(e,i,o,a,s){C!==n&&r.cancel(C),w=b=null,e(i,o,a,s),t.$$completeOutstandingRequest(d)}if(t.$$incOutstandingRequestCount(),u=u||t.url(),"jsonp"==Gr(a)){var y="_"+(i.counter++).toString(36);i[y]=function(t){i[y].data=t,i[y].called=!0};var w=s(u.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(t,e){v(l,t,i[y].data,"",e),i[y]=d})}else{var b=e();b.open(a,u,!0),o(f,function(t,e){g(t)&&b.setRequestHeader(e,t)}),b.onload=function(){var t=b.statusText||"",e="response"in b?b.response:b.responseText,n=1223===b.status?204:b.status;0===n&&(n=e?200:"file"==ir(u).protocol?404:0),v(l,n,e,b.getAllResponseHeaders(),t)};var x=function(){v(l,-1,null,null,"")};if(b.onerror=x,b.onabort=x,p&&(b.withCredentials=!0),$)try{b.responseType=$}catch(S){if("json"!==$)throw S}b.send(c||null)}if(h>0)var C=r(m,h);else V(h)&&h.then(m)}}function $n(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(t){return"\\\\\\"+t}function a(o,a,h,p){function d(n){return n.replace(c,t).replace(l,e)}function $(t){try{return t=T(t),p&&!g(t)?t:M(t)}catch(e){var n=eo("interr","Can't interpolate: {0}\n{1}",o,e.toString());r(n)}}p=!!p;for(var m,y,w,b=0,x=[],C=[],k=o.length,A=[],E=[];k>b;){if(-1==(m=o.indexOf(t,b))||-1==(y=o.indexOf(e,m+s))){b!==k&&A.push(d(o.substring(b)));break}b!==m&&A.push(d(o.substring(b,m))),w=o.substring(m+s,y),x.push(w),C.push(n(w,$)),b=y+u,E.push(A.length),A.push("")}if(h&&A.length>1)throw eo("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!a||x.length){var O=function(t){for(var e=0,n=x.length;n>e;e++){if(p&&v(t[e]))return;A[E[e]]=t[e]}return A.join("")},T=function(t){return h?i.getTrusted(h,t):i.valueOf(t)},M=function(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=L(t)}return t};return f(function(t){var e=0,n=x.length,i=new Array(n);try{for(;n>e;e++)i[e]=C[e](t);return O(i)}catch(a){var s=eo("interr","Can't interpolate: {0}\n{1}",o,a.toString());r(s)}},{exp:o,expressions:x,$$watchDelegate:function(t,e,n){var r;return t.$watchGroup(C,function(n,i){var o=O(n);S(e)&&e.call(this,o,n!==i?r:o,t),r=o},n)}})}}var s=t.length,u=e.length,c=new RegExp(t.replace(/./g,o),"g"),l=new RegExp(e.replace(/./g,o),"g");return a.startSymbol=function(){return t},a.endSymbol=function(){return e},a}]}function mn(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,n,r){function i(i,a,s,u){var c=e.setInterval,l=e.clearInterval,f=0,h=g(u)&&!u,p=(h?r:n).defer(),d=p.promise;return s=g(s)?s:0,d.then(null,null,i),d.$$intervalId=c(function(){p.notify(f++),s>0&&f>=s&&(p.resolve(f),l(d.$$intervalId),delete o[d.$$intervalId]),h||t.$apply()},a),o[d.$$intervalId]=p,d}var o={};return i.cancel=function(t){return t&&t.$$intervalId in o?(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0):!1},i}]}function vn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(t){return 1===t?"one":"other"}}}}function gn(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=Z(e[n]);return e.join("/")}function yn(t,e){var n=ir(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=h(n.port)||ro[n.protocol]||null}function wn(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var r=ir(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=G(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function bn(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function xn(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Sn(t){return t.replace(/(#.+)|#$/,"$1")}function Cn(t){return t.substr(0,xn(t).lastIndexOf("/")+1)}function kn(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function An(t,e){this.$$html5=!0,e=e||"";var r=Cn(t);yn(t,this),this.$$parse=function(t){var e=bn(r,t);if(!w(e))throw io("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,r);wn(e,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=Y(this.$$search),e=this.$$hash?"#"+Z(this.$$hash):"";this.$$url=gn(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s,u;return(a=bn(t,i))!==n?(s=a,u=(a=bn(e,a))!==n?r+(bn("/",a)||a):t+s):(a=bn(r,i))!==n?u=r+a:r==i+"/"&&(u=r),u&&this.$$parse(u),!!u}}function En(t,e){var n=Cn(t);yn(t,this),this.$$parse=function(r){function i(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===e.indexOf(n)&&(e=e.replace(n,"")),i.exec(e)?t:(r=i.exec(t),r?r[1]:t)}var o,a=bn(t,r)||bn(n,r);"#"===a.charAt(0)?(o=bn(e,a),v(o)&&(o=a)):o=this.$$html5?a:"",wn(o,this),this.$$path=i(this.$$path,o,t),this.$$compose()},this.$$compose=function(){var n=Y(this.$$search),r=this.$$hash?"#"+Z(this.$$hash):"";this.$$url=gn(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+(this.$$url?e+this.$$url:"")},this.$$parseLinkUrl=function(e){return xn(t)==xn(e)?(this.$$parse(e),!0):!1}}function On(t,e){this.$$html5=!0,En.apply(this,arguments);var n=Cn(t);this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return t==xn(r)?o=r:(a=bn(n,r))?o=t+e+a:n===r+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=Y(this.$$search),r=this.$$hash?"#"+Z(this.$$hash):"";this.$$url=gn(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+e+this.$$url}}function Tn(t){return function(){return this[t]}}function Mn(t,e){return function(n){return v(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function Vn(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return g(e)?(t=e,this):t},this.html5Mode=function(t){return M(t)?(e.enabled=t,this):y(t)?(M(t.enabled)&&(e.enabled=t.enabled),M(t.requireBase)&&(e.requireBase=t.requireBase),M(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(t,e,n){var i=c.url(),o=c.$$state;try{r.url(t,e,n),c.$$state=r.state()}catch(a){throw c.url(i),c.$$state=o,a}}function u(t,e){n.$broadcast("$locationChangeSuccess",c.absUrl(),t,c.$$state,e)}var c,l,f,h=r.baseHref(),p=r.url();if(e.enabled){if(!h&&e.requireBase)throw io("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=kn(p)+(h||"/"),l=i.history?An:On}else f=xn(p),l=En;c=new l(f,"#"+t),c.$$parseLinkUrl(p,p),c.$$state=r.state();var d=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var i=Qr(t.target);"a"!==j(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");y(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=ir(s.animVal).href),d.test(s)||!s||i.attr("target")||t.isDefaultPrevented()||c.$$parseLinkUrl(s,u)&&(t.preventDefault(),c.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Sn(c.absUrl())!=Sn(p)&&r.url(c.absUrl(),!0);var $=!0;return r.onUrlChange(function(t,e){n.$evalAsync(function(){var r,i=c.absUrl(),o=c.$$state;c.$$parse(t),c.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,c.absUrl()===t&&(r?(c.$$parse(i),c.$$state=o,s(i,!1,o)):($=!1,u(i,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){var t=Sn(r.url()),e=Sn(c.absUrl()),o=r.state(),a=c.$$replace,l=t!==e||c.$$html5&&i.history&&o!==c.$$state;($||l)&&($=!1,n.$evalAsync(function(){var e=c.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,c.$$state,o).defaultPrevented;c.absUrl()===e&&(r?(c.$$parse(t),c.$$state=o):(l&&s(e,a,o===c.$$state?null:c.$$state),u(t,o)))})),c.$$replace=!1}),c}]}function Nn(){var t=!0,e=this;this.debugEnabled=function(e){return g(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function i(t){var e=n.console||{},i=e[t]||e.log||d,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var t=[];return o(arguments,function(e){t.push(r(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function Dn(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ao("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function jn(t,e){if(t){if(t.constructor===t)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ao("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ao("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ao("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function Pn(t,e){if(t){if(t.constructor===t)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===so||t===uo||t===co)throw ao("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function Rn(t){return t.constant}function _n(t,e,n,r,i){jn(t,i),jn(e,i);for(var o,a=n.split("."),s=0;a.length>1;s++){o=Dn(a.shift(),i);var u=0===s&&e&&e[o]||t[o];u||(u={},t[o]=u),t=jn(u,i)}return o=Dn(a.shift(),i),jn(t[o],i),t[o]=r,r}function qn(t){return"constructor"==t}function In(t,e,r,i,o,a,s){Dn(t,a),Dn(e,a),Dn(r,a),Dn(i,a),Dn(o,a);var u=function(t){return jn(t,a)},c=s||qn(t)?u:$,l=s||qn(e)?u:$,f=s||qn(r)?u:$,h=s||qn(i)?u:$,p=s||qn(o)?u:$;return function(a,s){var u=s&&s.hasOwnProperty(t)?s:a;return null==u?u:(u=c(u[t]),e?null==u?n:(u=l(u[e]),r?null==u?n:(u=f(u[r]),i?null==u?n:(u=h(u[i]),o?null==u?n:u=p(u[o]):u):u):u):u)}}function Un(t,e){return function(n,r){return t(n,r,jn,e)}}function Fn(t,e,r){var i=e.expensiveChecks,a=i?vo:mo,s=a[t];if(s)return s;var u=t.split("."),c=u.length;if(e.csp)s=6>c?In(u[0],u[1],u[2],u[3],u[4],r,i):function(t,e){var o,a=0;do o=In(u[a++],u[a++],u[a++],u[a++],u[a++],r,i)(t,e),e=n,t=o;while(c>a);return o};else{var l="";i&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=i;o(u,function(t,e){Dn(t,r);var n=(e?"s":'((l&&l.hasOwnProperty("'+t+'"))?l:s)')+"."+t;(i||qn(t))&&(n="eso("+n+", fe)",f=!0),l+="if(s == null) return undefined;\ns="+n+";\n"}),l+="return s;";var h=new Function("s","l","eso","fe",l);h.toString=m(l),f&&(h=Un(h,r)),s=h}return s.sharedGetter=!0,s.assign=function(e,n,r){return _n(e,r,t,n,t)},a[t]=s,s}function Hn(t){return S(t.valueOf)?t.valueOf():go.call(t)}function Ln(){var t=ce(),e=ce();this.$get=["$filter","$sniffer",function(n,r){function i(t){var e=t;return t.sharedGetter&&(e=function(e,n){return t(e,n)},e.literal=t.literal,e.constant=t.constant,e.assign=t.assign),e}function a(t,e){for(var n=0,r=t.length;r>n;n++){var i=t[n];i.constant||(i.inputs?a(i.inputs,e):-1===e.indexOf(i)&&e.push(i))}return e}function s(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=Hn(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function u(t,e,n,r){var i,o=r.$$inputs||(r.$$inputs=a(r.inputs,[]));if(1===o.length){var u=s;return o=o[0],t.$watch(function(t){var e=o(t);return s(e,u)||(i=r(t),u=e&&Hn(e)),i},e,n)}for(var c=[],l=0,f=o.length;f>l;l++)c[l]=s;return t.$watch(function(t){for(var e=!1,n=0,a=o.length;a>n;n++){var u=o[n](t);(e||(e=!s(u,c[n])))&&(c[n]=u&&Hn(u))}return e&&(i=r(t)),i},e,n)}function c(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,S(e)&&e.apply(this,arguments),g(t)&&r.$$postDigest(function(){g(o)&&i()})},n)}function l(t,e,n,r){function i(t){var e=!0;return o(t,function(t){g(t)||(e=!1)}),e}var a,s;return a=t.$watch(function(t){return r(t)},function(t,n,r){s=t,S(e)&&e.call(this,t,n,r),i(t)&&r.$$postDigest(function(){i(s)&&a()})},n)}function f(t,e,n,r){var i;return i=t.$watch(function(t){return r(t)},function(){S(e)&&e.apply(this,arguments),i()},n)}function h(t,e){if(!e)return t;var n=t.$$watchDelegate,r=n!==l&&n!==c,i=r?function(n,r){var i=t(n,r);return e(i,n,r)}:function(n,r){var i=t(n,r),o=e(i,n,r);return g(i)?o:i};return t.$$watchDelegate&&t.$$watchDelegate!==u?i.$$watchDelegate=t.$$watchDelegate:e.$stateful||(i.$$watchDelegate=u,i.inputs=[t]),i}var p={csp:r.csp,expensiveChecks:!1},$={csp:r.csp,expensiveChecks:!0};return function(r,o,a){var s,m,v;switch(typeof r){case"string":v=r=r.trim();var g=a?e:t;if(s=g[v],!s){":"===r.charAt(0)&&":"===r.charAt(1)&&(m=!0,r=r.substring(2));var y=a?$:p,w=new po(y),b=new $o(w,n,y);s=b.parse(r),s.constant?s.$$watchDelegate=f:m?(s=i(s),s.$$watchDelegate=s.literal?l:c):s.inputs&&(s.$$watchDelegate=u),g[v]=s}return h(s,o);case"function":return h(r,o);default:return h(d,o)}}}]}function Bn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Wn(function(e){t.$evalAsync(e)},e)}]}function zn(){this.$get=["$browser","$exceptionHandler",function(t,e){return Wn(function(e){t.defer(e)},e)}]}function Wn(t,e){function i(t,e,n){function r(e){return function(n){i||(i=!0,e.call(t,n))}}var i=!1;return[r(e),r(n)]}function a(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function u(t){var r,i,o;o=t.pending,t.processScheduled=!1,t.pending=n;for(var a=0,s=o.length;s>a;++a){i=o[a][0],r=o[a][t.status];try{S(r)?i.resolve(r(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(u){i.reject(u),e(u)}}}function c(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){u(e)}))}function l(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function f(t){var e=new l,n=0,r=li(t)?[]:{};return o(t,function(t,i){n++,v(t).then(function(t){r.hasOwnProperty(i)||(r[i]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(i)||e.reject(t)})}),0===n&&e.resolve(r),e.promise}var h=r("$q",TypeError),p=function(){return new l};a.prototype={then:function(t,e,n){var r=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&c(this.$$state),r.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return m(e,!0,t)},function(e){return m(e,!1,t)},e)}},l.prototype={resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(h("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(y(t)||S(t))&&(n=t&&t.then),S(n)?(this.promise.$$state.status=-1,n.call(t,r[0],r[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,c(this.promise.$$state))}catch(o){r[1](o),e(o)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,c(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&t(function(){for(var t,i,o=0,a=r.length;a>o;o++){i=r[o][0],t=r[o][3];try{i.notify(S(t)?t(n):n)}catch(s){e(s)}}})}};var d=function(t){var e=new l;return e.reject(t),e.promise},$=function(t,e){var n=new l;return e?n.resolve(t):n.reject(t),n.promise},m=function(t,e,n){var r=null;try{S(n)&&(r=n())}catch(i){return $(i,!1)}return V(r)?r.then(function(){return $(t,e)},function(t){return $(t,!1)}):$(t,e)},v=function(t,e,n,r){var i=new l;return i.resolve(t),i.promise.then(e,n,r)},g=function w(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}if(!S(t))throw h("norslvr","Expected resolverFn, got '{0}'",t);if(!(this instanceof w))return new w(t);var r=new l;return t(e,n),r.promise};return g.defer=p,g.reject=d,g.when=v,g.all=f,g}function Gn(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Yn(){var t=10,e=r("$rootScope"),n=null,a=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,s,u,l){function f(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function h(t){if(b.$$phase)throw e("inprog","{0} already in progress",b.$$phase);b.$$phase=t}function p(){b.$$phase=null}function $(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function m(){}function g(){for(;k.length;)try{k.shift()()}catch(t){s(t)}a=null}function w(){null===a&&(a=l.defer(function(){b.$apply(g)}))}f.prototype={constructor:f,$new:function(t,e){function n(){r.$$destroyed=!0}var r;return e=e||this,t?(r=new f,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=c(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),r=new this.$$ChildScope),r.$parent=e,r.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=r,e.$$childTail=r):e.$$childHead=e.$$childTail=r,(t||e!=this)&&r.$on("$destroy",n),r},$watch:function(t,e,r){var i=u(t);if(i.$$watchDelegate)return i.$$watchDelegate(this,e,r,i);var o=this,a=o.$$watchers,s={fn:e,last:m,get:i,exp:t,eq:!!r};return n=null,S(e)||(s.fn=d),a||(a=o.$$watchers=[]),a.unshift(s),function(){P(a,s),n=null}},$watchGroup:function(t,e){function n(){u=!1,c?(c=!1,e(i,i,s)):e(i,r,s)}var r=new Array(t.length),i=new Array(t.length),a=[],s=this,u=!1,c=!0;if(!t.length){var l=!0;return s.$evalAsync(function(){l&&e(i,i,s)}),function(){l=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){i[0]=t,r[0]=n,e(i,t===n?i:r,o)}):(o(t,function(t,e){var o=s.$watch(t,function(t,o){i[e]=t,r[e]=o,u||(u=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){o=t;var e,n,r,s,u;if(!v(o)){if(y(o))if(i(o)){a!==p&&(a=p,m=a.length=0,f++),e=o.length,m!==e&&(f++,a.length=m=e);for(var c=0;e>c;c++)u=a[c],s=o[c],r=u!==u&&s!==s,r||u===s||(f++,a[c]=s)}else{a!==d&&(a=d={},m=0,f++),e=0;for(n in o)o.hasOwnProperty(n)&&(e++,s=o[n],u=a[n],n in a?(r=u!==u&&s!==s,r||u===s||(f++,a[n]=s)):(m++,a[n]=s,f++));if(m>e){f++;for(n in a)o.hasOwnProperty(n)||(m--,delete a[n])}}else a!==o&&(a=o,f++);return f}}function r(){if($?($=!1,e(o,o,c)):e(o,s,c),l)if(y(o))if(i(o)){s=new Array(o.length);for(var t=0;t<o.length;t++)s[t]=o[t]}else{s={};for(var n in o)Yr.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,c=this,l=e.length>1,f=0,h=u(t,n),p=[],d={},$=!0,m=0;return this.$watch(h,r)},$digest:function(){var r,i,o,u,c,f,d,$,v,y,w=t,k=this,A=[];h("$digest"),l.$$checkUrlChange(),this===b&&null!==a&&(l.defer.cancel(a),g()),n=null;do{for(f=!1,$=k;x.length;){try{y=x.shift(),y.scope.$eval(y.expression,y.locals)}catch(E){s(E)}n=null}t:do{if(u=$.$$watchers)for(c=u.length;c--;)try{if(r=u[c])if((i=r.get($))===(o=r.last)||(r.eq?q(i,o):"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))){if(r===n){f=!1;
break t}}else f=!0,n=r,r.last=r.eq?R(i,null):i,r.fn(i,o===m?i:o,$),5>w&&(v=4-w,A[v]||(A[v]=[]),A[v].push({msg:S(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:i,oldVal:o}))}catch(E){s(E)}if(!(d=$.$$childHead||$!==k&&$.$$nextSibling))for(;$!==k&&!(d=$.$$nextSibling);)$=$.$parent}while($=d);if((f||x.length)&&!w--)throw p(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,A)}while(f||x.length);for(p();C.length;)try{C.shift()()}catch(E){s(E)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==b){for(var e in this.$$listenerCount)$(this,this.$$listenerCount[e],e);t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=d,this.$on=this.$watch=this.$watchGroup=function(){return d},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(t,e){return u(t)(this,e)},$evalAsync:function(t,e){b.$$phase||x.length||l.defer(function(){x.length&&b.$digest()}),x.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){C.push(t)},$apply:function(t){try{return h("$apply"),this.$eval(t)}catch(e){s(e)}finally{p();try{b.$digest()}catch(e){throw s(e),e}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&k.push(e),w()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,$(i,1,t))}},$emit:function(t){var e,n,r,i=[],o=this,a=!1,u={name:t,targetScope:o,stopPropagation:function(){a=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=I([u],arguments,1);do{for(e=o.$$listeners[t]||i,u.currentScope=o,n=0,r=e.length;r>n;n++)if(e[n])try{e[n].apply(null,c)}catch(l){s(l)}else e.splice(n,1),n--,r--;if(a)return u.currentScope=null,u;o=o.$parent}while(o);return u.currentScope=null,u},$broadcast:function(t){var e=this,n=e,r=e,i={name:t,targetScope:e,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!e.$$listenerCount[t])return i;for(var o,a,u,c=I([i],arguments,1);n=r;){for(i.currentScope=n,o=n.$$listeners[t]||[],a=0,u=o.length;u>a;a++)if(o[a])try{o[a].apply(null,c)}catch(l){s(l)}else o.splice(a,1),a--,u--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==e&&n.$$nextSibling))for(;n!==e&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var b=new f,x=b.$$asyncQueue=[],C=b.$$postDigestQueue=[],k=b.$$applyAsyncQueue=[];return b}]}function Zn(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return g(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return g(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return i=ir(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function Jn(t){if("self"===t)return t;if(w(t)){if(t.indexOf("***")>-1)throw yo("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=hi(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(C(t))return new RegExp("^"+t.source+"$");throw yo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Kn(t){var e=[];return g(t)&&o(t,function(t){e.push(Jn(t))}),e}function Xn(){this.SCE_CONTEXTS=wo;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Kn(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Kn(t)),e},this.$get=["$injector",function(r){function i(t,e){return"self"===t?or(e):!!t.exec(e.href)}function o(n){var r,o,a=ir(n.toString()),s=!1;for(r=0,o=t.length;o>r;r++)if(i(t[r],a)){s=!0;break}if(s)for(r=0,o=e.length;o>r;r++)if(i(e[r],a)){s=!1;break}return s}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function s(t,e){var r=h.hasOwnProperty(t)?h[t]:null;if(!r)throw yo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||e===n||""===e)return e;if("string"!=typeof e)throw yo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new r(e)}function u(t){return t instanceof f?t.$$unwrapTrustedValue():t}function c(t,e){if(null===e||e===n||""===e)return e;var r=h.hasOwnProperty(t)?h[t]:null;if(r&&e instanceof r)return e.$$unwrapTrustedValue();if(t===wo.RESOURCE_URL){if(o(e))return e;throw yo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===wo.HTML)return l(e);throw yo("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(){throw yo("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(l=r.get("$sanitize"));var f=a(),h={};return h[wo.HTML]=a(f),h[wo.CSS]=a(f),h[wo.URL]=a(f),h[wo.JS]=a(f),h[wo.RESOURCE_URL]=a(h[wo.URL]),{trustAs:s,getTrusted:c,valueOf:u}}]}function Qn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>Xr)throw yo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=_(wo);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=$),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(wo,function(t,e){var n=Gr(e);r[$e("parse_as_"+n)]=function(e){return i(t,e)},r[$e("get_trusted_"+n)]=function(e){return a(t,e)},r[$e("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function tr(){this.$get=["$window","$document",function(t,e){var n,r,i={},o=h((/android (\d+)/.exec(Gr((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,c=s.body&&s.body.style,l=!1,f=!1;if(c){for(var p in c)if(r=u.exec(p)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),l=!!("transition"in c||n+"Transition"in c),f=!!("animation"in c||n+"Animation"in c),!o||l&&f||(l=w(s.body.style.webkitTransition),f=w(s.body.style.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>o||a),hasEvent:function(t){if("input"===t&&11>=Xr)return!1;if(v(i[t])){var e=s.createElement("div");i[t]="on"+t in e}return i[t]},csp:pi(),vendorPrefix:n,transitions:l,animations:f,android:o}}]}function er(){this.$get=["$templateCache","$http","$q",function(t,e,n){function r(i,o){function a(t){if(!o)throw Gi("tpload","Failed to load template: {0}",i);return n.reject(t)}r.totalPendingRequests++;var s=e.defaults&&e.defaults.transformResponse;li(s)?s=s.filter(function(t){return t!==on}):s===on&&(s=null);var u={cache:t,transformResponse:s};return e.get(i,u)["finally"](function(){r.totalPendingRequests--}).then(function(t){return t.data},a)}return r.totalPendingRequests=0,r}]}function nr(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={};return r.findBindings=function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return o(r,function(t){var r=si.element(t).data("$binding");r&&o(r,function(r){if(n){var o=new RegExp("(^|\\s)"+hi(e)+"(\\s|\\||$)");o.test(r)&&i.push(t)}else-1!=r.indexOf(e)&&i.push(t)})}),i},r.findModels=function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+e+'"]',s=t.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},r.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},r}]}function rr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){function o(o,s,u){var c,l=g(u)&&!u,f=(l?r:n).defer(),h=f.promise;return c=e.defer(function(){try{f.resolve(o())}catch(e){f.reject(e),i(e)}finally{delete a[h.$$timeoutId]}l||t.$apply()},s),h.$$timeoutId=c,a[c]=f,h}var a={};return o.cancel=function(t){return t&&t.$$timeoutId in a?(a[t.$$timeoutId].reject("canceled"),delete a[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},o}]}function ir(t){var e=t;return Xr&&(bo.setAttribute("href",e),e=bo.href),bo.setAttribute("href",e),{href:bo.href,protocol:bo.protocol?bo.protocol.replace(/:$/,""):"",host:bo.host,search:bo.search?bo.search.replace(/^\?/,""):"",hash:bo.hash?bo.hash.replace(/^#/,""):"",hostname:bo.hostname,port:bo.port,pathname:"/"===bo.pathname.charAt(0)?bo.pathname:"/"+bo.pathname}}function or(t){var e=w(t)?ir(t):t;return e.protocol===xo.protocol&&e.host===xo.host}function ar(){this.$get=m(t)}function sr(t){function e(r,i){if(y(r)){var a={};return o(r,function(t,n){a[n]=e(n,t)}),a}return t.factory(r+n,i)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",fr),e("date",xr),e("filter",ur),e("json",Sr),e("limitTo",Cr),e("lowercase",Eo),e("number",hr),e("orderBy",kr),e("uppercase",Oo)}function ur(){return function(t,e,n){if(!li(t))return t;var r,i;switch(typeof e){case"function":r=e;break;case"boolean":case"number":case"string":i=!0;case"object":r=cr(e,n,i);break;default:return t}return t.filter(r)}}function cr(t,e,n){var r,i=y(t)&&"$"in t;return e===!0?e=q:S(e)||(e=function(t,e){return y(t)||y(e)?!1:(t=Gr(""+t),e=Gr(""+e),-1!==t.indexOf(e))}),r=function(r){return i&&!y(r)?lr(r,t.$,e,!1):lr(r,t,e,n)}}function lr(t,e,n,r,i){var o=typeof t,a=typeof e;if("string"===a&&"!"===e.charAt(0))return!lr(t,e.substring(1),n,r);if(li(t))return t.some(function(t){return lr(t,e,n,r)});switch(o){case"object":var s;if(r){for(s in t)if("$"!==s.charAt(0)&&lr(t[s],e,n,!0))return!0;return i?!1:lr(t,e,n,!1)}if("object"===a){for(s in e){var u=e[s];if(!S(u)){var c="$"===s,l=c?t:t[s];if(!lr(l,u,n,c,c))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function fr(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return v(n)&&(n=e.CURRENCY_SYM),v(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:pr(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function hr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:pr(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function pr(t,e,n,r,i){if(!isFinite(t)||y(t))return"";var o=0>t;t=Math.abs(t);var a=t+"",s="",u=[],c=!1;if(-1!==a.indexOf("e")){var l=a.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>i+1?t=0:(s=a,c=!0)}if(c)i>0&&1>t&&(s=t.toFixed(i),t=parseFloat(s));else{var f=(a.split(So)[1]||"").length;v(i)&&(i=Math.min(Math.max(e.minFrac,f),e.maxFrac)),t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i);var h=(""+t).split(So),p=h[0];h=h[1]||"";var d,$=0,m=e.lgSize,g=e.gSize;if(p.length>=m+g)for($=p.length-m,d=0;$>d;d++)($-d)%g===0&&0!==d&&(s+=n),s+=p.charAt(d);for(d=$;d<p.length;d++)(p.length-d)%m===0&&0!==d&&(s+=n),s+=p.charAt(d);for(;h.length<i;)h+="0";i&&"0"!==i&&(s+=r+h.substr(0,i))}return 0===t&&(o=!1),u.push(o?e.negPre:e.posPre,s,o?e.negSuf:e.posSuf),u.join("")}function dr(t,e,n){var r="";for(0>t&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function $r(t,e,n,r){return n=n||0,function(i){var o=i["get"+t]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),dr(o,e,r)}}function mr(t,e){return function(n,r){var i=n["get"+t](),o=Zr(e?"SHORT"+t:t);return r[o][i]}}function vr(t){var e=-1*t.getTimezoneOffset(),n=e>=0?"+":"";return n+=dr(Math[e>0?"floor":"ceil"](e/60),2)+dr(Math.abs(e%60),2)}function gr(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function yr(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function wr(t){return function(e){var n=gr(e.getFullYear()),r=yr(e),i=+r-+n,o=1+Math.round(i/6048e5);return dr(o,t)}}function br(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function xr(t){function e(t){var e;if(e=t.match(n)){var r=new Date(0),i=0,o=0,a=e[8]?r.setUTCFullYear:r.setFullYear,s=e[8]?r.setUTCHours:r.setHours;e[9]&&(i=h(e[9]+e[10]),o=h(e[9]+e[11])),a.call(r,h(e[1]),h(e[2])-1,h(e[3]));var u=h(e[4]||0)-i,c=h(e[5]||0)-o,l=h(e[6]||0),f=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(r,u,c,l,f),r}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,u="",c=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,w(n)&&(n=Ao.test(n)?h(n):e(n)),b(n)&&(n=new Date(n)),!x(n))return n;for(;r;)s=ko.exec(r),s?(c=I(c,s,1),r=c.pop()):(c.push(r),r=null);return i&&"UTC"===i&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),o(c,function(e){a=Co[e],u+=a?a(n,t.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function Sr(){return function(t,e){return v(e)&&(e=2),L(t,e)}}function Cr(){return function(t,e){return b(t)&&(t=t.toString()),li(t)||w(t)?(e=1/0===Math.abs(Number(e))?Number(e):h(e),e?e>0?t.slice(0,e):t.slice(e):w(t)?"":[]):t}}function kr(t){return function(e,n,r){function o(t,e){for(var r=0;r<n.length;r++){var i=n[r](t,e);if(0!==i)return i}return 0}function a(t,e){return e?function(e,n){return t(n,e)}:t}function s(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function u(t){return null===t?"null":"function"==typeof t.valueOf&&(t=t.valueOf(),s(t))?t:"function"==typeof t.toString&&(t=t.toString(),s(t))?t:""}function c(t,e){var n=typeof t,r=typeof e;return n===r&&"object"===n&&(t=u(t),e=u(e)),n===r?("string"===n&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:e>t?-1:1):r>n?-1:1}return i(e)?(n=li(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(e){var n=!1,r=e||$;if(w(e)){if(("+"==e.charAt(0)||"-"==e.charAt(0))&&(n="-"==e.charAt(0),e=e.substring(1)),""===e)return a(c,n);if(r=t(e),r.constant){var i=r();return a(function(t,e){return c(t[i],e[i])},n)}}return a(function(t,e){return c(r(t),r(e))},n)}),ni.call(e).sort(a(o,r))):e}}function Ar(t){return S(t)&&(t={link:t}),t.restrict=t.restrict||"AC",m(t)}function Er(t,e){t.$name=e}function Or(t,e,r,i,a){var s=this,u=[],c=s.$$parentForm=t.parent().controller("form")||Vo;s.$error={},s.$$success={},s.$pending=n,s.$name=a(e.name||e.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,c.$addControl(s),s.$rollbackViewValue=function(){o(u,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){o(u,function(t){t.$commitViewValue()})},s.$addControl=function(t){ae(t.$name,"input"),u.push(t),t.$name&&(s[t.$name]=t)},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],o(s.$pending,function(e,n){s.$setValidity(n,null,t)}),o(s.$error,function(e,n){s.$setValidity(n,null,t)}),o(s.$$success,function(e,n){s.$setValidity(n,null,t)}),P(u,t)},Lr({ctrl:this,$element:t,set:function(t,e,n){var r=t[e];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(P(r,n),0===r.length&&delete t[e])},parentForm:c,$animate:i}),s.$setDirty=function(){i.removeClass(t,pa),i.addClass(t,da),s.$dirty=!0,s.$pristine=!1,c.$setDirty()},s.$setPristine=function(){i.setClass(t,pa,da+" "+No),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(u,function(t){t.$setPristine()})},s.$setUntouched=function(){o(u,function(t){t.$setUntouched()})},s.$setSubmitted=function(){i.addClass(t,No),s.$submitted=!0,c.$setSubmitted()}}function Tr(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function Mr(t,e,n,r,i,o){Vr(t,e,n,r,i,o),Tr(r)}function Vr(t,e,n,r,i,o){var a=Gr(e[0].type);if(!i.android){var s=!1;e.on("compositionstart",function(){s=!0}),e.on("compositionend",function(){s=!1,u()})}var u=function(t){if(c&&(o.defer.cancel(c),c=null),!s){var i=e.val(),u=t&&t.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=fi(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))e.on("input",u);else{var c,l=function(t,e,n){c||(c=o.defer(function(){c=null,e&&e.value===n||u(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||l(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",l)}e.on("change",u),r.$render=function(){e.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function Nr(t,e){if(x(t))return t;if(w(t)){Ho.lastIndex=0;var n=Ho.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,c=gr(r),l=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=e.getMilliseconds()),new Date(r,0,c.getDate()+l,o,a,s,u)}}return 0/0}function Dr(t,e){return function(n,r){var i,a;if(x(n))return n;if(w(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ro.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(t,n){n<e.length&&(a[e[n]]=+t)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return 0/0}}function jr(t,e,r,i){return function(o,a,s,u,c,l,f){function h(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function p(t){return g(t)?x(t)?t:r(t):n}Pr(o,a,s,u),Vr(o,a,s,u,c,l);var d,$=u&&u.$options&&u.$options.timezone;if(u.$$parserName=t,u.$parsers.push(function(t){if(u.$isEmpty(t))return null;if(e.test(t)){var i=r(t,d);return"UTC"===$&&i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),i}return n}),u.$formatters.push(function(t){if(t&&!x(t))throw ga("datefmt","Expected `{0}` to be a date",t);if(h(t)){if(d=t,d&&"UTC"===$){var e=6e4*d.getTimezoneOffset();d=new Date(d.getTime()+e)}return f("date")(t,i,$)}return d=null,""}),g(s.min)||s.ngMin){var m;u.$validators.min=function(t){return!h(t)||v(m)||r(t)>=m},s.$observe("min",function(t){m=p(t),u.$validate()})}if(g(s.max)||s.ngMax){var y;u.$validators.max=function(t){return!h(t)||v(y)||r(t)<=y},s.$observe("max",function(t){y=p(t),u.$validate()})}}}function Pr(t,e,r,i){var o=e[0],a=i.$$hasNativeValidators=y(o.validity);a&&i.$parsers.push(function(t){var r=e.prop(Wr)||{};return r.badInput&&!r.typeMismatch?n:t})}function Rr(t,e,r,i,o,a){if(Pr(t,e,r,i),Vr(t,e,r,i,o,a),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:Io.test(t)?parseFloat(t):n}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!b(t))throw ga("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),g(r.min)||r.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||v(s)||t>=s},r.$observe("min",function(t){g(t)&&!b(t)&&(t=parseFloat(t,10)),s=b(t)&&!isNaN(t)?t:n,i.$validate()})}if(g(r.max)||r.ngMax){var u;i.$validators.max=function(t){return i.$isEmpty(t)||v(u)||u>=t},r.$observe("max",function(t){g(t)&&!b(t)&&(t=parseFloat(t,10)),u=b(t)&&!isNaN(t)?t:n,i.$validate()})}}function _r(t,e,n,r,i,o){Vr(t,e,n,r,i,o),Tr(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||_o.test(n)}}function qr(t,e,n,r,i,o){Vr(t,e,n,r,i,o),Tr(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||qo.test(n)}}function Ir(t,e,n,r){v(n.name)&&e.attr("name",c());var i=function(t){e[0].checked&&r.$setViewValue(n.value,t&&t.type)};e.on("click",i),r.$render=function(){var t=n.value;e[0].checked=t==r.$viewValue},n.$observe("value",r.$render)}function Ur(t,e,n,i,o){var a;if(g(i)){if(a=t(i),!a.constant)throw r("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return a(e)}return o}function Fr(t,e,n,r,i,o,a,s){var u=Ur(s,t,"ngTrueValue",n.ngTrueValue,!0),c=Ur(s,t,"ngFalseValue",n.ngFalseValue,!1),l=function(t){r.$setViewValue(e[0].checked,t&&t.type)};e.on("click",l),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return t===!1},r.$formatters.push(function(t){return q(t,u)}),r.$parsers.push(function(t){return t?u:c})}function Hr(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i==e[o])continue t;n.push(i)}return n}function i(t){if(li(t))return t;if(w(t))return t.split(" ");if(y(t)){var e=[];return o(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e}return t}return{restrict:"AC",link:function(a,s,u){function c(t){var e=f(t,1);u.$addClass(e)}function l(t){var e=f(t,-1);u.$removeClass(e)}function f(t,e){var n=s.data("$classCounts")||{},r=[];return o(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&r.push(t))}),s.data("$classCounts",n),r.join(" ")}function h(t,e){var i=r(e,t),o=r(t,e);i=f(i,1),o=f(o,-1),i&&i.length&&n.addClass(s,i),o&&o.length&&n.removeClass(s,o)}function p(t){if(e===!0||a.$index%2===e){var n=i(t||[]);if(d){if(!q(t,d)){var r=i(d);h(r,n)}}else c(n)}d=_(t)}var d;a.$watch(u[t],p,!0),u.$observe("class",function(){p(a.$eval(u[t]))}),"ngClass"!==t&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(u[t]));o===e?c(s):l(s)}})}}}]}function Lr(t){function e(t,e,u){e===n?r("$pending",t,u):i("$pending",t,u),M(e)?e?(f(s.$error,t,u),l(s.$$success,t,u)):(l(s.$error,t,u),f(s.$$success,t,u)):(f(s.$error,t,u),f(s.$$success,t,u)),s.$pending?(o(va,!0),s.$valid=s.$invalid=n,a("",null)):(o(va,!1),s.$valid=Br(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var c;c=s.$pending&&s.$pending[t]?n:s.$error[t]?!1:s.$$success[t]?!0:null,a(t,c),h.$setValidity(t,c,s)}function r(t,e,n){s[t]||(s[t]={}),l(s[t],e,n)}function i(t,e,r){s[t]&&f(s[t],e,r),Br(s[t])&&(s[t]=n)}function o(t,e){e&&!c[t]?(p.addClass(u,t),c[t]=!0):!e&&c[t]&&(p.removeClass(u,t),c[t]=!1)}function a(t,e){t=t?"-"+ne(t,"-"):"",o(fa+t,e===!0),o(ha+t,e===!1)}var s=t.ctrl,u=t.$element,c={},l=t.set,f=t.unset,h=t.parentForm,p=t.$animate;c[ha]=!(c[fa]=u.hasClass(fa)),s.$setValidity=e}function Br(t){if(t)for(var e in t)return!1;return!0}var zr=/^\/(.+)\/([a-z]*)$/,Wr="validity",Gr=function(t){return w(t)?t.toLowerCase():t},Yr=Object.prototype.hasOwnProperty,Zr=function(t){return w(t)?t.toUpperCase():t},Jr=function(t){return w(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Kr=function(t){return w(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(Gr=Jr,Zr=Kr);var Xr,Qr,ti,ei,ni=[].slice,ri=[].splice,ii=[].push,oi=Object.prototype.toString,ai=r("ng"),si=t.angular||(t.angular={}),ui=0;Xr=e.documentMode,d.$inject=[],$.$inject=[];var ci,li=Array.isArray,fi=function(t){return w(t)?t.trim():t},hi=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},pi=function(){if(g(pi.isActive_))return pi.isActive_;var t=!(!e.querySelector("[ng-csp]")&&!e.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(n){t=!0}return pi.isActive_=t},di=["ng-","data-ng-","ng:","x-ng-"],$i=/[A-Z]/g,mi=!1,vi=1,gi=3,yi=8,wi=9,bi=11,xi={full:"1.3.14",major:1,minor:3,dot:14,codeName:"instantaneous-browserification"};we.expando="ng339";var Si=we.cache={},Ci=1,ki=function(t,e,n){t.addEventListener(e,n,!1)},Ai=function(t,e,n){t.removeEventListener(e,n,!1)};we._data=function(t){return this.cache[t[this.expando]]||{}};var Ei=/([\:\-\_]+(.))/g,Oi=/^moz([A-Z])/,Ti={mouseleave:"mouseout",mouseenter:"mouseover"},Mi=r("jqLite"),Vi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ni=/<|&#?\w+;/,Di=/<([\w:]+)/,ji=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pi.optgroup=Pi.option,Pi.tbody=Pi.tfoot=Pi.colgroup=Pi.caption=Pi.thead,Pi.th=Pi.td;var Ri=we.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===e.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),we(t).on("load",r))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return Qr(t>=0?this[t]:this[this.length+t])},length:0,push:ii,sort:[].sort,splice:[].splice},_i={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){_i[Gr(t)]=t});var qi={};o("input,select,option,textarea,button,form,details".split(","),function(t){qi[t]=!0});var Ii={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:Ae,removeData:Ce},function(t,e){we[e]=t}),o({data:Ae,inheritedData:Ne,scope:function(t){return Qr.data(t,"$scope")||Ne(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return Qr.data(t,"$isolateScope")||Qr.data(t,"$isolateScopeNoTemplate")},controller:Ve,injector:function(t){return Ne(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Ee,css:function(t,e,n){return e=$e(e),g(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,r){var i=Gr(e);if(_i[i]){if(!g(r))return t[e]||(t.attributes.getNamedItem(e)||d).specified?i:n;r?(t[e]=!0,t.setAttribute(e,i)):(t[e]=!1,t.removeAttribute(i))}else if(g(r))t.setAttribute(e,r);else if(t.getAttribute){var o=t.getAttribute(e,2);return null===o?n:o}},prop:function(t,e,n){return g(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(v(e)){var n=t.nodeType;return n===vi||n===gi?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(v(e)){if(t.multiple&&"select"===j(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return v(e)?t.innerHTML:(xe(t,!0),void(t.innerHTML=e))},empty:De},function(t,e){we.prototype[e]=function(e,r){var i,o,a=this.length;if(t!==De&&(2==t.length&&t!==Ee&&t!==Ve?e:r)===n){if(y(e)){for(i=0;a>i;i++)if(t===Ae)t(this[i],e);else for(o in e)t(this[i],o,e[o]);return this}for(var s=t.$dv,u=s===n?Math.min(a,1):a,c=0;u>c;c++){var l=t(this[c],e,r);s=s?s+l:l}return s}for(i=0;a>i;i++)t(this[i],e,r);return this}}),o({removeData:Ce,on:function za(t,e,n,r){if(g(r))throw Mi("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ve(t)){var i=ke(t,!0),o=i.events,a=i.handle;a||(a=i.handle=qe(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],u=s.length;u--;){e=s[u];var c=o[e];c||(o[e]=[],"mouseenter"===e||"mouseleave"===e?za(t,Ti[e],function(t){var n=this,r=t.relatedTarget;(!r||r!==n&&!n.contains(r))&&a(t,e)}):"$destroy"!==e&&ki(t,e,a),c=o[e]),c.push(n)}}},off:Se,one:function(t,e,n){t=Qr(t),t.on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;xe(t),o(new we(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===vi&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===vi||n===bi){e=new we(e);for(var r=0,i=e.length;i>r;r++){var o=e[r];t.appendChild(o)}}},prepend:function(t,e){if(t.nodeType===vi){var n=t.firstChild;o(new we(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){e=Qr(e).eq(0).clone()[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:je,detach:function(t){je(t,!0)},after:function(t,e){var n=t,r=t.parentNode;e=new we(e);for(var i=0,o=e.length;o>i;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Te,removeClass:Oe,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var r=n;v(r)&&(r=!Ee(t,e)),(r?Te:Oe)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==bi?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:be,triggerHandler:function(t,e,n){var r,i,a,s=e.type||e,u=ke(t),c=u&&u.events,l=c&&c[s];l&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:d,type:s,target:t},e.type&&(r=f(r,e)),i=_(l),a=n?[r].concat(n):[r],o(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,a)}))}},function(t,e){we.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;a>o;o++)v(i)?(i=t(this[o],e,n,r),g(i)&&(i=Qr(i))):Me(i,t(this[o],e,n,r));return g(i)?i:this},we.prototype.bind=we.prototype.on,we.prototype.unbind=we.prototype.off}),Fe.prototype={put:function(t,e){this[Ue(t,this.nextUid)]=e},get:function(t){return this[Ue(t,this.nextUid)]},remove:function(t){var e=this[t=Ue(t,this.nextUid)];return delete this[t],e}};var Ui=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Fi=/,/,Hi=/^\s*(_?)(\S+?)\1\s*$/,Li=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Bi=r("$injector");Be.$$annotate=Le;var zi=r("$animate"),Wi=["$provide",function(t){this.$$selectors={},this.register=function(e,n){var r=e+"-animation";if(e&&"."!=e.charAt(0))throw zi("notcsel","Expecting class selector starting with '.' got '{0}'.",e);this.$$selectors[e.substr(1)]=r,t.factory(r,n)},this.classNameFilter=function(t){return 1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(t,e,n){function r(e){var r,i=t.defer();return i.promise.$$cancelFn=function(){r&&r()},n.$$postDigest(function(){r=e(function(){i.resolve()})}),i.promise}function i(t,e){var n=[],r=[],i=ce();return o((t.attr("class")||"").split(/\s+/),function(t){i[t]=!0}),o(e,function(t,e){var o=i[e];t===!1&&o?r.push(e):t!==!0||o||n.push(e)}),n.length+r.length>0&&[n.length?n:null,r.length?r:null]}function a(t,e,n){for(var r=0,i=e.length;i>r;++r){var o=e[r];t[o]=n}}function s(){return c||(c=t.defer(),e(function(){c.resolve(),c=null})),c.promise}function u(t,e){if(si.isObject(e)){var n=f(e.from||{},e.to||{});t.css(n)}}var c;return{animate:function(t,e,n){return u(t,{from:e,to:n}),s()},enter:function(t,e,n,r){return u(t,r),n?n.after(t):e.prepend(t),s()},leave:function(t){return t.remove(),s()},move:function(t,e,n,r){return this.enter(t,e,n,r)},addClass:function(t,e,n){return this.setClass(t,e,[],n)},$$addClassImmediately:function(t,e,n){return t=Qr(t),e=w(e)?e:li(e)?e.join(" "):"",o(t,function(t){Te(t,e)}),u(t,n),s()},removeClass:function(t,e,n){return this.setClass(t,[],e,n)},$$removeClassImmediately:function(t,e,n){return t=Qr(t),e=w(e)?e:li(e)?e.join(" "):"",o(t,function(t){Oe(t,e)}),u(t,n),s()},setClass:function(t,e,n,o){var s=this,u="$$animateClasses",c=!1;t=Qr(t);var l=t.data(u);l?o&&l.options&&(l.options=si.extend(l.options||{},o)):(l={classes:{},options:o},c=!0);var f=l.classes;return e=li(e)?e:e.split(" "),n=li(n)?n:n.split(" "),a(f,e,!0),a(f,n,!1),c&&(l.promise=r(function(e){var n=t.data(u);if(t.removeData(u),n){var r=i(t,n.classes);r&&s.$$setClassImmediately(t,r[0],r[1],n.options)}e()}),t.data(u,l)),l.promise},$$setClassImmediately:function(t,e,n,r){return e&&this.$$addClassImmediately(t,e),n&&this.$$removeClassImmediately(t,n),u(t,r),s()},enabled:d,cancel:d}}]}],Gi=r("$compile");Ke.$inject=["$provide","$$sanitizeUriProvider"];var Yi=/^((?:x|data)[\:\-_])/i,Zi=r("$controller"),Ji="application/json",Ki={"Content-Type":Ji+";charset=utf-8"},Xi=/^\[|^\{(?!\{)/,Qi={"[":/]$/,"{":/}$/},to=/^\)\]\}',?\n/,eo=r("$interpolate"),no=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ro={http:80,https:443,ftp:21},io=r("$location"),oo={$$html5:!1,$$replace:!1,absUrl:Tn("$$absUrl"),url:function(t){if(v(t))return this.$$url;
var e=no.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Tn("$$protocol"),host:Tn("$$host"),port:Tn("$$port"),path:Mn("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(w(t)||b(t))t=t.toString(),this.$$search=G(t);else{if(!y(t))throw io("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=R(t,{}),o(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:v(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Mn("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([On,En,An],function(t){t.prototype=Object.create(oo),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==An||!this.$$html5)throw io("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(e)?null:e,this}});var ao=r("$parse"),so=Function.prototype.call,uo=Function.prototype.apply,co=Function.prototype.bind,lo=ce();o({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(t,e){t.constant=t.literal=t.sharedGetter=!0,lo[e]=t}),lo["this"]=function(t){return t},lo["this"].sharedGetter=!0;var fo=f(ce(),{"+":function(t,e,r,i){return r=r(t,e),i=i(t,e),g(r)?g(i)?r+i:r:g(i)?i:n},"-":function(t,e,n,r){return n=n(t,e),r=r(t,e),(g(n)?n:0)-(g(r)?r:0)},"*":function(t,e,n,r){return n(t,e)*r(t,e)},"/":function(t,e,n,r){return n(t,e)/r(t,e)},"%":function(t,e,n,r){return n(t,e)%r(t,e)},"===":function(t,e,n,r){return n(t,e)===r(t,e)},"!==":function(t,e,n,r){return n(t,e)!==r(t,e)},"==":function(t,e,n,r){return n(t,e)==r(t,e)},"!=":function(t,e,n,r){return n(t,e)!=r(t,e)},"<":function(t,e,n,r){return n(t,e)<r(t,e)},">":function(t,e,n,r){return n(t,e)>r(t,e)},"<=":function(t,e,n,r){return n(t,e)<=r(t,e)},">=":function(t,e,n,r){return n(t,e)>=r(t,e)},"&&":function(t,e,n,r){return n(t,e)&&r(t,e)},"||":function(t,e,n,r){return n(t,e)||r(t,e)},"!":function(t,e,n){return!n(t,e)},"=":!0,"|":!0}),ho={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},po=function(t){this.options=t};po.prototype={constructor:po,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(e))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=fo[e],o=fo[n],a=fo[r];if(i||o||a){var s=a?r:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||""===t||" "===t},isIdent:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=g(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw ao("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=Gr(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=ho[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var $o=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n};$o.ZERO=f(function(){return 0},{sharedGetter:!0,constant:!0}),$o.prototype={constructor:$o,parse:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e.literal=!!e.literal,e.constant=!!e.constant,e},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.peek().identifier&&this.peek().text in lo?t=lo[this.consume().text]:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e,n;e=this.expect("(","[",".");)"("===e.text?(t=this.functionCall(t,n),n=null):"["===e.text?(n=t,t=this.objectIndex(t)):"."===e.text?(n=t,t=this.fieldAccess(t)):this.throwError("IMPOSSIBLE");return t},throwError:function(t,e){throw ao("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},peekToken:function(){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return i?(this.tokens.shift(),i):!1},consume:function(t){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},unaryFn:function(t,e){var n=fo[t];return f(function(t,r){return n(t,r,e)},{constant:e.constant,inputs:[e]})},binaryFn:function(t,e,n,r){var i=fo[e];return f(function(e,r){return i(e,r,t,n)},{constant:t.constant&&n.constant,inputs:!r&&[t,n]})},identifier:function(){for(var t=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)t+=this.consume().text+this.consume().text;return Fn(t,this.options,this.text)},constant:function(){var t=this.consume().value;return f(function(){return t},{constant:!0,literal:!0})},statements:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.filterChain()),!this.expect(";"))return 1===t.length?t[0]:function(e,n){for(var r,i=0,o=t.length;o>i;i++)r=t[i](e,n);return r}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},filter:function(t){var e,r,i=this.$filter(this.consume().text);if(this.peek(":"))for(e=[],r=[];this.expect(":");)e.push(this.expression());var o=[t].concat(e||[]);return f(function(o,a){var s=t(o,a);if(r){r[0]=s;for(var u=e.length;u--;)r[u+1]=e[u](o,a);return i.apply(n,r)}return i(s)},{constant:!i.$stateful&&o.every(Rn),inputs:!i.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var t,e,n=this.ternary();return(e=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,e.index)+"] can not be assigned to",e),t=this.ternary(),f(function(e,r){return n.assign(e,t(e,r),r)},{inputs:[n,t]})):n},ternary:function(){var t,e,n=this.logicalOR();if((e=this.expect("?"))&&(t=this.assignment(),this.consume(":"))){var r=this.assignment();return f(function(e,i){return n(e,i)?t(e,i):r(e,i)},{constant:n.constant&&t.constant&&r.constant})}return n},logicalOR:function(){for(var t,e=this.logicalAND();t=this.expect("||");)e=this.binaryFn(e,t.text,this.logicalAND(),!0);return e},logicalAND:function(){for(var t,e=this.equality();t=this.expect("&&");)e=this.binaryFn(e,t.text,this.equality(),!0);return e},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e=this.binaryFn(e,t.text,this.relational());return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e=this.binaryFn(e,t.text,this.additive());return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.text,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.text,this.unary());return e},unary:function(){var t;return this.expect("+")?this.primary():(t=this.expect("-"))?this.binaryFn($o.ZERO,t.text,this.unary()):(t=this.expect("!"))?this.unaryFn(t.text,this.unary()):this.primary()},fieldAccess:function(t){var e=this.identifier();return f(function(r,i,o){var a=o||t(r,i);return null==a?n:e(a)},{assign:function(n,r,i){var o=t(n,i);return o||t.assign(n,o={},i),e.assign(o,r)}})},objectIndex:function(t){var e=this.text,r=this.expression();return this.consume("]"),f(function(i,o){var a,s=t(i,o),u=r(i,o);return Dn(u,e),s?a=jn(s[u],e):n},{assign:function(n,i,o){var a=Dn(r(n,o),e),s=jn(t(n,o),e);return s||t.assign(n,s={},o),s[a]=i}})},functionCall:function(t,e){var r=[];if(")"!==this.peekToken().text)do r.push(this.expression());while(this.expect(","));this.consume(")");var i=this.text,o=r.length?[]:null;return function(a,s){var u=e?e(a,s):g(e)?n:a,c=t(a,s,u)||d;if(o)for(var l=r.length;l--;)o[l]=jn(r[l](a,s),i);jn(u,i),Pn(c,i);var f=c.apply?c.apply(u,o):c(o[0],o[1],o[2],o[3],o[4]);return o&&(o.length=0),jn(f,i)}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),f(function(e,n){for(var r=[],i=0,o=t.length;o>i;i++)r.push(t[i](e,n));return r},{literal:!0,constant:t.every(Rn),inputs:t})},object:function(){var t=[],e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?t.push(n.value):n.identifier?t.push(n.text):this.throwError("invalid key",n),this.consume(":"),e.push(this.expression())}while(this.expect(","));return this.consume("}"),f(function(n,r){for(var i={},o=0,a=e.length;a>o;o++)i[t[o]]=e[o](n,r);return i},{literal:!0,constant:e.every(Rn),inputs:e})}};var mo=ce(),vo=ce(),go=Object.prototype.valueOf,yo=r("$sce"),wo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gi=r("$compile"),bo=e.createElement("a"),xo=ir(t.location.href);sr.$inject=["$provide"],fr.$inject=["$locale"],hr.$inject=["$locale"];var So=".",Co={yyyy:$r("FullYear",4),yy:$r("FullYear",2,0,!0),y:$r("FullYear",1),MMMM:mr("Month"),MMM:mr("Month",!0),MM:$r("Month",2,1),M:$r("Month",1,1),dd:$r("Date",2),d:$r("Date",1),HH:$r("Hours",2),H:$r("Hours",1),hh:$r("Hours",2,-12),h:$r("Hours",1,-12),mm:$r("Minutes",2),m:$r("Minutes",1),ss:$r("Seconds",2),s:$r("Seconds",1),sss:$r("Milliseconds",3),EEEE:mr("Day"),EEE:mr("Day",!0),a:br,Z:vr,ww:wr(2),w:wr(1)},ko=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Ao=/^\-?\d+$/;xr.$inject=["$locale"];var Eo=m(Gr),Oo=m(Zr);kr.$inject=["$parse"];var To=m({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref||e.name?void 0:function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===oi.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Mo={};o(_i,function(t,e){if("multiple"!=t){var n=Xe("ng-"+e);Mo[n]=function(){return{restrict:"A",priority:100,link:function(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}}}}),o(Ii,function(t,e){Mo[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(zr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=Xe("ng-"+t);Mo[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===oi.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,function(e){return e?(i.$set(a,e),void(Xr&&o&&r.prop(o,i[a]))):void("href"===t&&i.$set(a,null))})}}}});var Vo={$addControl:d,$$renameControl:Er,$removeControl:d,$setValidity:d,$setDirty:d,$setPristine:d,$setSubmitted:d},No="ng-submitted";Or.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Do=function(t){return["$timeout",function(e){var r={name:"form",restrict:t?"EAC":"E",controller:Or,compile:function(t){return t.addClass(pa).addClass(fa),{pre:function(t,r,i,o){if(!("action"in i)){var a=function(e){t.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),e.preventDefault()};ki(r[0],"submit",a),r.on("$destroy",function(){e(function(){Ai(r[0],"submit",a)},0,!1)})}var s=o.$$parentForm,u=o.$name;u&&(_n(t,null,u,o,u),i.$observe(i.name?"name":"ngForm",function(e){u!==e&&(_n(t,null,u,n,u),u=e,_n(t,null,u,o,u),s.$$renameControl(o,u))})),r.on("$destroy",function(){s.$removeControl(o),u&&_n(t,null,u,n,u),f(o,Vo)})}}}};return r}]},jo=Do(),Po=Do(!0),Ro=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,_o=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,qo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Io=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Uo=/^(\d{4})-(\d{2})-(\d{2})$/,Fo=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ho=/^(\d{4})-W(\d\d)$/,Lo=/^(\d{4})-(\d\d)$/,Bo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,zo={text:Mr,date:jr("date",Uo,Dr(Uo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":jr("datetimelocal",Fo,Dr(Fo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:jr("time",Bo,Dr(Bo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:jr("week",Ho,Nr,"yyyy-Www"),month:jr("month",Lo,Dr(Lo,["yyyy","MM"]),"yyyy-MM"),number:Rr,url:_r,email:qr,radio:Ir,checkbox:Fr,hidden:d,button:d,submit:d,reset:d,file:d},Wo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(zo[Gr(a.type)]||zo.text)(i,o,a,s[0],e,t,n,r)}}}}],Go=/^(true|false|\d+)$/,Yo=function(){return{restrict:"A",priority:100,compile:function(t,e){return Go.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Zo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,r,i){t.$$addBindingInfo(r,i.ngBind),r=r[0],e.$watch(i.ngBind,function(t){r.textContent=t===n?"":t})}}}}],Jo=["$interpolate","$compile",function(t,e){return{compile:function(r){return e.$$addBindingClass(r),function(r,i,o){var a=t(i.attr(o.$attr.ngBindTemplate));e.$$addBindingInfo(i,a.expressions),i=i[0],o.$observe("ngBindTemplate",function(t){i.textContent=t===n?"":t})}}}}],Ko=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){r.html(t.getTrustedHtml(o(e))||"")})}}}}],Xo=m({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),Qo=Hr("",!0),ta=Hr("Odd",0),ea=Hr("Even",1),na=Ar({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),ra=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ia={},oa={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=Xe("ng-"+t);ia[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};oa[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var aa=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,c;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=e.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=ue(s.clone),t.leave(c).then(function(){c=null}),s=null))})}}}],sa=["$templateRequest","$anchorScroll","$animate","$sce",function(t,e,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:si.noop,compile:function(i,o){var a=o.ngInclude||o.src,s=o.onload||"",u=o.autoscroll;return function(i,o,c,l,f){var h,p,d,$=0,m=function(){p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),d&&(n.leave(d).then(function(){p=null}),p=d,d=null)};i.$watch(r.parseAsResourceUrl(a),function(r){var a=function(){!g(u)||u&&!i.$eval(u)||e()},c=++$;r?(t(r,!0).then(function(t){if(c===$){var e=i.$new();l.template=t;var u=f(e,function(t){m(),n.enter(t,null,o).then(a)});h=e,d=u,h.$emit("$includeContentLoaded",r),i.$eval(s)}},function(){c===$&&(m(),i.$emit("$includeContentError",r))}),i.$emit("$includeContentRequested",r)):(m(),l.template=null)})}}}}],ua=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return/SVG/.test(r[0].toString())?(r.empty(),void t(ge(o.template,e).childNodes)(n,function(t){r.append(t)},{futureParentElement:r})):(r.html(o.template),void t(r.contents())(n))}}}],ca=Ar({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),la=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,i){var a=e.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,u=s?fi(a):a,c=function(t){if(!v(t)){var e=[];return t&&o(t.split(u),function(t){t&&e.push(s?fi(t):t)}),e}};i.$parsers.push(c),i.$formatters.push(function(t){return li(t)?t.join(a):n}),i.$isEmpty=function(t){return!t||!t.length}}}},fa="ng-valid",ha="ng-invalid",pa="ng-pristine",da="ng-dirty",$a="ng-untouched",ma="ng-touched",va="ng-pending",ga=new r("ngModel"),ya=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,r,i,a,s,u,c,l,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(t);var h,p=a(r.ngModel),$=p.assign,m=p,y=$,w=null,x=this;this.$$setOptions=function(t){if(x.$options=t,t&&t.getterSetter){var e=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");m=function(t){var n=p(t);return S(n)&&(n=e(t)),n},y=function(t){S(p(t))?n(t,{$$$p:x.$modelValue}):$(t,x.$modelValue)}}else if(!p.assign)throw ga("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,z(i))},this.$render=d,this.$isEmpty=function(t){return v(t)||""===t||null===t||t!==t};var C=i.inheritedData("$formController")||Vo,k=0;Lr({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},parentForm:C,$animate:s}),this.$setPristine=function(){x.$dirty=!1,x.$pristine=!0,s.removeClass(i,da),s.addClass(i,pa)},this.$setDirty=function(){x.$dirty=!0,x.$pristine=!1,s.removeClass(i,pa),s.addClass(i,da),C.$setDirty()},this.$setUntouched=function(){x.$touched=!1,x.$untouched=!0,s.setClass(i,$a,ma)},this.$setTouched=function(){x.$touched=!0,x.$untouched=!1,s.setClass(i,ma,$a)},this.$rollbackViewValue=function(){u.cancel(w),x.$viewValue=x.$$lastCommittedViewValue,x.$render()},this.$validate=function(){if(!b(x.$modelValue)||!isNaN(x.$modelValue)){var t=x.$$lastCommittedViewValue,e=x.$$rawModelValue,r=x.$valid,i=x.$modelValue,o=x.$options&&x.$options.allowInvalid;x.$$runValidators(e,t,function(t){o||r===t||(x.$modelValue=t?e:n,x.$modelValue!==i&&x.$$writeModelToScope())})}},this.$$runValidators=function(t,e,r){function i(){var t=x.$$parserName||"parse";return h!==n?(h||(o(x.$validators,function(t,e){u(e,null)}),o(x.$asyncValidators,function(t,e){u(e,null)})),u(t,h),h):(u(t,null),!0)}function a(){var n=!0;return o(x.$validators,function(r,i){var o=r(t,e);n=n&&o,u(i,o)}),n?!0:(o(x.$asyncValidators,function(t,e){u(e,null)}),!1)}function s(){var r=[],i=!0;o(x.$asyncValidators,function(o,a){var s=o(t,e);if(!V(s))throw ga("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);u(a,n),r.push(s.then(function(){u(a,!0)},function(){i=!1,u(a,!1)}))}),r.length?l.all(r).then(function(){c(i)},d):c(!0)}function u(t,e){f===k&&x.$setValidity(t,e)}function c(t){f===k&&r(t)}k++;var f=k;return i()&&a()?void s():void c(!1)},this.$commitViewValue=function(){var t=x.$viewValue;u.cancel(w),(x.$$lastCommittedViewValue!==t||""===t&&x.$$hasNativeValidators)&&(x.$$lastCommittedViewValue=t,x.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){x.$modelValue!==a&&x.$$writeModelToScope()}var r=x.$$lastCommittedViewValue,i=r;if(h=v(i)?n:!0)for(var o=0;o<x.$parsers.length;o++)if(i=x.$parsers[o](i),v(i)){h=!1;break}b(x.$modelValue)&&isNaN(x.$modelValue)&&(x.$modelValue=m(t));var a=x.$modelValue,s=x.$options&&x.$options.allowInvalid;x.$$rawModelValue=i,s&&(x.$modelValue=i,e()),x.$$runValidators(i,x.$$lastCommittedViewValue,function(t){s||(x.$modelValue=t?i:n,e())})},this.$$writeModelToScope=function(){y(t,x.$modelValue),o(x.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){x.$viewValue=t,(!x.$options||x.$options.updateOnDefault)&&x.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,r=0,i=x.$options;i&&g(i.debounce)&&(n=i.debounce,b(n)?r=n:b(n[e])?r=n[e]:b(n["default"])&&(r=n["default"])),u.cancel(w),r?w=u(function(){x.$commitViewValue()},r):c.$$phase?x.$commitViewValue():t.$apply(function(){x.$commitViewValue()})},t.$watch(function(){var e=m(t);if(e!==x.$modelValue){x.$modelValue=x.$$rawModelValue=e,h=n;for(var r=x.$formatters,i=r.length,o=e;i--;)o=r[i](o);x.$viewValue!==o&&(x.$viewValue=x.$$lastCommittedViewValue=o,x.$render(),x.$$runValidators(e,o,d))}return e})}],wa=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ya,priority:1,compile:function(e){return e.addClass(pa).addClass($a).addClass(fa),{pre:function(t,e,n,r){var i=r[0],o=r[1]||Vo;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&o.$$renameControl(i,t)}),t.$on("$destroy",function(){o.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],ba=/(\s+|^)default(\s+|$)/,xa=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var r=this;this.$options=t.$eval(e.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=fi(this.$options.updateOn.replace(ba,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Sa=Ar({terminal:!0,priority:1e3}),Ca=["$locale","$interpolate",function(t,e){var n=/{}/g,r=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(i,a,s){function u(t){a.text(t||"")}var c,l=s.count,f=s.$attr.when&&a.attr(s.$attr.when),h=s.offset||0,p=i.$eval(f)||{},d={},$=e.startSymbol(),m=e.endSymbol(),v=$+l+"-"+h+m,g=si.noop;o(s,function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+Gr(n[2]);p[i]=a.attr(s.$attr[e])}}),o(p,function(t,r){d[r]=e(t.replace(n,v))}),i.$watch(l,function(e){var n=parseFloat(e),r=isNaN(n);r||n in p||(n=t.pluralCat(n-h)),n===c||r&&isNaN(c)||(g(),g=i.$watch(d[n],u),c=n)})}}}],ka=["$parse","$animate",function(t,a){var s="$$NG_REMOVED",u=r("ngRepeat"),c=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},l=function(t){return t.clone[0]},f=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,h){var p=h.ngRepeat,d=e.createComment(" end ngRepeat: "+p+" "),$=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!$)throw u("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var m=$[1],v=$[2],g=$[3],y=$[4];if($=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!$)throw u("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var w=$[3]||$[1],b=$[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw u("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);var x,S,C,k,A={$id:Ue};return y?x=t(y):(C=function(t,e){return Ue(e)},k=function(t){return t}),function(t,e,r,h,$){x&&(S=function(e,n,r){return b&&(A[b]=e),A[w]=n,A.$index=r,x(t,A)});var m=ce();t.$watchCollection(v,function(r){var h,v,y,x,A,E,O,T,M,V,N,D,j=e[0],P=ce();if(g&&(t[g]=r),i(r))M=r,T=S||C;else{T=S||k,M=[];for(var R in r)r.hasOwnProperty(R)&&"$"!=R.charAt(0)&&M.push(R);M.sort()}for(x=M.length,N=new Array(x),h=0;x>h;h++)if(A=r===M?h:M[h],E=r[A],O=T(A,E,h),m[O])V=m[O],delete m[O],P[O]=V,N[h]=V;else{if(P[O])throw o(N,function(t){t&&t.scope&&(m[t.id]=t)}),u("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,O,E);N[h]={id:O,scope:n,clone:n},P[O]=!0}for(var _ in m){if(V=m[_],D=ue(V.clone),a.leave(D),D[0].parentNode)for(h=0,v=D.length;v>h;h++)D[h][s]=!0;V.scope.$destroy()}for(h=0;x>h;h++)if(A=r===M?h:M[h],E=r[A],V=N[h],V.scope){y=j;do y=y.nextSibling;while(y&&y[s]);l(V)!=y&&a.move(ue(V.clone),null,Qr(j)),j=f(V),c(V.scope,h,w,E,b,A,x)}else $(function(t,e){V.scope=e;var n=d.cloneNode(!1);t[t.length++]=n,a.enter(t,null,Qr(j)),j=n,V.clone=t,P[V.id]=V,c(V.scope,h,w,E,b,A,x)});m=P})}}}}],Aa="ng-hide",Ea="ng-hide-animate",Oa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,Aa,{tempClasses:Ea})})}}}],Ta=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,Aa,{tempClasses:Ea})})}}}],Ma=Ar(function(t,e,n){t.$watchCollection(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)})}),Va=["$animate",function(t){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=i.ngSwitch||i.on,u=[],c=[],l=[],f=[],h=function(t,e){return function(){t.splice(e,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=l.length;i>r;++r)t.cancel(l[r]);for(l.length=0,r=0,i=f.length;i>r;++r){var s=ue(c[r].clone);f[r].$destroy();var p=l[r]=t.leave(s);p.then(h(l,r))}c.length=0,f.length=0,(u=a.cases["!"+n]||a.cases["?"])&&o(u,function(n){n.transclude(function(r,i){f.push(i);var o=n.element;r[r.length++]=e.createComment(" end ngSwitchWhen: ");var a={clone:r};c.push(a),t.enter(r,o.parent(),o)})})})}}}],Na=Ar({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:e})}}),Da=Ar({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),ja=Ar({restrict:"EAC",link:function(t,e,n,i,o){if(!o)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",z(e));o(function(t){e.empty(),e.append(t)})}}),Pa=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],Ra=r("ngOptions"),_a=m({restrict:"A",terminal:!0}),qa=["$compile","$parse",function(t,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:d};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(t,e,n){var r,i,o=this,a={},u=s;o.databound=n.ngModel,o.init=function(t,e,n){u=t,r=e,i=n},o.addOption=function(e,n){ae(e,'"option value"'),a[e]=!0,u.$viewValue==e&&(t.val(e),i.parent()&&i.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},o.removeOption=function(t){this.hasOption(t)&&(delete a[t],u.$viewValue===t&&this.renderUnknownOption(t))},o.renderUnknownOption=function(e){var n="? "+Ue(e)+" ?";i.val(n),t.prepend(i),t.val(n),i.prop("selected",!0)},o.hasOption=function(t){return a.hasOwnProperty(t)},e.$on("$destroy",function(){o.renderUnknownOption=d})}],link:function(s,u,c,l){function f(t,e,n,r){n.$render=function(){var t=n.$viewValue;r.hasOption(t)?(k.parent()&&k.remove(),e.val(t),""===t&&d.prop("selected",!0)):v(t)&&d?e.val(""):r.renderUnknownOption(t)},e.on("change",function(){t.$apply(function(){k.parent()&&k.remove(),n.$setViewValue(e.val())})})}function h(t,e,n){var r;n.$render=function(){var t=new Fe(n.$viewValue);o(e.find("option"),function(e){e.selected=g(t.get(e.value))})},t.$watch(function(){q(r,n.$viewValue)||(r=_(n.$viewValue),n.$render())}),e.on("change",function(){t.$apply(function(){var t=[];o(e.find("option"),function(e){e.selected&&t.push(e.value)}),n.$setViewValue(t)})})}function p(e,s,u){function c(t,n,r){return q[E]=r,M&&(q[M]=n),t(e,q)}function l(){e.$apply(function(){var t,n=D(e)||[];if(y)t=[],o(s.val(),function(e){e=P?R[e]:e,t.push(f(e,n[e]))});else{var r=P?R[s.val()]:s.val();t=f(r,n[r])}u.$setViewValue(t),v()})}function f(t,e){if("?"===t)return n;if(""===t)return null;var r=T?T:N;return c(r,t,e)}function h(){var t,n=D(e);if(n&&li(n)){t=new Array(n.length);for(var r=0,i=n.length;i>r;r++)t[r]=c(A,r,n[r]);return t}if(n){t={};for(var o in n)n.hasOwnProperty(o)&&(t[o]=c(A,o,n[o]))}return t}function p(t){var e;if(y)if(P&&li(t)){e=new Fe([]);for(var n=0;n<t.length;n++)e.put(c(P,null,t[n]),!0)}else e=new Fe(t);else P&&(t=c(P,null,t));return function(n,r){var i;return i=P?P:T?T:N,y?g(e.remove(c(i,n,r))):t===c(i,n,r)}}function d(){x||(e.$$postDigest(v),x=!0)}function m(t,e,n){t[e]=t[e]||0,t[e]+=n?1:-1}function v(){x=!1;var t,n,r,i,l,f,h,d,v,w,k,E,O,T,N,j,I,U={"":[]},F=[""],H=u.$viewValue,L=D(e)||[],B=M?a(L):L,z={},W=p(H),G=!1;for(R={},E=0;w=B.length,w>E;E++)h=E,M&&(h=B[E],"$"===h.charAt(0))||(d=L[h],t=c(V,h,d)||"",(n=U[t])||(n=U[t]=[],F.push(t)),O=W(h,d),G=G||O,j=c(A,h,d),j=g(j)?j:"",I=P?P(e,q):M?B[E]:E,P&&(R[I]=h),n.push({id:I,label:j,selected:O}));
for(y||(b||null===H?U[""].unshift({id:"",label:"",selected:!G}):G||U[""].unshift({id:"?",label:"",selected:!0})),k=0,v=F.length;v>k;k++){for(t=F[k],n=U[t],_.length<=k?(i={element:C.clone().attr("label",t),label:n.label},l=[i],_.push(l),s.append(i.element)):(l=_[k],i=l[0],i.label!=t&&i.element.attr("label",i.label=t)),T=null,E=0,w=n.length;w>E;E++)r=n[E],(f=l[E+1])?(T=f.element,f.label!==r.label&&(m(z,f.label,!1),m(z,r.label,!0),T.text(f.label=r.label),T.prop("label",f.label)),f.id!==r.id&&T.val(f.id=r.id),T[0].selected!==r.selected&&(T.prop("selected",f.selected=r.selected),Xr&&T.prop("selected",f.selected))):(""===r.id&&b?N=b:(N=S.clone()).val(r.id).prop("selected",r.selected).attr("selected",r.selected).prop("label",r.label).text(r.label),l.push(f={element:N,label:r.label,id:r.id,selected:r.selected}),m(z,r.label,!0),T?T.after(N):i.element.append(N),T=N);for(E++;l.length>E;)r=l.pop(),m(z,r.label,!1),r.element.remove()}for(;_.length>k;){for(n=_.pop(),E=1;E<n.length;++E)m(z,n[E].label,!1);n[0].element.remove()}o(z,function(t,e){t>0?$.addOption(e):0>t&&$.removeOption(e)})}var k;if(!(k=w.match(i)))throw Ra("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",w,z(s));var A=r(k[2]||k[1]),E=k[4]||k[6],O=/ as /.test(k[0])&&k[1],T=O?r(O):null,M=k[5],V=r(k[3]||""),N=r(k[2]?k[1]:E),D=r(k[7]),j=k[8],P=j?r(k[8]):null,R={},_=[[{element:s,label:""}]],q={};b&&(t(b)(e),b.removeClass("ng-scope"),b.remove()),s.empty(),s.on("change",l),u.$render=v,e.$watchCollection(D,d),e.$watchCollection(h,d),y&&e.$watchCollection(function(){return u.$modelValue},d)}if(l[1]){for(var d,$=l[0],m=l[1],y=c.multiple,w=c.ngOptions,b=!1,x=!1,S=Qr(e.createElement("option")),C=Qr(e.createElement("optgroup")),k=S.clone(),A=0,E=u.children(),O=E.length;O>A;A++)if(""===E[A].value){d=b=E.eq(A);break}$.init(m,b,k),y&&(m.$isEmpty=function(t){return!t||0===t.length}),w?p(s,u,m):y?h(s,u,m):f(s,u,m,$)}}}}],Ia=["$interpolate",function(t){var e={addOption:d,removeOption:d};return{restrict:"E",priority:100,compile:function(n,r){if(v(r.value)){var i=t(n.text(),!0);i||r.$set("value",n.text())}return function(t,n,r){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.databound||(s=e),i?t.$watch(i,function(t,e){r.$set("value",t),e!==t&&s.removeOption(e),s.addOption(t,n)}):s.addOption(r.value,n),n.on("$destroy",function(){s.removeOption(r.value)})}}}}],Ua=m({restrict:"E",terminal:!1}),Fa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},Ha=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,o){if(o){var a,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(w(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,z(e));a=t||n,o.$validate()}),o.$validators.pattern=function(t){return o.$isEmpty(t)||v(a)||a.test(t)}}}}},La=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=h(t);i=isNaN(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return 0>i||r.$isEmpty(e)||e.length<=i}}}}},Ba=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=h(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};return t.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(re(),pe(si),void Qr(e).ready(function(){X(e,Q)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(t,e){"use strict";function n(){this.$get=["$$sanitizeUri",function(t){return function(e){var n=[];return o(e,u(n,function(e,n){return!/^unsafe/.test(t(e,n))})),n.join("")}}]}function r(t){var n=[],r=u(n,e.noop);return r.chars(t),n.join("")}function i(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}function o(t,n){function r(t,r,o,s){if(r=e.lowercase(r),C[r])for(;y.last()&&k[y.last()];)i("",y.last());S[r]&&y.last()==r&&i("",r),s=w[r]||!!s,s||y.push(r);var u={};o.replace(h,function(t,e,n,r,i){var o=n||r||i||"";u[e]=a(o)}),n.start&&n.start(r,u,s)}function i(t,r){var i,o=0;if(r=e.lowercase(r))for(o=y.length-1;o>=0&&y[o]!=r;o--);if(o>=0){for(i=y.length-1;i>=o;i--)n.end&&n.end(y[i]);y.length=o}}"string"!=typeof t&&(t=null===t||"undefined"==typeof t?"":""+t);var o,s,u,g,y=[],b=t;for(y.last=function(){return y[y.length-1]};t;){if(g="",s=!0,y.last()&&E[y.last()]?(t=t.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+y.last()+"[^>]*>","i"),function(t,e){return e=e.replace($,"$1").replace(v,"$1"),n.chars&&n.chars(a(e)),""}),i("",y.last())):(0===t.indexOf("<!--")?(o=t.indexOf("--",4),o>=0&&t.lastIndexOf("-->",o)===o&&(n.comment&&n.comment(t.substring(4,o)),t=t.substring(o+3),s=!1)):m.test(t)?(u=t.match(m),u&&(t=t.replace(u[0],""),s=!1)):d.test(t)?(u=t.match(f),u&&(t=t.substring(u[0].length),u[0].replace(f,i),s=!1)):p.test(t)&&(u=t.match(l),u?(u[4]&&(t=t.substring(u[0].length),u[0].replace(l,r)),s=!1):(g+="<",t=t.substring(1))),s&&(o=t.indexOf("<"),g+=0>o?t:t.substring(0,o),t=0>o?"":t.substring(o),n.chars&&n.chars(a(g)))),t==b)throw c("badparse","The sanitizer was unable to parse the following block of html: {0}",t);b=t}i()}function a(t){return t?(D.innerHTML=t.replace(/</g,"&lt;"),D.textContent):""}function s(t){return t.replace(/&/g,"&amp;").replace(g,function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return"&#"+(1024*(e-55296)+(n-56320)+65536)+";"}).replace(y,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(t,n){var r=!1,i=e.bind(t,t.push);return{start:function(t,o,a){t=e.lowercase(t),!r&&E[t]&&(r=t),r||O[t]!==!0||(i("<"),i(t),e.forEach(o,function(r,o){var a=e.lowercase(o),u="img"===t&&"src"===a||"background"===a;N[a]!==!0||T[a]===!0&&!n(r,u)||(i(" "),i(o),i('="'),i(s(r)),i('"'))}),i(a?"/>":">"))},end:function(t){t=e.lowercase(t),r||O[t]!==!0||(i("</"),i(t),i(">")),t==r&&(r=!1)},chars:function(t){r||i(s(t))}}}var c=e.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,d=/^<\//,$=/<!--(.*?)-->/g,m=/<!DOCTYPE([^>]*?)>/i,v=/<!\[CDATA\[(.*?)]]>/g,g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y=/([^\#-~| |!])/g,w=i("area,br,col,hr,img,wbr"),b=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=i("rp,rt"),S=e.extend({},x,b),C=e.extend({},b,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),k=e.extend({},x,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),A=i("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),E=i("script,style"),O=e.extend({},w,C,k,S,A),T=i("background,cite,href,longdesc,src,usemap,xlink:href"),M=i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),V=i("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),N=e.extend({},T,V,M),D=document.createElement("pre");e.module("ngSanitize",[]).provider("$sanitize",n),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,i=/^mailto:/;return function(o,a){function s(t){t&&p.push(r(t))}function u(t,n){p.push("<a "),e.isDefined(a)&&p.push('target="',a,'" '),p.push('href="',t.replace(/"/g,"&quot;"),'">'),s(n),p.push("</a>")}if(!o)return o;for(var c,l,f,h=o,p=[];c=h.match(n);)l=c[0],c[2]||c[4]||(l=(c[3]?"http://":"mailto:")+l),f=c.index,s(h.substr(0,f)),u(l,c[0].replace(i,"")),h=h.substring(f+c[0].length);return s(h),t(p.join(""))}}])}(window,window.angular),angular.module("demoApp",["treeGrid"]).controller("demoController",["$scope","$rootScope",function(t){t.treeData=[{name:"Челябинская область",children:[{name:"Челябинск",amount:1169432,children:[{name:"Курча́товский",amount:181500},{name:"Тракторозаво́дский",amount:256e3}]},{name:"Магнитогорск",amount:414897,children:[]},{name:"Златоуст",amount:170920,children:[]}]},{name:"Свердловская область",children:[{name:"Екатеринбург",amount:1412346,children:[]},{name:"Каменск-Уральский",amount:171483,children:[]}]}],t.colDefs=[{name:"name",width:200},{name:"amount",width:200}]}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW9Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwibWluRXJyIiwibW9kdWxlIiwiRXJyb3JDb25zdHJ1Y3RvciIsIkVycm9yIiwibWVzc2FnZSIsImkiLCJjb2RlIiwiYXJndW1lbnRzIiwicHJlZml4IiwidGVtcGxhdGUiLCJ0ZW1wbGF0ZUFyZ3MiLCJyZXBsYWNlIiwibWF0Y2giLCJpbmRleCIsInNsaWNlIiwibGVuZ3RoIiwidG9EZWJ1Z1N0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsImlzQXJyYXlMaWtlIiwib2JqIiwiaXNXaW5kb3ciLCJub2RlVHlwZSIsIk5PREVfVFlQRV9FTEVNRU5UIiwiaXNTdHJpbmciLCJpc0FycmF5IiwiZm9yRWFjaCIsIml0ZXJhdG9yIiwiY29udGV4dCIsImtleSIsImlzRnVuY3Rpb24iLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpc1ByaW1pdGl2ZSIsInNvcnRlZEtleXMiLCJPYmplY3QiLCJrZXlzIiwic29ydCIsImZvckVhY2hTb3J0ZWQiLCJyZXZlcnNlUGFyYW1zIiwiaXRlcmF0b3JGbiIsInZhbHVlIiwibmV4dFVpZCIsInVpZCIsInNldEhhc2hLZXkiLCJoIiwiJCRoYXNoS2V5IiwiZXh0ZW5kIiwiZHN0IiwiaWkiLCJqIiwiamoiLCJpbnQiLCJzdHIiLCJwYXJzZUludCIsImluaGVyaXQiLCJwYXJlbnQiLCJleHRyYSIsImNyZWF0ZSIsIm5vb3AiLCJpZGVudGl0eSIsIiQiLCJ2YWx1ZUZuIiwiaXNVbmRlZmluZWQiLCJpc0RlZmluZWQiLCJpc09iamVjdCIsImlzTnVtYmVyIiwiaXNEYXRlIiwidG9TdHJpbmciLCJpc1JlZ0V4cCIsImlzU2NvcGUiLCIkZXZhbEFzeW5jIiwiJHdhdGNoIiwiaXNGaWxlIiwiaXNGb3JtRGF0YSIsImlzQmxvYiIsImlzQm9vbGVhbiIsImlzUHJvbWlzZUxpa2UiLCJ0aGVuIiwiaXNFbGVtZW50Iiwibm9kZSIsIm5vZGVOYW1lIiwicHJvcCIsImF0dHIiLCJmaW5kIiwibWFrZU1hcCIsIml0ZW1zIiwic3BsaXQiLCJub2RlTmFtZV8iLCJlbGVtZW50IiwibG93ZXJjYXNlIiwiYXJyYXlSZW1vdmUiLCJhcnJheSIsImluZGV4T2YiLCJzcGxpY2UiLCJjb3B5Iiwic291cmNlIiwiZGVzdGluYXRpb24iLCJzdGFja1NvdXJjZSIsInN0YWNrRGVzdCIsIm5nTWluRXJyIiwicHVzaCIsInJlc3VsdCIsIkRhdGUiLCJnZXRUaW1lIiwiUmVnRXhwIiwibGFzdEluZGV4IiwiZW1wdHlPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsInNoYWxsb3dDb3B5Iiwic3JjIiwiY2hhckF0IiwiZXF1YWxzIiwibzEiLCJvMiIsImtleVNldCIsInQxIiwidDIiLCJjb25jYXQiLCJhcnJheTEiLCJhcnJheTIiLCJzbGljZUFyZ3MiLCJhcmdzIiwic3RhcnRJbmRleCIsImJpbmQiLCJzZWxmIiwiZm4iLCJjdXJyeUFyZ3MiLCJhcHBseSIsInRvSnNvblJlcGxhY2VyIiwidmFsIiwidG9Kc29uIiwicHJldHR5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZyb21Kc29uIiwianNvbiIsInBhcnNlIiwic3RhcnRpbmdUYWciLCJqcUxpdGUiLCJjbG9uZSIsImVtcHR5IiwiZSIsImVsZW1IdG1sIiwiYXBwZW5kIiwiaHRtbCIsIk5PREVfVFlQRV9URVhUIiwidHJ5RGVjb2RlVVJJQ29tcG9uZW50IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2VLZXlWYWx1ZSIsImtleVZhbHVlIiwia2V5X3ZhbHVlIiwidG9LZXlWYWx1ZSIsInBhcnRzIiwiYXJyYXlWYWx1ZSIsImVuY29kZVVyaVF1ZXJ5Iiwiam9pbiIsImVuY29kZVVyaVNlZ21lbnQiLCJwY3RFbmNvZGVTcGFjZXMiLCJnZXROZ0F0dHJpYnV0ZSIsIm5nQXR0ciIsIm5nQXR0clByZWZpeGVzIiwiYW5ndWxhckluaXQiLCJib290c3RyYXAiLCJhcHBFbGVtZW50IiwiY29uZmlnIiwibmFtZSIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsImNhbmRpZGF0ZSIsInF1ZXJ5U2VsZWN0b3IiLCJzdHJpY3REaSIsIm1vZHVsZXMiLCJkZWZhdWx0Q29uZmlnIiwiZG9Cb290c3RyYXAiLCJpbmplY3RvciIsInRhZyIsInVuc2hpZnQiLCIkcHJvdmlkZSIsImRlYnVnSW5mb0VuYWJsZWQiLCIkY29tcGlsZVByb3ZpZGVyIiwiY3JlYXRlSW5qZWN0b3IiLCJpbnZva2UiLCJzY29wZSIsImNvbXBpbGUiLCIkYXBwbHkiLCJkYXRhIiwiTkdfRU5BQkxFX0RFQlVHX0lORk8iLCJOR19ERUZFUl9CT09UU1RSQVAiLCJ0ZXN0IiwiYW5ndWxhciIsInJlc3VtZUJvb3RzdHJhcCIsImV4dHJhTW9kdWxlcyIsInJlc3VtZURlZmVycmVkQm9vdHN0cmFwIiwicmVsb2FkV2l0aERlYnVnSW5mbyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZ2V0VGVzdGFiaWxpdHkiLCJyb290RWxlbWVudCIsImdldCIsInNuYWtlX2Nhc2UiLCJzZXBhcmF0b3IiLCJTTkFLRV9DQVNFX1JFR0VYUCIsImxldHRlciIsInBvcyIsInRvTG93ZXJDYXNlIiwiYmluZEpRdWVyeSIsIm9yaWdpbmFsQ2xlYW5EYXRhIiwiYmluZEpRdWVyeUZpcmVkIiwialF1ZXJ5Iiwib24iLCJKUUxpdGVQcm90b3R5cGUiLCJpc29sYXRlU2NvcGUiLCJjb250cm9sbGVyIiwiaW5oZXJpdGVkRGF0YSIsImNsZWFuRGF0YSIsImVsZW1zIiwiZXZlbnRzIiwic2tpcERlc3Ryb3lPbk5leHRKUXVlcnlDbGVhbkRhdGEiLCJlbGVtIiwiX2RhdGEiLCIkZGVzdHJveSIsInRyaWdnZXJIYW5kbGVyIiwiSlFMaXRlIiwiYXNzZXJ0QXJnIiwiYXJnIiwicmVhc29uIiwiYXNzZXJ0QXJnRm4iLCJhY2NlcHRBcnJheUFubm90YXRpb24iLCJjb25zdHJ1Y3RvciIsImFzc2VydE5vdEhhc093blByb3BlcnR5IiwiZ2V0dGVyIiwicGF0aCIsImJpbmRGblRvU2NvcGUiLCJsYXN0SW5zdGFuY2UiLCJsZW4iLCJnZXRCbG9ja05vZGVzIiwibm9kZXMiLCJlbmROb2RlIiwiYmxvY2tOb2RlcyIsIm5leHRTaWJsaW5nIiwiY3JlYXRlTWFwIiwic2V0dXBNb2R1bGVMb2FkZXIiLCJlbnN1cmUiLCJmYWN0b3J5IiwiJGluamVjdG9yTWluRXJyIiwiJCRtaW5FcnIiLCJyZXF1aXJlcyIsImNvbmZpZ0ZuIiwiaW52b2tlTGF0ZXIiLCJwcm92aWRlciIsIm1ldGhvZCIsImluc2VydE1ldGhvZCIsInF1ZXVlIiwiaW52b2tlUXVldWUiLCJtb2R1bGVJbnN0YW5jZSIsImNvbmZpZ0Jsb2NrcyIsInJ1bkJsb2NrcyIsIl9pbnZva2VRdWV1ZSIsIl9jb25maWdCbG9ja3MiLCJfcnVuQmxvY2tzIiwic2VydmljZSIsImNvbnN0YW50IiwiYW5pbWF0aW9uIiwiZmlsdGVyIiwiZGlyZWN0aXZlIiwicnVuIiwiYmxvY2siLCJ0aGlzIiwic2VyaWFsaXplT2JqZWN0Iiwic2VlbiIsInB1Ymxpc2hFeHRlcm5hbEFQSSIsInZlcnNpb24iLCJ1cHBlcmNhc2UiLCJjYWxsYmFja3MiLCJjb3VudGVyIiwiJCRjc3AiLCJjc3AiLCJhbmd1bGFyTW9kdWxlIiwiJExvY2FsZVByb3ZpZGVyIiwiJCRzYW5pdGl6ZVVyaSIsIiQkU2FuaXRpemVVcmlQcm92aWRlciIsIiRDb21waWxlUHJvdmlkZXIiLCJhIiwiaHRtbEFuY2hvckRpcmVjdGl2ZSIsImlucHV0IiwiaW5wdXREaXJlY3RpdmUiLCJ0ZXh0YXJlYSIsImZvcm0iLCJmb3JtRGlyZWN0aXZlIiwic2NyaXB0Iiwic2NyaXB0RGlyZWN0aXZlIiwic2VsZWN0Iiwic2VsZWN0RGlyZWN0aXZlIiwic3R5bGUiLCJzdHlsZURpcmVjdGl2ZSIsIm9wdGlvbiIsIm9wdGlvbkRpcmVjdGl2ZSIsIm5nQmluZCIsIm5nQmluZERpcmVjdGl2ZSIsIm5nQmluZEh0bWwiLCJuZ0JpbmRIdG1sRGlyZWN0aXZlIiwibmdCaW5kVGVtcGxhdGUiLCJuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZSIsIm5nQ2xhc3MiLCJuZ0NsYXNzRGlyZWN0aXZlIiwibmdDbGFzc0V2ZW4iLCJuZ0NsYXNzRXZlbkRpcmVjdGl2ZSIsIm5nQ2xhc3NPZGQiLCJuZ0NsYXNzT2RkRGlyZWN0aXZlIiwibmdDbG9hayIsIm5nQ2xvYWtEaXJlY3RpdmUiLCJuZ0NvbnRyb2xsZXIiLCJuZ0NvbnRyb2xsZXJEaXJlY3RpdmUiLCJuZ0Zvcm0iLCJuZ0Zvcm1EaXJlY3RpdmUiLCJuZ0hpZGUiLCJuZ0hpZGVEaXJlY3RpdmUiLCJuZ0lmIiwibmdJZkRpcmVjdGl2ZSIsIm5nSW5jbHVkZSIsIm5nSW5jbHVkZURpcmVjdGl2ZSIsIm5nSW5pdCIsIm5nSW5pdERpcmVjdGl2ZSIsIm5nTm9uQmluZGFibGUiLCJuZ05vbkJpbmRhYmxlRGlyZWN0aXZlIiwibmdQbHVyYWxpemUiLCJuZ1BsdXJhbGl6ZURpcmVjdGl2ZSIsIm5nUmVwZWF0IiwibmdSZXBlYXREaXJlY3RpdmUiLCJuZ1Nob3ciLCJuZ1Nob3dEaXJlY3RpdmUiLCJuZ1N0eWxlIiwibmdTdHlsZURpcmVjdGl2ZSIsIm5nU3dpdGNoIiwibmdTd2l0Y2hEaXJlY3RpdmUiLCJuZ1N3aXRjaFdoZW4iLCJuZ1N3aXRjaFdoZW5EaXJlY3RpdmUiLCJuZ1N3aXRjaERlZmF1bHQiLCJuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUiLCJuZ09wdGlvbnMiLCJuZ09wdGlvbnNEaXJlY3RpdmUiLCJuZ1RyYW5zY2x1ZGUiLCJuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUiLCJuZ01vZGVsIiwibmdNb2RlbERpcmVjdGl2ZSIsIm5nTGlzdCIsIm5nTGlzdERpcmVjdGl2ZSIsIm5nQ2hhbmdlIiwibmdDaGFuZ2VEaXJlY3RpdmUiLCJwYXR0ZXJuIiwicGF0dGVybkRpcmVjdGl2ZSIsIm5nUGF0dGVybiIsInJlcXVpcmVkIiwicmVxdWlyZWREaXJlY3RpdmUiLCJuZ1JlcXVpcmVkIiwibWlubGVuZ3RoIiwibWlubGVuZ3RoRGlyZWN0aXZlIiwibmdNaW5sZW5ndGgiLCJtYXhsZW5ndGgiLCJtYXhsZW5ndGhEaXJlY3RpdmUiLCJuZ01heGxlbmd0aCIsIm5nVmFsdWUiLCJuZ1ZhbHVlRGlyZWN0aXZlIiwibmdNb2RlbE9wdGlvbnMiLCJuZ01vZGVsT3B0aW9uc0RpcmVjdGl2ZSIsIm5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlIiwibmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXMiLCJuZ0V2ZW50RGlyZWN0aXZlcyIsIiRhbmNob3JTY3JvbGwiLCIkQW5jaG9yU2Nyb2xsUHJvdmlkZXIiLCIkYW5pbWF0ZSIsIiRBbmltYXRlUHJvdmlkZXIiLCIkYnJvd3NlciIsIiRCcm93c2VyUHJvdmlkZXIiLCIkY2FjaGVGYWN0b3J5IiwiJENhY2hlRmFjdG9yeVByb3ZpZGVyIiwiJGNvbnRyb2xsZXIiLCIkQ29udHJvbGxlclByb3ZpZGVyIiwiJGRvY3VtZW50IiwiJERvY3VtZW50UHJvdmlkZXIiLCIkZXhjZXB0aW9uSGFuZGxlciIsIiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIiLCIkZmlsdGVyIiwiJEZpbHRlclByb3ZpZGVyIiwiJGludGVycG9sYXRlIiwiJEludGVycG9sYXRlUHJvdmlkZXIiLCIkaW50ZXJ2YWwiLCIkSW50ZXJ2YWxQcm92aWRlciIsIiRodHRwIiwiJEh0dHBQcm92aWRlciIsIiRodHRwQmFja2VuZCIsIiRIdHRwQmFja2VuZFByb3ZpZGVyIiwiJGxvY2F0aW9uIiwiJExvY2F0aW9uUHJvdmlkZXIiLCIkbG9nIiwiJExvZ1Byb3ZpZGVyIiwiJHBhcnNlIiwiJFBhcnNlUHJvdmlkZXIiLCIkcm9vdFNjb3BlIiwiJFJvb3RTY29wZVByb3ZpZGVyIiwiJHEiLCIkUVByb3ZpZGVyIiwiJCRxIiwiJCRRUHJvdmlkZXIiLCIkc2NlIiwiJFNjZVByb3ZpZGVyIiwiJHNjZURlbGVnYXRlIiwiJFNjZURlbGVnYXRlUHJvdmlkZXIiLCIkc25pZmZlciIsIiRTbmlmZmVyUHJvdmlkZXIiLCIkdGVtcGxhdGVDYWNoZSIsIiRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIiLCIkdGVtcGxhdGVSZXF1ZXN0IiwiJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyIiwiJCR0ZXN0YWJpbGl0eSIsIiQkVGVzdGFiaWxpdHlQcm92aWRlciIsIiR0aW1lb3V0IiwiJFRpbWVvdXRQcm92aWRlciIsIiR3aW5kb3ciLCIkV2luZG93UHJvdmlkZXIiLCIkJHJBRiIsIiQkUkFGUHJvdmlkZXIiLCIkJGFzeW5jQ2FsbGJhY2siLCIkJEFzeW5jQ2FsbGJhY2tQcm92aWRlciIsIiQkanFMaXRlIiwiJCRqcUxpdGVQcm92aWRlciIsImpxTmV4dElkIiwianFJZCIsImNhbWVsQ2FzZSIsIlNQRUNJQUxfQ0hBUlNfUkVHRVhQIiwiXyIsIm9mZnNldCIsInRvVXBwZXJDYXNlIiwiTU9aX0hBQ0tfUkVHRVhQIiwianFMaXRlSXNUZXh0Tm9kZSIsIkhUTUxfUkVHRVhQIiwianFMaXRlQWNjZXB0c0RhdGEiLCJOT0RFX1RZUEVfRE9DVU1FTlQiLCJqcUxpdGVCdWlsZEZyYWdtZW50IiwidG1wIiwid3JhcCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVFbGVtZW50IiwiVEFHX05BTUVfUkVHRVhQIiwiZXhlYyIsIndyYXBNYXAiLCJfZGVmYXVsdCIsImlubmVySFRNTCIsIlhIVE1MX1RBR19SRUdFWFAiLCJsYXN0Q2hpbGQiLCJjaGlsZE5vZGVzIiwiZmlyc3RDaGlsZCIsInRleHRDb250ZW50IiwianFMaXRlUGFyc2VIVE1MIiwicGFyc2VkIiwiU0lOR0xFX1RBR19SRUdFWFAiLCJhcmdJc1N0cmluZyIsInRyaW0iLCJqcUxpdGVNaW5FcnIiLCJqcUxpdGVBZGROb2RlcyIsImpxTGl0ZUNsb25lIiwiY2xvbmVOb2RlIiwianFMaXRlRGVhbG9jIiwib25seURlc2NlbmRhbnRzIiwianFMaXRlUmVtb3ZlRGF0YSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkZXNjZW5kYW50cyIsImwiLCJqcUxpdGVPZmYiLCJ0eXBlIiwidW5zdXBwb3J0ZWQiLCJleHBhbmRvU3RvcmUiLCJqcUxpdGVFeHBhbmRvU3RvcmUiLCJoYW5kbGUiLCJsaXN0ZW5lckZucyIsInJlbW92ZUV2ZW50TGlzdGVuZXJGbiIsImV4cGFuZG9JZCIsIm5nMzM5IiwianFDYWNoZSIsImNyZWF0ZUlmTmVjZXNzYXJ5IiwianFMaXRlRGF0YSIsImlzU2ltcGxlU2V0dGVyIiwiaXNTaW1wbGVHZXR0ZXIiLCJtYXNzR2V0dGVyIiwianFMaXRlSGFzQ2xhc3MiLCJzZWxlY3RvciIsImpxTGl0ZVJlbW92ZUNsYXNzIiwiY3NzQ2xhc3NlcyIsInNldEF0dHJpYnV0ZSIsImNzc0NsYXNzIiwianFMaXRlQWRkQ2xhc3MiLCJleGlzdGluZ0NsYXNzZXMiLCJyb290IiwiZWxlbWVudHMiLCJqcUxpdGVDb250cm9sbGVyIiwianFMaXRlSW5oZXJpdGVkRGF0YSIsImRvY3VtZW50RWxlbWVudCIsIm5hbWVzIiwicGFyZW50Tm9kZSIsIk5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCIsImhvc3QiLCJqcUxpdGVFbXB0eSIsInJlbW92ZUNoaWxkIiwianFMaXRlUmVtb3ZlIiwia2VlcERhdGEiLCJqcUxpdGVEb2N1bWVudExvYWRlZCIsImFjdGlvbiIsIndpbiIsInJlYWR5U3RhdGUiLCJzZXRUaW1lb3V0IiwiZ2V0Qm9vbGVhbkF0dHJOYW1lIiwiYm9vbGVhbkF0dHIiLCJCT09MRUFOX0FUVFIiLCJCT09MRUFOX0VMRU1FTlRTIiwiZ2V0QWxpYXNlZEF0dHJOYW1lIiwiQUxJQVNFRF9BVFRSIiwiY3JlYXRlRXZlbnRIYW5kbGVyIiwiZXZlbnRIYW5kbGVyIiwiZXZlbnQiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJkZWZhdWx0UHJldmVudGVkIiwiZXZlbnRGbnMiLCJldmVudEZuc0xlbmd0aCIsImltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsIm9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwiaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQiLCIkZ2V0IiwiaGFzQ2xhc3MiLCJjbGFzc2VzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhhc2hLZXkiLCJuZXh0VWlkRm4iLCJvYmpUeXBlIiwiSGFzaE1hcCIsImlzb2xhdGVkVWlkIiwicHV0IiwiYW5vbkZuIiwiZm5UZXh0IiwiU1RSSVBfQ09NTUVOVFMiLCJGTl9BUkdTIiwiYW5ub3RhdGUiLCIkaW5qZWN0IiwiYXJnRGVjbCIsImxhc3QiLCJGTl9BUkdfU1BMSVQiLCJGTl9BUkciLCJhbGwiLCJ1bmRlcnNjb3JlIiwibW9kdWxlc1RvTG9hZCIsInN1cHBvcnRPYmplY3QiLCJkZWxlZ2F0ZSIsInByb3ZpZGVyXyIsInByb3ZpZGVySW5qZWN0b3IiLCJpbnN0YW50aWF0ZSIsInByb3ZpZGVyQ2FjaGUiLCJwcm92aWRlclN1ZmZpeCIsImVuZm9yY2VSZXR1cm5WYWx1ZSIsImluc3RhbmNlSW5qZWN0b3IiLCJmYWN0b3J5Rm4iLCJlbmZvcmNlIiwiJGluamVjdG9yIiwiaW5zdGFuY2VDYWNoZSIsImRlY29yYXRvciIsInNlcnZpY2VOYW1lIiwiZGVjb3JGbiIsIm9yaWdQcm92aWRlciIsIm9yaWckZ2V0Iiwib3JpZ0luc3RhbmNlIiwiJGRlbGVnYXRlIiwibG9hZE1vZHVsZXMiLCJtb2R1bGVGbiIsInJ1bkludm9rZVF1ZXVlIiwiaW52b2tlQXJncyIsImxvYWRlZE1vZHVsZXMiLCJzdGFjayIsImNyZWF0ZUludGVybmFsSW5qZWN0b3IiLCJjYWNoZSIsImdldFNlcnZpY2UiLCJjYWxsZXIiLCJJTlNUQU5USUFUSU5HIiwiZXJyIiwic2hpZnQiLCJsb2NhbHMiLCIkJGFubm90YXRlIiwiVHlwZSIsImluc3RhbmNlIiwicHJvdG90eXBlIiwicmV0dXJuZWRWYWx1ZSIsImhhcyIsImF1dG9TY3JvbGxpbmdFbmFibGVkIiwiZGlzYWJsZUF1dG9TY3JvbGxpbmciLCJnZXRGaXJzdEFuY2hvciIsImxpc3QiLCJBcnJheSIsInNvbWUiLCJnZXRZT2Zmc2V0Iiwic2Nyb2xsIiwieU9mZnNldCIsImdldENvbXB1dGVkU3R5bGUiLCJwb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvdHRvbSIsInNjcm9sbFRvIiwic2Nyb2xsSW50b1ZpZXciLCJlbGVtVG9wIiwidG9wIiwic2Nyb2xsQnkiLCJlbG0iLCJoYXNoIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5TmFtZSIsIm5ld1ZhbCIsIm9sZFZhbCIsInN1cHBvcnRlZCIsIkJyb3dzZXIiLCJjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCIsIm91dHN0YW5kaW5nUmVxdWVzdENvdW50Iiwib3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzIiwicG9wIiwiZXJyb3IiLCJnZXRIYXNoIiwidXJsIiwic3Vic3RyIiwic3RhcnRQb2xsZXIiLCJpbnRlcnZhbCIsImNoZWNrIiwicG9sbEZucyIsInBvbGxGbiIsInBvbGxUaW1lb3V0IiwiY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UiLCJjYWNoZVN0YXRlIiwiZmlyZVVybENoYW5nZSIsImNhY2hlZFN0YXRlIiwiaGlzdG9yeSIsInN0YXRlIiwibGFzdENhY2hlZFN0YXRlIiwibGFzdEJyb3dzZXJVcmwiLCJsYXN0SGlzdG9yeVN0YXRlIiwidXJsQ2hhbmdlTGlzdGVuZXJzIiwibGlzdGVuZXIiLCJzYWZlRGVjb2RlVVJJQ29tcG9uZW50IiwicmF3RG9jdW1lbnQiLCJjbGVhclRpbWVvdXQiLCJwZW5kaW5nRGVmZXJJZHMiLCJpc01vY2siLCIkJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0IiwiJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCIsIm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMiLCJjYWxsYmFjayIsImFkZFBvbGxGbiIsImhyZWYiLCJiYXNlRWxlbWVudCIsInJlbG9hZExvY2F0aW9uIiwic2FtZVN0YXRlIiwic2FtZUJhc2UiLCJzdHJpcEhhc2giLCJ1cmxDaGFuZ2VJbml0Iiwib25VcmxDaGFuZ2UiLCIkJGNoZWNrVXJsQ2hhbmdlIiwiYmFzZUhyZWYiLCJsYXN0Q29va2llcyIsImxhc3RDb29raWVTdHJpbmciLCJjb29raWVQYXRoIiwiY29va2llcyIsImNvb2tpZUxlbmd0aCIsImNvb2tpZUFycmF5IiwiY29va2llIiwic3Vic3RyaW5nIiwid2FybiIsImRlZmVyIiwiZGVsYXkiLCJ0aW1lb3V0SWQiLCJjYW5jZWwiLCJkZWZlcklkIiwiY2FjaGVGYWN0b3J5IiwiY2FjaGVJZCIsIm9wdGlvbnMiLCJyZWZyZXNoIiwiZW50cnkiLCJmcmVzaEVuZCIsInN0YWxlRW5kIiwibiIsImxpbmsiLCJwIiwibmV4dEVudHJ5IiwicHJldkVudHJ5IiwiY2FjaGVzIiwic2l6ZSIsInN0YXRzIiwiaWQiLCJjYXBhY2l0eSIsIk51bWJlciIsIk1BWF9WQUxVRSIsImxydUhhc2giLCJscnVFbnRyeSIsInJlbW92ZSIsInJlbW92ZUFsbCIsImRlc3Ryb3kiLCJpbmZvIiwiJCRzYW5pdGl6ZVVyaVByb3ZpZGVyIiwicGFyc2VJc29sYXRlQmluZGluZ3MiLCJkaXJlY3RpdmVOYW1lIiwiTE9DQUxfUkVHRVhQIiwiYmluZGluZ3MiLCJkZWZpbml0aW9uIiwic2NvcGVOYW1lIiwiJGNvbXBpbGVNaW5FcnIiLCJtb2RlIiwiY29sbGVjdGlvbiIsIm9wdGlvbmFsIiwiYXR0ck5hbWUiLCJoYXNEaXJlY3RpdmVzIiwiU3VmZml4IiwiQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQIiwiQ0xBU1NfRElSRUNUSVZFX1JFR0VYUCIsIkFMTF9PUl9OT1RISU5HX0FUVFJTIiwiUkVRVUlSRV9QUkVGSVhfUkVHRVhQIiwiRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUCIsInJlZ2lzdGVyRGlyZWN0aXZlIiwiZGlyZWN0aXZlRmFjdG9yeSIsImRpcmVjdGl2ZXMiLCJwcmlvcml0eSIsInJlcXVpcmUiLCJyZXN0cmljdCIsIiQkaXNvbGF0ZUJpbmRpbmdzIiwiYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QiLCJyZWdleHAiLCJpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QiLCJlbmFibGVkIiwic2FmZUFkZENsYXNzIiwiJGVsZW1lbnQiLCJjbGFzc05hbWUiLCIkY29tcGlsZU5vZGVzIiwidHJhbnNjbHVkZUZuIiwibWF4UHJpb3JpdHkiLCJpZ25vcmVEaXJlY3RpdmUiLCJwcmV2aW91c0NvbXBpbGVDb250ZXh0Iiwibm9kZVZhbHVlIiwiY29tcG9zaXRlTGlua0ZuIiwiY29tcGlsZU5vZGVzIiwiJCRhZGRTY29wZUNsYXNzIiwibmFtZXNwYWNlIiwiY2xvbmVDb25uZWN0Rm4iLCJwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiIsInRyYW5zY2x1ZGVDb250cm9sbGVycyIsImZ1dHVyZVBhcmVudEVsZW1lbnQiLCIkJGJvdW5kVHJhbnNjbHVkZSIsImRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMiLCIkbGlua05vZGUiLCJ3cmFwVGVtcGxhdGUiLCJjb250cm9sbGVyTmFtZSIsIiQkYWRkU2NvcGVJbmZvIiwicGFyZW50RWxlbWVudCIsIm5vZGVMaXN0IiwiJHJvb3RFbGVtZW50Iiwibm9kZUxpbmtGbiIsImNoaWxkTGlua0ZuIiwiY2hpbGRTY29wZSIsImlkeCIsImNoaWxkQm91bmRUcmFuc2NsdWRlRm4iLCJzdGFibGVOb2RlTGlzdCIsIm5vZGVMaW5rRm5Gb3VuZCIsIm5vZGVMaXN0TGVuZ3RoIiwibGlua0ZucyIsIiRuZXciLCJ0cmFuc2NsdWRlT25UaGlzRWxlbWVudCIsImNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuIiwidHJhbnNjbHVkZSIsImVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudCIsInRlbXBsYXRlT25UaGlzRWxlbWVudCIsImF0dHJzIiwibGlua0ZuRm91bmQiLCJBdHRyaWJ1dGVzIiwiY29sbGVjdERpcmVjdGl2ZXMiLCJhcHBseURpcmVjdGl2ZXNUb05vZGUiLCIkJGVsZW1lbnQiLCJ0ZXJtaW5hbCIsInByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4iLCJib3VuZFRyYW5zY2x1ZGVGbiIsInRyYW5zY2x1ZGVkU2NvcGUiLCJjbG9uZUZuIiwiY29udHJvbGxlcnMiLCJjb250YWluaW5nU2NvcGUiLCIkJHRyYW5zY2x1ZGVkIiwiYXR0cnNNYXAiLCIkYXR0ciIsImFkZERpcmVjdGl2ZSIsImRpcmVjdGl2ZU5vcm1hbGl6ZSIsIm5OYW1lIiwibmdBdHRyTmFtZSIsImlzTmdBdHRyIiwibkF0dHJzIiwiYXR0cmlidXRlcyIsImF0dHJTdGFydE5hbWUiLCJhdHRyRW5kTmFtZSIsIk5HX0FUVFJfQklORElORyIsIlBSRUZJWF9SRUdFWFAiLCJkaXJlY3RpdmVOTmFtZSIsImRpcmVjdGl2ZUlzTXVsdGlFbGVtZW50IiwiYWRkQXR0ckludGVycG9sYXRlRGlyZWN0aXZlIiwiYW5pbVZhbCIsImFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZSIsIk5PREVfVFlQRV9DT01NRU5UIiwiYnlQcmlvcml0eSIsImdyb3VwU2NhbiIsImF0dHJTdGFydCIsImF0dHJFbmQiLCJkZXB0aCIsImdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyIiwibGlua0ZuIiwiY29tcGlsZU5vZGUiLCJ0ZW1wbGF0ZUF0dHJzIiwianFDb2xsZWN0aW9uIiwib3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlIiwicHJlTGlua0ZucyIsInBvc3RMaW5rRm5zIiwiYWRkTGlua0ZucyIsInByZSIsInBvc3QiLCJuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUiLCIkJGlzb2xhdGVTY29wZSIsImNsb25lQW5kQW5ub3RhdGVGbiIsImdldENvbnRyb2xsZXJzIiwiZWxlbWVudENvbnRyb2xsZXJzIiwicmV0cmlldmFsTWV0aG9kIiwiJHNlYXJjaEVsZW1lbnQiLCJsaW5rTm9kZSIsImNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlIiwiY2xvbmVBdHRhY2hGbiIsImhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlIiwic2NvcGVUb0NoaWxkIiwiY29udHJvbGxlckRpcmVjdGl2ZXMiLCJjb250cm9sbGVySW5zdGFuY2UiLCIkc2NvcGUiLCIkYXR0cnMiLCIkdHJhbnNjbHVkZSIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlRGlyZWN0aXZlIiwiJCRvcmlnaW5hbERpcmVjdGl2ZSIsImlzb2xhdGVTY29wZUNvbnRyb2xsZXIiLCJpc29sYXRlQmluZGluZ0NvbnRleHQiLCJpZGVudGlmaWVyIiwiYmluZFRvQ29udHJvbGxlciIsImxhc3RWYWx1ZSIsInBhcmVudEdldCIsInBhcmVudFNldCIsImNvbXBhcmUiLCIkb2JzZXJ2ZSIsIiQkb2JzZXJ2ZXJzIiwiJCRzY29wZSIsImxpdGVyYWwiLCJiIiwiYXNzaWduIiwicGFyZW50VmFsdWVXYXRjaCIsInBhcmVudFZhbHVlIiwiJHN0YXRlZnVsIiwidW53YXRjaCIsIiR3YXRjaENvbGxlY3Rpb24iLCIkb24iLCJpbnZva2VMaW5rRm4iLCJ0ZW1wbGF0ZVVybCIsIm5ld1Njb3BlRGlyZWN0aXZlIiwiJHRlbXBsYXRlIiwiZGlyZWN0aXZlVmFsdWUiLCJ0ZXJtaW5hbFByaW9yaXR5Iiwibm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSIsImhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUiLCJoYXNUZW1wbGF0ZSIsIiRjb21waWxlTm9kZSIsInJlcGxhY2VEaXJlY3RpdmUiLCJjaGlsZFRyYW5zY2x1ZGVGbiIsIiQkc3RhcnQiLCIkJGVuZCIsImFzc2VydE5vRHVwbGljYXRlIiwiJCR0bGIiLCJjcmVhdGVDb21tZW50IiwicmVwbGFjZVdpdGgiLCJjb250ZW50cyIsImRlbm9ybWFsaXplVGVtcGxhdGUiLCJyZW1vdmVDb21tZW50cyIsInRlbXBsYXRlTmFtZXNwYWNlIiwibmV3VGVtcGxhdGVBdHRycyIsInRlbXBsYXRlRGlyZWN0aXZlcyIsInVucHJvY2Vzc2VkRGlyZWN0aXZlcyIsIm1hcmtEaXJlY3RpdmVzQXNJc29sYXRlIiwibWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXMiLCJjb21waWxlVGVtcGxhdGVVcmwiLCJNYXRoIiwibWF4IiwidERpcmVjdGl2ZXMiLCJzdGFydEF0dHJOYW1lIiwiZW5kQXR0ck5hbWUiLCJtdWx0aUVsZW1lbnQiLCJzcmNBdHRyIiwiZHN0QXR0ciIsIiRzZXQiLCJ0QXR0cnMiLCJhZnRlclRlbXBsYXRlTm9kZUxpbmtGbiIsImFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiIsImxpbmtRdWV1ZSIsImJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUiLCJvcmlnQXN5bmNEaXJlY3RpdmUiLCJkZXJpdmVkU3luY0RpcmVjdGl2ZSIsImdldFRydXN0ZWRSZXNvdXJjZVVybCIsImNvbnRlbnQiLCJ0ZW1wVGVtcGxhdGVBdHRycyIsImJlZm9yZVRlbXBsYXRlTGlua05vZGUiLCJsaW5rUm9vdEVsZW1lbnQiLCIkJGRlc3Ryb3llZCIsIm9sZENsYXNzZXMiLCJpZ25vcmVDaGlsZExpbmtGbiIsImRpZmYiLCJ3aGF0IiwicHJldmlvdXNEaXJlY3RpdmUiLCJ0ZXh0IiwiaW50ZXJwb2xhdGVGbiIsInRlbXBsYXRlTm9kZSIsInRlbXBsYXRlTm9kZVBhcmVudCIsImhhc0NvbXBpbGVQYXJlbnQiLCIkJGFkZEJpbmRpbmdDbGFzcyIsIiQkYWRkQmluZGluZ0luZm8iLCJleHByZXNzaW9ucyIsIndyYXBwZXIiLCJnZXRUcnVzdGVkQ29udGV4dCIsImF0dHJOb3JtYWxpemVkTmFtZSIsIkhUTUwiLCJSRVNPVVJDRV9VUkwiLCJhbGxPck5vdGhpbmciLCJ0cnVzdGVkQ29udGV4dCIsIm5ld1ZhbHVlIiwiJCRpbnRlciIsIm9sZFZhbHVlIiwiJHVwZGF0ZUNsYXNzIiwiZWxlbWVudHNUb1JlbW92ZSIsIm5ld05vZGUiLCJmaXJzdEVsZW1lbnRUb1JlbW92ZSIsInJlbW92ZUNvdW50IiwiajIiLCJyZXBsYWNlQ2hpbGQiLCJleHBhbmRvIiwiayIsImtrIiwiYW5ub3RhdGlvbiIsImF0dHJpYnV0ZXNUb0NvcHkiLCIkbm9ybWFsaXplIiwiJGFkZENsYXNzIiwiY2xhc3NWYWwiLCIkcmVtb3ZlQ2xhc3MiLCJuZXdDbGFzc2VzIiwidG9BZGQiLCJ0b2tlbkRpZmZlcmVuY2UiLCJ0b1JlbW92ZSIsIndyaXRlQXR0ciIsImJvb2xlYW5LZXkiLCJhbGlhc2VkS2V5Iiwib2JzZXJ2ZXIiLCJ0cmltbWVkU3Jjc2V0Iiwic3JjUGF0dGVybiIsInJhd1VyaXMiLCJuYnJVcmlzV2l0aDJwYXJ0cyIsImZsb29yIiwiaW5uZXJJZHgiLCJsYXN0VHVwbGUiLCJyZW1vdmVBdHRyIiwibGlzdGVuZXJzIiwic3RhcnRTeW1ib2wiLCJlbmRTeW1ib2wiLCJiaW5kaW5nIiwiaXNvbGF0ZWQiLCJub1RlbXBsYXRlIiwiZGF0YU5hbWUiLCJzdHIxIiwic3RyMiIsInZhbHVlcyIsInRva2VuczEiLCJ0b2tlbnMyIiwib3V0ZXIiLCJ0b2tlbiIsImpxTm9kZXMiLCJnbG9iYWxzIiwiQ05UUkxfUkVHIiwicmVnaXN0ZXIiLCJhbGxvd0dsb2JhbHMiLCJhZGRJZGVudGlmaWVyIiwiZXhwcmVzc2lvbiIsImxhdGVyIiwiaWRlbnQiLCIkY29udHJvbGxlck1pbkVyciIsImNvbnRyb2xsZXJQcm90b3R5cGUiLCJkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtIiwiaGVhZGVycyIsInRlbXBEYXRhIiwiSlNPTl9QUk9URUNUSU9OX1BSRUZJWCIsImNvbnRlbnRUeXBlIiwiQVBQTElDQVRJT05fSlNPTiIsImlzSnNvbkxpa2UiLCJqc29uU3RhcnQiLCJKU09OX1NUQVJUIiwiSlNPTl9FTkRTIiwicGFyc2VIZWFkZXJzIiwibGluZSIsImhlYWRlcnNHZXR0ZXIiLCJoZWFkZXJzT2JqIiwidHJhbnNmb3JtRGF0YSIsInN0YXR1cyIsImZucyIsImlzU3VjY2VzcyIsImRlZmF1bHRzIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiZCIsImNvbW1vbiIsIkFjY2VwdCIsIkNPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OIiwicGF0Y2giLCJ4c3JmQ29va2llTmFtZSIsInhzcmZIZWFkZXJOYW1lIiwidXNlQXBwbHlBc3luYyIsImludGVyY2VwdG9yRmFjdG9yaWVzIiwiaW50ZXJjZXB0b3JzIiwicmVxdWVzdENvbmZpZyIsInJlc3BvbnNlIiwicmVzcCIsInJlamVjdCIsImV4ZWN1dGVIZWFkZXJGbnMiLCJoZWFkZXJDb250ZW50IiwicHJvY2Vzc2VkSGVhZGVycyIsImhlYWRlckZuIiwiaGVhZGVyIiwibWVyZ2VIZWFkZXJzIiwiZGVmSGVhZGVyTmFtZSIsImxvd2VyY2FzZURlZkhlYWRlck5hbWUiLCJyZXFIZWFkZXJOYW1lIiwiZGVmSGVhZGVycyIsInJlcUhlYWRlcnMiLCJkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbiIsInNlcnZlclJlcXVlc3QiLCJyZXFEYXRhIiwid2l0aENyZWRlbnRpYWxzIiwic2VuZFJlcSIsImNoYWluIiwicHJvbWlzZSIsIndoZW4iLCJyZXZlcnNlZEludGVyY2VwdG9ycyIsImludGVyY2VwdG9yIiwicmVxdWVzdCIsInJlcXVlc3RFcnJvciIsInJlc3BvbnNlRXJyb3IiLCJ0aGVuRm4iLCJyZWplY3RGbiIsInN1Y2Nlc3MiLCJjcmVhdGVTaG9ydE1ldGhvZHMiLCJjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YSIsImRvbmUiLCJoZWFkZXJzU3RyaW5nIiwic3RhdHVzVGV4dCIsInJlc29sdmVIdHRwUHJvbWlzZSIsInJlc29sdmVQcm9taXNlIiwiJGFwcGx5QXN5bmMiLCIkJHBoYXNlIiwiZGVmZXJyZWQiLCJyZXNvbHZlIiwicmVzb2x2ZVByb21pc2VXaXRoUmVzdWx0IiwicmVtb3ZlUGVuZGluZ1JlcSIsInBlbmRpbmdSZXF1ZXN0cyIsImNhY2hlZFJlc3AiLCJidWlsZFVybCIsInBhcmFtcyIsImRlZmF1bHRDYWNoZSIsInhzcmZWYWx1ZSIsInVybElzU2FtZU9yaWdpbiIsInRpbWVvdXQiLCJyZXNwb25zZVR5cGUiLCJ2IiwidG9JU09TdHJpbmciLCJpbnRlcmNlcHRvckZhY3RvcnkiLCJjcmVhdGVYaHIiLCJYTUxIdHRwUmVxdWVzdCIsImNyZWF0ZUh0dHBCYWNrZW5kIiwiJGJyb3dzZXJEZWZlciIsImpzb25wUmVxIiwiY2FsbGJhY2tJZCIsImFzeW5jIiwiYm9keSIsImNhbGxlZCIsImFkZEV2ZW50TGlzdGVuZXJGbiIsInRpbWVvdXRSZXF1ZXN0IiwianNvbnBEb25lIiwieGhyIiwiYWJvcnQiLCJjb21wbGV0ZVJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInJlc3BvbnNlVGV4dCIsInVybFJlc29sdmUiLCJwcm90b2NvbCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsIm9uZXJyb3IiLCJvbmFib3J0Iiwic2VuZCIsImVzY2FwZSIsImNoIiwibXVzdEhhdmVFeHByZXNzaW9uIiwidW5lc2NhcGVUZXh0IiwiZXNjYXBlZFN0YXJ0UmVnZXhwIiwiZXNjYXBlZEVuZFJlZ2V4cCIsInBhcnNlU3RyaW5naWZ5SW50ZXJjZXB0b3IiLCJnZXRWYWx1ZSIsIm5ld0VyciIsIiRpbnRlcnBvbGF0ZU1pbkVyciIsImVuZEluZGV4IiwiZXhwIiwicGFyc2VGbnMiLCJ0ZXh0TGVuZ3RoIiwiZXhwcmVzc2lvblBvc2l0aW9ucyIsInN0YXJ0U3ltYm9sTGVuZ3RoIiwiZW5kU3ltYm9sTGVuZ3RoIiwiY29tcHV0ZSIsImdldFRydXN0ZWQiLCJ2YWx1ZU9mIiwiJCR3YXRjaERlbGVnYXRlIiwib2JqZWN0RXF1YWxpdHkiLCIkd2F0Y2hHcm91cCIsIm9sZFZhbHVlcyIsImN1cnJWYWx1ZSIsImNvdW50IiwiaW52b2tlQXBwbHkiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJpdGVyYXRpb24iLCJza2lwQXBwbHkiLCIkJGludGVydmFsSWQiLCJub3RpZnkiLCJpbnRlcnZhbHMiLCJOVU1CRVJfRk9STUFUUyIsIkRFQ0lNQUxfU0VQIiwiR1JPVVBfU0VQIiwiUEFUVEVSTlMiLCJtaW5JbnQiLCJtaW5GcmFjIiwibWF4RnJhYyIsInBvc1ByZSIsInBvc1N1ZiIsIm5lZ1ByZSIsIm5lZ1N1ZiIsImdTaXplIiwibGdTaXplIiwiQ1VSUkVOQ1lfU1lNIiwiREFURVRJTUVfRk9STUFUUyIsIk1PTlRIIiwiU0hPUlRNT05USCIsIkRBWSIsIlNIT1JUREFZIiwiQU1QTVMiLCJtZWRpdW0iLCJzaG9ydCIsImZ1bGxEYXRlIiwibG9uZ0RhdGUiLCJtZWRpdW1EYXRlIiwic2hvcnREYXRlIiwibWVkaXVtVGltZSIsInNob3J0VGltZSIsInBsdXJhbENhdCIsIm51bSIsImVuY29kZVBhdGgiLCJzZWdtZW50cyIsInBhcnNlQWJzb2x1dGVVcmwiLCJhYnNvbHV0ZVVybCIsImxvY2F0aW9uT2JqIiwicGFyc2VkVXJsIiwiJCRwcm90b2NvbCIsIiQkaG9zdCIsImhvc3RuYW1lIiwiJCRwb3J0IiwicG9ydCIsIkRFRkFVTFRfUE9SVFMiLCJwYXJzZUFwcFVybCIsInJlbGF0aXZlVXJsIiwicHJlZml4ZWQiLCIkJHBhdGgiLCJwYXRobmFtZSIsIiQkc2VhcmNoIiwic2VhcmNoIiwiJCRoYXNoIiwiYmVnaW5zV2l0aCIsImJlZ2luIiwid2hvbGUiLCJ0cmltRW1wdHlIYXNoIiwic3RyaXBGaWxlIiwibGFzdEluZGV4T2YiLCJzZXJ2ZXJCYXNlIiwiTG9jYXRpb25IdG1sNVVybCIsImFwcEJhc2UiLCJiYXNlUHJlZml4IiwiJCRodG1sNSIsImFwcEJhc2VOb0ZpbGUiLCIkJHBhcnNlIiwicGF0aFVybCIsIiRsb2NhdGlvbk1pbkVyciIsIiQkY29tcG9zZSIsIiQkdXJsIiwiJCRhYnNVcmwiLCIkJHBhcnNlTGlua1VybCIsInJlbEhyZWYiLCJhcHBVcmwiLCJwcmV2QXBwVXJsIiwicmV3cml0dGVuVXJsIiwiTG9jYXRpb25IYXNoYmFuZ1VybCIsImhhc2hQcmVmaXgiLCJyZW1vdmVXaW5kb3dzRHJpdmVOYW1lIiwiYmFzZSIsImZpcnN0UGF0aFNlZ21lbnRNYXRjaCIsIndpbmRvd3NGaWxlUGF0aEV4cCIsIndpdGhvdXRIYXNoVXJsIiwid2l0aG91dEJhc2VVcmwiLCJMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCIsImxvY2F0aW9uR2V0dGVyIiwicHJvcGVydHkiLCJsb2NhdGlvbkdldHRlclNldHRlciIsInByZXByb2Nlc3MiLCJodG1sNU1vZGUiLCJyZXF1aXJlQmFzZSIsInJld3JpdGVMaW5rcyIsInNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2siLCJvbGRVcmwiLCJvbGRTdGF0ZSIsIiQkc3RhdGUiLCJhZnRlckxvY2F0aW9uQ2hhbmdlIiwiJGJyb2FkY2FzdCIsImFic1VybCIsIkxvY2F0aW9uTW9kZSIsImluaXRpYWxVcmwiLCJJR05PUkVfVVJJX1JFR0VYUCIsImN0cmxLZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJ3aGljaCIsImJ1dHRvbiIsInRhcmdldCIsImFic0hyZWYiLCJwcmV2ZW50RGVmYXVsdCIsImluaXRpYWxpemluZyIsIm5ld1VybCIsIm5ld1N0YXRlIiwiJGRpZ2VzdCIsImN1cnJlbnRSZXBsYWNlIiwiJCRyZXBsYWNlIiwidXJsT3JTdGF0ZUNoYW5nZWQiLCJkZWJ1ZyIsImRlYnVnRW5hYmxlZCIsImZsYWciLCJmb3JtYXRFcnJvciIsInNvdXJjZVVSTCIsImNvbnNvbGVMb2ciLCJjb25zb2xlIiwibG9nRm4iLCJsb2ciLCJoYXNBcHBseSIsImFyZzEiLCJhcmcyIiwiZW5zdXJlU2FmZU1lbWJlck5hbWUiLCJmdWxsRXhwcmVzc2lvbiIsIiRwYXJzZU1pbkVyciIsImVuc3VyZVNhZmVPYmplY3QiLCJjaGlsZHJlbiIsImVuc3VyZVNhZmVGdW5jdGlvbiIsIkNBTEwiLCJBUFBMWSIsIkJJTkQiLCJpc0NvbnN0YW50Iiwic2V0dGVyIiwic2V0VmFsdWUiLCJmdWxsRXhwIiwicHJvcGVydHlPYmoiLCJpc1Bvc3NpYmx5RGFuZ2Vyb3VzTWVtYmVyTmFtZSIsImNzcFNhZmVHZXR0ZXJGbiIsImtleTAiLCJrZXkxIiwia2V5MiIsImtleTMiLCJrZXk0IiwiZXhwZW5zaXZlQ2hlY2tzIiwiZXNvIiwibyIsImVzbzAiLCJlc28xIiwiZXNvMiIsImVzbzMiLCJlc280IiwicGF0aFZhbCIsImdldHRlckZuV2l0aEVuc3VyZVNhZmVPYmplY3QiLCJzIiwiZ2V0dGVyRm4iLCJnZXR0ZXJGbkNhY2hlIiwiZ2V0dGVyRm5DYWNoZUV4cGVuc2l2ZSIsImdldHRlckZuQ2FjaGVEZWZhdWx0IiwicGF0aEtleXMiLCJwYXRoS2V5c0xlbmd0aCIsIm5lZWRzRW5zdXJlU2FmZU9iamVjdCIsImxvb2t1cEpzIiwiZXZhbGVkRm5HZXR0ZXIiLCJGdW5jdGlvbiIsInNoYXJlZEdldHRlciIsImdldFZhbHVlT2YiLCJvYmplY3RWYWx1ZU9mIiwiY2FjaGVEZWZhdWx0IiwiY2FjaGVFeHBlbnNpdmUiLCJ3cmFwU2hhcmVkRXhwcmVzc2lvbiIsIndyYXBwZWQiLCJjb2xsZWN0RXhwcmVzc2lvbklucHV0cyIsImlucHV0cyIsImV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2siLCJvbGRWYWx1ZU9mVmFsdWUiLCJpbnB1dHNXYXRjaERlbGVnYXRlIiwicGFyc2VkRXhwcmVzc2lvbiIsImxhc3RSZXN1bHQiLCJpbnB1dEV4cHJlc3Npb25zIiwiJCRpbnB1dHMiLCJvbGRJbnB1dFZhbHVlIiwibmV3SW5wdXRWYWx1ZSIsIm9sZElucHV0VmFsdWVPZlZhbHVlcyIsImNoYW5nZWQiLCJvbmVUaW1lV2F0Y2hEZWxlZ2F0ZSIsIm9sZCIsIiQkcG9zdERpZ2VzdCIsIm9uZVRpbWVMaXRlcmFsV2F0Y2hEZWxlZ2F0ZSIsImlzQWxsRGVmaW5lZCIsImFsbERlZmluZWQiLCJjb25zdGFudFdhdGNoRGVsZWdhdGUiLCJhZGRJbnRlcmNlcHRvciIsImludGVyY2VwdG9yRm4iLCJ3YXRjaERlbGVnYXRlIiwicmVndWxhcldhdGNoIiwiJHBhcnNlT3B0aW9ucyIsIiRwYXJzZU9wdGlvbnNFeHBlbnNpdmUiLCJvbmVUaW1lIiwiY2FjaGVLZXkiLCJwYXJzZU9wdGlvbnMiLCJsZXhlciIsIkxleGVyIiwicGFyc2VyIiwiUGFyc2VyIiwicUZhY3RvcnkiLCJuZXh0VGljayIsImV4Y2VwdGlvbkhhbmRsZXIiLCJjYWxsT25jZSIsInJlc29sdmVGbiIsIlByb21pc2UiLCJzaW1wbGVCaW5kIiwicHJvY2Vzc1F1ZXVlIiwicGVuZGluZyIsInByb2Nlc3NTY2hlZHVsZWQiLCJzY2hlZHVsZVByb2Nlc3NRdWV1ZSIsIkRlZmVycmVkIiwicHJvbWlzZXMiLCJyZXN1bHRzIiwiJHFNaW5FcnIiLCJUeXBlRXJyb3IiLCJvbkZ1bGZpbGxlZCIsIm9uUmVqZWN0ZWQiLCJwcm9ncmVzc0JhY2siLCJjYXRjaCIsImZpbmFsbHkiLCJoYW5kbGVDYWxsYmFjayIsIiQkcmVqZWN0IiwiJCRyZXNvbHZlIiwicHJvZ3Jlc3MiLCJtYWtlUHJvbWlzZSIsInJlc29sdmVkIiwiaXNSZXNvbHZlZCIsImNhbGxiYWNrT3V0cHV0IiwiZXJyYmFjayIsIiRRIiwiUSIsInJlc29sdmVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZSIsIndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJhZlN1cHBvcnRlZCIsInJhZiIsInRpbWVyIiwiVFRMIiwiJHJvb3RTY29wZU1pbkVyciIsImxhc3REaXJ0eVdhdGNoIiwiYXBwbHlBc3luY0lkIiwiZGlnZXN0VHRsIiwiU2NvcGUiLCIkaWQiLCIkcGFyZW50IiwiJCR3YXRjaGVycyIsIiQkbmV4dFNpYmxpbmciLCIkJHByZXZTaWJsaW5nIiwiJCRjaGlsZEhlYWQiLCIkJGNoaWxkVGFpbCIsIiRyb290IiwiJCRsaXN0ZW5lcnMiLCIkJGxpc3RlbmVyQ291bnQiLCJiZWdpblBoYXNlIiwicGhhc2UiLCJjbGVhclBoYXNlIiwiZGVjcmVtZW50TGlzdGVuZXJDb3VudCIsImN1cnJlbnQiLCJpbml0V2F0Y2hWYWwiLCJmbHVzaEFwcGx5QXN5bmMiLCJhcHBseUFzeW5jUXVldWUiLCJzY2hlZHVsZUFwcGx5QXN5bmMiLCJpc29sYXRlIiwiZGVzdHJveUNoaWxkIiwiY2hpbGQiLCIkJENoaWxkU2NvcGUiLCJ3YXRjaEV4cCIsIndhdGNoZXIiLCJlcSIsIndhdGNoRXhwcmVzc2lvbnMiLCJ3YXRjaEdyb3VwQWN0aW9uIiwiY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQiLCJmaXJzdFJ1biIsIm5ld1ZhbHVlcyIsImRlcmVnaXN0ZXJGbnMiLCJzaG91bGRDYWxsIiwiZXhwciIsInVud2F0Y2hGbiIsIiR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvciIsIl92YWx1ZSIsIm5ld0xlbmd0aCIsImJvdGhOYU4iLCJuZXdJdGVtIiwib2xkSXRlbSIsImludGVybmFsQXJyYXkiLCJvbGRMZW5ndGgiLCJjaGFuZ2VEZXRlY3RlZCIsImludGVybmFsT2JqZWN0IiwiJHdhdGNoQ29sbGVjdGlvbkFjdGlvbiIsImluaXRSdW4iLCJ2ZXJ5T2xkVmFsdWUiLCJ0cmFja1ZlcnlPbGRWYWx1ZSIsImNoYW5nZURldGVjdG9yIiwid2F0Y2giLCJ3YXRjaGVycyIsImRpcnR5IiwibmV4dCIsImxvZ0lkeCIsImFzeW5jVGFzayIsInR0bCIsIndhdGNoTG9nIiwiYXN5bmNRdWV1ZSIsIiRldmFsIiwidHJhdmVyc2VTY29wZXNMb29wIiwiaXNOYU4iLCJtc2ciLCJwb3N0RGlnZXN0UXVldWUiLCJldmVudE5hbWUiLCIkYXBwbHlBc3luY0V4cHJlc3Npb24iLCJuYW1lZExpc3RlbmVycyIsImluZGV4T2ZMaXN0ZW5lciIsIiRlbWl0IiwidGFyZ2V0U2NvcGUiLCJsaXN0ZW5lckFyZ3MiLCJjdXJyZW50U2NvcGUiLCIkJGFzeW5jUXVldWUiLCIkJHBvc3REaWdlc3RRdWV1ZSIsIiQkYXBwbHlBc3luY1F1ZXVlIiwidXJpIiwiaXNJbWFnZSIsIm5vcm1hbGl6ZWRWYWwiLCJyZWdleCIsImFkanVzdE1hdGNoZXIiLCJtYXRjaGVyIiwiJHNjZU1pbkVyciIsImVzY2FwZUZvclJlZ2V4cCIsImFkanVzdE1hdGNoZXJzIiwibWF0Y2hlcnMiLCJhZGp1c3RlZE1hdGNoZXJzIiwiU0NFX0NPTlRFWFRTIiwicmVzb3VyY2VVcmxXaGl0ZWxpc3QiLCJyZXNvdXJjZVVybEJsYWNrbGlzdCIsIm1hdGNoVXJsIiwiaXNSZXNvdXJjZVVybEFsbG93ZWRCeVBvbGljeSIsImFsbG93ZWQiLCJnZW5lcmF0ZUhvbGRlclR5cGUiLCJCYXNlIiwiaG9sZGVyVHlwZSIsInRydXN0ZWRWYWx1ZSIsIiQkdW53cmFwVHJ1c3RlZFZhbHVlIiwidHJ1c3RBcyIsIkNvbnN0cnVjdG9yIiwiYnlUeXBlIiwibWF5YmVUcnVzdGVkIiwidHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSIsImh0bWxTYW5pdGl6ZXIiLCJDU1MiLCJVUkwiLCJKUyIsIm1zaWUiLCJzY2UiLCJpc0VuYWJsZWQiLCJwYXJzZUFzIiwiZW51bVZhbHVlIiwibE5hbWUiLCJ2ZW5kb3JQcmVmaXgiLCJldmVudFN1cHBvcnQiLCJhbmRyb2lkIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiYm94ZWUiLCJ2ZW5kb3JSZWdleCIsImJvZHlTdHlsZSIsInRyYW5zaXRpb25zIiwiYW5pbWF0aW9ucyIsIndlYmtpdFRyYW5zaXRpb24iLCJ3ZWJraXRBbmltYXRpb24iLCJwdXNoU3RhdGUiLCJoYXNFdmVudCIsImRpdkVsbSIsImhhbmRsZVJlcXVlc3RGbiIsInRwbCIsImlnbm9yZVJlcXVlc3RFcnJvciIsImhhbmRsZUVycm9yIiwidG90YWxQZW5kaW5nUmVxdWVzdHMiLCJ0cmFuc2Zvcm1lciIsImh0dHBPcHRpb25zIiwidGVzdGFiaWxpdHkiLCJmaW5kQmluZGluZ3MiLCJvcHRfZXhhY3RNYXRjaCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJtYXRjaGVzIiwiZGF0YUJpbmRpbmciLCJiaW5kaW5nTmFtZSIsImZpbmRNb2RlbHMiLCJwcmVmaXhlcyIsImF0dHJpYnV0ZUVxdWFscyIsImdldExvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJ3aGVuU3RhYmxlIiwiZGVmZXJyZWRzIiwiJCR0aW1lb3V0SWQiLCJ1cmxQYXJzaW5nTm9kZSIsInJlcXVlc3RVcmwiLCJvcmlnaW5VcmwiLCJmaWx0ZXJzIiwic3VmZml4IiwiY3VycmVuY3lGaWx0ZXIiLCJkYXRlRmlsdGVyIiwiZmlsdGVyRmlsdGVyIiwianNvbkZpbHRlciIsImxpbWl0VG9GaWx0ZXIiLCJsb3dlcmNhc2VGaWx0ZXIiLCJudW1iZXJGaWx0ZXIiLCJvcmRlckJ5RmlsdGVyIiwidXBwZXJjYXNlRmlsdGVyIiwiY29tcGFyYXRvciIsInByZWRpY2F0ZUZuIiwibWF0Y2hBZ2FpbnN0QW55UHJvcCIsImNyZWF0ZVByZWRpY2F0ZUZuIiwic2hvdWxkTWF0Y2hQcmltaXRpdmVzIiwiYWN0dWFsIiwiZXhwZWN0ZWQiLCJpdGVtIiwiZGVlcENvbXBhcmUiLCJkb250TWF0Y2hXaG9sZU9iamVjdCIsImFjdHVhbFR5cGUiLCJleHBlY3RlZFR5cGUiLCJleHBlY3RlZFZhbCIsIm1hdGNoQW55UHJvcGVydHkiLCJhY3R1YWxWYWwiLCIkbG9jYWxlIiwiZm9ybWF0cyIsImFtb3VudCIsImN1cnJlbmN5U3ltYm9sIiwiZnJhY3Rpb25TaXplIiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwiZ3JvdXBTZXAiLCJkZWNpbWFsU2VwIiwiaXNGaW5pdGUiLCJpc05lZ2F0aXZlIiwiYWJzIiwibnVtU3RyIiwiZm9ybWF0ZWRUZXh0IiwiaGFzRXhwb25lbnQiLCJ0b0ZpeGVkIiwicGFyc2VGbG9hdCIsImZyYWN0aW9uTGVuIiwibWluIiwicm91bmQiLCJmcmFjdGlvbiIsImxncm91cCIsImdyb3VwIiwicGFkTnVtYmVyIiwiZGlnaXRzIiwibmVnIiwiZGF0ZUdldHRlciIsImRhdGUiLCJkYXRlU3RyR2V0dGVyIiwic2hvcnRGb3JtIiwidGltZVpvbmVHZXR0ZXIiLCJ6b25lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJwYWRkZWRab25lIiwiZ2V0Rmlyc3RUaHVyc2RheU9mWWVhciIsInllYXIiLCJkYXlPZldlZWtPbkZpcnN0IiwiZ2V0RGF5IiwiZ2V0VGh1cnNkYXlUaGlzV2VlayIsImRhdGV0aW1lIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJ3ZWVrR2V0dGVyIiwiZmlyc3RUaHVycyIsInRoaXNUaHVycyIsImFtcG1HZXR0ZXIiLCJnZXRIb3VycyIsImpzb25TdHJpbmdUb0RhdGUiLCJzdHJpbmciLCJSX0lTTzg2MDFfU1RSIiwidHpIb3VyIiwidHpNaW4iLCJkYXRlU2V0dGVyIiwic2V0VVRDRnVsbFllYXIiLCJzZXRGdWxsWWVhciIsInRpbWVTZXR0ZXIiLCJzZXRVVENIb3VycyIsInNldEhvdXJzIiwibSIsIm1zIiwiZm9ybWF0IiwidGltZXpvbmUiLCJOVU1CRVJfU1RSSU5HIiwiREFURV9GT1JNQVRTX1NQTElUIiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJEQVRFX0ZPUk1BVFMiLCJvYmplY3QiLCJzcGFjaW5nIiwibGltaXQiLCJJbmZpbml0eSIsInNvcnRQcmVkaWNhdGUiLCJyZXZlcnNlT3JkZXIiLCJjb21wIiwicmV2ZXJzZUNvbXBhcmF0b3IiLCJkZXNjZW5kaW5nIiwib2JqZWN0VG9TdHJpbmciLCJ2MSIsInYyIiwibWFwIiwicHJlZGljYXRlIiwibmdEaXJlY3RpdmUiLCJudWxsRm9ybVJlbmFtZUNvbnRyb2wiLCJjb250cm9sIiwiJG5hbWUiLCJGb3JtQ29udHJvbGxlciIsImNvbnRyb2xzIiwicGFyZW50Rm9ybSIsIiQkcGFyZW50Rm9ybSIsIm51bGxGb3JtQ3RybCIsIiRlcnJvciIsIiQkc3VjY2VzcyIsIiRwZW5kaW5nIiwiJGRpcnR5IiwiJHByaXN0aW5lIiwiJHZhbGlkIiwiJGludmFsaWQiLCIkc3VibWl0dGVkIiwiJGFkZENvbnRyb2wiLCIkcm9sbGJhY2tWaWV3VmFsdWUiLCIkY29tbWl0Vmlld1ZhbHVlIiwiJCRyZW5hbWVDb250cm9sIiwibmV3TmFtZSIsIm9sZE5hbWUiLCIkcmVtb3ZlQ29udHJvbCIsIiRzZXRWYWxpZGl0eSIsImFkZFNldFZhbGlkaXR5TWV0aG9kIiwiY3RybCIsInNldCIsInVuc2V0IiwiJHNldERpcnR5IiwiUFJJU1RJTkVfQ0xBU1MiLCJESVJUWV9DTEFTUyIsIiRzZXRQcmlzdGluZSIsInNldENsYXNzIiwiU1VCTUlUVEVEX0NMQVNTIiwiJHNldFVudG91Y2hlZCIsIiRzZXRTdWJtaXR0ZWQiLCJzdHJpbmdCYXNlZElucHV0VHlwZSIsIiRmb3JtYXR0ZXJzIiwiJGlzRW1wdHkiLCJ0ZXh0SW5wdXRUeXBlIiwiYmFzZUlucHV0VHlwZSIsImNvbXBvc2luZyIsImV2IiwibmdUcmltIiwiJHZpZXdWYWx1ZSIsIiQkaGFzTmF0aXZlVmFsaWRhdG9ycyIsIiRzZXRWaWV3VmFsdWUiLCJkZWZlckxpc3RlbmVyIiwib3JpZ1ZhbHVlIiwia2V5Q29kZSIsIiRyZW5kZXIiLCJ3ZWVrUGFyc2VyIiwiaXNvV2VlayIsImV4aXN0aW5nRGF0ZSIsIldFRUtfUkVHRVhQIiwid2VlayIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiLCJhZGREYXlzIiwiZ2V0U2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsIk5hTiIsImNyZWF0ZURhdGVQYXJzZXIiLCJtYXBwaW5nIiwiaXNvIiwiSVNPX0RBVEVfUkVHRVhQIiwieXl5eSIsIk1NIiwiZGQiLCJISCIsIm1tIiwic3MiLCJzc3MiLCJwYXJ0IiwiY3JlYXRlRGF0ZUlucHV0VHlwZSIsInBhcnNlRGF0ZSIsImlzVmFsaWREYXRlIiwicGFyc2VPYnNlcnZlZERhdGVWYWx1ZSIsImJhZElucHV0Q2hlY2tlciIsInByZXZpb3VzRGF0ZSIsIiRvcHRpb25zIiwiJCRwYXJzZXJOYW1lIiwiJHBhcnNlcnMiLCJwYXJzZWREYXRlIiwiJG5nTW9kZWxNaW5FcnIiLCJ0aW1lem9uZU9mZnNldCIsIm5nTWluIiwibWluVmFsIiwiJHZhbGlkYXRvcnMiLCIkdmFsaWRhdGUiLCJuZ01heCIsIm1heFZhbCIsIm5hdGl2ZVZhbGlkYXRpb24iLCJ2YWxpZGl0eSIsIlZBTElESVRZX1NUQVRFX1BST1BFUlRZIiwiYmFkSW5wdXQiLCJ0eXBlTWlzbWF0Y2giLCJudW1iZXJJbnB1dFR5cGUiLCJOVU1CRVJfUkVHRVhQIiwidXJsSW5wdXRUeXBlIiwibW9kZWxWYWx1ZSIsInZpZXdWYWx1ZSIsIlVSTF9SRUdFWFAiLCJlbWFpbElucHV0VHlwZSIsImVtYWlsIiwiRU1BSUxfUkVHRVhQIiwicmFkaW9JbnB1dFR5cGUiLCJjaGVja2VkIiwicGFyc2VDb25zdGFudEV4cHIiLCJmYWxsYmFjayIsInBhcnNlRm4iLCJjaGVja2JveElucHV0VHlwZSIsInRydWVWYWx1ZSIsIm5nVHJ1ZVZhbHVlIiwiZmFsc2VWYWx1ZSIsIm5nRmFsc2VWYWx1ZSIsImNsYXNzRGlyZWN0aXZlIiwiYXJyYXlEaWZmZXJlbmNlIiwiYXJyYXlDbGFzc2VzIiwiYWRkQ2xhc3NlcyIsImRpZ2VzdENsYXNzQ291bnRzIiwicmVtb3ZlQ2xhc3NlcyIsImNsYXNzQ291bnRzIiwiY2xhc3Nlc1RvVXBkYXRlIiwidXBkYXRlQ2xhc3NlcyIsIm5nQ2xhc3NXYXRjaEFjdGlvbiIsIiRpbmRleCIsIm9sZCRpbmRleCIsIm1vZCIsInNldFZhbGlkaXR5IiwidmFsaWRhdGlvbkVycm9yS2V5IiwiY3JlYXRlQW5kU2V0IiwidW5zZXRBbmRDbGVhbnVwIiwiY2FjaGVkVG9nZ2xlQ2xhc3MiLCJQRU5ESU5HX0NMQVNTIiwidG9nZ2xlVmFsaWRhdGlvbkNzcyIsImlzT2JqZWN0RW1wdHkiLCJjb21iaW5lZFN0YXRlIiwic3dpdGNoVmFsdWUiLCJjbGFzc0NhY2hlIiwiaXNWYWxpZCIsIlZBTElEX0NMQVNTIiwiSU5WQUxJRF9DTEFTUyIsIlJFR0VYX1NUUklOR19SRUdFWFAiLCJtYW51YWxMb3dlcmNhc2UiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwibWFudWFsVXBwZXJjYXNlIiwiZG9jdW1lbnRNb2RlIiwiaXNBY3RpdmVfIiwiYWN0aXZlIiwiZnVsbCIsIm1ham9yIiwibWlub3IiLCJkb3QiLCJjb2RlTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiTU9VU0VfRVZFTlRfTUFQIiwibW91c2VsZWF2ZSIsIm1vdXNlZW50ZXIiLCJ0aGVhZCIsImNvbCIsInRyIiwidGQiLCJvcHRncm91cCIsInRib2R5IiwidGZvb3QiLCJjb2xncm91cCIsImNhcHRpb24iLCJ0aCIsInJlYWR5IiwidHJpZ2dlciIsImZpcmVkIiwicmVtb3ZlRGF0YSIsInJlbW92ZUF0dHJpYnV0ZSIsImNzcyIsImxvd2VyY2FzZWROYW1lIiwiZ2V0TmFtZWRJdGVtIiwic3BlY2lmaWVkIiwicmV0IiwiZ2V0VGV4dCIsIiRkdiIsIm11bHRpcGxlIiwic2VsZWN0ZWQiLCJub2RlQ291bnQiLCJqcUxpdGVPbiIsInR5cGVzIiwicmVsYXRlZCIsInJlbGF0ZWRUYXJnZXQiLCJjb250YWlucyIsIm9mZiIsIm9uZSIsIm9uRm4iLCJyZXBsYWNlTm9kZSIsImluc2VydEJlZm9yZSIsImNvbnRlbnREb2N1bWVudCIsInByZXBlbmQiLCJ3cmFwTm9kZSIsImRldGFjaCIsImFmdGVyIiwibmV3RWxlbWVudCIsInRvZ2dsZUNsYXNzIiwiY29uZGl0aW9uIiwiY2xhc3NDb25kaXRpb24iLCJuZXh0RWxlbWVudFNpYmxpbmciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImV4dHJhUGFyYW1ldGVycyIsImR1bW15RXZlbnQiLCJldmVudEZuc0NvcHkiLCJoYW5kbGVyQXJncyIsImFyZzMiLCJ1bmJpbmQiLCIkYW5pbWF0ZU1pbkVyciIsIiQkc2VsZWN0b3JzIiwiY2xhc3NOYW1lRmlsdGVyIiwiJCRjbGFzc05hbWVGaWx0ZXIiLCJydW5BbmltYXRpb25Qb3N0RGlnZXN0IiwiY2FuY2VsRm4iLCIkJGNhbmNlbEZuIiwicmVzb2x2ZUVsZW1lbnRDbGFzc2VzIiwiaGFzQ2xhc3NlcyIsImNhY2hlZENsYXNzTWFuaXB1bGF0aW9uIiwib3AiLCJhc3luY1Byb21pc2UiLCJjdXJyZW50RGVmZXIiLCJhcHBseVN0eWxlcyIsInN0eWxlcyIsImZyb20iLCJ0byIsImFuaW1hdGUiLCJlbnRlciIsImxlYXZlIiwibW92ZSIsIiQkYWRkQ2xhc3NJbW1lZGlhdGVseSIsIiQkcmVtb3ZlQ2xhc3NJbW1lZGlhdGVseSIsImFkZCIsIlNUT1JBR0VfS0VZIiwiY3JlYXRlZENhY2hlIiwiJCRzZXRDbGFzc0ltbWVkaWF0ZWx5IiwiQ29udGVudC1UeXBlIiwiWyIsInsiLCJQQVRIX01BVENIIiwiaHR0cCIsImh0dHBzIiwiZnRwIiwibG9jYXRpb25Qcm90b3R5cGUiLCJwYXJhbVZhbHVlIiwiTG9jYXRpb24iLCJDT05TVEFOVFMiLCJudWxsIiwidHJ1ZSIsImZhbHNlIiwiY29uc3RhbnRHZXR0ZXIiLCJPUEVSQVRPUlMiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09PSIsIiE9PSIsIj09IiwiIT0iLCI8IiwiPiIsIjw9IiwiPj0iLCImJiIsInx8IiwiISIsIj0iLCJ8IiwiRVNDQVBFIiwiZiIsInIiLCJ0IiwiJyIsIlwiIiwibGV4IiwidG9rZW5zIiwicmVhZFN0cmluZyIsInBlZWsiLCJyZWFkTnVtYmVyIiwiaXNJZGVudCIsInJlYWRJZGVudCIsImlzIiwiaXNXaGl0ZXNwYWNlIiwiY2gyIiwiY2gzIiwib3AxIiwib3AyIiwib3AzIiwib3BlcmF0b3IiLCJ0aHJvd0Vycm9yIiwiY2hhcnMiLCJpc0V4cE9wZXJhdG9yIiwic3RhcnQiLCJlbmQiLCJjb2xTdHIiLCJwZWVrQ2giLCJxdW90ZSIsInJhd1N0cmluZyIsImhleCIsInJlcCIsIlpFUk8iLCJzdGF0ZW1lbnRzIiwicHJpbWFyeSIsImV4cGVjdCIsImZpbHRlckNoYWluIiwiY29uc3VtZSIsImFycmF5RGVjbGFyYXRpb24iLCJmdW5jdGlvbkNhbGwiLCJvYmplY3RJbmRleCIsImZpZWxkQWNjZXNzIiwicGVla1Rva2VuIiwiZTEiLCJlMiIsImUzIiwiZTQiLCJwZWVrQWhlYWQiLCJ1bmFyeUZuIiwicmlnaHQiLCJiaW5hcnlGbiIsImxlZnQiLCJpc0JyYW5jaGluZyIsImlucHV0Rm4iLCJhcmdzRm4iLCJldmVyeSIsImFzc2lnbm1lbnQiLCJ0ZXJuYXJ5IiwibWlkZGxlIiwibG9naWNhbE9SIiwibG9naWNhbEFORCIsImVxdWFsaXR5IiwicmVsYXRpb25hbCIsImFkZGl0aXZlIiwibXVsdGlwbGljYXRpdmUiLCJ1bmFyeSIsImluZGV4Rm4iLCJmbkdldHRlciIsImNvbnRleHRHZXR0ZXIiLCJleHByZXNzaW9uVGV4dCIsImVsZW1lbnRGbnMiLCJ2YWx1ZUZucyIsInl5IiwieSIsIk1NTU0iLCJNTU0iLCJNIiwiSCIsImhoIiwiRUVFRSIsIkVFRSIsIloiLCJ3dyIsInciLCJ4bGlua0hyZWYiLCJwcm9wTmFtZSIsIm5vcm1hbGl6ZWQiLCJodG1sQXR0ciIsImZvcm1EaXJlY3RpdmVGYWN0b3J5IiwiaXNOZ0Zvcm0iLCJmb3JtRWxlbWVudCIsImhhbmRsZUZvcm1TdWJtaXNzaW9uIiwicGFyZW50Rm9ybUN0cmwiLCJhbGlhcyIsIkRBVEVfUkVHRVhQIiwiREFURVRJTUVMT0NBTF9SRUdFWFAiLCJNT05USF9SRUdFWFAiLCJUSU1FX1JFR0VYUCIsImlucHV0VHlwZSIsImRhdGV0aW1lLWxvY2FsIiwidGltZSIsIm1vbnRoIiwicmFkaW8iLCJjaGVja2JveCIsImhpZGRlbiIsInN1Ym1pdCIsInJlc2V0IiwiZmlsZSIsImN0cmxzIiwiQ09OU1RBTlRfVkFMVUVfUkVHRVhQIiwidHBsQXR0ciIsIiRjb21waWxlIiwidGVtcGxhdGVFbGVtZW50IiwidEVsZW1lbnQiLCJuZ0JpbmRIdG1sR2V0dGVyIiwibmdCaW5kSHRtbFdhdGNoIiwiZ2V0VHJ1c3RlZEh0bWwiLCIkdmlld0NoYW5nZUxpc3RlbmVycyIsImZvcmNlQXN5bmNFdmVudHMiLCJibHVyIiwiZm9jdXMiLCIkZXZlbnQiLCJwcmV2aW91c0VsZW1lbnRzIiwibmV3U2NvcGUiLCJzcmNFeHAiLCJvbmxvYWRFeHAiLCJhdXRvU2Nyb2xsRXhwIiwiYXV0b3Njcm9sbCIsInByZXZpb3VzRWxlbWVudCIsImN1cnJlbnRFbGVtZW50IiwiY2hhbmdlQ291bnRlciIsImNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQiLCJwYXJzZUFzUmVzb3VyY2VVcmwiLCJhZnRlckFuaW1hdGlvbiIsInRoaXNDaGFuZ2VJZCIsInRyaW1WYWx1ZXMiLCJVTlRPVUNIRURfQ0xBU1MiLCJUT1VDSEVEX0NMQVNTIiwiTmdNb2RlbENvbnRyb2xsZXIiLCIkbW9kZWxWYWx1ZSIsIiQkcmF3TW9kZWxWYWx1ZSIsIiRhc3luY1ZhbGlkYXRvcnMiLCIkdW50b3VjaGVkIiwiJHRvdWNoZWQiLCJwYXJzZXJWYWxpZCIsInBhcnNlZE5nTW9kZWwiLCJwYXJzZWROZ01vZGVsQXNzaWduIiwibmdNb2RlbEdldCIsIm5nTW9kZWxTZXQiLCJwZW5kaW5nRGVib3VuY2UiLCIkJHNldE9wdGlvbnMiLCJnZXR0ZXJTZXR0ZXIiLCJpbnZva2VNb2RlbEdldHRlciIsImludm9rZU1vZGVsU2V0dGVyIiwiJCQkcCIsImN1cnJlbnRWYWxpZGF0aW9uUnVuSWQiLCIkc2V0VG91Y2hlZCIsIiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSIsInByZXZWYWxpZCIsInByZXZNb2RlbFZhbHVlIiwiYWxsb3dJbnZhbGlkIiwiJCRydW5WYWxpZGF0b3JzIiwiYWxsVmFsaWQiLCIkJHdyaXRlTW9kZWxUb1Njb3BlIiwiZG9uZUNhbGxiYWNrIiwicHJvY2Vzc1BhcnNlRXJyb3JzIiwiZXJyb3JLZXkiLCJwcm9jZXNzU3luY1ZhbGlkYXRvcnMiLCJzeW5jVmFsaWRhdG9yc1ZhbGlkIiwidmFsaWRhdG9yIiwicHJvY2Vzc0FzeW5jVmFsaWRhdG9ycyIsInZhbGlkYXRvclByb21pc2VzIiwidmFsaWRhdGlvbkRvbmUiLCJsb2NhbFZhbGlkYXRpb25SdW5JZCIsIiQkcGFyc2VBbmRWYWxpZGF0ZSIsIndyaXRlVG9Nb2RlbElmTmVlZGVkIiwidXBkYXRlT25EZWZhdWx0IiwiJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCIsImRlYm91bmNlIiwiZGVib3VuY2VEZWxheSIsImZvcm1hdHRlcnMiLCJtb2RlbEN0cmwiLCJmb3JtQ3RybCIsInVwZGF0ZU9uIiwiREVGQVVMVF9SRUdFWFAiLCJ0aGF0IiwiQlJBQ0UiLCJJU19XSEVOIiwidXBkYXRlRWxlbWVudFRleHQiLCJuZXdUZXh0IiwibGFzdENvdW50IiwibnVtYmVyRXhwIiwid2hlbkV4cCIsIndoZW5zIiwid2hlbnNFeHBGbnMiLCJicmFjZVJlcGxhY2VtZW50Iiwid2F0Y2hSZW1vdmVyIiwiYXR0cmlidXRlTmFtZSIsInRtcE1hdGNoIiwid2hlbktleSIsImNvdW50SXNOYU4iLCJOR19SRU1PVkVEIiwibmdSZXBlYXRNaW5FcnIiLCJ1cGRhdGVTY29wZSIsInZhbHVlSWRlbnRpZmllciIsImtleUlkZW50aWZpZXIiLCJhcnJheUxlbmd0aCIsIiRmaXJzdCIsIiRsYXN0IiwiJG1pZGRsZSIsIiRvZGQiLCIkZXZlbiIsImdldEJsb2NrU3RhcnQiLCJnZXRCbG9ja0VuZCIsIm5nUmVwZWF0RW5kQ29tbWVudCIsImxocyIsInJocyIsImFsaWFzQXMiLCJ0cmFja0J5RXhwIiwidHJhY2tCeUV4cEdldHRlciIsInRyYWNrQnlJZEV4cEZuIiwidHJhY2tCeUlkQXJyYXlGbiIsInRyYWNrQnlJZE9iakZuIiwiaGFzaEZuTG9jYWxzIiwibGFzdEJsb2NrTWFwIiwibmV4dE5vZGUiLCJjb2xsZWN0aW9uTGVuZ3RoIiwidHJhY2tCeUlkIiwidHJhY2tCeUlkRm4iLCJjb2xsZWN0aW9uS2V5cyIsIm5leHRCbG9ja09yZGVyIiwicHJldmlvdXNOb2RlIiwibmV4dEJsb2NrTWFwIiwiaXRlbUtleSIsImJsb2NrS2V5IiwiTkdfSElERV9DTEFTUyIsIk5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1MiLCJ0ZW1wQ2xhc3NlcyIsIm5ld1N0eWxlcyIsIm9sZFN0eWxlcyIsImNhc2VzIiwibmdTd2l0Y2hDb250cm9sbGVyIiwid2F0Y2hFeHByIiwic2VsZWN0ZWRUcmFuc2NsdWRlcyIsInNlbGVjdGVkRWxlbWVudHMiLCJwcmV2aW91c0xlYXZlQW5pbWF0aW9ucyIsInNlbGVjdGVkU2NvcGVzIiwic3BsaWNlRmFjdG9yeSIsInNlbGVjdGVkVHJhbnNjbHVkZSIsImNhc2VFbGVtZW50Iiwic2VsZWN0ZWRTY29wZSIsImFuY2hvciIsIm5nT3B0aW9uc01pbkVyciIsIk5HX09QVElPTlNfUkVHRVhQIiwibnVsbE1vZGVsQ3RybCIsIm51bGxPcHRpb24iLCJ1bmtub3duT3B0aW9uIiwib3B0aW9uc01hcCIsIm5nTW9kZWxDdHJsIiwiZGF0YWJvdW5kIiwiaW5pdCIsIm5nTW9kZWxDdHJsXyIsIm51bGxPcHRpb25fIiwidW5rbm93bk9wdGlvbl8iLCJhZGRPcHRpb24iLCJyZW1vdmVPcHRpb24iLCJoYXNPcHRpb24iLCJyZW5kZXJVbmtub3duT3B0aW9uIiwidW5rbm93blZhbCIsInNldHVwQXNTaW5nbGUiLCJzZWxlY3RFbGVtZW50Iiwic2VsZWN0Q3RybCIsImVtcHR5T3B0aW9uIiwic2V0dXBBc011bHRpcGxlIiwibGFzdFZpZXciLCJzZXR1cEFzT3B0aW9ucyIsImNhbGxFeHByZXNzaW9uIiwiZXhwckZuIiwidmFsdWVOYW1lIiwia2V5TmFtZSIsInNlbGVjdGlvbkNoYW5nZWQiLCJ2YWx1ZXNGbiIsInNlbGVjdGVkS2V5IiwidHJhY2tGbiIsInRyYWNrS2V5c0NhY2hlIiwiZ2V0Vmlld1ZhbHVlIiwicmVuZGVyIiwidmlld1ZhbHVlRm4iLCJzZWxlY3RBc0ZuIiwiZ2V0TGFiZWxzIiwidG9EaXNwbGF5IiwiZGlzcGxheUZuIiwiY3JlYXRlSXNTZWxlY3RlZEZuIiwic2VsZWN0ZWRTZXQiLCJ0cmFja0luZGV4IiwiY29tcGFyZVZhbHVlRm4iLCJzY2hlZHVsZVJlbmRlcmluZyIsInJlbmRlclNjaGVkdWxlZCIsInVwZGF0ZUxhYmVsTWFwIiwibGFiZWxNYXAiLCJsYWJlbCIsImFkZGVkIiwib3B0aW9uR3JvdXBOYW1lIiwib3B0aW9uR3JvdXAiLCJleGlzdGluZ1BhcmVudCIsImV4aXN0aW5nT3B0aW9ucyIsImV4aXN0aW5nT3B0aW9uIiwiZ3JvdXBMZW5ndGgiLCJncm91cEluZGV4IiwibGFzdEVsZW1lbnQiLCJvcHRpb25JZCIsIm9wdGlvbkdyb3VwcyIsIm9wdGlvbkdyb3VwTmFtZXMiLCJpc1NlbGVjdGVkIiwiYW55U2VsZWN0ZWQiLCJncm91cEJ5Rm4iLCJvcHRpb25Hcm91cHNDYWNoZSIsIm9wdEdyb3VwVGVtcGxhdGUiLCJvcHRpb25UZW1wbGF0ZSIsIm9wdGlvbnNFeHAiLCJzZWxlY3RBcyIsInRyYWNrIiwibnVsbFNlbGVjdEN0cmwiLCJzZWxlY3RDdHJsTmFtZSIsInBhdHRlcm5FeHAiLCJpbnRWYWwiLCIkU2FuaXRpemVQcm92aWRlciIsImJ1ZiIsImh0bWxQYXJzZXIiLCJodG1sU2FuaXRpemVXcml0ZXIiLCJzYW5pdGl6ZVRleHQiLCJ3cml0ZXIiLCJoYW5kbGVyIiwicGFyc2VTdGFydFRhZyIsInRhZ05hbWUiLCJyZXN0IiwiYmxvY2tFbGVtZW50cyIsImlubGluZUVsZW1lbnRzIiwicGFyc2VFbmRUYWciLCJvcHRpb25hbEVuZFRhZ0VsZW1lbnRzIiwidm9pZEVsZW1lbnRzIiwiQVRUUl9SRUdFWFAiLCJkb3VibGVRdW90ZWRWYWx1ZSIsInNpbmdsZVF1b3RlZFZhbHVlIiwidW5xdW90ZWRWYWx1ZSIsImRlY29kZUVudGl0aWVzIiwic3BlY2lhbEVsZW1lbnRzIiwiQ09NTUVOVF9SRUdFWFAiLCJDREFUQV9SRUdFWFAiLCJjb21tZW50IiwiRE9DVFlQRV9SRUdFWFAiLCJCRUdJTkdfRU5EX1RBR0VfUkVHRVhQIiwiRU5EX1RBR19SRUdFWFAiLCJCRUdJTl9UQUdfUkVHRVhQIiwiU1RBUlRfVEFHX1JFR0VYUCIsIiRzYW5pdGl6ZU1pbkVyciIsImhpZGRlblByZSIsImVuY29kZUVudGl0aWVzIiwiU1VSUk9HQVRFX1BBSVJfUkVHRVhQIiwiaGkiLCJsb3ciLCJOT05fQUxQSEFOVU1FUklDX1JFR0VYUCIsInVyaVZhbGlkYXRvciIsImlnbm9yZSIsIm91dCIsInZhbGlkRWxlbWVudHMiLCJsa2V5IiwidmFsaWRBdHRycyIsInVyaUF0dHJzIiwib3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzIiwib3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cyIsInN2Z0VsZW1lbnRzIiwiaHRtbEF0dHJzIiwic3ZnQXR0cnMiLCIkc2FuaXRpemUiLCJMSU5LWV9VUkxfUkVHRVhQIiwiTUFJTFRPX1JFR0VYUCIsImFkZFRleHQiLCJhZGRMaW5rIiwicmF3IiwidHJlZURhdGEiLCJjb2xEZWZzIiwid2lkdGgiXSwibWFwcGluZ3MiOiJDQUtBLFNBQVVBLEVBQVFDLEVBQVVDLEdBQVks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LEVBQVFycEQsRUFBS3ZtQixFQUFNLEdBQUdELFFBQVEydkUsRUFBZSxLQUM3Q0csRUFBTUEsRUFBSXhtRCxVQUFVNXBCLEVBQUlPLEVBQU0sR0FBR0csT0FHbkMsT0FEQXd2RSxHQUFRRSxHQUNETCxFQUFVcG5FLEVBQUtXLEtBQUssVUEwQjVCOUosT0FBUUEsT0FBT2dNLFNBRWxCQSxRQUFRNUwsT0FBTyxXQUFZLGFBQzFCbU4sV0FBVyxrQkFDSixTQUNBLGFBQ0EsU0FBU21uQixHQUNMQSxFQUFPbThDLFdBQ0hybUUsS0FBTSxzQkFDTmtsQyxXQUNJbGxDLEtBQU0sWUFDTm00QyxPQUFRLFFBQ1JqVCxXQUNJbGxDLEtBQU0sZ0JBQ05tNEMsT0FBUSxTQUVSbjRDLEtBQU0scUJBQ05tNEMsT0FBUSxVQUdabjRDLEtBQU0sZUFDTm00QyxPQUFRLE9BQ1JqVCxjQUVBbGxDLEtBQU0sV0FDTm00QyxPQUFRLE9BQ1JqVCxnQkFHSmxsQyxLQUFNLHVCQUNOa2xDLFdBQ0lsbEMsS0FBTSxlQUNObTRDLE9BQVEsUUFDUmpULGNBRUFsbEMsS0FBTSxvQkFDTm00QyxPQUFRLE9BQ1JqVCxnQkFNUmhiLEVBQU9vOEMsVUFFQ3RtRSxLQUFNLE9BQ051bUUsTUFBTyxNQUdQdm1FLEtBQU0sU0FDTnVtRSxNQUFPIiwiZmlsZSI6ImRlbW9Db250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4zLjE0XHJcbiAqIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXHJcbiAqIExpY2Vuc2U6IE1JVFxyXG4gKi9cclxuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkgeyd1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVGhpcyBvYmplY3QgcHJvdmlkZXMgYSB1dGlsaXR5IGZvciBwcm9kdWNpbmcgcmljaCBFcnJvciBtZXNzYWdlcyB3aXRoaW5cclxuICogQW5ndWxhci4gSXQgY2FuIGJlIGNhbGxlZCBhcyBmb2xsb3dzOlxyXG4gKlxyXG4gKiB2YXIgZXhhbXBsZU1pbkVyciA9IG1pbkVycignZXhhbXBsZScpO1xyXG4gKiB0aHJvdyBleGFtcGxlTWluRXJyKCdvbmUnLCAnVGhpcyB7MH0gaXMgezF9JywgZm9vLCBiYXIpO1xyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBtaW5FcnIgaW4gdGhlIGV4YW1wbGUgbmFtZXNwYWNlLiBUaGVcclxuICogcmVzdWx0aW5nIGVycm9yIHdpbGwgaGF2ZSBhIG5hbWVzcGFjZWQgZXJyb3IgY29kZSBvZiBleGFtcGxlLm9uZS4gIFRoZVxyXG4gKiByZXN1bHRpbmcgZXJyb3Igd2lsbCByZXBsYWNlIHswfSB3aXRoIHRoZSB2YWx1ZSBvZiBmb28sIGFuZCB7MX0gd2l0aCB0aGVcclxuICogdmFsdWUgb2YgYmFyLiBUaGUgb2JqZWN0IGlzIG5vdCByZXN0cmljdGVkIGluIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGl0IGNhblxyXG4gKiB0YWtlLlxyXG4gKlxyXG4gKiBJZiBmZXdlciBhcmd1bWVudHMgYXJlIHNwZWNpZmllZCB0aGFuIG5lY2Vzc2FyeSBmb3IgaW50ZXJwb2xhdGlvbiwgdGhlIGV4dHJhXHJcbiAqIGludGVycG9sYXRpb24gbWFya2VycyB3aWxsIGJlIHByZXNlcnZlZCBpbiB0aGUgZmluYWwgc3RyaW5nLlxyXG4gKlxyXG4gKiBTaW5jZSBkYXRhIHdpbGwgYmUgcGFyc2VkIHN0YXRpY2FsbHkgZHVyaW5nIGEgYnVpbGQgc3RlcCwgc29tZSByZXN0cmljdGlvbnNcclxuICogYXJlIGFwcGxpZWQgd2l0aCByZXNwZWN0IHRvIGhvdyBtaW5FcnIgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFuZCBjYWxsZWQuXHJcbiAqIEluc3RhbmNlcyBzaG91bGQgaGF2ZSBuYW1lcyBvZiB0aGUgZm9ybSBuYW1lc3BhY2VNaW5FcnIgZm9yIGEgbWluRXJyIGNyZWF0ZWRcclxuICogdXNpbmcgbWluRXJyKCduYW1lc3BhY2UnKSAuIEVycm9yIGNvZGVzLCBuYW1lc3BhY2VzIGFuZCB0ZW1wbGF0ZSBzdHJpbmdzXHJcbiAqIHNob3VsZCBhbGwgYmUgc3RhdGljIHN0cmluZ3MsIG5vdCB2YXJpYWJsZXMgb3IgZ2VuZXJhbCBleHByZXNzaW9ucy5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZSBUaGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIG5ldyBtaW5FcnIgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IEVycm9yQ29uc3RydWN0b3IgQ3VzdG9tIGVycm9yIGNvbnN0cnVjdG9yIHRvIGJlIGluc3RhbnRpYXRlZCB3aGVuIHJldHVybmluZ1xyXG4gKiAgIGVycm9yIGZyb20gcmV0dXJuZWQgZnVuY3Rpb24sIGZvciBjYXNlcyB3aGVuIGEgcGFydGljdWxhciB0eXBlIG9mIGVycm9yIGlzIHVzZWZ1bC5cclxuICogQHJldHVybnMge2Z1bmN0aW9uKGNvZGU6c3RyaW5nLCB0ZW1wbGF0ZTpzdHJpbmcsIC4uLnRlbXBsYXRlQXJncyk6IEVycm9yfSBtaW5FcnIgaW5zdGFuY2VcclxuICovXHJcblxyXG5mdW5jdGlvbiBtaW5FcnIobW9kdWxlLCBFcnJvckNvbnN0cnVjdG9yKSB7XHJcbiAgRXJyb3JDb25zdHJ1Y3RvciA9IEVycm9yQ29uc3RydWN0b3IgfHwgRXJyb3I7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNvZGUgPSBhcmd1bWVudHNbMF0sXHJcbiAgICAgIHByZWZpeCA9ICdbJyArIChtb2R1bGUgPyBtb2R1bGUgKyAnOicgOiAnJykgKyBjb2RlICsgJ10gJyxcclxuICAgICAgdGVtcGxhdGUgPSBhcmd1bWVudHNbMV0sXHJcbiAgICAgIHRlbXBsYXRlQXJncyA9IGFyZ3VtZW50cyxcclxuXHJcbiAgICAgIG1lc3NhZ2UsIGk7XHJcblxyXG4gICAgbWVzc2FnZSA9IHByZWZpeCArIHRlbXBsYXRlLnJlcGxhY2UoL1xce1xcZCtcXH0vZywgZnVuY3Rpb24obWF0Y2gpIHtcclxuICAgICAgdmFyIGluZGV4ID0gK21hdGNoLnNsaWNlKDEsIC0xKSwgYXJnO1xyXG5cclxuICAgICAgaWYgKGluZGV4ICsgMiA8IHRlbXBsYXRlQXJncy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gdG9EZWJ1Z1N0cmluZyh0ZW1wbGF0ZUFyZ3NbaW5kZXggKyAyXSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG1hdGNoO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnXFxuaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMy4xNC8nICtcclxuICAgICAgKG1vZHVsZSA/IG1vZHVsZSArICcvJyA6ICcnKSArIGNvZGU7XHJcbiAgICBmb3IgKGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgKGkgPT0gMiA/ICc/JyA6ICcmJykgKyAncCcgKyAoaSAtIDIpICsgJz0nICtcclxuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodG9EZWJ1Z1N0cmluZyhhcmd1bWVudHNbaV0pKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgRXJyb3JDb25zdHJ1Y3RvcihtZXNzYWdlKTtcclxuICB9O1xyXG59XHJcblxyXG4vKiBXZSBuZWVkIHRvIHRlbGwganNoaW50IHdoYXQgdmFyaWFibGVzIGFyZSBiZWluZyBleHBvcnRlZCAqL1xyXG4vKiBnbG9iYWwgYW5ndWxhcjogdHJ1ZSxcclxuICBtc2llOiB0cnVlLFxyXG4gIGpxTGl0ZTogdHJ1ZSxcclxuICBqUXVlcnk6IHRydWUsXHJcbiAgc2xpY2U6IHRydWUsXHJcbiAgc3BsaWNlOiB0cnVlLFxyXG4gIHB1c2g6IHRydWUsXHJcbiAgdG9TdHJpbmc6IHRydWUsXHJcbiAgbmdNaW5FcnI6IHRydWUsXHJcbiAgYW5ndWxhck1vZHVsZTogdHJ1ZSxcclxuICB1aWQ6IHRydWUsXHJcbiAgUkVHRVhfU1RSSU5HX1JFR0VYUDogdHJ1ZSxcclxuICBWQUxJRElUWV9TVEFURV9QUk9QRVJUWTogdHJ1ZSxcclxuXHJcbiAgbG93ZXJjYXNlOiB0cnVlLFxyXG4gIHVwcGVyY2FzZTogdHJ1ZSxcclxuICBtYW51YWxMb3dlcmNhc2U6IHRydWUsXHJcbiAgbWFudWFsVXBwZXJjYXNlOiB0cnVlLFxyXG4gIG5vZGVOYW1lXzogdHJ1ZSxcclxuICBpc0FycmF5TGlrZTogdHJ1ZSxcclxuICBmb3JFYWNoOiB0cnVlLFxyXG4gIHNvcnRlZEtleXM6IHRydWUsXHJcbiAgZm9yRWFjaFNvcnRlZDogdHJ1ZSxcclxuICByZXZlcnNlUGFyYW1zOiB0cnVlLFxyXG4gIG5leHRVaWQ6IHRydWUsXHJcbiAgc2V0SGFzaEtleTogdHJ1ZSxcclxuICBleHRlbmQ6IHRydWUsXHJcbiAgaW50OiB0cnVlLFxyXG4gIGluaGVyaXQ6IHRydWUsXHJcbiAgbm9vcDogdHJ1ZSxcclxuICBpZGVudGl0eTogdHJ1ZSxcclxuICB2YWx1ZUZuOiB0cnVlLFxyXG4gIGlzVW5kZWZpbmVkOiB0cnVlLFxyXG4gIGlzRGVmaW5lZDogdHJ1ZSxcclxuICBpc09iamVjdDogdHJ1ZSxcclxuICBpc1N0cmluZzogdHJ1ZSxcclxuICBpc051bWJlcjogdHJ1ZSxcclxuICBpc0RhdGU6IHRydWUsXHJcbiAgaXNBcnJheTogdHJ1ZSxcclxuICBpc0Z1bmN0aW9uOiB0cnVlLFxyXG4gIGlzUmVnRXhwOiB0cnVlLFxyXG4gIGlzV2luZG93OiB0cnVlLFxyXG4gIGlzU2NvcGU6IHRydWUsXHJcbiAgaXNGaWxlOiB0cnVlLFxyXG4gIGlzRm9ybURhdGE6IHRydWUsXHJcbiAgaXNCbG9iOiB0cnVlLFxyXG4gIGlzQm9vbGVhbjogdHJ1ZSxcclxuICBpc1Byb21pc2VMaWtlOiB0cnVlLFxyXG4gIHRyaW06IHRydWUsXHJcbiAgZXNjYXBlRm9yUmVnZXhwOiB0cnVlLFxyXG4gIGlzRWxlbWVudDogdHJ1ZSxcclxuICBtYWtlTWFwOiB0cnVlLFxyXG4gIGluY2x1ZGVzOiB0cnVlLFxyXG4gIGFycmF5UmVtb3ZlOiB0cnVlLFxyXG4gIGNvcHk6IHRydWUsXHJcbiAgc2hhbGxvd0NvcHk6IHRydWUsXHJcbiAgZXF1YWxzOiB0cnVlLFxyXG4gIGNzcDogdHJ1ZSxcclxuICBjb25jYXQ6IHRydWUsXHJcbiAgc2xpY2VBcmdzOiB0cnVlLFxyXG4gIGJpbmQ6IHRydWUsXHJcbiAgdG9Kc29uUmVwbGFjZXI6IHRydWUsXHJcbiAgdG9Kc29uOiB0cnVlLFxyXG4gIGZyb21Kc29uOiB0cnVlLFxyXG4gIHN0YXJ0aW5nVGFnOiB0cnVlLFxyXG4gIHRyeURlY29kZVVSSUNvbXBvbmVudDogdHJ1ZSxcclxuICBwYXJzZUtleVZhbHVlOiB0cnVlLFxyXG4gIHRvS2V5VmFsdWU6IHRydWUsXHJcbiAgZW5jb2RlVXJpU2VnbWVudDogdHJ1ZSxcclxuICBlbmNvZGVVcmlRdWVyeTogdHJ1ZSxcclxuICBhbmd1bGFySW5pdDogdHJ1ZSxcclxuICBib290c3RyYXA6IHRydWUsXHJcbiAgZ2V0VGVzdGFiaWxpdHk6IHRydWUsXHJcbiAgc25ha2VfY2FzZTogdHJ1ZSxcclxuICBiaW5kSlF1ZXJ5OiB0cnVlLFxyXG4gIGFzc2VydEFyZzogdHJ1ZSxcclxuICBhc3NlcnRBcmdGbjogdHJ1ZSxcclxuICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eTogdHJ1ZSxcclxuICBnZXR0ZXI6IHRydWUsXHJcbiAgZ2V0QmxvY2tOb2RlczogdHJ1ZSxcclxuICBoYXNPd25Qcm9wZXJ0eTogdHJ1ZSxcclxuICBjcmVhdGVNYXA6IHRydWUsXHJcblxyXG4gIE5PREVfVFlQRV9FTEVNRU5UOiB0cnVlLFxyXG4gIE5PREVfVFlQRV9URVhUOiB0cnVlLFxyXG4gIE5PREVfVFlQRV9DT01NRU5UOiB0cnVlLFxyXG4gIE5PREVfVFlQRV9ET0NVTUVOVDogdHJ1ZSxcclxuICBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQ6IHRydWUsXHJcbiovXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbW9kdWxlXHJcbiAqIEBuYW1lIG5nXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqICMgbmcgKGNvcmUgbW9kdWxlKVxyXG4gKiBUaGUgbmcgbW9kdWxlIGlzIGxvYWRlZCBieSBkZWZhdWx0IHdoZW4gYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uIGlzIHN0YXJ0ZWQuIFRoZSBtb2R1bGUgaXRzZWxmXHJcbiAqIGNvbnRhaW5zIHRoZSBlc3NlbnRpYWwgY29tcG9uZW50cyBmb3IgYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uIHRvIGZ1bmN0aW9uLiBUaGUgdGFibGUgYmVsb3dcclxuICogbGlzdHMgYSBoaWdoIGxldmVsIGJyZWFrZG93biBvZiBlYWNoIG9mIHRoZSBzZXJ2aWNlcy9mYWN0b3JpZXMsIGZpbHRlcnMsIGRpcmVjdGl2ZXMgYW5kIHRlc3RpbmdcclxuICogY29tcG9uZW50cyBhdmFpbGFibGUgd2l0aGluIHRoaXMgY29yZSBtb2R1bGUuXHJcbiAqXHJcbiAqIDxkaXYgZG9jLW1vZHVsZS1jb21wb25lbnRzPVwibmdcIj48L2Rpdj5cclxuICovXHJcblxyXG52YXIgUkVHRVhfU1RSSU5HX1JFR0VYUCA9IC9eXFwvKC4rKVxcLyhbYS16XSopJC87XHJcblxyXG4vLyBUaGUgbmFtZSBvZiBhIGZvcm0gY29udHJvbCdzIFZhbGlkaXR5U3RhdGUgcHJvcGVydHkuXHJcbi8vIFRoaXMgaXMgdXNlZCBzbyB0aGF0IGl0J3MgcG9zc2libGUgZm9yIGludGVybmFsIHRlc3RzIHRvIGNyZWF0ZSBtb2NrIFZhbGlkaXR5U3RhdGVzLlxyXG52YXIgVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkgPSAndmFsaWRpdHknO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmxvd2VyY2FzZVxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvbiBDb252ZXJ0cyB0aGUgc3BlY2lmaWVkIHN0cmluZyB0byBsb3dlcmNhc2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byBsb3dlcmNhc2UuXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IExvd2VyY2FzZWQgc3RyaW5nLlxyXG4gKi9cclxudmFyIGxvd2VyY2FzZSA9IGZ1bmN0aW9uKHN0cmluZykge3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvTG93ZXJDYXNlKCkgOiBzdHJpbmc7fTtcclxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci51cHBlcmNhc2VcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb24gQ29udmVydHMgdGhlIHNwZWNpZmllZCBzdHJpbmcgdG8gdXBwZXJjYXNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byBiZSBjb252ZXJ0ZWQgdG8gdXBwZXJjYXNlLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZy5cclxuICovXHJcbnZhciB1cHBlcmNhc2UgPSBmdW5jdGlvbihzdHJpbmcpIHtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKSA/IHN0cmluZy50b1VwcGVyQ2FzZSgpIDogc3RyaW5nO307XHJcblxyXG5cclxudmFyIG1hbnVhbExvd2VyY2FzZSA9IGZ1bmN0aW9uKHMpIHtcclxuICAvKiBqc2hpbnQgYml0d2lzZTogZmFsc2UgKi9cclxuICByZXR1cm4gaXNTdHJpbmcocylcclxuICAgICAgPyBzLnJlcGxhY2UoL1tBLVpdL2csIGZ1bmN0aW9uKGNoKSB7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2guY2hhckNvZGVBdCgwKSB8IDMyKTt9KVxyXG4gICAgICA6IHM7XHJcbn07XHJcbnZhciBtYW51YWxVcHBlcmNhc2UgPSBmdW5jdGlvbihzKSB7XHJcbiAgLyoganNoaW50IGJpdHdpc2U6IGZhbHNlICovXHJcbiAgcmV0dXJuIGlzU3RyaW5nKHMpXHJcbiAgICAgID8gcy5yZXBsYWNlKC9bYS16XS9nLCBmdW5jdGlvbihjaCkge3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoLmNoYXJDb2RlQXQoMCkgJiB+MzIpO30pXHJcbiAgICAgIDogcztcclxufTtcclxuXHJcblxyXG4vLyBTdHJpbmcjdG9Mb3dlckNhc2UgYW5kIFN0cmluZyN0b1VwcGVyQ2FzZSBkb24ndCBwcm9kdWNlIGNvcnJlY3QgcmVzdWx0cyBpbiBicm93c2VycyB3aXRoIFR1cmtpc2hcclxuLy8gbG9jYWxlLCBmb3IgdGhpcyByZWFzb24gd2UgbmVlZCB0byBkZXRlY3QgdGhpcyBjYXNlIGFuZCByZWRlZmluZSBsb3dlcmNhc2UvdXBwZXJjYXNlIG1ldGhvZHNcclxuLy8gd2l0aCBjb3JyZWN0IGJ1dCBzbG93ZXIgYWx0ZXJuYXRpdmVzLlxyXG5pZiAoJ2knICE9PSAnSScudG9Mb3dlckNhc2UoKSkge1xyXG4gIGxvd2VyY2FzZSA9IG1hbnVhbExvd2VyY2FzZTtcclxuICB1cHBlcmNhc2UgPSBtYW51YWxVcHBlcmNhc2U7XHJcbn1cclxuXHJcblxyXG52YXJcclxuICAgIG1zaWUsICAgICAgICAgICAgIC8vIGhvbGRzIG1ham9yIHZlcnNpb24gbnVtYmVyIGZvciBJRSwgb3IgTmFOIGlmIFVBIGlzIG5vdCBJRS5cclxuICAgIGpxTGl0ZSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmcgc2luY2UgalF1ZXJ5IGNvdWxkIGJlIGxvYWRlZCBhZnRlciB1cy5cclxuICAgIGpRdWVyeSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmdcclxuICAgIHNsaWNlICAgICAgICAgICAgID0gW10uc2xpY2UsXHJcbiAgICBzcGxpY2UgICAgICAgICAgICA9IFtdLnNwbGljZSxcclxuICAgIHB1c2ggICAgICAgICAgICAgID0gW10ucHVzaCxcclxuICAgIHRvU3RyaW5nICAgICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcclxuICAgIG5nTWluRXJyICAgICAgICAgID0gbWluRXJyKCduZycpLFxyXG5cclxuICAgIC8qKiBAbmFtZSBhbmd1bGFyICovXHJcbiAgICBhbmd1bGFyICAgICAgICAgICA9IHdpbmRvdy5hbmd1bGFyIHx8ICh3aW5kb3cuYW5ndWxhciA9IHt9KSxcclxuICAgIGFuZ3VsYXJNb2R1bGUsXHJcbiAgICB1aWQgICAgICAgICAgICAgICA9IDA7XHJcblxyXG4vKipcclxuICogZG9jdW1lbnRNb2RlIGlzIGFuIElFLW9ubHkgcHJvcGVydHlcclxuICogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2NjMTk2OTg4KHY9dnMuODUpLmFzcHhcclxuICovXHJcbm1zaWUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XHJcblxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBwYXJhbSB7Kn0gb2JqXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBgb2JqYCBpcyBhbiBhcnJheSBvciBhcnJheS1saWtlIG9iamVjdCAoTm9kZUxpc3QsIEFyZ3VtZW50cyxcclxuICogICAgICAgICAgICAgICAgICAgU3RyaW5nIC4uLilcclxuICovXHJcbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKG9iaikge1xyXG4gIGlmIChvYmogPT0gbnVsbCB8fCBpc1dpbmRvdyhvYmopKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aDtcclxuXHJcbiAgaWYgKG9iai5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgJiYgbGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBpc1N0cmluZyhvYmopIHx8IGlzQXJyYXkob2JqKSB8fCBsZW5ndGggPT09IDAgfHxcclxuICAgICAgICAgdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgJiYgbGVuZ3RoID4gMCAmJiAobGVuZ3RoIC0gMSkgaW4gb2JqO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZm9yRWFjaFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBJbnZva2VzIHRoZSBgaXRlcmF0b3JgIGZ1bmN0aW9uIG9uY2UgZm9yIGVhY2ggaXRlbSBpbiBgb2JqYCBjb2xsZWN0aW9uLCB3aGljaCBjYW4gYmUgZWl0aGVyIGFuXHJcbiAqIG9iamVjdCBvciBhbiBhcnJheS4gVGhlIGBpdGVyYXRvcmAgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoIGBpdGVyYXRvcih2YWx1ZSwga2V5LCBvYmopYCwgd2hlcmUgYHZhbHVlYFxyXG4gKiBpcyB0aGUgdmFsdWUgb2YgYW4gb2JqZWN0IHByb3BlcnR5IG9yIGFuIGFycmF5IGVsZW1lbnQsIGBrZXlgIGlzIHRoZSBvYmplY3QgcHJvcGVydHkga2V5IG9yXHJcbiAqIGFycmF5IGVsZW1lbnQgaW5kZXggYW5kIG9iaiBpcyB0aGUgYG9iamAgaXRzZWxmLiBTcGVjaWZ5aW5nIGEgYGNvbnRleHRgIGZvciB0aGUgZnVuY3Rpb24gaXMgb3B0aW9uYWwuXHJcbiAqXHJcbiAqIEl0IGlzIHdvcnRoIG5vdGluZyB0aGF0IGAuZm9yRWFjaGAgZG9lcyBub3QgaXRlcmF0ZSBvdmVyIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlY2F1c2UgaXQgZmlsdGVyc1xyXG4gKiB1c2luZyB0aGUgYGhhc093blByb3BlcnR5YCBtZXRob2QuXHJcbiAqXHJcbiAqIFVubGlrZSBFUzI2MidzXHJcbiAqIFtBcnJheS5wcm90b3R5cGUuZm9yRWFjaF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjQuNC4xOCksXHJcbiAqIFByb3ZpZGluZyAndW5kZWZpbmVkJyBvciAnbnVsbCcgdmFsdWVzIGZvciBgb2JqYCB3aWxsIG5vdCB0aHJvdyBhIFR5cGVFcnJvciwgYnV0IHJhdGhlciBqdXN0XHJcbiAqIHJldHVybiB0aGUgdmFsdWUgcHJvdmlkZWQuXHJcbiAqXHJcbiAgIGBgYGpzXHJcbiAgICAgdmFyIHZhbHVlcyA9IHtuYW1lOiAnbWlza28nLCBnZW5kZXI6ICdtYWxlJ307XHJcbiAgICAgdmFyIGxvZyA9IFtdO1xyXG4gICAgIGFuZ3VsYXIuZm9yRWFjaCh2YWx1ZXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgIHRoaXMucHVzaChrZXkgKyAnOiAnICsgdmFsdWUpO1xyXG4gICAgIH0sIGxvZyk7XHJcbiAgICAgZXhwZWN0KGxvZykudG9FcXVhbChbJ25hbWU6IG1pc2tvJywgJ2dlbmRlcjogbWFsZSddKTtcclxuICAgYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogT2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3IgSXRlcmF0b3IgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gY29udGV4dCBPYmplY3QgdG8gYmVjb21lIGNvbnRleHQgKGB0aGlzYCkgZm9yIHRoZSBpdGVyYXRvciBmdW5jdGlvbi5cclxuICogQHJldHVybnMge09iamVjdHxBcnJheX0gUmVmZXJlbmNlIHRvIGBvYmpgLlxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xyXG4gIHZhciBrZXksIGxlbmd0aDtcclxuICBpZiAob2JqKSB7XHJcbiAgICBpZiAoaXNGdW5jdGlvbihvYmopKSB7XHJcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xyXG4gICAgICAgIC8vIE5lZWQgdG8gY2hlY2sgaWYgaGFzT3duUHJvcGVydHkgZXhpc3RzLFxyXG4gICAgICAgIC8vIGFzIG9uIElFOCB0aGUgcmVzdWx0IG9mIHF1ZXJ5U2VsZWN0b3JBbGwgaXMgYW4gb2JqZWN0IHdpdGhvdXQgYSBoYXNPd25Qcm9wZXJ0eSBmdW5jdGlvblxyXG4gICAgICAgIGlmIChrZXkgIT0gJ3Byb3RvdHlwZScgJiYga2V5ICE9ICdsZW5ndGgnICYmIGtleSAhPSAnbmFtZScgJiYgKCFvYmouaGFzT3duUHJvcGVydHkgfHwgb2JqLmhhc093blByb3BlcnR5KGtleSkpKSB7XHJcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqKSB8fCBpc0FycmF5TGlrZShvYmopKSB7XHJcbiAgICAgIHZhciBpc1ByaW1pdGl2ZSA9IHR5cGVvZiBvYmogIT09ICdvYmplY3QnO1xyXG4gICAgICBmb3IgKGtleSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcclxuICAgICAgICBpZiAoaXNQcmltaXRpdmUgfHwga2V5IGluIG9iaikge1xyXG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChvYmouZm9yRWFjaCAmJiBvYmouZm9yRWFjaCAhPT0gZm9yRWFjaCkge1xyXG4gICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0LCBvYmopO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvcnRlZEtleXMob2JqKSB7XHJcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikuc29ydCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JFYWNoU29ydGVkKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcclxuICB2YXIga2V5cyA9IHNvcnRlZEtleXMob2JqKTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleXNbaV1dLCBrZXlzW2ldKTtcclxuICB9XHJcbiAgcmV0dXJuIGtleXM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogd2hlbiB1c2luZyBmb3JFYWNoIHRoZSBwYXJhbXMgYXJlIHZhbHVlLCBrZXksIGJ1dCBpdCBpcyBvZnRlbiB1c2VmdWwgdG8gaGF2ZSBrZXksIHZhbHVlLlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgKil9IGl0ZXJhdG9yRm5cclxuICogQHJldHVybnMge2Z1bmN0aW9uKCosIHN0cmluZyl9XHJcbiAqL1xyXG5mdW5jdGlvbiByZXZlcnNlUGFyYW1zKGl0ZXJhdG9yRm4pIHtcclxuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGtleSkgeyBpdGVyYXRvckZuKGtleSwgdmFsdWUpOyB9O1xyXG59XHJcblxyXG4vKipcclxuICogQSBjb25zaXN0ZW50IHdheSBvZiBjcmVhdGluZyB1bmlxdWUgSURzIGluIGFuZ3VsYXIuXHJcbiAqXHJcbiAqIFVzaW5nIHNpbXBsZSBudW1iZXJzIGFsbG93cyB1cyB0byBnZW5lcmF0ZSAyOC42IG1pbGxpb24gdW5pcXVlIGlkcyBwZXIgc2Vjb25kIGZvciAxMCB5ZWFycyBiZWZvcmVcclxuICogd2UgaGl0IG51bWJlciBwcmVjaXNpb24gaXNzdWVzIGluIEphdmFTY3JpcHQuXHJcbiAqXHJcbiAqIE1hdGgucG93KDIsNTMpIC8gNjAgLyA2MCAvIDI0IC8gMzY1IC8gMTAgPSAyOC42TVxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbiB1bmlxdWUgYWxwaGEtbnVtZXJpYyBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIG5leHRVaWQoKSB7XHJcbiAgcmV0dXJuICsrdWlkO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFNldCBvciBjbGVhciB0aGUgaGFzaGtleSBmb3IgYW4gb2JqZWN0LlxyXG4gKiBAcGFyYW0gb2JqIG9iamVjdFxyXG4gKiBAcGFyYW0gaCB0aGUgaGFzaGtleSAoIXRydXRoeSB0byBkZWxldGUgdGhlIGhhc2hrZXkpXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRIYXNoS2V5KG9iaiwgaCkge1xyXG4gIGlmIChoKSB7XHJcbiAgICBvYmouJCRoYXNoS2V5ID0gaDtcclxuICB9IGVsc2Uge1xyXG4gICAgZGVsZXRlIG9iai4kJGhhc2hLZXk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZXh0ZW5kXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXHJcbiAqIHRvIGBkc3RgLiBZb3UgY2FuIHNwZWNpZnkgbXVsdGlwbGUgYHNyY2Agb2JqZWN0cy4gSWYgeW91IHdhbnQgdG8gcHJlc2VydmUgb3JpZ2luYWwgb2JqZWN0cywgeW91IGNhbiBkbyBzb1xyXG4gKiBieSBwYXNzaW5nIGFuIGVtcHR5IG9iamVjdCBhcyB0aGUgdGFyZ2V0OiBgdmFyIG9iamVjdCA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBvYmplY3QxLCBvYmplY3QyKWAuXHJcbiAqIE5vdGU6IEtlZXAgaW4gbWluZCB0aGF0IGBhbmd1bGFyLmV4dGVuZGAgZG9lcyBub3Qgc3VwcG9ydCByZWN1cnNpdmUgbWVyZ2UgKGRlZXAgY29weSkuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkc3QgRGVzdGluYXRpb24gb2JqZWN0LlxyXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gc3JjIFNvdXJjZSBvYmplY3QocykuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlZmVyZW5jZSB0byBgZHN0YC5cclxuICovXHJcbmZ1bmN0aW9uIGV4dGVuZChkc3QpIHtcclxuICB2YXIgaCA9IGRzdC4kJGhhc2hLZXk7XHJcblxyXG4gIGZvciAodmFyIGkgPSAxLCBpaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICB2YXIgb2JqID0gYXJndW1lbnRzW2ldO1xyXG4gICAgaWYgKG9iaikge1xyXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XHJcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGtleXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2pdO1xyXG4gICAgICAgIGRzdFtrZXldID0gb2JqW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEhhc2hLZXkoZHN0LCBoKTtcclxuICByZXR1cm4gZHN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbnQoc3RyKSB7XHJcbiAgcmV0dXJuIHBhcnNlSW50KHN0ciwgMTApO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaW5oZXJpdChwYXJlbnQsIGV4dHJhKSB7XHJcbiAgcmV0dXJuIGV4dGVuZChPYmplY3QuY3JlYXRlKHBhcmVudCksIGV4dHJhKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLm5vb3BcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIG5vIG9wZXJhdGlvbnMuIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWZ1bCB3aGVuIHdyaXRpbmcgY29kZSBpbiB0aGVcclxuICogZnVuY3Rpb25hbCBzdHlsZS5cclxuICAgYGBganNcclxuICAgICBmdW5jdGlvbiBmb28oY2FsbGJhY2spIHtcclxuICAgICAgIHZhciByZXN1bHQgPSBjYWxjdWxhdGVSZXN1bHQoKTtcclxuICAgICAgIChjYWxsYmFjayB8fCBhbmd1bGFyLm5vb3ApKHJlc3VsdCk7XHJcbiAgICAgfVxyXG4gICBgYGBcclxuICovXHJcbmZ1bmN0aW9uIG5vb3AoKSB7fVxyXG5ub29wLiRpbmplY3QgPSBbXTtcclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuaWRlbnRpdHlcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgaXRzIGZpcnN0IGFyZ3VtZW50LiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWZ1bCB3aGVuIHdyaXRpbmcgY29kZSBpbiB0aGVcclxuICogZnVuY3Rpb25hbCBzdHlsZS5cclxuICpcclxuICAgYGBganNcclxuICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1lcih0cmFuc2Zvcm1hdGlvbkZuLCB2YWx1ZSkge1xyXG4gICAgICAgcmV0dXJuICh0cmFuc2Zvcm1hdGlvbkZuIHx8IGFuZ3VsYXIuaWRlbnRpdHkpKHZhbHVlKTtcclxuICAgICB9O1xyXG4gICBgYGBcclxuICAqIEBwYXJhbSB7Kn0gdmFsdWUgdG8gYmUgcmV0dXJuZWQuXHJcbiAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHBhc3NlZCBpbi5cclxuICovXHJcbmZ1bmN0aW9uIGlkZW50aXR5KCQpIHtyZXR1cm4gJDt9XHJcbmlkZW50aXR5LiRpbmplY3QgPSBbXTtcclxuXHJcblxyXG5mdW5jdGlvbiB2YWx1ZUZuKHZhbHVlKSB7cmV0dXJuIGZ1bmN0aW9uKCkge3JldHVybiB2YWx1ZTt9O31cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc1VuZGVmaW5lZFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIHVuZGVmaW5lZC5cclxuICpcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgdW5kZWZpbmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJzt9XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGVmaW5lZFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGRlZmluZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0RlZmluZWQodmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJzt9XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzT2JqZWN0XHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYW4gYE9iamVjdGAuIFVubGlrZSBgdHlwZW9mYCBpbiBKYXZhU2NyaXB0LCBgbnVsbGBzIGFyZSBub3RcclxuICogY29uc2lkZXJlZCB0byBiZSBvYmplY3RzLiBOb3RlIHRoYXQgSmF2YVNjcmlwdCBhcnJheXMgYXJlIG9iamVjdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBPYmplY3RgIGJ1dCBub3QgYG51bGxgLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcclxuICAvLyBodHRwOi8vanNwZXJmLmNvbS9pc29iamVjdDRcclxuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5pc1N0cmluZ1xyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGEgYFN0cmluZ2AuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYFN0cmluZ2AuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO31cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuaXNOdW1iZXJcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBOdW1iZXJgLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBOdW1iZXJgLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJzt9XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGF0ZVxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgdmFsdWUgaXMgYSBkYXRlLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBEYXRlYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xyXG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzQXJyYXlcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgQXJyYXlgLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgQXJyYXlgLlxyXG4gKi9cclxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzRnVuY3Rpb25cclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBGdW5jdGlvbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYEZ1bmN0aW9uYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO31cclxuXHJcblxyXG4vKipcclxuICogRGV0ZXJtaW5lcyBpZiBhIHZhbHVlIGlzIGEgcmVndWxhciBleHByZXNzaW9uIG9iamVjdC5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgUmVnRXhwYC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlKSB7XHJcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBSZWdFeHBdJztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYG9iamAgaXMgYSB3aW5kb3cgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0geyp9IG9iaiBPYmplY3QgdG8gY2hlY2tcclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYG9iamAgaXMgYSB3aW5kb3cgb2JqLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNXaW5kb3cob2JqKSB7XHJcbiAgcmV0dXJuIG9iaiAmJiBvYmoud2luZG93ID09PSBvYmo7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc1Njb3BlKG9iaikge1xyXG4gIHJldHVybiBvYmogJiYgb2JqLiRldmFsQXN5bmMgJiYgb2JqLiR3YXRjaDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzRmlsZShvYmopIHtcclxuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBGaWxlXSc7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKG9iaikge1xyXG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEZvcm1EYXRhXSc7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc0Jsb2Iob2JqKSB7XHJcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNQcm9taXNlTGlrZShvYmopIHtcclxuICByZXR1cm4gb2JqICYmIGlzRnVuY3Rpb24ob2JqLnRoZW4pO1xyXG59XHJcblxyXG5cclxudmFyIHRyaW0gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gIHJldHVybiBpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZS50cmltKCkgOiB2YWx1ZTtcclxufTtcclxuXHJcbi8vIENvcGllZCBmcm9tOlxyXG4vLyBodHRwOi8vZG9jcy5jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0L2xvY2FsX2Nsb3N1cmVfZ29vZ19zdHJpbmdfc3RyaW5nLmpzLnNvdXJjZS5odG1sI2xpbmUxMDIxXHJcbi8vIFByZXJlcTogcyBpcyBhIHN0cmluZy5cclxudmFyIGVzY2FwZUZvclJlZ2V4cCA9IGZ1bmN0aW9uKHMpIHtcclxuICByZXR1cm4gcy5yZXBsYWNlKC8oWy0oKVxcW1xcXXt9Kz8qLiRcXF58LDojPCFcXFxcXSkvZywgJ1xcXFwkMScpLlxyXG4gICAgICAgICAgIHJlcGxhY2UoL1xceDA4L2csICdcXFxceDA4Jyk7XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmlzRWxlbWVudFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGEgRE9NIGVsZW1lbnQgKG9yIHdyYXBwZWQgalF1ZXJ5IGVsZW1lbnQpLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50IChvciB3cmFwcGVkIGpRdWVyeSBlbGVtZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XHJcbiAgcmV0dXJuICEhKG5vZGUgJiZcclxuICAgIChub2RlLm5vZGVOYW1lICAvLyB3ZSBhcmUgYSBkaXJlY3QgZWxlbWVudFxyXG4gICAgfHwgKG5vZGUucHJvcCAmJiBub2RlLmF0dHIgJiYgbm9kZS5maW5kKSkpOyAgLy8gd2UgaGF2ZSBhbiBvbiBhbmQgZmluZCBtZXRob2QgcGFydCBvZiBqUXVlcnkgQVBJXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0gc3RyICdrZXkxLGtleTIsLi4uJ1xyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBpbiB0aGUgZm9ybSBvZiB7a2V5MTp0cnVlLCBrZXkyOnRydWUsIC4uLn1cclxuICovXHJcbmZ1bmN0aW9uIG1ha2VNYXAoc3RyKSB7XHJcbiAgdmFyIG9iaiA9IHt9LCBpdGVtcyA9IHN0ci5zcGxpdChcIixcIiksIGk7XHJcbiAgZm9yIChpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gICAgb2JqW2l0ZW1zW2ldXSA9IHRydWU7XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG5vZGVOYW1lXyhlbGVtZW50KSB7XHJcbiAgcmV0dXJuIGxvd2VyY2FzZShlbGVtZW50Lm5vZGVOYW1lIHx8IChlbGVtZW50WzBdICYmIGVsZW1lbnRbMF0ubm9kZU5hbWUpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5jbHVkZXMoYXJyYXksIG9iaikge1xyXG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFycmF5LCBvYmopICE9IC0xO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcnJheVJlbW92ZShhcnJheSwgdmFsdWUpIHtcclxuICB2YXIgaW5kZXggPSBhcnJheS5pbmRleE9mKHZhbHVlKTtcclxuICBpZiAoaW5kZXggPj0gMClcclxuICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuY29weVxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLCB3aGljaCBzaG91bGQgYmUgYW4gb2JqZWN0IG9yIGFuIGFycmF5LlxyXG4gKlxyXG4gKiAqIElmIG5vIGRlc3RpbmF0aW9uIGlzIHN1cHBsaWVkLCBhIGNvcHkgb2YgdGhlIG9iamVjdCBvciBhcnJheSBpcyBjcmVhdGVkLlxyXG4gKiAqIElmIGEgZGVzdGluYXRpb24gaXMgcHJvdmlkZWQsIGFsbCBvZiBpdHMgZWxlbWVudHMgKGZvciBhcnJheXMpIG9yIHByb3BlcnRpZXMgKGZvciBvYmplY3RzKVxyXG4gKiAgIGFyZSBkZWxldGVkIGFuZCB0aGVuIGFsbCBlbGVtZW50cy9wcm9wZXJ0aWVzIGZyb20gdGhlIHNvdXJjZSBhcmUgY29waWVkIHRvIGl0LlxyXG4gKiAqIElmIGBzb3VyY2VgIGlzIG5vdCBhbiBvYmplY3Qgb3IgYXJyYXkgKGluYy4gYG51bGxgIGFuZCBgdW5kZWZpbmVkYCksIGBzb3VyY2VgIGlzIHJldHVybmVkLlxyXG4gKiAqIElmIGBzb3VyY2VgIGlzIGlkZW50aWNhbCB0byAnZGVzdGluYXRpb24nIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bi5cclxuICpcclxuICogQHBhcmFtIHsqfSBzb3VyY2UgVGhlIHNvdXJjZSB0aGF0IHdpbGwgYmUgdXNlZCB0byBtYWtlIGEgY29weS5cclxuICogICAgICAgICAgICAgICAgICAgQ2FuIGJlIGFueSB0eXBlLCBpbmNsdWRpbmcgcHJpbWl0aXZlcywgYG51bGxgLCBhbmQgYHVuZGVmaW5lZGAuXHJcbiAqIEBwYXJhbSB7KE9iamVjdHxBcnJheSk9fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBpbnRvIHdoaWNoIHRoZSBzb3VyY2UgaXMgY29waWVkLiBJZlxyXG4gKiAgICAgcHJvdmlkZWQsIG11c3QgYmUgb2YgdGhlIHNhbWUgdHlwZSBhcyBgc291cmNlYC5cclxuICogQHJldHVybnMgeyp9IFRoZSBjb3B5IG9yIHVwZGF0ZWQgYGRlc3RpbmF0aW9uYCwgaWYgYGRlc3RpbmF0aW9uYCB3YXMgc3BlY2lmaWVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gPGV4YW1wbGUgbW9kdWxlPVwiY29weUV4YW1wbGVcIj5cclxuIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gPGZvcm0gbm92YWxpZGF0ZSBjbGFzcz1cInNpbXBsZS1mb3JtXCI+XHJcbiBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIubmFtZVwiIC8+PGJyIC8+XHJcbiBFLW1haWw6IDxpbnB1dCB0eXBlPVwiZW1haWxcIiBuZy1tb2RlbD1cInVzZXIuZW1haWxcIiAvPjxiciAvPlxyXG4gR2VuZGVyOiA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJ1c2VyLmdlbmRlclwiIHZhbHVlPVwibWFsZVwiIC8+bWFsZVxyXG4gPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwidXNlci5nZW5kZXJcIiB2YWx1ZT1cImZlbWFsZVwiIC8+ZmVtYWxlPGJyIC8+XHJcbiA8YnV0dG9uIG5nLWNsaWNrPVwicmVzZXQoKVwiPlJFU0VUPC9idXR0b24+XHJcbiA8YnV0dG9uIG5nLWNsaWNrPVwidXBkYXRlKHVzZXIpXCI+U0FWRTwvYnV0dG9uPlxyXG4gPC9mb3JtPlxyXG4gPHByZT5mb3JtID0ge3t1c2VyIHwganNvbn19PC9wcmU+XHJcbiA8cHJlPm1hc3RlciA9IHt7bWFzdGVyIHwganNvbn19PC9wcmU+XHJcbiA8L2Rpdj5cclxuXHJcbiA8c2NyaXB0PlxyXG4gIGFuZ3VsYXIubW9kdWxlKCdjb3B5RXhhbXBsZScsIFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgJHNjb3BlLm1hc3Rlcj0ge307XHJcblxyXG4gICAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgIC8vIEV4YW1wbGUgd2l0aCAxIGFyZ3VtZW50XHJcbiAgICAgICAgJHNjb3BlLm1hc3Rlcj0gYW5ndWxhci5jb3B5KHVzZXIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gRXhhbXBsZSB3aXRoIDIgYXJndW1lbnRzXHJcbiAgICAgICAgYW5ndWxhci5jb3B5KCRzY29wZS5tYXN0ZXIsICRzY29wZS51c2VyKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICRzY29wZS5yZXNldCgpO1xyXG4gICAgfV0pO1xyXG4gPC9zY3JpcHQ+XHJcbiA8L2ZpbGU+XHJcbiA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiBjb3B5KHNvdXJjZSwgZGVzdGluYXRpb24sIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpIHtcclxuICBpZiAoaXNXaW5kb3coc291cmNlKSB8fCBpc1Njb3BlKHNvdXJjZSkpIHtcclxuICAgIHRocm93IG5nTWluRXJyKCdjcHdzJyxcclxuICAgICAgXCJDYW4ndCBjb3B5ISBNYWtpbmcgY29waWVzIG9mIFdpbmRvdyBvciBTY29wZSBpbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZC5cIik7XHJcbiAgfVxyXG5cclxuICBpZiAoIWRlc3RpbmF0aW9uKSB7XHJcbiAgICBkZXN0aW5hdGlvbiA9IHNvdXJjZTtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgaWYgKGlzQXJyYXkoc291cmNlKSkge1xyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gY29weShzb3VyY2UsIFtdLCBzdGFja1NvdXJjZSwgc3RhY2tEZXN0KTtcclxuICAgICAgfSBlbHNlIGlmIChpc0RhdGUoc291cmNlKSkge1xyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gbmV3IERhdGUoc291cmNlLmdldFRpbWUoKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWdFeHAoc291cmNlKSkge1xyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gbmV3IFJlZ0V4cChzb3VyY2Uuc291cmNlLCBzb3VyY2UudG9TdHJpbmcoKS5tYXRjaCgvW15cXC9dKiQvKVswXSk7XHJcbiAgICAgICAgZGVzdGluYXRpb24ubGFzdEluZGV4ID0gc291cmNlLmxhc3RJbmRleDtcclxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzb3VyY2UpKSB7XHJcbiAgICAgICAgdmFyIGVtcHR5T2JqZWN0ID0gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2Yoc291cmNlKSk7XHJcbiAgICAgICAgZGVzdGluYXRpb24gPSBjb3B5KHNvdXJjZSwgZW1wdHlPYmplY3QsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmIChzb3VyY2UgPT09IGRlc3RpbmF0aW9uKSB0aHJvdyBuZ01pbkVycignY3BpJyxcclxuICAgICAgXCJDYW4ndCBjb3B5ISBTb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGFyZSBpZGVudGljYWwuXCIpO1xyXG5cclxuICAgIHN0YWNrU291cmNlID0gc3RhY2tTb3VyY2UgfHwgW107XHJcbiAgICBzdGFja0Rlc3QgPSBzdGFja0Rlc3QgfHwgW107XHJcblxyXG4gICAgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcclxuICAgICAgdmFyIGluZGV4ID0gc3RhY2tTb3VyY2UuaW5kZXhPZihzb3VyY2UpO1xyXG4gICAgICBpZiAoaW5kZXggIT09IC0xKSByZXR1cm4gc3RhY2tEZXN0W2luZGV4XTtcclxuXHJcbiAgICAgIHN0YWNrU291cmNlLnB1c2goc291cmNlKTtcclxuICAgICAgc3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXN1bHQ7XHJcbiAgICBpZiAoaXNBcnJheShzb3VyY2UpKSB7XHJcbiAgICAgIGRlc3RpbmF0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gY29weShzb3VyY2VbaV0sIG51bGwsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xyXG4gICAgICAgIGlmIChpc09iamVjdChzb3VyY2VbaV0pKSB7XHJcbiAgICAgICAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZVtpXSk7XHJcbiAgICAgICAgICBzdGFja0Rlc3QucHVzaChyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZXN0aW5hdGlvbi5wdXNoKHJlc3VsdCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBoID0gZGVzdGluYXRpb24uJCRoYXNoS2V5O1xyXG4gICAgICBpZiAoaXNBcnJheShkZXN0aW5hdGlvbikpIHtcclxuICAgICAgICBkZXN0aW5hdGlvbi5sZW5ndGggPSAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvckVhY2goZGVzdGluYXRpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgIGRlbGV0ZSBkZXN0aW5hdGlvbltrZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgIHJlc3VsdCA9IGNvcHkoc291cmNlW2tleV0sIG51bGwsIHN0YWNrU291cmNlLCBzdGFja0Rlc3QpO1xyXG4gICAgICAgICAgaWYgKGlzT2JqZWN0KHNvdXJjZVtrZXldKSkge1xyXG4gICAgICAgICAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZVtrZXldKTtcclxuICAgICAgICAgICAgc3RhY2tEZXN0LnB1c2gocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNldEhhc2hLZXkoZGVzdGluYXRpb24saCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICByZXR1cm4gZGVzdGluYXRpb247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2hhbGxvdyBjb3B5IG9mIGFuIG9iamVjdCwgYW4gYXJyYXkgb3IgYSBwcmltaXRpdmUuXHJcbiAqXHJcbiAqIEFzc3VtZXMgdGhhdCB0aGVyZSBhcmUgbm8gcHJvdG8gcHJvcGVydGllcyBmb3Igb2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KHNyYywgZHN0KSB7XHJcbiAgaWYgKGlzQXJyYXkoc3JjKSkge1xyXG4gICAgZHN0ID0gZHN0IHx8IFtdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHNyYy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgIGRzdFtpXSA9IHNyY1tpXTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNyYykpIHtcclxuICAgIGRzdCA9IGRzdCB8fCB7fTtcclxuXHJcbiAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XHJcbiAgICAgIGlmICghKGtleS5jaGFyQXQoMCkgPT09ICckJyAmJiBrZXkuY2hhckF0KDEpID09PSAnJCcpKSB7XHJcbiAgICAgICAgZHN0W2tleV0gPSBzcmNba2V5XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRzdCB8fCBzcmM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZXF1YWxzXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERldGVybWluZXMgaWYgdHdvIG9iamVjdHMgb3IgdHdvIHZhbHVlcyBhcmUgZXF1aXZhbGVudC4gU3VwcG9ydHMgdmFsdWUgdHlwZXMsIHJlZ3VsYXJcclxuICogZXhwcmVzc2lvbnMsIGFycmF5cyBhbmQgb2JqZWN0cy5cclxuICpcclxuICogVHdvIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBjb25zaWRlcmVkIGVxdWl2YWxlbnQgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcgaXMgdHJ1ZTpcclxuICpcclxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIHBhc3MgYD09PWAgY29tcGFyaXNvbi5cclxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIGFyZSBvZiB0aGUgc2FtZSB0eXBlIGFuZCBhbGwgb2YgdGhlaXIgcHJvcGVydGllcyBhcmUgZXF1YWwgYnlcclxuICogICBjb21wYXJpbmcgdGhlbSB3aXRoIGBhbmd1bGFyLmVxdWFsc2AuXHJcbiAqICogQm90aCB2YWx1ZXMgYXJlIE5hTi4gKEluIEphdmFTY3JpcHQsIE5hTiA9PSBOYU4gPT4gZmFsc2UuIEJ1dCB3ZSBjb25zaWRlciB0d28gTmFOIGFzIGVxdWFsKVxyXG4gKiAqIEJvdGggdmFsdWVzIHJlcHJlc2VudCB0aGUgc2FtZSByZWd1bGFyIGV4cHJlc3Npb24gKEluIEphdmFTY3JpcHQsXHJcbiAqICAgL2FiYy8gPT0gL2FiYy8gPT4gZmFsc2UuIEJ1dCB3ZSBjb25zaWRlciB0d28gcmVndWxhciBleHByZXNzaW9ucyBhcyBlcXVhbCB3aGVuIHRoZWlyIHRleHR1YWxcclxuICogICByZXByZXNlbnRhdGlvbiBtYXRjaGVzKS5cclxuICpcclxuICogRHVyaW5nIGEgcHJvcGVydHkgY29tcGFyaXNvbiwgcHJvcGVydGllcyBvZiBgZnVuY3Rpb25gIHR5cGUgYW5kIHByb3BlcnRpZXMgd2l0aCBuYW1lc1xyXG4gKiB0aGF0IGJlZ2luIHdpdGggYCRgIGFyZSBpZ25vcmVkLlxyXG4gKlxyXG4gKiBTY29wZSBhbmQgRE9NV2luZG93IG9iamVjdHMgYXJlIGJlaW5nIGNvbXBhcmVkIG9ubHkgYnkgaWRlbnRpZnkgKGA9PT1gKS5cclxuICpcclxuICogQHBhcmFtIHsqfSBvMSBPYmplY3Qgb3IgdmFsdWUgdG8gY29tcGFyZS5cclxuICogQHBhcmFtIHsqfSBvMiBPYmplY3Qgb3IgdmFsdWUgdG8gY29tcGFyZS5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYXJndW1lbnRzIGFyZSBlcXVhbC5cclxuICovXHJcbmZ1bmN0aW9uIGVxdWFscyhvMSwgbzIpIHtcclxuICBpZiAobzEgPT09IG8yKSByZXR1cm4gdHJ1ZTtcclxuICBpZiAobzEgPT09IG51bGwgfHwgbzIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICBpZiAobzEgIT09IG8xICYmIG8yICE9PSBvMikgcmV0dXJuIHRydWU7IC8vIE5hTiA9PT0gTmFOXHJcbiAgdmFyIHQxID0gdHlwZW9mIG8xLCB0MiA9IHR5cGVvZiBvMiwgbGVuZ3RoLCBrZXksIGtleVNldDtcclxuICBpZiAodDEgPT0gdDIpIHtcclxuICAgIGlmICh0MSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICBpZiAoaXNBcnJheShvMSkpIHtcclxuICAgICAgICBpZiAoIWlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKChsZW5ndGggPSBvMS5sZW5ndGgpID09IG8yLmxlbmd0aCkge1xyXG4gICAgICAgICAgZm9yIChrZXkgPSAwOyBrZXkgPCBsZW5ndGg7IGtleSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghZXF1YWxzKG8xW2tleV0sIG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNEYXRlKG8xKSkge1xyXG4gICAgICAgIGlmICghaXNEYXRlKG8yKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBlcXVhbHMobzEuZ2V0VGltZSgpLCBvMi5nZXRUaW1lKCkpO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzUmVnRXhwKG8xKSAmJiBpc1JlZ0V4cChvMikpIHtcclxuICAgICAgICByZXR1cm4gbzEudG9TdHJpbmcoKSA9PSBvMi50b1N0cmluZygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChpc1Njb3BlKG8xKSB8fCBpc1Njb3BlKG8yKSB8fCBpc1dpbmRvdyhvMSkgfHwgaXNXaW5kb3cobzIpIHx8IGlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAga2V5U2V0ID0ge307XHJcbiAgICAgICAgZm9yIChrZXkgaW4gbzEpIHtcclxuICAgICAgICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnJCcgfHwgaXNGdW5jdGlvbihvMVtrZXldKSkgY29udGludWU7XHJcbiAgICAgICAgICBpZiAoIWVxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAga2V5U2V0W2tleV0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGtleSBpbiBvMikge1xyXG4gICAgICAgICAgaWYgKCFrZXlTZXQuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxyXG4gICAgICAgICAgICAgIGtleS5jaGFyQXQoMCkgIT09ICckJyAmJlxyXG4gICAgICAgICAgICAgIG8yW2tleV0gIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgICFpc0Z1bmN0aW9uKG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxudmFyIGNzcCA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmIChpc0RlZmluZWQoY3NwLmlzQWN0aXZlXykpIHJldHVybiBjc3AuaXNBY3RpdmVfO1xyXG5cclxuICB2YXIgYWN0aXZlID0gISEoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25nLWNzcF0nKSB8fFxyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uZy1jc3BdJykpO1xyXG5cclxuICBpZiAoIWFjdGl2ZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLyoganNoaW50IC1XMDMxLCAtVzA1NCAqL1xyXG4gICAgICBuZXcgRnVuY3Rpb24oJycpO1xyXG4gICAgICAvKiBqc2hpbnQgK1cwMzEsICtXMDU0ICovXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGFjdGl2ZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKGNzcC5pc0FjdGl2ZV8gPSBhY3RpdmUpO1xyXG59O1xyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBjb25jYXQoYXJyYXkxLCBhcnJheTIsIGluZGV4KSB7XHJcbiAgcmV0dXJuIGFycmF5MS5jb25jYXQoc2xpY2UuY2FsbChhcnJheTIsIGluZGV4KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaWNlQXJncyhhcmdzLCBzdGFydEluZGV4KSB7XHJcbiAgcmV0dXJuIHNsaWNlLmNhbGwoYXJncywgc3RhcnRJbmRleCB8fCAwKTtcclxufVxyXG5cclxuXHJcbi8qIGpzaGludCAtVzEwMSAqL1xyXG4vKipcclxuICogQG5nZG9jIGZ1bmN0aW9uXHJcbiAqIEBuYW1lIGFuZ3VsYXIuYmluZFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggY2FsbHMgZnVuY3Rpb24gYGZuYCBib3VuZCB0byBgc2VsZmAgKGBzZWxmYCBiZWNvbWVzIHRoZSBgdGhpc2AgZm9yXHJcbiAqIGBmbmApLiBZb3UgY2FuIHN1cHBseSBvcHRpb25hbCBgYXJnc2AgdGhhdCBhcmUgcHJlYm91bmQgdG8gdGhlIGZ1bmN0aW9uLiBUaGlzIGZlYXR1cmUgaXMgYWxzb1xyXG4gKiBrbm93biBhcyBbcGFydGlhbCBhcHBsaWNhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXJ0aWFsX2FwcGxpY2F0aW9uKSwgYXNcclxuICogZGlzdGluZ3Vpc2hlZCBmcm9tIFtmdW5jdGlvbiBjdXJyeWluZ10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DdXJyeWluZyNDb250cmFzdF93aXRoX3BhcnRpYWxfZnVuY3Rpb25fYXBwbGljYXRpb24pLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gc2VsZiBDb250ZXh0IHdoaWNoIGBmbmAgc2hvdWxkIGJlIGV2YWx1YXRlZCBpbi5cclxuICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBGdW5jdGlvbiB0byBiZSBib3VuZC5cclxuICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwcmVib3VuZCB0byB0aGUgYGZuYCBmdW5jdGlvbiBjYWxsLlxyXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gRnVuY3Rpb24gdGhhdCB3cmFwcyB0aGUgYGZuYCB3aXRoIGFsbCB0aGUgc3BlY2lmaWVkIGJpbmRpbmdzLlxyXG4gKi9cclxuLyoganNoaW50ICtXMTAxICovXHJcbmZ1bmN0aW9uIGJpbmQoc2VsZiwgZm4pIHtcclxuICB2YXIgY3VycnlBcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBzbGljZUFyZ3MoYXJndW1lbnRzLCAyKSA6IFtdO1xyXG4gIGlmIChpc0Z1bmN0aW9uKGZuKSAmJiAhKGZuIGluc3RhbmNlb2YgUmVnRXhwKSkge1xyXG4gICAgcmV0dXJuIGN1cnJ5QXJncy5sZW5ndGhcclxuICAgICAgPyBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICAgID8gZm4uYXBwbHkoc2VsZiwgY29uY2F0KGN1cnJ5QXJncywgYXJndW1lbnRzLCAwKSlcclxuICAgICAgICAgICAgOiBmbi5hcHBseShzZWxmLCBjdXJyeUFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICAgID8gZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICA6IGZuLmNhbGwoc2VsZik7XHJcbiAgICAgICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gaW4gSUUsIG5hdGl2ZSBtZXRob2RzIGFyZSBub3QgZnVuY3Rpb25zIHNvIHRoZXkgY2Fubm90IGJlIGJvdW5kIChub3RlOiB0aGV5IGRvbid0IG5lZWQgdG8gYmUpXHJcbiAgICByZXR1cm4gZm47XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9Kc29uUmVwbGFjZXIoa2V5LCB2YWx1ZSkge1xyXG4gIHZhciB2YWwgPSB2YWx1ZTtcclxuXHJcbiAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmIGtleS5jaGFyQXQoMCkgPT09ICckJyAmJiBrZXkuY2hhckF0KDEpID09PSAnJCcpIHtcclxuICAgIHZhbCA9IHVuZGVmaW5lZDtcclxuICB9IGVsc2UgaWYgKGlzV2luZG93KHZhbHVlKSkge1xyXG4gICAgdmFsID0gJyRXSU5ET1cnO1xyXG4gIH0gZWxzZSBpZiAodmFsdWUgJiYgIGRvY3VtZW50ID09PSB2YWx1ZSkge1xyXG4gICAgdmFsID0gJyRET0NVTUVOVCc7XHJcbiAgfSBlbHNlIGlmIChpc1Njb3BlKHZhbHVlKSkge1xyXG4gICAgdmFsID0gJyRTQ09QRSc7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdmFsO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLnRvSnNvblxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTZXJpYWxpemVzIGlucHV0IGludG8gYSBKU09OLWZvcm1hdHRlZCBzdHJpbmcuIFByb3BlcnRpZXMgd2l0aCBsZWFkaW5nICQkIGNoYXJhY3RlcnMgd2lsbCBiZVxyXG4gKiBzdHJpcHBlZCBzaW5jZSBhbmd1bGFyIHVzZXMgdGhpcyBub3RhdGlvbiBpbnRlcm5hbGx5LlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheXxEYXRlfHN0cmluZ3xudW1iZXJ9IG9iaiBJbnB1dCB0byBiZSBzZXJpYWxpemVkIGludG8gSlNPTi5cclxuICogQHBhcmFtIHtib29sZWFufG51bWJlcj19IHByZXR0eSBJZiBzZXQgdG8gdHJ1ZSwgdGhlIEpTT04gb3V0cHV0IHdpbGwgY29udGFpbiBuZXdsaW5lcyBhbmQgd2hpdGVzcGFjZS5cclxuICogICAgSWYgc2V0IHRvIGFuIGludGVnZXIsIHRoZSBKU09OIG91dHB1dCB3aWxsIGNvbnRhaW4gdGhhdCBtYW55IHNwYWNlcyBwZXIgaW5kZW50YXRpb24gKHRoZSBkZWZhdWx0IGlzIDIpLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gSlNPTi1pZmllZCBzdHJpbmcgcmVwcmVzZW50aW5nIGBvYmpgLlxyXG4gKi9cclxuZnVuY3Rpb24gdG9Kc29uKG9iaiwgcHJldHR5KSB7XHJcbiAgaWYgKHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGlmICghaXNOdW1iZXIocHJldHR5KSkge1xyXG4gICAgcHJldHR5ID0gcHJldHR5ID8gMiA6IG51bGw7XHJcbiAgfVxyXG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIHRvSnNvblJlcGxhY2VyLCBwcmV0dHkpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmZyb21Kc29uXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERlc2VyaWFsaXplcyBhIEpTT04gc3RyaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30ganNvbiBKU09OIHN0cmluZyB0byBkZXNlcmlhbGl6ZS5cclxuICogQHJldHVybnMge09iamVjdHxBcnJheXxzdHJpbmd8bnVtYmVyfSBEZXNlcmlhbGl6ZWQgSlNPTiBzdHJpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBmcm9tSnNvbihqc29uKSB7XHJcbiAgcmV0dXJuIGlzU3RyaW5nKGpzb24pXHJcbiAgICAgID8gSlNPTi5wYXJzZShqc29uKVxyXG4gICAgICA6IGpzb247XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBlbGVtZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRpbmdUYWcoZWxlbWVudCkge1xyXG4gIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCkuY2xvbmUoKTtcclxuICB0cnkge1xyXG4gICAgLy8gdHVybnMgb3V0IElFIGRvZXMgbm90IGxldCB5b3Ugc2V0IC5odG1sKCkgb24gZWxlbWVudHMgd2hpY2hcclxuICAgIC8vIGFyZSBub3QgYWxsb3dlZCB0byBoYXZlIGNoaWxkcmVuLiBTbyB3ZSBqdXN0IGlnbm9yZSBpdC5cclxuICAgIGVsZW1lbnQuZW1wdHkoKTtcclxuICB9IGNhdGNoIChlKSB7fVxyXG4gIHZhciBlbGVtSHRtbCA9IGpxTGl0ZSgnPGRpdj4nKS5hcHBlbmQoZWxlbWVudCkuaHRtbCgpO1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gZWxlbWVudFswXS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQgPyBsb3dlcmNhc2UoZWxlbUh0bWwpIDpcclxuICAgICAgICBlbGVtSHRtbC5cclxuICAgICAgICAgIG1hdGNoKC9eKDxbXj5dKz4pLylbMV0uXHJcbiAgICAgICAgICByZXBsYWNlKC9ePChbXFx3XFwtXSspLywgZnVuY3Rpb24obWF0Y2gsIG5vZGVOYW1lKSB7IHJldHVybiAnPCcgKyBsb3dlcmNhc2Uobm9kZU5hbWUpOyB9KTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4gbG93ZXJjYXNlKGVsZW1IdG1sKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLyoqXHJcbiAqIFRyaWVzIHRvIGRlY29kZSB0aGUgVVJJIGNvbXBvbmVudCB3aXRob3V0IHRocm93aW5nIGFuIGV4Y2VwdGlvbi5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHN0ciB2YWx1ZSBwb3RlbnRpYWwgVVJJIGNvbXBvbmVudCB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBjYW4gYmUgZGVjb2RlZFxyXG4gKiB3aXRoIHRoZSBkZWNvZGVVUklDb21wb25lbnQgZnVuY3Rpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiB0cnlEZWNvZGVVUklDb21wb25lbnQodmFsdWUpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgLy8gSWdub3JlIGFueSBpbnZhbGlkIHVyaSBjb21wb25lbnRcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUGFyc2VzIGFuIGVzY2FwZWQgdXJsIHF1ZXJ5IHN0cmluZyBpbnRvIGtleS12YWx1ZSBwYWlycy5cclxuICogQHJldHVybnMge09iamVjdC48c3RyaW5nLGJvb2xlYW58QXJyYXk+fVxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VLZXlWYWx1ZSgvKipzdHJpbmcqL2tleVZhbHVlKSB7XHJcbiAgdmFyIG9iaiA9IHt9LCBrZXlfdmFsdWUsIGtleTtcclxuICBmb3JFYWNoKChrZXlWYWx1ZSB8fCBcIlwiKS5zcGxpdCgnJicpLCBmdW5jdGlvbihrZXlWYWx1ZSkge1xyXG4gICAgaWYgKGtleVZhbHVlKSB7XHJcbiAgICAgIGtleV92YWx1ZSA9IGtleVZhbHVlLnJlcGxhY2UoL1xcKy9nLCclMjAnKS5zcGxpdCgnPScpO1xyXG4gICAgICBrZXkgPSB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5X3ZhbHVlWzBdKTtcclxuICAgICAgaWYgKGlzRGVmaW5lZChrZXkpKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IGlzRGVmaW5lZChrZXlfdmFsdWVbMV0pID8gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KGtleV92YWx1ZVsxXSkgOiB0cnVlO1xyXG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgIG9ialtrZXldID0gdmFsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmpba2V5XSkpIHtcclxuICAgICAgICAgIG9ialtrZXldLnB1c2godmFsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgb2JqW2tleV0gPSBbb2JqW2tleV0sdmFsXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b0tleVZhbHVlKG9iaikge1xyXG4gIHZhciBwYXJ0cyA9IFtdO1xyXG4gIGZvckVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24oYXJyYXlWYWx1ZSkge1xyXG4gICAgICAgIHBhcnRzLnB1c2goZW5jb2RlVXJpUXVlcnkoa2V5LCB0cnVlKSArXHJcbiAgICAgICAgICAgICAgICAgICAoYXJyYXlWYWx1ZSA9PT0gdHJ1ZSA/ICcnIDogJz0nICsgZW5jb2RlVXJpUXVlcnkoYXJyYXlWYWx1ZSwgdHJ1ZSkpKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXksIHRydWUpICtcclxuICAgICAgICAgICAgICAgKHZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgdHJ1ZSkpKTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gcGFydHMubGVuZ3RoID8gcGFydHMuam9pbignJicpIDogJyc7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogV2UgbmVlZCBvdXIgY3VzdG9tIG1ldGhvZCBiZWNhdXNlIGVuY29kZVVSSUNvbXBvbmVudCBpcyB0b28gYWdncmVzc2l2ZSBhbmQgZG9lc24ndCBmb2xsb3dcclxuICogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMzk4Ni50eHQgd2l0aCByZWdhcmRzIHRvIHRoZSBjaGFyYWN0ZXIgc2V0IChwY2hhcikgYWxsb3dlZCBpbiBwYXRoXHJcbiAqIHNlZ21lbnRzOlxyXG4gKiAgICBzZWdtZW50ICAgICAgID0gKnBjaGFyXHJcbiAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxyXG4gKiAgICBwY3QtZW5jb2RlZCAgID0gXCIlXCIgSEVYRElHIEhFWERJR1xyXG4gKiAgICB1bnJlc2VydmVkICAgID0gQUxQSEEgLyBESUdJVCAvIFwiLVwiIC8gXCIuXCIgLyBcIl9cIiAvIFwiflwiXHJcbiAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcclxuICogICAgICAgICAgICAgICAgICAgICAvIFwiKlwiIC8gXCIrXCIgLyBcIixcIiAvIFwiO1wiIC8gXCI9XCJcclxuICovXHJcbmZ1bmN0aW9uIGVuY29kZVVyaVNlZ21lbnQodmFsKSB7XHJcbiAgcmV0dXJuIGVuY29kZVVyaVF1ZXJ5KHZhbCwgdHJ1ZSkuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lMjYvZ2ksICcmJykuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lM0QvZ2ksICc9JykuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lMkIvZ2ksICcrJyk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgZm9yIGVuY29kaW5nICprZXkqIG9yICp2YWx1ZSogcGFydHMgb2YgcXVlcnkgY29tcG9uZW50LiBXZSBuZWVkIGEgY3VzdG9tXHJcbiAqIG1ldGhvZCBiZWNhdXNlIGVuY29kZVVSSUNvbXBvbmVudCBpcyB0b28gYWdncmVzc2l2ZSBhbmQgZW5jb2RlcyBzdHVmZiB0aGF0IGRvZXNuJ3QgaGF2ZSB0byBiZVxyXG4gKiBlbmNvZGVkIHBlciBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2OlxyXG4gKiAgICBxdWVyeSAgICAgICA9ICooIHBjaGFyIC8gXCIvXCIgLyBcIj9cIiApXHJcbiAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxyXG4gKiAgICB1bnJlc2VydmVkICAgID0gQUxQSEEgLyBESUdJVCAvIFwiLVwiIC8gXCIuXCIgLyBcIl9cIiAvIFwiflwiXHJcbiAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXHJcbiAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcclxuICogICAgICAgICAgICAgICAgICAgICAvIFwiKlwiIC8gXCIrXCIgLyBcIixcIiAvIFwiO1wiIC8gXCI9XCJcclxuICovXHJcbmZ1bmN0aW9uIGVuY29kZVVyaVF1ZXJ5KHZhbCwgcGN0RW5jb2RlU3BhY2VzKSB7XHJcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxyXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTI0L2csICckJykuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lM0IvZ2ksICc7JykuXHJcbiAgICAgICAgICAgICByZXBsYWNlKC8lMjAvZywgKHBjdEVuY29kZVNwYWNlcyA/ICclMjAnIDogJysnKSk7XHJcbn1cclxuXHJcbnZhciBuZ0F0dHJQcmVmaXhlcyA9IFsnbmctJywgJ2RhdGEtbmctJywgJ25nOicsICd4LW5nLSddO1xyXG5cclxuZnVuY3Rpb24gZ2V0TmdBdHRyaWJ1dGUoZWxlbWVudCwgbmdBdHRyKSB7XHJcbiAgdmFyIGF0dHIsIGksIGlpID0gbmdBdHRyUHJlZml4ZXMubGVuZ3RoO1xyXG4gIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XHJcbiAgZm9yIChpID0gMDsgaSA8IGlpOyArK2kpIHtcclxuICAgIGF0dHIgPSBuZ0F0dHJQcmVmaXhlc1tpXSArIG5nQXR0cjtcclxuICAgIGlmIChpc1N0cmluZyhhdHRyID0gZWxlbWVudC5hdHRyKGF0dHIpKSkge1xyXG4gICAgICByZXR1cm4gYXR0cjtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQXBwXHJcbiAqIEBtb2R1bGUgbmdcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7YW5ndWxhci5Nb2R1bGV9IG5nQXBwIGFuIG9wdGlvbmFsIGFwcGxpY2F0aW9uXHJcbiAqICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZX0gbmFtZSB0byBsb2FkLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1N0cmljdERpIGlmIHRoaXMgYXR0cmlidXRlIGlzIHByZXNlbnQgb24gdGhlIGFwcCBlbGVtZW50LCB0aGUgaW5qZWN0b3Igd2lsbCBiZVxyXG4gKiAgIGNyZWF0ZWQgaW4gXCJzdHJpY3QtZGlcIiBtb2RlLiBUaGlzIG1lYW5zIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHdpbGwgZmFpbCB0byBpbnZva2UgZnVuY3Rpb25zIHdoaWNoXHJcbiAqICAgZG8gbm90IHVzZSBleHBsaWNpdCBmdW5jdGlvbiBhbm5vdGF0aW9uIChhbmQgYXJlIHRodXMgdW5zdWl0YWJsZSBmb3IgbWluaWZpY2F0aW9uKSwgYXMgZGVzY3JpYmVkXHJcbiAqICAgaW4ge0BsaW5rIGd1aWRlL2RpIHRoZSBEZXBlbmRlbmN5IEluamVjdGlvbiBndWlkZX0sIGFuZCB1c2VmdWwgZGVidWdnaW5nIGluZm8gd2lsbCBhc3Npc3QgaW5cclxuICogICB0cmFja2luZyBkb3duIHRoZSByb290IG9mIHRoZXNlIGJ1Z3MuXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBVc2UgdGhpcyBkaXJlY3RpdmUgdG8gKiphdXRvLWJvb3RzdHJhcCoqIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi4gVGhlIGBuZ0FwcGAgZGlyZWN0aXZlXHJcbiAqIGRlc2lnbmF0ZXMgdGhlICoqcm9vdCBlbGVtZW50Kiogb2YgdGhlIGFwcGxpY2F0aW9uIGFuZCBpcyB0eXBpY2FsbHkgcGxhY2VkIG5lYXIgdGhlIHJvb3QgZWxlbWVudFxyXG4gKiBvZiB0aGUgcGFnZSAtIGUuZy4gb24gdGhlIGA8Ym9keT5gIG9yIGA8aHRtbD5gIHRhZ3MuXHJcbiAqXHJcbiAqIE9ubHkgb25lIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBjYW4gYmUgYXV0by1ib290c3RyYXBwZWQgcGVyIEhUTUwgZG9jdW1lbnQuIFRoZSBmaXJzdCBgbmdBcHBgXHJcbiAqIGZvdW5kIGluIHRoZSBkb2N1bWVudCB3aWxsIGJlIHVzZWQgdG8gZGVmaW5lIHRoZSByb290IGVsZW1lbnQgdG8gYXV0by1ib290c3RyYXAgYXMgYW5cclxuICogYXBwbGljYXRpb24uIFRvIHJ1biBtdWx0aXBsZSBhcHBsaWNhdGlvbnMgaW4gYW4gSFRNTCBkb2N1bWVudCB5b3UgbXVzdCBtYW51YWxseSBib290c3RyYXAgdGhlbSB1c2luZ1xyXG4gKiB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IGluc3RlYWQuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbnMgY2Fubm90IGJlIG5lc3RlZCB3aXRoaW4gZWFjaCBvdGhlci5cclxuICpcclxuICogWW91IGNhbiBzcGVjaWZ5IGFuICoqQW5ndWxhckpTIG1vZHVsZSoqIHRvIGJlIHVzZWQgYXMgdGhlIHJvb3QgbW9kdWxlIGZvciB0aGUgYXBwbGljYXRpb24uICBUaGlzXHJcbiAqIG1vZHVsZSB3aWxsIGJlIGxvYWRlZCBpbnRvIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3J9IHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGJvb3RzdHJhcHBlZC4gSXRcclxuICogc2hvdWxkIGNvbnRhaW4gdGhlIGFwcGxpY2F0aW9uIGNvZGUgbmVlZGVkIG9yIGhhdmUgZGVwZW5kZW5jaWVzIG9uIG90aGVyIG1vZHVsZXMgdGhhdCB3aWxsXHJcbiAqIGNvbnRhaW4gdGhlIGNvZGUuIFNlZSB7QGxpbmsgYW5ndWxhci5tb2R1bGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiBJbiB0aGUgZXhhbXBsZSBiZWxvdyBpZiB0aGUgYG5nQXBwYCBkaXJlY3RpdmUgd2VyZSBub3QgcGxhY2VkIG9uIHRoZSBgaHRtbGAgZWxlbWVudCB0aGVuIHRoZVxyXG4gKiBkb2N1bWVudCB3b3VsZCBub3QgYmUgY29tcGlsZWQsIHRoZSBgQXBwQ29udHJvbGxlcmAgd291bGQgbm90IGJlIGluc3RhbnRpYXRlZCBhbmQgdGhlIGB7eyBhK2IgfX1gXHJcbiAqIHdvdWxkIG5vdCBiZSByZXNvbHZlZCB0byBgM2AuXHJcbiAqXHJcbiAqIGBuZ0FwcGAgaXMgdGhlIGVhc2llc3QsIGFuZCBtb3N0IGNvbW1vbiB3YXkgdG8gYm9vdHN0cmFwIGFuIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gPGV4YW1wbGUgbW9kdWxlPVwibmdBcHBEZW1vXCI+XHJcbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgIDxkaXYgbmctY29udHJvbGxlcj1cIm5nQXBwRGVtb0NvbnRyb2xsZXJcIj5cclxuICAgICBJIGNhbiBhZGQ6IHt7YX19ICsge3tifX0gPSAge3sgYStiIH19XHJcbiAgIDwvZGl2PlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgYW5ndWxhci5tb2R1bGUoJ25nQXBwRGVtbycsIFtdKS5jb250cm9sbGVyKCduZ0FwcERlbW9Db250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgJHNjb3BlLmEgPSAxO1xyXG4gICAgICRzY29wZS5iID0gMjtcclxuICAgfSk7XHJcbiAgIDwvZmlsZT5cclxuIDwvZXhhbXBsZT5cclxuICpcclxuICogVXNpbmcgYG5nU3RyaWN0RGlgLCB5b3Ugd291bGQgc2VlIHNvbWV0aGluZyBsaWtlIHRoaXM6XHJcbiAqXHJcbiA8ZXhhbXBsZSBuZy1hcHAtaW5jbHVkZWQ9XCJ0cnVlXCI+XHJcbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgIDxkaXYgbmctYXBwPVwibmdBcHBTdHJpY3REZW1vXCIgbmctc3RyaWN0LWRpPlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR29vZENvbnRyb2xsZXIxXCI+XHJcbiAgICAgICAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxyXG5cclxuICAgICAgICAgICA8cD5UaGlzIHJlbmRlcnMgYmVjYXVzZSB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBmYWlsIHRvXHJcbiAgICAgICAgICAgICAgaW5zdGFudGlhdGUsIGJ5IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gc3R5bGUgKHNlZVxyXG4gICAgICAgICAgICAgIHNjcmlwdC5qcyBmb3IgZGV0YWlscylcclxuICAgICAgICAgICA8L3A+XHJcbiAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHb29kQ29udHJvbGxlcjJcIj5cclxuICAgICAgICAgICBOYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJuYW1lXCI+PGJyIC8+XHJcbiAgICAgICAgICAgSGVsbG8sIHt7bmFtZX19IVxyXG5cclxuICAgICAgICAgICA8cD5UaGlzIHJlbmRlcnMgYmVjYXVzZSB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBmYWlsIHRvXHJcbiAgICAgICAgICAgICAgaW5zdGFudGlhdGUsIGJ5IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gc3R5bGVcclxuICAgICAgICAgICAgICAoc2VlIHNjcmlwdC5qcyBmb3IgZGV0YWlscylcclxuICAgICAgICAgICA8L3A+XHJcbiAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJCYWRDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxyXG5cclxuICAgICAgICAgICA8cD5UaGUgY29udHJvbGxlciBjb3VsZCBub3QgYmUgaW5zdGFudGlhdGVkLCBkdWUgdG8gcmVseWluZ1xyXG4gICAgICAgICAgICAgIG9uIGF1dG9tYXRpYyBmdW5jdGlvbiBhbm5vdGF0aW9ucyAod2hpY2ggYXJlIGRpc2FibGVkIGluXHJcbiAgICAgICAgICAgICAgc3RyaWN0IG1vZGUpLiBBcyBzdWNoLCB0aGUgY29udGVudCBvZiB0aGlzIHNlY3Rpb24gaXMgbm90XHJcbiAgICAgICAgICAgICAgaW50ZXJwb2xhdGVkLCBhbmQgdGhlcmUgc2hvdWxkIGJlIGFuIGVycm9yIGluIHlvdXIgd2ViIGNvbnNvbGUuXHJcbiAgICAgICAgICAgPC9wPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgIDwvZGl2PlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgYW5ndWxhci5tb2R1bGUoJ25nQXBwU3RyaWN0RGVtbycsIFtdKVxyXG4gICAgIC8vIEJhZENvbnRyb2xsZXIgd2lsbCBmYWlsIHRvIGluc3RhbnRpYXRlLCBkdWUgdG8gcmVseWluZyBvbiBhdXRvbWF0aWMgZnVuY3Rpb24gYW5ub3RhdGlvbixcclxuICAgICAvLyByYXRoZXIgdGhhbiBhbiBleHBsaWNpdCBhbm5vdGF0aW9uXHJcbiAgICAgLmNvbnRyb2xsZXIoJ0JhZENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICRzY29wZS5hID0gMTtcclxuICAgICAgICRzY29wZS5iID0gMjtcclxuICAgICB9KVxyXG4gICAgIC8vIFVubGlrZSBCYWRDb250cm9sbGVyLCBHb29kQ29udHJvbGxlcjEgYW5kIEdvb2RDb250cm9sbGVyMiB3aWxsIG5vdCBmYWlsIHRvIGJlIGluc3RhbnRpYXRlZCxcclxuICAgICAvLyBkdWUgdG8gdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbnMgdXNpbmcgdGhlIGFycmF5IHN0eWxlIGFuZCAkaW5qZWN0IHByb3BlcnR5LCByZXNwZWN0aXZlbHkuXHJcbiAgICAgLmNvbnRyb2xsZXIoJ0dvb2RDb250cm9sbGVyMScsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAkc2NvcGUuYSA9IDE7XHJcbiAgICAgICAkc2NvcGUuYiA9IDI7XHJcbiAgICAgfV0pXHJcbiAgICAgLmNvbnRyb2xsZXIoJ0dvb2RDb250cm9sbGVyMicsIEdvb2RDb250cm9sbGVyMik7XHJcbiAgICAgZnVuY3Rpb24gR29vZENvbnRyb2xsZXIyKCRzY29wZSkge1xyXG4gICAgICAgJHNjb3BlLm5hbWUgPSBcIldvcmxkXCI7XHJcbiAgICAgfVxyXG4gICAgIEdvb2RDb250cm9sbGVyMi4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuICAgPC9maWxlPlxyXG4gICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgIGRpdltuZy1jb250cm9sbGVyXSB7XHJcbiAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XHJcbiAgICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgIGJvcmRlcjogMXB4IHNvbGlkO1xyXG4gICAgICAgcGFkZGluZzogLjVlbTtcclxuICAgfVxyXG4gICBkaXZbbmctY29udHJvbGxlcl49R29vZF0ge1xyXG4gICAgICAgYm9yZGVyLWNvbG9yOiAjZDZlOWM2O1xyXG4gICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2RmZjBkODtcclxuICAgICAgIGNvbG9yOiAjM2M3NjNkO1xyXG4gICB9XHJcbiAgIGRpdltuZy1jb250cm9sbGVyXj1CYWRdIHtcclxuICAgICAgIGJvcmRlci1jb2xvcjogI2ViY2NkMTtcclxuICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMmRlZGU7XHJcbiAgICAgICBjb2xvcjogI2E5NDQ0MjtcclxuICAgICAgIG1hcmdpbi1ib3R0b206IDA7XHJcbiAgIH1cclxuICAgPC9maWxlPlxyXG4gPC9leGFtcGxlPlxyXG4gKi9cclxuZnVuY3Rpb24gYW5ndWxhckluaXQoZWxlbWVudCwgYm9vdHN0cmFwKSB7XHJcbiAgdmFyIGFwcEVsZW1lbnQsXHJcbiAgICAgIG1vZHVsZSxcclxuICAgICAgY29uZmlnID0ge307XHJcblxyXG4gIC8vIFRoZSBlbGVtZW50IGBlbGVtZW50YCBoYXMgcHJpb3JpdHkgb3ZlciBhbnkgb3RoZXIgZWxlbWVudFxyXG4gIGZvckVhY2gobmdBdHRyUHJlZml4ZXMsIGZ1bmN0aW9uKHByZWZpeCkge1xyXG4gICAgdmFyIG5hbWUgPSBwcmVmaXggKyAnYXBwJztcclxuXHJcbiAgICBpZiAoIWFwcEVsZW1lbnQgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGUgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGUobmFtZSkpIHtcclxuICAgICAgYXBwRWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgIG1vZHVsZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGZvckVhY2gobmdBdHRyUHJlZml4ZXMsIGZ1bmN0aW9uKHByZWZpeCkge1xyXG4gICAgdmFyIG5hbWUgPSBwcmVmaXggKyAnYXBwJztcclxuICAgIHZhciBjYW5kaWRhdGU7XHJcblxyXG4gICAgaWYgKCFhcHBFbGVtZW50ICYmIChjYW5kaWRhdGUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1snICsgbmFtZS5yZXBsYWNlKCc6JywgJ1xcXFw6JykgKyAnXScpKSkge1xyXG4gICAgICBhcHBFbGVtZW50ID0gY2FuZGlkYXRlO1xyXG4gICAgICBtb2R1bGUgPSBjYW5kaWRhdGUuZ2V0QXR0cmlidXRlKG5hbWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGlmIChhcHBFbGVtZW50KSB7XHJcbiAgICBjb25maWcuc3RyaWN0RGkgPSBnZXROZ0F0dHJpYnV0ZShhcHBFbGVtZW50LCBcInN0cmljdC1kaVwiKSAhPT0gbnVsbDtcclxuICAgIGJvb3RzdHJhcChhcHBFbGVtZW50LCBtb2R1bGUgPyBbbW9kdWxlXSA6IFtdLCBjb25maWcpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gKiBAbmFtZSBhbmd1bGFyLmJvb3RzdHJhcFxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB0byBtYW51YWxseSBzdGFydCB1cCBhbmd1bGFyIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBTZWU6IHtAbGluayBndWlkZS9ib290c3RyYXAgQm9vdHN0cmFwfVxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgUHJvdHJhY3RvciBiYXNlZCBlbmQtdG8tZW5kIHRlc3RzIGNhbm5vdCB1c2UgdGhpcyBmdW5jdGlvbiB0byBib290c3RyYXAgbWFudWFsbHkuXHJcbiAqIFRoZXkgbXVzdCB1c2Uge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0FwcCBuZ0FwcH0uXHJcbiAqXHJcbiAqIEFuZ3VsYXIgd2lsbCBkZXRlY3QgaWYgaXQgaGFzIGJlZW4gbG9hZGVkIGludG8gdGhlIGJyb3dzZXIgbW9yZSB0aGFuIG9uY2UgYW5kIG9ubHkgYWxsb3cgdGhlXHJcbiAqIGZpcnN0IGxvYWRlZCBzY3JpcHQgdG8gYmUgYm9vdHN0cmFwcGVkIGFuZCB3aWxsIHJlcG9ydCBhIHdhcm5pbmcgdG8gdGhlIGJyb3dzZXIgY29uc29sZSBmb3JcclxuICogZWFjaCBvZiB0aGUgc3Vic2VxdWVudCBzY3JpcHRzLiBUaGlzIHByZXZlbnRzIHN0cmFuZ2UgcmVzdWx0cyBpbiBhcHBsaWNhdGlvbnMsIHdoZXJlIG90aGVyd2lzZVxyXG4gKiBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgQW5ndWxhciB0cnkgdG8gd29yayBvbiB0aGUgRE9NLlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDwhZG9jdHlwZSBodG1sPlxyXG4gKiA8aHRtbD5cclxuICogPGJvZHk+XHJcbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIldlbGNvbWVDb250cm9sbGVyXCI+XHJcbiAqICAge3tncmVldGluZ319XHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiA8c2NyaXB0IHNyYz1cImFuZ3VsYXIuanNcIj48L3NjcmlwdD5cclxuICogPHNjcmlwdD5cclxuICogICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2RlbW8nLCBbXSlcclxuICogICAuY29udHJvbGxlcignV2VsY29tZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICogICAgICAgJHNjb3BlLmdyZWV0aW5nID0gJ1dlbGNvbWUhJztcclxuICogICB9KTtcclxuICogICBhbmd1bGFyLmJvb3RzdHJhcChkb2N1bWVudCwgWydkZW1vJ10pO1xyXG4gKiA8L3NjcmlwdD5cclxuICogPC9ib2R5PlxyXG4gKiA8L2h0bWw+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgRE9NIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHJvb3Qgb2YgYW5ndWxhciBhcHBsaWNhdGlvbi5cclxuICogQHBhcmFtIHtBcnJheTxTdHJpbmd8RnVuY3Rpb258QXJyYXk+PX0gbW9kdWxlcyBhbiBhcnJheSBvZiBtb2R1bGVzIHRvIGxvYWQgaW50byB0aGUgYXBwbGljYXRpb24uXHJcbiAqICAgICBFYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHNob3VsZCBiZSB0aGUgbmFtZSBvZiBhIHByZWRlZmluZWQgbW9kdWxlIG9yIGEgKERJIGFubm90YXRlZClcclxuICogICAgIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkIGJ5IHRoZSBpbmplY3RvciBhcyBhIGBjb25maWdgIGJsb2NrLlxyXG4gKiAgICAgU2VlOiB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlc31cclxuICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgYW4gb2JqZWN0IGZvciBkZWZpbmluZyBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBhcHBsaWNhdGlvbi4gVGhlXHJcbiAqICAgICBmb2xsb3dpbmcga2V5cyBhcmUgc3VwcG9ydGVkOlxyXG4gKlxyXG4gKiAqIGBzdHJpY3REaWAgLSBkaXNhYmxlIGF1dG9tYXRpYyBmdW5jdGlvbiBhbm5vdGF0aW9uIGZvciB0aGUgYXBwbGljYXRpb24uIFRoaXMgaXMgbWVhbnQgdG9cclxuICogICBhc3Npc3QgaW4gZmluZGluZyBidWdzIHdoaWNoIGJyZWFrIG1pbmlmaWVkIGNvZGUuIERlZmF1bHRzIHRvIGBmYWxzZWAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHthdXRvLiRpbmplY3Rvcn0gUmV0dXJucyB0aGUgbmV3bHkgY3JlYXRlZCBpbmplY3RvciBmb3IgdGhpcyBhcHAuXHJcbiAqL1xyXG5mdW5jdGlvbiBib290c3RyYXAoZWxlbWVudCwgbW9kdWxlcywgY29uZmlnKSB7XHJcbiAgaWYgKCFpc09iamVjdChjb25maWcpKSBjb25maWcgPSB7fTtcclxuICB2YXIgZGVmYXVsdENvbmZpZyA9IHtcclxuICAgIHN0cmljdERpOiBmYWxzZVxyXG4gIH07XHJcbiAgY29uZmlnID0gZXh0ZW5kKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XHJcbiAgdmFyIGRvQm9vdHN0cmFwID0gZnVuY3Rpb24oKSB7XHJcbiAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xyXG5cclxuICAgIGlmIChlbGVtZW50LmluamVjdG9yKCkpIHtcclxuICAgICAgdmFyIHRhZyA9IChlbGVtZW50WzBdID09PSBkb2N1bWVudCkgPyAnZG9jdW1lbnQnIDogc3RhcnRpbmdUYWcoZWxlbWVudCk7XHJcbiAgICAgIC8vRW5jb2RlIGFuZ2xlIGJyYWNrZXRzIHRvIHByZXZlbnQgaW5wdXQgZnJvbSBiZWluZyBzYW5pdGl6ZWQgdG8gZW1wdHkgc3RyaW5nICM4NjgzXHJcbiAgICAgIHRocm93IG5nTWluRXJyKFxyXG4gICAgICAgICAgJ2J0c3RycGQnLFxyXG4gICAgICAgICAgXCJBcHAgQWxyZWFkeSBCb290c3RyYXBwZWQgd2l0aCB0aGlzIEVsZW1lbnQgJ3swfSdcIixcclxuICAgICAgICAgIHRhZy5yZXBsYWNlKC88LywnJmx0OycpLnJlcGxhY2UoLz4vLCcmZ3Q7JykpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZXMgPSBtb2R1bGVzIHx8IFtdO1xyXG4gICAgbW9kdWxlcy51bnNoaWZ0KFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSkge1xyXG4gICAgICAkcHJvdmlkZS52YWx1ZSgnJHJvb3RFbGVtZW50JywgZWxlbWVudCk7XHJcbiAgICB9XSk7XHJcblxyXG4gICAgaWYgKGNvbmZpZy5kZWJ1Z0luZm9FbmFibGVkKSB7XHJcbiAgICAgIC8vIFB1c2hpbmcgc28gdGhhdCB0aGlzIG92ZXJyaWRlcyBgZGVidWdJbmZvRW5hYmxlZGAgc2V0dGluZyBkZWZpbmVkIGluIHVzZXIncyBgbW9kdWxlc2AuXHJcbiAgICAgIG1vZHVsZXMucHVzaChbJyRjb21waWxlUHJvdmlkZXInLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKHRydWUpO1xyXG4gICAgICB9XSk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlcy51bnNoaWZ0KCduZycpO1xyXG4gICAgdmFyIGluamVjdG9yID0gY3JlYXRlSW5qZWN0b3IobW9kdWxlcywgY29uZmlnLnN0cmljdERpKTtcclxuICAgIGluamVjdG9yLmludm9rZShbJyRyb290U2NvcGUnLCAnJHJvb3RFbGVtZW50JywgJyRjb21waWxlJywgJyRpbmplY3RvcicsXHJcbiAgICAgICBmdW5jdGlvbiBib290c3RyYXBBcHBseShzY29wZSwgZWxlbWVudCwgY29tcGlsZSwgaW5qZWN0b3IpIHtcclxuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbGVtZW50LmRhdGEoJyRpbmplY3RvcicsIGluamVjdG9yKTtcclxuICAgICAgICAgIGNvbXBpbGUoZWxlbWVudCkoc2NvcGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XVxyXG4gICAgKTtcclxuICAgIHJldHVybiBpbmplY3RvcjtcclxuICB9O1xyXG5cclxuICB2YXIgTkdfRU5BQkxFX0RFQlVHX0lORk8gPSAvXk5HX0VOQUJMRV9ERUJVR19JTkZPIS87XHJcbiAgdmFyIE5HX0RFRkVSX0JPT1RTVFJBUCA9IC9eTkdfREVGRVJfQk9PVFNUUkFQIS87XHJcblxyXG4gIGlmICh3aW5kb3cgJiYgTkdfRU5BQkxFX0RFQlVHX0lORk8udGVzdCh3aW5kb3cubmFtZSkpIHtcclxuICAgIGNvbmZpZy5kZWJ1Z0luZm9FbmFibGVkID0gdHJ1ZTtcclxuICAgIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19FTkFCTEVfREVCVUdfSU5GTywgJycpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHdpbmRvdyAmJiAhTkdfREVGRVJfQk9PVFNUUkFQLnRlc3Qod2luZG93Lm5hbWUpKSB7XHJcbiAgICByZXR1cm4gZG9Cb290c3RyYXAoKTtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19ERUZFUl9CT09UU1RSQVAsICcnKTtcclxuICBhbmd1bGFyLnJlc3VtZUJvb3RzdHJhcCA9IGZ1bmN0aW9uKGV4dHJhTW9kdWxlcykge1xyXG4gICAgZm9yRWFjaChleHRyYU1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZSkge1xyXG4gICAgICBtb2R1bGVzLnB1c2gobW9kdWxlKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XHJcbiAgfTtcclxuXHJcbiAgaWYgKGlzRnVuY3Rpb24oYW5ndWxhci5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCkpIHtcclxuICAgIGFuZ3VsYXIucmVzdW1lRGVmZXJyZWRCb290c3RyYXAoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5yZWxvYWRXaXRoRGVidWdJbmZvXHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIHJlbG9hZCB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiB3aXRoIGRlYnVnIGluZm9ybWF0aW9uIHR1cm5lZCBvbi5cclxuICogVGhpcyB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYSBjYWxsIHRvIGAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQoZmFsc2UpYC5cclxuICpcclxuICogU2VlIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RlYnVnSW5mb0VuYWJsZWR9IGZvciBtb3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVsb2FkV2l0aERlYnVnSW5mbygpIHtcclxuICB3aW5kb3cubmFtZSA9ICdOR19FTkFCTEVfREVCVUdfSU5GTyEnICsgd2luZG93Lm5hbWU7XHJcbiAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQG5hbWUgYW5ndWxhci5nZXRUZXN0YWJpbGl0eVxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBHZXQgdGhlIHRlc3RhYmlsaXR5IHNlcnZpY2UgZm9yIHRoZSBpbnN0YW5jZSBvZiBBbmd1bGFyIG9uIHRoZSBnaXZlblxyXG4gKiBlbGVtZW50LlxyXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgRE9NIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHJvb3Qgb2YgYW5ndWxhciBhcHBsaWNhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGdldFRlc3RhYmlsaXR5KHJvb3RFbGVtZW50KSB7XHJcbiAgdmFyIGluamVjdG9yID0gYW5ndWxhci5lbGVtZW50KHJvb3RFbGVtZW50KS5pbmplY3RvcigpO1xyXG4gIGlmICghaW5qZWN0b3IpIHtcclxuICAgIHRocm93IG5nTWluRXJyKCd0ZXN0JyxcclxuICAgICAgJ25vIGluamVjdG9yIGZvdW5kIGZvciBlbGVtZW50IGFyZ3VtZW50IHRvIGdldFRlc3RhYmlsaXR5Jyk7XHJcbiAgfVxyXG4gIHJldHVybiBpbmplY3Rvci5nZXQoJyQkdGVzdGFiaWxpdHknKTtcclxufVxyXG5cclxudmFyIFNOQUtFX0NBU0VfUkVHRVhQID0gL1tBLVpdL2c7XHJcbmZ1bmN0aW9uIHNuYWtlX2Nhc2UobmFtZSwgc2VwYXJhdG9yKSB7XHJcbiAgc2VwYXJhdG9yID0gc2VwYXJhdG9yIHx8ICdfJztcclxuICByZXR1cm4gbmFtZS5yZXBsYWNlKFNOQUtFX0NBU0VfUkVHRVhQLCBmdW5jdGlvbihsZXR0ZXIsIHBvcykge1xyXG4gICAgcmV0dXJuIChwb3MgPyBzZXBhcmF0b3IgOiAnJykgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcclxuICB9KTtcclxufVxyXG5cclxudmFyIGJpbmRKUXVlcnlGaXJlZCA9IGZhbHNlO1xyXG52YXIgc2tpcERlc3Ryb3lPbk5leHRKUXVlcnlDbGVhbkRhdGE7XHJcbmZ1bmN0aW9uIGJpbmRKUXVlcnkoKSB7XHJcbiAgdmFyIG9yaWdpbmFsQ2xlYW5EYXRhO1xyXG5cclxuICBpZiAoYmluZEpRdWVyeUZpcmVkKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBiaW5kIHRvIGpRdWVyeSBpZiBwcmVzZW50O1xyXG4gIGpRdWVyeSA9IHdpbmRvdy5qUXVlcnk7XHJcbiAgLy8gVXNlIGpRdWVyeSBpZiBpdCBleGlzdHMgd2l0aCBwcm9wZXIgZnVuY3Rpb25hbGl0eSwgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdXMuXHJcbiAgLy8gQW5ndWxhciAxLjIrIHJlcXVpcmVzIGpRdWVyeSAxLjcrIGZvciBvbigpL29mZigpIHN1cHBvcnQuXHJcbiAgLy8gQW5ndWxhciAxLjMrIHRlY2huaWNhbGx5IHJlcXVpcmVzIGF0IGxlYXN0IGpRdWVyeSAyLjErIGJ1dCBpdCBtYXkgd29yayB3aXRoIG9sZGVyXHJcbiAgLy8gdmVyc2lvbnMuIEl0IHdpbGwgbm90IHdvcmsgZm9yIHN1cmUgd2l0aCBqUXVlcnkgPDEuNywgdGhvdWdoLlxyXG4gIGlmIChqUXVlcnkgJiYgalF1ZXJ5LmZuLm9uKSB7XHJcbiAgICBqcUxpdGUgPSBqUXVlcnk7XHJcbiAgICBleHRlbmQoalF1ZXJ5LmZuLCB7XHJcbiAgICAgIHNjb3BlOiBKUUxpdGVQcm90b3R5cGUuc2NvcGUsXHJcbiAgICAgIGlzb2xhdGVTY29wZTogSlFMaXRlUHJvdG90eXBlLmlzb2xhdGVTY29wZSxcclxuICAgICAgY29udHJvbGxlcjogSlFMaXRlUHJvdG90eXBlLmNvbnRyb2xsZXIsXHJcbiAgICAgIGluamVjdG9yOiBKUUxpdGVQcm90b3R5cGUuaW5qZWN0b3IsXHJcbiAgICAgIGluaGVyaXRlZERhdGE6IEpRTGl0ZVByb3RvdHlwZS5pbmhlcml0ZWREYXRhXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBbGwgbm9kZXMgcmVtb3ZlZCBmcm9tIHRoZSBET00gdmlhIHZhcmlvdXMgalF1ZXJ5IEFQSXMgbGlrZSAucmVtb3ZlKClcclxuICAgIC8vIGFyZSBwYXNzZWQgdGhyb3VnaCBqUXVlcnkuY2xlYW5EYXRhLiBNb25rZXktcGF0Y2ggdGhpcyBtZXRob2QgdG8gZmlyZVxyXG4gICAgLy8gdGhlICRkZXN0cm95IGV2ZW50IG9uIGFsbCByZW1vdmVkIG5vZGVzLlxyXG4gICAgb3JpZ2luYWxDbGVhbkRhdGEgPSBqUXVlcnkuY2xlYW5EYXRhO1xyXG4gICAgalF1ZXJ5LmNsZWFuRGF0YSA9IGZ1bmN0aW9uKGVsZW1zKSB7XHJcbiAgICAgIHZhciBldmVudHM7XHJcbiAgICAgIGlmICghc2tpcERlc3Ryb3lPbk5leHRKUXVlcnlDbGVhbkRhdGEpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgZWxlbTsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrKSB7XHJcbiAgICAgICAgICBldmVudHMgPSBqUXVlcnkuX2RhdGEoZWxlbSwgXCJldmVudHNcIik7XHJcbiAgICAgICAgICBpZiAoZXZlbnRzICYmIGV2ZW50cy4kZGVzdHJveSkge1xyXG4gICAgICAgICAgICBqUXVlcnkoZWxlbSkudHJpZ2dlckhhbmRsZXIoJyRkZXN0cm95Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNraXBEZXN0cm95T25OZXh0SlF1ZXJ5Q2xlYW5EYXRhID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgb3JpZ2luYWxDbGVhbkRhdGEoZWxlbXMpO1xyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAganFMaXRlID0gSlFMaXRlO1xyXG4gIH1cclxuXHJcbiAgYW5ndWxhci5lbGVtZW50ID0ganFMaXRlO1xyXG5cclxuICAvLyBQcmV2ZW50IGRvdWJsZS1wcm94eWluZy5cclxuICBiaW5kSlF1ZXJ5RmlyZWQgPSB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogdGhyb3cgZXJyb3IgaWYgdGhlIGFyZ3VtZW50IGlzIGZhbHN5LlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0QXJnKGFyZywgbmFtZSwgcmVhc29uKSB7XHJcbiAgaWYgKCFhcmcpIHtcclxuICAgIHRocm93IG5nTWluRXJyKCdhcmVxJywgXCJBcmd1bWVudCAnezB9JyBpcyB7MX1cIiwgKG5hbWUgfHwgJz8nKSwgKHJlYXNvbiB8fCBcInJlcXVpcmVkXCIpKTtcclxuICB9XHJcbiAgcmV0dXJuIGFyZztcclxufVxyXG5cclxuZnVuY3Rpb24gYXNzZXJ0QXJnRm4oYXJnLCBuYW1lLCBhY2NlcHRBcnJheUFubm90YXRpb24pIHtcclxuICBpZiAoYWNjZXB0QXJyYXlBbm5vdGF0aW9uICYmIGlzQXJyYXkoYXJnKSkge1xyXG4gICAgICBhcmcgPSBhcmdbYXJnLmxlbmd0aCAtIDFdO1xyXG4gIH1cclxuXHJcbiAgYXNzZXJ0QXJnKGlzRnVuY3Rpb24oYXJnKSwgbmFtZSwgJ25vdCBhIGZ1bmN0aW9uLCBnb3QgJyArXHJcbiAgICAgIChhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgPyBhcmcuY29uc3RydWN0b3IubmFtZSB8fCAnT2JqZWN0JyA6IHR5cGVvZiBhcmcpKTtcclxuICByZXR1cm4gYXJnO1xyXG59XHJcblxyXG4vKipcclxuICogdGhyb3cgZXJyb3IgaWYgdGhlIG5hbWUgZ2l2ZW4gaXMgaGFzT3duUHJvcGVydHlcclxuICogQHBhcmFtICB7U3RyaW5nfSBuYW1lICAgIHRoZSBuYW1lIHRvIHRlc3RcclxuICogQHBhcmFtICB7U3RyaW5nfSBjb250ZXh0IHRoZSBjb250ZXh0IGluIHdoaWNoIHRoZSBuYW1lIGlzIHVzZWQsIHN1Y2ggYXMgbW9kdWxlIG9yIGRpcmVjdGl2ZVxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgY29udGV4dCkge1xyXG4gIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XHJcbiAgICB0aHJvdyBuZ01pbkVycignYmFkbmFtZScsIFwiaGFzT3duUHJvcGVydHkgaXMgbm90IGEgdmFsaWQgezB9IG5hbWVcIiwgY29udGV4dCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuIHRoZSB2YWx1ZSBhY2Nlc3NpYmxlIGZyb20gdGhlIG9iamVjdCBieSBwYXRoLiBBbnkgdW5kZWZpbmVkIHRyYXZlcnNhbHMgYXJlIGlnbm9yZWRcclxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBzdGFydGluZyBvYmplY3RcclxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggcGF0aCB0byB0cmF2ZXJzZVxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiaW5kRm5Ub1Njb3BlPXRydWVdXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHZhbHVlIGFzIGFjY2Vzc2libGUgYnkgcGF0aFxyXG4gKi9cclxuLy9UT0RPKG1pc2tvKTogdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZW1vdmVkXHJcbmZ1bmN0aW9uIGdldHRlcihvYmosIHBhdGgsIGJpbmRGblRvU2NvcGUpIHtcclxuICBpZiAoIXBhdGgpIHJldHVybiBvYmo7XHJcbiAgdmFyIGtleXMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcbiAgdmFyIGtleTtcclxuICB2YXIgbGFzdEluc3RhbmNlID0gb2JqO1xyXG4gIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAga2V5ID0ga2V5c1tpXTtcclxuICAgIGlmIChvYmopIHtcclxuICAgICAgb2JqID0gKGxhc3RJbnN0YW5jZSA9IG9iailba2V5XTtcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKCFiaW5kRm5Ub1Njb3BlICYmIGlzRnVuY3Rpb24ob2JqKSkge1xyXG4gICAgcmV0dXJuIGJpbmQobGFzdEluc3RhbmNlLCBvYmopO1xyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuIHRoZSBET00gc2libGluZ3MgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3Qgbm9kZSBpbiB0aGUgZ2l2ZW4gYXJyYXkuXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IGxpa2Ugb2JqZWN0XHJcbiAqIEByZXR1cm5zIHtqcUxpdGV9IGpxTGl0ZSBjb2xsZWN0aW9uIGNvbnRhaW5pbmcgdGhlIG5vZGVzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRCbG9ja05vZGVzKG5vZGVzKSB7XHJcbiAgLy8gVE9ETyhwZXJmKToganVzdCBjaGVjayBpZiBhbGwgaXRlbXMgaW4gYG5vZGVzYCBhcmUgc2libGluZ3MgYW5kIGlmIHRoZXkgYXJlIHJldHVybiB0aGUgb3JpZ2luYWxcclxuICAvLyAgICAgICAgICAgICBjb2xsZWN0aW9uLCBvdGhlcndpc2UgdXBkYXRlIHRoZSBvcmlnaW5hbCBjb2xsZWN0aW9uLlxyXG4gIHZhciBub2RlID0gbm9kZXNbMF07XHJcbiAgdmFyIGVuZE5vZGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcclxuICB2YXIgYmxvY2tOb2RlcyA9IFtub2RlXTtcclxuXHJcbiAgZG8ge1xyXG4gICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICBpZiAoIW5vZGUpIGJyZWFrO1xyXG4gICAgYmxvY2tOb2Rlcy5wdXNoKG5vZGUpO1xyXG4gIH0gd2hpbGUgKG5vZGUgIT09IGVuZE5vZGUpO1xyXG5cclxuICByZXR1cm4ganFMaXRlKGJsb2NrTm9kZXMpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IHdpdGhvdXQgYSBwcm90b3R5cGUuIFRoaXMgb2JqZWN0IGlzIHVzZWZ1bCBmb3IgbG9va3VwIHdpdGhvdXQgaGF2aW5nIHRvXHJcbiAqIGd1YXJkIGFnYWluc3QgcHJvdG90eXBpY2FsbHkgaW5oZXJpdGVkIHByb3BlcnRpZXMgdmlhIGhhc093blByb3BlcnR5LlxyXG4gKlxyXG4gKiBSZWxhdGVkIG1pY3JvLWJlbmNobWFya3M6XHJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vb2JqZWN0LWNyZWF0ZTJcclxuICogLSBodHRwOi8vanNwZXJmLmNvbS9wcm90by1tYXAtbG9va3VwLzJcclxuICogLSBodHRwOi8vanNwZXJmLmNvbS9mb3ItaW4tdnMtb2JqZWN0LWtleXMyXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNYXAoKSB7XHJcbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbn1cclxuXHJcbnZhciBOT0RFX1RZUEVfRUxFTUVOVCA9IDE7XHJcbnZhciBOT0RFX1RZUEVfVEVYVCA9IDM7XHJcbnZhciBOT0RFX1RZUEVfQ09NTUVOVCA9IDg7XHJcbnZhciBOT0RFX1RZUEVfRE9DVU1FTlQgPSA5O1xyXG52YXIgTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UID0gMTE7XHJcblxyXG4vKipcclxuICogQG5nZG9jIHR5cGVcclxuICogQG5hbWUgYW5ndWxhci5Nb2R1bGVcclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogSW50ZXJmYWNlIGZvciBjb25maWd1cmluZyBhbmd1bGFyIHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfS5cclxuICovXHJcblxyXG5mdW5jdGlvbiBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpIHtcclxuXHJcbiAgdmFyICRpbmplY3Rvck1pbkVyciA9IG1pbkVycignJGluamVjdG9yJyk7XHJcbiAgdmFyIG5nTWluRXJyID0gbWluRXJyKCduZycpO1xyXG5cclxuICBmdW5jdGlvbiBlbnN1cmUob2JqLCBuYW1lLCBmYWN0b3J5KSB7XHJcbiAgICByZXR1cm4gb2JqW25hbWVdIHx8IChvYmpbbmFtZV0gPSBmYWN0b3J5KCkpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGFuZ3VsYXIgPSBlbnN1cmUod2luZG93LCAnYW5ndWxhcicsIE9iamVjdCk7XHJcblxyXG4gIC8vIFdlIG5lZWQgdG8gZXhwb3NlIGBhbmd1bGFyLiQkbWluRXJyYCB0byBtb2R1bGVzIHN1Y2ggYXMgYG5nUmVzb3VyY2VgIHRoYXQgcmVmZXJlbmNlIGl0IGR1cmluZyBib290c3RyYXBcclxuICBhbmd1bGFyLiQkbWluRXJyID0gYW5ndWxhci4kJG1pbkVyciB8fCBtaW5FcnI7XHJcblxyXG4gIHJldHVybiBlbnN1cmUoYW5ndWxhciwgJ21vZHVsZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgLyoqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgYW5ndWxhci5Nb2R1bGU+fSAqL1xyXG4gICAgdmFyIG1vZHVsZXMgPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBmdW5jdGlvblxyXG4gICAgICogQG5hbWUgYW5ndWxhci5tb2R1bGVcclxuICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIFRoZSBgYW5ndWxhci5tb2R1bGVgIGlzIGEgZ2xvYmFsIHBsYWNlIGZvciBjcmVhdGluZywgcmVnaXN0ZXJpbmcgYW5kIHJldHJpZXZpbmcgQW5ndWxhclxyXG4gICAgICogbW9kdWxlcy5cclxuICAgICAqIEFsbCBtb2R1bGVzIChhbmd1bGFyIGNvcmUgb3IgM3JkIHBhcnR5KSB0aGF0IHNob3VsZCBiZSBhdmFpbGFibGUgdG8gYW4gYXBwbGljYXRpb24gbXVzdCBiZVxyXG4gICAgICogcmVnaXN0ZXJlZCB1c2luZyB0aGlzIG1lY2hhbmlzbS5cclxuICAgICAqXHJcbiAgICAgKiBXaGVuIHBhc3NlZCB0d28gb3IgbW9yZSBhcmd1bWVudHMsIGEgbmV3IG1vZHVsZSBpcyBjcmVhdGVkLiAgSWYgcGFzc2VkIG9ubHkgb25lIGFyZ3VtZW50LCBhblxyXG4gICAgICogZXhpc3RpbmcgbW9kdWxlICh0aGUgbmFtZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBtb2R1bGVgKSBpcyByZXRyaWV2ZWQuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMgTW9kdWxlXHJcbiAgICAgKlxyXG4gICAgICogQSBtb2R1bGUgaXMgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzLCBkaXJlY3RpdmVzLCBjb250cm9sbGVycywgZmlsdGVycywgYW5kIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24uXHJcbiAgICAgKiBgYW5ndWxhci5tb2R1bGVgIGlzIHVzZWQgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZVxyXG4gICAgICogdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ215TW9kdWxlJywgW10pO1xyXG4gICAgICpcclxuICAgICAqIC8vIHJlZ2lzdGVyIGEgbmV3IHNlcnZpY2VcclxuICAgICAqIG15TW9kdWxlLnZhbHVlKCdhcHBOYW1lJywgJ015Q29vbEFwcCcpO1xyXG4gICAgICpcclxuICAgICAqIC8vIGNvbmZpZ3VyZSBleGlzdGluZyBzZXJ2aWNlcyBpbnNpZGUgaW5pdGlhbGl6YXRpb24gYmxvY2tzLlxyXG4gICAgICogbXlNb2R1bGUuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgICogICAvLyBDb25maWd1cmUgZXhpc3RpbmcgcHJvdmlkZXJzXHJcbiAgICAgKiAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcclxuICAgICAqIH1dKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZW4geW91IGNhbiBjcmVhdGUgYW4gaW5qZWN0b3IgYW5kIGxvYWQgeW91ciBtb2R1bGVzIGxpa2UgdGhpczpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogdmFyIGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcihbJ25nJywgJ215TW9kdWxlJ10pXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBIb3dldmVyIGl0J3MgbW9yZSBsaWtlbHkgdGhhdCB5b3UnbGwganVzdCB1c2VcclxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9IG9yXHJcbiAgICAgKiB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IHRvIHNpbXBsaWZ5IHRoaXMgcHJvY2VzcyBmb3IgeW91LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgbW9kdWxlIHRvIGNyZWF0ZSBvciByZXRyaWV2ZS5cclxuICAgICAqIEBwYXJhbSB7IUFycmF5LjxzdHJpbmc+PX0gcmVxdWlyZXMgSWYgc3BlY2lmaWVkIHRoZW4gbmV3IG1vZHVsZSBpcyBiZWluZyBjcmVhdGVkLiBJZlxyXG4gICAgICogICAgICAgIHVuc3BlY2lmaWVkIHRoZW4gdGhlIG1vZHVsZSBpcyBiZWluZyByZXRyaWV2ZWQgZm9yIGZ1cnRoZXIgY29uZmlndXJhdGlvbi5cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb249fSBjb25maWdGbiBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIGZvciB0aGUgbW9kdWxlLiBTYW1lIGFzXHJcbiAgICAgKiAgICAgICAge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZyBNb2R1bGUjY29uZmlnKCl9LlxyXG4gICAgICogQHJldHVybnMge21vZHVsZX0gbmV3IG1vZHVsZSB3aXRoIHRoZSB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9IGFwaS5cclxuICAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1vZHVsZShuYW1lLCByZXF1aXJlcywgY29uZmlnRm4pIHtcclxuICAgICAgdmFyIGFzc2VydE5vdEhhc093blByb3BlcnR5ID0gZnVuY3Rpb24obmFtZSwgY29udGV4dCkge1xyXG4gICAgICAgIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZ01pbkVycignYmFkbmFtZScsICdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdtb2R1bGUnKTtcclxuICAgICAgaWYgKHJlcXVpcmVzICYmIG1vZHVsZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICBtb2R1bGVzW25hbWVdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZW5zdXJlKG1vZHVsZXMsIG5hbWUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghcmVxdWlyZXMpIHtcclxuICAgICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignbm9tb2QnLCBcIk1vZHVsZSAnezB9JyBpcyBub3QgYXZhaWxhYmxlISBZb3UgZWl0aGVyIG1pc3NwZWxsZWQgXCIgK1xyXG4gICAgICAgICAgICAgXCJ0aGUgbW9kdWxlIG5hbWUgb3IgZm9yZ290IHRvIGxvYWQgaXQuIElmIHJlZ2lzdGVyaW5nIGEgbW9kdWxlIGVuc3VyZSB0aGF0IHlvdSBcIiArXHJcbiAgICAgICAgICAgICBcInNwZWNpZnkgdGhlIGRlcGVuZGVuY2llcyBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlwiLCBuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxBcnJheS48Kj4+fSAqL1xyXG4gICAgICAgIHZhciBpbnZva2VRdWV1ZSA9IFtdO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48RnVuY3Rpb24+fSAqL1xyXG4gICAgICAgIHZhciBjb25maWdCbG9ja3MgPSBbXTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEZ1bmN0aW9uPn0gKi9cclxuICAgICAgICB2YXIgcnVuQmxvY2tzID0gW107XHJcblxyXG4gICAgICAgIHZhciBjb25maWcgPSBpbnZva2VMYXRlcignJGluamVjdG9yJywgJ2ludm9rZScsICdwdXNoJywgY29uZmlnQmxvY2tzKTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHthbmd1bGFyLk1vZHVsZX0gKi9cclxuICAgICAgICB2YXIgbW9kdWxlSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgICAvLyBQcml2YXRlIHN0YXRlXHJcbiAgICAgICAgICBfaW52b2tlUXVldWU6IGludm9rZVF1ZXVlLFxyXG4gICAgICAgICAgX2NvbmZpZ0Jsb2NrczogY29uZmlnQmxvY2tzLFxyXG4gICAgICAgICAgX3J1bkJsb2NrczogcnVuQmxvY2tzLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNyZXF1aXJlc1xyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogSG9sZHMgdGhlIGxpc3Qgb2YgbW9kdWxlcyB3aGljaCB0aGUgaW5qZWN0b3Igd2lsbCBsb2FkIGJlZm9yZSB0aGUgY3VycmVudCBtb2R1bGUgaXNcclxuICAgICAgICAgICAqIGxvYWRlZC5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgcmVxdWlyZXM6IHJlcXVpcmVzLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNuYW1lXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBOYW1lIG9mIHRoZSBtb2R1bGUuXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcblxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcHJvdmlkZXJcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJUeXBlIENvbnN0cnVjdGlvbiBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZVxyXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciAkcHJvdmlkZS5wcm92aWRlcigpfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgcHJvdmlkZXI6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICdwcm92aWRlcicpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZmFjdG9yeVxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm92aWRlckZ1bmN0aW9uIEZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgdGhlIHNlcnZpY2UuXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGZhY3Rvcnk6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICdmYWN0b3J5JyksXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNzZXJ2aWNlXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbnN0cnVjdG9yIEEgY29uc3RydWN0b3IgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGluc3RhbnRpYXRlZC5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2UgJHByb3ZpZGUuc2VydmljZSgpfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgc2VydmljZTogaW52b2tlTGF0ZXIoJyRwcm92aWRlJywgJ3NlcnZpY2UnKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3ZhbHVlXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcclxuICAgICAgICAgICAqIEBwYXJhbSB7Kn0gb2JqZWN0IFNlcnZpY2UgaW5zdGFuY2Ugb2JqZWN0LlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgJHByb3ZpZGUudmFsdWUoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIHZhbHVlOiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAndmFsdWUnKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbnN0YW50XHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBjb25zdGFudCBuYW1lXHJcbiAgICAgICAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBDb25zdGFudCB2YWx1ZS5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogQmVjYXVzZSB0aGUgY29uc3RhbnQgYXJlIGZpeGVkLCB0aGV5IGdldCBhcHBsaWVkIGJlZm9yZSBvdGhlciBwcm92aWRlIG1ldGhvZHMuXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjY29uc3RhbnQgJHByb3ZpZGUuY29uc3RhbnQoKX0uXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIGNvbnN0YW50OiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAnY29uc3RhbnQnLCAndW5zaGlmdCcpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjYW5pbWF0aW9uXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBhbmltYXRpb24gbmFtZVxyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYW5pbWF0aW9uRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgYW5cclxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogKipOT1RFKio6IGFuaW1hdGlvbnMgdGFrZSBlZmZlY3Qgb25seSBpZiB0aGUgKipuZ0FuaW1hdGUqKiBtb2R1bGUgaXMgbG9hZGVkLlxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKiBEZWZpbmVzIGFuIGFuaW1hdGlvbiBob29rIHRoYXQgY2FuIGJlIGxhdGVyIHVzZWQgd2l0aFxyXG4gICAgICAgICAgICoge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZSAkYW5pbWF0ZX0gc2VydmljZSBhbmQgZGlyZWN0aXZlcyB0aGF0IHVzZSB0aGlzIHNlcnZpY2UuXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogYGBganNcclxuICAgICAgICAgICAqIG1vZHVsZS5hbmltYXRpb24oJy5hbmltYXRpb24tbmFtZScsIGZ1bmN0aW9uKCRpbmplY3QxLCAkaW5qZWN0Mikge1xyXG4gICAgICAgICAgICogICByZXR1cm4ge1xyXG4gICAgICAgICAgICogICAgIGV2ZW50TmFtZSA6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHtcclxuICAgICAgICAgICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICogICAgICAgLy9vbmNlIGNvbXBsZXRlLCB0aGVuIHJ1biBkb25lKClcclxuICAgICAgICAgICAqICAgICAgIHJldHVybiBmdW5jdGlvbiBjYW5jZWxsYXRpb25GdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgKiAgICAgICAgIC8vY29kZSB0byBjYW5jZWwgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICogICAgICAgfVxyXG4gICAgICAgICAgICogICAgIH1cclxuICAgICAgICAgICAqICAgfVxyXG4gICAgICAgICAgICogfSlcclxuICAgICAgICAgICAqIGBgYFxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlciAkYW5pbWF0ZVByb3ZpZGVyLnJlZ2lzdGVyKCl9IGFuZFxyXG4gICAgICAgICAgICoge0BsaW5rIG5nQW5pbWF0ZSBuZ0FuaW1hdGUgbW9kdWxlfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgYW5pbWF0aW9uOiBpbnZva2VMYXRlcignJGFuaW1hdGVQcm92aWRlcicsICdyZWdpc3RlcicpLFxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZmlsdGVyXHJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBGaWx0ZXIgbmFtZS5cclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbHRlckZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIGZpbHRlci5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogU2VlIHtAbGluayBuZy4kZmlsdGVyUHJvdmlkZXIjcmVnaXN0ZXIgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCl9LlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBmaWx0ZXI6IGludm9rZUxhdGVyKCckZmlsdGVyUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbnRyb2xsZXJcclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBDb250cm9sbGVyIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgY29udHJvbGxlcnMgd2hlcmUgdGhlXHJcbiAgICAgICAgICAgKiAgICBrZXlzIGFyZSB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBjb25zdHJ1Y3RvcnMuXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIjcmVnaXN0ZXIgJGNvbnRyb2xsZXJQcm92aWRlci5yZWdpc3RlcigpfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgY29udHJvbGxlcjogaW52b2tlTGF0ZXIoJyRjb250cm9sbGVyUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2RpcmVjdGl2ZVxyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIERpcmVjdGl2ZSBuYW1lLCBvciBhbiBvYmplY3QgbWFwIG9mIGRpcmVjdGl2ZXMgd2hlcmUgdGhlXHJcbiAgICAgICAgICAgKiAgICBrZXlzIGFyZSB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmYWN0b3JpZXMuXHJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXJlY3RpdmVGYWN0b3J5IEZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZlxyXG4gICAgICAgICAgICogZGlyZWN0aXZlcy5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogU2VlIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSAkY29tcGlsZVByb3ZpZGVyLmRpcmVjdGl2ZSgpfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgZGlyZWN0aXZlOiBpbnZva2VMYXRlcignJGNvbXBpbGVQcm92aWRlcicsICdkaXJlY3RpdmUnKSxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ1xyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZmlnRm4gRXhlY3V0ZSB0aGlzIGZ1bmN0aW9uIG9uIG1vZHVsZSBsb2FkLiBVc2VmdWwgZm9yIHNlcnZpY2VcclxuICAgICAgICAgICAqICAgIGNvbmZpZ3VyYXRpb24uXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byByZWdpc3RlciB3b3JrIHdoaWNoIG5lZWRzIHRvIGJlIHBlcmZvcm1lZCBvbiBtb2R1bGUgbG9hZGluZy5cclxuICAgICAgICAgICAqIEZvciBtb3JlIGFib3V0IGhvdyB0byBjb25maWd1cmUgc2VydmljZXMsIHNlZVxyXG4gICAgICAgICAgICoge0BsaW5rIHByb3ZpZGVycyNwcm92aWRlci1yZWNpcGUgUHJvdmlkZXIgUmVjaXBlfS5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNydW5cclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcclxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluaXRpYWxpemF0aW9uRm4gRXhlY3V0ZSB0aGlzIGZ1bmN0aW9uIGFmdGVyIGluamVjdG9yIGNyZWF0aW9uLlxyXG4gICAgICAgICAgICogICAgVXNlZnVsIGZvciBhcHBsaWNhdGlvbiBpbml0aWFsaXphdGlvbi5cclxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHJlZ2lzdGVyIHdvcmsgd2hpY2ggc2hvdWxkIGJlIHBlcmZvcm1lZCB3aGVuIHRoZSBpbmplY3RvciBpcyBkb25lXHJcbiAgICAgICAgICAgKiBsb2FkaW5nIGFsbCBtb2R1bGVzLlxyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICBydW46IGZ1bmN0aW9uKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKGJsb2NrKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGNvbmZpZ0ZuKSB7XHJcbiAgICAgICAgICBjb25maWcoY29uZmlnRm4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvdmlkZXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmc9fSBpbnNlcnRNZXRob2RcclxuICAgICAgICAgKiBAcmV0dXJucyB7YW5ndWxhci5Nb2R1bGV9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXIocHJvdmlkZXIsIG1ldGhvZCwgaW5zZXJ0TWV0aG9kLCBxdWV1ZSkge1xyXG4gICAgICAgICAgaWYgKCFxdWV1ZSkgcXVldWUgPSBpbnZva2VRdWV1ZTtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcXVldWVbaW5zZXJ0TWV0aG9kIHx8ICdwdXNoJ10oW3Byb3ZpZGVyLCBtZXRob2QsIGFyZ3VtZW50c10pO1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlSW5zdGFuY2U7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuLyogZ2xvYmFsOiB0b0RlYnVnU3RyaW5nOiB0cnVlICovXHJcblxyXG5mdW5jdGlvbiBzZXJpYWxpemVPYmplY3Qob2JqKSB7XHJcbiAgdmFyIHNlZW4gPSBbXTtcclxuXHJcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgZnVuY3Rpb24oa2V5LCB2YWwpIHtcclxuICAgIHZhbCA9IHRvSnNvblJlcGxhY2VyKGtleSwgdmFsKTtcclxuICAgIGlmIChpc09iamVjdCh2YWwpKSB7XHJcblxyXG4gICAgICBpZiAoc2Vlbi5pbmRleE9mKHZhbCkgPj0gMCkgcmV0dXJuICc8PGFscmVhZHkgc2Vlbj4+JztcclxuXHJcbiAgICAgIHNlZW4ucHVzaCh2YWwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbDtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9EZWJ1Z1N0cmluZyhvYmopIHtcclxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgcmV0dXJuIG9iai50b1N0cmluZygpLnJlcGxhY2UoLyBcXHtbXFxzXFxTXSokLywgJycpO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHJldHVybiAndW5kZWZpbmVkJztcclxuICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogIT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gc2VyaWFsaXplT2JqZWN0KG9iaik7XHJcbiAgfVxyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbi8qIGdsb2JhbCBhbmd1bGFyTW9kdWxlOiB0cnVlLFxyXG4gIHZlcnNpb246IHRydWUsXHJcblxyXG4gICRMb2NhbGVQcm92aWRlcixcclxuICAkQ29tcGlsZVByb3ZpZGVyLFxyXG5cclxuICBodG1sQW5jaG9yRGlyZWN0aXZlLFxyXG4gIGlucHV0RGlyZWN0aXZlLFxyXG4gIGlucHV0RGlyZWN0aXZlLFxyXG4gIGZvcm1EaXJlY3RpdmUsXHJcbiAgc2NyaXB0RGlyZWN0aXZlLFxyXG4gIHNlbGVjdERpcmVjdGl2ZSxcclxuICBzdHlsZURpcmVjdGl2ZSxcclxuICBvcHRpb25EaXJlY3RpdmUsXHJcbiAgbmdCaW5kRGlyZWN0aXZlLFxyXG4gIG5nQmluZEh0bWxEaXJlY3RpdmUsXHJcbiAgbmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUsXHJcbiAgbmdDbGFzc0RpcmVjdGl2ZSxcclxuICBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcclxuICBuZ0NsYXNzT2RkRGlyZWN0aXZlLFxyXG4gIG5nQ3NwRGlyZWN0aXZlLFxyXG4gIG5nQ2xvYWtEaXJlY3RpdmUsXHJcbiAgbmdDb250cm9sbGVyRGlyZWN0aXZlLFxyXG4gIG5nRm9ybURpcmVjdGl2ZSxcclxuICBuZ0hpZGVEaXJlY3RpdmUsXHJcbiAgbmdJZkRpcmVjdGl2ZSxcclxuICBuZ0luY2x1ZGVEaXJlY3RpdmUsXHJcbiAgbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmUsXHJcbiAgbmdJbml0RGlyZWN0aXZlLFxyXG4gIG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXHJcbiAgbmdQbHVyYWxpemVEaXJlY3RpdmUsXHJcbiAgbmdSZXBlYXREaXJlY3RpdmUsXHJcbiAgbmdTaG93RGlyZWN0aXZlLFxyXG4gIG5nU3R5bGVEaXJlY3RpdmUsXHJcbiAgbmdTd2l0Y2hEaXJlY3RpdmUsXHJcbiAgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlLFxyXG4gIG5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxcclxuICBuZ09wdGlvbnNEaXJlY3RpdmUsXHJcbiAgbmdUcmFuc2NsdWRlRGlyZWN0aXZlLFxyXG4gIG5nTW9kZWxEaXJlY3RpdmUsXHJcbiAgbmdMaXN0RGlyZWN0aXZlLFxyXG4gIG5nQ2hhbmdlRGlyZWN0aXZlLFxyXG4gIHBhdHRlcm5EaXJlY3RpdmUsXHJcbiAgcGF0dGVybkRpcmVjdGl2ZSxcclxuICByZXF1aXJlZERpcmVjdGl2ZSxcclxuICByZXF1aXJlZERpcmVjdGl2ZSxcclxuICBtaW5sZW5ndGhEaXJlY3RpdmUsXHJcbiAgbWlubGVuZ3RoRGlyZWN0aXZlLFxyXG4gIG1heGxlbmd0aERpcmVjdGl2ZSxcclxuICBtYXhsZW5ndGhEaXJlY3RpdmUsXHJcbiAgbmdWYWx1ZURpcmVjdGl2ZSxcclxuICBuZ01vZGVsT3B0aW9uc0RpcmVjdGl2ZSxcclxuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyxcclxuICBuZ0V2ZW50RGlyZWN0aXZlcyxcclxuXHJcbiAgJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxyXG4gICRBbmltYXRlUHJvdmlkZXIsXHJcbiAgJEJyb3dzZXJQcm92aWRlcixcclxuICAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIsXHJcbiAgJENvbnRyb2xsZXJQcm92aWRlcixcclxuICAkRG9jdW1lbnRQcm92aWRlcixcclxuICAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLFxyXG4gICRGaWx0ZXJQcm92aWRlcixcclxuICAkSW50ZXJwb2xhdGVQcm92aWRlcixcclxuICAkSW50ZXJ2YWxQcm92aWRlcixcclxuICAkSHR0cFByb3ZpZGVyLFxyXG4gICRIdHRwQmFja2VuZFByb3ZpZGVyLFxyXG4gICRMb2NhdGlvblByb3ZpZGVyLFxyXG4gICRMb2dQcm92aWRlcixcclxuICAkUGFyc2VQcm92aWRlcixcclxuICAkUm9vdFNjb3BlUHJvdmlkZXIsXHJcbiAgJFFQcm92aWRlcixcclxuICAkJFFQcm92aWRlcixcclxuICAkJFNhbml0aXplVXJpUHJvdmlkZXIsXHJcbiAgJFNjZVByb3ZpZGVyLFxyXG4gICRTY2VEZWxlZ2F0ZVByb3ZpZGVyLFxyXG4gICRTbmlmZmVyUHJvdmlkZXIsXHJcbiAgJFRlbXBsYXRlQ2FjaGVQcm92aWRlcixcclxuICAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsXHJcbiAgJCRUZXN0YWJpbGl0eVByb3ZpZGVyLFxyXG4gICRUaW1lb3V0UHJvdmlkZXIsXHJcbiAgJCRSQUZQcm92aWRlcixcclxuICAkJEFzeW5jQ2FsbGJhY2tQcm92aWRlcixcclxuICAkV2luZG93UHJvdmlkZXIsXHJcbiAgJCRqcUxpdGVQcm92aWRlclxyXG4qL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgb2JqZWN0XHJcbiAqIEBuYW1lIGFuZ3VsYXIudmVyc2lvblxyXG4gKiBAbW9kdWxlIG5nXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBbiBvYmplY3QgdGhhdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCBBbmd1bGFySlMgdmVyc2lvbi4gVGhpcyBvYmplY3QgaGFzIHRoZVxyXG4gKiBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICpcclxuICogLSBgZnVsbGAg4oCTIGB7c3RyaW5nfWAg4oCTIEZ1bGwgdmVyc2lvbiBzdHJpbmcsIHN1Y2ggYXMgXCIwLjkuMThcIi5cclxuICogLSBgbWFqb3JgIOKAkyBge251bWJlcn1gIOKAkyBNYWpvciB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjBcIi5cclxuICogLSBgbWlub3JgIOKAkyBge251bWJlcn1gIOKAkyBNaW5vciB2ZXJzaW9uIG51bWJlciwgc3VjaCBhcyBcIjlcIi5cclxuICogLSBgZG90YCDigJMgYHtudW1iZXJ9YCDigJMgRG90IHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiMThcIi5cclxuICogLSBgY29kZU5hbWVgIOKAkyBge3N0cmluZ31gIOKAkyBDb2RlIG5hbWUgb2YgdGhlIHJlbGVhc2UsIHN1Y2ggYXMgXCJqaWdnbGluZy1hcm1mYXRcIi5cclxuICovXHJcbnZhciB2ZXJzaW9uID0ge1xyXG4gIGZ1bGw6ICcxLjMuMTQnLCAgICAvLyBhbGwgb2YgdGhlc2UgcGxhY2Vob2xkZXIgc3RyaW5ncyB3aWxsIGJlIHJlcGxhY2VkIGJ5IGdydW50J3NcclxuICBtYWpvcjogMSwgICAgLy8gcGFja2FnZSB0YXNrXHJcbiAgbWlub3I6IDMsXHJcbiAgZG90OiAxNCxcclxuICBjb2RlTmFtZTogJ2luc3RhbnRhbmVvdXMtYnJvd3NlcmlmaWNhdGlvbidcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBwdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcikge1xyXG4gIGV4dGVuZChhbmd1bGFyLCB7XHJcbiAgICAnYm9vdHN0cmFwJzogYm9vdHN0cmFwLFxyXG4gICAgJ2NvcHknOiBjb3B5LFxyXG4gICAgJ2V4dGVuZCc6IGV4dGVuZCxcclxuICAgICdlcXVhbHMnOiBlcXVhbHMsXHJcbiAgICAnZWxlbWVudCc6IGpxTGl0ZSxcclxuICAgICdmb3JFYWNoJzogZm9yRWFjaCxcclxuICAgICdpbmplY3Rvcic6IGNyZWF0ZUluamVjdG9yLFxyXG4gICAgJ25vb3AnOiBub29wLFxyXG4gICAgJ2JpbmQnOiBiaW5kLFxyXG4gICAgJ3RvSnNvbic6IHRvSnNvbixcclxuICAgICdmcm9tSnNvbic6IGZyb21Kc29uLFxyXG4gICAgJ2lkZW50aXR5JzogaWRlbnRpdHksXHJcbiAgICAnaXNVbmRlZmluZWQnOiBpc1VuZGVmaW5lZCxcclxuICAgICdpc0RlZmluZWQnOiBpc0RlZmluZWQsXHJcbiAgICAnaXNTdHJpbmcnOiBpc1N0cmluZyxcclxuICAgICdpc0Z1bmN0aW9uJzogaXNGdW5jdGlvbixcclxuICAgICdpc09iamVjdCc6IGlzT2JqZWN0LFxyXG4gICAgJ2lzTnVtYmVyJzogaXNOdW1iZXIsXHJcbiAgICAnaXNFbGVtZW50JzogaXNFbGVtZW50LFxyXG4gICAgJ2lzQXJyYXknOiBpc0FycmF5LFxyXG4gICAgJ3ZlcnNpb24nOiB2ZXJzaW9uLFxyXG4gICAgJ2lzRGF0ZSc6IGlzRGF0ZSxcclxuICAgICdsb3dlcmNhc2UnOiBsb3dlcmNhc2UsXHJcbiAgICAndXBwZXJjYXNlJzogdXBwZXJjYXNlLFxyXG4gICAgJ2NhbGxiYWNrcyc6IHtjb3VudGVyOiAwfSxcclxuICAgICdnZXRUZXN0YWJpbGl0eSc6IGdldFRlc3RhYmlsaXR5LFxyXG4gICAgJyQkbWluRXJyJzogbWluRXJyLFxyXG4gICAgJyQkY3NwJzogY3NwLFxyXG4gICAgJ3JlbG9hZFdpdGhEZWJ1Z0luZm8nOiByZWxvYWRXaXRoRGVidWdJbmZvXHJcbiAgfSk7XHJcblxyXG4gIGFuZ3VsYXJNb2R1bGUgPSBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpO1xyXG4gIHRyeSB7XHJcbiAgICBhbmd1bGFyTW9kdWxlKCduZ0xvY2FsZScpO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGFuZ3VsYXJNb2R1bGUoJ25nTG9jYWxlJywgW10pLnByb3ZpZGVyKCckbG9jYWxlJywgJExvY2FsZVByb3ZpZGVyKTtcclxuICB9XHJcblxyXG4gIGFuZ3VsYXJNb2R1bGUoJ25nJywgWyduZ0xvY2FsZSddLCBbJyRwcm92aWRlJyxcclxuICAgIGZ1bmN0aW9uIG5nTW9kdWxlKCRwcm92aWRlKSB7XHJcbiAgICAgIC8vICQkc2FuaXRpemVVcmlQcm92aWRlciBuZWVkcyB0byBiZSBiZWZvcmUgJGNvbXBpbGVQcm92aWRlciBhcyBpdCBpcyB1c2VkIGJ5IGl0LlxyXG4gICAgICAkcHJvdmlkZS5wcm92aWRlcih7XHJcbiAgICAgICAgJCRzYW5pdGl6ZVVyaTogJCRTYW5pdGl6ZVVyaVByb3ZpZGVyXHJcbiAgICAgIH0pO1xyXG4gICAgICAkcHJvdmlkZS5wcm92aWRlcignJGNvbXBpbGUnLCAkQ29tcGlsZVByb3ZpZGVyKS5cclxuICAgICAgICBkaXJlY3RpdmUoe1xyXG4gICAgICAgICAgICBhOiBodG1sQW5jaG9yRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBpbnB1dDogaW5wdXREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIHRleHRhcmVhOiBpbnB1dERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgZm9ybTogZm9ybURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgc2NyaXB0OiBzY3JpcHREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0RGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBzdHlsZTogc3R5bGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG9wdGlvbjogb3B0aW9uRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0JpbmQ6IG5nQmluZERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdCaW5kSHRtbDogbmdCaW5kSHRtbERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdCaW5kVGVtcGxhdGU6IG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0NsYXNzOiBuZ0NsYXNzRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0NsYXNzRXZlbjogbmdDbGFzc0V2ZW5EaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQ2xhc3NPZGQ6IG5nQ2xhc3NPZGREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQ2xvYWs6IG5nQ2xvYWtEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nQ29udHJvbGxlcjogbmdDb250cm9sbGVyRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0Zvcm06IG5nRm9ybURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdIaWRlOiBuZ0hpZGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nSWY6IG5nSWZEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0luaXQ6IG5nSW5pdERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdOb25CaW5kYWJsZTogbmdOb25CaW5kYWJsZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdQbHVyYWxpemU6IG5nUGx1cmFsaXplRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1JlcGVhdDogbmdSZXBlYXREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nU2hvdzogbmdTaG93RGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1N0eWxlOiBuZ1N0eWxlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1N3aXRjaDogbmdTd2l0Y2hEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nU3dpdGNoV2hlbjogbmdTd2l0Y2hXaGVuRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1N3aXRjaERlZmF1bHQ6IG5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdPcHRpb25zOiBuZ09wdGlvbnNEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG5nVHJhbnNjbHVkZTogbmdUcmFuc2NsdWRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ01vZGVsOiBuZ01vZGVsRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ0xpc3Q6IG5nTGlzdERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdDaGFuZ2U6IG5nQ2hhbmdlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ1BhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdSZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXHJcbiAgICAgICAgICAgIG1pbmxlbmd0aDogbWlubGVuZ3RoRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBuZ01pbmxlbmd0aDogbWlubGVuZ3RoRGlyZWN0aXZlLFxyXG4gICAgICAgICAgICBtYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdNYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdWYWx1ZTogbmdWYWx1ZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgbmdNb2RlbE9wdGlvbnM6IG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgZGlyZWN0aXZlKHtcclxuICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmVcclxuICAgICAgICB9KS5cclxuICAgICAgICBkaXJlY3RpdmUobmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXMpLlxyXG4gICAgICAgIGRpcmVjdGl2ZShuZ0V2ZW50RGlyZWN0aXZlcyk7XHJcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcclxuICAgICAgICAkYW5jaG9yU2Nyb2xsOiAkQW5jaG9yU2Nyb2xsUHJvdmlkZXIsXHJcbiAgICAgICAgJGFuaW1hdGU6ICRBbmltYXRlUHJvdmlkZXIsXHJcbiAgICAgICAgJGJyb3dzZXI6ICRCcm93c2VyUHJvdmlkZXIsXHJcbiAgICAgICAgJGNhY2hlRmFjdG9yeTogJENhY2hlRmFjdG9yeVByb3ZpZGVyLFxyXG4gICAgICAgICRjb250cm9sbGVyOiAkQ29udHJvbGxlclByb3ZpZGVyLFxyXG4gICAgICAgICRkb2N1bWVudDogJERvY3VtZW50UHJvdmlkZXIsXHJcbiAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXI6ICRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXHJcbiAgICAgICAgJGZpbHRlcjogJEZpbHRlclByb3ZpZGVyLFxyXG4gICAgICAgICRpbnRlcnBvbGF0ZTogJEludGVycG9sYXRlUHJvdmlkZXIsXHJcbiAgICAgICAgJGludGVydmFsOiAkSW50ZXJ2YWxQcm92aWRlcixcclxuICAgICAgICAkaHR0cDogJEh0dHBQcm92aWRlcixcclxuICAgICAgICAkaHR0cEJhY2tlbmQ6ICRIdHRwQmFja2VuZFByb3ZpZGVyLFxyXG4gICAgICAgICRsb2NhdGlvbjogJExvY2F0aW9uUHJvdmlkZXIsXHJcbiAgICAgICAgJGxvZzogJExvZ1Byb3ZpZGVyLFxyXG4gICAgICAgICRwYXJzZTogJFBhcnNlUHJvdmlkZXIsXHJcbiAgICAgICAgJHJvb3RTY29wZTogJFJvb3RTY29wZVByb3ZpZGVyLFxyXG4gICAgICAgICRxOiAkUVByb3ZpZGVyLFxyXG4gICAgICAgICQkcTogJCRRUHJvdmlkZXIsXHJcbiAgICAgICAgJHNjZTogJFNjZVByb3ZpZGVyLFxyXG4gICAgICAgICRzY2VEZWxlZ2F0ZTogJFNjZURlbGVnYXRlUHJvdmlkZXIsXHJcbiAgICAgICAgJHNuaWZmZXI6ICRTbmlmZmVyUHJvdmlkZXIsXHJcbiAgICAgICAgJHRlbXBsYXRlQ2FjaGU6ICRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIsXHJcbiAgICAgICAgJHRlbXBsYXRlUmVxdWVzdDogJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLFxyXG4gICAgICAgICQkdGVzdGFiaWxpdHk6ICQkVGVzdGFiaWxpdHlQcm92aWRlcixcclxuICAgICAgICAkdGltZW91dDogJFRpbWVvdXRQcm92aWRlcixcclxuICAgICAgICAkd2luZG93OiAkV2luZG93UHJvdmlkZXIsXHJcbiAgICAgICAgJCRyQUY6ICQkUkFGUHJvdmlkZXIsXHJcbiAgICAgICAgJCRhc3luY0NhbGxiYWNrOiAkJEFzeW5jQ2FsbGJhY2tQcm92aWRlcixcclxuICAgICAgICAkJGpxTGl0ZTogJCRqcUxpdGVQcm92aWRlclxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICBdKTtcclxufVxyXG5cclxuLyogZ2xvYmFsIEpRTGl0ZVByb3RvdHlwZTogdHJ1ZSxcclxuICBhZGRFdmVudExpc3RlbmVyRm46IHRydWUsXHJcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lckZuOiB0cnVlLFxyXG4gIEJPT0xFQU5fQVRUUjogdHJ1ZSxcclxuICBBTElBU0VEX0FUVFI6IHRydWUsXHJcbiovXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vSlFMaXRlXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG5hbWUgYW5ndWxhci5lbGVtZW50XHJcbiAqIEBtb2R1bGUgbmdcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFdyYXBzIGEgcmF3IERPTSBlbGVtZW50IG9yIEhUTUwgc3RyaW5nIGFzIGEgW2pRdWVyeV0oaHR0cDovL2pxdWVyeS5jb20pIGVsZW1lbnQuXHJcbiAqXHJcbiAqIElmIGpRdWVyeSBpcyBhdmFpbGFibGUsIGBhbmd1bGFyLmVsZW1lbnRgIGlzIGFuIGFsaWFzIGZvciB0aGVcclxuICogW2pRdWVyeV0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2pRdWVyeS8pIGZ1bmN0aW9uLiBJZiBqUXVlcnkgaXMgbm90IGF2YWlsYWJsZSwgYGFuZ3VsYXIuZWxlbWVudGBcclxuICogZGVsZWdhdGVzIHRvIEFuZ3VsYXIncyBidWlsdC1pbiBzdWJzZXQgb2YgalF1ZXJ5LCBjYWxsZWQgXCJqUXVlcnkgbGl0ZVwiIG9yIFwianFMaXRlLlwiXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzXCI+anFMaXRlIGlzIGEgdGlueSwgQVBJLWNvbXBhdGlibGUgc3Vic2V0IG9mIGpRdWVyeSB0aGF0IGFsbG93c1xyXG4gKiBBbmd1bGFyIHRvIG1hbmlwdWxhdGUgdGhlIERPTSBpbiBhIGNyb3NzLWJyb3dzZXIgY29tcGF0aWJsZSB3YXkuICoqanFMaXRlKiogaW1wbGVtZW50cyBvbmx5IHRoZSBtb3N0XHJcbiAqIGNvbW1vbmx5IG5lZWRlZCBmdW5jdGlvbmFsaXR5IHdpdGggdGhlIGdvYWwgb2YgaGF2aW5nIGEgdmVyeSBzbWFsbCBmb290cHJpbnQuPC9kaXY+XHJcbiAqXHJcbiAqIFRvIHVzZSBqUXVlcnksIHNpbXBseSBsb2FkIGl0IGJlZm9yZSBgRE9NQ29udGVudExvYWRlZGAgZXZlbnQgZmlyZWQuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydFwiPioqTm90ZToqKiBhbGwgZWxlbWVudCByZWZlcmVuY2VzIGluIEFuZ3VsYXIgYXJlIGFsd2F5cyB3cmFwcGVkIHdpdGggalF1ZXJ5IG9yXHJcbiAqIGpxTGl0ZTsgdGhleSBhcmUgbmV2ZXIgcmF3IERPTSByZWZlcmVuY2VzLjwvZGl2PlxyXG4gKlxyXG4gKiAjIyBBbmd1bGFyJ3MganFMaXRlXHJcbiAqIGpxTGl0ZSBwcm92aWRlcyBvbmx5IHRoZSBmb2xsb3dpbmcgalF1ZXJ5IG1ldGhvZHM6XHJcbiAqXHJcbiAqIC0gW2BhZGRDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FkZENsYXNzLylcclxuICogLSBbYGFmdGVyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYWZ0ZXIvKVxyXG4gKiAtIFtgYXBwZW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYXBwZW5kLylcclxuICogLSBbYGF0dHIoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hdHRyLykgLSBEb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9ucyBhcyBwYXJhbWV0ZXJzXHJcbiAqIC0gW2BiaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYmluZC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzLCBzZWxlY3RvcnMgb3IgZXZlbnREYXRhXHJcbiAqIC0gW2BjaGlsZHJlbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NoaWxkcmVuLykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xyXG4gKiAtIFtgY2xvbmUoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jbG9uZS8pXHJcbiAqIC0gW2Bjb250ZW50cygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NvbnRlbnRzLylcclxuICogLSBbYGNzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nzcy8pIC0gT25seSByZXRyaWV2ZXMgaW5saW5lLXN0eWxlcywgZG9lcyBub3QgY2FsbCBgZ2V0Q29tcHV0ZWRTdHlsZSgpYFxyXG4gKiAtIFtgZGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RhdGEvKVxyXG4gKiAtIFtgZGV0YWNoKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZGV0YWNoLylcclxuICogLSBbYGVtcHR5KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZW1wdHkvKVxyXG4gKiAtIFtgZXEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lcS8pXHJcbiAqIC0gW2BmaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZmluZC8pIC0gTGltaXRlZCB0byBsb29rdXBzIGJ5IHRhZyBuYW1lXHJcbiAqIC0gW2BoYXNDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2hhc0NsYXNzLylcclxuICogLSBbYGh0bWwoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9odG1sLylcclxuICogLSBbYG5leHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9uZXh0LykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xyXG4gKiAtIFtgb24oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vbi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzLCBzZWxlY3RvcnMgb3IgZXZlbnREYXRhXHJcbiAqIC0gW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcyBvciBzZWxlY3RvcnNcclxuICogLSBbYG9uZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uZS8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzIG9yIHNlbGVjdG9yc1xyXG4gKiAtIFtgcGFyZW50KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcGFyZW50LykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xyXG4gKiAtIFtgcHJlcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ByZXBlbmQvKVxyXG4gKiAtIFtgcHJvcCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3Byb3AvKVxyXG4gKiAtIFtgcmVhZHkoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZWFkeS8pXHJcbiAqIC0gW2ByZW1vdmUoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmUvKVxyXG4gKiAtIFtgcmVtb3ZlQXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZUF0dHIvKVxyXG4gKiAtIFtgcmVtb3ZlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVDbGFzcy8pXHJcbiAqIC0gW2ByZW1vdmVEYXRhKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlRGF0YS8pXHJcbiAqIC0gW2ByZXBsYWNlV2l0aCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlcGxhY2VXaXRoLylcclxuICogLSBbYHRleHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90ZXh0LylcclxuICogLSBbYHRvZ2dsZUNsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdG9nZ2xlQ2xhc3MvKVxyXG4gKiAtIFtgdHJpZ2dlckhhbmRsZXIoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90cmlnZ2VySGFuZGxlci8pIC0gUGFzc2VzIGEgZHVtbXkgZXZlbnQgb2JqZWN0IHRvIGhhbmRsZXJzLlxyXG4gKiAtIFtgdW5iaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdW5iaW5kLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXNcclxuICogLSBbYHZhbCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ZhbC8pXHJcbiAqIC0gW2B3cmFwKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vd3JhcC8pXHJcbiAqXHJcbiAqICMjIGpRdWVyeS9qcUxpdGUgRXh0cmFzXHJcbiAqIEFuZ3VsYXIgYWxzbyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgZXZlbnRzIHRvIGJvdGggalF1ZXJ5IGFuZCBqcUxpdGU6XHJcbiAqXHJcbiAqICMjIyBFdmVudHNcclxuICogLSBgJGRlc3Ryb3lgIC0gQW5ndWxhckpTIGludGVyY2VwdHMgYWxsIGpxTGl0ZS9qUXVlcnkncyBET00gZGVzdHJ1Y3Rpb24gYXBpcyBhbmQgZmlyZXMgdGhpcyBldmVudFxyXG4gKiAgICBvbiBhbGwgRE9NIG5vZGVzIGJlaW5nIHJlbW92ZWQuICBUaGlzIGNhbiBiZSB1c2VkIHRvIGNsZWFuIHVwIGFueSAzcmQgcGFydHkgYmluZGluZ3MgdG8gdGhlIERPTVxyXG4gKiAgICBlbGVtZW50IGJlZm9yZSBpdCBpcyByZW1vdmVkLlxyXG4gKlxyXG4gKiAjIyMgTWV0aG9kc1xyXG4gKiAtIGBjb250cm9sbGVyKG5hbWUpYCAtIHJldHJpZXZlcyB0aGUgY29udHJvbGxlciBvZiB0aGUgY3VycmVudCBlbGVtZW50IG9yIGl0cyBwYXJlbnQuIEJ5IGRlZmF1bHRcclxuICogICByZXRyaWV2ZXMgY29udHJvbGxlciBhc3NvY2lhdGVkIHdpdGggdGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZS4gSWYgYG5hbWVgIGlzIHByb3ZpZGVkIGFzXHJcbiAqICAgY2FtZWxDYXNlIGRpcmVjdGl2ZSBuYW1lLCB0aGVuIHRoZSBjb250cm9sbGVyIGZvciB0aGlzIGRpcmVjdGl2ZSB3aWxsIGJlIHJldHJpZXZlZCAoZS5nLlxyXG4gKiAgIGAnbmdNb2RlbCdgKS5cclxuICogLSBgaW5qZWN0b3IoKWAgLSByZXRyaWV2ZXMgdGhlIGluamVjdG9yIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC5cclxuICogLSBgc2NvcGUoKWAgLSByZXRyaWV2ZXMgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfSBvZiB0aGUgY3VycmVudFxyXG4gKiAgIGVsZW1lbnQgb3IgaXRzIHBhcmVudC4gUmVxdWlyZXMge0BsaW5rIGd1aWRlL3Byb2R1Y3Rpb24jZGlzYWJsaW5nLWRlYnVnLWRhdGEgRGVidWcgRGF0YX0gdG9cclxuICogICBiZSBlbmFibGVkLlxyXG4gKiAtIGBpc29sYXRlU2NvcGUoKWAgLSByZXRyaWV2ZXMgYW4gaXNvbGF0ZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0gaWYgb25lIGlzIGF0dGFjaGVkIGRpcmVjdGx5IHRvIHRoZVxyXG4gKiAgIGN1cnJlbnQgZWxlbWVudC4gVGhpcyBnZXR0ZXIgc2hvdWxkIGJlIHVzZWQgb25seSBvbiBlbGVtZW50cyB0aGF0IGNvbnRhaW4gYSBkaXJlY3RpdmUgd2hpY2ggc3RhcnRzIGEgbmV3IGlzb2xhdGVcclxuICogICBzY29wZS4gQ2FsbGluZyBgc2NvcGUoKWAgb24gdGhpcyBlbGVtZW50IGFsd2F5cyByZXR1cm5zIHRoZSBvcmlnaW5hbCBub24taXNvbGF0ZSBzY29wZS5cclxuICogICBSZXF1aXJlcyB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEZWJ1ZyBEYXRhfSB0byBiZSBlbmFibGVkLlxyXG4gKiAtIGBpbmhlcml0ZWREYXRhKClgIC0gc2FtZSBhcyBgZGF0YSgpYCwgYnV0IHdhbGtzIHVwIHRoZSBET00gdW50aWwgYSB2YWx1ZSBpcyBmb3VuZCBvciB0aGUgdG9wXHJcbiAqICAgcGFyZW50IGVsZW1lbnQgaXMgcmVhY2hlZC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd8RE9NRWxlbWVudH0gZWxlbWVudCBIVE1MIHN0cmluZyBvciBET01FbGVtZW50IHRvIGJlIHdyYXBwZWQgaW50byBqUXVlcnkuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IGpRdWVyeSBvYmplY3QuXHJcbiAqL1xyXG5cclxuSlFMaXRlLmV4cGFuZG8gPSAnbmczMzknO1xyXG5cclxudmFyIGpxQ2FjaGUgPSBKUUxpdGUuY2FjaGUgPSB7fSxcclxuICAgIGpxSWQgPSAxLFxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lckZuID0gZnVuY3Rpb24oZWxlbWVudCwgdHlwZSwgZm4pIHtcclxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBmYWxzZSk7XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lckZuID0gZnVuY3Rpb24oZWxlbWVudCwgdHlwZSwgZm4pIHtcclxuICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuLypcclxuICogISEhIFRoaXMgaXMgYW4gdW5kb2N1bWVudGVkIFwicHJpdmF0ZVwiIGZ1bmN0aW9uICEhIVxyXG4gKi9cclxuSlFMaXRlLl9kYXRhID0gZnVuY3Rpb24obm9kZSkge1xyXG4gIC8valF1ZXJ5IGFsd2F5cyByZXR1cm5zIGFuIG9iamVjdCBvbiBjYWNoZSBtaXNzXHJcbiAgcmV0dXJuIHRoaXMuY2FjaGVbbm9kZVt0aGlzLmV4cGFuZG9dXSB8fCB7fTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGpxTmV4dElkKCkgeyByZXR1cm4gKytqcUlkOyB9XHJcblxyXG5cclxudmFyIFNQRUNJQUxfQ0hBUlNfUkVHRVhQID0gLyhbXFw6XFwtXFxfXSsoLikpL2c7XHJcbnZhciBNT1pfSEFDS19SRUdFWFAgPSAvXm1veihbQS1aXSkvO1xyXG52YXIgTU9VU0VfRVZFTlRfTUFQPSB7IG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIiwgbW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIn07XHJcbnZhciBqcUxpdGVNaW5FcnIgPSBtaW5FcnIoJ2pxTGl0ZScpO1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIHNuYWtlX2Nhc2UgdG8gY2FtZWxDYXNlLlxyXG4gKiBBbHNvIHRoZXJlIGlzIHNwZWNpYWwgY2FzZSBmb3IgTW96IHByZWZpeCBzdGFydGluZyB3aXRoIHVwcGVyIGNhc2UgbGV0dGVyLlxyXG4gKiBAcGFyYW0gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxyXG4gKi9cclxuZnVuY3Rpb24gY2FtZWxDYXNlKG5hbWUpIHtcclxuICByZXR1cm4gbmFtZS5cclxuICAgIHJlcGxhY2UoU1BFQ0lBTF9DSEFSU19SRUdFWFAsIGZ1bmN0aW9uKF8sIHNlcGFyYXRvciwgbGV0dGVyLCBvZmZzZXQpIHtcclxuICAgICAgcmV0dXJuIG9mZnNldCA/IGxldHRlci50b1VwcGVyQ2FzZSgpIDogbGV0dGVyO1xyXG4gICAgfSkuXHJcbiAgICByZXBsYWNlKE1PWl9IQUNLX1JFR0VYUCwgJ01veiQxJyk7XHJcbn1cclxuXHJcbnZhciBTSU5HTEVfVEFHX1JFR0VYUCA9IC9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLztcclxudmFyIEhUTUxfUkVHRVhQID0gLzx8JiM/XFx3KzsvO1xyXG52YXIgVEFHX05BTUVfUkVHRVhQID0gLzwoW1xcdzpdKykvO1xyXG52YXIgWEhUTUxfVEFHX1JFR0VYUCA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naTtcclxuXHJcbnZhciB3cmFwTWFwID0ge1xyXG4gICdvcHRpb24nOiBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXSxcclxuXHJcbiAgJ3RoZWFkJzogWzEsICc8dGFibGU+JywgJzwvdGFibGU+J10sXHJcbiAgJ2NvbCc6IFsyLCAnPHRhYmxlPjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxyXG4gICd0cic6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxyXG4gICd0ZCc6IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddLFxyXG4gICdfZGVmYXVsdCc6IFswLCBcIlwiLCBcIlwiXVxyXG59O1xyXG5cclxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xyXG53cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xyXG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcclxuXHJcblxyXG5mdW5jdGlvbiBqcUxpdGVJc1RleHROb2RlKGh0bWwpIHtcclxuICByZXR1cm4gIUhUTUxfUkVHRVhQLnRlc3QoaHRtbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUFjY2VwdHNEYXRhKG5vZGUpIHtcclxuICAvLyBUaGUgd2luZG93IG9iamVjdCBjYW4gYWNjZXB0IGRhdGEgYnV0IGhhcyBubyBub2RlVHlwZVxyXG4gIC8vIE90aGVyd2lzZSB3ZSBhcmUgb25seSBpbnRlcmVzdGVkIGluIGVsZW1lbnRzICgxKSBhbmQgZG9jdW1lbnRzICg5KVxyXG4gIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGU7XHJcbiAgcmV0dXJuIG5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCB8fCAhbm9kZVR5cGUgfHwgbm9kZVR5cGUgPT09IE5PREVfVFlQRV9ET0NVTUVOVDtcclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSB7XHJcbiAgdmFyIHRtcCwgdGFnLCB3cmFwLFxyXG4gICAgICBmcmFnbWVudCA9IGNvbnRleHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxyXG4gICAgICBub2RlcyA9IFtdLCBpO1xyXG5cclxuICBpZiAoanFMaXRlSXNUZXh0Tm9kZShodG1sKSkge1xyXG4gICAgLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXHJcbiAgICBub2Rlcy5wdXNoKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoaHRtbCkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcclxuICAgIHRtcCA9IHRtcCB8fCBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xyXG4gICAgdGFnID0gKFRBR19OQU1FX1JFR0VYUC5leGVjKGh0bWwpIHx8IFtcIlwiLCBcIlwiXSlbMV0udG9Mb3dlckNhc2UoKTtcclxuICAgIHdyYXAgPSB3cmFwTWFwW3RhZ10gfHwgd3JhcE1hcC5fZGVmYXVsdDtcclxuICAgIHRtcC5pbm5lckhUTUwgPSB3cmFwWzFdICsgaHRtbC5yZXBsYWNlKFhIVE1MX1RBR19SRUdFWFAsIFwiPCQxPjwvJDI+XCIpICsgd3JhcFsyXTtcclxuXHJcbiAgICAvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcclxuICAgIGkgPSB3cmFwWzBdO1xyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICB0bXAgPSB0bXAubGFzdENoaWxkO1xyXG4gICAgfVxyXG5cclxuICAgIG5vZGVzID0gY29uY2F0KG5vZGVzLCB0bXAuY2hpbGROb2Rlcyk7XHJcblxyXG4gICAgdG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcclxuICAgIHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XHJcbiAgZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIGZyYWdtZW50LmlubmVySFRNTCA9IFwiXCI7IC8vIENsZWFyIGlubmVyIEhUTUxcclxuICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbihub2RlKSB7XHJcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGZyYWdtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVQYXJzZUhUTUwoaHRtbCwgY29udGV4dCkge1xyXG4gIGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xyXG4gIHZhciBwYXJzZWQ7XHJcblxyXG4gIGlmICgocGFyc2VkID0gU0lOR0xFX1RBR19SRUdFWFAuZXhlYyhodG1sKSkpIHtcclxuICAgIHJldHVybiBbY29udGV4dC5jcmVhdGVFbGVtZW50KHBhcnNlZFsxXSldO1xyXG4gIH1cclxuXHJcbiAgaWYgKChwYXJzZWQgPSBqcUxpdGVCdWlsZEZyYWdtZW50KGh0bWwsIGNvbnRleHQpKSkge1xyXG4gICAgcmV0dXJuIHBhcnNlZC5jaGlsZE5vZGVzO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIFtdO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZnVuY3Rpb24gSlFMaXRlKGVsZW1lbnQpIHtcclxuICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEpRTGl0ZSkge1xyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICB2YXIgYXJnSXNTdHJpbmc7XHJcblxyXG4gIGlmIChpc1N0cmluZyhlbGVtZW50KSkge1xyXG4gICAgZWxlbWVudCA9IHRyaW0oZWxlbWVudCk7XHJcbiAgICBhcmdJc1N0cmluZyA9IHRydWU7XHJcbiAgfVxyXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBKUUxpdGUpKSB7XHJcbiAgICBpZiAoYXJnSXNTdHJpbmcgJiYgZWxlbWVudC5jaGFyQXQoMCkgIT0gJzwnKSB7XHJcbiAgICAgIHRocm93IGpxTGl0ZU1pbkVycignbm9zZWwnLCAnTG9va2luZyB1cCBlbGVtZW50cyB2aWEgc2VsZWN0b3JzIGlzIG5vdCBzdXBwb3J0ZWQgYnkganFMaXRlISBTZWU6IGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2FuZ3VsYXIuZWxlbWVudCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBKUUxpdGUoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBpZiAoYXJnSXNTdHJpbmcpIHtcclxuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGpxTGl0ZVBhcnNlSFRNTChlbGVtZW50KSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlQ2xvbmUoZWxlbWVudCkge1xyXG4gIHJldHVybiBlbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlRGVhbG9jKGVsZW1lbnQsIG9ubHlEZXNjZW5kYW50cykge1xyXG4gIGlmICghb25seURlc2NlbmRhbnRzKSBqcUxpdGVSZW1vdmVEYXRhKGVsZW1lbnQpO1xyXG5cclxuICBpZiAoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7XHJcbiAgICB2YXIgZGVzY2VuZGFudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gZGVzY2VuZGFudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIGpxTGl0ZVJlbW92ZURhdGEoZGVzY2VuZGFudHNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlT2ZmKGVsZW1lbnQsIHR5cGUsIGZuLCB1bnN1cHBvcnRlZCkge1xyXG4gIGlmIChpc0RlZmluZWQodW5zdXBwb3J0ZWQpKSB0aHJvdyBqcUxpdGVNaW5FcnIoJ29mZmFyZ3MnLCAnanFMaXRlI29mZigpIGRvZXMgbm90IHN1cHBvcnQgdGhlIGBzZWxlY3RvcmAgYXJndW1lbnQnKTtcclxuXHJcbiAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50KTtcclxuICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XHJcbiAgdmFyIGhhbmRsZSA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuaGFuZGxlO1xyXG5cclxuICBpZiAoIWhhbmRsZSkgcmV0dXJuOyAvL25vIGxpc3RlbmVycyByZWdpc3RlcmVkXHJcblxyXG4gIGlmICghdHlwZSkge1xyXG4gICAgZm9yICh0eXBlIGluIGV2ZW50cykge1xyXG4gICAgICBpZiAodHlwZSAhPT0gJyRkZXN0cm95Jykge1xyXG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihlbGVtZW50LCB0eXBlLCBoYW5kbGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGZvckVhY2godHlwZS5zcGxpdCgnICcpLCBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgIGlmIChpc0RlZmluZWQoZm4pKSB7XHJcbiAgICAgICAgdmFyIGxpc3RlbmVyRm5zID0gZXZlbnRzW3R5cGVdO1xyXG4gICAgICAgIGFycmF5UmVtb3ZlKGxpc3RlbmVyRm5zIHx8IFtdLCBmbik7XHJcbiAgICAgICAgaWYgKGxpc3RlbmVyRm5zICYmIGxpc3RlbmVyRm5zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihlbGVtZW50LCB0eXBlLCBoYW5kbGUpO1xyXG4gICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmVEYXRhKGVsZW1lbnQsIG5hbWUpIHtcclxuICB2YXIgZXhwYW5kb0lkID0gZWxlbWVudC5uZzMzOTtcclxuICB2YXIgZXhwYW5kb1N0b3JlID0gZXhwYW5kb0lkICYmIGpxQ2FjaGVbZXhwYW5kb0lkXTtcclxuXHJcbiAgaWYgKGV4cGFuZG9TdG9yZSkge1xyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgZGVsZXRlIGV4cGFuZG9TdG9yZS5kYXRhW25hbWVdO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV4cGFuZG9TdG9yZS5oYW5kbGUpIHtcclxuICAgICAgaWYgKGV4cGFuZG9TdG9yZS5ldmVudHMuJGRlc3Ryb3kpIHtcclxuICAgICAgICBleHBhbmRvU3RvcmUuaGFuZGxlKHt9LCAnJGRlc3Ryb3knKTtcclxuICAgICAgfVxyXG4gICAgICBqcUxpdGVPZmYoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICBkZWxldGUganFDYWNoZVtleHBhbmRvSWRdO1xyXG4gICAgZWxlbWVudC5uZzMzOSA9IHVuZGVmaW5lZDsgLy8gZG9uJ3QgZGVsZXRlIERPTSBleHBhbmRvcy4gSUUgYW5kIENocm9tZSBkb24ndCBsaWtlIGl0XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsIGNyZWF0ZUlmTmVjZXNzYXJ5KSB7XHJcbiAgdmFyIGV4cGFuZG9JZCA9IGVsZW1lbnQubmczMzksXHJcbiAgICAgIGV4cGFuZG9TdG9yZSA9IGV4cGFuZG9JZCAmJiBqcUNhY2hlW2V4cGFuZG9JZF07XHJcblxyXG4gIGlmIChjcmVhdGVJZk5lY2Vzc2FyeSAmJiAhZXhwYW5kb1N0b3JlKSB7XHJcbiAgICBlbGVtZW50Lm5nMzM5ID0gZXhwYW5kb0lkID0ganFOZXh0SWQoKTtcclxuICAgIGV4cGFuZG9TdG9yZSA9IGpxQ2FjaGVbZXhwYW5kb0lkXSA9IHtldmVudHM6IHt9LCBkYXRhOiB7fSwgaGFuZGxlOiB1bmRlZmluZWR9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGV4cGFuZG9TdG9yZTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZURhdGEoZWxlbWVudCwga2V5LCB2YWx1ZSkge1xyXG4gIGlmIChqcUxpdGVBY2NlcHRzRGF0YShlbGVtZW50KSkge1xyXG5cclxuICAgIHZhciBpc1NpbXBsZVNldHRlciA9IGlzRGVmaW5lZCh2YWx1ZSk7XHJcbiAgICB2YXIgaXNTaW1wbGVHZXR0ZXIgPSAhaXNTaW1wbGVTZXR0ZXIgJiYga2V5ICYmICFpc09iamVjdChrZXkpO1xyXG4gICAgdmFyIG1hc3NHZXR0ZXIgPSAha2V5O1xyXG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCAhaXNTaW1wbGVHZXR0ZXIpO1xyXG4gICAgdmFyIGRhdGEgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmRhdGE7XHJcblxyXG4gICAgaWYgKGlzU2ltcGxlU2V0dGVyKSB7IC8vIGRhdGEoJ2tleScsIHZhbHVlKVxyXG4gICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChtYXNzR2V0dGVyKSB7ICAvLyBkYXRhKClcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoaXNTaW1wbGVHZXR0ZXIpIHsgLy8gZGF0YSgna2V5JylcclxuICAgICAgICAgIC8vIGRvbid0IGZvcmNlIGNyZWF0aW9uIG9mIGV4cGFuZG9TdG9yZSBpZiBpdCBkb2Vzbid0IGV4aXN0IHlldFxyXG4gICAgICAgICAgcmV0dXJuIGRhdGEgJiYgZGF0YVtrZXldO1xyXG4gICAgICAgIH0gZWxzZSB7IC8vIG1hc3Mtc2V0dGVyOiBkYXRhKHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfSlcclxuICAgICAgICAgIGV4dGVuZChkYXRhLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlSGFzQ2xhc3MoZWxlbWVudCwgc2VsZWN0b3IpIHtcclxuICBpZiAoIWVsZW1lbnQuZ2V0QXR0cmlidXRlKSByZXR1cm4gZmFsc2U7XHJcbiAgcmV0dXJuICgoXCIgXCIgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKS5cclxuICAgICAgaW5kZXhPZihcIiBcIiArIHNlbGVjdG9yICsgXCIgXCIpID4gLTEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmVDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XHJcbiAgaWYgKGNzc0NsYXNzZXMgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcclxuICAgIGZvckVhY2goY3NzQ2xhc3Nlcy5zcGxpdCgnICcpLCBmdW5jdGlvbihjc3NDbGFzcykge1xyXG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0cmltKFxyXG4gICAgICAgICAgKFwiIFwiICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArIFwiIFwiKVxyXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKVxyXG4gICAgICAgICAgLnJlcGxhY2UoXCIgXCIgKyB0cmltKGNzc0NsYXNzKSArIFwiIFwiLCBcIiBcIikpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpxTGl0ZUFkZENsYXNzKGVsZW1lbnQsIGNzc0NsYXNzZXMpIHtcclxuICBpZiAoY3NzQ2xhc3NlcyAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xyXG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXG5cXHRdL2csIFwiIFwiKTtcclxuXHJcbiAgICBmb3JFYWNoKGNzc0NsYXNzZXMuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY3NzQ2xhc3MpIHtcclxuICAgICAgY3NzQ2xhc3MgPSB0cmltKGNzc0NsYXNzKTtcclxuICAgICAgaWYgKGV4aXN0aW5nQ2xhc3Nlcy5pbmRleE9mKCcgJyArIGNzc0NsYXNzICsgJyAnKSA9PT0gLTEpIHtcclxuICAgICAgICBleGlzdGluZ0NsYXNzZXMgKz0gY3NzQ2xhc3MgKyAnICc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRyaW0oZXhpc3RpbmdDbGFzc2VzKSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24ganFMaXRlQWRkTm9kZXMocm9vdCwgZWxlbWVudHMpIHtcclxuICAvLyBUSElTIENPREUgSVMgVkVSWSBIT1QuIERvbid0IG1ha2UgY2hhbmdlcyB3aXRob3V0IGJlbmNobWFya2luZy5cclxuXHJcbiAgaWYgKGVsZW1lbnRzKSB7XHJcblxyXG4gICAgLy8gaWYgYSBOb2RlICh0aGUgbW9zdCBjb21tb24gY2FzZSlcclxuICAgIGlmIChlbGVtZW50cy5ub2RlVHlwZSkge1xyXG4gICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xyXG5cclxuICAgICAgLy8gaWYgYW4gQXJyYXkgb3IgTm9kZUxpc3QgYW5kIG5vdCBhIFdpbmRvd1xyXG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgJiYgZWxlbWVudHMud2luZG93ICE9PSBlbGVtZW50cykge1xyXG4gICAgICAgIGlmIChsZW5ndGgpIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcm9vdFtyb290Lmxlbmd0aCsrXSA9IGVsZW1lbnRzW2ldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBqcUxpdGVDb250cm9sbGVyKGVsZW1lbnQsIG5hbWUpIHtcclxuICByZXR1cm4ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCAnJCcgKyAobmFtZSB8fCAnbmdDb250cm9sbGVyJykgKyAnQ29udHJvbGxlcicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XHJcbiAgLy8gaWYgZWxlbWVudCBpcyB0aGUgZG9jdW1lbnQgb2JqZWN0IHdvcmsgd2l0aCB0aGUgaHRtbCBlbGVtZW50IGluc3RlYWRcclxuICAvLyB0aGlzIG1ha2VzICQoZG9jdW1lbnQpLnNjb3BlKCkgcG9zc2libGVcclxuICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PSBOT0RFX1RZUEVfRE9DVU1FTlQpIHtcclxuICAgIGVsZW1lbnQgPSBlbGVtZW50LmRvY3VtZW50RWxlbWVudDtcclxuICB9XHJcbiAgdmFyIG5hbWVzID0gaXNBcnJheShuYW1lKSA/IG5hbWUgOiBbbmFtZV07XHJcblxyXG4gIHdoaWxlIChlbGVtZW50KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgIGlmICgodmFsdWUgPSBqcUxpdGUuZGF0YShlbGVtZW50LCBuYW1lc1tpXSkpICE9PSB1bmRlZmluZWQpIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBkZWFsaW5nIHdpdGggYSBkb2N1bWVudCBmcmFnbWVudCBub2RlIHdpdGggYSBob3N0IGVsZW1lbnQsIGFuZCBubyBwYXJlbnQsIHVzZSB0aGUgaG9zdFxyXG4gICAgLy8gZWxlbWVudCBhcyB0aGUgcGFyZW50LiBUaGlzIGVuYWJsZXMgZGlyZWN0aXZlcyB3aXRoaW4gYSBTaGFkb3cgRE9NIG9yIHBvbHlmaWxsZWQgU2hhZG93IERPTVxyXG4gICAgLy8gdG8gbG9va3VwIHBhcmVudCBjb250cm9sbGVycy5cclxuICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUgfHwgKGVsZW1lbnQubm9kZVR5cGUgPT09IE5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCAmJiBlbGVtZW50Lmhvc3QpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCkge1xyXG4gIGpxTGl0ZURlYWxvYyhlbGVtZW50LCB0cnVlKTtcclxuICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XHJcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmUoZWxlbWVudCwga2VlcERhdGEpIHtcclxuICBpZiAoIWtlZXBEYXRhKSBqcUxpdGVEZWFsb2MoZWxlbWVudCk7XHJcbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBqcUxpdGVEb2N1bWVudExvYWRlZChhY3Rpb24sIHdpbikge1xyXG4gIHdpbiA9IHdpbiB8fCB3aW5kb3c7XHJcbiAgaWYgKHdpbi5kb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XHJcbiAgICAvLyBGb3JjZSB0aGUgYWN0aW9uIHRvIGJlIHJ1biBhc3luYyBmb3IgY29uc2lzdGVudCBiZWhhdmlvdXJcclxuICAgIC8vIGZyb20gdGhlIGFjdGlvbidzIHBvaW50IG9mIHZpZXdcclxuICAgIC8vIGkuZS4gaXQgd2lsbCBkZWZpbml0ZWx5IG5vdCBiZSBpbiBhICRhcHBseVxyXG4gICAgd2luLnNldFRpbWVvdXQoYWN0aW9uKTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gTm8gbmVlZCB0byB1bmJpbmQgdGhpcyBoYW5kbGVyIGFzIGxvYWQgaXMgb25seSBldmVyIGNhbGxlZCBvbmNlXHJcbiAgICBqcUxpdGUod2luKS5vbignbG9hZCcsIGFjdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gRnVuY3Rpb25zIHdoaWNoIGFyZSBkZWNsYXJlZCBkaXJlY3RseS5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnZhciBKUUxpdGVQcm90b3R5cGUgPSBKUUxpdGUucHJvdG90eXBlID0ge1xyXG4gIHJlYWR5OiBmdW5jdGlvbihmbikge1xyXG4gICAgdmFyIGZpcmVkID0gZmFsc2U7XHJcblxyXG4gICAgZnVuY3Rpb24gdHJpZ2dlcigpIHtcclxuICAgICAgaWYgKGZpcmVkKSByZXR1cm47XHJcbiAgICAgIGZpcmVkID0gdHJ1ZTtcclxuICAgICAgZm4oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjaGVjayBpZiBkb2N1bWVudCBpcyBhbHJlYWR5IGxvYWRlZFxyXG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgc2V0VGltZW91dCh0cmlnZ2VyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub24oJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTsgLy8gd29ya3MgZm9yIG1vZGVybiBicm93c2VycyBhbmQgSUU5XHJcbiAgICAgIC8vIHdlIGNhbiBub3QgdXNlIGpxTGl0ZSBzaW5jZSB3ZSBhcmUgbm90IGRvbmUgbG9hZGluZyBhbmQgalF1ZXJ5IGNvdWxkIGJlIGxvYWRlZCBsYXRlci5cclxuICAgICAgLy8ganNoaW50IC1XMDY0XHJcbiAgICAgIEpRTGl0ZSh3aW5kb3cpLm9uKCdsb2FkJywgdHJpZ2dlcik7IC8vIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQgZm9yIG90aGVyc1xyXG4gICAgICAvLyBqc2hpbnQgK1cwNjRcclxuICAgIH1cclxuICB9LFxyXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciB2YWx1ZSA9IFtdO1xyXG4gICAgZm9yRWFjaCh0aGlzLCBmdW5jdGlvbihlKSB7IHZhbHVlLnB1c2goJycgKyBlKTt9KTtcclxuICAgIHJldHVybiAnWycgKyB2YWx1ZS5qb2luKCcsICcpICsgJ10nO1xyXG4gIH0sXHJcblxyXG4gIGVxOiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICByZXR1cm4gKGluZGV4ID49IDApID8ganFMaXRlKHRoaXNbaW5kZXhdKSA6IGpxTGl0ZSh0aGlzW3RoaXMubGVuZ3RoICsgaW5kZXhdKTtcclxuICB9LFxyXG5cclxuICBsZW5ndGg6IDAsXHJcbiAgcHVzaDogcHVzaCxcclxuICBzb3J0OiBbXS5zb3J0LFxyXG4gIHNwbGljZTogW10uc3BsaWNlXHJcbn07XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gRnVuY3Rpb25zIGl0ZXJhdGluZyBnZXR0ZXIvc2V0dGVycy5cclxuLy8gdGhlc2UgZnVuY3Rpb25zIHJldHVybiBzZWxmIG9uIHNldHRlciBhbmRcclxuLy8gdmFsdWUgb24gZ2V0LlxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxudmFyIEJPT0xFQU5fQVRUUiA9IHt9O1xyXG5mb3JFYWNoKCdtdWx0aXBsZSxzZWxlY3RlZCxjaGVja2VkLGRpc2FibGVkLHJlYWRPbmx5LHJlcXVpcmVkLG9wZW4nLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgQk9PTEVBTl9BVFRSW2xvd2VyY2FzZSh2YWx1ZSldID0gdmFsdWU7XHJcbn0pO1xyXG52YXIgQk9PTEVBTl9FTEVNRU5UUyA9IHt9O1xyXG5mb3JFYWNoKCdpbnB1dCxzZWxlY3Qsb3B0aW9uLHRleHRhcmVhLGJ1dHRvbixmb3JtLGRldGFpbHMnLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgQk9PTEVBTl9FTEVNRU5UU1t2YWx1ZV0gPSB0cnVlO1xyXG59KTtcclxudmFyIEFMSUFTRURfQVRUUiA9IHtcclxuICAnbmdNaW5sZW5ndGgnOiAnbWlubGVuZ3RoJyxcclxuICAnbmdNYXhsZW5ndGgnOiAnbWF4bGVuZ3RoJyxcclxuICAnbmdNaW4nOiAnbWluJyxcclxuICAnbmdNYXgnOiAnbWF4JyxcclxuICAnbmdQYXR0ZXJuJzogJ3BhdHRlcm4nXHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRCb29sZWFuQXR0ck5hbWUoZWxlbWVudCwgbmFtZSkge1xyXG4gIC8vIGNoZWNrIGRvbSBsYXN0IHNpbmNlIHdlIHdpbGwgbW9zdCBsaWtlbHkgZmFpbCBvbiBuYW1lXHJcbiAgdmFyIGJvb2xlYW5BdHRyID0gQk9PTEVBTl9BVFRSW25hbWUudG9Mb3dlckNhc2UoKV07XHJcblxyXG4gIC8vIGJvb2xlYW5BdHRyIGlzIGhlcmUgdHdpY2UgdG8gbWluaW1pemUgRE9NIGFjY2Vzc1xyXG4gIHJldHVybiBib29sZWFuQXR0ciAmJiBCT09MRUFOX0VMRU1FTlRTW25vZGVOYW1lXyhlbGVtZW50KV0gJiYgYm9vbGVhbkF0dHI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEFsaWFzZWRBdHRyTmFtZShlbGVtZW50LCBuYW1lKSB7XHJcbiAgdmFyIG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZTtcclxuICByZXR1cm4gKG5vZGVOYW1lID09PSAnSU5QVVQnIHx8IG5vZGVOYW1lID09PSAnVEVYVEFSRUEnKSAmJiBBTElBU0VEX0FUVFJbbmFtZV07XHJcbn1cclxuXHJcbmZvckVhY2goe1xyXG4gIGRhdGE6IGpxTGl0ZURhdGEsXHJcbiAgcmVtb3ZlRGF0YToganFMaXRlUmVtb3ZlRGF0YVxyXG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xyXG4gIEpRTGl0ZVtuYW1lXSA9IGZuO1xyXG59KTtcclxuXHJcbmZvckVhY2goe1xyXG4gIGRhdGE6IGpxTGl0ZURhdGEsXHJcbiAgaW5oZXJpdGVkRGF0YToganFMaXRlSW5oZXJpdGVkRGF0YSxcclxuXHJcbiAgc2NvcGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIC8vIENhbid0IHVzZSBqcUxpdGVEYXRhIGhlcmUgZGlyZWN0bHkgc28gd2Ugc3RheSBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IVxyXG4gICAgcmV0dXJuIGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckc2NvcGUnKSB8fCBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50LCBbJyRpc29sYXRlU2NvcGUnLCAnJHNjb3BlJ10pO1xyXG4gIH0sXHJcblxyXG4gIGlzb2xhdGVTY29wZTogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgLy8gQ2FuJ3QgdXNlIGpxTGl0ZURhdGEgaGVyZSBkaXJlY3RseSBzbyB3ZSBzdGF5IGNvbXBhdGlibGUgd2l0aCBqUXVlcnkhXHJcbiAgICByZXR1cm4ganFMaXRlLmRhdGEoZWxlbWVudCwgJyRpc29sYXRlU2NvcGUnKSB8fCBqcUxpdGUuZGF0YShlbGVtZW50LCAnJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUnKTtcclxuICB9LFxyXG5cclxuICBjb250cm9sbGVyOiBqcUxpdGVDb250cm9sbGVyLFxyXG5cclxuICBpbmplY3RvcjogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgJyRpbmplY3RvcicpO1xyXG4gIH0sXHJcblxyXG4gIHJlbW92ZUF0dHI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUpIHtcclxuICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xyXG4gIH0sXHJcblxyXG4gIGhhc0NsYXNzOiBqcUxpdGVIYXNDbGFzcyxcclxuXHJcbiAgY3NzOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgbmFtZSA9IGNhbWVsQ2FzZShuYW1lKTtcclxuXHJcbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICBlbGVtZW50LnN0eWxlW25hbWVdID0gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZWxlbWVudC5zdHlsZVtuYW1lXTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBhdHRyOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgdmFyIGxvd2VyY2FzZWROYW1lID0gbG93ZXJjYXNlKG5hbWUpO1xyXG4gICAgaWYgKEJPT0xFQU5fQVRUUltsb3dlcmNhc2VkTmFtZV0pIHtcclxuICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICBpZiAoISF2YWx1ZSkge1xyXG4gICAgICAgICAgZWxlbWVudFtuYW1lXSA9IHRydWU7XHJcbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCBsb3dlcmNhc2VkTmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGVsZW1lbnRbbmFtZV0gPSBmYWxzZTtcclxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGxvd2VyY2FzZWROYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIChlbGVtZW50W25hbWVdIHx8XHJcbiAgICAgICAgICAgICAgICAgKGVsZW1lbnQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0obmFtZSkgfHwgbm9vcCkuc3BlY2lmaWVkKVxyXG4gICAgICAgICAgICAgICA/IGxvd2VyY2FzZWROYW1lXHJcbiAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xyXG4gICAgfSBlbHNlIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xyXG4gICAgICAvLyB0aGUgZXh0cmEgYXJndW1lbnQgXCIyXCIgaXMgdG8gZ2V0IHRoZSByaWdodCB0aGluZyBmb3IgYS5ocmVmIGluIElFLCBzZWUgalF1ZXJ5IGNvZGVcclxuICAgICAgLy8gc29tZSBlbGVtZW50cyAoZS5nLiBEb2N1bWVudCkgZG9uJ3QgaGF2ZSBnZXQgYXR0cmlidXRlLCBzbyByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgIHZhciByZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lLCAyKTtcclxuICAgICAgLy8gbm9ybWFsaXplIG5vbi1leGlzdGluZyBhdHRyaWJ1dGVzIHRvIHVuZGVmaW5lZCAoYXMgalF1ZXJ5KVxyXG4gICAgICByZXR1cm4gcmV0ID09PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIHByb3A6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICBlbGVtZW50W25hbWVdID0gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZWxlbWVudFtuYW1lXTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICB0ZXh0OiAoZnVuY3Rpb24oKSB7XHJcbiAgICBnZXRUZXh0LiRkdiA9ICcnO1xyXG4gICAgcmV0dXJuIGdldFRleHQ7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VGV4dChlbGVtZW50LCB2YWx1ZSkge1xyXG4gICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcclxuICAgICAgICByZXR1cm4gKG5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCB8fCBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQpID8gZWxlbWVudC50ZXh0Q29udGVudCA6ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuICAgIH1cclxuICB9KSgpLFxyXG5cclxuICB2YWw6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgIGlmIChlbGVtZW50Lm11bHRpcGxlICYmIG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ3NlbGVjdCcpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgZm9yRWFjaChlbGVtZW50Lm9wdGlvbnMsIGZ1bmN0aW9uKG9wdGlvbikge1xyXG4gICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChvcHRpb24udmFsdWUgfHwgb3B0aW9uLnRleHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQubGVuZ3RoID09PSAwID8gbnVsbCA6IHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcclxuICAgIH1cclxuICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcclxuICB9LFxyXG5cclxuICBodG1sOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xyXG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudC5pbm5lckhUTUw7XHJcbiAgICB9XHJcbiAgICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHZhbHVlO1xyXG4gIH0sXHJcblxyXG4gIGVtcHR5OiBqcUxpdGVFbXB0eVxyXG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xyXG4gIC8qKlxyXG4gICAqIFByb3BlcnRpZXM6IHdyaXRlcyByZXR1cm4gc2VsZWN0aW9uLCByZWFkcyByZXR1cm4gZmlyc3QgdmFsdWVcclxuICAgKi9cclxuICBKUUxpdGUucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xyXG4gICAgdmFyIGksIGtleTtcclxuICAgIHZhciBub2RlQ291bnQgPSB0aGlzLmxlbmd0aDtcclxuXHJcbiAgICAvLyBqcUxpdGVIYXNDbGFzcyBoYXMgb25seSB0d28gYXJndW1lbnRzLCBidXQgaXMgYSBnZXR0ZXItb25seSBmbiwgc28gd2UgbmVlZCB0byBzcGVjaWFsLWNhc2UgaXRcclxuICAgIC8vIGluIGEgd2F5IHRoYXQgc3Vydml2ZXMgbWluaWZpY2F0aW9uLlxyXG4gICAgLy8ganFMaXRlRW1wdHkgdGFrZXMgbm8gYXJndW1lbnRzIGJ1dCBpcyBhIHNldHRlci5cclxuICAgIGlmIChmbiAhPT0ganFMaXRlRW1wdHkgJiZcclxuICAgICAgICAoKChmbi5sZW5ndGggPT0gMiAmJiAoZm4gIT09IGpxTGl0ZUhhc0NsYXNzICYmIGZuICE9PSBqcUxpdGVDb250cm9sbGVyKSkgPyBhcmcxIDogYXJnMikgPT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgaWYgKGlzT2JqZWN0KGFyZzEpKSB7XHJcblxyXG4gICAgICAgIC8vIHdlIGFyZSBhIHdyaXRlLCBidXQgdGhlIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSB0aGUga2V5L3ZhbHVlc1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGZuID09PSBqcUxpdGVEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIGRhdGEoKSB0YWtlcyB0aGUgd2hvbGUgb2JqZWN0IGluIGpRdWVyeVxyXG4gICAgICAgICAgICBmbih0aGlzW2ldLCBhcmcxKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoa2V5IGluIGFyZzEpIHtcclxuICAgICAgICAgICAgICBmbih0aGlzW2ldLCBrZXksIGFyZzFba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmV0dXJuIHNlbGYgZm9yIGNoYWluaW5nXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gd2UgYXJlIGEgcmVhZCwgc28gcmVhZCB0aGUgZmlyc3QgY2hpbGQuXHJcbiAgICAgICAgLy8gVE9ETzogZG8gd2Ugc3RpbGwgbmVlZCB0aGlzP1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGZuLiRkdjtcclxuICAgICAgICAvLyBPbmx5IGlmIHdlIGhhdmUgJGR2IGRvIHdlIGl0ZXJhdGUgb3ZlciBhbGwsIG90aGVyd2lzZSBpdCBpcyBqdXN0IHRoZSBmaXJzdCBlbGVtZW50LlxyXG4gICAgICAgIHZhciBqaiA9ICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IE1hdGgubWluKG5vZGVDb3VudCwgMSkgOiBub2RlQ291bnQ7XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgICB2YXIgbm9kZVZhbHVlID0gZm4odGhpc1tqXSwgYXJnMSwgYXJnMik7XHJcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlID8gdmFsdWUgKyBub2RlVmFsdWUgOiBub2RlVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gd2UgYXJlIGEgd3JpdGUsIHNvIGFwcGx5IHRvIGFsbCBjaGlsZHJlblxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcclxuICAgICAgICBmbih0aGlzW2ldLCBhcmcxLCBhcmcyKTtcclxuICAgICAgfVxyXG4gICAgICAvLyByZXR1cm4gc2VsZiBmb3IgY2hhaW5pbmdcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFdmVudEhhbmRsZXIoZWxlbWVudCwgZXZlbnRzKSB7XHJcbiAgdmFyIGV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50LCB0eXBlKSB7XHJcbiAgICAvLyBqUXVlcnkgc3BlY2lmaWMgYXBpXHJcbiAgICBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBldmVudEZucyA9IGV2ZW50c1t0eXBlIHx8IGV2ZW50LnR5cGVdO1xyXG4gICAgdmFyIGV2ZW50Rm5zTGVuZ3RoID0gZXZlbnRGbnMgPyBldmVudEZucy5sZW5ndGggOiAwO1xyXG5cclxuICAgIGlmICghZXZlbnRGbnNMZW5ndGgpIHJldHVybjtcclxuXHJcbiAgICBpZiAoaXNVbmRlZmluZWQoZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKSkge1xyXG4gICAgICB2YXIgb3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247XHJcbiAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICBvcmlnaW5hbFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbi5jYWxsKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9PT0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gQ29weSBldmVudCBoYW5kbGVycyBpbiBjYXNlIGV2ZW50IGhhbmRsZXJzIGFycmF5IGlzIG1vZGlmaWVkIGR1cmluZyBleGVjdXRpb24uXHJcbiAgICBpZiAoKGV2ZW50Rm5zTGVuZ3RoID4gMSkpIHtcclxuICAgICAgZXZlbnRGbnMgPSBzaGFsbG93Q29weShldmVudEZucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudEZuc0xlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICghZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xyXG4gICAgICAgIGV2ZW50Rm5zW2ldLmNhbGwoZWxlbWVudCwgZXZlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVE9ETzogdGhpcyBpcyBhIGhhY2sgZm9yIGFuZ3VsYXJNb2Nrcy9jbGVhckRhdGFDYWNoZSB0aGF0IG1ha2VzIGl0IHBvc3NpYmxlIHRvIGRlcmVnaXN0ZXIgYWxsXHJcbiAgLy8gICAgICAgZXZlbnRzIG9uIGBlbGVtZW50YFxyXG4gIGV2ZW50SGFuZGxlci5lbGVtID0gZWxlbWVudDtcclxuICByZXR1cm4gZXZlbnRIYW5kbGVyO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gRnVuY3Rpb25zIGl0ZXJhdGluZyB0cmF2ZXJzYWwuXHJcbi8vIFRoZXNlIGZ1bmN0aW9ucyBjaGFpbiByZXN1bHRzIGludG8gYSBzaW5nbGVcclxuLy8gc2VsZWN0b3IuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mb3JFYWNoKHtcclxuICByZW1vdmVEYXRhOiBqcUxpdGVSZW1vdmVEYXRhLFxyXG5cclxuICBvbjogZnVuY3Rpb24ganFMaXRlT24oZWxlbWVudCwgdHlwZSwgZm4sIHVuc3VwcG9ydGVkKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHVuc3VwcG9ydGVkKSkgdGhyb3cganFMaXRlTWluRXJyKCdvbmFyZ3MnLCAnanFMaXRlI29uKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBvciBgZXZlbnREYXRhYCBwYXJhbWV0ZXJzJyk7XHJcblxyXG4gICAgLy8gRG8gbm90IGFkZCBldmVudCBoYW5kbGVycyB0byBub24tZWxlbWVudHMgYmVjYXVzZSB0aGV5IHdpbGwgbm90IGJlIGNsZWFuZWQgdXAuXHJcbiAgICBpZiAoIWpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsIHRydWUpO1xyXG4gICAgdmFyIGV2ZW50cyA9IGV4cGFuZG9TdG9yZS5ldmVudHM7XHJcbiAgICB2YXIgaGFuZGxlID0gZXhwYW5kb1N0b3JlLmhhbmRsZTtcclxuXHJcbiAgICBpZiAoIWhhbmRsZSkge1xyXG4gICAgICBoYW5kbGUgPSBleHBhbmRvU3RvcmUuaGFuZGxlID0gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vc3RyaW5nLWluZGV4b2YtdnMtc3BsaXRcclxuICAgIHZhciB0eXBlcyA9IHR5cGUuaW5kZXhPZignICcpID49IDAgPyB0eXBlLnNwbGl0KCcgJykgOiBbdHlwZV07XHJcbiAgICB2YXIgaSA9IHR5cGVzLmxlbmd0aDtcclxuXHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIHR5cGUgPSB0eXBlc1tpXTtcclxuICAgICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdO1xyXG5cclxuICAgICAgaWYgKCFldmVudEZucykge1xyXG4gICAgICAgIGV2ZW50c1t0eXBlXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ21vdXNlZW50ZXInIHx8IHR5cGUgPT09ICdtb3VzZWxlYXZlJykge1xyXG4gICAgICAgICAgLy8gUmVmZXIgdG8galF1ZXJ5J3MgaW1wbGVtZW50YXRpb24gb2YgbW91c2VlbnRlciAmIG1vdXNlbGVhdmVcclxuICAgICAgICAgIC8vIFJlYWQgYWJvdXQgbW91c2VlbnRlciBhbmQgbW91c2VsZWF2ZTpcclxuICAgICAgICAgIC8vIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX21vdXNlLmh0bWwjbGluazhcclxuXHJcbiAgICAgICAgICBqcUxpdGVPbihlbGVtZW50LCBNT1VTRV9FVkVOVF9NQVBbdHlwZV0sIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLCByZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldDtcclxuICAgICAgICAgICAgLy8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICAvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xyXG4gICAgICAgICAgICBpZiAoIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhdGFyZ2V0LmNvbnRhaW5zKHJlbGF0ZWQpKSkge1xyXG4gICAgICAgICAgICAgIGhhbmRsZShldmVudCwgdHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHR5cGUgIT09ICckZGVzdHJveScpIHtcclxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lckZuKGVsZW1lbnQsIHR5cGUsIGhhbmRsZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdO1xyXG4gICAgICB9XHJcbiAgICAgIGV2ZW50Rm5zLnB1c2goZm4pO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG9mZjoganFMaXRlT2ZmLFxyXG5cclxuICBvbmU6IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUsIGZuKSB7XHJcbiAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xyXG5cclxuICAgIC8vYWRkIHRoZSBsaXN0ZW5lciB0d2ljZSBzbyB0aGF0IHdoZW4gaXQgaXMgY2FsbGVkXHJcbiAgICAvL3lvdSBjYW4gcmVtb3ZlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBhbmQgc3RpbGwgYmVcclxuICAgIC8vYWJsZSB0byBjYWxsIGVsZW1lbnQub2ZmKGV2LCBmbikgbm9ybWFsbHlcclxuICAgIGVsZW1lbnQub24odHlwZSwgZnVuY3Rpb24gb25GbigpIHtcclxuICAgICAgZWxlbWVudC5vZmYodHlwZSwgZm4pO1xyXG4gICAgICBlbGVtZW50Lm9mZih0eXBlLCBvbkZuKTtcclxuICAgIH0pO1xyXG4gICAgZWxlbWVudC5vbih0eXBlLCBmbik7XHJcbiAgfSxcclxuXHJcbiAgcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKGVsZW1lbnQsIHJlcGxhY2VOb2RlKSB7XHJcbiAgICB2YXIgaW5kZXgsIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgIGpxTGl0ZURlYWxvYyhlbGVtZW50KTtcclxuICAgIGZvckVhY2gobmV3IEpRTGl0ZShyZXBsYWNlTm9kZSksIGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgaWYgKGluZGV4KSB7XHJcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBpbmRleC5uZXh0U2libGluZyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChub2RlLCBlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICBpbmRleCA9IG5vZGU7XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBjaGlsZHJlbjogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgdmFyIGNoaWxkcmVuID0gW107XHJcbiAgICBmb3JFYWNoKGVsZW1lbnQuY2hpbGROb2RlcywgZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQpXHJcbiAgICAgICAgY2hpbGRyZW4ucHVzaChlbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNoaWxkcmVuO1xyXG4gIH0sXHJcblxyXG4gIGNvbnRlbnRzOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZWxlbWVudC5jb250ZW50RG9jdW1lbnQgfHwgZWxlbWVudC5jaGlsZE5vZGVzIHx8IFtdO1xyXG4gIH0sXHJcblxyXG4gIGFwcGVuZDogZnVuY3Rpb24oZWxlbWVudCwgbm9kZSkge1xyXG4gICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcclxuICAgIGlmIChub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0VMRU1FTlQgJiYgbm9kZVR5cGUgIT09IE5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCkgcmV0dXJuO1xyXG5cclxuICAgIG5vZGUgPSBuZXcgSlFMaXRlKG5vZGUpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5vZGUubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICB2YXIgY2hpbGQgPSBub2RlW2ldO1xyXG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBwcmVwZW5kOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7XHJcbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcclxuICAgICAgdmFyIGluZGV4ID0gZWxlbWVudC5maXJzdENoaWxkO1xyXG4gICAgICBmb3JFYWNoKG5ldyBKUUxpdGUobm9kZSksIGZ1bmN0aW9uKGNoaWxkKSB7XHJcbiAgICAgICAgZWxlbWVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGluZGV4KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgd3JhcDogZnVuY3Rpb24oZWxlbWVudCwgd3JhcE5vZGUpIHtcclxuICAgIHdyYXBOb2RlID0ganFMaXRlKHdyYXBOb2RlKS5lcSgwKS5jbG9uZSgpWzBdO1xyXG4gICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwTm9kZSwgZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB3cmFwTm9kZS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9LFxyXG5cclxuICByZW1vdmU6IGpxTGl0ZVJlbW92ZSxcclxuXHJcbiAgZGV0YWNoOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICBqcUxpdGVSZW1vdmUoZWxlbWVudCwgdHJ1ZSk7XHJcbiAgfSxcclxuXHJcbiAgYWZ0ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcclxuICAgIHZhciBpbmRleCA9IGVsZW1lbnQsIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgIG5ld0VsZW1lbnQgPSBuZXcgSlFMaXRlKG5ld0VsZW1lbnQpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5ld0VsZW1lbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICB2YXIgbm9kZSA9IG5ld0VsZW1lbnRbaV07XHJcbiAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgaW5kZXgubmV4dFNpYmxpbmcpO1xyXG4gICAgICBpbmRleCA9IG5vZGU7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgYWRkQ2xhc3M6IGpxTGl0ZUFkZENsYXNzLFxyXG4gIHJlbW92ZUNsYXNzOiBqcUxpdGVSZW1vdmVDbGFzcyxcclxuXHJcbiAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yLCBjb25kaXRpb24pIHtcclxuICAgIGlmIChzZWxlY3Rvcikge1xyXG4gICAgICBmb3JFYWNoKHNlbGVjdG9yLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHZhciBjbGFzc0NvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQoY2xhc3NDb25kaXRpb24pKSB7XHJcbiAgICAgICAgICBjbGFzc0NvbmRpdGlvbiA9ICFqcUxpdGVIYXNDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAoY2xhc3NDb25kaXRpb24gPyBqcUxpdGVBZGRDbGFzcyA6IGpxTGl0ZVJlbW92ZUNsYXNzKShlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBwYXJlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UID8gcGFyZW50IDogbnVsbDtcclxuICB9LFxyXG5cclxuICBuZXh0OiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgfSxcclxuXHJcbiAgZmluZDogZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IpIHtcclxuICAgIGlmIChlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKSB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHNlbGVjdG9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBjbG9uZToganFMaXRlQ2xvbmUsXHJcblxyXG4gIHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgZXh0cmFQYXJhbWV0ZXJzKSB7XHJcblxyXG4gICAgdmFyIGR1bW15RXZlbnQsIGV2ZW50Rm5zQ29weSwgaGFuZGxlckFyZ3M7XHJcbiAgICB2YXIgZXZlbnROYW1lID0gZXZlbnQudHlwZSB8fCBldmVudDtcclxuICAgIHZhciBleHBhbmRvU3RvcmUgPSBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCk7XHJcbiAgICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XHJcbiAgICB2YXIgZXZlbnRGbnMgPSBldmVudHMgJiYgZXZlbnRzW2V2ZW50TmFtZV07XHJcblxyXG4gICAgaWYgKGV2ZW50Rm5zKSB7XHJcbiAgICAgIC8vIENyZWF0ZSBhIGR1bW15IGV2ZW50IHRvIHBhc3MgdG8gdGhlIGhhbmRsZXJzXHJcbiAgICAgIGR1bW15RXZlbnQgPSB7XHJcbiAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgeyB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlOyB9LFxyXG4gICAgICAgIGlzRGVmYXVsdFByZXZlbnRlZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHRydWU7IH0sXHJcbiAgICAgICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsgdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlOyB9LFxyXG4gICAgICAgIGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID09PSB0cnVlOyB9LFxyXG4gICAgICAgIHN0b3BQcm9wYWdhdGlvbjogbm9vcCxcclxuICAgICAgICB0eXBlOiBldmVudE5hbWUsXHJcbiAgICAgICAgdGFyZ2V0OiBlbGVtZW50XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBJZiBhIGN1c3RvbSBldmVudCB3YXMgcHJvdmlkZWQgdGhlbiBleHRlbmQgb3VyIGR1bW15IGV2ZW50IHdpdGggaXRcclxuICAgICAgaWYgKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICBkdW1teUV2ZW50ID0gZXh0ZW5kKGR1bW15RXZlbnQsIGV2ZW50KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ29weSBldmVudCBoYW5kbGVycyBpbiBjYXNlIGV2ZW50IGhhbmRsZXJzIGFycmF5IGlzIG1vZGlmaWVkIGR1cmluZyBleGVjdXRpb24uXHJcbiAgICAgIGV2ZW50Rm5zQ29weSA9IHNoYWxsb3dDb3B5KGV2ZW50Rm5zKTtcclxuICAgICAgaGFuZGxlckFyZ3MgPSBleHRyYVBhcmFtZXRlcnMgPyBbZHVtbXlFdmVudF0uY29uY2F0KGV4dHJhUGFyYW1ldGVycykgOiBbZHVtbXlFdmVudF07XHJcblxyXG4gICAgICBmb3JFYWNoKGV2ZW50Rm5zQ29weSwgZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICBpZiAoIWR1bW15RXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xyXG4gICAgICAgICAgZm4uYXBwbHkoZWxlbWVudCwgaGFuZGxlckFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xyXG4gIC8qKlxyXG4gICAqIGNoYWluaW5nIGZ1bmN0aW9uc1xyXG4gICAqL1xyXG4gIEpRTGl0ZS5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbihhcmcxLCBhcmcyLCBhcmczKSB7XHJcbiAgICB2YXIgdmFsdWU7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICB2YWx1ZSA9IGZuKHRoaXNbaV0sIGFyZzEsIGFyZzIsIGFyZzMpO1xyXG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgICAvLyBhbnkgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIHZhbHVlIG5lZWRzIHRvIGJlIHdyYXBwZWRcclxuICAgICAgICAgIHZhbHVlID0ganFMaXRlKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAganFMaXRlQWRkTm9kZXModmFsdWUsIGZuKHRoaXNbaV0sIGFyZzEsIGFyZzIsIGFyZzMpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLy8gYmluZCBsZWdhY3kgYmluZC91bmJpbmQgdG8gb24vb2ZmXHJcbiAgSlFMaXRlLnByb3RvdHlwZS5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vbjtcclxuICBKUUxpdGUucHJvdG90eXBlLnVuYmluZCA9IEpRTGl0ZS5wcm90b3R5cGUub2ZmO1xyXG59KTtcclxuXHJcblxyXG4vLyBQcm92aWRlciBmb3IgcHJpdmF0ZSAkJGpxTGl0ZSBzZXJ2aWNlXHJcbmZ1bmN0aW9uICQkanFMaXRlUHJvdmlkZXIoKSB7XHJcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24gJCRqcUxpdGUoKSB7XHJcbiAgICByZXR1cm4gZXh0ZW5kKEpRTGl0ZSwge1xyXG4gICAgICBoYXNDbGFzczogZnVuY3Rpb24obm9kZSwgY2xhc3Nlcykge1xyXG4gICAgICAgIGlmIChub2RlLmF0dHIpIG5vZGUgPSBub2RlWzBdO1xyXG4gICAgICAgIHJldHVybiBqcUxpdGVIYXNDbGFzcyhub2RlLCBjbGFzc2VzKTtcclxuICAgICAgfSxcclxuICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKG5vZGUsIGNsYXNzZXMpIHtcclxuICAgICAgICBpZiAobm9kZS5hdHRyKSBub2RlID0gbm9kZVswXTtcclxuICAgICAgICByZXR1cm4ganFMaXRlQWRkQ2xhc3Mobm9kZSwgY2xhc3Nlcyk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihub2RlLCBjbGFzc2VzKSB7XHJcbiAgICAgICAgaWYgKG5vZGUuYXR0cikgbm9kZSA9IG5vZGVbMF07XHJcbiAgICAgICAgcmV0dXJuIGpxTGl0ZVJlbW92ZUNsYXNzKG5vZGUsIGNsYXNzZXMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcHV0ZXMgYSBoYXNoIG9mIGFuICdvYmonLlxyXG4gKiBIYXNoIG9mIGE6XHJcbiAqICBzdHJpbmcgaXMgc3RyaW5nXHJcbiAqICBudW1iZXIgaXMgbnVtYmVyIGFzIHN0cmluZ1xyXG4gKiAgb2JqZWN0IGlzIGVpdGhlciByZXN1bHQgb2YgY2FsbGluZyAkJGhhc2hLZXkgZnVuY3Rpb24gb24gdGhlIG9iamVjdCBvciB1bmlxdWVseSBnZW5lcmF0ZWQgaWQsXHJcbiAqICAgICAgICAgdGhhdCBpcyBhbHNvIGFzc2lnbmVkIHRvIHRoZSAkJGhhc2hLZXkgcHJvcGVydHkgb2YgdGhlIG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIG9ialxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBoYXNoIHN0cmluZyBzdWNoIHRoYXQgdGhlIHNhbWUgaW5wdXQgd2lsbCBoYXZlIHRoZSBzYW1lIGhhc2ggc3RyaW5nLlxyXG4gKiAgICAgICAgIFRoZSByZXN1bHRpbmcgc3RyaW5nIGtleSBpcyBpbiAndHlwZTpoYXNoS2V5JyBmb3JtYXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBoYXNoS2V5KG9iaiwgbmV4dFVpZEZuKSB7XHJcbiAgdmFyIGtleSA9IG9iaiAmJiBvYmouJCRoYXNoS2V5O1xyXG5cclxuICBpZiAoa2V5KSB7XHJcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBrZXkgPSBvYmouJCRoYXNoS2V5KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ga2V5O1xyXG4gIH1cclxuXHJcbiAgdmFyIG9ialR5cGUgPSB0eXBlb2Ygb2JqO1xyXG4gIGlmIChvYmpUeXBlID09ICdmdW5jdGlvbicgfHwgKG9ialR5cGUgPT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsKSkge1xyXG4gICAga2V5ID0gb2JqLiQkaGFzaEtleSA9IG9ialR5cGUgKyAnOicgKyAobmV4dFVpZEZuIHx8IG5leHRVaWQpKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGtleSA9IG9ialR5cGUgKyAnOicgKyBvYmo7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ga2V5O1xyXG59XHJcblxyXG4vKipcclxuICogSGFzaE1hcCB3aGljaCBjYW4gdXNlIG9iamVjdHMgYXMga2V5c1xyXG4gKi9cclxuZnVuY3Rpb24gSGFzaE1hcChhcnJheSwgaXNvbGF0ZWRVaWQpIHtcclxuICBpZiAoaXNvbGF0ZWRVaWQpIHtcclxuICAgIHZhciB1aWQgPSAwO1xyXG4gICAgdGhpcy5uZXh0VWlkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiArK3VpZDtcclxuICAgIH07XHJcbiAgfVxyXG4gIGZvckVhY2goYXJyYXksIHRoaXMucHV0LCB0aGlzKTtcclxufVxyXG5IYXNoTWFwLnByb3RvdHlwZSA9IHtcclxuICAvKipcclxuICAgKiBTdG9yZSBrZXkgdmFsdWUgcGFpclxyXG4gICAqIEBwYXJhbSBrZXkga2V5IHRvIHN0b3JlIGNhbiBiZSBhbnkgdHlwZVxyXG4gICAqIEBwYXJhbSB2YWx1ZSB2YWx1ZSB0byBzdG9yZSBjYW4gYmUgYW55IHR5cGVcclxuICAgKi9cclxuICBwdXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgIHRoaXNbaGFzaEtleShrZXksIHRoaXMubmV4dFVpZCldID0gdmFsdWU7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGtleVxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IHRoZSB2YWx1ZSBmb3IgdGhlIGtleVxyXG4gICAqL1xyXG4gIGdldDogZnVuY3Rpb24oa2V5KSB7XHJcbiAgICByZXR1cm4gdGhpc1toYXNoS2V5KGtleSwgdGhpcy5uZXh0VWlkKV07XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIHRoZSBrZXkvdmFsdWUgcGFpclxyXG4gICAqIEBwYXJhbSBrZXlcclxuICAgKi9cclxuICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgdmFyIHZhbHVlID0gdGhpc1trZXkgPSBoYXNoS2V5KGtleSwgdGhpcy5uZXh0VWlkKV07XHJcbiAgICBkZWxldGUgdGhpc1trZXldO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZnVuY3Rpb25cclxuICogQG1vZHVsZSBuZ1xyXG4gKiBAbmFtZSBhbmd1bGFyLmluamVjdG9yXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDcmVhdGVzIGFuIGluamVjdG9yIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGZvciByZXRyaWV2aW5nIHNlcnZpY2VzIGFzIHdlbGwgYXMgZm9yXHJcbiAqIGRlcGVuZGVuY3kgaW5qZWN0aW9uIChzZWUge0BsaW5rIGd1aWRlL2RpIGRlcGVuZGVuY3kgaW5qZWN0aW9ufSkuXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGdW5jdGlvbj59IG1vZHVsZXMgQSBsaXN0IG9mIG1vZHVsZSBmdW5jdGlvbnMgb3IgdGhlaXIgYWxpYXNlcy4gU2VlXHJcbiAqICAgICB7QGxpbmsgYW5ndWxhci5tb2R1bGV9LiBUaGUgYG5nYCBtb2R1bGUgbXVzdCBiZSBleHBsaWNpdGx5IGFkZGVkLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbc3RyaWN0RGk9ZmFsc2VdIFdoZXRoZXIgdGhlIGluamVjdG9yIHNob3VsZCBiZSBpbiBzdHJpY3QgbW9kZSwgd2hpY2hcclxuICogICAgIGRpc2FsbG93cyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxyXG4gKiBAcmV0dXJucyB7aW5qZWN0b3J9IEluamVjdG9yIG9iamVjdC4gU2VlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBUeXBpY2FsIHVzYWdlXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gY3JlYXRlIGFuIGluamVjdG9yXHJcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZyddKTtcclxuICpcclxuICogICAvLyB1c2UgdGhlIGluamVjdG9yIHRvIGtpY2sgb2ZmIHlvdXIgYXBwbGljYXRpb25cclxuICogICAvLyB1c2UgdGhlIHR5cGUgaW5mZXJlbmNlIHRvIGF1dG8gaW5qZWN0IGFyZ3VtZW50cywgb3IgdXNlIGltcGxpY2l0IGluamVjdGlvblxyXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oJHJvb3RTY29wZSwgJGNvbXBpbGUsICRkb2N1bWVudCkge1xyXG4gKiAgICAgJGNvbXBpbGUoJGRvY3VtZW50KSgkcm9vdFNjb3BlKTtcclxuICogICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogU29tZXRpbWVzIHlvdSB3YW50IHRvIGdldCBhY2Nlc3MgdG8gdGhlIGluamVjdG9yIG9mIGEgY3VycmVudGx5IHJ1bm5pbmcgQW5ndWxhciBhcHBcclxuICogZnJvbSBvdXRzaWRlIEFuZ3VsYXIuIFBlcmhhcHMsIHlvdSB3YW50IHRvIGluamVjdCBhbmQgY29tcGlsZSBzb21lIG1hcmt1cCBhZnRlciB0aGVcclxuICogYXBwbGljYXRpb24gaGFzIGJlZW4gYm9vdHN0cmFwcGVkLiBZb3UgY2FuIGRvIHRoaXMgdXNpbmcgdGhlIGV4dHJhIGBpbmplY3RvcigpYCBhZGRlZFxyXG4gKiB0byBKUXVlcnkvanFMaXRlIGVsZW1lbnRzLiBTZWUge0BsaW5rIGFuZ3VsYXIuZWxlbWVudH0uXHJcbiAqXHJcbiAqICpUaGlzIGlzIGZhaXJseSByYXJlIGJ1dCBjb3VsZCBiZSB0aGUgY2FzZSBpZiBhIHRoaXJkIHBhcnR5IGxpYnJhcnkgaXMgaW5qZWN0aW5nIHRoZVxyXG4gKiBtYXJrdXAuKlxyXG4gKlxyXG4gKiBJbiB0aGUgZm9sbG93aW5nIGV4YW1wbGUgYSBuZXcgYmxvY2sgb2YgSFRNTCBjb250YWluaW5nIGEgYG5nLWNvbnRyb2xsZXJgXHJcbiAqIGRpcmVjdGl2ZSBpcyBhZGRlZCB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBib2R5IGJ5IEpRdWVyeS4gV2UgdGhlbiBjb21waWxlIGFuZCBsaW5rXHJcbiAqIGl0IGludG8gdGhlIGN1cnJlbnQgQW5ndWxhckpTIHNjb3BlLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiB2YXIgJGRpdiA9ICQoJzxkaXYgbmctY29udHJvbGxlcj1cIk15Q3RybFwiPnt7Y29udGVudC5sYWJlbH19PC9kaXY+Jyk7XHJcbiAqICQoZG9jdW1lbnQuYm9keSkuYXBwZW5kKCRkaXYpO1xyXG4gKlxyXG4gKiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmluamVjdG9yKCkuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlKSB7XHJcbiAqICAgdmFyIHNjb3BlID0gYW5ndWxhci5lbGVtZW50KCRkaXYpLnNjb3BlKCk7XHJcbiAqICAgJGNvbXBpbGUoJGRpdikoc2NvcGUpO1xyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbW9kdWxlXHJcbiAqIEBuYW1lIGF1dG9cclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIEltcGxpY2l0IG1vZHVsZSB3aGljaCBnZXRzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gZWFjaCB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cclxuICovXHJcblxyXG52YXIgRk5fQVJHUyA9IC9eZnVuY3Rpb25cXHMqW15cXChdKlxcKFxccyooW15cXCldKilcXCkvbTtcclxudmFyIEZOX0FSR19TUExJVCA9IC8sLztcclxudmFyIEZOX0FSRyA9IC9eXFxzKihfPykoXFxTKz8pXFwxXFxzKiQvO1xyXG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWc7XHJcbnZhciAkaW5qZWN0b3JNaW5FcnIgPSBtaW5FcnIoJyRpbmplY3RvcicpO1xyXG5cclxuZnVuY3Rpb24gYW5vbkZuKGZuKSB7XHJcbiAgLy8gRm9yIGFub255bW91cyBmdW5jdGlvbnMsIHNob3dpbmcgYXQgdGhlIHZlcnkgbGVhc3QgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBjYW4gaGVscCBpblxyXG4gIC8vIGRlYnVnZ2luZy5cclxuICB2YXIgZm5UZXh0ID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyksXHJcbiAgICAgIGFyZ3MgPSBmblRleHQubWF0Y2goRk5fQVJHUyk7XHJcbiAgaWYgKGFyZ3MpIHtcclxuICAgIHJldHVybiAnZnVuY3Rpb24oJyArIChhcmdzWzFdIHx8ICcnKS5yZXBsYWNlKC9bXFxzXFxyXFxuXSsvLCAnICcpICsgJyknO1xyXG4gIH1cclxuICByZXR1cm4gJ2ZuJztcclxufVxyXG5cclxuZnVuY3Rpb24gYW5ub3RhdGUoZm4sIHN0cmljdERpLCBuYW1lKSB7XHJcbiAgdmFyICRpbmplY3QsXHJcbiAgICAgIGZuVGV4dCxcclxuICAgICAgYXJnRGVjbCxcclxuICAgICAgbGFzdDtcclxuXHJcbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgaWYgKCEoJGluamVjdCA9IGZuLiRpbmplY3QpKSB7XHJcbiAgICAgICRpbmplY3QgPSBbXTtcclxuICAgICAgaWYgKGZuLmxlbmd0aCkge1xyXG4gICAgICAgIGlmIChzdHJpY3REaSkge1xyXG4gICAgICAgICAgaWYgKCFpc1N0cmluZyhuYW1lKSB8fCAhbmFtZSkge1xyXG4gICAgICAgICAgICBuYW1lID0gZm4ubmFtZSB8fCBhbm9uRm4oZm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdzdHJpY3RkaScsXHJcbiAgICAgICAgICAgICd7MH0gaXMgbm90IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gYW5kIGNhbm5vdCBiZSBpbnZva2VkIGluIHN0cmljdCBtb2RlJywgbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZuVGV4dCA9IGZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywgJycpO1xyXG4gICAgICAgIGFyZ0RlY2wgPSBmblRleHQubWF0Y2goRk5fQVJHUyk7XHJcbiAgICAgICAgZm9yRWFjaChhcmdEZWNsWzFdLnNwbGl0KEZOX0FSR19TUExJVCksIGZ1bmN0aW9uKGFyZykge1xyXG4gICAgICAgICAgYXJnLnJlcGxhY2UoRk5fQVJHLCBmdW5jdGlvbihhbGwsIHVuZGVyc2NvcmUsIG5hbWUpIHtcclxuICAgICAgICAgICAgJGluamVjdC5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZm4uJGluamVjdCA9ICRpbmplY3Q7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChpc0FycmF5KGZuKSkge1xyXG4gICAgbGFzdCA9IGZuLmxlbmd0aCAtIDE7XHJcbiAgICBhc3NlcnRBcmdGbihmbltsYXN0XSwgJ2ZuJyk7XHJcbiAgICAkaW5qZWN0ID0gZm4uc2xpY2UoMCwgbGFzdCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFzc2VydEFyZ0ZuKGZuLCAnZm4nLCB0cnVlKTtcclxuICB9XHJcbiAgcmV0dXJuICRpbmplY3Q7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRpbmplY3RvclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogYCRpbmplY3RvcmAgaXMgdXNlZCB0byByZXRyaWV2ZSBvYmplY3QgaW5zdGFuY2VzIGFzIGRlZmluZWQgYnlcclxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUgcHJvdmlkZXJ9LCBpbnN0YW50aWF0ZSB0eXBlcywgaW52b2tlIG1ldGhvZHMsXHJcbiAqIGFuZCBsb2FkIG1vZHVsZXMuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgYWx3YXlzIGhvbGRzIHRydWU6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoKTtcclxuICogICBleHBlY3QoJGluamVjdG9yLmdldCgnJGluamVjdG9yJykpLnRvQmUoJGluamVjdG9yKTtcclxuICogICBleHBlY3QoJGluamVjdG9yLmludm9rZShmdW5jdGlvbigkaW5qZWN0b3IpIHtcclxuICogICAgIHJldHVybiAkaW5qZWN0b3I7XHJcbiAqICAgfSkpLnRvQmUoJGluamVjdG9yKTtcclxuICogYGBgXHJcbiAqXHJcbiAqICMgSW5qZWN0aW9uIEZ1bmN0aW9uIEFubm90YXRpb25cclxuICpcclxuICogSmF2YVNjcmlwdCBkb2VzIG5vdCBoYXZlIGFubm90YXRpb25zLCBhbmQgYW5ub3RhdGlvbnMgYXJlIG5lZWRlZCBmb3IgZGVwZW5kZW5jeSBpbmplY3Rpb24uIFRoZVxyXG4gKiBmb2xsb3dpbmcgYXJlIGFsbCB2YWxpZCB3YXlzIG9mIGFubm90YXRpbmcgZnVuY3Rpb24gd2l0aCBpbmplY3Rpb24gYXJndW1lbnRzIGFuZCBhcmUgZXF1aXZhbGVudC5cclxuICpcclxuICogYGBganNcclxuICogICAvLyBpbmZlcnJlZCAob25seSB3b3JrcyBpZiBjb2RlIG5vdCBtaW5pZmllZC9vYmZ1c2NhdGVkKVxyXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oc2VydmljZUEpe30pO1xyXG4gKlxyXG4gKiAgIC8vIGFubm90YXRlZFxyXG4gKiAgIGZ1bmN0aW9uIGV4cGxpY2l0KHNlcnZpY2VBKSB7fTtcclxuICogICBleHBsaWNpdC4kaW5qZWN0ID0gWydzZXJ2aWNlQSddO1xyXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZXhwbGljaXQpO1xyXG4gKlxyXG4gKiAgIC8vIGlubGluZVxyXG4gKiAgICRpbmplY3Rvci5pbnZva2UoWydzZXJ2aWNlQScsIGZ1bmN0aW9uKHNlcnZpY2VBKXt9XSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAjIyBJbmZlcmVuY2VcclxuICpcclxuICogSW4gSmF2YVNjcmlwdCBjYWxsaW5nIGB0b1N0cmluZygpYCBvbiBhIGZ1bmN0aW9uIHJldHVybnMgdGhlIGZ1bmN0aW9uIGRlZmluaXRpb24uIFRoZSBkZWZpbml0aW9uXHJcbiAqIGNhbiB0aGVuIGJlIHBhcnNlZCBhbmQgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cyBjYW4gYmUgZXh0cmFjdGVkLiBUaGlzIG1ldGhvZCBvZiBkaXNjb3ZlcmluZ1xyXG4gKiBhbm5vdGF0aW9ucyBpcyBkaXNhbGxvd2VkIHdoZW4gdGhlIGluamVjdG9yIGlzIGluIHN0cmljdCBtb2RlLlxyXG4gKiAqTk9URToqIFRoaXMgZG9lcyBub3Qgd29yayB3aXRoIG1pbmlmaWNhdGlvbiwgYW5kIG9iZnVzY2F0aW9uIHRvb2xzIHNpbmNlIHRoZXNlIHRvb2xzIGNoYW5nZSB0aGVcclxuICogYXJndW1lbnQgbmFtZXMuXHJcbiAqXHJcbiAqICMjIGAkaW5qZWN0YCBBbm5vdGF0aW9uXHJcbiAqIEJ5IGFkZGluZyBhbiBgJGluamVjdGAgcHJvcGVydHkgb250byBhIGZ1bmN0aW9uIHRoZSBpbmplY3Rpb24gcGFyYW1ldGVycyBjYW4gYmUgc3BlY2lmaWVkLlxyXG4gKlxyXG4gKiAjIyBJbmxpbmVcclxuICogQXMgYW4gYXJyYXkgb2YgaW5qZWN0aW9uIG5hbWVzLCB3aGVyZSB0aGUgbGFzdCBpdGVtIGluIHRoZSBhcnJheSBpcyB0aGUgZnVuY3Rpb24gdG8gY2FsbC5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkaW5qZWN0b3IjZ2V0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBSZXR1cm4gYW4gaW5zdGFuY2Ugb2YgdGhlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZSB0byByZXRyaWV2ZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGNhbGxlciBBbiBvcHRpb25hbCBzdHJpbmcgdG8gcHJvdmlkZSB0aGUgb3JpZ2luIG9mIHRoZSBmdW5jdGlvbiBjYWxsIGZvciBlcnJvciBtZXNzYWdlcy5cclxuICogQHJldHVybiB7Kn0gVGhlIGluc3RhbmNlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRpbmplY3RvciNpbnZva2VcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEludm9rZSB0aGUgbWV0aG9kIGFuZCBzdXBwbHkgdGhlIG1ldGhvZCBhcmd1bWVudHMgZnJvbSB0aGUgYCRpbmplY3RvcmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLiBGdW5jdGlvbiBwYXJhbWV0ZXJzIGFyZSBpbmplY3RlZCBhY2NvcmRpbmcgdG8gdGhlXHJcbiAqICAge0BsaW5rIGd1aWRlL2RpICRpbmplY3QgQW5ub3RhdGlvbn0gcnVsZXMuXHJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gc2VsZiBUaGUgYHRoaXNgIGZvciB0aGUgaW52b2tlZCBtZXRob2QuXHJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgZmlyc3QsIGJlZm9yZSB0aGUgYCRpbmplY3RvcmAgaXMgY29uc3VsdGVkLlxyXG4gKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBpbnZva2VkIGBmbmAgZnVuY3Rpb24uXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJGluamVjdG9yI2hhc1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQWxsb3dzIHRoZSB1c2VyIHRvIHF1ZXJ5IGlmIHRoZSBwYXJ0aWN1bGFyIHNlcnZpY2UgZXhpc3RzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIHF1ZXJ5LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIGluamVjdG9yIGhhcyBnaXZlbiBzZXJ2aWNlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRpbmplY3RvciNpbnN0YW50aWF0ZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEpTIHR5cGUuIFRoZSBtZXRob2QgdGFrZXMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaW52b2tlcyB0aGUgbmV3XHJcbiAqIG9wZXJhdG9yLCBhbmQgc3VwcGxpZXMgYWxsIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFzIHNwZWNpZmllZCBieSB0aGVcclxuICogY29uc3RydWN0b3IgYW5ub3RhdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gVHlwZSBBbm5vdGF0ZWQgY29uc3RydWN0b3IgZnVuY3Rpb24uXHJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xyXG4gKiBvYmplY3QgZmlyc3QsIGJlZm9yZSB0aGUgYCRpbmplY3RvcmAgaXMgY29uc3VsdGVkLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBuZXcgaW5zdGFuY2Ugb2YgYFR5cGVgLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRpbmplY3RvciNhbm5vdGF0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogUmV0dXJucyBhbiBhcnJheSBvZiBzZXJ2aWNlIG5hbWVzIHdoaWNoIHRoZSBmdW5jdGlvbiBpcyByZXF1ZXN0aW5nIGZvciBpbmplY3Rpb24uIFRoaXMgQVBJIGlzXHJcbiAqIHVzZWQgYnkgdGhlIGluamVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzZXJ2aWNlcyBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uIHdoZW4gdGhlXHJcbiAqIGZ1bmN0aW9uIGlzIGludm9rZWQuIFRoZXJlIGFyZSB0aHJlZSB3YXlzIGluIHdoaWNoIHRoZSBmdW5jdGlvbiBjYW4gYmUgYW5ub3RhdGVkIHdpdGggdGhlIG5lZWRlZFxyXG4gKiBkZXBlbmRlbmNpZXMuXHJcbiAqXHJcbiAqICMgQXJndW1lbnQgbmFtZXNcclxuICpcclxuICogVGhlIHNpbXBsZXN0IGZvcm0gaXMgdG8gZXh0cmFjdCB0aGUgZGVwZW5kZW5jaWVzIGZyb20gdGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24uIFRoaXMgaXMgZG9uZVxyXG4gKiBieSBjb252ZXJ0aW5nIHRoZSBmdW5jdGlvbiBpbnRvIGEgc3RyaW5nIHVzaW5nIGB0b1N0cmluZygpYCBtZXRob2QgYW5kIGV4dHJhY3RpbmcgdGhlIGFyZ3VtZW50XHJcbiAqIG5hbWVzLlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIEdpdmVuXHJcbiAqICAgZnVuY3Rpb24gTXlDb250cm9sbGVyKCRzY29wZSwgJHJvdXRlKSB7XHJcbiAqICAgICAvLyAuLi5cclxuICogICB9XHJcbiAqXHJcbiAqICAgLy8gVGhlblxyXG4gKiAgIGV4cGVjdChpbmplY3Rvci5hbm5vdGF0ZShNeUNvbnRyb2xsZXIpKS50b0VxdWFsKFsnJHNjb3BlJywgJyRyb3V0ZSddKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIFlvdSBjYW4gZGlzYWxsb3cgdGhpcyBtZXRob2QgYnkgdXNpbmcgc3RyaWN0IGluamVjdGlvbiBtb2RlLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIHdpdGggY29kZSBtaW5pZmljYXRpb24gLyBvYmZ1c2NhdGlvbi4gRm9yIHRoaXMgcmVhc29uIHRoZSBmb2xsb3dpbmdcclxuICogYW5ub3RhdGlvbiBzdHJhdGVnaWVzIGFyZSBzdXBwb3J0ZWQuXHJcbiAqXHJcbiAqICMgVGhlIGAkaW5qZWN0YCBwcm9wZXJ0eVxyXG4gKlxyXG4gKiBJZiBhIGZ1bmN0aW9uIGhhcyBhbiBgJGluamVjdGAgcHJvcGVydHkgYW5kIGl0cyB2YWx1ZSBpcyBhbiBhcnJheSBvZiBzdHJpbmdzLCB0aGVuIHRoZSBzdHJpbmdzXHJcbiAqIHJlcHJlc2VudCBuYW1lcyBvZiBzZXJ2aWNlcyB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBmdW5jdGlvbi5cclxuICogYGBganNcclxuICogICAvLyBHaXZlblxyXG4gKiAgIHZhciBNeUNvbnRyb2xsZXIgPSBmdW5jdGlvbihvYmZ1c2NhdGVkU2NvcGUsIG9iZnVzY2F0ZWRSb3V0ZSkge1xyXG4gKiAgICAgLy8gLi4uXHJcbiAqICAgfVxyXG4gKiAgIC8vIERlZmluZSBmdW5jdGlvbiBkZXBlbmRlbmNpZXNcclxuICogICBNeUNvbnRyb2xsZXJbJyRpbmplY3QnXSA9IFsnJHNjb3BlJywgJyRyb3V0ZSddO1xyXG4gKlxyXG4gKiAgIC8vIFRoZW5cclxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoTXlDb250cm9sbGVyKSkudG9FcXVhbChbJyRzY29wZScsICckcm91dGUnXSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAjIFRoZSBhcnJheSBub3RhdGlvblxyXG4gKlxyXG4gKiBJdCBpcyBvZnRlbiBkZXNpcmFibGUgdG8gaW5saW5lIEluamVjdGVkIGZ1bmN0aW9ucyBhbmQgdGhhdCdzIHdoZW4gc2V0dGluZyB0aGUgYCRpbmplY3RgIHByb3BlcnR5XHJcbiAqIGlzIHZlcnkgaW5jb252ZW5pZW50LiBJbiB0aGVzZSBzaXR1YXRpb25zIHVzaW5nIHRoZSBhcnJheSBub3RhdGlvbiB0byBzcGVjaWZ5IHRoZSBkZXBlbmRlbmNpZXMgaW5cclxuICogYSB3YXkgdGhhdCBzdXJ2aXZlcyBtaW5pZmljYXRpb24gaXMgYSBiZXR0ZXIgY2hvaWNlOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIFdlIHdpc2ggdG8gd3JpdGUgdGhpcyAobm90IG1pbmlmaWNhdGlvbiAvIG9iZnVzY2F0aW9uIHNhZmUpXHJcbiAqICAgaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlLCAkcm9vdFNjb3BlKSB7XHJcbiAqICAgICAvLyAuLi5cclxuICogICB9KTtcclxuICpcclxuICogICAvLyBXZSBhcmUgZm9yY2VkIHRvIHdyaXRlIGJyZWFrIGlubGluaW5nXHJcbiAqICAgdmFyIHRtcEZuID0gZnVuY3Rpb24ob2JmdXNjYXRlZENvbXBpbGUsIG9iZnVzY2F0ZWRSb290U2NvcGUpIHtcclxuICogICAgIC8vIC4uLlxyXG4gKiAgIH07XHJcbiAqICAgdG1wRm4uJGluamVjdCA9IFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZSddO1xyXG4gKiAgIGluamVjdG9yLmludm9rZSh0bXBGbik7XHJcbiAqXHJcbiAqICAgLy8gVG8gYmV0dGVyIHN1cHBvcnQgaW5saW5lIGZ1bmN0aW9uIHRoZSBpbmxpbmUgYW5ub3RhdGlvbiBpcyBzdXBwb3J0ZWRcclxuICogICBpbmplY3Rvci5pbnZva2UoWyckY29tcGlsZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24ob2JmQ29tcGlsZSwgb2JmUm9vdFNjb3BlKSB7XHJcbiAqICAgICAvLyAuLi5cclxuICogICB9XSk7XHJcbiAqXHJcbiAqICAgLy8gVGhlcmVmb3JlXHJcbiAqICAgZXhwZWN0KGluamVjdG9yLmFubm90YXRlKFxyXG4gKiAgICAgIFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKG9iZnVzXyRjb21waWxlLCBvYmZ1c18kcm9vdFNjb3BlKSB7fV0pXHJcbiAqICAgICkudG9FcXVhbChbJyRjb21waWxlJywgJyRyb290U2NvcGUnXSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBmbiBGdW5jdGlvbiBmb3Igd2hpY2ggZGVwZW5kZW50IHNlcnZpY2UgbmFtZXMgbmVlZCB0b1xyXG4gKiBiZSByZXRyaWV2ZWQgYXMgZGVzY3JpYmVkIGFib3ZlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbc3RyaWN0RGk9ZmFsc2VdIERpc2FsbG93IGFyZ3VtZW50IG5hbWUgYW5ub3RhdGlvbiBpbmZlcmVuY2UuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gVGhlIG5hbWVzIG9mIHRoZSBzZXJ2aWNlcyB3aGljaCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXHJcbiAqL1xyXG5cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRwcm92aWRlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBUaGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGEgbnVtYmVyIG9mIG1ldGhvZHMgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudHNcclxuICogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIE1hbnkgb2YgdGhlc2UgZnVuY3Rpb25zIGFyZSBhbHNvIGV4cG9zZWQgb25cclxuICoge0BsaW5rIGFuZ3VsYXIuTW9kdWxlfS5cclxuICpcclxuICogQW4gQW5ndWxhciAqKnNlcnZpY2UqKiBpcyBhIHNpbmdsZXRvbiBvYmplY3QgY3JlYXRlZCBieSBhICoqc2VydmljZSBmYWN0b3J5KiouICBUaGVzZSAqKnNlcnZpY2VcclxuICogZmFjdG9yaWVzKiogYXJlIGZ1bmN0aW9ucyB3aGljaCwgaW4gdHVybiwgYXJlIGNyZWF0ZWQgYnkgYSAqKnNlcnZpY2UgcHJvdmlkZXIqKi5cclxuICogVGhlICoqc2VydmljZSBwcm92aWRlcnMqKiBhcmUgY29uc3RydWN0b3IgZnVuY3Rpb25zLiBXaGVuIGluc3RhbnRpYXRlZCB0aGV5IG11c3QgY29udGFpbiBhXHJcbiAqIHByb3BlcnR5IGNhbGxlZCBgJGdldGAsIHdoaWNoIGhvbGRzIHRoZSAqKnNlcnZpY2UgZmFjdG9yeSoqIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBXaGVuIHlvdSByZXF1ZXN0IGEgc2VydmljZSwgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9IGlzIHJlc3BvbnNpYmxlIGZvciBmaW5kaW5nIHRoZVxyXG4gKiBjb3JyZWN0ICoqc2VydmljZSBwcm92aWRlcioqLCBpbnN0YW50aWF0aW5nIGl0IGFuZCB0aGVuIGNhbGxpbmcgaXRzIGAkZ2V0YCAqKnNlcnZpY2UgZmFjdG9yeSoqXHJcbiAqIGZ1bmN0aW9uIHRvIGdldCB0aGUgaW5zdGFuY2Ugb2YgdGhlICoqc2VydmljZSoqLlxyXG4gKlxyXG4gKiBPZnRlbiBzZXJ2aWNlcyBoYXZlIG5vIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBhbmQgdGhlcmUgaXMgbm8gbmVlZCB0byBhZGQgbWV0aG9kcyB0byB0aGUgc2VydmljZVxyXG4gKiBwcm92aWRlci4gIFRoZSBwcm92aWRlciB3aWxsIGJlIG5vIG1vcmUgdGhhbiBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHdpdGggYSBgJGdldGAgcHJvcGVydHkuIEZvclxyXG4gKiB0aGVzZSBjYXNlcyB0aGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHMgdG8gcmVnaXN0ZXJcclxuICogc2VydmljZXMgd2l0aG91dCBzcGVjaWZ5aW5nIGEgcHJvdmlkZXIuXHJcbiAqXHJcbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgcHJvdmlkZXIocHJvdmlkZXIpfSAtIHJlZ2lzdGVycyBhICoqc2VydmljZSBwcm92aWRlcioqIHdpdGggdGhlXHJcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfVxyXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2NvbnN0YW50IGNvbnN0YW50KG9iail9IC0gcmVnaXN0ZXJzIGEgdmFsdWUvb2JqZWN0IHRoYXQgY2FuIGJlIGFjY2Vzc2VkIGJ5XHJcbiAqICAgICBwcm92aWRlcnMgYW5kIHNlcnZpY2VzLlxyXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlKG9iail9IC0gcmVnaXN0ZXJzIGEgdmFsdWUvb2JqZWN0IHRoYXQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnlcclxuICogICAgIHNlcnZpY2VzLCBub3QgcHJvdmlkZXJzLlxyXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2ZhY3RvcnkgZmFjdG9yeShmbil9IC0gcmVnaXN0ZXJzIGEgc2VydmljZSAqKmZhY3RvcnkgZnVuY3Rpb24qKiwgYGZuYCxcclxuICogICAgIHRoYXQgd2lsbCBiZSB3cmFwcGVkIGluIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogb2JqZWN0LCB3aG9zZSBgJGdldGAgcHJvcGVydHkgd2lsbCBjb250YWluIHRoZVxyXG4gKiAgICAgZ2l2ZW4gZmFjdG9yeSBmdW5jdGlvbi5cclxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlIHNlcnZpY2UoY2xhc3MpfSAtIHJlZ2lzdGVycyBhICoqY29uc3RydWN0b3IgZnVuY3Rpb24qKiwgYGNsYXNzYFxyXG4gKiAgICAgdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSAqKnNlcnZpY2UgcHJvdmlkZXIqKiBvYmplY3QsIHdob3NlIGAkZ2V0YCBwcm9wZXJ0eSB3aWxsIGluc3RhbnRpYXRlXHJcbiAqICAgICAgYSBuZXcgb2JqZWN0IHVzaW5nIHRoZSBnaXZlbiBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cclxuICpcclxuICogU2VlIHRoZSBpbmRpdmlkdWFsIG1ldGhvZHMgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRwcm92aWRlI3Byb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqcHJvdmlkZXIgZnVuY3Rpb24qKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gUHJvdmlkZXIgZnVuY3Rpb25zXHJcbiAqIGFyZSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMsIHdob3NlIGluc3RhbmNlcyBhcmUgcmVzcG9uc2libGUgZm9yIFwicHJvdmlkaW5nXCIgYSBmYWN0b3J5IGZvciBhXHJcbiAqIHNlcnZpY2UuXHJcbiAqXHJcbiAqIFNlcnZpY2UgcHJvdmlkZXIgbmFtZXMgc3RhcnQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgc2VydmljZSB0aGV5IHByb3ZpZGUgZm9sbG93ZWQgYnkgYFByb3ZpZGVyYC5cclxuICogRm9yIGV4YW1wbGUsIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIGhhcyBhIHByb3ZpZGVyIGNhbGxlZFxyXG4gKiB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0uXHJcbiAqXHJcbiAqIFNlcnZpY2UgcHJvdmlkZXIgb2JqZWN0cyBjYW4gaGF2ZSBhZGRpdGlvbmFsIG1ldGhvZHMgd2hpY2ggYWxsb3cgY29uZmlndXJhdGlvbiBvZiB0aGUgcHJvdmlkZXJcclxuICogYW5kIGl0cyBzZXJ2aWNlLiBJbXBvcnRhbnRseSwgeW91IGNhbiBjb25maWd1cmUgd2hhdCBraW5kIG9mIHNlcnZpY2UgaXMgY3JlYXRlZCBieSB0aGUgYCRnZXRgXHJcbiAqIG1ldGhvZCwgb3IgaG93IHRoYXQgc2VydmljZSB3aWxsIGFjdC4gRm9yIGV4YW1wbGUsIHRoZSB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0gaGFzIGFcclxuICogbWV0aG9kIHtAbGluayBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkIGRlYnVnRW5hYmxlZH1cclxuICogd2hpY2ggbGV0cyB5b3Ugc3BlY2lmeSB3aGV0aGVyIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIHdpbGwgbG9nIGRlYnVnIG1lc3NhZ2VzIHRvIHRoZVxyXG4gKiBjb25zb2xlIG9yIG5vdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLiBOT1RFOiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBhdmFpbGFibGUgdW5kZXIgYG5hbWUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnUHJvdmlkZXInYCBrZXkuXHJcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbigpKX0gcHJvdmlkZXIgSWYgdGhlIHByb3ZpZGVyIGlzOlxyXG4gKlxyXG4gKiAgIC0gYE9iamVjdGA6IHRoZW4gaXQgc2hvdWxkIGhhdmUgYSBgJGdldGAgbWV0aG9kLiBUaGUgYCRnZXRgIG1ldGhvZCB3aWxsIGJlIGludm9rZWQgdXNpbmdcclxuICogICAgIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgJGluamVjdG9yLmludm9rZSgpfSB3aGVuIGFuIGluc3RhbmNlIG5lZWRzIHRvIGJlIGNyZWF0ZWQuXHJcbiAqICAgLSBgQ29uc3RydWN0b3JgOiBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBjcmVhdGVkIHVzaW5nXHJcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IjaW5zdGFudGlhdGUgJGluamVjdG9yLmluc3RhbnRpYXRlKCl9LCB0aGVuIHRyZWF0ZWQgYXMgYG9iamVjdGAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcclxuXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gY3JlYXRlIGEgc2ltcGxlIGV2ZW50IHRyYWNraW5nIHNlcnZpY2UgYW5kIHJlZ2lzdGVyIGl0IHVzaW5nXHJcbiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3Byb3ZpZGVyICRwcm92aWRlLnByb3ZpZGVyKCl9LlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgLy8gRGVmaW5lIHRoZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcclxuICogIGZ1bmN0aW9uIEV2ZW50VHJhY2tlclByb3ZpZGVyKCkge1xyXG4gKiAgICB2YXIgdHJhY2tpbmdVcmwgPSAnL3RyYWNrJztcclxuICpcclxuICogICAgLy8gQSBwcm92aWRlciBtZXRob2QgZm9yIGNvbmZpZ3VyaW5nIHdoZXJlIHRoZSB0cmFja2VkIGV2ZW50cyBzaG91bGQgYmVlbiBzYXZlZFxyXG4gKiAgICB0aGlzLnNldFRyYWNraW5nVXJsID0gZnVuY3Rpb24odXJsKSB7XHJcbiAqICAgICAgdHJhY2tpbmdVcmwgPSB1cmw7XHJcbiAqICAgIH07XHJcbiAqXHJcbiAqICAgIC8vIFRoZSBzZXJ2aWNlIGZhY3RvcnkgZnVuY3Rpb25cclxuICogICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XHJcbiAqICAgICAgdmFyIHRyYWNrZWRFdmVudHMgPSB7fTtcclxuICogICAgICByZXR1cm4ge1xyXG4gKiAgICAgICAgLy8gQ2FsbCB0aGlzIHRvIHRyYWNrIGFuIGV2ZW50XHJcbiAqICAgICAgICBldmVudDogZnVuY3Rpb24oZXZlbnQpIHtcclxuICogICAgICAgICAgdmFyIGNvdW50ID0gdHJhY2tlZEV2ZW50c1tldmVudF0gfHwgMDtcclxuICogICAgICAgICAgY291bnQgKz0gMTtcclxuICogICAgICAgICAgdHJhY2tlZEV2ZW50c1tldmVudF0gPSBjb3VudDtcclxuICogICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gKiAgICAgICAgfSxcclxuICogICAgICAgIC8vIENhbGwgdGhpcyB0byBzYXZlIHRoZSB0cmFja2VkIGV2ZW50cyB0byB0aGUgdHJhY2tpbmdVcmxcclxuICogICAgICAgIHNhdmU6IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICAgICAkaHR0cC5wb3N0KHRyYWNraW5nVXJsLCB0cmFja2VkRXZlbnRzKTtcclxuICogICAgICAgIH1cclxuICogICAgICB9O1xyXG4gKiAgICB9XTtcclxuICogIH1cclxuICpcclxuICogIGRlc2NyaWJlKCdldmVudFRyYWNrZXInLCBmdW5jdGlvbigpIHtcclxuICogICAgdmFyIHBvc3RTcHk7XHJcbiAqXHJcbiAqICAgIGJlZm9yZUVhY2gobW9kdWxlKGZ1bmN0aW9uKCRwcm92aWRlKSB7XHJcbiAqICAgICAgLy8gUmVnaXN0ZXIgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxyXG4gKiAgICAgICRwcm92aWRlLnByb3ZpZGVyKCdldmVudFRyYWNrZXInLCBFdmVudFRyYWNrZXJQcm92aWRlcik7XHJcbiAqICAgIH0pKTtcclxuICpcclxuICogICAgYmVmb3JlRWFjaChtb2R1bGUoZnVuY3Rpb24oZXZlbnRUcmFja2VyUHJvdmlkZXIpIHtcclxuICogICAgICAvLyBDb25maWd1cmUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXHJcbiAqICAgICAgZXZlbnRUcmFja2VyUHJvdmlkZXIuc2V0VHJhY2tpbmdVcmwoJy9jdXN0b20tdHJhY2snKTtcclxuICogICAgfSkpO1xyXG4gKlxyXG4gKiAgICBpdCgndHJhY2tzIGV2ZW50cycsIGluamVjdChmdW5jdGlvbihldmVudFRyYWNrZXIpIHtcclxuICogICAgICBleHBlY3QoZXZlbnRUcmFja2VyLmV2ZW50KCdsb2dpbicpKS50b0VxdWFsKDEpO1xyXG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMik7XHJcbiAqICAgIH0pKTtcclxuICpcclxuICogICAgaXQoJ3NhdmVzIHRvIHRoZSB0cmFja2luZyB1cmwnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyLCAkaHR0cCkge1xyXG4gKiAgICAgIHBvc3RTcHkgPSBzcHlPbigkaHR0cCwgJ3Bvc3QnKTtcclxuICogICAgICBldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJyk7XHJcbiAqICAgICAgZXZlbnRUcmFja2VyLnNhdmUoKTtcclxuICogICAgICBleHBlY3QocG9zdFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0pLm5vdC50b0VxdWFsKCcvdHJhY2snKTtcclxuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdKS50b0VxdWFsKCcvY3VzdG9tLXRyYWNrJyk7XHJcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1sxXSkudG9FcXVhbCh7ICdsb2dpbic6IDEgfSk7XHJcbiAqICAgIH0pKTtcclxuICogIH0pO1xyXG4gKiBgYGBcclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcHJvdmlkZSNmYWN0b3J5XHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBmYWN0b3J5KiosIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHRvIHJldHVybiB0aGUgc2VydmljZSBpbnN0YW5jZS5cclxuICogVGhpcyBpcyBzaG9ydCBmb3IgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHdoZXJlIGl0cyBwcm92aWRlciBjb25zaXN0cyBvZiBvbmx5IGEgYCRnZXRgIHByb3BlcnR5LFxyXG4gKiB3aGljaCBpcyB0aGUgZ2l2ZW4gc2VydmljZSBmYWN0b3J5IGZ1bmN0aW9uLlxyXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoZ2V0Rm4pfSBpZiB5b3UgZG8gbm90IG5lZWQgdG9cclxuICogY29uZmlndXJlIHlvdXIgc2VydmljZSBpbiBhIHByb3ZpZGVyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gJGdldEZuIFRoZSAkZ2V0Rm4gZm9yIHRoZSBpbnN0YW5jZSBjcmVhdGlvbi4gSW50ZXJuYWxseSB0aGlzIGlzIGEgc2hvcnQgaGFuZFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgYCRwcm92aWRlLnByb3ZpZGVyKG5hbWUsIHskZ2V0OiAkZ2V0Rm59KWAuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcclxuICpcclxuICogQGV4YW1wbGVcclxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZVxyXG4gKiBgYGBqc1xyXG4gKiAgICRwcm92aWRlLmZhY3RvcnkoJ3BpbmcnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcclxuICogICAgIHJldHVybiBmdW5jdGlvbiBwaW5nKCkge1xyXG4gKiAgICAgICByZXR1cm4gJGh0dHAuc2VuZCgnL3BpbmcnKTtcclxuICogICAgIH07XHJcbiAqICAgfV0pO1xyXG4gKiBgYGBcclxuICogWW91IHdvdWxkIHRoZW4gaW5qZWN0IGFuZCB1c2UgdGhpcyBzZXJ2aWNlIGxpa2UgdGhpczpcclxuICogYGBganNcclxuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XHJcbiAqICAgICBwaW5nKCk7XHJcbiAqICAgfV0pO1xyXG4gKiBgYGBcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBtZXRob2RcclxuICogQG5hbWUgJHByb3ZpZGUjc2VydmljZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogUmVnaXN0ZXIgYSAqKnNlcnZpY2UgY29uc3RydWN0b3IqKiwgd2hpY2ggd2lsbCBiZSBpbnZva2VkIHdpdGggYG5ld2AgdG8gY3JlYXRlIHRoZSBzZXJ2aWNlXHJcbiAqIGluc3RhbmNlLlxyXG4gKiBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIHRoZSBzZXJ2aWNlXHJcbiAqIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGluc3RhbnRpYXRlIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfSBpZiB5b3UgZGVmaW5lIHlvdXIgc2VydmljZVxyXG4gKiBhcyBhIHR5cGUvY2xhc3MuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQSBjbGFzcyAoY29uc3RydWN0b3IgZnVuY3Rpb24pIHRoYXQgd2lsbCBiZSBpbnN0YW50aWF0ZWQuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcclxuICpcclxuICogQGV4YW1wbGVcclxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB1c2luZ1xyXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfS5cclxuICogYGBganNcclxuICogICB2YXIgUGluZyA9IGZ1bmN0aW9uKCRodHRwKSB7XHJcbiAqICAgICB0aGlzLiRodHRwID0gJGh0dHA7XHJcbiAqICAgfTtcclxuICpcclxuICogICBQaW5nLiRpbmplY3QgPSBbJyRodHRwJ107XHJcbiAqXHJcbiAqICAgUGluZy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0KCcvcGluZycpO1xyXG4gKiAgIH07XHJcbiAqICAgJHByb3ZpZGUuc2VydmljZSgncGluZycsIFBpbmcpO1xyXG4gKiBgYGBcclxuICogWW91IHdvdWxkIHRoZW4gaW5qZWN0IGFuZCB1c2UgdGhpcyBzZXJ2aWNlIGxpa2UgdGhpczpcclxuICogYGBganNcclxuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XHJcbiAqICAgICBwaW5nLnNlbmQoKTtcclxuICogICB9XSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcHJvdmlkZSN2YWx1ZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogUmVnaXN0ZXIgYSAqKnZhbHVlIHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZywgYVxyXG4gKiBudW1iZXIsIGFuIGFycmF5LCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbi4gIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHNcclxuICogcHJvdmlkZXIncyBgJGdldGAgcHJvcGVydHkgaXMgYSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRzIGFuZCByZXR1cm5zIHRoZSAqKnZhbHVlXHJcbiAqIHNlcnZpY2UqKi5cclxuICpcclxuICogVmFsdWUgc2VydmljZXMgYXJlIHNpbWlsYXIgdG8gY29uc3RhbnQgc2VydmljZXMsIGV4Y2VwdCB0aGF0IHRoZXkgY2Fubm90IGJlIGluamVjdGVkIGludG8gYVxyXG4gKiBtb2R1bGUgY29uZmlndXJhdGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWd9KSBidXQgdGhleSBjYW4gYmUgb3ZlcnJpZGRlbiBieVxyXG4gKiBhbiBBbmd1bGFyXHJcbiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIHByb3ZpZGVyIGluc3RhbmNlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEhlcmUgYXJlIHNvbWUgZXhhbXBsZXMgb2YgY3JlYXRpbmcgdmFsdWUgc2VydmljZXMuXHJcbiAqIGBgYGpzXHJcbiAqICAgJHByb3ZpZGUudmFsdWUoJ0FETUlOX1VTRVInLCAnYWRtaW4nKTtcclxuICpcclxuICogICAkcHJvdmlkZS52YWx1ZSgnUm9sZUxvb2t1cCcsIHsgYWRtaW46IDAsIHdyaXRlcjogMSwgcmVhZGVyOiAyIH0pO1xyXG4gKlxyXG4gKiAgICRwcm92aWRlLnZhbHVlKCdoYWxmT2YnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gKiAgICAgcmV0dXJuIHZhbHVlIC8gMjtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRwcm92aWRlI2NvbnN0YW50XHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBSZWdpc3RlciBhICoqY29uc3RhbnQgc2VydmljZSoqLCBzdWNoIGFzIGEgc3RyaW5nLCBhIG51bWJlciwgYW4gYXJyYXksIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLFxyXG4gKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gVW5saWtlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlfSBpdCBjYW4gYmVcclxuICogaW5qZWN0ZWQgaW50byBhIG1vZHVsZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ30pIGFuZCBpdCBjYW5ub3RcclxuICogYmUgb3ZlcnJpZGRlbiBieSBhbiBBbmd1bGFyIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY29uc3RhbnQuXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIGNvbnN0YW50IHZhbHVlLlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIGluc3RhbmNlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEhlcmUgYSBzb21lIGV4YW1wbGVzIG9mIGNyZWF0aW5nIGNvbnN0YW50czpcclxuICogYGBganNcclxuICogICAkcHJvdmlkZS5jb25zdGFudCgnU0hBUkRfSEVJR0hUJywgMzA2KTtcclxuICpcclxuICogICAkcHJvdmlkZS5jb25zdGFudCgnTVlfQ09MT1VSUycsIFsncmVkJywgJ2JsdWUnLCAnZ3JleSddKTtcclxuICpcclxuICogICAkcHJvdmlkZS5jb25zdGFudCgnZG91YmxlJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICogICAgIHJldHVybiB2YWx1ZSAqIDI7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIG1ldGhvZFxyXG4gKiBAbmFtZSAkcHJvdmlkZSNkZWNvcmF0b3JcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGRlY29yYXRvcioqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBBIHNlcnZpY2UgZGVjb3JhdG9yXHJcbiAqIGludGVyY2VwdHMgdGhlIGNyZWF0aW9uIG9mIGEgc2VydmljZSwgYWxsb3dpbmcgaXQgdG8gb3ZlcnJpZGUgb3IgbW9kaWZ5IHRoZSBiZWhhdmlvdXIgb2YgdGhlXHJcbiAqIHNlcnZpY2UuIFRoZSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGRlY29yYXRvciBtYXkgYmUgdGhlIG9yaWdpbmFsIHNlcnZpY2UsIG9yIGEgbmV3IHNlcnZpY2VcclxuICogb2JqZWN0IHdoaWNoIHJlcGxhY2VzIG9yIHdyYXBzIGFuZCBkZWxlZ2F0ZXMgdG8gdGhlIG9yaWdpbmFsIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIGRlY29yYXRlLlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGRlY29yYXRvciBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBzZXJ2aWNlIG5lZWRzIHRvIGJlXHJcbiAqICAgIGluc3RhbnRpYXRlZCBhbmQgc2hvdWxkIHJldHVybiB0aGUgZGVjb3JhdGVkIHNlcnZpY2UgaW5zdGFuY2UuIFRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgdXNpbmdcclxuICogICAgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0b3IuaW52b2tlfSBtZXRob2QgYW5kIGlzIHRoZXJlZm9yZSBmdWxseSBpbmplY3RhYmxlLlxyXG4gKiAgICBMb2NhbCBpbmplY3Rpb24gYXJndW1lbnRzOlxyXG4gKlxyXG4gKiAgICAqIGAkZGVsZWdhdGVgIC0gVGhlIG9yaWdpbmFsIHNlcnZpY2UgaW5zdGFuY2UsIHdoaWNoIGNhbiBiZSBtb25rZXkgcGF0Y2hlZCwgY29uZmlndXJlZCxcclxuICogICAgICBkZWNvcmF0ZWQgb3IgZGVsZWdhdGVkIHRvLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBIZXJlIHdlIGRlY29yYXRlIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIHRvIGNvbnZlcnQgd2FybmluZ3MgdG8gZXJyb3JzIGJ5IGludGVyY2VwdGluZ1xyXG4gKiBjYWxscyB0byB7QGxpbmsgbmcuJGxvZyNlcnJvciAkbG9nLndhcm4oKX0uXHJcbiAqIGBgYGpzXHJcbiAqICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckbG9nJywgWyckZGVsZWdhdGUnLCBmdW5jdGlvbigkZGVsZWdhdGUpIHtcclxuICogICAgICRkZWxlZ2F0ZS53YXJuID0gJGRlbGVnYXRlLmVycm9yO1xyXG4gKiAgICAgcmV0dXJuICRkZWxlZ2F0ZTtcclxuICogICB9XSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVJbmplY3Rvcihtb2R1bGVzVG9Mb2FkLCBzdHJpY3REaSkge1xyXG4gIHN0cmljdERpID0gKHN0cmljdERpID09PSB0cnVlKTtcclxuICB2YXIgSU5TVEFOVElBVElORyA9IHt9LFxyXG4gICAgICBwcm92aWRlclN1ZmZpeCA9ICdQcm92aWRlcicsXHJcbiAgICAgIHBhdGggPSBbXSxcclxuICAgICAgbG9hZGVkTW9kdWxlcyA9IG5ldyBIYXNoTWFwKFtdLCB0cnVlKSxcclxuICAgICAgcHJvdmlkZXJDYWNoZSA9IHtcclxuICAgICAgICAkcHJvdmlkZToge1xyXG4gICAgICAgICAgICBwcm92aWRlcjogc3VwcG9ydE9iamVjdChwcm92aWRlciksXHJcbiAgICAgICAgICAgIGZhY3Rvcnk6IHN1cHBvcnRPYmplY3QoZmFjdG9yeSksXHJcbiAgICAgICAgICAgIHNlcnZpY2U6IHN1cHBvcnRPYmplY3Qoc2VydmljZSksXHJcbiAgICAgICAgICAgIHZhbHVlOiBzdXBwb3J0T2JqZWN0KHZhbHVlKSxcclxuICAgICAgICAgICAgY29uc3RhbnQ6IHN1cHBvcnRPYmplY3QoY29uc3RhbnQpLFxyXG4gICAgICAgICAgICBkZWNvcmF0b3I6IGRlY29yYXRvclxyXG4gICAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBwcm92aWRlckluamVjdG9yID0gKHByb3ZpZGVyQ2FjaGUuJGluamVjdG9yID1cclxuICAgICAgICAgIGNyZWF0ZUludGVybmFsSW5qZWN0b3IocHJvdmlkZXJDYWNoZSwgZnVuY3Rpb24oc2VydmljZU5hbWUsIGNhbGxlcikge1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyhjYWxsZXIpKSB7XHJcbiAgICAgICAgICAgICAgcGF0aC5wdXNoKGNhbGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCd1bnByJywgXCJVbmtub3duIHByb3ZpZGVyOiB7MH1cIiwgcGF0aC5qb2luKCcgPC0gJykpO1xyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICBpbnN0YW5jZUNhY2hlID0ge30sXHJcbiAgICAgIGluc3RhbmNlSW5qZWN0b3IgPSAoaW5zdGFuY2VDYWNoZS4kaW5qZWN0b3IgPVxyXG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3RvcihpbnN0YW5jZUNhY2hlLCBmdW5jdGlvbihzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlciA9IHByb3ZpZGVySW5qZWN0b3IuZ2V0KHNlcnZpY2VOYW1lICsgcHJvdmlkZXJTdWZmaXgsIGNhbGxlcik7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZUluamVjdG9yLmludm9rZShwcm92aWRlci4kZ2V0LCBwcm92aWRlciwgdW5kZWZpbmVkLCBzZXJ2aWNlTmFtZSk7XHJcbiAgICAgICAgICB9KSk7XHJcblxyXG5cclxuICBmb3JFYWNoKGxvYWRNb2R1bGVzKG1vZHVsZXNUb0xvYWQpLCBmdW5jdGlvbihmbikgeyBpbnN0YW5jZUluamVjdG9yLmludm9rZShmbiB8fCBub29wKTsgfSk7XHJcblxyXG4gIHJldHVybiBpbnN0YW5jZUluamVjdG9yO1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyAkcHJvdmlkZXJcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgZnVuY3Rpb24gc3VwcG9ydE9iamVjdChkZWxlZ2F0ZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgaWYgKGlzT2JqZWN0KGtleSkpIHtcclxuICAgICAgICBmb3JFYWNoKGtleSwgcmV2ZXJzZVBhcmFtcyhkZWxlZ2F0ZSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkZWxlZ2F0ZShrZXksIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByb3ZpZGVyKG5hbWUsIHByb3ZpZGVyXykge1xyXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ3NlcnZpY2UnKTtcclxuICAgIGlmIChpc0Z1bmN0aW9uKHByb3ZpZGVyXykgfHwgaXNBcnJheShwcm92aWRlcl8pKSB7XHJcbiAgICAgIHByb3ZpZGVyXyA9IHByb3ZpZGVySW5qZWN0b3IuaW5zdGFudGlhdGUocHJvdmlkZXJfKTtcclxuICAgIH1cclxuICAgIGlmICghcHJvdmlkZXJfLiRnZXQpIHtcclxuICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdwZ2V0JywgXCJQcm92aWRlciAnezB9JyBtdXN0IGRlZmluZSAkZ2V0IGZhY3RvcnkgbWV0aG9kLlwiLCBuYW1lKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm92aWRlckNhY2hlW25hbWUgKyBwcm92aWRlclN1ZmZpeF0gPSBwcm92aWRlcl87XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGVuZm9yY2VkUmV0dXJuVmFsdWUoKSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSBpbnN0YW5jZUluamVjdG9yLmludm9rZShmYWN0b3J5LCB0aGlzKTtcclxuICAgICAgaWYgKGlzVW5kZWZpbmVkKHJlc3VsdCkpIHtcclxuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3VuZGVmJywgXCJQcm92aWRlciAnezB9JyBtdXN0IHJldHVybiBhIHZhbHVlIGZyb20gJGdldCBmYWN0b3J5IG1ldGhvZC5cIiwgbmFtZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBmYWN0b3J5KG5hbWUsIGZhY3RvcnlGbiwgZW5mb3JjZSkge1xyXG4gICAgcmV0dXJuIHByb3ZpZGVyKG5hbWUsIHtcclxuICAgICAgJGdldDogZW5mb3JjZSAhPT0gZmFsc2UgPyBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeUZuKSA6IGZhY3RvcnlGblxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXJ2aWNlKG5hbWUsIGNvbnN0cnVjdG9yKSB7XHJcbiAgICByZXR1cm4gZmFjdG9yeShuYW1lLCBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xyXG4gICAgICByZXR1cm4gJGluamVjdG9yLmluc3RhbnRpYXRlKGNvbnN0cnVjdG9yKTtcclxuICAgIH1dKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbHVlKG5hbWUsIHZhbCkgeyByZXR1cm4gZmFjdG9yeShuYW1lLCB2YWx1ZUZuKHZhbCksIGZhbHNlKTsgfVxyXG5cclxuICBmdW5jdGlvbiBjb25zdGFudChuYW1lLCB2YWx1ZSkge1xyXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2NvbnN0YW50Jyk7XHJcbiAgICBwcm92aWRlckNhY2hlW25hbWVdID0gdmFsdWU7XHJcbiAgICBpbnN0YW5jZUNhY2hlW25hbWVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkZWNvcmF0b3Ioc2VydmljZU5hbWUsIGRlY29yRm4pIHtcclxuICAgIHZhciBvcmlnUHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChzZXJ2aWNlTmFtZSArIHByb3ZpZGVyU3VmZml4KSxcclxuICAgICAgICBvcmlnJGdldCA9IG9yaWdQcm92aWRlci4kZ2V0O1xyXG5cclxuICAgIG9yaWdQcm92aWRlci4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBvcmlnSW5zdGFuY2UgPSBpbnN0YW5jZUluamVjdG9yLmludm9rZShvcmlnJGdldCwgb3JpZ1Byb3ZpZGVyKTtcclxuICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGRlY29yRm4sIG51bGwsIHskZGVsZWdhdGU6IG9yaWdJbnN0YW5jZX0pO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIE1vZHVsZSBMb2FkaW5nXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgZnVuY3Rpb24gbG9hZE1vZHVsZXMobW9kdWxlc1RvTG9hZCkge1xyXG4gICAgdmFyIHJ1bkJsb2NrcyA9IFtdLCBtb2R1bGVGbjtcclxuICAgIGZvckVhY2gobW9kdWxlc1RvTG9hZCwgZnVuY3Rpb24obW9kdWxlKSB7XHJcbiAgICAgIGlmIChsb2FkZWRNb2R1bGVzLmdldChtb2R1bGUpKSByZXR1cm47XHJcbiAgICAgIGxvYWRlZE1vZHVsZXMucHV0KG1vZHVsZSwgdHJ1ZSk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBydW5JbnZva2VRdWV1ZShxdWV1ZSkge1xyXG4gICAgICAgIHZhciBpLCBpaTtcclxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHF1ZXVlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgIHZhciBpbnZva2VBcmdzID0gcXVldWVbaV0sXHJcbiAgICAgICAgICAgICAgcHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChpbnZva2VBcmdzWzBdKTtcclxuXHJcbiAgICAgICAgICBwcm92aWRlcltpbnZva2VBcmdzWzFdXS5hcHBseShwcm92aWRlciwgaW52b2tlQXJnc1syXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChpc1N0cmluZyhtb2R1bGUpKSB7XHJcbiAgICAgICAgICBtb2R1bGVGbiA9IGFuZ3VsYXJNb2R1bGUobW9kdWxlKTtcclxuICAgICAgICAgIHJ1bkJsb2NrcyA9IHJ1bkJsb2Nrcy5jb25jYXQobG9hZE1vZHVsZXMobW9kdWxlRm4ucmVxdWlyZXMpKS5jb25jYXQobW9kdWxlRm4uX3J1bkJsb2Nrcyk7XHJcbiAgICAgICAgICBydW5JbnZva2VRdWV1ZShtb2R1bGVGbi5faW52b2tlUXVldWUpO1xyXG4gICAgICAgICAgcnVuSW52b2tlUXVldWUobW9kdWxlRm4uX2NvbmZpZ0Jsb2Nrcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKG1vZHVsZSkpIHtcclxuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KG1vZHVsZSkpIHtcclxuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFzc2VydEFyZ0ZuKG1vZHVsZSwgJ21vZHVsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc0FycmF5KG1vZHVsZSkpIHtcclxuICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZVttb2R1bGUubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlLm1lc3NhZ2UgJiYgZS5zdGFjayAmJiBlLnN0YWNrLmluZGV4T2YoZS5tZXNzYWdlKSA9PSAtMSkge1xyXG4gICAgICAgICAgLy8gU2FmYXJpICYgRkYncyBzdGFjayB0cmFjZXMgZG9uJ3QgY29udGFpbiBlcnJvci5tZXNzYWdlIGNvbnRlbnRcclxuICAgICAgICAgIC8vIHVubGlrZSB0aG9zZSBvZiBDaHJvbWUgYW5kIElFXHJcbiAgICAgICAgICAvLyBTbyBpZiBzdGFjayBkb2Vzbid0IGNvbnRhaW4gbWVzc2FnZSwgd2UgY3JlYXRlIGEgbmV3IHN0cmluZyB0aGF0IGNvbnRhaW5zIGJvdGguXHJcbiAgICAgICAgICAvLyBTaW5jZSBlcnJvci5zdGFjayBpcyByZWFkLW9ubHkgaW4gU2FmYXJpLCBJJ20gb3ZlcnJpZGluZyBlIGFuZCBub3QgZS5zdGFjayBoZXJlLlxyXG4gICAgICAgICAgLyoganNoaW50IC1XMDIyICovXHJcbiAgICAgICAgICBlID0gZS5tZXNzYWdlICsgJ1xcbicgKyBlLnN0YWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ21vZHVsZXJyJywgXCJGYWlsZWQgdG8gaW5zdGFudGlhdGUgbW9kdWxlIHswfSBkdWUgdG86XFxuezF9XCIsXHJcbiAgICAgICAgICAgICAgICAgIG1vZHVsZSwgZS5zdGFjayB8fCBlLm1lc3NhZ2UgfHwgZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJ1bkJsb2NrcztcclxuICB9XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIGludGVybmFsIEluamVjdG9yXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoY2FjaGUsIGZhY3RvcnkpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTZXJ2aWNlKHNlcnZpY2VOYW1lLCBjYWxsZXIpIHtcclxuICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KHNlcnZpY2VOYW1lKSkge1xyXG4gICAgICAgIGlmIChjYWNoZVtzZXJ2aWNlTmFtZV0gPT09IElOU1RBTlRJQVRJTkcpIHtcclxuICAgICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignY2RlcCcsICdDaXJjdWxhciBkZXBlbmRlbmN5IGZvdW5kOiB7MH0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VOYW1lICsgJyA8LSAnICsgcGF0aC5qb2luKCcgPC0gJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FjaGVbc2VydmljZU5hbWVdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBwYXRoLnVuc2hpZnQoc2VydmljZU5hbWUpO1xyXG4gICAgICAgICAgY2FjaGVbc2VydmljZU5hbWVdID0gSU5TVEFOVElBVElORztcclxuICAgICAgICAgIHJldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBmYWN0b3J5KHNlcnZpY2VOYW1lLCBjYWxsZXIpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgaWYgKGNhY2hlW3NlcnZpY2VOYW1lXSA9PT0gSU5TVEFOVElBVElORykge1xyXG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbc2VydmljZU5hbWVdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBwYXRoLnNoaWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW52b2tlKGZuLCBzZWxmLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbG9jYWxzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHNlcnZpY2VOYW1lID0gbG9jYWxzO1xyXG4gICAgICAgIGxvY2FscyA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBhcmdzID0gW10sXHJcbiAgICAgICAgICAkaW5qZWN0ID0gY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZShmbiwgc3RyaWN0RGksIHNlcnZpY2VOYW1lKSxcclxuICAgICAgICAgIGxlbmd0aCwgaSxcclxuICAgICAgICAgIGtleTtcclxuXHJcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9ICRpbmplY3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBrZXkgPSAkaW5qZWN0W2ldO1xyXG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdpdGtuJyxcclxuICAgICAgICAgICAgICAgICAgJ0luY29ycmVjdCBpbmplY3Rpb24gdG9rZW4hIEV4cGVjdGVkIHNlcnZpY2UgbmFtZSBhcyBzdHJpbmcsIGdvdCB7MH0nLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcmdzLnB1c2goXHJcbiAgICAgICAgICBsb2NhbHMgJiYgbG9jYWxzLmhhc093blByb3BlcnR5KGtleSlcclxuICAgICAgICAgID8gbG9jYWxzW2tleV1cclxuICAgICAgICAgIDogZ2V0U2VydmljZShrZXksIHNlcnZpY2VOYW1lKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGlzQXJyYXkoZm4pKSB7XHJcbiAgICAgICAgZm4gPSBmbltsZW5ndGhdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyanMtaW52b2tlLWFwcGx5LXZzLXN3aXRjaFxyXG4gICAgICAvLyAjNTM4OFxyXG4gICAgICByZXR1cm4gZm4uYXBwbHkoc2VsZiwgYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5zdGFudGlhdGUoVHlwZSwgbG9jYWxzLCBzZXJ2aWNlTmFtZSkge1xyXG4gICAgICAvLyBDaGVjayBpZiBUeXBlIGlzIGFubm90YXRlZCBhbmQgdXNlIGp1c3QgdGhlIGdpdmVuIGZ1bmN0aW9uIGF0IG4tMSBhcyBwYXJhbWV0ZXJcclxuICAgICAgLy8gZS5nLiBzb21lTW9kdWxlLmZhY3RvcnkoJ2dyZWV0ZXInLCBbJyR3aW5kb3cnLCBmdW5jdGlvbihyZW5hbWVkJHdpbmRvdykge31dKTtcclxuICAgICAgLy8gT2JqZWN0IGNyZWF0aW9uOiBodHRwOi8vanNwZXJmLmNvbS9jcmVhdGUtY29uc3RydWN0b3IvMlxyXG4gICAgICB2YXIgaW5zdGFuY2UgPSBPYmplY3QuY3JlYXRlKChpc0FycmF5KFR5cGUpID8gVHlwZVtUeXBlLmxlbmd0aCAtIDFdIDogVHlwZSkucHJvdG90eXBlIHx8IG51bGwpO1xyXG4gICAgICB2YXIgcmV0dXJuZWRWYWx1ZSA9IGludm9rZShUeXBlLCBpbnN0YW5jZSwgbG9jYWxzLCBzZXJ2aWNlTmFtZSk7XHJcblxyXG4gICAgICByZXR1cm4gaXNPYmplY3QocmV0dXJuZWRWYWx1ZSkgfHwgaXNGdW5jdGlvbihyZXR1cm5lZFZhbHVlKSA/IHJldHVybmVkVmFsdWUgOiBpbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbnZva2U6IGludm9rZSxcclxuICAgICAgaW5zdGFudGlhdGU6IGluc3RhbnRpYXRlLFxyXG4gICAgICBnZXQ6IGdldFNlcnZpY2UsXHJcbiAgICAgIGFubm90YXRlOiBjcmVhdGVJbmplY3Rvci4kJGFubm90YXRlLFxyXG4gICAgICBoYXM6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJDYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lICsgcHJvdmlkZXJTdWZmaXgpIHx8IGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGFubm90YXRlO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkYW5jaG9yU2Nyb2xsUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzZSBgJGFuY2hvclNjcm9sbFByb3ZpZGVyYCB0byBkaXNhYmxlIGF1dG9tYXRpYyBzY3JvbGxpbmcgd2hlbmV2ZXJcclxuICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGNoYW5nZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiAkQW5jaG9yU2Nyb2xsUHJvdmlkZXIoKSB7XHJcblxyXG4gIHZhciBhdXRvU2Nyb2xsaW5nRW5hYmxlZCA9IHRydWU7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkYW5jaG9yU2Nyb2xsUHJvdmlkZXIjZGlzYWJsZUF1dG9TY3JvbGxpbmdcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEJ5IGRlZmF1bHQsIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsICRhbmNob3JTY3JvbGwoKX0gd2lsbCBhdXRvbWF0aWNhbGx5IGRldGVjdCBjaGFuZ2VzIHRvXHJcbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGFuZCBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIG5ldyBoYXNoLjxiciAvPlxyXG4gICAqIFVzZSB0aGlzIG1ldGhvZCB0byBkaXNhYmxlIGF1dG9tYXRpYyBzY3JvbGxpbmcuXHJcbiAgICpcclxuICAgKiBJZiBhdXRvbWF0aWMgc2Nyb2xsaW5nIGlzIGRpc2FibGVkLCBvbmUgbXVzdCBleHBsaWNpdGx5IGNhbGxcclxuICAgKiB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbCAkYW5jaG9yU2Nyb2xsKCl9IGluIG9yZGVyIHRvIHNjcm9sbCB0byB0aGUgZWxlbWVudCByZWxhdGVkIHRvIHRoZVxyXG4gICAqIGN1cnJlbnQgaGFzaC5cclxuICAgKi9cclxuICB0aGlzLmRpc2FibGVBdXRvU2Nyb2xsaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICBhdXRvU2Nyb2xsaW5nRW5hYmxlZCA9IGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICogQG5hbWUgJGFuY2hvclNjcm9sbFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICogQHJlcXVpcmVzICR3aW5kb3dcclxuICAgKiBAcmVxdWlyZXMgJGxvY2F0aW9uXHJcbiAgICogQHJlcXVpcmVzICRyb290U2NvcGVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFdoZW4gY2FsbGVkLCBpdCBjaGVja3MgdGhlIGN1cnJlbnQgdmFsdWUgb2Yge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGFuZFxyXG4gICAqIHNjcm9sbHMgdG8gdGhlIHJlbGF0ZWQgZWxlbWVudCwgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBzcGVjaWZpZWQgaW4gdGhlXHJcbiAgICogW0h0bWw1IHNwZWNdKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCN0aGUtaW5kaWNhdGVkLXBhcnQtb2YtdGhlLWRvY3VtZW50KS5cclxuICAgKlxyXG4gICAqIEl0IGFsc28gd2F0Y2hlcyB0aGUge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGFuZCBhdXRvbWF0aWNhbGx5IHNjcm9sbHMgdG9cclxuICAgKiBtYXRjaCBhbnkgYW5jaG9yIHdoZW5ldmVyIGl0IGNoYW5nZXMuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IGNhbGxpbmdcclxuICAgKiB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbFByb3ZpZGVyI2Rpc2FibGVBdXRvU2Nyb2xsaW5nICRhbmNob3JTY3JvbGxQcm92aWRlci5kaXNhYmxlQXV0b1Njcm9sbGluZygpfS5cclxuICAgKlxyXG4gICAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiB1c2UgaXRzIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgeU9mZnNldH0gcHJvcGVydHkgdG8gc3BlY2lmeSBhXHJcbiAgICogdmVydGljYWwgc2Nyb2xsLW9mZnNldCAoZWl0aGVyIGZpeGVkIG9yIGR5bmFtaWMpLlxyXG4gICAqXHJcbiAgICogQHByb3BlcnR5IHsobnVtYmVyfGZ1bmN0aW9ufGpxTGl0ZSl9IHlPZmZzZXRcclxuICAgKiBJZiBzZXQsIHNwZWNpZmllcyBhIHZlcnRpY2FsIHNjcm9sbC1vZmZzZXQuIFRoaXMgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gdGhlcmUgYXJlIGZpeGVkXHJcbiAgICogcG9zaXRpb25lZCBlbGVtZW50cyBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLCBzdWNoIGFzIG5hdmJhcnMsIGhlYWRlcnMgZXRjLlxyXG4gICAqXHJcbiAgICogYHlPZmZzZXRgIGNhbiBiZSBzcGVjaWZpZWQgaW4gdmFyaW91cyB3YXlzOlxyXG4gICAqIC0gKipudW1iZXIqKjogQSBmaXhlZCBudW1iZXIgb2YgcGl4ZWxzIHRvIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPjxiciAvPlxyXG4gICAqIC0gKipmdW5jdGlvbioqOiBBIGdldHRlciBmdW5jdGlvbiBjYWxsZWQgZXZlcnl0aW1lIGAkYW5jaG9yU2Nyb2xsKClgIGlzIGV4ZWN1dGVkLiBNdXN0IHJldHVyblxyXG4gICAqICAgYSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBvZmZzZXQgKGluIHBpeGVscykuPGJyIC8+PGJyIC8+XHJcbiAgICogLSAqKmpxTGl0ZSoqOiBBIGpxTGl0ZS9qUXVlcnkgZWxlbWVudCB0byBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBvZmZzZXQuIFRoZSBkaXN0YW5jZSBmcm9tXHJcbiAgICogICB0aGUgdG9wIG9mIHRoZSBwYWdlIHRvIHRoZSBlbGVtZW50J3MgYm90dG9tIHdpbGwgYmUgdXNlZCBhcyBvZmZzZXQuPGJyIC8+XHJcbiAgICogICAqKk5vdGUqKjogVGhlIGVsZW1lbnQgd2lsbCBiZSB0YWtlbiBpbnRvIGFjY291bnQgb25seSBhcyBsb25nIGFzIGl0cyBgcG9zaXRpb25gIGlzIHNldCB0b1xyXG4gICAqICAgYGZpeGVkYC4gVGhpcyBvcHRpb24gaXMgdXNlZnVsLCB3aGVuIGRlYWxpbmcgd2l0aCByZXNwb25zaXZlIG5hdmJhcnMvaGVhZGVycyB0aGF0IGFkanVzdFxyXG4gICAqICAgdGhlaXIgaGVpZ2h0IGFuZC9vciBwb3NpdGlvbmluZyBhY2NvcmRpbmcgdG8gdGhlIHZpZXdwb3J0J3Mgc2l6ZS5cclxuICAgKlxyXG4gICAqIDxiciAvPlxyXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAgICogSW4gb3JkZXIgZm9yIGB5T2Zmc2V0YCB0byB3b3JrIHByb3Blcmx5LCBzY3JvbGxpbmcgc2hvdWxkIHRha2UgcGxhY2Ugb24gdGhlIGRvY3VtZW50J3Mgcm9vdCBhbmRcclxuICAgKiBub3Qgc29tZSBjaGlsZCBlbGVtZW50LlxyXG4gICAqIDwvZGl2PlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICA8ZXhhbXBsZSBtb2R1bGU9XCJhbmNob3JTY3JvbGxFeGFtcGxlXCI+XHJcbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8ZGl2IGlkPVwic2Nyb2xsQXJlYVwiIG5nLWNvbnRyb2xsZXI9XCJTY3JvbGxDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICAgPGEgbmctY2xpY2s9XCJnb3RvQm90dG9tKClcIj5HbyB0byBib3R0b208L2E+XHJcbiAgICAgICAgICAgPGEgaWQ9XCJib3R0b21cIj48L2E+IFlvdSdyZSBhdCB0aGUgYm90dG9tIVxyXG4gICAgICAgICA8L2Rpdj5cclxuICAgICAgIDwvZmlsZT5cclxuICAgICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuY2hvclNjcm9sbEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignU2Nyb2xsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJyxcclxuICAgICAgICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJGFuY2hvclNjcm9sbCkge1xyXG4gICAgICAgICAgICAgICAkc2NvcGUuZ290b0JvdHRvbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbG9jYXRpb24uaGFzaCB0byB0aGUgaWQgb2ZcclxuICAgICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCB5b3Ugd2lzaCB0byBzY3JvbGwgdG8uXHJcbiAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2JvdHRvbScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKVxyXG4gICAgICAgICAgICAgICAgICRhbmNob3JTY3JvbGwoKTtcclxuICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvZmlsZT5cclxuICAgICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgICAgI3Njcm9sbEFyZWEge1xyXG4gICAgICAgICAgIGhlaWdodDogMjgwcHg7XHJcbiAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICNib3R0b20ge1xyXG4gICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgIG1hcmdpbi10b3A6IDIwMDBweDtcclxuICAgICAgICAgfVxyXG4gICAgICAgPC9maWxlPlxyXG4gICAgIDwvZXhhbXBsZT5cclxuICAgKlxyXG4gICAqIDxociAvPlxyXG4gICAqIFRoZSBleGFtcGxlIGJlbG93IGlsbHVzdHJhdGVzIHRoZSB1c2Ugb2YgYSB2ZXJ0aWNhbCBzY3JvbGwtb2Zmc2V0IChzcGVjaWZpZWQgYXMgYSBmaXhlZCB2YWx1ZSkuXHJcbiAgICogU2VlIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgJGFuY2hvclNjcm9sbC55T2Zmc2V0fSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICA8ZXhhbXBsZSBtb2R1bGU9XCJhbmNob3JTY3JvbGxPZmZzZXRFeGFtcGxlXCI+XHJcbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8ZGl2IGNsYXNzPVwiZml4ZWQtaGVhZGVyXCIgbmctY29udHJvbGxlcj1cImhlYWRlckN0cmxcIj5cclxuICAgICAgICAgICA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJnb3RvQW5jaG9yKHgpXCIgbmctcmVwZWF0PVwieCBpbiBbMSwyLDMsNCw1XVwiPlxyXG4gICAgICAgICAgICAgR28gdG8gYW5jaG9yIHt7eH19XHJcbiAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgPGRpdiBpZD1cImFuY2hvcnt7eH19XCIgY2xhc3M9XCJhbmNob3JcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XHJcbiAgICAgICAgICAgQW5jaG9yIHt7eH19IG9mIDVcclxuICAgICAgICAgPC9kaXY+XHJcbiAgICAgICA8L2ZpbGU+XHJcbiAgICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdhbmNob3JTY3JvbGxPZmZzZXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgLnJ1bihbJyRhbmNob3JTY3JvbGwnLCBmdW5jdGlvbigkYW5jaG9yU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsLnlPZmZzZXQgPSA1MDsgICAvLyBhbHdheXMgc2Nyb2xsIGJ5IDUwIGV4dHJhIHBpeGVsc1xyXG4gICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdoZWFkZXJDdHJsJywgWyckYW5jaG9yU2Nyb2xsJywgJyRsb2NhdGlvbicsICckc2NvcGUnLFxyXG4gICAgICAgICAgICAgZnVuY3Rpb24gKCRhbmNob3JTY3JvbGwsICRsb2NhdGlvbiwgJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5nb3RvQW5jaG9yID0gZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgICAgICAgIHZhciBuZXdIYXNoID0gJ2FuY2hvcicgKyB4O1xyXG4gICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24uaGFzaCgpICE9PSBuZXdIYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlICRsb2NhdGlvbi5oYXNoIHRvIGBuZXdIYXNoYCBhbmRcclxuICAgICAgICAgICAgICAgICAgIC8vICRhbmNob3JTY3JvbGwgd2lsbCBhdXRvbWF0aWNhbGx5IHNjcm9sbCB0byBpdFxyXG4gICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2FuY2hvcicgKyB4KTtcclxuICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gY2FsbCAkYW5jaG9yU2Nyb2xsKCkgZXhwbGljaXRseSxcclxuICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlICRsb2NhdGlvbi5oYXNoIGhhc24ndCBjaGFuZ2VkXHJcbiAgICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIF0pO1xyXG4gICAgICAgPC9maWxlPlxyXG4gICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgICBib2R5IHtcclxuICAgICAgICAgICBwYWRkaW5nLXRvcDogNTBweDtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgLmFuY2hvciB7XHJcbiAgICAgICAgICAgYm9yZGVyOiAycHggZGFzaGVkIERhcmtPcmNoaWQ7XHJcbiAgICAgICAgICAgcGFkZGluZzogMTBweCAxMHB4IDIwMHB4IDEwcHg7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC5maXhlZC1oZWFkZXIge1xyXG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTtcclxuICAgICAgICAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgICAgICAgIHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC5maXhlZC1oZWFkZXIgPiBhIHtcclxuICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgbWFyZ2luOiA1cHggMTVweDtcclxuICAgICAgICAgfVxyXG4gICAgICAgPC9maWxlPlxyXG4gICAgIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkd2luZG93LCAkbG9jYXRpb24sICRyb290U2NvcGUpIHtcclxuICAgIHZhciBkb2N1bWVudCA9ICR3aW5kb3cuZG9jdW1lbnQ7XHJcblxyXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBmaXJzdCBhbmNob3IgZnJvbSBhIE5vZGVMaXN0XHJcbiAgICAvLyAodXNpbmcgYEFycmF5I3NvbWUoKWAgaW5zdGVhZCBvZiBgYW5ndWxhciNmb3JFYWNoKClgIHNpbmNlIGl0J3MgbW9yZSBwZXJmb3JtYW50XHJcbiAgICAvLyAgYW5kIHdvcmtpbmcgaW4gYWxsIHN1cHBvcnRlZCBicm93c2Vycy4pXHJcbiAgICBmdW5jdGlvbiBnZXRGaXJzdEFuY2hvcihsaXN0KSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSBudWxsO1xyXG4gICAgICBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGxpc3QsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAobm9kZU5hbWVfKGVsZW1lbnQpID09PSAnYScpIHtcclxuICAgICAgICAgIHJlc3VsdCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFlPZmZzZXQoKSB7XHJcblxyXG4gICAgICB2YXIgb2Zmc2V0ID0gc2Nyb2xsLnlPZmZzZXQ7XHJcblxyXG4gICAgICBpZiAoaXNGdW5jdGlvbihvZmZzZXQpKSB7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0KCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KG9mZnNldCkpIHtcclxuICAgICAgICB2YXIgZWxlbSA9IG9mZnNldFswXTtcclxuICAgICAgICB2YXIgc3R5bGUgPSAkd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSk7XHJcbiAgICAgICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XHJcbiAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoIWlzTnVtYmVyKG9mZnNldCkpIHtcclxuICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gb2Zmc2V0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvKGVsZW0pIHtcclxuICAgICAgaWYgKGVsZW0pIHtcclxuICAgICAgICBlbGVtLnNjcm9sbEludG9WaWV3KCk7XHJcblxyXG4gICAgICAgIHZhciBvZmZzZXQgPSBnZXRZT2Zmc2V0KCk7XHJcblxyXG4gICAgICAgIGlmIChvZmZzZXQpIHtcclxuICAgICAgICAgIC8vIGBvZmZzZXRgIGlzIHRoZSBudW1iZXIgb2YgcGl4ZWxzIHdlIHNob3VsZCBzY3JvbGwgVVAgaW4gb3JkZXIgdG8gYWxpZ24gYGVsZW1gIHByb3Blcmx5LlxyXG4gICAgICAgICAgLy8gVGhpcyBpcyB0cnVlIE9OTFkgaWYgdGhlIGNhbGwgdG8gYGVsZW0uc2Nyb2xsSW50b1ZpZXcoKWAgaW5pdGlhbGx5IGFsaWducyBgZWxlbWAgYXQgdGhlXHJcbiAgICAgICAgICAvLyB0b3Agb2YgdGhlIHZpZXdwb3J0LlxyXG4gICAgICAgICAgLy9cclxuICAgICAgICAgIC8vIElGIHRoZSBudW1iZXIgb2YgcGl4ZWxzIGZyb20gdGhlIHRvcCBvZiBgZWxlbWAgdG8gdGhlIGVuZCBvZiB0aGUgcGFnZSdzIGNvbnRlbnQgaXMgbGVzc1xyXG4gICAgICAgICAgLy8gdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCwgdGhlbiBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCB3aWxsIGFsaWduIHRoZSBgZWxlbWAgc29tZVxyXG4gICAgICAgICAgLy8gd2F5IGRvd24gdGhlIHBhZ2UuXHJcbiAgICAgICAgICAvL1xyXG4gICAgICAgICAgLy8gVGhpcyBpcyBvZnRlbiB0aGUgY2FzZSBmb3IgZWxlbWVudHMgbmVhciB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLlxyXG4gICAgICAgICAgLy9cclxuICAgICAgICAgIC8vIEluIHN1Y2ggY2FzZXMgd2UgZG8gbm90IG5lZWQgdG8gc2Nyb2xsIHRoZSB3aG9sZSBgb2Zmc2V0YCB1cCwganVzdCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuXHJcbiAgICAgICAgICAvLyB0aGUgdG9wIG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgb2Zmc2V0LCB3aGljaCBpcyBlbm91Z2ggdG8gYWxpZ24gdGhlIHRvcCBvZiBgZWxlbWAgYXQgdGhlXHJcbiAgICAgICAgICAvLyBkZXNpcmVkIHBvc2l0aW9uLlxyXG4gICAgICAgICAgdmFyIGVsZW1Ub3AgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgICAgICAgICR3aW5kb3cuc2Nyb2xsQnkoMCwgZWxlbVRvcCAtIG9mZnNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JvbGwoKSB7XHJcbiAgICAgIHZhciBoYXNoID0gJGxvY2F0aW9uLmhhc2goKSwgZWxtO1xyXG5cclxuICAgICAgLy8gZW1wdHkgaGFzaCwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcclxuICAgICAgaWYgKCFoYXNoKSBzY3JvbGxUbyhudWxsKTtcclxuXHJcbiAgICAgIC8vIGVsZW1lbnQgd2l0aCBnaXZlbiBpZFxyXG4gICAgICBlbHNlIGlmICgoZWxtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkpKSBzY3JvbGxUbyhlbG0pO1xyXG5cclxuICAgICAgLy8gZmlyc3QgYW5jaG9yIHdpdGggZ2l2ZW4gbmFtZSA6LURcclxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGdldEZpcnN0QW5jaG9yKGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGhhc2gpKSkpIHNjcm9sbFRvKGVsbSk7XHJcblxyXG4gICAgICAvLyBubyBlbGVtZW50IGFuZCBoYXNoID09ICd0b3AnLCBzY3JvbGwgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZVxyXG4gICAgICBlbHNlIGlmIChoYXNoID09PSAndG9wJykgc2Nyb2xsVG8obnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG9lcyBub3Qgc2Nyb2xsIHdoZW4gdXNlciBjbGlja3Mgb24gYW5jaG9yIGxpbmsgdGhhdCBpcyBjdXJyZW50bHkgb25cclxuICAgIC8vIChubyB1cmwgY2hhbmdlLCBubyAkbG9jYXRpb24uaGFzaCgpIGNoYW5nZSksIGJyb3dzZXIgbmF0aXZlIGRvZXMgc2Nyb2xsXHJcbiAgICBpZiAoYXV0b1Njcm9sbGluZ0VuYWJsZWQpIHtcclxuICAgICAgJHJvb3RTY29wZS4kd2F0Y2goZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoKCkge3JldHVybiAkbG9jYXRpb24uaGFzaCgpO30sXHJcbiAgICAgICAgZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XHJcbiAgICAgICAgICAvLyBza2lwIHRoZSBpbml0aWFsIHNjcm9sbCBpZiAkbG9jYXRpb24uaGFzaCBpcyBlbXB0eVxyXG4gICAgICAgICAgaWYgKG5ld1ZhbCA9PT0gb2xkVmFsICYmIG5ld1ZhbCA9PT0gJycpIHJldHVybjtcclxuXHJcbiAgICAgICAgICBqcUxpdGVEb2N1bWVudExvYWRlZChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKHNjcm9sbCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2Nyb2xsO1xyXG4gIH1dO1xyXG59XHJcblxyXG52YXIgJGFuaW1hdGVNaW5FcnIgPSBtaW5FcnIoJyRhbmltYXRlJyk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRhbmltYXRlUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgJGFuaW1hdGUgdGhhdCBkb2Vzbid0IHBlcmZvcm0gYW55IGFuaW1hdGlvbnMsIGluc3RlYWQganVzdFxyXG4gKiBzeW5jaHJvbm91c2x5IHBlcmZvcm1zIERPTVxyXG4gKiB1cGRhdGVzIGFuZCBjYWxscyBkb25lKCkgY2FsbGJhY2tzLlxyXG4gKlxyXG4gKiBJbiBvcmRlciB0byBlbmFibGUgYW5pbWF0aW9ucyB0aGUgbmdBbmltYXRlIG1vZHVsZSBoYXMgdG8gYmUgbG9hZGVkLlxyXG4gKlxyXG4gKiBUbyBzZWUgdGhlIGZ1bmN0aW9uYWwgaW1wbGVtZW50YXRpb24gY2hlY2sgb3V0IHNyYy9uZ0FuaW1hdGUvYW5pbWF0ZS5qc1xyXG4gKi9cclxudmFyICRBbmltYXRlUHJvdmlkZXIgPSBbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcclxuXHJcblxyXG4gIHRoaXMuJCRzZWxlY3RvcnMgPSB7fTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI3JlZ2lzdGVyXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZWdpc3RlcnMgYSBuZXcgaW5qZWN0YWJsZSBhbmltYXRpb24gZmFjdG9yeSBmdW5jdGlvbi4gVGhlIGZhY3RvcnkgZnVuY3Rpb24gcHJvZHVjZXMgdGhlXHJcbiAgICogYW5pbWF0aW9uIG9iamVjdCB3aGljaCBjb250YWlucyBjYWxsYmFjayBmdW5jdGlvbnMgZm9yIGVhY2ggZXZlbnQgdGhhdCBpcyBleHBlY3RlZCB0byBiZVxyXG4gICAqIGFuaW1hdGVkLlxyXG4gICAqXHJcbiAgICogICAqIGBldmVudEZuYDogYGZ1bmN0aW9uKEVsZW1lbnQsIGRvbmVGdW5jdGlvbilgIFRoZSBlbGVtZW50IHRvIGFuaW1hdGUsIHRoZSBgZG9uZUZ1bmN0aW9uYFxyXG4gICAqICAgbXVzdCBiZSBjYWxsZWQgb25jZSB0aGUgZWxlbWVudCBhbmltYXRpb24gaXMgY29tcGxldGUuIElmIGEgZnVuY3Rpb24gaXMgcmV0dXJuZWQgdGhlbiB0aGVcclxuICAgKiAgIGFuaW1hdGlvbiBzZXJ2aWNlIHdpbGwgdXNlIHRoaXMgZnVuY3Rpb24gdG8gY2FuY2VsIHRoZSBhbmltYXRpb24gd2hlbmV2ZXIgYSBjYW5jZWwgZXZlbnQgaXNcclxuICAgKiAgIHRyaWdnZXJlZC5cclxuICAgKlxyXG4gICAqXHJcbiAgICogYGBganNcclxuICAgKiAgIHJldHVybiB7XHJcbiAgICAgKiAgICAgZXZlbnRGbiA6IGZ1bmN0aW9uKGVsZW1lbnQsIGRvbmUpIHtcclxuICAgICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxyXG4gICAgICogICAgICAgLy9vbmNlIGNvbXBsZXRlLCB0aGVuIHJ1biBkb25lKClcclxuICAgICAqICAgICAgIHJldHVybiBmdW5jdGlvbiBjYW5jZWxsYXRpb25GdW5jdGlvbigpIHtcclxuICAgICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXHJcbiAgICAgKiAgICAgICB9XHJcbiAgICAgKiAgICAgfVxyXG4gICAgICogICB9XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3RvcnkgVGhlIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHJldHVybiB0aGUgYW5pbWF0aW9uXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuXHJcbiAgICovXHJcbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsIGZhY3RvcnkpIHtcclxuICAgIHZhciBrZXkgPSBuYW1lICsgJy1hbmltYXRpb24nO1xyXG4gICAgaWYgKG5hbWUgJiYgbmFtZS5jaGFyQXQoMCkgIT0gJy4nKSB0aHJvdyAkYW5pbWF0ZU1pbkVycignbm90Y3NlbCcsXHJcbiAgICAgICAgXCJFeHBlY3RpbmcgY2xhc3Mgc2VsZWN0b3Igc3RhcnRpbmcgd2l0aCAnLicgZ290ICd7MH0nLlwiLCBuYW1lKTtcclxuICAgIHRoaXMuJCRzZWxlY3RvcnNbbmFtZS5zdWJzdHIoMSldID0ga2V5O1xyXG4gICAgJHByb3ZpZGUuZmFjdG9yeShrZXksIGZhY3RvcnkpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI2NsYXNzTmFtZUZpbHRlclxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyBhbmQvb3IgcmV0dXJucyB0aGUgQ1NTIGNsYXNzIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIGNoZWNrZWQgd2hlbiBwZXJmb3JtaW5nXHJcbiAgICogYW4gYW5pbWF0aW9uLiBVcG9uIGJvb3RzdHJhcCB0aGUgY2xhc3NOYW1lRmlsdGVyIHZhbHVlIGlzIG5vdCBzZXQgYXQgYWxsIGFuZCB3aWxsXHJcbiAgICogdGhlcmVmb3JlIGVuYWJsZSAkYW5pbWF0ZSB0byBhdHRlbXB0IHRvIHBlcmZvcm0gYW4gYW5pbWF0aW9uIG9uIGFueSBlbGVtZW50LlxyXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgY2xhc3NOYW1lRmlsdGVyIHZhbHVlLCBhbmltYXRpb25zIHdpbGwgb25seSBiZSBwZXJmb3JtZWQgb24gZWxlbWVudHNcclxuICAgKiB0aGF0IHN1Y2Nlc3NmdWxseSBtYXRjaCB0aGUgZmlsdGVyIGV4cHJlc3Npb24uIFRoaXMgaW4gdHVybiBjYW4gYm9vc3QgcGVyZm9ybWFuY2VcclxuICAgKiBmb3IgbG93LXBvd2VyZWQgZGV2aWNlcyBhcyB3ZWxsIGFzIGFwcGxpY2F0aW9ucyBjb250YWluaW5nIGEgbG90IG9mIHN0cnVjdHVyYWwgb3BlcmF0aW9ucy5cclxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IGV4cHJlc3Npb24gVGhlIGNsYXNzTmFtZSBleHByZXNzaW9uIHdoaWNoIHdpbGwgYmUgY2hlY2tlZCBhZ2FpbnN0IGFsbCBhbmltYXRpb25zXHJcbiAgICogQHJldHVybiB7UmVnRXhwfSBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIGV4cHJlc3Npb24gdmFsdWUuIElmIG51bGwgdGhlbiB0aGVyZSBpcyBubyBleHByZXNzaW9uIHZhbHVlXHJcbiAgICovXHJcbiAgdGhpcy5jbGFzc05hbWVGaWx0ZXIgPSBmdW5jdGlvbihleHByZXNzaW9uKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICB0aGlzLiQkY2xhc3NOYW1lRmlsdGVyID0gKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBSZWdFeHApID8gZXhwcmVzc2lvbiA6IG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcjtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyQkcScsICckJGFzeW5jQ2FsbGJhY2snLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCQkcSwgJCRhc3luY0NhbGxiYWNrLCAkcm9vdFNjb3BlKSB7XHJcblxyXG4gICAgdmFyIGN1cnJlbnREZWZlcjtcclxuXHJcbiAgICBmdW5jdGlvbiBydW5BbmltYXRpb25Qb3N0RGlnZXN0KGZuKSB7XHJcbiAgICAgIHZhciBjYW5jZWxGbiwgZGVmZXIgPSAkJHEuZGVmZXIoKTtcclxuICAgICAgZGVmZXIucHJvbWlzZS4kJGNhbmNlbEZuID0gZnVuY3Rpb24gbmdBbmltYXRlTWF5YmVDYW5jZWwoKSB7XHJcbiAgICAgICAgY2FuY2VsRm4gJiYgY2FuY2VsRm4oKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICRyb290U2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uIG5nQW5pbWF0ZVBvc3REaWdlc3QoKSB7XHJcbiAgICAgICAgY2FuY2VsRm4gPSBmbihmdW5jdGlvbiBuZ0FuaW1hdGVOb3RpZnlDb21wbGV0ZSgpIHtcclxuICAgICAgICAgIGRlZmVyLnJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXNvbHZlRWxlbWVudENsYXNzZXMoZWxlbWVudCwgY2xhc3Nlcykge1xyXG4gICAgICB2YXIgdG9BZGQgPSBbXSwgdG9SZW1vdmUgPSBbXTtcclxuXHJcbiAgICAgIHZhciBoYXNDbGFzc2VzID0gY3JlYXRlTWFwKCk7XHJcbiAgICAgIGZvckVhY2goKGVsZW1lbnQuYXR0cignY2xhc3MnKSB8fCAnJykuc3BsaXQoL1xccysvKSwgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgaGFzQ2xhc3Nlc1tjbGFzc05hbWVdID0gdHJ1ZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uKHN0YXR1cywgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgdmFyIGhhc0NsYXNzID0gaGFzQ2xhc3Nlc1tjbGFzc05hbWVdO1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgbW9zdCByZWNlbnQgY2xhc3MgbWFuaXB1bGF0aW9uICh2aWEgJGFuaW1hdGUpIHdhcyB0byByZW1vdmUgdGhlIGNsYXNzLCBhbmQgdGhlXHJcbiAgICAgICAgLy8gZWxlbWVudCBjdXJyZW50bHkgaGFzIHRoZSBjbGFzcywgdGhlIGNsYXNzIGlzIHNjaGVkdWxlZCBmb3IgcmVtb3ZhbC4gT3RoZXJ3aXNlLCBpZlxyXG4gICAgICAgIC8vIHRoZSBtb3N0IHJlY2VudCBjbGFzcyBtYW5pcHVsYXRpb24gKHZpYSAkYW5pbWF0ZSkgd2FzIHRvIGFkZCB0aGUgY2xhc3MsIGFuZCB0aGVcclxuICAgICAgICAvLyBlbGVtZW50IGRvZXMgbm90IGN1cnJlbnRseSBoYXZlIHRoZSBjbGFzcywgdGhlIGNsYXNzIGlzIHNjaGVkdWxlZCB0byBiZSBhZGRlZC5cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBmYWxzZSAmJiBoYXNDbGFzcykge1xyXG4gICAgICAgICAgdG9SZW1vdmUucHVzaChjbGFzc05hbWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSB0cnVlICYmICFoYXNDbGFzcykge1xyXG4gICAgICAgICAgdG9BZGQucHVzaChjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gKHRvQWRkLmxlbmd0aCArIHRvUmVtb3ZlLmxlbmd0aCkgPiAwICYmXHJcbiAgICAgICAgW3RvQWRkLmxlbmd0aCA/IHRvQWRkIDogbnVsbCwgdG9SZW1vdmUubGVuZ3RoID8gdG9SZW1vdmUgOiBudWxsXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjYWNoZWRDbGFzc01hbmlwdWxhdGlvbihjYWNoZSwgY2xhc3Nlcywgb3ApIHtcclxuICAgICAgZm9yICh2YXIgaT0wLCBpaSA9IGNsYXNzZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc2VzW2ldO1xyXG4gICAgICAgIGNhY2hlW2NsYXNzTmFtZV0gPSBvcDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFzeW5jUHJvbWlzZSgpIHtcclxuICAgICAgLy8gb25seSBzZXJ2ZSBvbmUgaW5zdGFuY2Ugb2YgYSBwcm9taXNlIGluIG9yZGVyIHRvIHNhdmUgQ1BVIGN5Y2xlc1xyXG4gICAgICBpZiAoIWN1cnJlbnREZWZlcikge1xyXG4gICAgICAgIGN1cnJlbnREZWZlciA9ICQkcS5kZWZlcigpO1xyXG4gICAgICAgICQkYXN5bmNDYWxsYmFjayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGN1cnJlbnREZWZlci5yZXNvbHZlKCk7XHJcbiAgICAgICAgICBjdXJyZW50RGVmZXIgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjdXJyZW50RGVmZXIucHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhcHBseVN0eWxlcyhlbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KG9wdGlvbnMpKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlcyA9IGV4dGVuZChvcHRpb25zLmZyb20gfHwge30sIG9wdGlvbnMudG8gfHwge30pO1xyXG4gICAgICAgIGVsZW1lbnQuY3NzKHN0eWxlcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgJGFuaW1hdGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgJGFuaW1hdGUgc2VydmljZSBwcm92aWRlcyBydWRpbWVudGFyeSBET00gbWFuaXB1bGF0aW9uIGZ1bmN0aW9ucyB0b1xyXG4gICAgICogaW5zZXJ0LCByZW1vdmUgYW5kIG1vdmUgZWxlbWVudHMgd2l0aGluIHRoZSBET00sIGFzIHdlbGwgYXMgYWRkaW5nIGFuZCByZW1vdmluZyBjbGFzc2VzLlxyXG4gICAgICogVGhpcyBzZXJ2aWNlIGlzIHRoZSBjb3JlIHNlcnZpY2UgdXNlZCBieSB0aGUgbmdBbmltYXRlICRhbmltYXRvciBzZXJ2aWNlIHdoaWNoIHByb3ZpZGVzXHJcbiAgICAgKiBoaWdoLWxldmVsIGFuaW1hdGlvbiBob29rcyBmb3IgQ1NTIGFuZCBKYXZhU2NyaXB0LlxyXG4gICAgICpcclxuICAgICAqICRhbmltYXRlIGlzIGF2YWlsYWJsZSBpbiB0aGUgQW5ndWxhckpTIGNvcmUsIGhvd2V2ZXIsIHRoZSBuZ0FuaW1hdGUgbW9kdWxlIG11c3QgYmUgaW5jbHVkZWRcclxuICAgICAqIHRvIGVuYWJsZSBmdWxsIG91dCBhbmltYXRpb24gc3VwcG9ydC4gT3RoZXJ3aXNlLCAkYW5pbWF0ZSB3aWxsIG9ubHkgcGVyZm9ybSBzaW1wbGUgRE9NXHJcbiAgICAgKiBtYW5pcHVsYXRpb24gb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBUbyBsZWFybiBtb3JlIGFib3V0IGVuYWJsaW5nIGFuaW1hdGlvbiBzdXBwb3J0LCBjbGljayBoZXJlIHRvIHZpc2l0IHRoZSB7QGxpbmsgbmdBbmltYXRlXHJcbiAgICAgKiBuZ0FuaW1hdGUgbW9kdWxlIHBhZ2V9IGFzIHdlbGwgYXMgdGhlIHtAbGluayBuZ0FuaW1hdGUuJGFuaW1hdGUgbmdBbmltYXRlICRhbmltYXRlIHNlcnZpY2VcclxuICAgICAqIHBhZ2V9LlxyXG4gICAgICovXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhbmltYXRlOiBmdW5jdGlvbihlbGVtZW50LCBmcm9tLCB0bykge1xyXG4gICAgICAgIGFwcGx5U3R5bGVzKGVsZW1lbnQsIHsgZnJvbTogZnJvbSwgdG86IHRvIH0pO1xyXG4gICAgICAgIHJldHVybiBhc3luY1Byb21pc2UoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2VudGVyXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBJbnNlcnRzIHRoZSBlbGVtZW50IGludG8gdGhlIERPTSBlaXRoZXIgYWZ0ZXIgdGhlIGBhZnRlcmAgZWxlbWVudCBvclxyXG4gICAgICAgKiBhcyB0aGUgZmlyc3QgY2hpbGQgd2l0aGluIHRoZSBgcGFyZW50YCBlbGVtZW50LiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlXHJcbiAgICAgICAqIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIGluc2VydGVkIGludG8gdGhlIERPTVxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudCB0aGUgcGFyZW50IGVsZW1lbnQgd2hpY2ggd2lsbCBhcHBlbmQgdGhlIGVsZW1lbnQgYXNcclxuICAgICAgICogICBhIGNoaWxkIChpZiB0aGUgYWZ0ZXIgZWxlbWVudCBpcyBub3QgcHJlc2VudClcclxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBhZnRlciB0aGUgc2libGluZyBlbGVtZW50IHdoaWNoIHdpbGwgYXBwZW5kIHRoZSBlbGVtZW50XHJcbiAgICAgICAqICAgYWZ0ZXIgaXRzZWxmXHJcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIHN0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cclxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXHJcbiAgICAgICAqL1xyXG4gICAgICBlbnRlcjogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50LCBhZnRlciwgb3B0aW9ucykge1xyXG4gICAgICAgIGFwcGx5U3R5bGVzKGVsZW1lbnQsIG9wdGlvbnMpO1xyXG4gICAgICAgIGFmdGVyID8gYWZ0ZXIuYWZ0ZXIoZWxlbWVudClcclxuICAgICAgICAgICAgICA6IHBhcmVudC5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgIHJldHVybiBhc3luY1Byb21pc2UoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2xlYXZlXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTS4gV2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGEgcHJvbWlzZVxyXG4gICAgICAgKiBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciB0aW1lLlxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIERPTVxyXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxyXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICovXHJcbiAgICAgIGxlYXZlOiBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICpcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNtb3ZlXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBNb3ZlcyB0aGUgcG9zaXRpb24gb2YgdGhlIHByb3ZpZGVkIGVsZW1lbnQgd2l0aGluIHRoZSBET00gdG8gYmUgcGxhY2VkXHJcbiAgICAgICAqIGVpdGhlciBhZnRlciB0aGUgYGFmdGVyYCBlbGVtZW50IG9yIGluc2lkZSBvZiB0aGUgYHBhcmVudGAgZWxlbWVudC4gV2hlbiB0aGUgZnVuY3Rpb25cclxuICAgICAgICogaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciB0aW1lLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSBtb3ZlZCBhcm91bmQgd2l0aGluIHRoZVxyXG4gICAgICAgKiAgIERPTVxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudCB0aGUgcGFyZW50IGVsZW1lbnQgd2hlcmUgdGhlIGVsZW1lbnQgd2lsbCBiZVxyXG4gICAgICAgKiAgIGluc2VydGVkIGludG8gKGlmIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxyXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGFmdGVyIHRoZSBzaWJsaW5nIGVsZW1lbnQgd2hlcmUgdGhlIGVsZW1lbnQgd2lsbCBiZVxyXG4gICAgICAgKiAgIHBvc2l0aW9uZWQgbmV4dCB0b1xyXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxyXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICovXHJcbiAgICAgIG1vdmU6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICAvLyBEbyBub3QgcmVtb3ZlIGVsZW1lbnQgYmVmb3JlIGluc2VydC4gUmVtb3Zpbmcgd2lsbCBjYXVzZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGVcclxuICAgICAgICAvLyBlbGVtZW50IHRvIGJlIGRyb3BwZWQuIEluc2VydCB3aWxsIGltcGxpY2l0bHkgZG8gdGhlIHJlbW92ZS5cclxuICAgICAgICByZXR1cm4gdGhpcy5lbnRlcihlbGVtZW50LCBwYXJlbnQsIGFmdGVyLCBvcHRpb25zKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2FkZENsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRzIHRoZSBwcm92aWRlZCBjbGFzc05hbWUgQ1NTIGNsYXNzIHZhbHVlIHRvIHRoZSBwcm92aWRlZCBlbGVtZW50LlxyXG4gICAgICAgKiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGhhdmUgdGhlIGNsYXNzTmFtZSB2YWx1ZVxyXG4gICAgICAgKiAgIGFkZGVkIHRvIGl0XHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyB3aGljaCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50XHJcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXHJcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxyXG4gICAgICAgKi9cclxuICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSwgW10sIG9wdGlvbnMpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgJCRhZGRDbGFzc0ltbWVkaWF0ZWx5OiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcclxuICAgICAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xyXG4gICAgICAgIGNsYXNzTmFtZSA9ICFpc1N0cmluZyhjbGFzc05hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKGlzQXJyYXkoY2xhc3NOYW1lKSA/IGNsYXNzTmFtZS5qb2luKCcgJykgOiAnJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjbGFzc05hbWU7XHJcbiAgICAgICAgZm9yRWFjaChlbGVtZW50LCBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5U3R5bGVzKGVsZW1lbnQsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBhc3luY1Byb21pc2UoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3JlbW92ZUNsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIHRoZSBwcm92aWRlZCBjbGFzc05hbWUgQ1NTIGNsYXNzIHZhbHVlIGZyb20gdGhlIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAgICAgICAqIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cclxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgaGF2ZSB0aGUgY2xhc3NOYW1lIHZhbHVlXHJcbiAgICAgICAqICAgcmVtb3ZlZCBmcm9tIGl0XHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyB3aGljaCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxyXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxyXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICovXHJcbiAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXRDbGFzcyhlbGVtZW50LCBbXSwgY2xhc3NOYW1lLCBvcHRpb25zKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgICQkcmVtb3ZlQ2xhc3NJbW1lZGlhdGVseTogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XHJcbiAgICAgICAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KTtcclxuICAgICAgICBjbGFzc05hbWUgPSAhaXNTdHJpbmcoY2xhc3NOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpc0FycmF5KGNsYXNzTmFtZSkgPyBjbGFzc05hbWUuam9pbignICcpIDogJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2xhc3NOYW1lO1xyXG4gICAgICAgIGZvckVhY2goZWxlbWVudCwgZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAganFMaXRlUmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcHBseVN0eWxlcyhlbGVtZW50LCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gYXN5bmNQcm9taXNlKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICpcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNzZXRDbGFzc1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyBhbmQvb3IgcmVtb3ZlcyB0aGUgZ2l2ZW4gQ1NTIGNsYXNzZXMgdG8gYW5kIGZyb20gdGhlIGVsZW1lbnQuXHJcbiAgICAgICAqIFdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBhIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGF0IGEgbGF0ZXIgdGltZS5cclxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgaGF2ZSBpdHMgQ1NTIGNsYXNzZXMgY2hhbmdlZFxyXG4gICAgICAgKiAgIHJlbW92ZWQgZnJvbSBpdFxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWRkIHRoZSBDU1MgY2xhc3NlcyB3aGljaCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50XHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZW1vdmUgdGhlIENTUyBjbGFzcyB3aGljaCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudFxyXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxyXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcclxuICAgICAgICovXHJcbiAgICAgIHNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGQsIHJlbW92ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgU1RPUkFHRV9LRVkgPSAnJCRhbmltYXRlQ2xhc3Nlcyc7XHJcbiAgICAgICAgdmFyIGNyZWF0ZWRDYWNoZSA9IGZhbHNlO1xyXG4gICAgICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIHZhciBjYWNoZSA9IGVsZW1lbnQuZGF0YShTVE9SQUdFX0tFWSk7XHJcbiAgICAgICAgaWYgKCFjYWNoZSkge1xyXG4gICAgICAgICAgY2FjaGUgPSB7XHJcbiAgICAgICAgICAgIGNsYXNzZXM6IHt9LFxyXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY3JlYXRlZENhY2hlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMgJiYgY2FjaGUub3B0aW9ucykge1xyXG4gICAgICAgICAgY2FjaGUub3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKGNhY2hlLm9wdGlvbnMgfHwge30sIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNsYXNzZXMgPSBjYWNoZS5jbGFzc2VzO1xyXG5cclxuICAgICAgICBhZGQgPSBpc0FycmF5KGFkZCkgPyBhZGQgOiBhZGQuc3BsaXQoJyAnKTtcclxuICAgICAgICByZW1vdmUgPSBpc0FycmF5KHJlbW92ZSkgPyByZW1vdmUgOiByZW1vdmUuc3BsaXQoJyAnKTtcclxuICAgICAgICBjYWNoZWRDbGFzc01hbmlwdWxhdGlvbihjbGFzc2VzLCBhZGQsIHRydWUpO1xyXG4gICAgICAgIGNhY2hlZENsYXNzTWFuaXB1bGF0aW9uKGNsYXNzZXMsIHJlbW92ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICBpZiAoY3JlYXRlZENhY2hlKSB7XHJcbiAgICAgICAgICBjYWNoZS5wcm9taXNlID0gcnVuQW5pbWF0aW9uUG9zdERpZ2VzdChmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IGVsZW1lbnQuZGF0YShTVE9SQUdFX0tFWSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRGF0YShTVE9SQUdFX0tFWSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpbiB0aGUgZXZlbnQgdGhhdCB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGJlZm9yZSBwb3N0RGlnZXN0XHJcbiAgICAgICAgICAgIC8vIGlzIHJ1biB0aGVuIHRoZSBjYWNoZSB3aWxsIGJlIHVuZGVmaW5lZCBhbmQgdGhlcmUgd2lsbCBiZVxyXG4gICAgICAgICAgICAvLyBubyBuZWVkIGFueW1vcmUgdG8gYWRkIG9yIHJlbW92ZSBhbmQgb2YgdGhlIGVsZW1lbnQgY2xhc3Nlc1xyXG4gICAgICAgICAgICBpZiAoY2FjaGUpIHtcclxuICAgICAgICAgICAgICB2YXIgY2xhc3NlcyA9IHJlc29sdmVFbGVtZW50Q2xhc3NlcyhlbGVtZW50LCBjYWNoZS5jbGFzc2VzKTtcclxuICAgICAgICAgICAgICBpZiAoY2xhc3Nlcykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi4kJHNldENsYXNzSW1tZWRpYXRlbHkoZWxlbWVudCwgY2xhc3Nlc1swXSwgY2xhc3Nlc1sxXSwgY2FjaGUub3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGVsZW1lbnQuZGF0YShTVE9SQUdFX0tFWSwgY2FjaGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNhY2hlLnByb21pc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAkJHNldENsYXNzSW1tZWRpYXRlbHk6IGZ1bmN0aW9uKGVsZW1lbnQsIGFkZCwgcmVtb3ZlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgYWRkICYmIHRoaXMuJCRhZGRDbGFzc0ltbWVkaWF0ZWx5KGVsZW1lbnQsIGFkZCk7XHJcbiAgICAgICAgcmVtb3ZlICYmIHRoaXMuJCRyZW1vdmVDbGFzc0ltbWVkaWF0ZWx5KGVsZW1lbnQsIHJlbW92ZSk7XHJcbiAgICAgICAgYXBwbHlTdHlsZXMoZWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jUHJvbWlzZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZW5hYmxlZDogbm9vcCxcclxuICAgICAgY2FuY2VsOiBub29wXHJcbiAgICB9O1xyXG4gIH1dO1xyXG59XTtcclxuXHJcbmZ1bmN0aW9uICQkQXN5bmNDYWxsYmFja1Byb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJCRyQUYnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbigkJHJBRiwgJHRpbWVvdXQpIHtcclxuICAgIHJldHVybiAkJHJBRi5zdXBwb3J0ZWRcclxuICAgICAgPyBmdW5jdGlvbihmbikgeyByZXR1cm4gJCRyQUYoZm4pOyB9XHJcbiAgICAgIDogZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICByZXR1cm4gJHRpbWVvdXQoZm4sIDAsIGZhbHNlKTtcclxuICAgICAgfTtcclxuICB9XTtcclxufVxyXG5cclxuLyogZ2xvYmFsIHN0cmlwSGFzaDogdHJ1ZSAqL1xyXG5cclxuLyoqXHJcbiAqICEgVGhpcyBpcyBhIHByaXZhdGUgdW5kb2N1bWVudGVkIHNlcnZpY2UgIVxyXG4gKlxyXG4gKiBAbmFtZSAkYnJvd3NlclxyXG4gKiBAcmVxdWlyZXMgJGxvZ1xyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhpcyBvYmplY3QgaGFzIHR3byBnb2FsczpcclxuICpcclxuICogLSBoaWRlIGFsbCB0aGUgZ2xvYmFsIHN0YXRlIGluIHRoZSBicm93c2VyIGNhdXNlZCBieSB0aGUgd2luZG93IG9iamVjdFxyXG4gKiAtIGFic3RyYWN0IGF3YXkgYWxsIHRoZSBicm93c2VyIHNwZWNpZmljIGZlYXR1cmVzIGFuZCBpbmNvbnNpc3RlbmNpZXNcclxuICpcclxuICogRm9yIHRlc3RzIHdlIHByb3ZpZGUge0BsaW5rIG5nTW9jay4kYnJvd3NlciBtb2NrIGltcGxlbWVudGF0aW9ufSBvZiB0aGUgYCRicm93c2VyYFxyXG4gKiBzZXJ2aWNlLCB3aGljaCBjYW4gYmUgdXNlZCBmb3IgY29udmVuaWVudCB0ZXN0aW5nIG9mIHRoZSBhcHBsaWNhdGlvbiB3aXRob3V0IHRoZSBpbnRlcmFjdGlvbiB3aXRoXHJcbiAqIHRoZSByZWFsIGJyb3dzZXIgYXBpcy5cclxuICovXHJcbi8qKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gd2luZG93IFRoZSBnbG9iYWwgd2luZG93IG9iamVjdC5cclxuICogQHBhcmFtIHtvYmplY3R9IGRvY3VtZW50IGpRdWVyeSB3cmFwcGVkIGRvY3VtZW50LlxyXG4gKiBAcGFyYW0ge29iamVjdH0gJGxvZyB3aW5kb3cuY29uc29sZSBvciBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBpbnRlcmZhY2UuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSAkc25pZmZlciAkc25pZmZlciBzZXJ2aWNlXHJcbiAqL1xyXG5mdW5jdGlvbiBCcm93c2VyKHdpbmRvdywgZG9jdW1lbnQsICRsb2csICRzbmlmZmVyKSB7XHJcbiAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICByYXdEb2N1bWVudCA9IGRvY3VtZW50WzBdLFxyXG4gICAgICBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbixcclxuICAgICAgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5LFxyXG4gICAgICBzZXRUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQsXHJcbiAgICAgIGNsZWFyVGltZW91dCA9IHdpbmRvdy5jbGVhclRpbWVvdXQsXHJcbiAgICAgIHBlbmRpbmdEZWZlcklkcyA9IHt9O1xyXG5cclxuICBzZWxmLmlzTW9jayA9IGZhbHNlO1xyXG5cclxuICB2YXIgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPSAwO1xyXG4gIHZhciBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MgPSBbXTtcclxuXHJcbiAgLy8gVE9ETyh2b2p0YSk6IHJlbW92ZSB0aGlzIHRlbXBvcmFyeSBhcGlcclxuICBzZWxmLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QgPSBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdDtcclxuICBzZWxmLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPSBmdW5jdGlvbigpIHsgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzsgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogRXhlY3V0ZXMgdGhlIGBmbmAgZnVuY3Rpb24oc3VwcG9ydHMgY3VycnlpbmcpIGFuZCBkZWNyZW1lbnRzIHRoZSBgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzYFxyXG4gICAqIGNvdW50ZXIuIElmIHRoZSBjb3VudGVyIHJlYWNoZXMgMCwgYWxsIHRoZSBgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzYCBhcmUgZXhlY3V0ZWQuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoZm4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGZuLmFwcGx5KG51bGwsIHNsaWNlQXJncyhhcmd1bWVudHMsIDEpKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENvdW50LS07XHJcbiAgICAgIGlmIChvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9PT0gMCkge1xyXG4gICAgICAgIHdoaWxlIChvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MucG9wKCkoKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgJGxvZy5lcnJvcihlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEhhc2godXJsKSB7XHJcbiAgICB2YXIgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xyXG4gICAgcmV0dXJuIGluZGV4ID09PSAtMSA/ICcnIDogdXJsLnN1YnN0cihpbmRleCArIDEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBOb3RlOiB0aGlzIG1ldGhvZCBpcyB1c2VkIG9ubHkgYnkgc2NlbmFyaW8gcnVubmVyXHJcbiAgICogVE9ETyh2b2p0YSk6IHByZWZpeCB0aGlzIG1ldGhvZCB3aXRoICQkID9cclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiBubyBvdXRzdGFuZGluZyByZXF1ZXN0XHJcbiAgICovXHJcbiAgc2VsZi5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIC8vIGZvcmNlIGJyb3dzZXIgdG8gZXhlY3V0ZSBhbGwgcG9sbEZucyAtIHRoaXMgaXMgbmVlZGVkIHNvIHRoYXQgY29va2llcyBhbmQgb3RoZXIgcG9sbGVycyBmaXJlXHJcbiAgICAvLyBhdCBzb21lIGRldGVybWluaXN0aWMgdGltZSBpbiByZXNwZWN0IHRvIHRoZSB0ZXN0IHJ1bm5lcidzIGFjdGlvbnMuIExlYXZpbmcgdGhpbmdzIHVwIHRvIHRoZVxyXG4gICAgLy8gcmVndWxhciBwb2xsZXIgd291bGQgcmVzdWx0IGluIGZsYWt5IHRlc3RzLlxyXG4gICAgZm9yRWFjaChwb2xsRm5zLCBmdW5jdGlvbihwb2xsRm4pIHsgcG9sbEZuKCk7IH0pO1xyXG5cclxuICAgIGlmIChvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9PT0gMCkge1xyXG4gICAgICBjYWxsYmFjaygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gUG9sbCBXYXRjaGVyIEFQSVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgdmFyIHBvbGxGbnMgPSBbXSxcclxuICAgICAgcG9sbFRpbWVvdXQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2FkZFBvbGxGblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBQb2xsIGZ1bmN0aW9uIHRvIGFkZFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQWRkcyBhIGZ1bmN0aW9uIHRvIHRoZSBsaXN0IG9mIGZ1bmN0aW9ucyB0aGF0IHBvbGxlciBwZXJpb2RpY2FsbHkgZXhlY3V0ZXMsXHJcbiAgICogYW5kIHN0YXJ0cyBwb2xsaW5nIGlmIG5vdCBzdGFydGVkIHlldC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSB0aGUgYWRkZWQgZnVuY3Rpb25cclxuICAgKi9cclxuICBzZWxmLmFkZFBvbGxGbiA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQocG9sbFRpbWVvdXQpKSBzdGFydFBvbGxlcigxMDAsIHNldFRpbWVvdXQpO1xyXG4gICAgcG9sbEZucy5wdXNoKGZuKTtcclxuICAgIHJldHVybiBmbjtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaW50ZXJ2YWwgSG93IG9mdGVuIHNob3VsZCBicm93c2VyIGNhbGwgcG9sbCBmdW5jdGlvbnMgKG1zKVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gc2V0VGltZW91dCBSZWZlcmVuY2UgdG8gYSByZWFsIG9yIGZha2UgYHNldFRpbWVvdXRgIGZ1bmN0aW9uLlxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ29uZmlndXJlcyB0aGUgcG9sbGVyIHRvIHJ1biBpbiB0aGUgc3BlY2lmaWVkIGludGVydmFscywgdXNpbmcgdGhlIHNwZWNpZmllZFxyXG4gICAqIHNldFRpbWVvdXQgZm4gYW5kIGtpY2tzIGl0IG9mZi5cclxuICAgKi9cclxuICBmdW5jdGlvbiBzdGFydFBvbGxlcihpbnRlcnZhbCwgc2V0VGltZW91dCkge1xyXG4gICAgKGZ1bmN0aW9uIGNoZWNrKCkge1xyXG4gICAgICBmb3JFYWNoKHBvbGxGbnMsIGZ1bmN0aW9uKHBvbGxGbikgeyBwb2xsRm4oKTsgfSk7XHJcbiAgICAgIHBvbGxUaW1lb3V0ID0gc2V0VGltZW91dChjaGVjaywgaW50ZXJ2YWwpO1xyXG4gICAgfSkoKTtcclxuICB9XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gVVJMIEFQSVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIHZhciBjYWNoZWRTdGF0ZSwgbGFzdEhpc3RvcnlTdGF0ZSxcclxuICAgICAgbGFzdEJyb3dzZXJVcmwgPSBsb2NhdGlvbi5ocmVmLFxyXG4gICAgICBiYXNlRWxlbWVudCA9IGRvY3VtZW50LmZpbmQoJ2Jhc2UnKSxcclxuICAgICAgcmVsb2FkTG9jYXRpb24gPSBudWxsO1xyXG5cclxuICBjYWNoZVN0YXRlKCk7XHJcbiAgbGFzdEhpc3RvcnlTdGF0ZSA9IGNhY2hlZFN0YXRlO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSAkYnJvd3NlciN1cmxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEdFVFRFUjpcclxuICAgKiBXaXRob3V0IGFueSBhcmd1bWVudCwgdGhpcyBtZXRob2QganVzdCByZXR1cm5zIGN1cnJlbnQgdmFsdWUgb2YgbG9jYXRpb24uaHJlZi5cclxuICAgKlxyXG4gICAqIFNFVFRFUjpcclxuICAgKiBXaXRoIGF0IGxlYXN0IG9uZSBhcmd1bWVudCwgdGhpcyBtZXRob2Qgc2V0cyB1cmwgdG8gbmV3IHZhbHVlLlxyXG4gICAqIElmIGh0bWw1IGhpc3RvcnkgYXBpIHN1cHBvcnRlZCwgcHVzaFN0YXRlL3JlcGxhY2VTdGF0ZSBpcyB1c2VkLCBvdGhlcndpc2VcclxuICAgKiBsb2NhdGlvbi5ocmVmL2xvY2F0aW9uLnJlcGxhY2UgaXMgdXNlZC5cclxuICAgKiBSZXR1cm5zIGl0cyBvd24gaW5zdGFuY2UgdG8gYWxsb3cgY2hhaW5pbmdcclxuICAgKlxyXG4gICAqIE5PVEU6IHRoaXMgYXBpIGlzIGludGVuZGVkIGZvciB1c2Ugb25seSBieSB0aGUgJGxvY2F0aW9uIHNlcnZpY2UuIFBsZWFzZSB1c2UgdGhlXHJcbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiAkbG9jYXRpb24gc2VydmljZX0gdG8gY2hhbmdlIHVybC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgTmV3IHVybCAod2hlbiB1c2VkIGFzIHNldHRlcilcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSByZXBsYWNlIFNob3VsZCBuZXcgdXJsIHJlcGxhY2UgY3VycmVudCBoaXN0b3J5IHJlY29yZD9cclxuICAgKiBAcGFyYW0ge29iamVjdD19IHN0YXRlIG9iamVjdCB0byB1c2Ugd2l0aCBwdXNoU3RhdGUvcmVwbGFjZVN0YXRlXHJcbiAgICovXHJcbiAgc2VsZi51cmwgPSBmdW5jdGlvbih1cmwsIHJlcGxhY2UsIHN0YXRlKSB7XHJcbiAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMgYGhpc3Rvcnkuc3RhdGVgIGlzIGBudWxsYCBieSBkZWZhdWx0OyB0cmVhdGluZyBpdCBzZXBhcmF0ZWx5XHJcbiAgICAvLyBmcm9tIGB1bmRlZmluZWRgIHdvdWxkIGNhdXNlIGAkYnJvd3Nlci51cmwoJy9mb28nKWAgdG8gY2hhbmdlIGBoaXN0b3J5LnN0YXRlYFxyXG4gICAgLy8gdG8gdW5kZWZpbmVkIHZpYSBgcHVzaFN0YXRlYC4gSW5zdGVhZCwgbGV0J3MgY2hhbmdlIGB1bmRlZmluZWRgIHRvIGBudWxsYCBoZXJlLlxyXG4gICAgaWYgKGlzVW5kZWZpbmVkKHN0YXRlKSkge1xyXG4gICAgICBzdGF0ZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQW5kcm9pZCBCcm93c2VyIEJGQ2FjaGUgY2F1c2VzIGxvY2F0aW9uLCBoaXN0b3J5IHJlZmVyZW5jZSB0byBiZWNvbWUgc3RhbGUuXHJcbiAgICBpZiAobG9jYXRpb24gIT09IHdpbmRvdy5sb2NhdGlvbikgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XHJcbiAgICBpZiAoaGlzdG9yeSAhPT0gd2luZG93Lmhpc3RvcnkpIGhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcclxuXHJcbiAgICAvLyBzZXR0ZXJcclxuICAgIGlmICh1cmwpIHtcclxuICAgICAgdmFyIHNhbWVTdGF0ZSA9IGxhc3RIaXN0b3J5U3RhdGUgPT09IHN0YXRlO1xyXG5cclxuICAgICAgLy8gRG9uJ3QgY2hhbmdlIGFueXRoaW5nIGlmIHByZXZpb3VzIGFuZCBjdXJyZW50IFVSTHMgYW5kIHN0YXRlcyBtYXRjaC4gVGhpcyBhbHNvIHByZXZlbnRzXHJcbiAgICAgIC8vIElFPDEwIGZyb20gZ2V0dGluZyBpbnRvIHJlZGlyZWN0IGxvb3Agd2hlbiBpbiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCBtb2RlLlxyXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9jb21taXQvZmZiMjcwMVxyXG4gICAgICBpZiAobGFzdEJyb3dzZXJVcmwgPT09IHVybCAmJiAoISRzbmlmZmVyLmhpc3RvcnkgfHwgc2FtZVN0YXRlKSkge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBzYW1lQmFzZSA9IGxhc3RCcm93c2VyVXJsICYmIHN0cmlwSGFzaChsYXN0QnJvd3NlclVybCkgPT09IHN0cmlwSGFzaCh1cmwpO1xyXG4gICAgICBsYXN0QnJvd3NlclVybCA9IHVybDtcclxuICAgICAgbGFzdEhpc3RvcnlTdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAvLyBEb24ndCB1c2UgaGlzdG9yeSBBUEkgaWYgb25seSB0aGUgaGFzaCBjaGFuZ2VkXHJcbiAgICAgIC8vIGR1ZSB0byBhIGJ1ZyBpbiBJRTEwL0lFMTEgd2hpY2ggbGVhZHNcclxuICAgICAgLy8gdG8gbm90IGZpcmluZyBhIGBoYXNoY2hhbmdlYCBub3IgYHBvcHN0YXRlYCBldmVudFxyXG4gICAgICAvLyBpbiBzb21lIGNhc2VzIChzZWUgIzkxNDMpLlxyXG4gICAgICBpZiAoJHNuaWZmZXIuaGlzdG9yeSAmJiAoIXNhbWVCYXNlIHx8ICFzYW1lU3RhdGUpKSB7XHJcbiAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xyXG4gICAgICAgIGNhY2hlU3RhdGUoKTtcclxuICAgICAgICAvLyBEbyB0aGUgYXNzaWdubWVudCBhZ2FpbiBzbyB0aGF0IHRob3NlIHR3byB2YXJpYWJsZXMgYXJlIHJlZmVyZW50aWFsbHkgaWRlbnRpY2FsLlxyXG4gICAgICAgIGxhc3RIaXN0b3J5U3RhdGUgPSBjYWNoZWRTdGF0ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIXNhbWVCYXNlKSB7XHJcbiAgICAgICAgICByZWxvYWRMb2NhdGlvbiA9IHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcGxhY2UpIHtcclxuICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UodXJsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCFzYW1lQmFzZSkge1xyXG4gICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGdldEhhc2godXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICAvLyBnZXR0ZXJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIC0gcmVsb2FkTG9jYXRpb24gaXMgbmVlZGVkIGFzIGJyb3dzZXJzIGRvbid0IGFsbG93IHRvIHJlYWQgb3V0XHJcbiAgICAgIC8vICAgdGhlIG5ldyBsb2NhdGlvbi5ocmVmIGlmIGEgcmVsb2FkIGhhcHBlbmVkLlxyXG4gICAgICAvLyAtIHRoZSByZXBsYWNlbWVudCBpcyBhIHdvcmthcm91bmQgZm9yIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQwNzE3MlxyXG4gICAgICByZXR1cm4gcmVsb2FkTG9jYXRpb24gfHwgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8lMjcvZyxcIidcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgJGJyb3dzZXIjc3RhdGVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGEgZ2V0dGVyLlxyXG4gICAqXHJcbiAgICogUmV0dXJuIGhpc3Rvcnkuc3RhdGUgb3IgbnVsbCBpZiBoaXN0b3J5LnN0YXRlIGlzIHVuZGVmaW5lZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IHN0YXRlXHJcbiAgICovXHJcbiAgc2VsZi5zdGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGNhY2hlZFN0YXRlO1xyXG4gIH07XHJcblxyXG4gIHZhciB1cmxDaGFuZ2VMaXN0ZW5lcnMgPSBbXSxcclxuICAgICAgdXJsQ2hhbmdlSW5pdCA9IGZhbHNlO1xyXG5cclxuICBmdW5jdGlvbiBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSgpIHtcclxuICAgIGNhY2hlU3RhdGUoKTtcclxuICAgIGZpcmVVcmxDaGFuZ2UoKTtcclxuICB9XHJcblxyXG4gIC8vIFRoaXMgdmFyaWFibGUgc2hvdWxkIGJlIHVzZWQgKm9ubHkqIGluc2lkZSB0aGUgY2FjaGVTdGF0ZSBmdW5jdGlvbi5cclxuICB2YXIgbGFzdENhY2hlZFN0YXRlID0gbnVsbDtcclxuICBmdW5jdGlvbiBjYWNoZVN0YXRlKCkge1xyXG4gICAgLy8gVGhpcyBzaG91bGQgYmUgdGhlIG9ubHkgcGxhY2UgaW4gJGJyb3dzZXIgd2hlcmUgYGhpc3Rvcnkuc3RhdGVgIGlzIHJlYWQuXHJcbiAgICBjYWNoZWRTdGF0ZSA9IHdpbmRvdy5oaXN0b3J5LnN0YXRlO1xyXG4gICAgY2FjaGVkU3RhdGUgPSBpc1VuZGVmaW5lZChjYWNoZWRTdGF0ZSkgPyBudWxsIDogY2FjaGVkU3RhdGU7XHJcblxyXG4gICAgLy8gUHJldmVudCBjYWxsYmFja3MgZm8gZmlyZSB0d2ljZSBpZiBib3RoIGhhc2hjaGFuZ2UgJiBwb3BzdGF0ZSB3ZXJlIGZpcmVkLlxyXG4gICAgaWYgKGVxdWFscyhjYWNoZWRTdGF0ZSwgbGFzdENhY2hlZFN0YXRlKSkge1xyXG4gICAgICBjYWNoZWRTdGF0ZSA9IGxhc3RDYWNoZWRTdGF0ZTtcclxuICAgIH1cclxuICAgIGxhc3RDYWNoZWRTdGF0ZSA9IGNhY2hlZFN0YXRlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZmlyZVVybENoYW5nZSgpIHtcclxuICAgIGlmIChsYXN0QnJvd3NlclVybCA9PT0gc2VsZi51cmwoKSAmJiBsYXN0SGlzdG9yeVN0YXRlID09PSBjYWNoZWRTdGF0ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGFzdEJyb3dzZXJVcmwgPSBzZWxmLnVybCgpO1xyXG4gICAgbGFzdEhpc3RvcnlTdGF0ZSA9IGNhY2hlZFN0YXRlO1xyXG4gICAgZm9yRWFjaCh1cmxDaGFuZ2VMaXN0ZW5lcnMsIGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICAgIGxpc3RlbmVyKHNlbGYudXJsKCksIGNhY2hlZFN0YXRlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgJGJyb3dzZXIjb25VcmxDaGFuZ2VcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQsIHdoZW4gdXJsIGNoYW5nZXMuXHJcbiAgICpcclxuICAgKiBJdCdzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIHVybCBpcyBjaGFuZ2VkIGZyb20gb3V0c2lkZSBvZiBhbmd1bGFyOlxyXG4gICAqIC0gdXNlciB0eXBlcyBkaWZmZXJlbnQgdXJsIGludG8gYWRkcmVzcyBiYXJcclxuICAgKiAtIHVzZXIgY2xpY2tzIG9uIGhpc3RvcnkgKGZvcndhcmQvYmFjaykgYnV0dG9uXHJcbiAgICogLSB1c2VyIGNsaWNrcyBvbiBhIGxpbmtcclxuICAgKlxyXG4gICAqIEl0J3Mgbm90IGNhbGxlZCB3aGVuIHVybCBpcyBjaGFuZ2VkIGJ5ICRicm93c2VyLnVybCgpIG1ldGhvZFxyXG4gICAqXHJcbiAgICogVGhlIGxpc3RlbmVyIGdldHMgY2FsbGVkIHdpdGggbmV3IHVybCBhcyBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBOT1RFOiB0aGlzIGFwaSBpcyBpbnRlbmRlZCBmb3IgdXNlIG9ubHkgYnkgdGhlICRsb2NhdGlvbiBzZXJ2aWNlLiBQbGVhc2UgdXNlIHRoZVxyXG4gICAqIHtAbGluayBuZy4kbG9jYXRpb24gJGxvY2F0aW9uIHNlcnZpY2V9IHRvIG1vbml0b3IgdXJsIGNoYW5nZXMgaW4gYW5ndWxhciBhcHBzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpfSBsaXN0ZW5lciBMaXN0ZW5lciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB1cmwgY2hhbmdlcy5cclxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihzdHJpbmcpfSBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVyIGZuIC0gaGFuZHkgaWYgdGhlIGZuIGlzIGFub255bW91cy5cclxuICAgKi9cclxuICBzZWxmLm9uVXJsQ2hhbmdlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIC8vIFRPRE8odm9qdGEpOiByZWZhY3RvciB0byB1c2Ugbm9kZSdzIHN5bnRheCBmb3IgZXZlbnRzXHJcbiAgICBpZiAoIXVybENoYW5nZUluaXQpIHtcclxuICAgICAgLy8gV2UgbGlzdGVuIG9uIGJvdGggKGhhc2hjaGFuZ2UvcG9wc3RhdGUpIHdoZW4gYXZhaWxhYmxlLCBhcyBzb21lIGJyb3dzZXJzIChlLmcuIE9wZXJhKVxyXG4gICAgICAvLyBkb24ndCBmaXJlIHBvcHN0YXRlIHdoZW4gdXNlciBjaGFuZ2UgdGhlIGFkZHJlc3MgYmFyIGFuZCBkb24ndCBmaXJlIGhhc2hjaGFuZ2Ugd2hlbiB1cmxcclxuICAgICAgLy8gY2hhbmdlZCBieSBwdXNoL3JlcGxhY2VTdGF0ZVxyXG5cclxuICAgICAgLy8gaHRtbDUgaGlzdG9yeSBhcGkgLSBwb3BzdGF0ZSBldmVudFxyXG4gICAgICBpZiAoJHNuaWZmZXIuaGlzdG9yeSkganFMaXRlKHdpbmRvdykub24oJ3BvcHN0YXRlJywgY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UpO1xyXG4gICAgICAvLyBoYXNoY2hhbmdlIGV2ZW50XHJcbiAgICAgIGpxTGl0ZSh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UpO1xyXG5cclxuICAgICAgdXJsQ2hhbmdlSW5pdCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdXJsQ2hhbmdlTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgcmV0dXJuIGNhbGxiYWNrO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwgaGFzIGNoYW5nZWQgb3V0c2lkZSBvZiBBbmd1bGFyLlxyXG4gICAqIE5lZWRzIHRvIGJlIGV4cG9ydGVkIHRvIGJlIGFibGUgdG8gY2hlY2sgZm9yIGNoYW5nZXMgdGhhdCBoYXZlIGJlZW4gZG9uZSBpbiBzeW5jLFxyXG4gICAqIGFzIGhhc2hjaGFuZ2UvcG9wc3RhdGUgZXZlbnRzIGZpcmUgaW4gYXN5bmMuXHJcbiAgICovXHJcbiAgc2VsZi4kJGNoZWNrVXJsQ2hhbmdlID0gZmlyZVVybENoYW5nZTtcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBNaXNjIEFQSVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2Jhc2VIcmVmXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXR1cm5zIGN1cnJlbnQgPGJhc2UgaHJlZj5cclxuICAgKiAoYWx3YXlzIHJlbGF0aXZlIC0gd2l0aG91dCBkb21haW4pXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY3VycmVudCBiYXNlIGhyZWZcclxuICAgKi9cclxuICBzZWxmLmJhc2VIcmVmID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaHJlZiA9IGJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKTtcclxuICAgIHJldHVybiBocmVmID8gaHJlZi5yZXBsYWNlKC9eKGh0dHBzP1xcOik/XFwvXFwvW15cXC9dKi8sICcnKSA6ICcnO1xyXG4gIH07XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gQ29va2llcyBBUElcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIHZhciBsYXN0Q29va2llcyA9IHt9O1xyXG4gIHZhciBsYXN0Q29va2llU3RyaW5nID0gJyc7XHJcbiAgdmFyIGNvb2tpZVBhdGggPSBzZWxmLmJhc2VIcmVmKCk7XHJcblxyXG4gIGZ1bmN0aW9uIHNhZmVEZWNvZGVVUklDb21wb25lbnQoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHN0cik7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSAkYnJvd3NlciNjb29raWVzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgQ29va2llIG5hbWVcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHZhbHVlIENvb2tpZSB2YWx1ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhlIGNvb2tpZXMgbWV0aG9kIHByb3ZpZGVzIGEgJ3ByaXZhdGUnIGxvdyBsZXZlbCBhY2Nlc3MgdG8gYnJvd3NlciBjb29raWVzLlxyXG4gICAqIEl0IGlzIG5vdCBtZWFudCB0byBiZSB1c2VkIGRpcmVjdGx5LCB1c2UgdGhlICRjb29raWUgc2VydmljZSBpbnN0ZWFkLlxyXG4gICAqXHJcbiAgICogVGhlIHJldHVybiB2YWx1ZXMgdmFyeSBkZXBlbmRpbmcgb24gdGhlIGFyZ3VtZW50cyB0aGF0IHRoZSBtZXRob2Qgd2FzIGNhbGxlZCB3aXRoIGFzIGZvbGxvd3M6XHJcbiAgICpcclxuICAgKiAtIGNvb2tpZXMoKSAtPiBoYXNoIG9mIGFsbCBjb29raWVzLCB0aGlzIGlzIE5PVCBhIGNvcHkgb2YgdGhlIGludGVybmFsIHN0YXRlLCBzbyBkbyBub3QgbW9kaWZ5XHJcbiAgICogICBpdFxyXG4gICAqIC0gY29va2llcyhuYW1lLCB2YWx1ZSkgLT4gc2V0IG5hbWUgdG8gdmFsdWUsIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkZWxldGUgdGhlIGNvb2tpZVxyXG4gICAqIC0gY29va2llcyhuYW1lKSAtPiB0aGUgc2FtZSBhcyAobmFtZSwgdW5kZWZpbmVkKSA9PSBERUxFVEVTIChubyBvbmUgY2FsbHMgaXQgcmlnaHQgbm93IHRoYXRcclxuICAgKiAgIHdheSlcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEhhc2ggb2YgYWxsIGNvb2tpZXMgKGlmIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXIpXHJcbiAgICovXHJcbiAgc2VsZi5jb29raWVzID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcclxuICAgIHZhciBjb29raWVMZW5ndGgsIGNvb2tpZUFycmF5LCBjb29raWUsIGksIGluZGV4O1xyXG5cclxuICAgIGlmIChuYW1lKSB7XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmF3RG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgXCI9O3BhdGg9XCIgKyBjb29raWVQYXRoICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UXCI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xyXG4gICAgICAgICAgY29va2llTGVuZ3RoID0gKHJhd0RvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc7cGF0aD0nICsgY29va2llUGF0aCkubGVuZ3RoICsgMTtcclxuXHJcbiAgICAgICAgICAvLyBwZXIgaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMjEwOS50eHQgYnJvd3NlciBtdXN0IGFsbG93IGF0IG1pbmltdW06XHJcbiAgICAgICAgICAvLyAtIDMwMCBjb29raWVzXHJcbiAgICAgICAgICAvLyAtIDIwIGNvb2tpZXMgcGVyIHVuaXF1ZSBkb21haW5cclxuICAgICAgICAgIC8vIC0gNDA5NiBieXRlcyBwZXIgY29va2llXHJcbiAgICAgICAgICBpZiAoY29va2llTGVuZ3RoID4gNDA5Nikge1xyXG4gICAgICAgICAgICAkbG9nLndhcm4oXCJDb29raWUgJ1wiICsgbmFtZSArXHJcbiAgICAgICAgICAgICAgXCInIHBvc3NpYmx5IG5vdCBzZXQgb3Igb3ZlcmZsb3dlZCBiZWNhdXNlIGl0IHdhcyB0b28gbGFyZ2UgKFwiICtcclxuICAgICAgICAgICAgICBjb29raWVMZW5ndGggKyBcIiA+IDQwOTYgYnl0ZXMpIVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChyYXdEb2N1bWVudC5jb29raWUgIT09IGxhc3RDb29raWVTdHJpbmcpIHtcclxuICAgICAgICBsYXN0Q29va2llU3RyaW5nID0gcmF3RG9jdW1lbnQuY29va2llO1xyXG4gICAgICAgIGNvb2tpZUFycmF5ID0gbGFzdENvb2tpZVN0cmluZy5zcGxpdChcIjsgXCIpO1xyXG4gICAgICAgIGxhc3RDb29raWVzID0ge307XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb29raWVBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgY29va2llID0gY29va2llQXJyYXlbaV07XHJcbiAgICAgICAgICBpbmRleCA9IGNvb2tpZS5pbmRleE9mKCc9Jyk7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7IC8vaWdub3JlIG5hbWVsZXNzIGNvb2tpZXNcclxuICAgICAgICAgICAgbmFtZSA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZygwLCBpbmRleCkpO1xyXG4gICAgICAgICAgICAvLyB0aGUgZmlyc3QgdmFsdWUgdGhhdCBpcyBzZWVuIGZvciBhIGNvb2tpZSBpcyB0aGUgbW9zdFxyXG4gICAgICAgICAgICAvLyBzcGVjaWZpYyBvbmUuICB2YWx1ZXMgZm9yIHRoZSBzYW1lIGNvb2tpZSBuYW1lIHRoYXRcclxuICAgICAgICAgICAgLy8gZm9sbG93IGFyZSBmb3IgbGVzcyBzcGVjaWZpYyBwYXRocy5cclxuICAgICAgICAgICAgaWYgKGxhc3RDb29raWVzW25hbWVdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICBsYXN0Q29va2llc1tuYW1lXSA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhpbmRleCArIDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbGFzdENvb2tpZXM7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uLCB3aG8ncyBleGVjdXRpb24gc2hvdWxkIGJlIGRlZmVycmVkLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIG9mIG1pbGxpc2Vjb25kcyB0byBkZWZlciB0aGUgZnVuY3Rpb24gZXhlY3V0aW9uLlxyXG4gICAqIEByZXR1cm5zIHsqfSBEZWZlcklkIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSB0YXNrIHZpYSBgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKClgLlxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogRXhlY3V0ZXMgYSBmbiBhc3luY2hyb25vdXNseSB2aWEgYHNldFRpbWVvdXQoZm4sIGRlbGF5KWAuXHJcbiAgICpcclxuICAgKiBVbmxpa2Ugd2hlbiBjYWxsaW5nIGBzZXRUaW1lb3V0YCBkaXJlY3RseSwgaW4gdGVzdCB0aGlzIGZ1bmN0aW9uIGlzIG1vY2tlZCBhbmQgaW5zdGVhZCBvZiB1c2luZ1xyXG4gICAqIGBzZXRUaW1lb3V0YCBpbiB0ZXN0cywgdGhlIGZucyBhcmUgcXVldWVkIGluIGFuIGFycmF5LCB3aGljaCBjYW4gYmUgcHJvZ3JhbW1hdGljYWxseSBmbHVzaGVkXHJcbiAgICogdmlhIGAkYnJvd3Nlci5kZWZlci5mbHVzaCgpYC5cclxuICAgKlxyXG4gICAqL1xyXG4gIHNlbGYuZGVmZXIgPSBmdW5jdGlvbihmbiwgZGVsYXkpIHtcclxuICAgIHZhciB0aW1lb3V0SWQ7XHJcbiAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrO1xyXG4gICAgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgZGVsZXRlIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdO1xyXG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbik7XHJcbiAgICB9LCBkZWxheSB8fCAwKTtcclxuICAgIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdID0gdHJ1ZTtcclxuICAgIHJldHVybiB0aW1lb3V0SWQ7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyLmNhbmNlbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FuY2VscyBhIGRlZmVycmVkIHRhc2sgaWRlbnRpZmllZCB3aXRoIGBkZWZlcklkYC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gZGVmZXJJZCBUb2tlbiByZXR1cm5lZCBieSB0aGUgYCRicm93c2VyLmRlZmVyYCBmdW5jdGlvbi5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxyXG4gICAqICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZC5cclxuICAgKi9cclxuICBzZWxmLmRlZmVyLmNhbmNlbCA9IGZ1bmN0aW9uKGRlZmVySWQpIHtcclxuICAgIGlmIChwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF0pIHtcclxuICAgICAgZGVsZXRlIHBlbmRpbmdEZWZlcklkc1tkZWZlcklkXTtcclxuICAgICAgY2xlYXJUaW1lb3V0KGRlZmVySWQpO1xyXG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uICRCcm93c2VyUHJvdmlkZXIoKSB7XHJcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2cnLCAnJHNuaWZmZXInLCAnJGRvY3VtZW50JyxcclxuICAgICAgZnVuY3Rpb24oJHdpbmRvdywgJGxvZywgJHNuaWZmZXIsICRkb2N1bWVudCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQnJvd3Nlcigkd2luZG93LCAkZG9jdW1lbnQsICRsb2csICRzbmlmZmVyKTtcclxuICAgICAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkY2FjaGVGYWN0b3J5XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBGYWN0b3J5IHRoYXQgY29uc3RydWN0cyB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0cyBhbmQgZ2l2ZXMgYWNjZXNzIHRvXHJcbiAqIHRoZW0uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqXHJcbiAqICB2YXIgY2FjaGUgPSAkY2FjaGVGYWN0b3J5KCdjYWNoZUlkJyk7XHJcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ2NhY2hlSWQnKSkudG9CZShjYWNoZSk7XHJcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ25vU3VjaENhY2hlSWQnKSkubm90LnRvQmVEZWZpbmVkKCk7XHJcbiAqXHJcbiAqICBjYWNoZS5wdXQoXCJrZXlcIiwgXCJ2YWx1ZVwiKTtcclxuICogIGNhY2hlLnB1dChcImFub3RoZXIga2V5XCIsIFwiYW5vdGhlciB2YWx1ZVwiKTtcclxuICpcclxuICogIC8vIFdlJ3ZlIHNwZWNpZmllZCBubyBvcHRpb25zIG9uIGNyZWF0aW9uXHJcbiAqICBleHBlY3QoY2FjaGUuaW5mbygpKS50b0VxdWFsKHtpZDogJ2NhY2hlSWQnLCBzaXplOiAyfSk7XHJcbiAqXHJcbiAqIGBgYFxyXG4gKlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVJZCBOYW1lIG9yIGlkIG9mIHRoZSBuZXdseSBjcmVhdGVkIGNhY2hlLlxyXG4gKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgT3B0aW9ucyBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGNhY2hlIGJlaGF2aW9yLiBQcm9wZXJ0aWVzOlxyXG4gKlxyXG4gKiAgIC0gYHtudW1iZXI9fWAgYGNhcGFjaXR5YCDigJQgdHVybnMgdGhlIGNhY2hlIGludG8gTFJVIGNhY2hlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBOZXdseSBjcmVhdGVkIGNhY2hlIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgc2V0IG9mIG1ldGhvZHM6XHJcbiAqXHJcbiAqIC0gYHtvYmplY3R9YCBgaW5mbygpYCDigJQgUmV0dXJucyBpZCwgc2l6ZSwgYW5kIG9wdGlvbnMgb2YgY2FjaGUuXHJcbiAqIC0gYHt7Kn19YCBgcHV0KHtzdHJpbmd9IGtleSwgeyp9IHZhbHVlKWAg4oCUIFB1dHMgYSBuZXcga2V5LXZhbHVlIHBhaXIgaW50byB0aGUgY2FjaGUgYW5kIHJldHVybnNcclxuICogICBpdC5cclxuICogLSBge3sqfX1gIGBnZXQoe3N0cmluZ30ga2V5KWAg4oCUIFJldHVybnMgY2FjaGVkIHZhbHVlIGZvciBga2V5YCBvciB1bmRlZmluZWQgZm9yIGNhY2hlIG1pc3MuXHJcbiAqIC0gYHt2b2lkfWAgYHJlbW92ZSh7c3RyaW5nfSBrZXkpYCDigJQgUmVtb3ZlcyBhIGtleS12YWx1ZSBwYWlyIGZyb20gdGhlIGNhY2hlLlxyXG4gKiAtIGB7dm9pZH1gIGByZW1vdmVBbGwoKWAg4oCUIFJlbW92ZXMgYWxsIGNhY2hlZCB2YWx1ZXMuXHJcbiAqIC0gYHt2b2lkfWAgYGRlc3Ryb3koKWAg4oCUIFJlbW92ZXMgcmVmZXJlbmNlcyB0byB0aGlzIGNhY2hlIGZyb20gJGNhY2hlRmFjdG9yeS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY2FjaGVFeGFtcGxlQXBwXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhY2hlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJuZXdDYWNoZUtleVwiIHBsYWNlaG9sZGVyPVwiS2V5XCI+XHJcbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlVmFsdWVcIiBwbGFjZWhvbGRlcj1cIlZhbHVlXCI+XHJcbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJwdXQobmV3Q2FjaGVLZXksIG5ld0NhY2hlVmFsdWUpXCI+Q2FjaGU8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgIDxwIG5nLWlmPVwia2V5cy5sZW5ndGhcIj5DYWNoZWQgVmFsdWVzPC9wPlxyXG4gICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cImtleSBpbiBrZXlzXCI+XHJcbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cclxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cclxuICAgICAgICAgICA8YiBuZy1iaW5kPVwiY2FjaGUuZ2V0KGtleSlcIj48L2I+XHJcbiAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgPHA+Q2FjaGUgSW5mbzwvcD5cclxuICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCIoa2V5LCB2YWx1ZSkgaW4gY2FjaGUuaW5mbygpXCI+XHJcbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cclxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cclxuICAgICAgICAgICA8YiBuZy1iaW5kPVwidmFsdWVcIj48L2I+XHJcbiAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjYWNoZUV4YW1wbGVBcHAnLCBbXSkuXHJcbiAgICAgICAgIGNvbnRyb2xsZXIoJ0NhY2hlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRjYWNoZUZhY3RvcnknLCBmdW5jdGlvbigkc2NvcGUsICRjYWNoZUZhY3RvcnkpIHtcclxuICAgICAgICAgICAkc2NvcGUua2V5cyA9IFtdO1xyXG4gICAgICAgICAgICRzY29wZS5jYWNoZSA9ICRjYWNoZUZhY3RvcnkoJ2NhY2hlSWQnKTtcclxuICAgICAgICAgICAkc2NvcGUucHV0ID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgaWYgKCRzY29wZS5jYWNoZS5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICRzY29wZS5jYWNoZS5wdXQoa2V5LCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlKTtcclxuICAgICAgICAgICB9O1xyXG4gICAgICAgICB9XSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgIHAge1xyXG4gICAgICAgICBtYXJnaW46IDEwcHggMCAzcHg7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIoKSB7XHJcblxyXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNhY2hlcyA9IHt9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNhY2hlRmFjdG9yeShjYWNoZUlkLCBvcHRpb25zKSB7XHJcbiAgICAgIGlmIChjYWNoZUlkIGluIGNhY2hlcykge1xyXG4gICAgICAgIHRocm93IG1pbkVycignJGNhY2hlRmFjdG9yeScpKCdpaWQnLCBcIkNhY2hlSWQgJ3swfScgaXMgYWxyZWFkeSB0YWtlbiFcIiwgY2FjaGVJZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBzaXplID0gMCxcclxuICAgICAgICAgIHN0YXRzID0gZXh0ZW5kKHt9LCBvcHRpb25zLCB7aWQ6IGNhY2hlSWR9KSxcclxuICAgICAgICAgIGRhdGEgPSB7fSxcclxuICAgICAgICAgIGNhcGFjaXR5ID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5jYXBhY2l0eSkgfHwgTnVtYmVyLk1BWF9WQUxVRSxcclxuICAgICAgICAgIGxydUhhc2ggPSB7fSxcclxuICAgICAgICAgIGZyZXNoRW5kID0gbnVsbCxcclxuICAgICAgICAgIHN0YWxlRW5kID0gbnVsbDtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgdHlwZVxyXG4gICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBBIGNhY2hlIG9iamVjdCB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBkYXRhLCBwcmltYXJpbHkgdXNlZCBieVxyXG4gICAgICAgKiB7QGxpbmsgJGh0dHAgJGh0dHB9IGFuZCB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpzY3JpcHQgc2NyaXB0fSBkaXJlY3RpdmUgdG8gY2FjaGVcclxuICAgICAgICogdGVtcGxhdGVzIGFuZCBvdGhlciBkYXRhLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgKiAgYW5ndWxhci5tb2R1bGUoJ3N1cGVyQ2FjaGUnKVxyXG4gICAgICAgKiAgICAuZmFjdG9yeSgnc3VwZXJDYWNoZScsIFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcclxuICAgICAgICogICAgICByZXR1cm4gJGNhY2hlRmFjdG9yeSgnc3VwZXItY2FjaGUnKTtcclxuICAgICAgICogICAgfV0pO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICogRXhhbXBsZSB0ZXN0OlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgKiAgaXQoJ3Nob3VsZCBiZWhhdmUgbGlrZSBhIGNhY2hlJywgaW5qZWN0KGZ1bmN0aW9uKHN1cGVyQ2FjaGUpIHtcclxuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2tleScsICd2YWx1ZScpO1xyXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnB1dCgnYW5vdGhlciBrZXknLCAnYW5vdGhlciB2YWx1ZScpO1xyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5pbmZvKCkpLnRvRXF1YWwoe1xyXG4gICAgICAgKiAgICAgIGlkOiAnc3VwZXItY2FjaGUnLFxyXG4gICAgICAgKiAgICAgIHNpemU6IDJcclxuICAgICAgICogICAgfSk7XHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIHN1cGVyQ2FjaGUucmVtb3ZlKCdhbm90aGVyIGtleScpO1xyXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5nZXQoJ2Fub3RoZXIga2V5JykpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICpcclxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmVBbGwoKTtcclxuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuaW5mbygpKS50b0VxdWFsKHtcclxuICAgICAgICogICAgICBpZDogJ3N1cGVyLWNhY2hlJyxcclxuICAgICAgICogICAgICBzaXplOiAwXHJcbiAgICAgICAqICAgIH0pO1xyXG4gICAgICAgKiAgfSkpO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICovXHJcbiAgICAgIHJldHVybiBjYWNoZXNbY2FjaGVJZF0gPSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3B1dFxyXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBJbnNlcnRzIGEgbmFtZWQgZW50cnkgaW50byB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdCB0byBiZVxyXG4gICAgICAgICAqIHJldHJpZXZlZCBsYXRlciwgYW5kIGluY3JlbWVudGluZyB0aGUgc2l6ZSBvZiB0aGUgY2FjaGUgaWYgdGhlIGtleSB3YXMgbm90IGFscmVhZHlcclxuICAgICAgICAgKiBwcmVzZW50IGluIHRoZSBjYWNoZS4gSWYgYmVoYXZpbmcgbGlrZSBhbiBMUlUgY2FjaGUsIGl0IHdpbGwgYWxzbyByZW1vdmUgc3RhbGVcclxuICAgICAgICAgKiBlbnRyaWVzIGZyb20gdGhlIHNldC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEl0IHdpbGwgbm90IGluc2VydCB1bmRlZmluZWQgdmFsdWVzIGludG8gdGhlIGNhY2hlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IHVuZGVyIHdoaWNoIHRoZSBjYWNoZWQgZGF0YSBpcyBzdG9yZWQuXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSB0aGUgdmFsdWUgdG8gc3RvcmUgYWxvbmdzaWRlIHRoZSBrZXkuIElmIGl0IGlzIHVuZGVmaW5lZCwgdGhlIGtleVxyXG4gICAgICAgICAqICAgIHdpbGwgbm90IGJlIHN0b3JlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHN0b3JlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldIHx8IChscnVIYXNoW2tleV0gPSB7a2V5OiBrZXl9KTtcclxuXHJcbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybjtcclxuICAgICAgICAgIGlmICghKGtleSBpbiBkYXRhKSkgc2l6ZSsrO1xyXG4gICAgICAgICAgZGF0YVtrZXldID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgaWYgKHNpemUgPiBjYXBhY2l0eSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZShzdGFsZUVuZC5rZXkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNnZXRcclxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0cmlldmVzIG5hbWVkIGRhdGEgc3RvcmVkIGluIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IG9mIHRoZSBkYXRhIHRvIGJlIHJldHJpZXZlZFxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgc3RvcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICBpZiAoY2FwYWNpdHkgPCBOdW1iZXIuTUFYX1ZBTFVFKSB7XHJcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbHJ1RW50cnkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3JlbW92ZVxyXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZW1vdmVzIGFuIGVudHJ5IGZyb20gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGJlIHJlbW92ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xyXG4gICAgICAgICAgICB2YXIgbHJ1RW50cnkgPSBscnVIYXNoW2tleV07XHJcblxyXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAobHJ1RW50cnkgPT0gZnJlc2hFbmQpIGZyZXNoRW5kID0gbHJ1RW50cnkucDtcclxuICAgICAgICAgICAgaWYgKGxydUVudHJ5ID09IHN0YWxlRW5kKSBzdGFsZUVuZCA9IGxydUVudHJ5Lm47XHJcbiAgICAgICAgICAgIGxpbmsobHJ1RW50cnkubixscnVFbnRyeS5wKTtcclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZSBscnVIYXNoW2tleV07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcclxuICAgICAgICAgIHNpemUtLTtcclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcmVtb3ZlQWxsXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENsZWFycyB0aGUgY2FjaGUgb2JqZWN0IG9mIGFueSBlbnRyaWVzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZUFsbDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBkYXRhID0ge307XHJcbiAgICAgICAgICBzaXplID0gMDtcclxuICAgICAgICAgIGxydUhhc2ggPSB7fTtcclxuICAgICAgICAgIGZyZXNoRW5kID0gc3RhbGVFbmQgPSBudWxsO1xyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNkZXN0cm95XHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIERlc3Ryb3lzIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0IGVudGlyZWx5LFxyXG4gICAgICAgICAqIHJlbW92aW5nIGl0IGZyb20gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5ICRjYWNoZUZhY3Rvcnl9IHNldC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGRhdGEgPSBudWxsO1xyXG4gICAgICAgICAgc3RhdHMgPSBudWxsO1xyXG4gICAgICAgICAgbHJ1SGFzaCA9IG51bGw7XHJcbiAgICAgICAgICBkZWxldGUgY2FjaGVzW2NhY2hlSWRdO1xyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNpbmZvXHJcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHJpZXZlIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBhIHBhcnRpY3VsYXIge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge29iamVjdH0gYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxyXG4gICAgICAgICAqICAgPHVsPlxyXG4gICAgICAgICAqICAgICA8bGk+KippZCoqOiB0aGUgaWQgb2YgdGhlIGNhY2hlIGluc3RhbmNlPC9saT5cclxuICAgICAgICAgKiAgICAgPGxpPioqc2l6ZSoqOiB0aGUgbnVtYmVyIG9mIGVudHJpZXMga2VwdCBpbiB0aGUgY2FjaGUgaW5zdGFuY2U8L2xpPlxyXG4gICAgICAgICAqICAgICA8bGk+KiouLi4qKjogYW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCB3aGVuIGNyZWF0aW5nIHRoZVxyXG4gICAgICAgICAqICAgICAgIGNhY2hlLjwvbGk+XHJcbiAgICAgICAgICogICA8L3VsPlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluZm86IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgc3RhdHMsIHtzaXplOiBzaXplfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBtYWtlcyB0aGUgYGVudHJ5YCB0aGUgZnJlc2hFbmQgb2YgdGhlIExSVSBsaW5rZWQgbGlzdFxyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gcmVmcmVzaChlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeSAhPSBmcmVzaEVuZCkge1xyXG4gICAgICAgICAgaWYgKCFzdGFsZUVuZCkge1xyXG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5O1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChzdGFsZUVuZCA9PSBlbnRyeSkge1xyXG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5Lm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGluayhlbnRyeS5uLCBlbnRyeS5wKTtcclxuICAgICAgICAgIGxpbmsoZW50cnksIGZyZXNoRW5kKTtcclxuICAgICAgICAgIGZyZXNoRW5kID0gZW50cnk7XHJcbiAgICAgICAgICBmcmVzaEVuZC5uID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogYmlkaXJlY3Rpb25hbGx5IGxpbmtzIHR3byBlbnRyaWVzIG9mIHRoZSBMUlUgbGlua2VkIGxpc3RcclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIGxpbmsobmV4dEVudHJ5LCBwcmV2RW50cnkpIHtcclxuICAgICAgICBpZiAobmV4dEVudHJ5ICE9IHByZXZFbnRyeSkge1xyXG4gICAgICAgICAgaWYgKG5leHRFbnRyeSkgbmV4dEVudHJ5LnAgPSBwcmV2RW50cnk7IC8vcCBzdGFuZHMgZm9yIHByZXZpb3VzLCAncHJldicgZGlkbid0IG1pbmlmeVxyXG4gICAgICAgICAgaWYgKHByZXZFbnRyeSkgcHJldkVudHJ5Lm4gPSBuZXh0RW50cnk7IC8vbiBzdGFuZHMgZm9yIG5leHQsICduZXh0JyBkaWRuJ3QgbWluaWZ5XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNpbmZvXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBHZXQgaW5mb3JtYXRpb24gYWJvdXQgYWxsIHRoZSBjYWNoZXMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZFxyXG4gICAqXHJcbiAgICogQHJldHVybnMge09iamVjdH0gLSBrZXktdmFsdWUgbWFwIG9mIGBjYWNoZUlkYCB0byB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgYGNhY2hlI2luZm9gXHJcbiAgICovXHJcbiAgICBjYWNoZUZhY3RvcnkuaW5mbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgaW5mbyA9IHt9O1xyXG4gICAgICBmb3JFYWNoKGNhY2hlcywgZnVuY3Rpb24oY2FjaGUsIGNhY2hlSWQpIHtcclxuICAgICAgICBpbmZvW2NhY2hlSWRdID0gY2FjaGUuaW5mbygpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGluZm87XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRjYWNoZUZhY3RvcnkjZ2V0XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBHZXQgYWNjZXNzIHRvIGEgY2FjaGUgb2JqZWN0IGJ5IHRoZSBgY2FjaGVJZGAgdXNlZCB3aGVuIGl0IHdhcyBjcmVhdGVkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlSWQgTmFtZSBvciBpZCBvZiBhIGNhY2hlIHRvIGFjY2Vzcy5cclxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBDYWNoZSBvYmplY3QgaWRlbnRpZmllZCBieSB0aGUgY2FjaGVJZCBvciB1bmRlZmluZWQgaWYgbm8gc3VjaCBjYWNoZS5cclxuICAgKi9cclxuICAgIGNhY2hlRmFjdG9yeS5nZXQgPSBmdW5jdGlvbihjYWNoZUlkKSB7XHJcbiAgICAgIHJldHVybiBjYWNoZXNbY2FjaGVJZF07XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4gY2FjaGVGYWN0b3J5O1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkdGVtcGxhdGVDYWNoZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGZpcnN0IHRpbWUgYSB0ZW1wbGF0ZSBpcyB1c2VkLCBpdCBpcyBsb2FkZWQgaW4gdGhlIHRlbXBsYXRlIGNhY2hlIGZvciBxdWljayByZXRyaWV2YWwuIFlvdVxyXG4gKiBjYW4gbG9hZCB0ZW1wbGF0ZXMgZGlyZWN0bHkgaW50byB0aGUgY2FjaGUgaW4gYSBgc2NyaXB0YCB0YWcsIG9yIGJ5IGNvbnN1bWluZyB0aGVcclxuICogYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBBZGRpbmcgdmlhIHRoZSBgc2NyaXB0YCB0YWc6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCJ0ZW1wbGF0ZUlkLmh0bWxcIj5cclxuICogICAgIDxwPlRoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlPC9wPlxyXG4gKiAgIDwvc2NyaXB0PlxyXG4gKiBgYGBcclxuICpcclxuICogKipOb3RlOioqIHRoZSBgc2NyaXB0YCB0YWcgY29udGFpbmluZyB0aGUgdGVtcGxhdGUgZG9lcyBub3QgbmVlZCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgYGhlYWRgIG9mXHJcbiAqIHRoZSBkb2N1bWVudCwgYnV0IGl0IG11c3QgYmUgYSBkZXNjZW5kZW50IG9mIHRoZSB7QGxpbmsgbmcuJHJvb3RFbGVtZW50ICRyb290RWxlbWVudH0gKElFLFxyXG4gKiBlbGVtZW50IHdpdGggbmctYXBwIGF0dHJpYnV0ZSksIG90aGVyd2lzZSB0aGUgdGVtcGxhdGUgd2lsbCBiZSBpZ25vcmVkLlxyXG4gKlxyXG4gKiBBZGRpbmcgdmlhIHRoZSAkdGVtcGxhdGVDYWNoZSBzZXJ2aWNlOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiB2YXIgbXlBcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSk7XHJcbiAqIG15QXBwLnJ1bihmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG4gKiAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgndGVtcGxhdGVJZC5odG1sJywgJ1RoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlJyk7XHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogVG8gcmV0cmlldmUgdGhlIHRlbXBsYXRlIGxhdGVyLCBzaW1wbHkgdXNlIGl0IGluIHlvdXIgSFRNTDpcclxuICogYGBgaHRtbFxyXG4gKiA8ZGl2IG5nLWluY2x1ZGU9XCIgJ3RlbXBsYXRlSWQuaHRtbCcgXCI+PC9kaXY+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBvciBnZXQgaXQgdmlhIEphdmFzY3JpcHQ6XHJcbiAqIGBgYGpzXHJcbiAqICR0ZW1wbGF0ZUNhY2hlLmdldCgndGVtcGxhdGVJZC5odG1sJylcclxuICogYGBgXHJcbiAqXHJcbiAqIFNlZSB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSAkY2FjaGVGYWN0b3J5fS5cclxuICpcclxuICovXHJcbmZ1bmN0aW9uICRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIoKSB7XHJcbiAgdGhpcy4kZ2V0ID0gWyckY2FjaGVGYWN0b3J5JywgZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSkge1xyXG4gICAgcmV0dXJuICRjYWNoZUZhY3RvcnkoJ3RlbXBsYXRlcycpO1xyXG4gIH1dO1xyXG59XHJcblxyXG4vKiAhIFZBUklBQkxFL0ZVTkNUSU9OIE5BTUlORyBDT05WRU5USU9OUyBUSEFUIEFQUExZIFRPIFRISVMgRklMRSFcclxuICpcclxuICogRE9NLXJlbGF0ZWQgdmFyaWFibGVzOlxyXG4gKlxyXG4gKiAtIFwibm9kZVwiIC0gRE9NIE5vZGVcclxuICogLSBcImVsZW1lbnRcIiAtIERPTSBFbGVtZW50IG9yIE5vZGVcclxuICogLSBcIiRub2RlXCIgb3IgXCIkZWxlbWVudFwiIC0ganFMaXRlLXdyYXBwZWQgbm9kZSBvciBlbGVtZW50XHJcbiAqXHJcbiAqXHJcbiAqIENvbXBpbGVyIHJlbGF0ZWQgc3R1ZmY6XHJcbiAqXHJcbiAqIC0gXCJsaW5rRm5cIiAtIGxpbmtpbmcgZm4gb2YgYSBzaW5nbGUgZGlyZWN0aXZlXHJcbiAqIC0gXCJub2RlTGlua0ZuXCIgLSBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBhIHBhcnRpY3VsYXIgbm9kZVxyXG4gKiAtIFwiY2hpbGRMaW5rRm5cIiAtICBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBjaGlsZCBub2RlcyBvZiBhIHBhcnRpY3VsYXIgbm9kZVxyXG4gKiAtIFwiY29tcG9zaXRlTGlua0ZuXCIgLSBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBhIGNvbXBpbGF0aW9uIHJvb3QgKG5vZGVMaXN0KVxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJGNvbXBpbGVcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIENvbXBpbGVzIGFuIEhUTUwgc3RyaW5nIG9yIERPTSBpbnRvIGEgdGVtcGxhdGUgYW5kIHByb2R1Y2VzIGEgdGVtcGxhdGUgZnVuY3Rpb24sIHdoaWNoXHJcbiAqIGNhbiB0aGVuIGJlIHVzZWQgdG8gbGluayB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBgc2NvcGVgfSBhbmQgdGhlIHRlbXBsYXRlIHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgY29tcGlsYXRpb24gaXMgYSBwcm9jZXNzIG9mIHdhbGtpbmcgdGhlIERPTSB0cmVlIGFuZCBtYXRjaGluZyBET00gZWxlbWVudHMgdG9cclxuICoge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlIGRpcmVjdGl2ZXN9LlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGU6KiogVGhpcyBkb2N1bWVudCBpcyBhbiBpbi1kZXB0aCByZWZlcmVuY2Ugb2YgYWxsIGRpcmVjdGl2ZSBvcHRpb25zLlxyXG4gKiBGb3IgYSBnZW50bGUgaW50cm9kdWN0aW9uIHRvIGRpcmVjdGl2ZXMgd2l0aCBleGFtcGxlcyBvZiBjb21tb24gdXNlIGNhc2VzLFxyXG4gKiBzZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUgZGlyZWN0aXZlIGd1aWRlfS5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqICMjIENvbXByZWhlbnNpdmUgRGlyZWN0aXZlIEFQSVxyXG4gKlxyXG4gKiBUaGVyZSBhcmUgbWFueSBkaWZmZXJlbnQgb3B0aW9ucyBmb3IgYSBkaXJlY3RpdmUuXHJcbiAqXHJcbiAqIFRoZSBkaWZmZXJlbmNlIHJlc2lkZXMgaW4gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmFjdG9yeSBmdW5jdGlvbi5cclxuICogWW91IGNhbiBlaXRoZXIgcmV0dXJuIGEgXCJEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3RcIiAoc2VlIGJlbG93KSB0aGF0IGRlZmluZXMgdGhlIGRpcmVjdGl2ZSBwcm9wZXJ0aWVzLFxyXG4gKiBvciBqdXN0IHRoZSBgcG9zdExpbmtgIGZ1bmN0aW9uIChhbGwgb3RoZXIgcHJvcGVydGllcyB3aWxsIGhhdmUgdGhlIGRlZmF1bHQgdmFsdWVzKS5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cclxuICogKipCZXN0IFByYWN0aWNlOioqIEl0J3MgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBcImRpcmVjdGl2ZSBkZWZpbml0aW9uIG9iamVjdFwiIGZvcm0uXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBIZXJlJ3MgYW4gZXhhbXBsZSBkaXJlY3RpdmUgZGVjbGFyZWQgd2l0aCBhIERpcmVjdGl2ZSBEZWZpbml0aW9uIE9iamVjdDpcclxuICpcclxuICogYGBganNcclxuICogICB2YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSguLi4pO1xyXG4gKlxyXG4gKiAgIG15TW9kdWxlLmRpcmVjdGl2ZSgnZGlyZWN0aXZlTmFtZScsIGZ1bmN0aW9uIGZhY3RvcnkoaW5qZWN0YWJsZXMpIHtcclxuICogICAgIHZhciBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0ID0ge1xyXG4gKiAgICAgICBwcmlvcml0eTogMCxcclxuICogICAgICAgdGVtcGxhdGU6ICc8ZGl2PjwvZGl2PicsIC8vIG9yIC8vIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHsgLi4uIH0sXHJcbiAqICAgICAgIC8vIG9yXHJcbiAqICAgICAgIC8vIHRlbXBsYXRlVXJsOiAnZGlyZWN0aXZlLmh0bWwnLCAvLyBvciAvLyBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7IC4uLiB9LFxyXG4gKiAgICAgICB0cmFuc2NsdWRlOiBmYWxzZSxcclxuICogICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICogICAgICAgdGVtcGxhdGVOYW1lc3BhY2U6ICdodG1sJyxcclxuICogICAgICAgc2NvcGU6IGZhbHNlLFxyXG4gKiAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICR0cmFuc2NsdWRlLCBvdGhlckluamVjdGFibGVzKSB7IC4uLiB9LFxyXG4gKiAgICAgICBjb250cm9sbGVyQXM6ICdzdHJpbmdBbGlhcycsXHJcbiAqICAgICAgIHJlcXVpcmU6ICdzaWJsaW5nRGlyZWN0aXZlTmFtZScsIC8vIG9yIC8vIFsnXnBhcmVudERpcmVjdGl2ZU5hbWUnLCAnP29wdGlvbmFsRGlyZWN0aXZlTmFtZScsICc/Xm9wdGlvbmFsUGFyZW50J10sXHJcbiAqICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIGNvbXBpbGUodEVsZW1lbnQsIHRBdHRycywgdHJhbnNjbHVkZSkge1xyXG4gKiAgICAgICAgIHJldHVybiB7XHJcbiAqICAgICAgICAgICBwcmU6IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH0sXHJcbiAqICAgICAgICAgICBwb3N0OiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfVxyXG4gKiAgICAgICAgIH1cclxuICogICAgICAgICAvLyBvclxyXG4gKiAgICAgICAgIC8vIHJldHVybiBmdW5jdGlvbiBwb3N0TGluayggLi4uICkgeyAuLi4gfVxyXG4gKiAgICAgICB9LFxyXG4gKiAgICAgICAvLyBvclxyXG4gKiAgICAgICAvLyBsaW5rOiB7XHJcbiAqICAgICAgIC8vICBwcmU6IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH0sXHJcbiAqICAgICAgIC8vICBwb3N0OiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfVxyXG4gKiAgICAgICAvLyB9XHJcbiAqICAgICAgIC8vIG9yXHJcbiAqICAgICAgIC8vIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XHJcbiAqICAgICB9O1xyXG4gKiAgICAgcmV0dXJuIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3Q7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGU6KiogQW55IHVuc3BlY2lmaWVkIG9wdGlvbnMgd2lsbCB1c2UgdGhlIGRlZmF1bHQgdmFsdWUuIFlvdSBjYW4gc2VlIHRoZSBkZWZhdWx0IHZhbHVlcyBiZWxvdy5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqIFRoZXJlZm9yZSB0aGUgYWJvdmUgY2FuIGJlIHNpbXBsaWZpZWQgYXM6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoLi4uKTtcclxuICpcclxuICogICBteU1vZHVsZS5kaXJlY3RpdmUoJ2RpcmVjdGl2ZU5hbWUnLCBmdW5jdGlvbiBmYWN0b3J5KGluamVjdGFibGVzKSB7XHJcbiAqICAgICB2YXIgZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdCA9IHtcclxuICogICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHsgLi4uIH1cclxuICogICAgIH07XHJcbiAqICAgICByZXR1cm4gZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdDtcclxuICogICAgIC8vIG9yXHJcbiAqICAgICAvLyByZXR1cm4gZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHsgLi4uIH1cclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqXHJcbiAqICMjIyBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3RcclxuICpcclxuICogVGhlIGRpcmVjdGl2ZSBkZWZpbml0aW9uIG9iamVjdCBwcm92aWRlcyBpbnN0cnVjdGlvbnMgdG8gdGhlIHtAbGluayBuZy4kY29tcGlsZVxyXG4gKiBjb21waWxlcn0uIFRoZSBhdHRyaWJ1dGVzIGFyZTpcclxuICpcclxuICogIyMjIyBgbXVsdGlFbGVtZW50YFxyXG4gKiBXaGVuIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIHRydWUsIHRoZSBIVE1MIGNvbXBpbGVyIHdpbGwgY29sbGVjdCBET00gbm9kZXMgYmV0d2VlblxyXG4gKiBub2RlcyB3aXRoIHRoZSBhdHRyaWJ1dGVzIGBkaXJlY3RpdmUtbmFtZS1zdGFydGAgYW5kIGBkaXJlY3RpdmUtbmFtZS1lbmRgLCBhbmQgZ3JvdXAgdGhlbVxyXG4gKiB0b2dldGhlciBhcyB0aGUgZGlyZWN0aXZlIGVsZW1lbnRzLiBJdCBpcyByZWNvbW1lbmRlZCB0aGF0IHRoaXMgZmVhdHVyZSBiZSB1c2VkIG9uIGRpcmVjdGl2ZXNcclxuICogd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBiZWhhdmlvdXJhbCAoc3VjaCBhcyB7QGxpbmsgbmdDbGlja30pLCBhbmQgd2hpY2hcclxuICogZG8gbm90IG1hbmlwdWxhdGUgb3IgcmVwbGFjZSBjaGlsZCBub2RlcyAoc3VjaCBhcyB7QGxpbmsgbmdJbmNsdWRlfSkuXHJcbiAqXHJcbiAqICMjIyMgYHByaW9yaXR5YFxyXG4gKiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBkaXJlY3RpdmVzIGRlZmluZWQgb24gYSBzaW5nbGUgRE9NIGVsZW1lbnQsIHNvbWV0aW1lcyBpdFxyXG4gKiBpcyBuZWNlc3NhcnkgdG8gc3BlY2lmeSB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIGRpcmVjdGl2ZXMgYXJlIGFwcGxpZWQuIFRoZSBgcHJpb3JpdHlgIGlzIHVzZWRcclxuICogdG8gc29ydCB0aGUgZGlyZWN0aXZlcyBiZWZvcmUgdGhlaXIgYGNvbXBpbGVgIGZ1bmN0aW9ucyBnZXQgY2FsbGVkLiBQcmlvcml0eSBpcyBkZWZpbmVkIGFzIGFcclxuICogbnVtYmVyLiBEaXJlY3RpdmVzIHdpdGggZ3JlYXRlciBudW1lcmljYWwgYHByaW9yaXR5YCBhcmUgY29tcGlsZWQgZmlyc3QuIFByZS1saW5rIGZ1bmN0aW9uc1xyXG4gKiBhcmUgYWxzbyBydW4gaW4gcHJpb3JpdHkgb3JkZXIsIGJ1dCBwb3N0LWxpbmsgZnVuY3Rpb25zIGFyZSBydW4gaW4gcmV2ZXJzZSBvcmRlci4gVGhlIG9yZGVyXHJcbiAqIG9mIGRpcmVjdGl2ZXMgd2l0aCB0aGUgc2FtZSBwcmlvcml0eSBpcyB1bmRlZmluZWQuIFRoZSBkZWZhdWx0IHByaW9yaXR5IGlzIGAwYC5cclxuICpcclxuICogIyMjIyBgdGVybWluYWxgXHJcbiAqIElmIHNldCB0byB0cnVlIHRoZW4gdGhlIGN1cnJlbnQgYHByaW9yaXR5YCB3aWxsIGJlIHRoZSBsYXN0IHNldCBvZiBkaXJlY3RpdmVzXHJcbiAqIHdoaWNoIHdpbGwgZXhlY3V0ZSAoYW55IGRpcmVjdGl2ZXMgYXQgdGhlIGN1cnJlbnQgcHJpb3JpdHkgd2lsbCBzdGlsbCBleGVjdXRlXHJcbiAqIGFzIHRoZSBvcmRlciBvZiBleGVjdXRpb24gb24gc2FtZSBgcHJpb3JpdHlgIGlzIHVuZGVmaW5lZCkuIE5vdGUgdGhhdCBleHByZXNzaW9uc1xyXG4gKiBhbmQgb3RoZXIgZGlyZWN0aXZlcyB1c2VkIGluIHRoZSBkaXJlY3RpdmUncyB0ZW1wbGF0ZSB3aWxsIGFsc28gYmUgZXhjbHVkZWQgZnJvbSBleGVjdXRpb24uXHJcbiAqXHJcbiAqICMjIyMgYHNjb3BlYFxyXG4gKiAqKklmIHNldCB0byBgdHJ1ZWAsKiogdGhlbiBhIG5ldyBzY29wZSB3aWxsIGJlIGNyZWF0ZWQgZm9yIHRoaXMgZGlyZWN0aXZlLiBJZiBtdWx0aXBsZSBkaXJlY3RpdmVzIG9uIHRoZVxyXG4gKiBzYW1lIGVsZW1lbnQgcmVxdWVzdCBhIG5ldyBzY29wZSwgb25seSBvbmUgbmV3IHNjb3BlIGlzIGNyZWF0ZWQuIFRoZSBuZXcgc2NvcGUgcnVsZSBkb2VzIG5vdFxyXG4gKiBhcHBseSBmb3IgdGhlIHJvb3Qgb2YgdGhlIHRlbXBsYXRlIHNpbmNlIHRoZSByb290IG9mIHRoZSB0ZW1wbGF0ZSBhbHdheXMgZ2V0cyBhIG5ldyBzY29wZS5cclxuICpcclxuICogKipJZiBzZXQgdG8gYHt9YCAob2JqZWN0IGhhc2gpLCoqIHRoZW4gYSBuZXcgXCJpc29sYXRlXCIgc2NvcGUgaXMgY3JlYXRlZC4gVGhlICdpc29sYXRlJyBzY29wZSBkaWZmZXJzIGZyb21cclxuICogbm9ybWFsIHNjb3BlIGluIHRoYXQgaXQgZG9lcyBub3QgcHJvdG90eXBpY2FsbHkgaW5oZXJpdCBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuIFRoaXMgaXMgdXNlZnVsXHJcbiAqIHdoZW4gY3JlYXRpbmcgcmV1c2FibGUgY29tcG9uZW50cywgd2hpY2ggc2hvdWxkIG5vdCBhY2NpZGVudGFsbHkgcmVhZCBvciBtb2RpZnkgZGF0YSBpbiB0aGVcclxuICogcGFyZW50IHNjb3BlLlxyXG4gKlxyXG4gKiBUaGUgJ2lzb2xhdGUnIHNjb3BlIHRha2VzIGFuIG9iamVjdCBoYXNoIHdoaWNoIGRlZmluZXMgYSBzZXQgb2YgbG9jYWwgc2NvcGUgcHJvcGVydGllc1xyXG4gKiBkZXJpdmVkIGZyb20gdGhlIHBhcmVudCBzY29wZS4gVGhlc2UgbG9jYWwgcHJvcGVydGllcyBhcmUgdXNlZnVsIGZvciBhbGlhc2luZyB2YWx1ZXMgZm9yXHJcbiAqIHRlbXBsYXRlcy4gTG9jYWxzIGRlZmluaXRpb24gaXMgYSBoYXNoIG9mIGxvY2FsIHNjb3BlIHByb3BlcnR5IHRvIGl0cyBzb3VyY2U6XHJcbiAqXHJcbiAqICogYEBgIG9yIGBAYXR0cmAgLSBiaW5kIGEgbG9jYWwgc2NvcGUgcHJvcGVydHkgdG8gdGhlIHZhbHVlIG9mIERPTSBhdHRyaWJ1dGUuIFRoZSByZXN1bHQgaXNcclxuICogICBhbHdheXMgYSBzdHJpbmcgc2luY2UgRE9NIGF0dHJpYnV0ZXMgYXJlIHN0cmluZ3MuIElmIG5vIGBhdHRyYCBuYW1lIGlzIHNwZWNpZmllZCAgdGhlbiB0aGVcclxuICogICBhdHRyaWJ1dGUgbmFtZSBpcyBhc3N1bWVkIHRvIGJlIHRoZSBzYW1lIGFzIHRoZSBsb2NhbCBuYW1lLlxyXG4gKiAgIEdpdmVuIGA8d2lkZ2V0IG15LWF0dHI9XCJoZWxsbyB7e25hbWV9fVwiPmAgYW5kIHdpZGdldCBkZWZpbml0aW9uXHJcbiAqICAgb2YgYHNjb3BlOiB7IGxvY2FsTmFtZTonQG15QXR0cicgfWAsIHRoZW4gd2lkZ2V0IHNjb3BlIHByb3BlcnR5IGBsb2NhbE5hbWVgIHdpbGwgcmVmbGVjdFxyXG4gKiAgIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgYGhlbGxvIHt7bmFtZX19YC4gQXMgdGhlIGBuYW1lYCBhdHRyaWJ1dGUgY2hhbmdlcyBzbyB3aWxsIHRoZVxyXG4gKiAgIGBsb2NhbE5hbWVgIHByb3BlcnR5IG9uIHRoZSB3aWRnZXQgc2NvcGUuIFRoZSBgbmFtZWAgaXMgcmVhZCBmcm9tIHRoZSBwYXJlbnQgc2NvcGUgKG5vdFxyXG4gKiAgIGNvbXBvbmVudCBzY29wZSkuXHJcbiAqXHJcbiAqICogYD1gIG9yIGA9YXR0cmAgLSBzZXQgdXAgYmktZGlyZWN0aW9uYWwgYmluZGluZyBiZXR3ZWVuIGEgbG9jYWwgc2NvcGUgcHJvcGVydHkgYW5kIHRoZVxyXG4gKiAgIHBhcmVudCBzY29wZSBwcm9wZXJ0eSBvZiBuYW1lIGRlZmluZWQgdmlhIHRoZSB2YWx1ZSBvZiB0aGUgYGF0dHJgIGF0dHJpYnV0ZS4gSWYgbm8gYGF0dHJgXHJcbiAqICAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZS5cclxuICogICBHaXZlbiBgPHdpZGdldCBteS1hdHRyPVwicGFyZW50TW9kZWxcIj5gIGFuZCB3aWRnZXQgZGVmaW5pdGlvbiBvZlxyXG4gKiAgIGBzY29wZTogeyBsb2NhbE1vZGVsOic9bXlBdHRyJyB9YCwgdGhlbiB3aWRnZXQgc2NvcGUgcHJvcGVydHkgYGxvY2FsTW9kZWxgIHdpbGwgcmVmbGVjdCB0aGVcclxuICogICB2YWx1ZSBvZiBgcGFyZW50TW9kZWxgIG9uIHRoZSBwYXJlbnQgc2NvcGUuIEFueSBjaGFuZ2VzIHRvIGBwYXJlbnRNb2RlbGAgd2lsbCBiZSByZWZsZWN0ZWRcclxuICogICBpbiBgbG9jYWxNb2RlbGAgYW5kIGFueSBjaGFuZ2VzIGluIGBsb2NhbE1vZGVsYCB3aWxsIHJlZmxlY3QgaW4gYHBhcmVudE1vZGVsYC4gSWYgdGhlIHBhcmVudFxyXG4gKiAgIHNjb3BlIHByb3BlcnR5IGRvZXNuJ3QgZXhpc3QsIGl0IHdpbGwgdGhyb3cgYSBOT05fQVNTSUdOQUJMRV9NT0RFTF9FWFBSRVNTSU9OIGV4Y2VwdGlvbi4gWW91XHJcbiAqICAgY2FuIGF2b2lkIHRoaXMgYmVoYXZpb3IgdXNpbmcgYD0/YCBvciBgPT9hdHRyYCBpbiBvcmRlciB0byBmbGFnIHRoZSBwcm9wZXJ0eSBhcyBvcHRpb25hbC4gSWZcclxuICogICB5b3Ugd2FudCB0byBzaGFsbG93IHdhdGNoIGZvciBjaGFuZ2VzIChpLmUuICR3YXRjaENvbGxlY3Rpb24gaW5zdGVhZCBvZiAkd2F0Y2gpIHlvdSBjYW4gdXNlXHJcbiAqICAgYD0qYCBvciBgPSphdHRyYCAoYD0qP2Agb3IgYD0qP2F0dHJgIGlmIHRoZSBwcm9wZXJ0eSBpcyBvcHRpb25hbCkuXHJcbiAqXHJcbiAqICogYCZgIG9yIGAmYXR0cmAgLSBwcm92aWRlcyBhIHdheSB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS5cclxuICogICBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGVcclxuICogICBsb2NhbCBuYW1lLiBHaXZlbiBgPHdpZGdldCBteS1hdHRyPVwiY291bnQgPSBjb3VudCArIHZhbHVlXCI+YCBhbmQgd2lkZ2V0IGRlZmluaXRpb24gb2ZcclxuICogICBgc2NvcGU6IHsgbG9jYWxGbjonJm15QXR0cicgfWAsIHRoZW4gaXNvbGF0ZSBzY29wZSBwcm9wZXJ0eSBgbG9jYWxGbmAgd2lsbCBwb2ludCB0b1xyXG4gKiAgIGEgZnVuY3Rpb24gd3JhcHBlciBmb3IgdGhlIGBjb3VudCA9IGNvdW50ICsgdmFsdWVgIGV4cHJlc3Npb24uIE9mdGVuIGl0J3MgZGVzaXJhYmxlIHRvXHJcbiAqICAgcGFzcyBkYXRhIGZyb20gdGhlIGlzb2xhdGVkIHNjb3BlIHZpYSBhbiBleHByZXNzaW9uIHRvIHRoZSBwYXJlbnQgc2NvcGUsIHRoaXMgY2FuIGJlXHJcbiAqICAgZG9uZSBieSBwYXNzaW5nIGEgbWFwIG9mIGxvY2FsIHZhcmlhYmxlIG5hbWVzIGFuZCB2YWx1ZXMgaW50byB0aGUgZXhwcmVzc2lvbiB3cmFwcGVyIGZuLlxyXG4gKiAgIEZvciBleGFtcGxlLCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBgaW5jcmVtZW50KGFtb3VudClgIHRoZW4gd2UgY2FuIHNwZWNpZnkgdGhlIGFtb3VudCB2YWx1ZVxyXG4gKiAgIGJ5IGNhbGxpbmcgdGhlIGBsb2NhbEZuYCBhcyBgbG9jYWxGbih7YW1vdW50OiAyMn0pYC5cclxuICpcclxuICpcclxuICogIyMjIyBgYmluZFRvQ29udHJvbGxlcmBcclxuICogV2hlbiBhbiBpc29sYXRlIHNjb3BlIGlzIHVzZWQgZm9yIGEgY29tcG9uZW50IChzZWUgYWJvdmUpLCBhbmQgYGNvbnRyb2xsZXJBc2AgaXMgdXNlZCwgYGJpbmRUb0NvbnRyb2xsZXI6IHRydWVgIHdpbGxcclxuICogYWxsb3cgYSBjb21wb25lbnQgdG8gaGF2ZSBpdHMgcHJvcGVydGllcyBib3VuZCB0byB0aGUgY29udHJvbGxlciwgcmF0aGVyIHRoYW4gdG8gc2NvcGUuIFdoZW4gdGhlIGNvbnRyb2xsZXJcclxuICogaXMgaW5zdGFudGlhdGVkLCB0aGUgaW5pdGlhbCB2YWx1ZXMgb2YgdGhlIGlzb2xhdGUgc2NvcGUgYmluZGluZ3MgYXJlIGFscmVhZHkgYXZhaWxhYmxlLlxyXG4gKlxyXG4gKiAjIyMjIGBjb250cm9sbGVyYFxyXG4gKiBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLiBUaGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYmVmb3JlIHRoZVxyXG4gKiBwcmUtbGlua2luZyBwaGFzZSBhbmQgaXQgaXMgc2hhcmVkIHdpdGggb3RoZXIgZGlyZWN0aXZlcyAoc2VlXHJcbiAqIGByZXF1aXJlYCBhdHRyaWJ1dGUpLiBUaGlzIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byBjb21tdW5pY2F0ZSB3aXRoIGVhY2ggb3RoZXIgYW5kIGF1Z21lbnRcclxuICogZWFjaCBvdGhlcidzIGJlaGF2aW9yLiBUaGUgY29udHJvbGxlciBpcyBpbmplY3RhYmxlIChhbmQgc3VwcG9ydHMgYnJhY2tldCBub3RhdGlvbikgd2l0aCB0aGUgZm9sbG93aW5nIGxvY2FsczpcclxuICpcclxuICogKiBgJHNjb3BlYCAtIEN1cnJlbnQgc2NvcGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50XHJcbiAqICogYCRlbGVtZW50YCAtIEN1cnJlbnQgZWxlbWVudFxyXG4gKiAqIGAkYXR0cnNgIC0gQ3VycmVudCBhdHRyaWJ1dGVzIG9iamVjdCBmb3IgdGhlIGVsZW1lbnRcclxuICogKiBgJHRyYW5zY2x1ZGVgIC0gQSB0cmFuc2NsdWRlIGxpbmtpbmcgZnVuY3Rpb24gcHJlLWJvdW5kIHRvIHRoZSBjb3JyZWN0IHRyYW5zY2x1c2lvbiBzY29wZTpcclxuICogICBgZnVuY3Rpb24oW3Njb3BlXSwgY2xvbmVMaW5raW5nRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQpYC5cclxuICogICAgKiBgc2NvcGVgOiBvcHRpb25hbCBhcmd1bWVudCB0byBvdmVycmlkZSB0aGUgc2NvcGUuXHJcbiAqICAgICogYGNsb25lTGlua2luZ0ZuYDogb3B0aW9uYWwgYXJndW1lbnQgdG8gY3JlYXRlIGNsb25lcyBvZiB0aGUgb3JpZ2luYWwgdHJhbnNjbHVkZWQgY29udGVudC5cclxuICogICAgKiBgZnV0dXJlUGFyZW50RWxlbWVudGA6XHJcbiAqICAgICAgICAqIGRlZmluZXMgdGhlIHBhcmVudCB0byB3aGljaCB0aGUgYGNsb25lTGlua2luZ0ZuYCB3aWxsIGFkZCB0aGUgY2xvbmVkIGVsZW1lbnRzLlxyXG4gKiAgICAgICAgKiBkZWZhdWx0OiBgJGVsZW1lbnQucGFyZW50KClgIHJlc3AuIGAkZWxlbWVudGAgZm9yIGB0cmFuc2NsdWRlOidlbGVtZW50J2AgcmVzcC4gYHRyYW5zY2x1ZGU6dHJ1ZWAuXHJcbiAqICAgICAgICAqIG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWwgZWxlbWVudHMgKGUuZy4gU1ZHIGVsZW1lbnRzKVxyXG4gKiAgICAgICAgICBhbmQgd2hlbiB0aGUgYGNsb25lTGlua2luRm5gIGlzIHBhc3NlZCxcclxuICogICAgICAgICAgYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBjcmVhdGVkIGFuZCBjbG9uZWQgaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpclxyXG4gKiAgICAgICAgICB1c3VhbCBjb250YWluZXJzIChlLmcuIGxpa2UgYDxzdmc+YCkuXHJcbiAqICAgICAgICAqIFNlZSBhbHNvIHRoZSBgZGlyZWN0aXZlLnRlbXBsYXRlTmFtZXNwYWNlYCBwcm9wZXJ0eS5cclxuICpcclxuICpcclxuICogIyMjIyBgcmVxdWlyZWBcclxuICogUmVxdWlyZSBhbm90aGVyIGRpcmVjdGl2ZSBhbmQgaW5qZWN0IGl0cyBjb250cm9sbGVyIGFzIHRoZSBmb3VydGggYXJndW1lbnQgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZVxyXG4gKiBgcmVxdWlyZWAgdGFrZXMgYSBzdHJpbmcgbmFtZSAob3IgYXJyYXkgb2Ygc3RyaW5ncykgb2YgdGhlIGRpcmVjdGl2ZShzKSB0byBwYXNzIGluLiBJZiBhbiBhcnJheSBpcyB1c2VkLCB0aGVcclxuICogaW5qZWN0ZWQgYXJndW1lbnQgd2lsbCBiZSBhbiBhcnJheSBpbiBjb3JyZXNwb25kaW5nIG9yZGVyLiBJZiBubyBzdWNoIGRpcmVjdGl2ZSBjYW4gYmVcclxuICogZm91bmQsIG9yIGlmIHRoZSBkaXJlY3RpdmUgZG9lcyBub3QgaGF2ZSBhIGNvbnRyb2xsZXIsIHRoZW4gYW4gZXJyb3IgaXMgcmFpc2VkLiBUaGUgbmFtZSBjYW4gYmUgcHJlZml4ZWQgd2l0aDpcclxuICpcclxuICogKiAobm8gcHJlZml4KSAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBvbiB0aGUgY3VycmVudCBlbGVtZW50LiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXHJcbiAqICogYD9gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgb3IgcGFzcyBgbnVsbGAgdG8gdGhlIGBsaW5rYCBmbiBpZiBub3QgZm91bmQuXHJcbiAqICogYF5gIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCBhbmQgaXRzIHBhcmVudHMuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cclxuICogKiBgXl5gIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCdzIHBhcmVudHMuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cclxuICogKiBgP15gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgYnkgc2VhcmNoaW5nIHRoZSBlbGVtZW50IGFuZCBpdHMgcGFyZW50cyBvciBwYXNzXHJcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxyXG4gKiAqIGA/Xl5gIC0gQXR0ZW1wdCB0byBsb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgYnkgc2VhcmNoaW5nIHRoZSBlbGVtZW50J3MgcGFyZW50cywgb3IgcGFzc1xyXG4gKiAgIGBudWxsYCB0byB0aGUgYGxpbmtgIGZuIGlmIG5vdCBmb3VuZC5cclxuICpcclxuICpcclxuICogIyMjIyBgY29udHJvbGxlckFzYFxyXG4gKiBDb250cm9sbGVyIGFsaWFzIGF0IHRoZSBkaXJlY3RpdmUgc2NvcGUuIEFuIGFsaWFzIGZvciB0aGUgY29udHJvbGxlciBzbyBpdFxyXG4gKiBjYW4gYmUgcmVmZXJlbmNlZCBhdCB0aGUgZGlyZWN0aXZlIHRlbXBsYXRlLiBUaGUgZGlyZWN0aXZlIG5lZWRzIHRvIGRlZmluZSBhIHNjb3BlIGZvciB0aGlzXHJcbiAqIGNvbmZpZ3VyYXRpb24gdG8gYmUgdXNlZC4gVXNlZnVsIGluIHRoZSBjYXNlIHdoZW4gZGlyZWN0aXZlIGlzIHVzZWQgYXMgY29tcG9uZW50LlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIGByZXN0cmljdGBcclxuICogU3RyaW5nIG9mIHN1YnNldCBvZiBgRUFDTWAgd2hpY2ggcmVzdHJpY3RzIHRoZSBkaXJlY3RpdmUgdG8gYSBzcGVjaWZpYyBkaXJlY3RpdmVcclxuICogZGVjbGFyYXRpb24gc3R5bGUuIElmIG9taXR0ZWQsIHRoZSBkZWZhdWx0cyAoZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXMpIGFyZSB1c2VkLlxyXG4gKlxyXG4gKiAqIGBFYCAtIEVsZW1lbnQgbmFtZSAoZGVmYXVsdCk6IGA8bXktZGlyZWN0aXZlPjwvbXktZGlyZWN0aXZlPmBcclxuICogKiBgQWAgLSBBdHRyaWJ1dGUgKGRlZmF1bHQpOiBgPGRpdiBteS1kaXJlY3RpdmU9XCJleHBcIj48L2Rpdj5gXHJcbiAqICogYENgIC0gQ2xhc3M6IGA8ZGl2IGNsYXNzPVwibXktZGlyZWN0aXZlOiBleHA7XCI+PC9kaXY+YFxyXG4gKiAqIGBNYCAtIENvbW1lbnQ6IGA8IS0tIGRpcmVjdGl2ZTogbXktZGlyZWN0aXZlIGV4cCAtLT5gXHJcbiAqXHJcbiAqXHJcbiAqICMjIyMgYHRlbXBsYXRlTmFtZXNwYWNlYFxyXG4gKiBTdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkb2N1bWVudCB0eXBlIHVzZWQgYnkgdGhlIG1hcmt1cCBpbiB0aGUgdGVtcGxhdGUuXHJcbiAqIEFuZ3VsYXJKUyBuZWVkcyB0aGlzIGluZm9ybWF0aW9uIGFzIHRob3NlIGVsZW1lbnRzIG5lZWQgdG8gYmUgY3JlYXRlZCBhbmQgY2xvbmVkXHJcbiAqIGluIGEgc3BlY2lhbCB3YXkgd2hlbiB0aGV5IGFyZSBkZWZpbmVkIG91dHNpZGUgdGhlaXIgdXN1YWwgY29udGFpbmVycyBsaWtlIGA8c3ZnPmAgYW5kIGA8bWF0aD5gLlxyXG4gKlxyXG4gKiAqIGBodG1sYCAtIEFsbCByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgSFRNTC4gUm9vdCBub2RlcyBtYXkgYWxzbyBiZVxyXG4gKiAgIHRvcC1sZXZlbCBlbGVtZW50cyBzdWNoIGFzIGA8c3ZnPmAgb3IgYDxtYXRoPmAuXHJcbiAqICogYHN2Z2AgLSBUaGUgcm9vdCBub2RlcyBpbiB0aGUgdGVtcGxhdGUgYXJlIFNWRyBlbGVtZW50cyAoZXhjbHVkaW5nIGA8bWF0aD5gKS5cclxuICogKiBgbWF0aGAgLSBUaGUgcm9vdCBub2RlcyBpbiB0aGUgdGVtcGxhdGUgYXJlIE1hdGhNTCBlbGVtZW50cyAoZXhjbHVkaW5nIGA8c3ZnPmApLlxyXG4gKlxyXG4gKiBJZiBubyBgdGVtcGxhdGVOYW1lc3BhY2VgIGlzIHNwZWNpZmllZCwgdGhlbiB0aGUgbmFtZXNwYWNlIGlzIGNvbnNpZGVyZWQgdG8gYmUgYGh0bWxgLlxyXG4gKlxyXG4gKiAjIyMjIGB0ZW1wbGF0ZWBcclxuICogSFRNTCBtYXJrdXAgdGhhdCBtYXk6XHJcbiAqICogUmVwbGFjZSB0aGUgY29udGVudHMgb2YgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgKGRlZmF1bHQpLlxyXG4gKiAqIFJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgaXRzZWxmIChpZiBgcmVwbGFjZWAgaXMgdHJ1ZSAtIERFUFJFQ0FURUQpLlxyXG4gKiAqIFdyYXAgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50IChpZiBgdHJhbnNjbHVkZWAgaXMgdHJ1ZSkuXHJcbiAqXHJcbiAqIFZhbHVlIG1heSBiZTpcclxuICpcclxuICogKiBBIHN0cmluZy4gRm9yIGV4YW1wbGUgYDxkaXYgcmVkLW9uLWhvdmVyPnt7ZGVsZXRlX3N0cn19PC9kaXY+YC5cclxuICogKiBBIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3byBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgXHJcbiAqICAgZnVuY3Rpb24gYXBpIGJlbG93KSBhbmQgcmV0dXJucyBhIHN0cmluZyB2YWx1ZS5cclxuICpcclxuICpcclxuICogIyMjIyBgdGVtcGxhdGVVcmxgXHJcbiAqIFRoaXMgaXMgc2ltaWxhciB0byBgdGVtcGxhdGVgIGJ1dCB0aGUgdGVtcGxhdGUgaXMgbG9hZGVkIGZyb20gdGhlIHNwZWNpZmllZCBVUkwsIGFzeW5jaHJvbm91c2x5LlxyXG4gKlxyXG4gKiBCZWNhdXNlIHRlbXBsYXRlIGxvYWRpbmcgaXMgYXN5bmNocm9ub3VzIHRoZSBjb21waWxlciB3aWxsIHN1c3BlbmQgY29tcGlsYXRpb24gb2YgZGlyZWN0aXZlcyBvbiB0aGF0IGVsZW1lbnRcclxuICogZm9yIGxhdGVyIHdoZW4gdGhlIHRlbXBsYXRlIGhhcyBiZWVuIHJlc29sdmVkLiAgSW4gdGhlIG1lYW50aW1lIGl0IHdpbGwgY29udGludWUgdG8gY29tcGlsZSBhbmQgbGlua1xyXG4gKiBzaWJsaW5nIGFuZCBwYXJlbnQgZWxlbWVudHMgYXMgdGhvdWdoIHRoaXMgZWxlbWVudCBoYWQgbm90IGNvbnRhaW5lZCBhbnkgZGlyZWN0aXZlcy5cclxuICpcclxuICogVGhlIGNvbXBpbGVyIGRvZXMgbm90IHN1c3BlbmQgdGhlIGVudGlyZSBjb21waWxhdGlvbiB0byB3YWl0IGZvciB0ZW1wbGF0ZXMgdG8gYmUgbG9hZGVkIGJlY2F1c2UgdGhpc1xyXG4gKiB3b3VsZCByZXN1bHQgaW4gdGhlIHdob2xlIGFwcCBcInN0YWxsaW5nXCIgdW50aWwgYWxsIHRlbXBsYXRlcyBhcmUgbG9hZGVkIGFzeW5jaHJvbm91c2x5IC0gZXZlbiBpbiB0aGVcclxuICogY2FzZSB3aGVuIG9ubHkgb25lIGRlZXBseSBuZXN0ZWQgZGlyZWN0aXZlIGhhcyBgdGVtcGxhdGVVcmxgLlxyXG4gKlxyXG4gKiBUZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyBldmVuIGlmIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBwcmVsb2FkZWQgaW50byB0aGUge0BsaW5rICR0ZW1wbGF0ZUNhY2hlfVxyXG4gKlxyXG4gKiBZb3UgY2FuIHNwZWNpZnkgYHRlbXBsYXRlVXJsYCBhcyBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIFVSTCBvciBhcyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3b1xyXG4gKiBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnNcclxuICogYSBzdHJpbmcgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSB1cmwuICBJbiBlaXRoZXIgY2FzZSwgdGhlIHRlbXBsYXRlIFVSTCBpcyBwYXNzZWQgdGhyb3VnaCB7QGxpbmtcclxuICogJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmwgJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9LlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIGByZXBsYWNlYCAoWypERVBSRUNBVEVEKiFdLCB3aWxsIGJlIHJlbW92ZWQgaW4gbmV4dCBtYWpvciByZWxlYXNlIC0gaS5lLiB2Mi4wKVxyXG4gKiBzcGVjaWZ5IHdoYXQgdGhlIHRlbXBsYXRlIHNob3VsZCByZXBsYWNlLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxyXG4gKlxyXG4gKiAqIGB0cnVlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuXHJcbiAqICogYGZhbHNlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50LlxyXG4gKlxyXG4gKiBUaGUgcmVwbGFjZW1lbnQgcHJvY2VzcyBtaWdyYXRlcyBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgLyBjbGFzc2VzIGZyb20gdGhlIG9sZCBlbGVtZW50IHRvIHRoZSBuZXdcclxuICogb25lLiBTZWUgdGhlIHtAbGluayBndWlkZS9kaXJlY3RpdmUjdGVtcGxhdGUtZXhwYW5kaW5nLWRpcmVjdGl2ZVxyXG4gKiBEaXJlY3RpdmVzIEd1aWRlfSBmb3IgYW4gZXhhbXBsZS5cclxuICpcclxuICogVGhlcmUgYXJlIHZlcnkgZmV3IHNjZW5hcmlvcyB3aGVyZSBlbGVtZW50IHJlcGxhY2VtZW50IGlzIHJlcXVpcmVkIGZvciB0aGUgYXBwbGljYXRpb24gZnVuY3Rpb24sXHJcbiAqIHRoZSBtYWluIG9uZSBiZWluZyByZXVzYWJsZSBjdXN0b20gY29tcG9uZW50cyB0aGF0IGFyZSB1c2VkIHdpdGhpbiBTVkcgY29udGV4dHNcclxuICogKGJlY2F1c2UgU1ZHIGRvZXNuJ3Qgd29yayB3aXRoIGN1c3RvbSBlbGVtZW50cyBpbiB0aGUgRE9NIHRyZWUpLlxyXG4gKlxyXG4gKiAjIyMjIGB0cmFuc2NsdWRlYFxyXG4gKiBFeHRyYWN0IHRoZSBjb250ZW50cyBvZiB0aGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGFwcGVhcnMgYW5kIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBkaXJlY3RpdmUuXHJcbiAqIFRoZSBjb250ZW50cyBhcmUgY29tcGlsZWQgYW5kIHByb3ZpZGVkIHRvIHRoZSBkaXJlY3RpdmUgYXMgYSAqKnRyYW5zY2x1c2lvbiBmdW5jdGlvbioqLiBTZWUgdGhlXHJcbiAqIHtAbGluayAkY29tcGlsZSN0cmFuc2NsdXNpb24gVHJhbnNjbHVzaW9ufSBzZWN0aW9uIGJlbG93LlxyXG4gKlxyXG4gKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIHRyYW5zY2x1c2lvbiBkZXBlbmRpbmcgdXBvbiB3aGV0aGVyIHlvdSB3YW50IHRvIHRyYW5zY2x1ZGUganVzdCB0aGUgY29udGVudHMgb2YgdGhlXHJcbiAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQgb3IgdGhlIGVudGlyZSBlbGVtZW50OlxyXG4gKlxyXG4gKiAqIGB0cnVlYCAtIHRyYW5zY2x1ZGUgdGhlIGNvbnRlbnQgKGkuZS4gdGhlIGNoaWxkIG5vZGVzKSBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cclxuICogKiBgJ2VsZW1lbnQnYCAtIHRyYW5zY2x1ZGUgdGhlIHdob2xlIG9mIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50IGluY2x1ZGluZyBhbnkgZGlyZWN0aXZlcyBvbiB0aGlzXHJcbiAqICAgZWxlbWVudCB0aGF0IGRlZmluZWQgYXQgYSBsb3dlciBwcmlvcml0eSB0aGFuIHRoaXMgZGlyZWN0aXZlLiBXaGVuIHVzZWQsIHRoZSBgdGVtcGxhdGVgXHJcbiAqICAgcHJvcGVydHkgaXMgaWdub3JlZC5cclxuICpcclxuICpcclxuICogIyMjIyBgY29tcGlsZWBcclxuICpcclxuICogYGBganNcclxuICogICBmdW5jdGlvbiBjb21waWxlKHRFbGVtZW50LCB0QXR0cnMsIHRyYW5zY2x1ZGUpIHsgLi4uIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoZSBjb21waWxlIGZ1bmN0aW9uIGRlYWxzIHdpdGggdHJhbnNmb3JtaW5nIHRoZSB0ZW1wbGF0ZSBET00uIFNpbmNlIG1vc3QgZGlyZWN0aXZlcyBkbyBub3QgZG9cclxuICogdGVtcGxhdGUgdHJhbnNmb3JtYXRpb24sIGl0IGlzIG5vdCB1c2VkIG9mdGVuLiBUaGUgY29tcGlsZSBmdW5jdGlvbiB0YWtlcyB0aGUgZm9sbG93aW5nIGFyZ3VtZW50czpcclxuICpcclxuICogICAqIGB0RWxlbWVudGAgLSB0ZW1wbGF0ZSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgd2hlcmUgdGhlIGRpcmVjdGl2ZSBoYXMgYmVlbiBkZWNsYXJlZC4gSXQgaXNcclxuICogICAgIHNhZmUgdG8gZG8gdGVtcGxhdGUgdHJhbnNmb3JtYXRpb24gb24gdGhlIGVsZW1lbnQgYW5kIGNoaWxkIGVsZW1lbnRzIG9ubHkuXHJcbiAqXHJcbiAqICAgKiBgdEF0dHJzYCAtIHRlbXBsYXRlIGF0dHJpYnV0ZXMgLSBOb3JtYWxpemVkIGxpc3Qgb2YgYXR0cmlidXRlcyBkZWNsYXJlZCBvbiB0aGlzIGVsZW1lbnQgc2hhcmVkXHJcbiAqICAgICBiZXR3ZWVuIGFsbCBkaXJlY3RpdmUgY29tcGlsZSBmdW5jdGlvbnMuXHJcbiAqXHJcbiAqICAgKiBgdHJhbnNjbHVkZWAgLSAgWypERVBSRUNBVEVEKiFdIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uOiBgZnVuY3Rpb24oc2NvcGUsIGNsb25lTGlua2luZ0ZuKWBcclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIFRoZSB0ZW1wbGF0ZSBpbnN0YW5jZSBhbmQgdGhlIGxpbmsgaW5zdGFuY2UgbWF5IGJlIGRpZmZlcmVudCBvYmplY3RzIGlmIHRoZSB0ZW1wbGF0ZSBoYXNcclxuICogYmVlbiBjbG9uZWQuIEZvciB0aGlzIHJlYXNvbiBpdCBpcyAqKm5vdCoqIHNhZmUgdG8gZG8gYW55dGhpbmcgb3RoZXIgdGhhbiBET00gdHJhbnNmb3JtYXRpb25zIHRoYXRcclxuICogYXBwbHkgdG8gYWxsIGNsb25lZCBET00gbm9kZXMgd2l0aGluIHRoZSBjb21waWxlIGZ1bmN0aW9uLiBTcGVjaWZpY2FsbHksIERPTSBsaXN0ZW5lciByZWdpc3RyYXRpb25cclxuICogc2hvdWxkIGJlIGRvbmUgaW4gYSBsaW5raW5nIGZ1bmN0aW9uIHJhdGhlciB0aGFuIGluIGEgY29tcGlsZSBmdW5jdGlvbi5cclxuICogPC9kaXY+XHJcblxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGU6KiogVGhlIGNvbXBpbGUgZnVuY3Rpb24gY2Fubm90IGhhbmRsZSBkaXJlY3RpdmVzIHRoYXQgcmVjdXJzaXZlbHkgdXNlIHRoZW1zZWx2ZXMgaW4gdGhlaXJcclxuICogb3duIHRlbXBsYXRlcyBvciBjb21waWxlIGZ1bmN0aW9ucy4gQ29tcGlsaW5nIHRoZXNlIGRpcmVjdGl2ZXMgcmVzdWx0cyBpbiBhbiBpbmZpbml0ZSBsb29wIGFuZCBhXHJcbiAqIHN0YWNrIG92ZXJmbG93IGVycm9ycy5cclxuICpcclxuICogVGhpcyBjYW4gYmUgYXZvaWRlZCBieSBtYW51YWxseSB1c2luZyAkY29tcGlsZSBpbiB0aGUgcG9zdExpbmsgZnVuY3Rpb24gdG8gaW1wZXJhdGl2ZWx5IGNvbXBpbGVcclxuICogYSBkaXJlY3RpdmUncyB0ZW1wbGF0ZSBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gYXV0b21hdGljIHRlbXBsYXRlIGNvbXBpbGF0aW9uIHZpYSBgdGVtcGxhdGVgIG9yXHJcbiAqIGB0ZW1wbGF0ZVVybGAgZGVjbGFyYXRpb24gb3IgbWFudWFsIGNvbXBpbGF0aW9uIGluc2lkZSB0aGUgY29tcGlsZSBmdW5jdGlvbi5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1lcnJvclwiPlxyXG4gKiAqKk5vdGU6KiogVGhlIGB0cmFuc2NsdWRlYCBmdW5jdGlvbiB0aGF0IGlzIHBhc3NlZCB0byB0aGUgY29tcGlsZSBmdW5jdGlvbiBpcyBkZXByZWNhdGVkLCBhcyBpdFxyXG4gKiAgIGUuZy4gZG9lcyBub3Qga25vdyBhYm91dCB0aGUgcmlnaHQgb3V0ZXIgc2NvcGUuIFBsZWFzZSB1c2UgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWRcclxuICogICB0byB0aGUgbGluayBmdW5jdGlvbiBpbnN0ZWFkLlxyXG4gKiA8L2Rpdj5cclxuXHJcbiAqIEEgY29tcGlsZSBmdW5jdGlvbiBjYW4gaGF2ZSBhIHJldHVybiB2YWx1ZSB3aGljaCBjYW4gYmUgZWl0aGVyIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0LlxyXG4gKlxyXG4gKiAqIHJldHVybmluZyBhIChwb3N0LWxpbmspIGZ1bmN0aW9uIC0gaXMgZXF1aXZhbGVudCB0byByZWdpc3RlcmluZyB0aGUgbGlua2luZyBmdW5jdGlvbiB2aWEgdGhlXHJcbiAqICAgYGxpbmtgIHByb3BlcnR5IG9mIHRoZSBjb25maWcgb2JqZWN0IHdoZW4gdGhlIGNvbXBpbGUgZnVuY3Rpb24gaXMgZW1wdHkuXHJcbiAqXHJcbiAqICogcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGZ1bmN0aW9uKHMpIHJlZ2lzdGVyZWQgdmlhIGBwcmVgIGFuZCBgcG9zdGAgcHJvcGVydGllcyAtIGFsbG93cyB5b3UgdG9cclxuICogICBjb250cm9sIHdoZW4gYSBsaW5raW5nIGZ1bmN0aW9uIHNob3VsZCBiZSBjYWxsZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLiBTZWUgaW5mbyBhYm91dFxyXG4gKiAgIHByZS1saW5raW5nIGFuZCBwb3N0LWxpbmtpbmcgZnVuY3Rpb25zIGJlbG93LlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIGBsaW5rYFxyXG4gKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgb25seSBpZiB0aGUgYGNvbXBpbGVgIHByb3BlcnR5IGlzIG5vdCBkZWZpbmVkLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIsIHRyYW5zY2x1ZGVGbikgeyAuLi4gfVxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGxpbmsgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHJlZ2lzdGVyaW5nIERPTSBsaXN0ZW5lcnMgYXMgd2VsbCBhcyB1cGRhdGluZyB0aGUgRE9NLiBJdCBpc1xyXG4gKiBleGVjdXRlZCBhZnRlciB0aGUgdGVtcGxhdGUgaGFzIGJlZW4gY2xvbmVkLiBUaGlzIGlzIHdoZXJlIG1vc3Qgb2YgdGhlIGRpcmVjdGl2ZSBsb2dpYyB3aWxsIGJlXHJcbiAqIHB1dC5cclxuICpcclxuICogICAqIGBzY29wZWAgLSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBTY29wZX0gLSBUaGUgc2NvcGUgdG8gYmUgdXNlZCBieSB0aGVcclxuICogICAgIGRpcmVjdGl2ZSBmb3IgcmVnaXN0ZXJpbmcge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNoZXN9LlxyXG4gKlxyXG4gKiAgICogYGlFbGVtZW50YCAtIGluc3RhbmNlIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGlzIHRvIGJlIHVzZWQuIEl0IGlzIHNhZmUgdG9cclxuICogICAgIG1hbmlwdWxhdGUgdGhlIGNoaWxkcmVuIG9mIHRoZSBlbGVtZW50IG9ubHkgaW4gYHBvc3RMaW5rYCBmdW5jdGlvbiBzaW5jZSB0aGUgY2hpbGRyZW4gaGF2ZVxyXG4gKiAgICAgYWxyZWFkeSBiZWVuIGxpbmtlZC5cclxuICpcclxuICogICAqIGBpQXR0cnNgIC0gaW5zdGFuY2UgYXR0cmlidXRlcyAtIE5vcm1hbGl6ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzIGRlY2xhcmVkIG9uIHRoaXMgZWxlbWVudCBzaGFyZWRcclxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBsaW5raW5nIGZ1bmN0aW9ucy5cclxuICpcclxuICogICAqIGBjb250cm9sbGVyYCAtIGEgY29udHJvbGxlciBpbnN0YW5jZSAtIEEgY29udHJvbGxlciBpbnN0YW5jZSBpZiBhdCBsZWFzdCBvbmUgZGlyZWN0aXZlIG9uIHRoZVxyXG4gKiAgICAgZWxlbWVudCBkZWZpbmVzIGEgY29udHJvbGxlci4gVGhlIGNvbnRyb2xsZXIgaXMgc2hhcmVkIGFtb25nIGFsbCB0aGUgZGlyZWN0aXZlcywgd2hpY2ggYWxsb3dzXHJcbiAqICAgICB0aGUgZGlyZWN0aXZlcyB0byB1c2UgdGhlIGNvbnRyb2xsZXJzIGFzIGEgY29tbXVuaWNhdGlvbiBjaGFubmVsLlxyXG4gKlxyXG4gKiAgICogYHRyYW5zY2x1ZGVGbmAgLSBBIHRyYW5zY2x1ZGUgbGlua2luZyBmdW5jdGlvbiBwcmUtYm91bmQgdG8gdGhlIGNvcnJlY3QgdHJhbnNjbHVzaW9uIHNjb3BlLlxyXG4gKiAgICAgVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYCR0cmFuc2NsdWRlYFxyXG4gKiAgICAgcGFyYW1ldGVyIG9mIGRpcmVjdGl2ZSBjb250cm9sbGVycywgc2VlIHRoZXJlIGZvciBkZXRhaWxzLlxyXG4gKiAgICAgYGZ1bmN0aW9uKFtzY29wZV0sIGNsb25lTGlua2luZ0ZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KWAuXHJcbiAqXHJcbiAqICMjIyMgUHJlLWxpbmtpbmcgZnVuY3Rpb25cclxuICpcclxuICogRXhlY3V0ZWQgYmVmb3JlIHRoZSBjaGlsZCBlbGVtZW50cyBhcmUgbGlua2VkLiBOb3Qgc2FmZSB0byBkbyBET00gdHJhbnNmb3JtYXRpb24gc2luY2UgdGhlXHJcbiAqIGNvbXBpbGVyIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBmYWlsIHRvIGxvY2F0ZSB0aGUgY29ycmVjdCBlbGVtZW50cyBmb3IgbGlua2luZy5cclxuICpcclxuICogIyMjIyBQb3N0LWxpbmtpbmcgZnVuY3Rpb25cclxuICpcclxuICogRXhlY3V0ZWQgYWZ0ZXIgdGhlIGNoaWxkIGVsZW1lbnRzIGFyZSBsaW5rZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCBjaGlsZCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gYHRlbXBsYXRlVXJsYCBkaXJlY3RpdmVzIHdpbGwgbm90IGhhdmUgYmVlbiBjb21waWxlZFxyXG4gKiBhbmQgbGlua2VkIHNpbmNlIHRoZXkgYXJlIHdhaXRpbmcgZm9yIHRoZWlyIHRlbXBsYXRlIHRvIGxvYWQgYXN5bmNocm9ub3VzbHkgYW5kIHRoZWlyIG93blxyXG4gKiBjb21waWxhdGlvbiBhbmQgbGlua2luZyBoYXMgYmVlbiBzdXNwZW5kZWQgdW50aWwgdGhhdCBvY2N1cnMuXHJcbiAqXHJcbiAqIEl0IGlzIHNhZmUgdG8gZG8gRE9NIHRyYW5zZm9ybWF0aW9uIGluIHRoZSBwb3N0LWxpbmtpbmcgZnVuY3Rpb24gb24gZWxlbWVudHMgdGhhdCBhcmUgbm90IHdhaXRpbmdcclxuICogZm9yIHRoZWlyIGFzeW5jIHRlbXBsYXRlcyB0byBiZSByZXNvbHZlZC5cclxuICpcclxuICpcclxuICogIyMjIFRyYW5zY2x1c2lvblxyXG4gKlxyXG4gKiBUcmFuc2NsdXNpb24gaXMgdGhlIHByb2Nlc3Mgb2YgZXh0cmFjdGluZyBhIGNvbGxlY3Rpb24gb2YgRE9NIGVsZW1lbnQgZnJvbSBvbmUgcGFydCBvZiB0aGUgRE9NIGFuZFxyXG4gKiBjb3B5aW5nIHRoZW0gdG8gYW5vdGhlciBwYXJ0IG9mIHRoZSBET00sIHdoaWxlIG1haW50YWluaW5nIHRoZWlyIGNvbm5lY3Rpb24gdG8gdGhlIG9yaWdpbmFsIEFuZ3VsYXJKU1xyXG4gKiBzY29wZSBmcm9tIHdoZXJlIHRoZXkgd2VyZSB0YWtlbi5cclxuICpcclxuICogVHJhbnNjbHVzaW9uIGlzIHVzZWQgKG9mdGVuIHdpdGgge0BsaW5rIG5nVHJhbnNjbHVkZX0pIHRvIGluc2VydCB0aGVcclxuICogb3JpZ2luYWwgY29udGVudHMgb2YgYSBkaXJlY3RpdmUncyBlbGVtZW50IGludG8gYSBzcGVjaWZpZWQgcGxhY2UgaW4gdGhlIHRlbXBsYXRlIG9mIHRoZSBkaXJlY3RpdmUuXHJcbiAqIFRoZSBiZW5lZml0IG9mIHRyYW5zY2x1c2lvbiwgb3ZlciBzaW1wbHkgbW92aW5nIHRoZSBET00gZWxlbWVudHMgbWFudWFsbHksIGlzIHRoYXQgdGhlIHRyYW5zY2x1ZGVkXHJcbiAqIGNvbnRlbnQgaGFzIGFjY2VzcyB0byB0aGUgcHJvcGVydGllcyBvbiB0aGUgc2NvcGUgZnJvbSB3aGljaCBpdCB3YXMgdGFrZW4sIGV2ZW4gaWYgdGhlIGRpcmVjdGl2ZVxyXG4gKiBoYXMgaXNvbGF0ZWQgc2NvcGUuXHJcbiAqIFNlZSB0aGUge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSNjcmVhdGluZy1hLWRpcmVjdGl2ZS10aGF0LXdyYXBzLW90aGVyLWVsZW1lbnRzIERpcmVjdGl2ZXMgR3VpZGV9LlxyXG4gKlxyXG4gKiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciB0aGUgd2lkZ2V0IHRvIGhhdmUgcHJpdmF0ZSBzdGF0ZSBmb3IgaXRzIHRlbXBsYXRlLCB3aGlsZSB0aGUgdHJhbnNjbHVkZWRcclxuICogY29udGVudCBoYXMgYWNjZXNzIHRvIGl0cyBvcmlnaW5hdGluZyBzY29wZS5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIFdoZW4gdGVzdGluZyBhbiBlbGVtZW50IHRyYW5zY2x1ZGUgZGlyZWN0aXZlIHlvdSBtdXN0IG5vdCBwbGFjZSB0aGUgZGlyZWN0aXZlIGF0IHRoZSByb290IG9mIHRoZVxyXG4gKiBET00gZnJhZ21lbnQgdGhhdCBpcyBiZWluZyBjb21waWxlZC4gU2VlIHtAbGluayBndWlkZS91bml0LXRlc3RpbmcjdGVzdGluZy10cmFuc2NsdXNpb24tZGlyZWN0aXZlc1xyXG4gKiBUZXN0aW5nIFRyYW5zY2x1c2lvbiBEaXJlY3RpdmVzfS5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqICMjIyMgVHJhbnNjbHVzaW9uIEZ1bmN0aW9uc1xyXG4gKlxyXG4gKiBXaGVuIGEgZGlyZWN0aXZlIHJlcXVlc3RzIHRyYW5zY2x1c2lvbiwgdGhlIGNvbXBpbGVyIGV4dHJhY3RzIGl0cyBjb250ZW50cyBhbmQgcHJvdmlkZXMgYSAqKnRyYW5zY2x1c2lvblxyXG4gKiBmdW5jdGlvbioqIHRvIHRoZSBkaXJlY3RpdmUncyBgbGlua2AgZnVuY3Rpb24gYW5kIGBjb250cm9sbGVyYC4gVGhpcyB0cmFuc2NsdXNpb24gZnVuY3Rpb24gaXMgYSBzcGVjaWFsXHJcbiAqICoqbGlua2luZyBmdW5jdGlvbioqIHRoYXQgd2lsbCByZXR1cm4gdGhlIGNvbXBpbGVkIGNvbnRlbnRzIGxpbmtlZCB0byBhIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XHJcbiAqIElmIHlvdSBhcmUganVzdCB1c2luZyB7QGxpbmsgbmdUcmFuc2NsdWRlfSB0aGVuIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgZnVuY3Rpb24sIHNpbmNlXHJcbiAqIG5nVHJhbnNjbHVkZSB3aWxsIGRlYWwgd2l0aCBpdCBmb3IgdXMuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBJZiB5b3Ugd2FudCB0byBtYW51YWxseSBjb250cm9sIHRoZSBpbnNlcnRpb24gYW5kIHJlbW92YWwgb2YgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaW4geW91ciBkaXJlY3RpdmVcclxuICogdGhlbiB5b3UgbXVzdCB1c2UgdGhpcyB0cmFuc2NsdWRlIGZ1bmN0aW9uLiBXaGVuIHlvdSBjYWxsIGEgdHJhbnNjbHVkZSBmdW5jdGlvbiBpdCByZXR1cm5zIGEgYSBqcUxpdGUvSlF1ZXJ5XHJcbiAqIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBjb21waWxlZCBET00sIHdoaWNoIGlzIGxpbmtlZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXHJcbiAqXHJcbiAqIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdXNpb24gZnVuY3Rpb24geW91IGNhbiBwYXNzIGluIGEgKipjbG9uZSBhdHRhY2ggZnVuY3Rpb24qKi4gVGhpcyBmdW5jdGlvbiBhY2NlcHRzXHJcbiAqIHR3byBwYXJhbWV0ZXJzLCBgZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7IC4uLiB9YCwgd2hlcmUgdGhlIGBjbG9uZWAgaXMgYSBmcmVzaCBjb21waWxlZCBjb3B5IG9mIHlvdXIgdHJhbnNjbHVkZWRcclxuICogY29udGVudCBhbmQgdGhlIGBzY29wZWAgaXMgdGhlIG5ld2x5IGNyZWF0ZWQgdHJhbnNjbHVzaW9uIHNjb3BlLCB0byB3aGljaCB0aGUgY2xvbmUgaXMgYm91bmQuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XHJcbiAqICoqQmVzdCBQcmFjdGljZSoqOiBBbHdheXMgcHJvdmlkZSBhIGBjbG9uZUZuYCAoY2xvbmUgYXR0YWNoIGZ1bmN0aW9uKSB3aGVuIHlvdSBjYWxsIGEgdHJhbnNsdWRlIGZ1bmN0aW9uXHJcbiAqIHNpbmNlIHlvdSB0aGVuIGdldCBhIGZyZXNoIGNsb25lIG9mIHRoZSBvcmlnaW5hbCBET00gYW5kIGFsc28gaGF2ZSBhY2Nlc3MgdG8gdGhlIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBJdCBpcyBub3JtYWwgcHJhY3RpY2UgdG8gYXR0YWNoIHlvdXIgdHJhbnNjbHVkZWQgY29udGVudCAoYGNsb25lYCkgdG8gdGhlIERPTSBpbnNpZGUgeW91ciAqKmNsb25lXHJcbiAqIGF0dGFjaCBmdW5jdGlvbioqOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiB2YXIgdHJhbnNjbHVkZWRDb250ZW50LCB0cmFuc2NsdXNpb25TY29wZTtcclxuICpcclxuICogJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7XHJcbiAqICAgZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xyXG4gKiAgIHRyYW5zY2x1ZGVkQ29udGVudCA9IGNsb25lO1xyXG4gKiAgIHRyYW5zY2x1c2lvblNjb3BlID0gc2NvcGU7XHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogTGF0ZXIsIGlmIHlvdSB3YW50IHRvIHJlbW92ZSB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBmcm9tIHlvdXIgRE9NIHRoZW4geW91IHNob3VsZCBhbHNvIGRlc3Ryb3kgdGhlXHJcbiAqIGFzc29jaWF0ZWQgdHJhbnNjbHVzaW9uIHNjb3BlOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiB0cmFuc2NsdWRlZENvbnRlbnQucmVtb3ZlKCk7XHJcbiAqIHRyYW5zY2x1c2lvblNjb3BlLiRkZXN0cm95KCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxyXG4gKiAqKkJlc3QgUHJhY3RpY2UqKjogaWYgeW91IGludGVuZCB0byBhZGQgYW5kIHJlbW92ZSB0cmFuc2NsdWRlZCBjb250ZW50IG1hbnVhbGx5IGluIHlvdXIgZGlyZWN0aXZlXHJcbiAqIChieSBjYWxsaW5nIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIHRvIGdldCB0aGUgRE9NIGFuZCBhbmQgY2FsbGluZyBgZWxlbWVudC5yZW1vdmUoKWAgdG8gcmVtb3ZlIGl0KSxcclxuICogdGhlbiB5b3UgYXJlIGFsc28gcmVzcG9uc2libGUgZm9yIGNhbGxpbmcgYCRkZXN0cm95YCBvbiB0aGUgdHJhbnNjbHVzaW9uIHNjb3BlLlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogVGhlIGJ1aWx0LWluIERPTSBtYW5pcHVsYXRpb24gZGlyZWN0aXZlcywgc3VjaCBhcyB7QGxpbmsgbmdJZn0sIHtAbGluayBuZ1N3aXRjaH0gYW5kIHtAbGluayBuZ1JlcGVhdH1cclxuICogYXV0b21hdGljYWxseSBkZXN0cm95IHRoZWlyIHRyYW5zbHVkZWQgY2xvbmVzIGFzIG5lY2Vzc2FyeSBzbyB5b3UgZG8gbm90IG5lZWQgdG8gd29ycnkgYWJvdXQgdGhpcyBpZlxyXG4gKiB5b3UgYXJlIHNpbXBseSB1c2luZyB7QGxpbmsgbmdUcmFuc2NsdWRlfSB0byBpbmplY3QgdGhlIHRyYW5zY2x1c2lvbiBpbnRvIHlvdXIgZGlyZWN0aXZlLlxyXG4gKlxyXG4gKlxyXG4gKiAjIyMjIFRyYW5zY2x1c2lvbiBTY29wZXNcclxuICpcclxuICogV2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1ZGUgZnVuY3Rpb24gaXQgcmV0dXJucyBhIERPTSBmcmFnbWVudCB0aGF0IGlzIHByZS1ib3VuZCB0byBhICoqdHJhbnNjbHVzaW9uXHJcbiAqIHNjb3BlKiouIFRoaXMgc2NvcGUgaXMgc3BlY2lhbCwgaW4gdGhhdCBpdCBpcyBhIGNoaWxkIG9mIHRoZSBkaXJlY3RpdmUncyBzY29wZSAoYW5kIHNvIGdldHMgZGVzdHJveWVkXHJcbiAqIHdoZW4gdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIGdldHMgZGVzdHJveWVkKSBidXQgaXQgaW5oZXJpdHMgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHNjb3BlIGZyb20gd2hpY2ggaXRcclxuICogd2FzIHRha2VuLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSBjb25zaWRlciBhIGRpcmVjdGl2ZSB0aGF0IHVzZXMgdHJhbnNjbHVzaW9uIGFuZCBpc29sYXRlZCBzY29wZS4gVGhlIERPTSBoaWVyYXJjaHkgbWlnaHQgbG9va1xyXG4gKiBsaWtlIHRoaXM6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPGRpdiBuZy1hcHA+XHJcbiAqICAgPGRpdiBpc29sYXRlPlxyXG4gKiAgICAgPGRpdiB0cmFuc2NsdXNpb24+XHJcbiAqICAgICA8L2Rpdj5cclxuICogICA8L2Rpdj5cclxuICogPC9kaXY+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgYCRwYXJlbnRgIHNjb3BlIGhpZXJhcmNoeSB3aWxsIGxvb2sgbGlrZSB0aGlzOlxyXG4gKlxyXG4gKiBgYGBcclxuICogLSAkcm9vdFNjb3BlXHJcbiAqICAgLSBpc29sYXRlXHJcbiAqICAgICAtIHRyYW5zY2x1c2lvblxyXG4gKiBgYGBcclxuICpcclxuICogYnV0IHRoZSBzY29wZXMgd2lsbCBpbmhlcml0IHByb3RvdHlwaWNhbGx5IGZyb20gZGlmZmVyZW50IHNjb3BlcyB0byB0aGVpciBgJHBhcmVudGAuXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiAtICRyb290U2NvcGVcclxuICogICAtIHRyYW5zY2x1c2lvblxyXG4gKiAtIGlzb2xhdGVcclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqICMjIyBBdHRyaWJ1dGVzXHJcbiAqXHJcbiAqIFRoZSB7QGxpbmsgbmcuJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMgQXR0cmlidXRlc30gb2JqZWN0IC0gcGFzc2VkIGFzIGEgcGFyYW1ldGVyIGluIHRoZVxyXG4gKiBgbGluaygpYCBvciBgY29tcGlsZSgpYCBmdW5jdGlvbnMuIEl0IGhhcyBhIHZhcmlldHkgb2YgdXNlcy5cclxuICpcclxuICogYWNjZXNzaW5nICpOb3JtYWxpemVkIGF0dHJpYnV0ZSBuYW1lczoqXHJcbiAqIERpcmVjdGl2ZXMgbGlrZSAnbmdCaW5kJyBjYW4gYmUgZXhwcmVzc2VkIGluIG1hbnkgd2F5czogJ25nOmJpbmQnLCBgZGF0YS1uZy1iaW5kYCwgb3IgJ3gtbmctYmluZCcuXHJcbiAqIHRoZSBhdHRyaWJ1dGVzIG9iamVjdCBhbGxvd3MgZm9yIG5vcm1hbGl6ZWQgYWNjZXNzIHRvXHJcbiAqICAgdGhlIGF0dHJpYnV0ZXMuXHJcbiAqXHJcbiAqICogKkRpcmVjdGl2ZSBpbnRlci1jb21tdW5pY2F0aW9uOiogQWxsIGRpcmVjdGl2ZXMgc2hhcmUgdGhlIHNhbWUgaW5zdGFuY2Ugb2YgdGhlIGF0dHJpYnV0ZXNcclxuICogICBvYmplY3Qgd2hpY2ggYWxsb3dzIHRoZSBkaXJlY3RpdmVzIHRvIHVzZSB0aGUgYXR0cmlidXRlcyBvYmplY3QgYXMgaW50ZXIgZGlyZWN0aXZlXHJcbiAqICAgY29tbXVuaWNhdGlvbi5cclxuICpcclxuICogKiAqU3VwcG9ydHMgaW50ZXJwb2xhdGlvbjoqIEludGVycG9sYXRpb24gYXR0cmlidXRlcyBhcmUgYXNzaWduZWQgdG8gdGhlIGF0dHJpYnV0ZSBvYmplY3RcclxuICogICBhbGxvd2luZyBvdGhlciBkaXJlY3RpdmVzIHRvIHJlYWQgdGhlIGludGVycG9sYXRlZCB2YWx1ZS5cclxuICpcclxuICogKiAqT2JzZXJ2aW5nIGludGVycG9sYXRlZCBhdHRyaWJ1dGVzOiogVXNlIGAkb2JzZXJ2ZWAgdG8gb2JzZXJ2ZSB0aGUgdmFsdWUgY2hhbmdlcyBvZiBhdHRyaWJ1dGVzXHJcbiAqICAgdGhhdCBjb250YWluIGludGVycG9sYXRpb24gKGUuZy4gYHNyYz1cInt7YmFyfX1cImApLiBOb3Qgb25seSBpcyB0aGlzIHZlcnkgZWZmaWNpZW50IGJ1dCBpdCdzIGFsc29cclxuICogICB0aGUgb25seSB3YXkgdG8gZWFzaWx5IGdldCB0aGUgYWN0dWFsIHZhbHVlIGJlY2F1c2UgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlIHRoZSBpbnRlcnBvbGF0aW9uXHJcbiAqICAgaGFzbid0IGJlZW4gZXZhbHVhdGVkIHlldCBhbmQgc28gdGhlIHZhbHVlIGlzIGF0IHRoaXMgdGltZSBzZXQgdG8gYHVuZGVmaW5lZGAuXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIGZ1bmN0aW9uIGxpbmtpbmdGbihzY29wZSwgZWxtLCBhdHRycywgY3RybCkge1xyXG4gKiAgIC8vIGdldCB0aGUgYXR0cmlidXRlIHZhbHVlXHJcbiAqICAgY29uc29sZS5sb2coYXR0cnMubmdNb2RlbCk7XHJcbiAqXHJcbiAqICAgLy8gY2hhbmdlIHRoZSBhdHRyaWJ1dGVcclxuICogICBhdHRycy4kc2V0KCduZ01vZGVsJywgJ25ldyB2YWx1ZScpO1xyXG4gKlxyXG4gKiAgIC8vIG9ic2VydmUgY2hhbmdlcyB0byBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlXHJcbiAqICAgYXR0cnMuJG9ic2VydmUoJ25nTW9kZWwnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gKiAgICAgY29uc29sZS5sb2coJ25nTW9kZWwgaGFzIGNoYW5nZWQgdmFsdWUgdG8gJyArIHZhbHVlKTtcclxuICogICB9KTtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogIyMgRXhhbXBsZVxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGUqKjogVHlwaWNhbGx5IGRpcmVjdGl2ZXMgYXJlIHJlZ2lzdGVyZWQgd2l0aCBgbW9kdWxlLmRpcmVjdGl2ZWAuIFRoZSBleGFtcGxlIGJlbG93IGlzXHJcbiAqIHRvIGlsbHVzdHJhdGUgaG93IGAkY29tcGlsZWAgd29ya3MuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gPGV4YW1wbGUgbW9kdWxlPVwiY29tcGlsZUV4YW1wbGVcIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgIDxzY3JpcHQ+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdjb21waWxlRXhhbXBsZScsIFtdLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgLy8gY29uZmlndXJlIG5ldyAnY29tcGlsZScgZGlyZWN0aXZlIGJ5IHBhc3NpbmcgYSBkaXJlY3RpdmVcclxuICAgICAgICAvLyBmYWN0b3J5IGZ1bmN0aW9uLiBUaGUgZmFjdG9yeSBmdW5jdGlvbiBpbmplY3RzIHRoZSAnJGNvbXBpbGUnXHJcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoJ2NvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xyXG4gICAgICAgICAgLy8gZGlyZWN0aXZlIGZhY3RvcnkgY3JlYXRlcyBhIGxpbmsgZnVuY3Rpb25cclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgLy8gd2F0Y2ggdGhlICdjb21waWxlJyBleHByZXNzaW9uIGZvciBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGV2YWwoYXR0cnMuY29tcGlsZSk7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzaWduIGl0IGludG8gdGhlIGN1cnJlbnQgRE9NXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwodmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIG5ldyBET00gYW5kIGxpbmsgaXQgdG8gdGhlIGN1cnJlbnRcclxuICAgICAgICAgICAgICAgIC8vIHNjb3BlLlxyXG4gICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugb25seSBjb21waWxlIC5jaGlsZE5vZGVzIHNvIHRoYXRcclxuICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IGdldCBpbnRvIGluZmluaXRlIGxvb3AgY29tcGlsaW5nIG91cnNlbHZlc1xyXG4gICAgICAgICAgICAgICAgJGNvbXBpbGUoZWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNvbnRyb2xsZXIoJ0dyZWV0ZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUubmFtZSA9ICdBbmd1bGFyJztcclxuICAgICAgICAkc2NvcGUuaHRtbCA9ICdIZWxsbyB7e25hbWV9fSc7XHJcbiAgICAgIH1dKTtcclxuICAgIDwvc2NyaXB0PlxyXG4gICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR3JlZXRlckNvbnRyb2xsZXJcIj5cclxuICAgICAgPGlucHV0IG5nLW1vZGVsPVwibmFtZVwiPiA8YnI+XHJcbiAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImh0bWxcIj48L3RleHRhcmVhPiA8YnI+XHJcbiAgICAgIDxkaXYgY29tcGlsZT1cImh0bWxcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICBpdCgnc2hvdWxkIGF1dG8gY29tcGlsZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgdmFyIHRleHRhcmVhID0gJCgndGV4dGFyZWEnKTtcclxuICAgICAgIHZhciBvdXRwdXQgPSAkKCdkaXZbY29tcGlsZV0nKTtcclxuICAgICAgIC8vIFRoZSBpbml0aWFsIHN0YXRlIHJlYWRzICdIZWxsbyBBbmd1bGFyJy5cclxuICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBBbmd1bGFyJyk7XHJcbiAgICAgICB0ZXh0YXJlYS5jbGVhcigpO1xyXG4gICAgICAgdGV4dGFyZWEuc2VuZEtleXMoJ3t7bmFtZX19IScpO1xyXG4gICAgICAgZXhwZWN0KG91dHB1dC5nZXRUZXh0KCkpLnRvQmUoJ0FuZ3VsYXIhJyk7XHJcbiAgICAgfSk7XHJcbiAgIDwvZmlsZT5cclxuIDwvZXhhbXBsZT5cclxuXHJcbiAqXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCBvciBIVE1MIHN0cmluZyB0byBjb21waWxlIGludG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbi5cclxuICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGUgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGRpcmVjdGl2ZXMgLSBERVBSRUNBVEVELlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZXJyb3JcIj5cclxuICogKipOb3RlOioqIFBhc3NpbmcgYSBgdHJhbnNjbHVkZWAgZnVuY3Rpb24gdG8gdGhlICRjb21waWxlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGFzIGl0XHJcbiAqICAgZS5nLiB3aWxsIG5vdCB1c2UgdGhlIHJpZ2h0IG91dGVyIHNjb3BlLiBQbGVhc2UgcGFzcyB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiBhcyBhXHJcbiAqICAgYHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuYCB0byB0aGUgbGluayBmdW5jdGlvbiBpbnN0ZWFkLlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IG1heFByaW9yaXR5IG9ubHkgYXBwbHkgZGlyZWN0aXZlcyBsb3dlciB0aGFuIGdpdmVuIHByaW9yaXR5IChPbmx5IGVmZmVjdHMgdGhlXHJcbiAqICAgICAgICAgICAgICAgICByb290IGVsZW1lbnQocyksIG5vdCB0aGVpciBjaGlsZHJlbilcclxuICogQHJldHVybnMge2Z1bmN0aW9uKHNjb3BlLCBjbG9uZUF0dGFjaEZuPSwgb3B0aW9ucz0pfSBhIGxpbmsgZnVuY3Rpb24gd2hpY2ggaXMgdXNlZCB0byBiaW5kIHRlbXBsYXRlXHJcbiAqIChhIERPTSBlbGVtZW50L3RyZWUpIHRvIGEgc2NvcGUuIFdoZXJlOlxyXG4gKlxyXG4gKiAgKiBgc2NvcGVgIC0gQSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBTY29wZX0gdG8gYmluZCB0by5cclxuICogICogYGNsb25lQXR0YWNoRm5gIC0gSWYgYGNsb25lQXR0YWNoRm5gIGlzIHByb3ZpZGVkLCB0aGVuIHRoZSBsaW5rIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlXHJcbiAqICBgdGVtcGxhdGVgIGFuZCBjYWxsIHRoZSBgY2xvbmVBdHRhY2hGbmAgZnVuY3Rpb24gYWxsb3dpbmcgdGhlIGNhbGxlciB0byBhdHRhY2ggdGhlXHJcbiAqICBjbG9uZWQgZWxlbWVudHMgdG8gdGhlIERPTSBkb2N1bWVudCBhdCB0aGUgYXBwcm9wcmlhdGUgcGxhY2UuIFRoZSBgY2xvbmVBdHRhY2hGbmAgaXNcclxuICogIGNhbGxlZCBhczogPGJyPiBgY2xvbmVBdHRhY2hGbihjbG9uZWRFbGVtZW50LCBzY29wZSlgIHdoZXJlOlxyXG4gKlxyXG4gKiAgICAgICogYGNsb25lZEVsZW1lbnRgIC0gaXMgYSBjbG9uZSBvZiB0aGUgb3JpZ2luYWwgYGVsZW1lbnRgIHBhc3NlZCBpbnRvIHRoZSBjb21waWxlci5cclxuICogICAgICAqIGBzY29wZWAgLSBpcyB0aGUgY3VycmVudCBzY29wZSB3aXRoIHdoaWNoIHRoZSBsaW5raW5nIGZ1bmN0aW9uIGlzIHdvcmtpbmcgd2l0aC5cclxuICpcclxuICogICogYG9wdGlvbnNgIC0gQW4gb3B0aW9uYWwgb2JqZWN0IGhhc2ggd2l0aCBsaW5raW5nIG9wdGlvbnMuIElmIGBvcHRpb25zYCBpcyBwcm92aWRlZCwgdGhlbiB0aGUgZm9sbG93aW5nXHJcbiAqICBrZXlzIG1heSBiZSB1c2VkIHRvIGNvbnRyb2wgbGlua2luZyBiZWhhdmlvcjpcclxuICpcclxuICogICAgICAqIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgLSB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiBtYWRlIGF2YWlsYWJsZSB0b1xyXG4gKiAgICAgICAgZGlyZWN0aXZlczsgaWYgZ2l2ZW4sIGl0IHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdG8gdGhlIGxpbmsgZnVuY3Rpb25zIG9mXHJcbiAqICAgICAgICBkaXJlY3RpdmVzIGZvdW5kIGluIGBlbGVtZW50YCBkdXJpbmcgY29tcGlsYXRpb24uXHJcbiAqICAgICAgKiBgdHJhbnNjbHVkZUNvbnRyb2xsZXJzYCAtIGFuIG9iamVjdCBoYXNoIHdpdGgga2V5cyB0aGF0IG1hcCBjb250cm9sbGVyIG5hbWVzXHJcbiAqICAgICAgICB0byBjb250cm9sbGVyIGluc3RhbmNlczsgaWYgZ2l2ZW4sIGl0IHdpbGwgbWFrZSB0aGUgY29udHJvbGxlcnNcclxuICogICAgICAgIGF2YWlsYWJsZSB0byBkaXJlY3RpdmVzLlxyXG4gKiAgICAgICogYGZ1dHVyZVBhcmVudEVsZW1lbnRgIC0gZGVmaW5lcyB0aGUgcGFyZW50IHRvIHdoaWNoIHRoZSBgY2xvbmVBdHRhY2hGbmAgd2lsbCBhZGRcclxuICogICAgICAgIHRoZSBjbG9uZWQgZWxlbWVudHM7IG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWxcclxuICogICAgICAgIGVsZW1lbnRzIChlLmcuIFNWRyBlbGVtZW50cykuIFNlZSBhbHNvIHRoZSBkaXJlY3RpdmUuY29udHJvbGxlciBwcm9wZXJ0eS5cclxuICpcclxuICogQ2FsbGluZyB0aGUgbGlua2luZyBmdW5jdGlvbiByZXR1cm5zIHRoZSBlbGVtZW50IG9mIHRoZSB0ZW1wbGF0ZS4gSXQgaXMgZWl0aGVyIHRoZSBvcmlnaW5hbFxyXG4gKiBlbGVtZW50IHBhc3NlZCBpbiwgb3IgdGhlIGNsb25lIG9mIHRoZSBlbGVtZW50IGlmIHRoZSBgY2xvbmVBdHRhY2hGbmAgaXMgcHJvdmlkZWQuXHJcbiAqXHJcbiAqIEFmdGVyIGxpbmtpbmcgdGhlIHZpZXcgaXMgbm90IHVwZGF0ZWQgdW50aWwgYWZ0ZXIgYSBjYWxsIHRvICRkaWdlc3Qgd2hpY2ggdHlwaWNhbGx5IGlzIGRvbmUgYnlcclxuICogQW5ndWxhciBhdXRvbWF0aWNhbGx5LlxyXG4gKlxyXG4gKiBJZiB5b3UgbmVlZCBhY2Nlc3MgdG8gdGhlIGJvdW5kIHZpZXcsIHRoZXJlIGFyZSB0d28gd2F5cyB0byBkbyBpdDpcclxuICpcclxuICogLSBJZiB5b3UgYXJlIG5vdCBhc2tpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gdG8gY2xvbmUgdGhlIHRlbXBsYXRlLCBjcmVhdGUgdGhlIERPTSBlbGVtZW50KHMpXHJcbiAqICAgYmVmb3JlIHlvdSBzZW5kIHRoZW0gdG8gdGhlIGNvbXBpbGVyIGFuZCBrZWVwIHRoaXMgcmVmZXJlbmNlIGFyb3VuZC5cclxuICogICBgYGBqc1xyXG4gKiAgICAgdmFyIGVsZW1lbnQgPSAkY29tcGlsZSgnPHA+e3t0b3RhbH19PC9wPicpKHNjb3BlKTtcclxuICogICBgYGBcclxuICpcclxuICogLSBpZiBvbiB0aGUgb3RoZXIgaGFuZCwgeW91IG5lZWQgdGhlIGVsZW1lbnQgdG8gYmUgY2xvbmVkLCB0aGUgdmlldyByZWZlcmVuY2UgZnJvbSB0aGUgb3JpZ2luYWxcclxuICogICBleGFtcGxlIHdvdWxkIG5vdCBwb2ludCB0byB0aGUgY2xvbmUsIGJ1dCByYXRoZXIgdG8gdGhlIG9yaWdpbmFsIHRlbXBsYXRlIHRoYXQgd2FzIGNsb25lZC4gSW5cclxuICogICB0aGlzIGNhc2UsIHlvdSBjYW4gYWNjZXNzIHRoZSBjbG9uZSB2aWEgdGhlIGNsb25lQXR0YWNoRm46XHJcbiAqICAgYGBganNcclxuICogICAgIHZhciB0ZW1wbGF0ZUVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJzxwPnt7dG90YWx9fTwvcD4nKSxcclxuICogICAgICAgICBzY29wZSA9IC4uLi47XHJcbiAqXHJcbiAqICAgICB2YXIgY2xvbmVkRWxlbWVudCA9ICRjb21waWxlKHRlbXBsYXRlRWxlbWVudCkoc2NvcGUsIGZ1bmN0aW9uKGNsb25lZEVsZW1lbnQsIHNjb3BlKSB7XHJcbiAqICAgICAgIC8vYXR0YWNoIHRoZSBjbG9uZSB0byBET00gZG9jdW1lbnQgYXQgdGhlIHJpZ2h0IHBsYWNlXHJcbiAqICAgICB9KTtcclxuICpcclxuICogICAgIC8vbm93IHdlIGhhdmUgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgRE9NIHZpYSBgY2xvbmVkRWxlbWVudGBcclxuICogICBgYGBcclxuICpcclxuICpcclxuICogRm9yIGluZm9ybWF0aW9uIG9uIGhvdyB0aGUgY29tcGlsZXIgd29ya3MsIHNlZSB0aGVcclxuICoge0BsaW5rIGd1aWRlL2NvbXBpbGVyIEFuZ3VsYXIgSFRNTCBDb21waWxlcn0gc2VjdGlvbiBvZiB0aGUgRGV2ZWxvcGVyIEd1aWRlLlxyXG4gKi9cclxuXHJcbnZhciAkY29tcGlsZU1pbkVyciA9IG1pbkVycignJGNvbXBpbGUnKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGNvbXBpbGVQcm92aWRlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICovXHJcbiRDb21waWxlUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnLCAnJCRzYW5pdGl6ZVVyaVByb3ZpZGVyJ107XHJcbmZ1bmN0aW9uICRDb21waWxlUHJvdmlkZXIoJHByb3ZpZGUsICQkc2FuaXRpemVVcmlQcm92aWRlcikge1xyXG4gIHZhciBoYXNEaXJlY3RpdmVzID0ge30sXHJcbiAgICAgIFN1ZmZpeCA9ICdEaXJlY3RpdmUnLFxyXG4gICAgICBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAgPSAvXlxccypkaXJlY3RpdmVcXDpcXHMqKFtcXHdcXC1dKylcXHMrKC4qKSQvLFxyXG4gICAgICBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQID0gLygoW1xcd1xcLV0rKSg/OlxcOihbXjtdKykpPzs/KS8sXHJcbiAgICAgIEFMTF9PUl9OT1RISU5HX0FUVFJTID0gbWFrZU1hcCgnbmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldCcpLFxyXG4gICAgICBSRVFVSVJFX1BSRUZJWF9SRUdFWFAgPSAvXig/OihcXF5cXF4/KT8oXFw/KT8oXFxeXFxePyk/KT8vO1xyXG5cclxuICAvLyBSZWY6IGh0dHA6Ly9kZXZlbG9wZXJzLndoYXR3Zy5vcmcvd2ViYXBwYXBpcy5odG1sI2V2ZW50LWhhbmRsZXItaWRsLWF0dHJpYnV0ZXNcclxuICAvLyBUaGUgYXNzdW1wdGlvbiBpcyB0aGF0IGZ1dHVyZSBET00gZXZlbnQgYXR0cmlidXRlIG5hbWVzIHdpbGwgYmVnaW4gd2l0aFxyXG4gIC8vICdvbicgYW5kIGJlIGNvbXBvc2VkIG9mIG9ubHkgRW5nbGlzaCBsZXR0ZXJzLlxyXG4gIHZhciBFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQID0gL14ob25bYS16XSt8Zm9ybWFjdGlvbikkLztcclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VJc29sYXRlQmluZGluZ3Moc2NvcGUsIGRpcmVjdGl2ZU5hbWUpIHtcclxuICAgIHZhciBMT0NBTF9SRUdFWFAgPSAvXlxccyooW0AmXXw9KFxcKj8pKShcXD8/KVxccyooXFx3KilcXHMqJC87XHJcblxyXG4gICAgdmFyIGJpbmRpbmdzID0ge307XHJcblxyXG4gICAgZm9yRWFjaChzY29wZSwgZnVuY3Rpb24oZGVmaW5pdGlvbiwgc2NvcGVOYW1lKSB7XHJcbiAgICAgIHZhciBtYXRjaCA9IGRlZmluaXRpb24ubWF0Y2goTE9DQUxfUkVHRVhQKTtcclxuXHJcbiAgICAgIGlmICghbWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignaXNjcCcsXHJcbiAgICAgICAgICAgIFwiSW52YWxpZCBpc29sYXRlIHNjb3BlIGRlZmluaXRpb24gZm9yIGRpcmVjdGl2ZSAnezB9Jy5cIiArXHJcbiAgICAgICAgICAgIFwiIERlZmluaXRpb246IHsuLi4gezF9OiAnezJ9JyAuLi59XCIsXHJcbiAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsIHNjb3BlTmFtZSwgZGVmaW5pdGlvbik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGJpbmRpbmdzW3Njb3BlTmFtZV0gPSB7XHJcbiAgICAgICAgbW9kZTogbWF0Y2hbMV1bMF0sXHJcbiAgICAgICAgY29sbGVjdGlvbjogbWF0Y2hbMl0gPT09ICcqJyxcclxuICAgICAgICBvcHRpb25hbDogbWF0Y2hbM10gPT09ICc/JyxcclxuICAgICAgICBhdHRyTmFtZTogbWF0Y2hbNF0gfHwgc2NvcGVOYW1lXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gYmluZGluZ3M7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmVcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmVnaXN0ZXIgYSBuZXcgZGlyZWN0aXZlIHdpdGggdGhlIGNvbXBpbGVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGRpcmVjdGl2ZSBpbiBjYW1lbC1jYXNlIChpLmUuIDxjb2RlPm5nQmluZDwvY29kZT4gd2hpY2hcclxuICAgKiAgICB3aWxsIG1hdGNoIGFzIDxjb2RlPm5nLWJpbmQ8L2NvZGU+KSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBkaXJlY3RpdmVzIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGVcclxuICAgKiAgICBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGZhY3Rvcmllcy5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5fSBkaXJlY3RpdmVGYWN0b3J5IEFuIGluamVjdGFibGUgZGlyZWN0aXZlIGZhY3RvcnkgZnVuY3Rpb24uIFNlZVxyXG4gICAqICAgIHtAbGluayBndWlkZS9kaXJlY3RpdmV9IGZvciBtb3JlIGluZm8uXHJcbiAgICogQHJldHVybnMge25nLiRjb21waWxlUHJvdmlkZXJ9IFNlbGYgZm9yIGNoYWluaW5nLlxyXG4gICAqL1xyXG4gICB0aGlzLmRpcmVjdGl2ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVyRGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZUZhY3RvcnkpIHtcclxuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdkaXJlY3RpdmUnKTtcclxuICAgIGlmIChpc1N0cmluZyhuYW1lKSkge1xyXG4gICAgICBhc3NlcnRBcmcoZGlyZWN0aXZlRmFjdG9yeSwgJ2RpcmVjdGl2ZUZhY3RvcnknKTtcclxuICAgICAgaWYgKCFoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgaGFzRGlyZWN0aXZlc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgICRwcm92aWRlLmZhY3RvcnkobmFtZSArIFN1ZmZpeCwgWyckaW5qZWN0b3InLCAnJGV4Y2VwdGlvbkhhbmRsZXInLFxyXG4gICAgICAgICAgZnVuY3Rpb24oJGluamVjdG9yLCAkZXhjZXB0aW9uSGFuZGxlcikge1xyXG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3JFYWNoKGhhc0RpcmVjdGl2ZXNbbmFtZV0sIGZ1bmN0aW9uKGRpcmVjdGl2ZUZhY3RvcnksIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXJlY3RpdmUgPSAkaW5qZWN0b3IuaW52b2tlKGRpcmVjdGl2ZUZhY3RvcnkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUgPSB7IGNvbXBpbGU6IHZhbHVlRm4oZGlyZWN0aXZlKSB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZGlyZWN0aXZlLmNvbXBpbGUgJiYgZGlyZWN0aXZlLmxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLmNvbXBpbGUgPSB2YWx1ZUZuKGRpcmVjdGl2ZS5saW5rKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5wcmlvcml0eSA9IGRpcmVjdGl2ZS5wcmlvcml0eSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUubmFtZSA9IGRpcmVjdGl2ZS5uYW1lIHx8IG5hbWU7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucmVxdWlyZSA9IGRpcmVjdGl2ZS5yZXF1aXJlIHx8IChkaXJlY3RpdmUuY29udHJvbGxlciAmJiBkaXJlY3RpdmUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucmVzdHJpY3QgPSBkaXJlY3RpdmUucmVzdHJpY3QgfHwgJ0VBJztcclxuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmUuc2NvcGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncyA9IHBhcnNlSXNvbGF0ZUJpbmRpbmdzKGRpcmVjdGl2ZS5zY29wZSwgZGlyZWN0aXZlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZXM7XHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgIH1cclxuICAgICAgaGFzRGlyZWN0aXZlc1tuYW1lXS5wdXNoKGRpcmVjdGl2ZUZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yRWFjaChuYW1lLCByZXZlcnNlUGFyYW1zKHJlZ2lzdGVyRGlyZWN0aXZlKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxyXG4gICAqIHVybHMgZHVyaW5nIGFbaHJlZl0gc2FuaXRpemF0aW9uLlxyXG4gICAqXHJcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudGluZyBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cclxuICAgKlxyXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gYVtocmVmXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXHJcbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxyXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxyXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cclxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXHJcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxyXG4gICAqL1xyXG4gIHRoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcclxuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xyXG4gICAgICAkJHNhbml0aXplVXJpUHJvdmlkZXIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2ltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXHJcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxyXG4gICAqXHJcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cclxuICAgKlxyXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gaW1nW3NyY10gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xyXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXHJcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXHJcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxyXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgdGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcclxuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xyXG4gICAgICAkJHNhbml0aXplVXJpUHJvdmlkZXIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KHJlZ2V4cCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgICRjb21waWxlUHJvdmlkZXIjZGVidWdJbmZvRW5hYmxlZFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB1cGRhdGUgdGhlIGRlYnVnSW5mb0VuYWJsZWQgc3RhdGUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBqdXN0IHJldHVybiB0aGVcclxuICAgKiBjdXJyZW50IGRlYnVnSW5mb0VuYWJsZWQgc3RhdGVcclxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxyXG4gICAqXHJcbiAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbGwgdGhpcyBtZXRob2QgdG8gZW5hYmxlL2Rpc2FibGUgdmFyaW91cyBkZWJ1ZyBydW50aW1lIGluZm9ybWF0aW9uIGluIHRoZSBjb21waWxlciBzdWNoIGFzIGFkZGluZ1xyXG4gICAqIGJpbmRpbmcgaW5mb3JtYXRpb24gYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHNjb3BlIG9uIHRvIERPTSBlbGVtZW50cy5cclxuICAgKiBJZiBlbmFibGVkLCB0aGUgY29tcGlsZXIgd2lsbCBhZGQgdGhlIGZvbGxvd2luZyB0byBET00gZWxlbWVudHMgdGhhdCBoYXZlIGJlZW4gYm91bmQgdG8gdGhlIHNjb3BlXHJcbiAgICogKiBgbmctYmluZGluZ2AgQ1NTIGNsYXNzXHJcbiAgICogKiBgJGJpbmRpbmdgIGRhdGEgcHJvcGVydHkgY29udGFpbmluZyBhbiBhcnJheSBvZiB0aGUgYmluZGluZyBleHByZXNzaW9uc1xyXG4gICAqXHJcbiAgICogWW91IG1heSB3YW50IHRvIGRpc2FibGUgdGhpcyBpbiBwcm9kdWN0aW9uIGZvciBhIHNpZ25pZmljYW50IHBlcmZvcm1hbmNlIGJvb3N0LiBTZWVcclxuICAgKiB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEaXNhYmxpbmcgRGVidWcgRGF0YX0gZm9yIG1vcmUuXHJcbiAgICpcclxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB0cnVlLlxyXG4gICAqL1xyXG4gIHZhciBkZWJ1Z0luZm9FbmFibGVkID0gdHJ1ZTtcclxuICB0aGlzLmRlYnVnSW5mb0VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKGVuYWJsZWQpKSB7XHJcbiAgICAgIGRlYnVnSW5mb0VuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBkZWJ1Z0luZm9FbmFibGVkO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJGdldCA9IFtcclxuICAgICAgICAgICAgJyRpbmplY3RvcicsICckaW50ZXJwb2xhdGUnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCAnJHRlbXBsYXRlUmVxdWVzdCcsICckcGFyc2UnLFxyXG4gICAgICAgICAgICAnJGNvbnRyb2xsZXInLCAnJHJvb3RTY29wZScsICckZG9jdW1lbnQnLCAnJHNjZScsICckYW5pbWF0ZScsICckJHNhbml0aXplVXJpJyxcclxuICAgIGZ1bmN0aW9uKCRpbmplY3RvciwgICAkaW50ZXJwb2xhdGUsICAgJGV4Y2VwdGlvbkhhbmRsZXIsICAgJHRlbXBsYXRlUmVxdWVzdCwgICAkcGFyc2UsXHJcbiAgICAgICAgICAgICAkY29udHJvbGxlciwgICAkcm9vdFNjb3BlLCAgICRkb2N1bWVudCwgICAkc2NlLCAgICRhbmltYXRlLCAgICQkc2FuaXRpemVVcmkpIHtcclxuXHJcbiAgICB2YXIgQXR0cmlidXRlcyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZXNUb0NvcHkpIHtcclxuICAgICAgaWYgKGF0dHJpYnV0ZXNUb0NvcHkpIHtcclxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXNUb0NvcHkpO1xyXG4gICAgICAgIHZhciBpLCBsLCBrZXk7XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICAgIHRoaXNba2V5XSA9IGF0dHJpYnV0ZXNUb0NvcHlba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kYXR0ciA9IHt9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLiQkZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIEF0dHJpYnV0ZXMucHJvdG90eXBlID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkbm9ybWFsaXplXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBDb252ZXJ0cyBhbiBhdHRyaWJ1dGUgbmFtZSAoZS5nLiBkYXNoL2NvbG9uL3VuZGVyc2NvcmUtZGVsaW1pdGVkIHN0cmluZywgb3B0aW9uYWxseSBwcmVmaXhlZCB3aXRoIGB4LWAgb3JcclxuICAgICAgICogYGRhdGEtYCkgdG8gaXRzIG5vcm1hbGl6ZWQsIGNhbWVsQ2FzZSBmb3JtLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBbHNvIHRoZXJlIGlzIHNwZWNpYWwgY2FzZSBmb3IgTW96IHByZWZpeCBzdGFydGluZyB3aXRoIHVwcGVyIGNhc2UgbGV0dGVyLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBGb3IgZnVydGhlciBpbmZvcm1hdGlvbiBjaGVjayBvdXQgdGhlIGd1aWRlIG9uIHtAbGluayBndWlkZS9kaXJlY3RpdmUjbWF0Y2hpbmctZGlyZWN0aXZlcyBNYXRjaGluZyBEaXJlY3RpdmVzfVxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxyXG4gICAgICAgKi9cclxuICAgICAgJG5vcm1hbGl6ZTogZGlyZWN0aXZlTm9ybWFsaXplLFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRhZGRDbGFzc1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogQWRkcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIHRvIHRoZSBlbGVtZW50LiBJZiBhbmltYXRpb25zXHJcbiAgICAgICAqIGFyZSBlbmFibGVkIHRoZW4gYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGZvciB0aGUgY2xhc3MgYWRkaXRpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1ZhbCBUaGUgY2xhc3NOYW1lIHZhbHVlIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgZWxlbWVudFxyXG4gICAgICAgKi9cclxuICAgICAgJGFkZENsYXNzOiBmdW5jdGlvbihjbGFzc1ZhbCkge1xyXG4gICAgICAgIGlmIChjbGFzc1ZhbCAmJiBjbGFzc1ZhbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgY2xhc3NWYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRyZW1vdmVDbGFzc1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogUmVtb3ZlcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIGZyb20gdGhlIGVsZW1lbnQuIElmXHJcbiAgICAgICAqIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQgdGhlbiBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgZm9yIHRoZSBjbGFzcyByZW1vdmFsLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NWYWwgVGhlIGNsYXNzTmFtZSB2YWx1ZSB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XHJcbiAgICAgICAqL1xyXG4gICAgICAkcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGNsYXNzVmFsKSB7XHJcbiAgICAgICAgaWYgKGNsYXNzVmFsICYmIGNsYXNzVmFsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBjbGFzc1ZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHVwZGF0ZUNsYXNzXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBBZGRzIGFuZCByZW1vdmVzIHRoZSBhcHByb3ByaWF0ZSBDU1MgY2xhc3MgdmFsdWVzIHRvIHRoZSBlbGVtZW50IGJhc2VkIG9uIHRoZSBkaWZmZXJlbmNlXHJcbiAgICAgICAqIGJldHdlZW4gdGhlIG5ldyBhbmQgb2xkIENTUyBjbGFzcyB2YWx1ZXMgKHNwZWNpZmllZCBhcyBuZXdDbGFzc2VzIGFuZCBvbGRDbGFzc2VzKS5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5ld0NsYXNzZXMgVGhlIGN1cnJlbnQgQ1NTIGNsYXNzTmFtZSB2YWx1ZVxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gb2xkQ2xhc3NlcyBUaGUgZm9ybWVyIENTUyBjbGFzc05hbWUgdmFsdWVcclxuICAgICAgICovXHJcbiAgICAgICR1cGRhdGVDbGFzczogZnVuY3Rpb24obmV3Q2xhc3Nlcywgb2xkQ2xhc3Nlcykge1xyXG4gICAgICAgIHZhciB0b0FkZCA9IHRva2VuRGlmZmVyZW5jZShuZXdDbGFzc2VzLCBvbGRDbGFzc2VzKTtcclxuICAgICAgICBpZiAodG9BZGQgJiYgdG9BZGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgdG9BZGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRvUmVtb3ZlID0gdG9rZW5EaWZmZXJlbmNlKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpO1xyXG4gICAgICAgIGlmICh0b1JlbW92ZSAmJiB0b1JlbW92ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCB0b1JlbW92ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldCBhIG5vcm1hbGl6ZWQgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50IGluIGEgd2F5IHN1Y2ggdGhhdCBhbGwgZGlyZWN0aXZlc1xyXG4gICAgICAgKiBjYW4gc2hhcmUgdGhlIGF0dHJpYnV0ZS4gVGhpcyBmdW5jdGlvbiBwcm9wZXJseSBoYW5kbGVzIGJvb2xlYW4gYXR0cmlidXRlcy5cclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBOb3JtYWxpemVkIGtleS4gKGllIG5nQXR0cmlidXRlKVxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ3xib29sZWFufSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LiBJZiBgbnVsbGAgYXR0cmlidXRlIHdpbGwgYmUgZGVsZXRlZC5cclxuICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gd3JpdGVBdHRyIElmIGZhbHNlLCBkb2VzIG5vdCB3cml0ZSB0aGUgdmFsdWUgdG8gRE9NIGVsZW1lbnQgYXR0cmlidXRlLlxyXG4gICAgICAgKiAgICAgRGVmYXVsdHMgdG8gdHJ1ZS5cclxuICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBhdHRyTmFtZSBPcHRpb25hbCBub25lIG5vcm1hbGl6ZWQgbmFtZS4gRGVmYXVsdHMgdG8ga2V5LlxyXG4gICAgICAgKi9cclxuICAgICAgJHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgd3JpdGVBdHRyLCBhdHRyTmFtZSkge1xyXG4gICAgICAgIC8vIFRPRE86IGRlY2lkZSB3aGV0aGVyIG9yIG5vdCB0byB0aHJvdyBhbiBlcnJvciBpZiBcImNsYXNzXCJcclxuICAgICAgICAvL2lzIHNldCB0aHJvdWdoIHRoaXMgZnVuY3Rpb24gc2luY2UgaXQgbWF5IGNhdXNlICR1cGRhdGVDbGFzcyB0b1xyXG4gICAgICAgIC8vYmVjb21lIHVuc3RhYmxlLlxyXG5cclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuJCRlbGVtZW50WzBdLFxyXG4gICAgICAgICAgICBib29sZWFuS2V5ID0gZ2V0Qm9vbGVhbkF0dHJOYW1lKG5vZGUsIGtleSksXHJcbiAgICAgICAgICAgIGFsaWFzZWRLZXkgPSBnZXRBbGlhc2VkQXR0ck5hbWUobm9kZSwga2V5KSxcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBrZXksXHJcbiAgICAgICAgICAgIG5vZGVOYW1lO1xyXG5cclxuICAgICAgICBpZiAoYm9vbGVhbktleSkge1xyXG4gICAgICAgICAgdGhpcy4kJGVsZW1lbnQucHJvcChrZXksIHZhbHVlKTtcclxuICAgICAgICAgIGF0dHJOYW1lID0gYm9vbGVhbktleTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFsaWFzZWRLZXkpIHtcclxuICAgICAgICAgIHRoaXNbYWxpYXNlZEtleV0gPSB2YWx1ZTtcclxuICAgICAgICAgIG9ic2VydmVyID0gYWxpYXNlZEtleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAvLyB0cmFuc2xhdGUgbm9ybWFsaXplZCBrZXkgdG8gYWN0dWFsIGtleVxyXG4gICAgICAgIGlmIChhdHRyTmFtZSkge1xyXG4gICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGF0dHJOYW1lID0gdGhpcy4kYXR0cltrZXldO1xyXG4gICAgICAgICAgaWYgKCFhdHRyTmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLiRhdHRyW2tleV0gPSBhdHRyTmFtZSA9IHNuYWtlX2Nhc2Uoa2V5LCAnLScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbm9kZU5hbWUgPSBub2RlTmFtZV8odGhpcy4kJGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAoKG5vZGVOYW1lID09PSAnYScgJiYga2V5ID09PSAnaHJlZicpIHx8XHJcbiAgICAgICAgICAgIChub2RlTmFtZSA9PT0gJ2ltZycgJiYga2V5ID09PSAnc3JjJykpIHtcclxuICAgICAgICAgIC8vIHNhbml0aXplIGFbaHJlZl0gYW5kIGltZ1tzcmNdIHZhbHVlc1xyXG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWUgPSAkJHNhbml0aXplVXJpKHZhbHVlLCBrZXkgPT09ICdzcmMnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5vZGVOYW1lID09PSAnaW1nJyAmJiBrZXkgPT09ICdzcmNzZXQnKSB7XHJcbiAgICAgICAgICAvLyBzYW5pdGl6ZSBpbWdbc3Jjc2V0XSB2YWx1ZXNcclxuICAgICAgICAgIHZhciByZXN1bHQgPSBcIlwiO1xyXG5cclxuICAgICAgICAgIC8vIGZpcnN0IGNoZWNrIGlmIHRoZXJlIGFyZSBzcGFjZXMgYmVjYXVzZSBpdCdzIG5vdCB0aGUgc2FtZSBwYXR0ZXJuXHJcbiAgICAgICAgICB2YXIgdHJpbW1lZFNyY3NldCA9IHRyaW0odmFsdWUpO1xyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgKCAgIDk5OXggICAsfCAgIDk5OXcgICAsfCAgICx8LCAgIClcclxuICAgICAgICAgIHZhciBzcmNQYXR0ZXJuID0gLyhcXHMrXFxkK3hcXHMqLHxcXHMrXFxkK3dcXHMqLHxcXHMrLHwsXFxzKykvO1xyXG4gICAgICAgICAgdmFyIHBhdHRlcm4gPSAvXFxzLy50ZXN0KHRyaW1tZWRTcmNzZXQpID8gc3JjUGF0dGVybiA6IC8oLCkvO1xyXG5cclxuICAgICAgICAgIC8vIHNwbGl0IHNyY3NldCBpbnRvIHR1cGxlIG9mIHVyaSBhbmQgZGVzY3JpcHRvciBleGNlcHQgZm9yIHRoZSBsYXN0IGl0ZW1cclxuICAgICAgICAgIHZhciByYXdVcmlzID0gdHJpbW1lZFNyY3NldC5zcGxpdChwYXR0ZXJuKTtcclxuXHJcbiAgICAgICAgICAvLyBmb3IgZWFjaCB0dXBsZXNcclxuICAgICAgICAgIHZhciBuYnJVcmlzV2l0aDJwYXJ0cyA9IE1hdGguZmxvb3IocmF3VXJpcy5sZW5ndGggLyAyKTtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmJyVXJpc1dpdGgycGFydHM7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaW5uZXJJZHggPSBpICogMjtcclxuICAgICAgICAgICAgLy8gc2FuaXRpemUgdGhlIHVyaVxyXG4gICAgICAgICAgICByZXN1bHQgKz0gJCRzYW5pdGl6ZVVyaSh0cmltKHJhd1VyaXNbaW5uZXJJZHhdKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgZGVzY3JpcHRvclxyXG4gICAgICAgICAgICByZXN1bHQgKz0gKFwiIFwiICsgdHJpbShyYXdVcmlzW2lubmVySWR4ICsgMV0pKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBzcGxpdCB0aGUgbGFzdCBpdGVtIGludG8gdXJpIGFuZCBkZXNjcmlwdG9yXHJcbiAgICAgICAgICB2YXIgbGFzdFR1cGxlID0gdHJpbShyYXdVcmlzW2kgKiAyXSkuc3BsaXQoL1xccy8pO1xyXG5cclxuICAgICAgICAgIC8vIHNhbml0aXplIHRoZSBsYXN0IHVyaVxyXG4gICAgICAgICAgcmVzdWx0ICs9ICQkc2FuaXRpemVVcmkodHJpbShsYXN0VHVwbGVbMF0pLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAvLyBhbmQgYWRkIHRoZSBsYXN0IGRlc2NyaXB0b3IgaWYgYW55XHJcbiAgICAgICAgICBpZiAobGFzdFR1cGxlLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gKFwiIFwiICsgdHJpbShsYXN0VHVwbGVbMV0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlID0gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHdyaXRlQXR0ciAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoYXR0ck5hbWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy4kJGVsZW1lbnQuYXR0cihhdHRyTmFtZSwgdmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlyZSBvYnNlcnZlcnNcclxuICAgICAgICB2YXIgJCRvYnNlcnZlcnMgPSB0aGlzLiQkb2JzZXJ2ZXJzO1xyXG4gICAgICAgICQkb2JzZXJ2ZXJzICYmIGZvckVhY2goJCRvYnNlcnZlcnNbb2JzZXJ2ZXJdLCBmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZm4odmFsdWUpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkb2JzZXJ2ZVxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogT2JzZXJ2ZXMgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZS5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIG9ic2VydmVyIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbmNlIGR1cmluZyB0aGUgbmV4dCBgJGRpZ2VzdGAgZm9sbG93aW5nXHJcbiAgICAgICAqIGNvbXBpbGF0aW9uLiBUaGUgb2JzZXJ2ZXIgaXMgdGhlbiBpbnZva2VkIHdoZW5ldmVyIHRoZSBpbnRlcnBvbGF0ZWQgdmFsdWVcclxuICAgICAgICogY2hhbmdlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBOb3JtYWxpemVkIGtleS4gKGllIG5nQXR0cmlidXRlKSAuXHJcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW50ZXJwb2xhdGVkVmFsdWUpfSBmbiBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyXHJcbiAgICAgICAgICAgICAgICB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgY2hhbmdlcy5cclxuICAgICAgICogICAgICAgIFNlZSB0aGUge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSN0ZXh0LWFuZC1hdHRyaWJ1dGUtYmluZGluZ3MgRGlyZWN0aXZlc30gZ3VpZGUgZm9yIG1vcmUgaW5mby5cclxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBvYnNlcnZlci5cclxuICAgICAgICovXHJcbiAgICAgICRvYnNlcnZlOiBmdW5jdGlvbihrZXksIGZuKSB7XHJcbiAgICAgICAgdmFyIGF0dHJzID0gdGhpcyxcclxuICAgICAgICAgICAgJCRvYnNlcnZlcnMgPSAoYXR0cnMuJCRvYnNlcnZlcnMgfHwgKGF0dHJzLiQkb2JzZXJ2ZXJzID0gY3JlYXRlTWFwKCkpKSxcclxuICAgICAgICAgICAgbGlzdGVuZXJzID0gKCQkb2JzZXJ2ZXJzW2tleV0gfHwgKCQkb2JzZXJ2ZXJzW2tleV0gPSBbXSkpO1xyXG5cclxuICAgICAgICBsaXN0ZW5lcnMucHVzaChmbik7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCFsaXN0ZW5lcnMuJCRpbnRlciAmJiBhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgIC8vIG5vIG9uZSByZWdpc3RlcmVkIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLCBzbyBsZXRzIGNhbGwgaXQgbWFudWFsbHlcclxuICAgICAgICAgICAgZm4oYXR0cnNba2V5XSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGFycmF5UmVtb3ZlKGxpc3RlbmVycywgZm4pO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIGlnbm9yZSwgc2luY2UgaXQgbWVhbnMgdGhhdCB3ZSBhcmUgdHJ5aW5nIHRvIHNldCBjbGFzcyBvblxyXG4gICAgICAgIC8vIFNWRyBlbGVtZW50LCB3aGVyZSBjbGFzcyBuYW1lIGlzIHJlYWQtb25seS5cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgc3RhcnRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKSxcclxuICAgICAgICBlbmRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksXHJcbiAgICAgICAgZGVub3JtYWxpemVUZW1wbGF0ZSA9IChzdGFydFN5bWJvbCA9PSAne3snIHx8IGVuZFN5bWJvbCAgPT0gJ319JylcclxuICAgICAgICAgICAgPyBpZGVudGl0eVxyXG4gICAgICAgICAgICA6IGZ1bmN0aW9uIGRlbm9ybWFsaXplVGVtcGxhdGUodGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSgvXFx7XFx7L2csIHN0YXJ0U3ltYm9sKS5yZXBsYWNlKC99fS9nLCBlbmRTeW1ib2wpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTkdfQVRUUl9CSU5ESU5HID0gL15uZ0F0dHJbQS1aXS87XHJcblxyXG4gICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkQmluZGluZ0luZm8oJGVsZW1lbnQsIGJpbmRpbmcpIHtcclxuICAgICAgdmFyIGJpbmRpbmdzID0gJGVsZW1lbnQuZGF0YSgnJGJpbmRpbmcnKSB8fCBbXTtcclxuXHJcbiAgICAgIGlmIChpc0FycmF5KGJpbmRpbmcpKSB7XHJcbiAgICAgICAgYmluZGluZ3MgPSBiaW5kaW5ncy5jb25jYXQoYmluZGluZyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmluZGluZ3MucHVzaChiaW5kaW5nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJGVsZW1lbnQuZGF0YSgnJGJpbmRpbmcnLCBiaW5kaW5ncyk7XHJcbiAgICB9IDogbm9vcDtcclxuXHJcbiAgICBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzID0gZGVidWdJbmZvRW5hYmxlZCA/IGZ1bmN0aW9uICQkYWRkQmluZGluZ0NsYXNzKCRlbGVtZW50KSB7XHJcbiAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgJ25nLWJpbmRpbmcnKTtcclxuICAgIH0gOiBub29wO1xyXG5cclxuICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8gPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRTY29wZUluZm8oJGVsZW1lbnQsIHNjb3BlLCBpc29sYXRlZCwgbm9UZW1wbGF0ZSkge1xyXG4gICAgICB2YXIgZGF0YU5hbWUgPSBpc29sYXRlZCA/IChub1RlbXBsYXRlID8gJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyA6ICckaXNvbGF0ZVNjb3BlJykgOiAnJHNjb3BlJztcclxuICAgICAgJGVsZW1lbnQuZGF0YShkYXRhTmFtZSwgc2NvcGUpO1xyXG4gICAgfSA6IG5vb3A7XHJcblxyXG4gICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MgPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRTY29wZUNsYXNzKCRlbGVtZW50LCBpc29sYXRlZCkge1xyXG4gICAgICBzYWZlQWRkQ2xhc3MoJGVsZW1lbnQsIGlzb2xhdGVkID8gJ25nLWlzb2xhdGUtc2NvcGUnIDogJ25nLXNjb3BlJyk7XHJcbiAgICB9IDogbm9vcDtcclxuXHJcbiAgICByZXR1cm4gY29tcGlsZTtcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGlsZSgkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcclxuICAgICAgaWYgKCEoJGNvbXBpbGVOb2RlcyBpbnN0YW5jZW9mIGpxTGl0ZSkpIHtcclxuICAgICAgICAvLyBqcXVlcnkgYWx3YXlzIHJld3JhcHMsIHdoZXJlYXMgd2UgbmVlZCB0byBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgc2VsZWN0b3Igc28gdGhhdCB3ZSBjYW5cclxuICAgICAgICAvLyBtb2RpZnkgaXQuXHJcbiAgICAgICAgJGNvbXBpbGVOb2RlcyA9IGpxTGl0ZSgkY29tcGlsZU5vZGVzKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBXZSBjYW4gbm90IGNvbXBpbGUgdG9wIGxldmVsIHRleHQgZWxlbWVudHMgc2luY2UgdGV4dCBub2RlcyBjYW4gYmUgbWVyZ2VkIGFuZCB3ZSB3aWxsXHJcbiAgICAgIC8vIG5vdCBiZSBhYmxlIHRvIGF0dGFjaCBzY29wZSBkYXRhIHRvIHRoZW0sIHNvIHdlIHdpbGwgd3JhcCB0aGVtIGluIDxzcGFuPlxyXG4gICAgICBmb3JFYWNoKCRjb21waWxlTm9kZXMsIGZ1bmN0aW9uKG5vZGUsIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gTk9ERV9UWVBFX1RFWFQgJiYgbm9kZS5ub2RlVmFsdWUubWF0Y2goL1xcUysvKSAvKiBub24tZW1wdHkgKi8gKSB7XHJcbiAgICAgICAgICAkY29tcGlsZU5vZGVzW2luZGV4XSA9IGpxTGl0ZShub2RlKS53cmFwKCc8c3Bhbj48L3NwYW4+JykucGFyZW50KClbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgdmFyIGNvbXBvc2l0ZUxpbmtGbiA9XHJcbiAgICAgICAgICAgICAgY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgJGNvbXBpbGVOb2RlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgcHJldmlvdXNDb21waWxlQ29udGV4dCk7XHJcbiAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUNsYXNzKCRjb21waWxlTm9kZXMpO1xyXG4gICAgICB2YXIgbmFtZXNwYWNlID0gbnVsbDtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHB1YmxpY0xpbmtGbihzY29wZSwgY2xvbmVDb25uZWN0Rm4sIG9wdGlvbnMpIHtcclxuICAgICAgICBhc3NlcnRBcmcoc2NvcGUsICdzY29wZScpO1xyXG5cclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICB2YXIgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gPSBvcHRpb25zLnBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLFxyXG4gICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gb3B0aW9ucy50cmFuc2NsdWRlQ29udHJvbGxlcnMsXHJcbiAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gb3B0aW9ucy5mdXR1cmVQYXJlbnRFbGVtZW50O1xyXG5cclxuICAgICAgICAvLyBXaGVuIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgaXMgcGFzc2VkLCBpdCBpcyBhXHJcbiAgICAgICAgLy8gYGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlYCBmdW5jdGlvbiAoaXQgd2FzIHByZXZpb3VzbHkgcGFzc2VkXHJcbiAgICAgICAgLy8gYXMgYHRyYW5zY2x1ZGVgIHRvIGRpcmVjdGl2ZS5saW5rKSBzbyB3ZSBtdXN0IHVud3JhcCBpdCB0byBnZXRcclxuICAgICAgICAvLyBpdHMgYGJvdW5kVHJhbnNjbHVkZUZuYFxyXG4gICAgICAgIGlmIChwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiAmJiBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbi4kJGJvdW5kVHJhbnNjbHVkZSkge1xyXG4gICAgICAgICAgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gPSBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbi4kJGJvdW5kVHJhbnNjbHVkZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgICBuYW1lc3BhY2UgPSBkZXRlY3ROYW1lc3BhY2VGb3JDaGlsZEVsZW1lbnRzKGZ1dHVyZVBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgJGxpbmtOb2RlO1xyXG4gICAgICAgIGlmIChuYW1lc3BhY2UgIT09ICdodG1sJykge1xyXG4gICAgICAgICAgLy8gV2hlbiB1c2luZyBhIGRpcmVjdGl2ZSB3aXRoIHJlcGxhY2U6dHJ1ZSBhbmQgdGVtcGxhdGVVcmwgdGhlICRjb21waWxlTm9kZXNcclxuICAgICAgICAgIC8vIChvciBhIGNoaWxkIGVsZW1lbnQgaW5zaWRlIG9mIHRoZW0pXHJcbiAgICAgICAgICAvLyBtaWdodCBjaGFuZ2UsIHNvIHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIG5hbWVzcGFjZSBhZGFwdGVkIGNvbXBpbGVOb2Rlc1xyXG4gICAgICAgICAgLy8gZm9yIGNhbGwgdG8gdGhlIGxpbmsgZnVuY3Rpb24uXHJcbiAgICAgICAgICAvLyBOb3RlOiBUaGlzIHdpbGwgYWxyZWFkeSBjbG9uZSB0aGUgbm9kZXMuLi5cclxuICAgICAgICAgICRsaW5rTm9kZSA9IGpxTGl0ZShcclxuICAgICAgICAgICAgd3JhcFRlbXBsYXRlKG5hbWVzcGFjZSwganFMaXRlKCc8ZGl2PicpLmFwcGVuZCgkY29tcGlsZU5vZGVzKS5odG1sKCkpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2xvbmVDb25uZWN0Rm4pIHtcclxuICAgICAgICAgIC8vIGltcG9ydGFudCEhOiB3ZSBtdXN0IGNhbGwgb3VyIGpxTGl0ZS5jbG9uZSgpIHNpbmNlIHRoZSBqUXVlcnkgb25lIGlzIHRyeWluZyB0byBiZSBzbWFydFxyXG4gICAgICAgICAgLy8gYW5kIHNvbWV0aW1lcyBjaGFuZ2VzIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIERPTS5cclxuICAgICAgICAgICRsaW5rTm9kZSA9IEpRTGl0ZVByb3RvdHlwZS5jbG9uZS5jYWxsKCRjb21waWxlTm9kZXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkbGlua05vZGUgPSAkY29tcGlsZU5vZGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRyYW5zY2x1ZGVDb250cm9sbGVycykge1xyXG4gICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XHJcbiAgICAgICAgICAgICRsaW5rTm9kZS5kYXRhKCckJyArIGNvbnRyb2xsZXJOYW1lICsgJ0NvbnRyb2xsZXInLCB0cmFuc2NsdWRlQ29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdLmluc3RhbmNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oJGxpbmtOb2RlLCBzY29wZSk7XHJcblxyXG4gICAgICAgIGlmIChjbG9uZUNvbm5lY3RGbikgY2xvbmVDb25uZWN0Rm4oJGxpbmtOb2RlLCBzY29wZSk7XHJcbiAgICAgICAgaWYgKGNvbXBvc2l0ZUxpbmtGbikgY29tcG9zaXRlTGlua0ZuKHNjb3BlLCAkbGlua05vZGUsICRsaW5rTm9kZSwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgIHJldHVybiAkbGlua05vZGU7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGV0ZWN0TmFtZXNwYWNlRm9yQ2hpbGRFbGVtZW50cyhwYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgIC8vIFRPRE86IE1ha2UgdGhpcyBkZXRlY3QgTWF0aE1MIGFzIHdlbGwuLi5cclxuICAgICAgdmFyIG5vZGUgPSBwYXJlbnRFbGVtZW50ICYmIHBhcmVudEVsZW1lbnRbMF07XHJcbiAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgIHJldHVybiAnaHRtbCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVOYW1lXyhub2RlKSAhPT0gJ2ZvcmVpZ25vYmplY3QnICYmIG5vZGUudG9TdHJpbmcoKS5tYXRjaCgvU1ZHLykgPyAnc3ZnJyA6ICdodG1sJztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcGlsZSBmdW5jdGlvbiBtYXRjaGVzIGVhY2ggbm9kZSBpbiBub2RlTGlzdCBhZ2FpbnN0IHRoZSBkaXJlY3RpdmVzLiBPbmNlIGFsbCBkaXJlY3RpdmVzXHJcbiAgICAgKiBmb3IgYSBwYXJ0aWN1bGFyIG5vZGUgYXJlIGNvbGxlY3RlZCB0aGVpciBjb21waWxlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuIFRoZSBjb21waWxlXHJcbiAgICAgKiBmdW5jdGlvbnMgcmV0dXJuIHZhbHVlcyAtIHRoZSBsaW5raW5nIGZ1bmN0aW9ucyAtIGFyZSBjb21iaW5lZCBpbnRvIGEgY29tcG9zaXRlIGxpbmtpbmdcclxuICAgICAqIGZ1bmN0aW9uLCB3aGljaCBpcyB0aGUgYSBsaW5raW5nIGZ1bmN0aW9uIGZvciB0aGUgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdCBhbiBhcnJheSBvZiBub2RlcyBvciBOb2RlTGlzdCB0byBjb21waWxlXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZUZuIEEgbGlua2luZyBmdW5jdGlvbiwgd2hlcmUgdGhlXHJcbiAgICAgKiAgICAgICAgc2NvcGUgYXJndW1lbnQgaXMgYXV0by1nZW5lcmF0ZWQgdG8gdGhlIG5ldyBjaGlsZCBvZiB0aGUgdHJhbnNjbHVkZWQgcGFyZW50IHNjb3BlLlxyXG4gICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gJHJvb3RFbGVtZW50IElmIHRoZSBub2RlTGlzdCBpcyB0aGUgcm9vdCBvZiB0aGUgY29tcGlsYXRpb24gdHJlZSB0aGVuXHJcbiAgICAgKiAgICAgICAgdGhlIHJvb3RFbGVtZW50IG11c3QgYmUgc2V0IHRoZSBqcUxpdGUgY29sbGVjdGlvbiBvZiB0aGUgY29tcGlsZSByb290LiBUaGlzIGlzXHJcbiAgICAgKiAgICAgICAgbmVlZGVkIHNvIHRoYXQgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIGl0ZW1zIGNhbiBiZSByZXBsYWNlZCB3aXRoIHdpZGdldHMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXHJcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgY29tcG9zaXRlIGxpbmtpbmcgZnVuY3Rpb24gb2YgYWxsIG9mIHRoZSBtYXRjaGVkIGRpcmVjdGl2ZXMgb3IgbnVsbC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY29tcGlsZU5vZGVzKG5vZGVMaXN0LCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcclxuICAgICAgdmFyIGxpbmtGbnMgPSBbXSxcclxuICAgICAgICAgIGF0dHJzLCBkaXJlY3RpdmVzLCBub2RlTGlua0ZuLCBjaGlsZE5vZGVzLCBjaGlsZExpbmtGbiwgbGlua0ZuRm91bmQsIG5vZGVMaW5rRm5Gb3VuZDtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBhdHRycyA9IG5ldyBBdHRyaWJ1dGVzKCk7XHJcblxyXG4gICAgICAgIC8vIHdlIG11c3QgYWx3YXlzIHJlZmVyIHRvIG5vZGVMaXN0W2ldIHNpbmNlIHRoZSBub2RlcyBjYW4gYmUgcmVwbGFjZWQgdW5kZXJuZWF0aCB1cy5cclxuICAgICAgICBkaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMobm9kZUxpc3RbaV0sIFtdLCBhdHRycywgaSA9PT0gMCA/IG1heFByaW9yaXR5IDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlRGlyZWN0aXZlKTtcclxuXHJcbiAgICAgICAgbm9kZUxpbmtGbiA9IChkaXJlY3RpdmVzLmxlbmd0aClcclxuICAgICAgICAgICAgPyBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgbm9kZUxpc3RbaV0sIGF0dHJzLCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLCBbXSwgW10sIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi5zY29wZSkge1xyXG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoYXR0cnMuJCRlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNoaWxkTGlua0ZuID0gKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgIShjaGlsZE5vZGVzID0gbm9kZUxpc3RbaV0uY2hpbGROb2RlcykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICFjaGlsZE5vZGVzLmxlbmd0aClcclxuICAgICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICAgIDogY29tcGlsZU5vZGVzKGNoaWxkTm9kZXMsXHJcbiAgICAgICAgICAgICAgICAgbm9kZUxpbmtGbiA/IChcclxuICAgICAgICAgICAgICAgICAgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgfHwgIW5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAmJiBub2RlTGlua0ZuLnRyYW5zY2x1ZGUpIDogdHJhbnNjbHVkZUZuKTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVMaW5rRm4gfHwgY2hpbGRMaW5rRm4pIHtcclxuICAgICAgICAgIGxpbmtGbnMucHVzaChpLCBub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XHJcbiAgICAgICAgICBsaW5rRm5Gb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICBub2RlTGlua0ZuRm91bmQgPSBub2RlTGlua0ZuRm91bmQgfHwgbm9kZUxpbmtGbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdXNlIHRoZSBwcmV2aW91cyBjb250ZXh0IG9ubHkgZm9yIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSB2aXJ0dWFsIGdyb3VwXHJcbiAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJldHVybiBhIGxpbmtpbmcgZnVuY3Rpb24gaWYgd2UgaGF2ZSBmb3VuZCBhbnl0aGluZywgbnVsbCBvdGhlcndpc2VcclxuICAgICAgcmV0dXJuIGxpbmtGbkZvdW5kID8gY29tcG9zaXRlTGlua0ZuIDogbnVsbDtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbihzY29wZSwgbm9kZUxpc3QsICRyb290RWxlbWVudCwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pIHtcclxuICAgICAgICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGUsIGNoaWxkU2NvcGUsIGksIGlpLCBpZHgsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm47XHJcbiAgICAgICAgdmFyIHN0YWJsZU5vZGVMaXN0O1xyXG5cclxuXHJcbiAgICAgICAgaWYgKG5vZGVMaW5rRm5Gb3VuZCkge1xyXG4gICAgICAgICAgLy8gY29weSBub2RlTGlzdCBzbyB0aGF0IGlmIGEgbm9kZUxpbmtGbiByZW1vdmVzIG9yIGFkZHMgYW4gZWxlbWVudCBhdCB0aGlzIERPTSBsZXZlbCBvdXJcclxuICAgICAgICAgIC8vIG9mZnNldHMgZG9uJ3QgZ2V0IHNjcmV3ZWQgdXBcclxuICAgICAgICAgIHZhciBub2RlTGlzdExlbmd0aCA9IG5vZGVMaXN0Lmxlbmd0aDtcclxuICAgICAgICAgIHN0YWJsZU5vZGVMaXN0ID0gbmV3IEFycmF5KG5vZGVMaXN0TGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAvLyBjcmVhdGUgYSBzcGFyc2UgYXJyYXkgYnkgb25seSBjb3B5aW5nIHRoZSBlbGVtZW50cyB3aGljaCBoYXZlIGEgbGlua0ZuXHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlua0Zucy5sZW5ndGg7IGkrPTMpIHtcclxuICAgICAgICAgICAgaWR4ID0gbGlua0Zuc1tpXTtcclxuICAgICAgICAgICAgc3RhYmxlTm9kZUxpc3RbaWR4XSA9IG5vZGVMaXN0W2lkeF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0YWJsZU5vZGVMaXN0ID0gbm9kZUxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgaWk7KSB7XHJcbiAgICAgICAgICBub2RlID0gc3RhYmxlTm9kZUxpc3RbbGlua0Zuc1tpKytdXTtcclxuICAgICAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XHJcbiAgICAgICAgICBjaGlsZExpbmtGbiA9IGxpbmtGbnNbaSsrXTtcclxuXHJcbiAgICAgICAgICBpZiAobm9kZUxpbmtGbikge1xyXG4gICAgICAgICAgICBpZiAobm9kZUxpbmtGbi5zY29wZSkge1xyXG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZS4kbmV3KCk7XHJcbiAgICAgICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbyhqcUxpdGUobm9kZSksIGNoaWxkU2NvcGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oXHJcbiAgICAgICAgICAgICAgICAgIHNjb3BlLCBub2RlTGlua0ZuLnRyYW5zY2x1ZGUsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLFxyXG4gICAgICAgICAgICAgICAgICBub2RlTGlua0ZuLmVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCAmJiBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXBhcmVudEJvdW5kVHJhbnNjbHVkZUZuICYmIHRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIGNoaWxkU2NvcGUsIG5vZGUsICRyb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XHJcblxyXG4gICAgICAgICAgfSBlbHNlIGlmIChjaGlsZExpbmtGbikge1xyXG4gICAgICAgICAgICBjaGlsZExpbmtGbihzY29wZSwgbm9kZS5jaGlsZE5vZGVzLCB1bmRlZmluZWQsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgdHJhbnNjbHVkZUZuLCBwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuLCBlbGVtZW50VHJhbnNjbHVzaW9uKSB7XHJcblxyXG4gICAgICB2YXIgYm91bmRUcmFuc2NsdWRlRm4gPSBmdW5jdGlvbih0cmFuc2NsdWRlZFNjb3BlLCBjbG9uZUZuLCBjb250cm9sbGVycywgZnV0dXJlUGFyZW50RWxlbWVudCwgY29udGFpbmluZ1Njb3BlKSB7XHJcblxyXG4gICAgICAgIGlmICghdHJhbnNjbHVkZWRTY29wZSkge1xyXG4gICAgICAgICAgdHJhbnNjbHVkZWRTY29wZSA9IHNjb3BlLiRuZXcoZmFsc2UsIGNvbnRhaW5pbmdTY29wZSk7XHJcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlLiQkdHJhbnNjbHVkZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zY2x1ZGVGbih0cmFuc2NsdWRlZFNjb3BlLCBjbG9uZUZuLCB7XHJcbiAgICAgICAgICBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjogcHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbixcclxuICAgICAgICAgIHRyYW5zY2x1ZGVDb250cm9sbGVyczogY29udHJvbGxlcnMsXHJcbiAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50OiBmdXR1cmVQYXJlbnRFbGVtZW50XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gYm91bmRUcmFuc2NsdWRlRm47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rcyBmb3IgZGlyZWN0aXZlcyBvbiB0aGUgZ2l2ZW4gbm9kZSBhbmQgYWRkcyB0aGVtIHRvIHRoZSBkaXJlY3RpdmUgY29sbGVjdGlvbiB3aGljaCBpc1xyXG4gICAgICogc29ydGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBub2RlIE5vZGUgdG8gc2VhcmNoLlxyXG4gICAgICogQHBhcmFtIGRpcmVjdGl2ZXMgQW4gYXJyYXkgdG8gd2hpY2ggdGhlIGRpcmVjdGl2ZXMgYXJlIGFkZGVkIHRvLiBUaGlzIGFycmF5IGlzIHNvcnRlZCBiZWZvcmVcclxuICAgICAqICAgICAgICB0aGUgZnVuY3Rpb24gcmV0dXJucy5cclxuICAgICAqIEBwYXJhbSBhdHRycyBUaGUgc2hhcmVkIGF0dHJzIG9iamVjdCB3aGljaCBpcyB1c2VkIHRvIHBvcHVsYXRlIHRoZSBub3JtYWxpemVkIGF0dHJpYnV0ZXMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNvbGxlY3REaXJlY3RpdmVzKG5vZGUsIGRpcmVjdGl2ZXMsIGF0dHJzLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSB7XHJcbiAgICAgIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGUsXHJcbiAgICAgICAgICBhdHRyc01hcCA9IGF0dHJzLiRhdHRyLFxyXG4gICAgICAgICAgbWF0Y2gsXHJcbiAgICAgICAgICBjbGFzc05hbWU7XHJcblxyXG4gICAgICBzd2l0Y2ggKG5vZGVUeXBlKSB7XHJcbiAgICAgICAgY2FzZSBOT0RFX1RZUEVfRUxFTUVOVDogLyogRWxlbWVudCAqL1xyXG4gICAgICAgICAgLy8gdXNlIHRoZSBub2RlIG5hbWU6IDxkaXJlY3RpdmU+XHJcbiAgICAgICAgICBhZGREaXJlY3RpdmUoZGlyZWN0aXZlcyxcclxuICAgICAgICAgICAgICBkaXJlY3RpdmVOb3JtYWxpemUobm9kZU5hbWVfKG5vZGUpKSwgJ0UnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKTtcclxuXHJcbiAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGF0dHJpYnV0ZXNcclxuICAgICAgICAgIGZvciAodmFyIGF0dHIsIG5hbWUsIG5OYW1lLCBuZ0F0dHJOYW1lLCB2YWx1ZSwgaXNOZ0F0dHIsIG5BdHRycyA9IG5vZGUuYXR0cmlidXRlcyxcclxuICAgICAgICAgICAgICAgICAgIGogPSAwLCBqaiA9IG5BdHRycyAmJiBuQXR0cnMubGVuZ3RoOyBqIDwgamo7IGorKykge1xyXG4gICAgICAgICAgICB2YXIgYXR0clN0YXJ0TmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgYXR0ckVuZE5hbWUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGF0dHIgPSBuQXR0cnNbal07XHJcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyLm5hbWU7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdHJpbShhdHRyLnZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHN1cHBvcnQgbmdBdHRyIGF0dHJpYnV0ZSBiaW5kaW5nXHJcbiAgICAgICAgICAgIG5nQXR0ck5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChpc05nQXR0ciA9IE5HX0FUVFJfQklORElORy50ZXN0KG5nQXR0ck5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShQUkVGSVhfUkVHRVhQLCAnJylcclxuICAgICAgICAgICAgICAgIC5zdWJzdHIoOCkucmVwbGFjZSgvXyguKS9nLCBmdW5jdGlvbihtYXRjaCwgbGV0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlTk5hbWUgPSBuZ0F0dHJOYW1lLnJlcGxhY2UoLyhTdGFydHxFbmQpJC8sICcnKTtcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGl2ZUlzTXVsdGlFbGVtZW50KGRpcmVjdGl2ZU5OYW1lKSkge1xyXG4gICAgICAgICAgICAgIGlmIChuZ0F0dHJOYW1lID09PSBkaXJlY3RpdmVOTmFtZSArICdTdGFydCcpIHtcclxuICAgICAgICAgICAgICAgIGF0dHJTdGFydE5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgYXR0ckVuZE5hbWUgPSBuYW1lLnN1YnN0cigwLCBuYW1lLmxlbmd0aCAtIDUpICsgJ2VuZCc7XHJcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSA2KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGF0dHJzTWFwW25OYW1lXSA9IG5hbWU7XHJcbiAgICAgICAgICAgIGlmIChpc05nQXR0ciB8fCAhYXR0cnMuaGFzT3duUHJvcGVydHkobk5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnZXRCb29sZWFuQXR0ck5hbWUobm9kZSwgbk5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRydWU7IC8vIHByZXNlbmNlIG1lYW5zIHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSwgZGlyZWN0aXZlcywgdmFsdWUsIG5OYW1lLCBpc05nQXR0cik7XHJcbiAgICAgICAgICAgIGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ0EnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBhdHRyU3RhcnROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJFbmROYW1lKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyB1c2UgY2xhc3MgYXMgZGlyZWN0aXZlXHJcbiAgICAgICAgICBjbGFzc05hbWUgPSBub2RlLmNsYXNzTmFtZTtcclxuICAgICAgICAgIGlmIChpc09iamVjdChjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgLy8gTWF5YmUgU1ZHQW5pbWF0ZWRTdHJpbmdcclxuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuYW5pbVZhbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChpc1N0cmluZyhjbGFzc05hbWUpICYmIGNsYXNzTmFtZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgd2hpbGUgKG1hdGNoID0gQ0xBU1NfRElSRUNUSVZFX1JFR0VYUC5leGVjKGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgICBuTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShtYXRjaFsyXSk7XHJcbiAgICAgICAgICAgICAgaWYgKGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ0MnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSkge1xyXG4gICAgICAgICAgICAgICAgYXR0cnNbbk5hbWVdID0gdHJpbShtYXRjaFszXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zdWJzdHIobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIE5PREVfVFlQRV9URVhUOiAvKiBUZXh0IE5vZGUgKi9cclxuICAgICAgICAgIGFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZShkaXJlY3RpdmVzLCBub2RlLm5vZGVWYWx1ZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIE5PREVfVFlQRV9DT01NRU5UOiAvKiBDb21tZW50ICovXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBtYXRjaCA9IENPTU1FTlRfRElSRUNUSVZFX1JFR0VYUC5leGVjKG5vZGUubm9kZVZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobWF0Y2hbMV0pO1xyXG4gICAgICAgICAgICAgIGlmIChhZGREaXJlY3RpdmUoZGlyZWN0aXZlcywgbk5hbWUsICdNJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSkpIHtcclxuICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRyaW0obWF0Y2hbMl0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyB0dXJucyBvdXQgdGhhdCB1bmRlciBzb21lIGNpcmN1bXN0YW5jZXMgSUU5IHRocm93cyBlcnJvcnMgd2hlbiBvbmUgYXR0ZW1wdHMgdG8gcmVhZFxyXG4gICAgICAgICAgICAvLyBjb21tZW50J3Mgbm9kZSB2YWx1ZS5cclxuICAgICAgICAgICAgLy8gSnVzdCBpZ25vcmUgaXQgYW5kIGNvbnRpbnVlLiAoQ2FuJ3Qgc2VlbSB0byByZXByb2R1Y2UgaW4gdGVzdCBjYXNlLilcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkaXJlY3RpdmVzLnNvcnQoYnlQcmlvcml0eSk7XHJcbiAgICAgIHJldHVybiBkaXJlY3RpdmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSBub2RlIHdpdGggYW4gZGlyZWN0aXZlLXN0YXJ0IGl0IGNvbGxlY3RzIGFsbCBvZiB0aGUgc2libGluZ3MgdW50aWwgaXQgZmluZHNcclxuICAgICAqIGRpcmVjdGl2ZS1lbmQuXHJcbiAgICAgKiBAcGFyYW0gbm9kZVxyXG4gICAgICogQHBhcmFtIGF0dHJTdGFydFxyXG4gICAgICogQHBhcmFtIGF0dHJFbmRcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBncm91cFNjYW4obm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XHJcbiAgICAgIHZhciBub2RlcyA9IFtdO1xyXG4gICAgICB2YXIgZGVwdGggPSAwO1xyXG4gICAgICBpZiAoYXR0clN0YXJ0ICYmIG5vZGUuaGFzQXR0cmlidXRlICYmIG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIHtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3V0ZXJkaXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJVbnRlcm1pbmF0ZWQgYXR0cmlidXRlLCBmb3VuZCAnezB9JyBidXQgbm8gbWF0Y2hpbmcgJ3sxfScgZm91bmQuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyU3RhcnQsIGF0dHJFbmQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIGRlcHRoKys7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShhdHRyRW5kKSkgZGVwdGgtLTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcclxuICAgICAgICB9IHdoaWxlIChkZXB0aCA+IDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBqcUxpdGUobm9kZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JhcHBlciBmb3IgbGlua2luZyBmdW5jdGlvbiB3aGljaCBjb252ZXJ0cyBub3JtYWwgbGlua2luZyBmdW5jdGlvbiBpbnRvIGEgZ3JvdXBlZFxyXG4gICAgICogbGlua2luZyBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBsaW5rRm5cclxuICAgICAqIEBwYXJhbSBhdHRyU3RhcnRcclxuICAgICAqIEBwYXJhbSBhdHRyRW5kXHJcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKGxpbmtGbiwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pIHtcclxuICAgICAgICBlbGVtZW50ID0gZ3JvdXBTY2FuKGVsZW1lbnRbMF0sIGF0dHJTdGFydCwgYXR0ckVuZCk7XHJcbiAgICAgICAgcmV0dXJuIGxpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25jZSB0aGUgZGlyZWN0aXZlcyBoYXZlIGJlZW4gY29sbGVjdGVkLCB0aGVpciBjb21waWxlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuIFRoaXMgbWV0aG9kXHJcbiAgICAgKiBpcyByZXNwb25zaWJsZSBmb3IgaW5saW5pbmcgZGlyZWN0aXZlIHRlbXBsYXRlcyBhcyB3ZWxsIGFzIHRlcm1pbmF0aW5nIHRoZSBhcHBsaWNhdGlvblxyXG4gICAgICogb2YgdGhlIGRpcmVjdGl2ZXMgaWYgdGhlIHRlcm1pbmFsIGRpcmVjdGl2ZSBoYXMgYmVlbiByZWFjaGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXMgQXJyYXkgb2YgY29sbGVjdGVkIGRpcmVjdGl2ZXMgdG8gZXhlY3V0ZSB0aGVpciBjb21waWxlIGZ1bmN0aW9uLlxyXG4gICAgICogICAgICAgIHRoaXMgbmVlZHMgdG8gYmUgcHJlLXNvcnRlZCBieSBwcmlvcml0eSBvcmRlci5cclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gY29tcGlsZU5vZGUgVGhlIHJhdyBET00gbm9kZSB0byBhcHBseSB0aGUgY29tcGlsZSBmdW5jdGlvbnMgdG9cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZUF0dHJzIFRoZSBzaGFyZWQgYXR0cmlidXRlIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGFuZ3VsYXIuU2NvcGUsIGNsb25lQXR0YWNoRm49KX0gdHJhbnNjbHVkZUZuIEEgbGlua2luZyBmdW5jdGlvbiwgd2hlcmUgdGhlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUgYXJndW1lbnQgaXMgYXV0by1nZW5lcmF0ZWQgdG8gdGhlIG5ld1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIG9mIHRoZSB0cmFuc2NsdWRlZCBwYXJlbnQgc2NvcGUuXHJcbiAgICAgKiBAcGFyYW0ge0pRTGl0ZX0ganFDb2xsZWN0aW9uIElmIHdlIGFyZSB3b3JraW5nIG9uIHRoZSByb290IG9mIHRoZSBjb21waWxlIHRyZWUgdGhlbiB0aGlzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50IGhhcyB0aGUgcm9vdCBqcUxpdGUgYXJyYXkgc28gdGhhdCB3ZSBjYW4gcmVwbGFjZSBub2Rlc1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiBpdC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gb3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlIEFuIG9wdGlvbmFsIGRpcmVjdGl2ZSB0aGF0IHdpbGwgYmUgaWdub3JlZCB3aGVuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxpbmcgdGhlIHRyYW5zY2x1c2lvbi5cclxuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcHJlTGlua0Zuc1xyXG4gICAgICogQHBhcmFtIHtBcnJheS48RnVuY3Rpb24+fSBwb3N0TGlua0Zuc1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgQ29udGV4dCB1c2VkIGZvciBwcmV2aW91cyBjb21waWxhdGlvbiBvZiB0aGUgY3VycmVudFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBsaW5rRm5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCB0cmFuc2NsdWRlRm4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganFDb2xsZWN0aW9uLCBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUsIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcclxuICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgfHwge307XHJcblxyXG4gICAgICB2YXIgdGVybWluYWxQcmlvcml0eSA9IC1OdW1iZXIuTUFYX1ZBTFVFLFxyXG4gICAgICAgICAgbmV3U2NvcGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQuY29udHJvbGxlckRpcmVjdGl2ZXMsXHJcbiAgICAgICAgICBjb250cm9sbGVycyxcclxuICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0LnRlbXBsYXRlRGlyZWN0aXZlLFxyXG4gICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQubm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSxcclxuICAgICAgICAgIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBmYWxzZSxcclxuICAgICAgICAgIGhhc1RlbXBsYXRlID0gZmFsc2UsXHJcbiAgICAgICAgICBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAkY29tcGlsZU5vZGUgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudCA9IGpxTGl0ZShjb21waWxlTm9kZSksXHJcbiAgICAgICAgICBkaXJlY3RpdmUsXHJcbiAgICAgICAgICBkaXJlY3RpdmVOYW1lLFxyXG4gICAgICAgICAgJHRlbXBsYXRlLFxyXG4gICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSxcclxuICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gdHJhbnNjbHVkZUZuLFxyXG4gICAgICAgICAgbGlua0ZuLFxyXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWU7XHJcblxyXG4gICAgICAvLyBleGVjdXRlcyBhbGwgZGlyZWN0aXZlcyBvbiB0aGUgY3VycmVudCBlbGVtZW50XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XHJcbiAgICAgICAgdmFyIGF0dHJTdGFydCA9IGRpcmVjdGl2ZS4kJHN0YXJ0O1xyXG4gICAgICAgIHZhciBhdHRyRW5kID0gZGlyZWN0aXZlLiQkZW5kO1xyXG5cclxuICAgICAgICAvLyBjb2xsZWN0IG11bHRpYmxvY2sgc2VjdGlvbnNcclxuICAgICAgICBpZiAoYXR0clN0YXJ0KSB7XHJcbiAgICAgICAgICAkY29tcGlsZU5vZGUgPSBncm91cFNjYW4oY29tcGlsZU5vZGUsIGF0dHJTdGFydCwgYXR0ckVuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICR0ZW1wbGF0ZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRlcm1pbmFsUHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpIHtcclxuICAgICAgICAgIGJyZWFrOyAvLyBwcmV2ZW50IGZ1cnRoZXIgcHJvY2Vzc2luZyBvZiBkaXJlY3RpdmVzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUuc2NvcGUpIHtcclxuXHJcbiAgICAgICAgICAvLyBza2lwIHRoZSBjaGVjayBmb3IgZGlyZWN0aXZlcyB3aXRoIGFzeW5jIHRlbXBsYXRlcywgd2UnbGwgY2hlY2sgdGhlIGRlcml2ZWQgc3luY1xyXG4gICAgICAgICAgLy8gZGlyZWN0aXZlIHdoZW4gdGhlIHRlbXBsYXRlIGFycml2ZXNcclxuICAgICAgICAgIGlmICghZGlyZWN0aXZlLnRlbXBsYXRlVXJsKSB7XHJcbiAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmVWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyB0cnlpbmcgdG8gYWRkIGFuIGlzb2xhdGVkIHNjb3BlLlxyXG4gICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlcmUgaXMgbm8gc2NvcGUgb2YgYW55IGtpbmQgYWxyZWFkeVxyXG4gICAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCduZXcvaXNvbGF0ZWQgc2NvcGUnLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHwgbmV3U2NvcGVEaXJlY3RpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyB0cnlpbmcgdG8gYWRkIGEgY2hpbGQgc2NvcGUuXHJcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBpc29sYXRlZCBzY29wZSBhbHJlYWR5XHJcbiAgICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSwgZGlyZWN0aXZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBuZXdTY29wZURpcmVjdGl2ZSA9IG5ld1Njb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmUubmFtZTtcclxuXHJcbiAgICAgICAgaWYgKCFkaXJlY3RpdmUudGVtcGxhdGVVcmwgJiYgZGlyZWN0aXZlLmNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gZGlyZWN0aXZlLmNvbnRyb2xsZXI7XHJcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IGNvbnRyb2xsZXJEaXJlY3RpdmVzIHx8IHt9O1xyXG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoXCInXCIgKyBkaXJlY3RpdmVOYW1lICsgXCInIGNvbnRyb2xsZXJcIixcclxuICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0gPSBkaXJlY3RpdmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUudHJhbnNjbHVkZSkge1xyXG4gICAgICAgICAgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIG5nSWYgYW5kIG5nUmVwZWF0IHNvIHRoYXQgd2UgZG9uJ3QgY29tcGxhaW4gYWJvdXQgZHVwbGljYXRlIHRyYW5zY2x1c2lvbi5cclxuICAgICAgICAgIC8vIFRoaXMgb3B0aW9uIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgZGlyZWN0aXZlcyB0aGF0IGtub3cgaG93IHRvIHNhZmVseSBoYW5kbGUgZWxlbWVudCB0cmFuc2NsdXNpb24sXHJcbiAgICAgICAgICAvLyB3aGVyZSB0aGUgdHJhbnNjbHVkZWQgbm9kZXMgYXJlIGFkZGVkIG9yIHJlcGxhY2VkIGFmdGVyIGxpbmtpbmcuXHJcbiAgICAgICAgICBpZiAoIWRpcmVjdGl2ZS4kJHRsYikge1xyXG4gICAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndHJhbnNjbHVzaW9uJywgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSA9PSAnZWxlbWVudCcpIHtcclxuICAgICAgICAgICAgaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0ZXJtaW5hbFByaW9yaXR5ID0gZGlyZWN0aXZlLnByaW9yaXR5O1xyXG4gICAgICAgICAgICAkdGVtcGxhdGUgPSAkY29tcGlsZU5vZGU7XHJcbiAgICAgICAgICAgICRjb21waWxlTm9kZSA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50ID1cclxuICAgICAgICAgICAgICAgIGpxTGl0ZShkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgJyArIGRpcmVjdGl2ZU5hbWUgKyAnOiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlQXR0cnNbZGlyZWN0aXZlTmFtZV0gKyAnICcpKTtcclxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVbMF07XHJcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgc2xpY2VBcmdzKCR0ZW1wbGF0ZSksIGNvbXBpbGVOb2RlKTtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsZSgkdGVtcGxhdGUsIHRyYW5zY2x1ZGVGbiwgdGVybWluYWxQcmlvcml0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgJiYgcmVwbGFjZURpcmVjdGl2ZS5uYW1lLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHBhc3MgaW46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gY29udHJvbGxlckRpcmVjdGl2ZXMgLSBvdGhlcndpc2Ugd2UnbGwgY3JlYXRlIGR1cGxpY2F0ZXMgY29udHJvbGxlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgb3IgdGVtcGxhdGVEaXJlY3RpdmUgLSBjb21iaW5pbmcgdGVtcGxhdGVzIHdpdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlbGVtZW50IHRyYW5zY2x1c2lvbiBkb2Vzbid0IG1ha2Ugc2Vuc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgb25seSBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlIHNvIHRoYXQgd2UgcHJldmVudCBwdXR0aW5nIHRyYW5zY2x1c2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0aGUgc2FtZSBlbGVtZW50IG1vcmUgdGhhbiBvbmNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOiBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZSA9IGpxTGl0ZShqcUxpdGVDbG9uZShjb21waWxlTm9kZSkpLmNvbnRlbnRzKCk7XHJcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5lbXB0eSgpOyAvLyBjbGVhciBjb250ZW50c1xyXG4gICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IGNvbXBpbGUoJHRlbXBsYXRlLCB0cmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgaGFzVGVtcGxhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RlbXBsYXRlJywgdGVtcGxhdGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcclxuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xyXG5cclxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gKGlzRnVuY3Rpb24oZGlyZWN0aXZlLnRlbXBsYXRlKSlcclxuICAgICAgICAgICAgICA/IGRpcmVjdGl2ZS50ZW1wbGF0ZSgkY29tcGlsZU5vZGUsIHRlbXBsYXRlQXR0cnMpXHJcbiAgICAgICAgICAgICAgOiBkaXJlY3RpdmUudGVtcGxhdGU7XHJcblxyXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGRpcmVjdGl2ZVZhbHVlKTtcclxuXHJcbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcclxuICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgICAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoZGlyZWN0aXZlVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gW107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gcmVtb3ZlQ29tbWVudHMod3JhcFRlbXBsYXRlKGRpcmVjdGl2ZS50ZW1wbGF0ZU5hbWVzcGFjZSwgdHJpbShkaXJlY3RpdmVWYWx1ZSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICR0ZW1wbGF0ZVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9IDEgfHwgY29tcGlsZU5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JyxcclxuICAgICAgICAgICAgICAgICAgXCJUZW1wbGF0ZSBmb3IgZGlyZWN0aXZlICd7MH0nIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfVwiLFxyXG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgJGNvbXBpbGVOb2RlLCBjb21waWxlTm9kZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV3VGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xyXG5cclxuICAgICAgICAgICAgLy8gY29tYmluZSBkaXJlY3RpdmVzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUgYW5kIGZyb20gdGhlIHRlbXBsYXRlOlxyXG4gICAgICAgICAgICAvLyAtIHRha2UgdGhlIGFycmF5IG9mIGRpcmVjdGl2ZXMgZm9yIHRoaXMgZWxlbWVudFxyXG4gICAgICAgICAgICAvLyAtIHNwbGl0IGl0IGludG8gdHdvIHBhcnRzLCB0aG9zZSB0aGF0IGFscmVhZHkgYXBwbGllZCAocHJvY2Vzc2VkKSBhbmQgdGhvc2UgdGhhdCB3ZXJlbid0ICh1bnByb2Nlc3NlZClcclxuICAgICAgICAgICAgLy8gLSBjb2xsZWN0IGRpcmVjdGl2ZXMgZnJvbSB0aGUgdGVtcGxhdGUgYW5kIHNvcnQgdGhlbSBieSBwcmlvcml0eVxyXG4gICAgICAgICAgICAvLyAtIGNvbWJpbmUgZGlyZWN0aXZlcyBhczogcHJvY2Vzc2VkICsgdGVtcGxhdGUgKyB1bnByb2Nlc3NlZFxyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVEaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsIFtdLCBuZXdUZW1wbGF0ZUF0dHJzKTtcclxuICAgICAgICAgICAgdmFyIHVucHJvY2Vzc2VkRGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXMuc3BsaWNlKGkgKyAxLCBkaXJlY3RpdmVzLmxlbmd0aCAtIChpICsgMSkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICAgIG1hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXMuY29uY2F0KHRlbXBsYXRlRGlyZWN0aXZlcykuY29uY2F0KHVucHJvY2Vzc2VkRGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRlbXBsYXRlQXR0cnMsIG5ld1RlbXBsYXRlQXR0cnMpO1xyXG5cclxuICAgICAgICAgICAgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5odG1sKGRpcmVjdGl2ZVZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkaXJlY3RpdmUudGVtcGxhdGVVcmwpIHtcclxuICAgICAgICAgIGhhc1RlbXBsYXRlID0gdHJ1ZTtcclxuICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsIHRlbXBsYXRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuXHJcbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcclxuICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBub2RlTGlua0ZuID0gY29tcGlsZVRlbXBsYXRlVXJsKGRpcmVjdGl2ZXMuc3BsaWNlKGksIGRpcmVjdGl2ZXMubGVuZ3RoIC0gaSksICRjb21waWxlTm9kZSxcclxuICAgICAgICAgICAgICB0ZW1wbGF0ZUF0dHJzLCBqcUNvbGxlY3Rpb24sIGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUgJiYgY2hpbGRUcmFuc2NsdWRlRm4sIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLCB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlczogY29udHJvbGxlckRpcmVjdGl2ZXMsXHJcbiAgICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlOiB0ZW1wbGF0ZURpcmVjdGl2ZSxcclxuICAgICAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmVcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3RpdmUuY29tcGlsZSkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGlua0ZuID0gZGlyZWN0aXZlLmNvbXBpbGUoJGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XHJcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpbmtGbikpIHtcclxuICAgICAgICAgICAgICBhZGRMaW5rRm5zKG51bGwsIGxpbmtGbiwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rRm4pIHtcclxuICAgICAgICAgICAgICBhZGRMaW5rRm5zKGxpbmtGbi5wcmUsIGxpbmtGbi5wb3N0LCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUsIHN0YXJ0aW5nVGFnKCRjb21waWxlTm9kZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZXJtaW5hbCkge1xyXG4gICAgICAgICAgbm9kZUxpbmtGbi50ZXJtaW5hbCA9IHRydWU7XHJcbiAgICAgICAgICB0ZXJtaW5hbFByaW9yaXR5ID0gTWF0aC5tYXgodGVybWluYWxQcmlvcml0eSwgZGlyZWN0aXZlLnByaW9yaXR5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBub2RlTGlua0ZuLnNjb3BlID0gbmV3U2NvcGVEaXJlY3RpdmUgJiYgbmV3U2NvcGVEaXJlY3RpdmUuc2NvcGUgPT09IHRydWU7XHJcbiAgICAgIG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgPSBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlO1xyXG4gICAgICBub2RlTGlua0ZuLmVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudCA9IGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlO1xyXG4gICAgICBub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCA9IGhhc1RlbXBsYXRlO1xyXG4gICAgICBub2RlTGlua0ZuLnRyYW5zY2x1ZGUgPSBjaGlsZFRyYW5zY2x1ZGVGbjtcclxuXHJcbiAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZTtcclxuXHJcbiAgICAgIC8vIG1pZ2h0IGJlIG5vcm1hbCBvciBkZWxheWVkIG5vZGVMaW5rRm4gZGVwZW5kaW5nIG9uIGlmIHRlbXBsYXRlVXJsIGlzIHByZXNlbnRcclxuICAgICAgcmV0dXJuIG5vZGVMaW5rRm47XHJcblxyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgZnVuY3Rpb24gYWRkTGlua0ZucyhwcmUsIHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCkge1xyXG4gICAgICAgIGlmIChwcmUpIHtcclxuICAgICAgICAgIGlmIChhdHRyU3RhcnQpIHByZSA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHByZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcclxuICAgICAgICAgIHByZS5yZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmU7XHJcbiAgICAgICAgICBwcmUuZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5hbWU7XHJcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XHJcbiAgICAgICAgICAgIHByZSA9IGNsb25lQW5kQW5ub3RhdGVGbihwcmUsIHtpc29sYXRlU2NvcGU6IHRydWV9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHByZUxpbmtGbnMucHVzaChwcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocG9zdCkge1xyXG4gICAgICAgICAgaWYgKGF0dHJTdGFydCkgcG9zdCA9IGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCk7XHJcbiAgICAgICAgICBwb3N0LnJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZTtcclxuICAgICAgICAgIHBvc3QuZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5hbWU7XHJcbiAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID09PSBkaXJlY3RpdmUgfHwgZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlKSB7XHJcbiAgICAgICAgICAgIHBvc3QgPSBjbG9uZUFuZEFubm90YXRlRm4ocG9zdCwge2lzb2xhdGVTY29wZTogdHJ1ZX0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcG9zdExpbmtGbnMucHVzaChwb3N0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRDb250cm9sbGVycyhkaXJlY3RpdmVOYW1lLCByZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlLCByZXRyaWV2YWxNZXRob2QgPSAnZGF0YScsIG9wdGlvbmFsID0gZmFsc2U7XHJcbiAgICAgICAgdmFyICRzZWFyY2hFbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIG1hdGNoO1xyXG4gICAgICAgIGlmIChpc1N0cmluZyhyZXF1aXJlKSkge1xyXG4gICAgICAgICAgbWF0Y2ggPSByZXF1aXJlLm1hdGNoKFJFUVVJUkVfUFJFRklYX1JFR0VYUCk7XHJcbiAgICAgICAgICByZXF1aXJlID0gcmVxdWlyZS5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICBpZiAobWF0Y2hbM10pIHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoWzFdKSBtYXRjaFszXSA9IG51bGw7XHJcbiAgICAgICAgICAgIGVsc2UgbWF0Y2hbMV0gPSBtYXRjaFszXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChtYXRjaFsxXSA9PT0gJ14nKSB7XHJcbiAgICAgICAgICAgIHJldHJpZXZhbE1ldGhvZCA9ICdpbmhlcml0ZWREYXRhJztcclxuICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbMV0gPT09ICdeXicpIHtcclxuICAgICAgICAgICAgcmV0cmlldmFsTWV0aG9kID0gJ2luaGVyaXRlZERhdGEnO1xyXG4gICAgICAgICAgICAkc2VhcmNoRWxlbWVudCA9ICRlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG1hdGNoWzJdID09PSAnPycpIHtcclxuICAgICAgICAgICAgb3B0aW9uYWwgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhbHVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBpZiAoZWxlbWVudENvbnRyb2xsZXJzICYmIHJldHJpZXZhbE1ldGhvZCA9PT0gJ2RhdGEnKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9IGVsZW1lbnRDb250cm9sbGVyc1tyZXF1aXJlXSkge1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhbHVlID0gdmFsdWUgfHwgJHNlYXJjaEVsZW1lbnRbcmV0cmlldmFsTWV0aG9kXSgnJCcgKyByZXF1aXJlICsgJ0NvbnRyb2xsZXInKTtcclxuXHJcbiAgICAgICAgICBpZiAoIXZhbHVlICYmICFvcHRpb25hbCkge1xyXG4gICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignY3RyZXEnLFxyXG4gICAgICAgICAgICAgICAgXCJDb250cm9sbGVyICd7MH0nLCByZXF1aXJlZCBieSBkaXJlY3RpdmUgJ3sxfScsIGNhbid0IGJlIGZvdW5kIVwiLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZSwgZGlyZWN0aXZlTmFtZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWUgfHwgbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVxdWlyZSkpIHtcclxuICAgICAgICAgIHZhbHVlID0gW107XHJcbiAgICAgICAgICBmb3JFYWNoKHJlcXVpcmUsIGZ1bmN0aW9uKHJlcXVpcmUpIHtcclxuICAgICAgICAgICAgdmFsdWUucHVzaChnZXRDb250cm9sbGVycyhkaXJlY3RpdmVOYW1lLCByZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgZnVuY3Rpb24gbm9kZUxpbmtGbihjaGlsZExpbmtGbiwgc2NvcGUsIGxpbmtOb2RlLCAkcm9vdEVsZW1lbnQsIGJvdW5kVHJhbnNjbHVkZUZuKSB7XHJcbiAgICAgICAgdmFyIGksIGlpLCBsaW5rRm4sIGNvbnRyb2xsZXIsIGlzb2xhdGVTY29wZSwgZWxlbWVudENvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4sICRlbGVtZW50LFxyXG4gICAgICAgICAgICBhdHRycztcclxuXHJcbiAgICAgICAgaWYgKGNvbXBpbGVOb2RlID09PSBsaW5rTm9kZSkge1xyXG4gICAgICAgICAgYXR0cnMgPSB0ZW1wbGF0ZUF0dHJzO1xyXG4gICAgICAgICAgJGVsZW1lbnQgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJGVsZW1lbnQgPSBqcUxpdGUobGlua05vZGUpO1xyXG4gICAgICAgICAgYXR0cnMgPSBuZXcgQXR0cmlidXRlcygkZWxlbWVudCwgdGVtcGxhdGVBdHRycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICBpc29sYXRlU2NvcGUgPSBzY29wZS4kbmV3KHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGJvdW5kVHJhbnNjbHVkZUZuKSB7XHJcbiAgICAgICAgICAvLyB0cmFjayBgYm91bmRUcmFuc2NsdWRlRm5gIHNvIGl0IGNhbiBiZSB1bndyYXBwZWQgaWYgYHRyYW5zY2x1ZGVGbmBcclxuICAgICAgICAgIC8vIGlzIGxhdGVyIHBhc3NlZCBhcyBgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm5gIHRvIGBwdWJsaWNMaW5rRm5gXHJcbiAgICAgICAgICB0cmFuc2NsdWRlRm4gPSBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZTtcclxuICAgICAgICAgIHRyYW5zY2x1ZGVGbi4kJGJvdW5kVHJhbnNjbHVkZSA9IGJvdW5kVHJhbnNjbHVkZUZuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJEaXJlY3RpdmVzKSB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBtZXJnZSBgY29udHJvbGxlcnNgIGFuZCBgZWxlbWVudENvbnRyb2xsZXJzYCBpbnRvIHNpbmdsZSBvYmplY3QuXHJcbiAgICAgICAgICBjb250cm9sbGVycyA9IHt9O1xyXG4gICAgICAgICAgZWxlbWVudENvbnRyb2xsZXJzID0ge307XHJcbiAgICAgICAgICBmb3JFYWNoKGNvbnRyb2xsZXJEaXJlY3RpdmVzLCBmdW5jdGlvbihkaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2FscyA9IHtcclxuICAgICAgICAgICAgICAkc2NvcGU6IGRpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxyXG4gICAgICAgICAgICAgICRlbGVtZW50OiAkZWxlbWVudCxcclxuICAgICAgICAgICAgICAkYXR0cnM6IGF0dHJzLFxyXG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlRm5cclxuICAgICAgICAgICAgfSwgY29udHJvbGxlckluc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgY29udHJvbGxlciA9IGRpcmVjdGl2ZS5jb250cm9sbGVyO1xyXG4gICAgICAgICAgICBpZiAoY29udHJvbGxlciA9PSAnQCcpIHtcclxuICAgICAgICAgICAgICBjb250cm9sbGVyID0gYXR0cnNbZGlyZWN0aXZlLm5hbWVdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UgPSAkY29udHJvbGxlcihjb250cm9sbGVyLCBsb2NhbHMsIHRydWUsIGRpcmVjdGl2ZS5jb250cm9sbGVyQXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gRm9yIGRpcmVjdGl2ZXMgd2l0aCBlbGVtZW50IHRyYW5zY2x1c2lvbiB0aGUgZWxlbWVudCBpcyBhIGNvbW1lbnQsXHJcbiAgICAgICAgICAgIC8vIGJ1dCBqUXVlcnkgLmRhdGEgZG9lc24ndCBzdXBwb3J0IGF0dGFjaGluZyBkYXRhIHRvIGNvbW1lbnQgbm9kZXMgYXMgaXQncyBoYXJkIHRvXHJcbiAgICAgICAgICAgIC8vIGNsZWFuIHVwIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC84MzM1KS5cclxuICAgICAgICAgICAgLy8gSW5zdGVhZCwgd2Ugc2F2ZSB0aGUgY29udHJvbGxlcnMgZm9yIHRoZSBlbGVtZW50IGluIGEgbG9jYWwgaGFzaCBhbmQgYXR0YWNoIHRvIC5kYXRhXHJcbiAgICAgICAgICAgIC8vIGxhdGVyLCBvbmNlIHdlIGhhdmUgdGhlIGFjdHVhbCBlbGVtZW50LlxyXG4gICAgICAgICAgICBlbGVtZW50Q29udHJvbGxlcnNbZGlyZWN0aXZlLm5hbWVdID0gY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgICAgICBpZiAoIWhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgJGVsZW1lbnQuZGF0YSgnJCcgKyBkaXJlY3RpdmUubmFtZSArICdDb250cm9sbGVyJywgY29udHJvbGxlckluc3RhbmNlLmluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udHJvbGxlcnNbZGlyZWN0aXZlLm5hbWVdID0gY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvKCRlbGVtZW50LCBpc29sYXRlU2NvcGUsIHRydWUsICEodGVtcGxhdGVEaXJlY3RpdmUgJiYgKHRlbXBsYXRlRGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHxcclxuICAgICAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLiQkb3JpZ2luYWxEaXJlY3RpdmUpKSk7XHJcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcygkZWxlbWVudCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgdmFyIGlzb2xhdGVTY29wZUNvbnRyb2xsZXIgPSBjb250cm9sbGVycyAmJiBjb250cm9sbGVyc1tuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUubmFtZV07XHJcbiAgICAgICAgICB2YXIgaXNvbGF0ZUJpbmRpbmdDb250ZXh0ID0gaXNvbGF0ZVNjb3BlO1xyXG4gICAgICAgICAgaWYgKGlzb2xhdGVTY29wZUNvbnRyb2xsZXIgJiYgaXNvbGF0ZVNjb3BlQ29udHJvbGxlci5pZGVudGlmaWVyICYmXHJcbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLmJpbmRUb0NvbnRyb2xsZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgaXNvbGF0ZUJpbmRpbmdDb250ZXh0ID0gaXNvbGF0ZVNjb3BlQ29udHJvbGxlci5pbnN0YW5jZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3JFYWNoKGlzb2xhdGVTY29wZS4kJGlzb2xhdGVCaW5kaW5ncyA9IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncywgZnVuY3Rpb24oZGVmaW5pdGlvbiwgc2NvcGVOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyTmFtZSA9IGRlZmluaXRpb24uYXR0ck5hbWUsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25hbCA9IGRlZmluaXRpb24ub3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICBtb2RlID0gZGVmaW5pdGlvbi5tb2RlLCAvLyBALCA9LCBvciAmXHJcbiAgICAgICAgICAgICAgICBsYXN0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRHZXQsIHBhcmVudFNldCwgY29tcGFyZTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG5cclxuICAgICAgICAgICAgICBjYXNlICdAJzpcclxuICAgICAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKGF0dHJOYW1lLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhdHRycy4kJG9ic2VydmVyc1thdHRyTmFtZV0uJCRzY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHJzW2F0dHJOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBiZWVuIHByb3ZpZGVkIHRoZW4gd2UgdHJpZ2dlciBhbiBpbnRlcnBvbGF0aW9uIHRvIGVuc3VyZVxyXG4gICAgICAgICAgICAgICAgICAvLyB0aGUgdmFsdWUgaXMgdGhlcmUgZm9yIHVzZSBpbiB0aGUgbGluayBmblxyXG4gICAgICAgICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9ICRpbnRlcnBvbGF0ZShhdHRyc1thdHRyTmFtZV0pKHNjb3BlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlICc9JzpcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCAmJiAhYXR0cnNbYXR0ck5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhcmVudEdldCA9ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudEdldC5saXRlcmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBlcXVhbHM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBjb21wYXJlID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSA9PT0gYiB8fCAoYSAhPT0gYSAmJiBiICE9PSBiKTsgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhcmVudFNldCA9IHBhcmVudEdldC5hc3NpZ24gfHwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBjaGFuZ2UsIG9yIHdlIHdpbGwgdGhyb3cgdGhpcyBleGNlcHRpb24gb24gZXZlcnkgJGRpZ2VzdFxyXG4gICAgICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdub25hc3NpZ24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJFeHByZXNzaW9uICd7MH0nIHVzZWQgd2l0aCBkaXJlY3RpdmUgJ3sxfScgaXMgbm9uLWFzc2lnbmFibGUhXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0sIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50VmFsdWVXYXRjaCA9IGZ1bmN0aW9uIHBhcmVudFZhbHVlV2F0Y2gocGFyZW50VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFjb21wYXJlKHBhcmVudFZhbHVlLCBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgb3V0IG9mIHN5bmMgYW5kIG5lZWQgdG8gY29weVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgbGFzdFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gcGFyZW50IGNoYW5nZWQgYW5kIGl0IGhhcyBwcmVjZWRlbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IHBhcmVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcGFyZW50IGNhbiBiZSBhc3NpZ25lZCB0aGVuIGRvIHNvXHJcbiAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRTZXQoc2NvcGUsIHBhcmVudFZhbHVlID0gaXNvbGF0ZUJpbmRpbmdDb250ZXh0W3Njb3BlTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFZhbHVlID0gcGFyZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcGFyZW50VmFsdWVXYXRjaC4kc3RhdGVmdWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVud2F0Y2g7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5jb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGF0dHJzW2F0dHJOYW1lXSwgcGFyZW50VmFsdWVXYXRjaCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB1bndhdGNoID0gc2NvcGUuJHdhdGNoKCRwYXJzZShhdHRyc1thdHRyTmFtZV0sIHBhcmVudFZhbHVlV2F0Y2gpLCBudWxsLCBwYXJlbnRHZXQubGl0ZXJhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpc29sYXRlU2NvcGUuJG9uKCckZGVzdHJveScsIHVud2F0Y2gpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgIGNhc2UgJyYnOlxyXG4gICAgICAgICAgICAgICAgcGFyZW50R2V0ID0gJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7XHJcbiAgICAgICAgICAgICAgICBpc29sYXRlQmluZGluZ0NvbnRleHRbc2NvcGVOYW1lXSA9IGZ1bmN0aW9uKGxvY2Fscykge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50R2V0KHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJzKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKGNvbnRyb2xsZXJzLCBmdW5jdGlvbihjb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgY29udHJvbGxlcnMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUFJFTElOS0lOR1xyXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcHJlTGlua0Zucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICBsaW5rRm4gPSBwcmVMaW5rRm5zW2ldO1xyXG4gICAgICAgICAgaW52b2tlTGlua0ZuKGxpbmtGbixcclxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXHJcbiAgICAgICAgICAgICAgJGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgYXR0cnMsXHJcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcclxuICAgICAgICAgICAgICB0cmFuc2NsdWRlRm5cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSRUNVUlNJT05cclxuICAgICAgICAvLyBXZSBvbmx5IHBhc3MgdGhlIGlzb2xhdGUgc2NvcGUsIGlmIHRoZSBpc29sYXRlIGRpcmVjdGl2ZSBoYXMgYSB0ZW1wbGF0ZSxcclxuICAgICAgICAvLyBvdGhlcndpc2UgdGhlIGNoaWxkIGVsZW1lbnRzIGRvIG5vdCBiZWxvbmcgdG8gdGhlIGlzb2xhdGUgZGlyZWN0aXZlLlxyXG4gICAgICAgIHZhciBzY29wZVRvQ2hpbGQgPSBzY29wZTtcclxuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlICYmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUudGVtcGxhdGUgfHwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlVXJsID09PSBudWxsKSkge1xyXG4gICAgICAgICAgc2NvcGVUb0NoaWxkID0gaXNvbGF0ZVNjb3BlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGlsZExpbmtGbiAmJiBjaGlsZExpbmtGbihzY29wZVRvQ2hpbGQsIGxpbmtOb2RlLmNoaWxkTm9kZXMsIHVuZGVmaW5lZCwgYm91bmRUcmFuc2NsdWRlRm4pO1xyXG5cclxuICAgICAgICAvLyBQT1NUTElOS0lOR1xyXG4gICAgICAgIGZvciAoaSA9IHBvc3RMaW5rRm5zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICBsaW5rRm4gPSBwb3N0TGlua0Zuc1tpXTtcclxuICAgICAgICAgIGludm9rZUxpbmtGbihsaW5rRm4sXHJcbiAgICAgICAgICAgICAgbGlua0ZuLmlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxyXG4gICAgICAgICAgICAgICRlbGVtZW50LFxyXG4gICAgICAgICAgICAgIGF0dHJzLFxyXG4gICAgICAgICAgICAgIGxpbmtGbi5yZXF1aXJlICYmIGdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLCBsaW5rRm4ucmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyksXHJcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCBpcyBpbmplY3RlZCBhcyBgJHRyYW5zY2x1ZGVgLlxyXG4gICAgICAgIC8vIE5vdGU6IGFsbCBhcmd1bWVudHMgYXJlIG9wdGlvbmFsIVxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCBmdXR1cmVQYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICB2YXIgdHJhbnNjbHVkZUNvbnRyb2xsZXJzO1xyXG5cclxuICAgICAgICAgIC8vIE5vIHNjb3BlIHBhc3NlZCBpbjpcclxuICAgICAgICAgIGlmICghaXNTY29wZShzY29wZSkpIHtcclxuICAgICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudCA9IGNsb25lQXR0YWNoRm47XHJcbiAgICAgICAgICAgIGNsb25lQXR0YWNoRm4gPSBzY29wZTtcclxuICAgICAgICAgICAgc2NvcGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGVDb250cm9sbGVycyA9IGVsZW1lbnRDb250cm9sbGVycztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghZnV0dXJlUGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPyAkZWxlbWVudC5wYXJlbnQoKSA6ICRlbGVtZW50O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQsIHNjb3BlVG9DaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUoZGlyZWN0aXZlcykge1xyXG4gICAgICAvLyBtYXJrIGFsbCBkaXJlY3RpdmVzIGFzIG5lZWRpbmcgaXNvbGF0ZSBzY29wZS5cclxuICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZGlyZWN0aXZlcy5sZW5ndGg7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgZGlyZWN0aXZlc1tqXSA9IGluaGVyaXQoZGlyZWN0aXZlc1tqXSwgeyQkaXNvbGF0ZVNjb3BlOiB0cnVlfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGxvb2tzIHVwIHRoZSBkaXJlY3RpdmUgYW5kIGRlY29yYXRlcyBpdCB3aXRoIGV4Y2VwdGlvbiBoYW5kbGluZyBhbmQgcHJvcGVyIHBhcmFtZXRlcnMuIFdlXHJcbiAgICAgKiBjYWxsIHRoaXMgdGhlIGJvdW5kRGlyZWN0aXZlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIFRoZSBkaXJlY3RpdmUgbXVzdCBiZSBmb3VuZCBpbiBzcGVjaWZpYyBmb3JtYXQuXHJcbiAgICAgKiAgIFN0cmluZyBjb250YWluaW5nIGFueSBvZiB0aGVzZXMgY2hhcmFjdGVyczpcclxuICAgICAqXHJcbiAgICAgKiAgICogYEVgOiBlbGVtZW50IG5hbWVcclxuICAgICAqICAgKiBgQSc6IGF0dHJpYnV0ZVxyXG4gICAgICogICAqIGBDYDogY2xhc3NcclxuICAgICAqICAgKiBgTWA6IGNvbW1lbnRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGRpcmVjdGl2ZSB3YXMgYWRkZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFkZERpcmVjdGl2ZSh0RGlyZWN0aXZlcywgbmFtZSwgbG9jYXRpb24sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHN0YXJ0QXR0ck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQXR0ck5hbWUpIHtcclxuICAgICAgaWYgKG5hbWUgPT09IGlnbm9yZURpcmVjdGl2ZSkgcmV0dXJuIG51bGw7XHJcbiAgICAgIHZhciBtYXRjaCA9IG51bGw7XHJcbiAgICAgIGlmIChoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgZm9yICh2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcclxuICAgICAgICAgICAgaSA9IDAsIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBkaXJlY3RpdmUgPSBkaXJlY3RpdmVzW2ldO1xyXG4gICAgICAgICAgICBpZiAoKG1heFByaW9yaXR5ID09PSB1bmRlZmluZWQgfHwgbWF4UHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpICYmXHJcbiAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlc3RyaWN0LmluZGV4T2YobG9jYXRpb24pICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHN0YXJ0QXR0ck5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZSA9IGluaGVyaXQoZGlyZWN0aXZlLCB7JCRzdGFydDogc3RhcnRBdHRyTmFtZSwgJCRlbmQ6IGVuZEF0dHJOYW1lfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHREaXJlY3RpdmVzLnB1c2goZGlyZWN0aXZlKTtcclxuICAgICAgICAgICAgICBtYXRjaCA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZSkgeyAkZXhjZXB0aW9uSGFuZGxlcihlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbWF0Y2g7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbG9va3MgdXAgdGhlIGRpcmVjdGl2ZSBhbmQgcmV0dXJucyB0cnVlIGlmIGl0IGlzIGEgbXVsdGktZWxlbWVudCBkaXJlY3RpdmUsXHJcbiAgICAgKiBhbmQgdGhlcmVmb3JlIHJlcXVpcmVzIERPTSBub2RlcyBiZXR3ZWVuIC1zdGFydCBhbmQgLWVuZCBtYXJrZXJzIHRvIGJlIGdyb3VwZWRcclxuICAgICAqIHRvZ2V0aGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxyXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiBkaXJlY3RpdmUgd2FzIHJlZ2lzdGVyZWQgYXMgbXVsdGktZWxlbWVudC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQobmFtZSkge1xyXG4gICAgICBpZiAoaGFzRGlyZWN0aXZlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGZvciAodmFyIGRpcmVjdGl2ZSwgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQobmFtZSArIFN1ZmZpeCksXHJcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcclxuICAgICAgICAgIGlmIChkaXJlY3RpdmUubXVsdGlFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHRoZSBlbGVtZW50IGlzIHJlcGxhY2VkIHdpdGggSFRNTCB0ZW1wbGF0ZSB0aGVuIHRoZSBuZXcgYXR0cmlidXRlc1xyXG4gICAgICogb24gdGhlIHRlbXBsYXRlIG5lZWQgdG8gYmUgbWVyZ2VkIHdpdGggdGhlIGV4aXN0aW5nIGF0dHJpYnV0ZXMgaW4gdGhlIERPTS5cclxuICAgICAqIFRoZSBkZXNpcmVkIGVmZmVjdCBpcyB0byBoYXZlIGJvdGggb2YgdGhlIGF0dHJpYnV0ZXMgcHJlc2VudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZHN0IGRlc3RpbmF0aW9uIGF0dHJpYnV0ZXMgKG9yaWdpbmFsIERPTSlcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBzcmMgc291cmNlIGF0dHJpYnV0ZXMgKGZyb20gdGhlIGRpcmVjdGl2ZSB0ZW1wbGF0ZSlcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXMoZHN0LCBzcmMpIHtcclxuICAgICAgdmFyIHNyY0F0dHIgPSBzcmMuJGF0dHIsXHJcbiAgICAgICAgICBkc3RBdHRyID0gZHN0LiRhdHRyLFxyXG4gICAgICAgICAgJGVsZW1lbnQgPSBkc3QuJCRlbGVtZW50O1xyXG5cclxuICAgICAgLy8gcmVhcHBseSB0aGUgb2xkIGF0dHJpYnV0ZXMgdG8gdGhlIG5ldyBlbGVtZW50XHJcbiAgICAgIGZvckVhY2goZHN0LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgIT0gJyQnKSB7XHJcbiAgICAgICAgICBpZiAoc3JjW2tleV0gJiYgc3JjW2tleV0gIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlICs9IChrZXkgPT09ICdzdHlsZScgPyAnOycgOiAnICcpICsgc3JjW2tleV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkc3QuJHNldChrZXksIHZhbHVlLCB0cnVlLCBzcmNBdHRyW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBjb3B5IHRoZSBuZXcgYXR0cmlidXRlcyBvbiB0aGUgb2xkIGF0dHJzIG9iamVjdFxyXG4gICAgICBmb3JFYWNoKHNyYywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgIGlmIChrZXkgPT0gJ2NsYXNzJykge1xyXG4gICAgICAgICAgc2FmZUFkZENsYXNzKCRlbGVtZW50LCB2YWx1ZSk7XHJcbiAgICAgICAgICBkc3RbJ2NsYXNzJ10gPSAoZHN0WydjbGFzcyddID8gZHN0WydjbGFzcyddICsgJyAnIDogJycpICsgdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gJ3N0eWxlJykge1xyXG4gICAgICAgICAgJGVsZW1lbnQuYXR0cignc3R5bGUnLCAkZWxlbWVudC5hdHRyKCdzdHlsZScpICsgJzsnICsgdmFsdWUpO1xyXG4gICAgICAgICAgZHN0WydzdHlsZSddID0gKGRzdFsnc3R5bGUnXSA/IGRzdFsnc3R5bGUnXSArICc7JyA6ICcnKSArIHZhbHVlO1xyXG4gICAgICAgICAgLy8gYGRzdGAgd2lsbCBuZXZlciBjb250YWluIGhhc093blByb3BlcnR5IGFzIERPTSBwYXJzZXIgd29uJ3QgbGV0IGl0LlxyXG4gICAgICAgICAgLy8gWW91IHdpbGwgZ2V0IGFuIFwiSW52YWxpZENoYXJhY3RlckVycm9yOiBET00gRXhjZXB0aW9uIDVcIiBlcnJvciBpZiB5b3VcclxuICAgICAgICAgIC8vIGhhdmUgYW4gYXR0cmlidXRlIGxpa2UgXCJoYXMtb3duLXByb3BlcnR5XCIgb3IgXCJkYXRhLWhhcy1vd24tcHJvcGVydHlcIiwgZXRjLlxyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5LmNoYXJBdCgwKSAhPSAnJCcgJiYgIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICBkc3Rba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgZHN0QXR0cltrZXldID0gc3JjQXR0cltrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLCAkY29tcGlsZU5vZGUsIHRBdHRycyxcclxuICAgICAgICAkcm9vdEVsZW1lbnQsIGNoaWxkVHJhbnNjbHVkZUZuLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucywgcHJldmlvdXNDb21waWxlQ29udGV4dCkge1xyXG4gICAgICB2YXIgbGlua1F1ZXVlID0gW10sXHJcbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbixcclxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbixcclxuICAgICAgICAgIGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVbMF0sXHJcbiAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUgPSBkaXJlY3RpdmVzLnNoaWZ0KCksXHJcbiAgICAgICAgICBkZXJpdmVkU3luY0RpcmVjdGl2ZSA9IGluaGVyaXQob3JpZ0FzeW5jRGlyZWN0aXZlLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBudWxsLCB0cmFuc2NsdWRlOiBudWxsLCByZXBsYWNlOiBudWxsLCAkJG9yaWdpbmFsRGlyZWN0aXZlOiBvcmlnQXN5bmNEaXJlY3RpdmVcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmwgPSAoaXNGdW5jdGlvbihvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwpKVxyXG4gICAgICAgICAgICAgID8gb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsKCRjb21waWxlTm9kZSwgdEF0dHJzKVxyXG4gICAgICAgICAgICAgIDogb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsLFxyXG4gICAgICAgICAgdGVtcGxhdGVOYW1lc3BhY2UgPSBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2U7XHJcblxyXG4gICAgICAkY29tcGlsZU5vZGUuZW1wdHkoKTtcclxuXHJcbiAgICAgICR0ZW1wbGF0ZVJlcXVlc3QoJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodGVtcGxhdGVVcmwpKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuICAgICAgICAgIHZhciBjb21waWxlTm9kZSwgdGVtcFRlbXBsYXRlQXR0cnMsICR0ZW1wbGF0ZSwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcclxuXHJcbiAgICAgICAgICBjb250ZW50ID0gZGVub3JtYWxpemVUZW1wbGF0ZShjb250ZW50KTtcclxuXHJcbiAgICAgICAgICBpZiAob3JpZ0FzeW5jRGlyZWN0aXZlLnJlcGxhY2UpIHtcclxuICAgICAgICAgICAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoY29udGVudCkpIHtcclxuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSByZW1vdmVDb21tZW50cyh3cmFwVGVtcGxhdGUodGVtcGxhdGVOYW1lc3BhY2UsIHRyaW0oY29udGVudCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICR0ZW1wbGF0ZVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9IDEgfHwgY29tcGlsZU5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JyxcclxuICAgICAgICAgICAgICAgICAgXCJUZW1wbGF0ZSBmb3IgZGlyZWN0aXZlICd7MH0nIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfVwiLFxyXG4gICAgICAgICAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSwgdGVtcGxhdGVVcmwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0ZW1wVGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xyXG4gICAgICAgICAgICByZXBsYWNlV2l0aCgkcm9vdEVsZW1lbnQsICRjb21waWxlTm9kZSwgY29tcGlsZU5vZGUpO1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVEaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsIFtdLCB0ZW1wVGVtcGxhdGVBdHRycyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNPYmplY3Qob3JpZ0FzeW5jRGlyZWN0aXZlLnNjb3BlKSkge1xyXG4gICAgICAgICAgICAgIG1hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGlyZWN0aXZlcyA9IHRlbXBsYXRlRGlyZWN0aXZlcy5jb25jYXQoZGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRBdHRycywgdGVtcFRlbXBsYXRlQXR0cnMpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlO1xyXG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuaHRtbChjb250ZW50KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBkaXJlY3RpdmVzLnVuc2hpZnQoZGVyaXZlZFN5bmNEaXJlY3RpdmUpO1xyXG5cclxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuID0gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIGNvbXBpbGVOb2RlLCB0QXR0cnMsXHJcbiAgICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4sICRjb21waWxlTm9kZSwgb3JpZ0FzeW5jRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcclxuICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcclxuICAgICAgICAgIGZvckVhY2goJHJvb3RFbGVtZW50LCBmdW5jdGlvbihub2RlLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09IGNvbXBpbGVOb2RlKSB7XHJcbiAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2ldID0gJGNvbXBpbGVOb2RlWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiA9IGNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVbMF0uY2hpbGROb2RlcywgY2hpbGRUcmFuc2NsdWRlRm4pO1xyXG5cclxuICAgICAgICAgIHdoaWxlIChsaW5rUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciBzY29wZSA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxyXG4gICAgICAgICAgICAgICAgbGlua1Jvb3RFbGVtZW50ID0gbGlua1F1ZXVlLnNoaWZ0KCksXHJcbiAgICAgICAgICAgICAgICBib3VuZFRyYW5zY2x1ZGVGbiA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxyXG4gICAgICAgICAgICAgICAgbGlua05vZGUgPSAkY29tcGlsZU5vZGVbMF07XHJcblxyXG4gICAgICAgICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJlZm9yZVRlbXBsYXRlTGlua05vZGUgIT09IGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUpIHtcclxuICAgICAgICAgICAgICB2YXIgb2xkQ2xhc3NlcyA9IGJlZm9yZVRlbXBsYXRlTGlua05vZGUuY2xhc3NOYW1lO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoIShwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlICYmXHJcbiAgICAgICAgICAgICAgICAgIG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNsb25lZCB0aGVyZWZvcmUgd2UgaGF2ZSB0byBjbG9uZSBhcyB3ZWxsLlxyXG4gICAgICAgICAgICAgICAgbGlua05vZGUgPSBqcUxpdGVDbG9uZShjb21waWxlTm9kZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlcGxhY2VXaXRoKGxpbmtSb290RWxlbWVudCwganFMaXRlKGJlZm9yZVRlbXBsYXRlTGlua05vZGUpLCBsaW5rTm9kZSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIENvcHkgaW4gQ1NTIGNsYXNzZXMgZnJvbSBvcmlnaW5hbCBub2RlXHJcbiAgICAgICAgICAgICAgc2FmZUFkZENsYXNzKGpxTGl0ZShsaW5rTm9kZSksIG9sZENsYXNzZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhZnRlclRlbXBsYXRlTm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBib3VuZFRyYW5zY2x1ZGVGbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sIHNjb3BlLCBsaW5rTm9kZSwgJHJvb3RFbGVtZW50LFxyXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGlua1F1ZXVlID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBkZWxheWVkTm9kZUxpbmtGbihpZ25vcmVDaGlsZExpbmtGbiwgc2NvcGUsIG5vZGUsIHJvb3RFbGVtZW50LCBib3VuZFRyYW5zY2x1ZGVGbikge1xyXG4gICAgICAgIHZhciBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gYm91bmRUcmFuc2NsdWRlRm47XHJcbiAgICAgICAgaWYgKHNjb3BlLiQkZGVzdHJveWVkKSByZXR1cm47XHJcbiAgICAgICAgaWYgKGxpbmtRdWV1ZSkge1xyXG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2goc2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgcm9vdEVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4oYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLCBzY29wZSwgbm9kZSwgcm9vdEVsZW1lbnQsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTb3J0aW5nIGZ1bmN0aW9uIGZvciBib3VuZCBkaXJlY3RpdmVzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBieVByaW9yaXR5KGEsIGIpIHtcclxuICAgICAgdmFyIGRpZmYgPSBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcclxuICAgICAgaWYgKGRpZmYgIT09IDApIHJldHVybiBkaWZmO1xyXG4gICAgICBpZiAoYS5uYW1lICE9PSBiLm5hbWUpIHJldHVybiAoYS5uYW1lIDwgYi5uYW1lKSA/IC0xIDogMTtcclxuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBhc3NlcnROb0R1cGxpY2F0ZSh3aGF0LCBwcmV2aW91c0RpcmVjdGl2ZSwgZGlyZWN0aXZlLCBlbGVtZW50KSB7XHJcbiAgICAgIGlmIChwcmV2aW91c0RpcmVjdGl2ZSkge1xyXG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWRpcicsICdNdWx0aXBsZSBkaXJlY3RpdmVzIFt7MH0sIHsxfV0gYXNraW5nIGZvciB7Mn0gb246IHszfScsXHJcbiAgICAgICAgICAgIHByZXZpb3VzRGlyZWN0aXZlLm5hbWUsIGRpcmVjdGl2ZS5uYW1lLCB3aGF0LCBzdGFydGluZ1RhZyhlbGVtZW50KSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIHRleHQpIHtcclxuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodGV4dCwgdHJ1ZSk7XHJcbiAgICAgIGlmIChpbnRlcnBvbGF0ZUZuKSB7XHJcbiAgICAgICAgZGlyZWN0aXZlcy5wdXNoKHtcclxuICAgICAgICAgIHByaW9yaXR5OiAwLFxyXG4gICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gdGV4dEludGVycG9sYXRlQ29tcGlsZUZuKHRlbXBsYXRlTm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVOb2RlUGFyZW50ID0gdGVtcGxhdGVOb2RlLnBhcmVudCgpLFxyXG4gICAgICAgICAgICAgICAgaGFzQ29tcGlsZVBhcmVudCA9ICEhdGVtcGxhdGVOb2RlUGFyZW50Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIC8vIFdoZW4gdHJhbnNjbHVkaW5nIGEgdGVtcGxhdGUgdGhhdCBoYXMgYmluZGluZ3MgaW4gdGhlIHJvb3RcclxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhIHBhcmVudCBhbmQgdGh1cyBuZWVkIHRvIGFkZCB0aGUgY2xhc3MgZHVyaW5nIGxpbmtpbmcgZm4uXHJcbiAgICAgICAgICAgIGlmIChoYXNDb21waWxlUGFyZW50KSBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRlbXBsYXRlTm9kZVBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdGV4dEludGVycG9sYXRlTGlua0ZuKHNjb3BlLCBub2RlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgaWYgKCFoYXNDb21waWxlUGFyZW50KSBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKHBhcmVudCwgaW50ZXJwb2xhdGVGbi5leHByZXNzaW9ucyk7XHJcbiAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGludGVycG9sYXRlRm4sIGZ1bmN0aW9uIGludGVycG9sYXRlRm5XYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZVswXS5ub2RlVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiB3cmFwVGVtcGxhdGUodHlwZSwgdGVtcGxhdGUpIHtcclxuICAgICAgdHlwZSA9IGxvd2VyY2FzZSh0eXBlIHx8ICdodG1sJyk7XHJcbiAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdzdmcnOlxyXG4gICAgICBjYXNlICdtYXRoJzpcclxuICAgICAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gJzwnICsgdHlwZSArICc+JyArIHRlbXBsYXRlICsgJzwvJyArIHR5cGUgKyAnPic7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBwZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUcnVzdGVkQ29udGV4dChub2RlLCBhdHRyTm9ybWFsaXplZE5hbWUpIHtcclxuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcInNyY2RvY1wiKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY2UuSFRNTDtcclxuICAgICAgfVxyXG4gICAgICB2YXIgdGFnID0gbm9kZU5hbWVfKG5vZGUpO1xyXG4gICAgICAvLyBtYWN0aW9uW3hsaW5rOmhyZWZdIGNhbiBzb3VyY2UgU1ZHLiAgSXQncyBub3QgbGltaXRlZCB0byA8bWFjdGlvbj4uXHJcbiAgICAgIGlmIChhdHRyTm9ybWFsaXplZE5hbWUgPT0gXCJ4bGlua0hyZWZcIiB8fFxyXG4gICAgICAgICAgKHRhZyA9PSBcImZvcm1cIiAmJiBhdHRyTm9ybWFsaXplZE5hbWUgPT0gXCJhY3Rpb25cIikgfHxcclxuICAgICAgICAgICh0YWcgIT0gXCJpbWdcIiAmJiAoYXR0ck5vcm1hbGl6ZWROYW1lID09IFwic3JjXCIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJOb3JtYWxpemVkTmFtZSA9PSBcIm5nU3JjXCIpKSkge1xyXG4gICAgICAgIHJldHVybiAkc2NlLlJFU09VUkNFX1VSTDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSwgZGlyZWN0aXZlcywgdmFsdWUsIG5hbWUsIGFsbE9yTm90aGluZykge1xyXG4gICAgICB2YXIgdHJ1c3RlZENvbnRleHQgPSBnZXRUcnVzdGVkQ29udGV4dChub2RlLCBuYW1lKTtcclxuICAgICAgYWxsT3JOb3RoaW5nID0gQUxMX09SX05PVEhJTkdfQVRUUlNbbmFtZV0gfHwgYWxsT3JOb3RoaW5nO1xyXG5cclxuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodmFsdWUsIHRydWUsIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpO1xyXG5cclxuICAgICAgLy8gbm8gaW50ZXJwb2xhdGlvbiBmb3VuZCAtPiBpZ25vcmVcclxuICAgICAgaWYgKCFpbnRlcnBvbGF0ZUZuKSByZXR1cm47XHJcblxyXG5cclxuICAgICAgaWYgKG5hbWUgPT09IFwibXVsdGlwbGVcIiAmJiBub2RlTmFtZV8obm9kZSkgPT09IFwic2VsZWN0XCIpIHtcclxuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycihcInNlbG11bHRpXCIsXHJcbiAgICAgICAgICAgIFwiQmluZGluZyB0byB0aGUgJ211bHRpcGxlJyBhdHRyaWJ1dGUgaXMgbm90IHN1cHBvcnRlZC4gRWxlbWVudDogezB9XCIsXHJcbiAgICAgICAgICAgIHN0YXJ0aW5nVGFnKG5vZGUpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGlyZWN0aXZlcy5wdXNoKHtcclxuICAgICAgICBwcmlvcml0eTogMTAwLFxyXG4gICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIHByZTogZnVuY3Rpb24gYXR0ckludGVycG9sYXRlUHJlTGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJCRvYnNlcnZlcnMgPSAoYXR0ci4kJG9ic2VydmVycyB8fCAoYXR0ci4kJG9ic2VydmVycyA9IHt9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEVWRU5UX0hBTkRMRVJfQVRUUl9SRUdFWFAudGVzdChuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbm9kb21ldmVudHMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJJbnRlcnBvbGF0aW9ucyBmb3IgSFRNTCBET00gZXZlbnQgYXR0cmlidXRlcyBhcmUgZGlzYWxsb3dlZC4gIFBsZWFzZSB1c2UgdGhlIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5nLSB2ZXJzaW9ucyAoc3VjaCBhcyBuZy1jbGljayBpbnN0ZWFkIG9mIG9uY2xpY2spIGluc3RlYWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgaGFzIGNoYW5nZWQgc2luY2UgbGFzdCAkaW50ZXJwb2xhdGUoKWVkXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBhdHRyW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGludGVycG9sYXRlIGFnYWluIHNpbmNlIHRoZSBhdHRyaWJ1dGUgdmFsdWUgaGFzIGJlZW4gdXBkYXRlZFxyXG4gICAgICAgICAgICAgICAgICAvLyAoZS5nLiBieSBhbm90aGVyIGRpcmVjdGl2ZSdzIGNvbXBpbGUgZnVuY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZSB1bnNldC9lbXB0eSB2YWx1ZXMgbWFrZSBpbnRlcnBvbGF0ZUZuIGZhbHN5XHJcbiAgICAgICAgICAgICAgICAgIGludGVycG9sYXRlRm4gPSBuZXdWYWx1ZSAmJiAkaW50ZXJwb2xhdGUobmV3VmFsdWUsIHRydWUsIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpO1xyXG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIGF0dHJpYnV0ZSB3YXMgdXBkYXRlZCBzbyB0aGF0IHRoZXJlIGlzIG5vIGludGVycG9sYXRpb24gZ29pbmcgb24gd2UgZG9uJ3Qgd2FudCB0b1xyXG4gICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgYW55IG9ic2VydmVyc1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnBvbGF0ZUZuKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBhdHRyIG9iamVjdCBzbyB0aGF0IGl0J3MgcmVhZHkgaW4gY2FzZSB3ZSBuZWVkIHRoZSB2YWx1ZSBmb3IgaXNvbGF0ZVxyXG4gICAgICAgICAgICAgICAgLy8gc2NvcGUgaW5pdGlhbGl6YXRpb24sIG90aGVyd2lzZSB0aGUgdmFsdWUgd291bGQgbm90IGJlIGF2YWlsYWJsZSBmcm9tIGlzb2xhdGVcclxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZSdzIGxpbmtpbmcgZm4gZHVyaW5nIGxpbmtpbmcgcGhhc2VcclxuICAgICAgICAgICAgICAgIGF0dHJbbmFtZV0gPSBpbnRlcnBvbGF0ZUZuKHNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAoJCRvYnNlcnZlcnNbbmFtZV0gfHwgKCQkb2JzZXJ2ZXJzW25hbWVdID0gW10pKS4kJGludGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIChhdHRyLiQkb2JzZXJ2ZXJzICYmIGF0dHIuJCRvYnNlcnZlcnNbbmFtZV0uJCRzY29wZSB8fCBzY29wZSkuXHJcbiAgICAgICAgICAgICAgICAgICR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9zcGVjaWFsIGNhc2UgZm9yIGNsYXNzIGF0dHJpYnV0ZSBhZGRpdGlvbiArIHJlbW92YWxcclxuICAgICAgICAgICAgICAgICAgICAvL3NvIHRoYXQgY2xhc3MgY2hhbmdlcyBjYW4gdGFwIGludG8gdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vaG9va3MgcHJvdmlkZWQgYnkgdGhlICRhbmltYXRlIHNlcnZpY2UuIEJlIHN1cmUgdG9cclxuICAgICAgICAgICAgICAgICAgICAvL3NraXAgYW5pbWF0aW9ucyB3aGVuIHRoZSBmaXJzdCBkaWdlc3Qgb2NjdXJzICh3aGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9ib3RoIHRoZSBuZXcgYW5kIHRoZSBvbGQgdmFsdWVzIGFyZSB0aGUgc2FtZSkgc2luY2VcclxuICAgICAgICAgICAgICAgICAgICAvL3RoZSBDU1MgY2xhc3NlcyBhcmUgdGhlIG5vbi1pbnRlcnBvbGF0ZWQgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgbmV3VmFsdWUgIT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGF0dHIuJHVwZGF0ZUNsYXNzKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGF0dHIuJHNldChuYW1lLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaXMgYSBzcGVjaWFsIGpxTGl0ZS5yZXBsYWNlV2l0aCwgd2hpY2ggY2FuIHJlcGxhY2UgaXRlbXMgd2hpY2hcclxuICAgICAqIGhhdmUgbm8gcGFyZW50cywgcHJvdmlkZWQgdGhhdCB0aGUgY29udGFpbmluZyBqcUxpdGUgY29sbGVjdGlvbiBpcyBwcm92aWRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0pxTGl0ZT19ICRyb290RWxlbWVudCBUaGUgcm9vdCBvZiB0aGUgY29tcGlsZSB0cmVlLiBVc2VkIHNvIHRoYXQgd2UgY2FuIHJlcGxhY2Ugbm9kZXNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSByb290IG9mIHRoZSB0cmVlLlxyXG4gICAgICogQHBhcmFtIHtKcUxpdGV9IGVsZW1lbnRzVG9SZW1vdmUgVGhlIGpxTGl0ZSBlbGVtZW50IHdoaWNoIHdlIGFyZSBnb2luZyB0byByZXBsYWNlLiBXZSBrZWVwXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgc2hlbGwsIGJ1dCByZXBsYWNlIGl0cyBET00gbm9kZSByZWZlcmVuY2UuXHJcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5ld05vZGUgVGhlIG5ldyBET00gbm9kZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCBlbGVtZW50c1RvUmVtb3ZlLCBuZXdOb2RlKSB7XHJcbiAgICAgIHZhciBmaXJzdEVsZW1lbnRUb1JlbW92ZSA9IGVsZW1lbnRzVG9SZW1vdmVbMF0sXHJcbiAgICAgICAgICByZW1vdmVDb3VudCA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoLFxyXG4gICAgICAgICAgcGFyZW50ID0gZmlyc3RFbGVtZW50VG9SZW1vdmUucGFyZW50Tm9kZSxcclxuICAgICAgICAgIGksIGlpO1xyXG5cclxuICAgICAgaWYgKCRyb290RWxlbWVudCkge1xyXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gJHJvb3RFbGVtZW50Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgIGlmICgkcm9vdEVsZW1lbnRbaV0gPT0gZmlyc3RFbGVtZW50VG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgJHJvb3RFbGVtZW50W2krK10gPSBuZXdOb2RlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gaSwgajIgPSBqICsgcmVtb3ZlQ291bnQgLSAxLFxyXG4gICAgICAgICAgICAgICAgICAgICBqaiA9ICRyb290RWxlbWVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgaiA8IGpqOyBqKyssIGoyKyspIHtcclxuICAgICAgICAgICAgICBpZiAoajIgPCBqaikge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2pdID0gJHJvb3RFbGVtZW50W2oyXTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlICRyb290RWxlbWVudFtqXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHJvb3RFbGVtZW50Lmxlbmd0aCAtPSByZW1vdmVDb3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVwbGFjZWQgZWxlbWVudCBpcyBhbHNvIHRoZSBqUXVlcnkgLmNvbnRleHQgdGhlbiByZXBsYWNlIGl0XHJcbiAgICAgICAgICAgIC8vIC5jb250ZXh0IGlzIGEgZGVwcmVjYXRlZCBqUXVlcnkgYXBpLCBzbyB3ZSBzaG91bGQgc2V0IGl0IG9ubHkgd2hlbiBqUXVlcnkgc2V0IGl0XHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jb250ZXh0L1xyXG4gICAgICAgICAgICBpZiAoJHJvb3RFbGVtZW50LmNvbnRleHQgPT09IGZpcnN0RWxlbWVudFRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgICAgJHJvb3RFbGVtZW50LmNvbnRleHQgPSBuZXdOb2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgZmlyc3RFbGVtZW50VG9SZW1vdmUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUT0RPKHBlcmYpOiB3aGF0J3MgdGhpcyBkb2N1bWVudCBmcmFnbWVudCBmb3I/IGlzIGl0IG5lZWRlZD8gY2FuIHdlIGF0IGxlYXN0IHJldXNlIGl0P1xyXG4gICAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGZpcnN0RWxlbWVudFRvUmVtb3ZlKTtcclxuXHJcbiAgICAgIC8vIENvcHkgb3ZlciB1c2VyIGRhdGEgKHRoYXQgaW5jbHVkZXMgQW5ndWxhcidzICRzY29wZSBldGMuKS4gRG9uJ3QgY29weSBwcml2YXRlXHJcbiAgICAgIC8vIGRhdGEgaGVyZSBiZWNhdXNlIHRoZXJlJ3Mgbm8gcHVibGljIGludGVyZmFjZSBpbiBqUXVlcnkgdG8gZG8gdGhhdCBhbmQgY29weWluZyBvdmVyXHJcbiAgICAgIC8vIGV2ZW50IGxpc3RlbmVycyAod2hpY2ggaXMgdGhlIG1haW4gdXNlIG9mIHByaXZhdGUgZGF0YSkgd291bGRuJ3Qgd29yayBhbnl3YXkuXHJcbiAgICAgIGpxTGl0ZShuZXdOb2RlKS5kYXRhKGpxTGl0ZShmaXJzdEVsZW1lbnRUb1JlbW92ZSkuZGF0YSgpKTtcclxuXHJcbiAgICAgIC8vIFJlbW92ZSBkYXRhIG9mIHRoZSByZXBsYWNlZCBlbGVtZW50LiBXZSBjYW5ub3QganVzdCBjYWxsIC5yZW1vdmUoKVxyXG4gICAgICAvLyBvbiB0aGUgZWxlbWVudCBpdCBzaW5jZSB0aGF0IHdvdWxkIGRlYWxsb2NhdGUgc2NvcGUgdGhhdCBpcyBuZWVkZWRcclxuICAgICAgLy8gZm9yIHRoZSBuZXcgbm9kZS4gSW5zdGVhZCwgcmVtb3ZlIHRoZSBkYXRhIFwibWFudWFsbHlcIi5cclxuICAgICAgaWYgKCFqUXVlcnkpIHtcclxuICAgICAgICBkZWxldGUganFMaXRlLmNhY2hlW2ZpcnN0RWxlbWVudFRvUmVtb3ZlW2pxTGl0ZS5leHBhbmRvXV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8galF1ZXJ5IDIueCBkb2Vzbid0IGV4cG9zZSB0aGUgZGF0YSBzdG9yYWdlLiBVc2UgalF1ZXJ5LmNsZWFuRGF0YSB0byBjbGVhbiB1cCBhZnRlclxyXG4gICAgICAgIC8vIHRoZSByZXBsYWNlZCBlbGVtZW50LiBUaGUgY2xlYW5EYXRhIHZlcnNpb24gbW9ua2V5LXBhdGNoZWQgYnkgQW5ndWxhciB3b3VsZCBjYXVzZVxyXG4gICAgICAgIC8vIHRoZSBzY29wZSB0byBiZSB0cmFzaGVkIGFuZCB3ZSBkbyBuZWVkIHRoZSB2ZXJ5IHNhbWUgc2NvcGUgdG8gd29yayB3aXRoIHRoZSBuZXdcclxuICAgICAgICAvLyBlbGVtZW50LiBIb3dldmVyLCB3ZSBjYW5ub3QganVzdCBjYWNoZSB0aGUgbm9uLXBhdGNoZWQgdmVyc2lvbiBhbmQgdXNlIGl0IGhlcmUgYXNcclxuICAgICAgICAvLyB0aGF0IHdvdWxkIGJyZWFrIGlmIGFub3RoZXIgbGlicmFyeSBwYXRjaGVzIHRoZSBtZXRob2QgYWZ0ZXIgQW5ndWxhciBkb2VzIChvbmVcclxuICAgICAgICAvLyBleGFtcGxlIGlzIGpRdWVyeSBVSSkuIEluc3RlYWQsIHNldCBhIGZsYWcgaW5kaWNhdGluZyBzY29wZSBkZXN0cm95aW5nIHNob3VsZCBiZVxyXG4gICAgICAgIC8vIHNraXBwZWQgdGhpcyBvbmUgdGltZS5cclxuICAgICAgICBza2lwRGVzdHJveU9uTmV4dEpRdWVyeUNsZWFuRGF0YSA9IHRydWU7XHJcbiAgICAgICAgalF1ZXJ5LmNsZWFuRGF0YShbZmlyc3RFbGVtZW50VG9SZW1vdmVdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgayA9IDEsIGtrID0gZWxlbWVudHNUb1JlbW92ZS5sZW5ndGg7IGsgPCBrazsgaysrKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1RvUmVtb3ZlW2tdO1xyXG4gICAgICAgIGpxTGl0ZShlbGVtZW50KS5yZW1vdmUoKTsgLy8gbXVzdCBkbyB0aGlzIHdheSB0byBjbGVhbiB1cCBleHBhbmRvXHJcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgZGVsZXRlIGVsZW1lbnRzVG9SZW1vdmVba107XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsZW1lbnRzVG9SZW1vdmVbMF0gPSBuZXdOb2RlO1xyXG4gICAgICBlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aCA9IDE7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb25lQW5kQW5ub3RhdGVGbihmbiwgYW5ub3RhdGlvbikge1xyXG4gICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKCkgeyByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfSwgZm4sIGFubm90YXRpb24pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBpbnZva2VMaW5rRm4obGlua0ZuLCBzY29wZSwgJGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVycywgdHJhbnNjbHVkZUZuKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGlua0ZuKHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSwgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1dO1xyXG59XHJcblxyXG52YXIgUFJFRklYX1JFR0VYUCA9IC9eKCg/Onh8ZGF0YSlbXFw6XFwtX10pL2k7XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhbGwgYWNjZXB0ZWQgZGlyZWN0aXZlcyBmb3JtYXQgaW50byBwcm9wZXIgZGlyZWN0aXZlIG5hbWUuXHJcbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXHJcbiAqL1xyXG5mdW5jdGlvbiBkaXJlY3RpdmVOb3JtYWxpemUobmFtZSkge1xyXG4gIHJldHVybiBjYW1lbENhc2UobmFtZS5yZXBsYWNlKFBSRUZJWF9SRUdFWFAsICcnKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgdHlwZVxyXG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlc1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSBzaGFyZWQgb2JqZWN0IGJldHdlZW4gZGlyZWN0aXZlIGNvbXBpbGUgLyBsaW5raW5nIGZ1bmN0aW9ucyB3aGljaCBjb250YWlucyBub3JtYWxpemVkIERPTVxyXG4gKiBlbGVtZW50IGF0dHJpYnV0ZXMuIFRoZSB2YWx1ZXMgcmVmbGVjdCBjdXJyZW50IGJpbmRpbmcgc3RhdGUgYHt7IH19YC4gVGhlIG5vcm1hbGl6YXRpb24gaXNcclxuICogbmVlZGVkIHNpbmNlIGFsbCBvZiB0aGVzZSBhcmUgdHJlYXRlZCBhcyBlcXVpdmFsZW50IGluIEFuZ3VsYXI6XHJcbiAqXHJcbiAqIGBgYFxyXG4gKiAgICA8c3BhbiBuZzpiaW5kPVwiYVwiIG5nLWJpbmQ9XCJhXCIgZGF0YS1uZy1iaW5kPVwiYVwiIHgtbmctYmluZD1cImFcIj5cclxuICogYGBgXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0clxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQSBtYXAgb2YgRE9NIGVsZW1lbnQgYXR0cmlidXRlIG5hbWVzIHRvIHRoZSBub3JtYWxpemVkIG5hbWUuIFRoaXMgaXNcclxuICogbmVlZGVkIHRvIGRvIHJldmVyc2UgbG9va3VwIGZyb20gbm9ybWFsaXplZCBuYW1lIGJhY2sgdG8gYWN0dWFsIG5hbWUuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRzZXRcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNldCBET00gZWxlbWVudCBhdHRyaWJ1dGUgdmFsdWUuXHJcbiAqXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5vcm1hbGl6ZWQgZWxlbWVudCBhdHRyaWJ1dGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gbW9kaWZ5LiBUaGUgbmFtZSBpc1xyXG4gKiAgICAgICAgICByZXZlcnNlLXRyYW5zbGF0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0ciAkYXR0cn1cclxuICogICAgICAgICAgcHJvcGVydHkgdG8gdGhlIG9yaWdpbmFsIG5hbWUuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byBzZXQgdGhlIGF0dHJpYnV0ZSB0by4gVGhlIHZhbHVlIGNhbiBiZSBhbiBpbnRlcnBvbGF0ZWQgc3RyaW5nLlxyXG4gKi9cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIENsb3N1cmUgY29tcGlsZXIgdHlwZSBpbmZvcm1hdGlvblxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIG5vZGVzZXRMaW5raW5nRm4oXHJcbiAgLyogYW5ndWxhci5TY29wZSAqLyBzY29wZSxcclxuICAvKiBOb2RlTGlzdCAqLyBub2RlTGlzdCxcclxuICAvKiBFbGVtZW50ICovIHJvb3RFbGVtZW50LFxyXG4gIC8qIGZ1bmN0aW9uKEZ1bmN0aW9uKSAqLyBib3VuZFRyYW5zY2x1ZGVGblxyXG4pIHt9XHJcblxyXG5mdW5jdGlvbiBkaXJlY3RpdmVMaW5raW5nRm4oXHJcbiAgLyogbm9kZXNldExpbmtpbmdGbiAqLyBub2Rlc2V0TGlua2luZ0ZuLFxyXG4gIC8qIGFuZ3VsYXIuU2NvcGUgKi8gc2NvcGUsXHJcbiAgLyogTm9kZSAqLyBub2RlLFxyXG4gIC8qIEVsZW1lbnQgKi8gcm9vdEVsZW1lbnQsXHJcbiAgLyogZnVuY3Rpb24oRnVuY3Rpb24pICovIGJvdW5kVHJhbnNjbHVkZUZuXHJcbikge31cclxuXHJcbmZ1bmN0aW9uIHRva2VuRGlmZmVyZW5jZShzdHIxLCBzdHIyKSB7XHJcbiAgdmFyIHZhbHVlcyA9ICcnLFxyXG4gICAgICB0b2tlbnMxID0gc3RyMS5zcGxpdCgvXFxzKy8pLFxyXG4gICAgICB0b2tlbnMyID0gc3RyMi5zcGxpdCgvXFxzKy8pO1xyXG5cclxuICBvdXRlcjpcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2VuczEubGVuZ3RoOyBpKyspIHtcclxuICAgIHZhciB0b2tlbiA9IHRva2VuczFbaV07XHJcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRva2VuczIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKHRva2VuID09IHRva2VuczJbal0pIGNvbnRpbnVlIG91dGVyO1xyXG4gICAgfVxyXG4gICAgdmFsdWVzICs9ICh2YWx1ZXMubGVuZ3RoID4gMCA/ICcgJyA6ICcnKSArIHRva2VuO1xyXG4gIH1cclxuICByZXR1cm4gdmFsdWVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVDb21tZW50cyhqcU5vZGVzKSB7XHJcbiAganFOb2RlcyA9IGpxTGl0ZShqcU5vZGVzKTtcclxuICB2YXIgaSA9IGpxTm9kZXMubGVuZ3RoO1xyXG5cclxuICBpZiAoaSA8PSAxKSB7XHJcbiAgICByZXR1cm4ganFOb2RlcztcclxuICB9XHJcblxyXG4gIHdoaWxlIChpLS0pIHtcclxuICAgIHZhciBub2RlID0ganFOb2Rlc1tpXTtcclxuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfQ09NTUVOVCkge1xyXG4gICAgICBzcGxpY2UuY2FsbChqcU5vZGVzLCBpLCAxKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGpxTm9kZXM7XHJcbn1cclxuXHJcbnZhciAkY29udHJvbGxlck1pbkVyciA9IG1pbkVycignJGNvbnRyb2xsZXInKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGNvbnRyb2xsZXJQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIHtAbGluayBuZy4kY29udHJvbGxlciAkY29udHJvbGxlciBzZXJ2aWNlfSBpcyB1c2VkIGJ5IEFuZ3VsYXIgdG8gY3JlYXRlIG5ld1xyXG4gKiBjb250cm9sbGVycy5cclxuICpcclxuICogVGhpcyBwcm92aWRlciBhbGxvd3MgY29udHJvbGxlciByZWdpc3RyYXRpb24gdmlhIHRoZVxyXG4gKiB7QGxpbmsgbmcuJGNvbnRyb2xsZXJQcm92aWRlciNyZWdpc3RlciByZWdpc3Rlcn0gbWV0aG9kLlxyXG4gKi9cclxuZnVuY3Rpb24gJENvbnRyb2xsZXJQcm92aWRlcigpIHtcclxuICB2YXIgY29udHJvbGxlcnMgPSB7fSxcclxuICAgICAgZ2xvYmFscyA9IGZhbHNlLFxyXG4gICAgICBDTlRSTF9SRUcgPSAvXihcXFMrKShcXHMrYXNcXHMrKFxcdyspKT8kLztcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIENvbnRyb2xsZXIgbmFtZSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBjb250cm9sbGVycyB3aGVyZSB0aGUga2V5cyBhcmVcclxuICAgKiAgICB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBjb25zdHJ1Y3RvcnMuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gY29uc3RydWN0b3IgQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmbiAob3B0aW9uYWxseSBkZWNvcmF0ZWQgd2l0aCBESVxyXG4gICAqICAgIGFubm90YXRpb25zIGluIHRoZSBhcnJheSBub3RhdGlvbikuXHJcbiAgICovXHJcbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsIGNvbnN0cnVjdG9yKSB7XHJcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnY29udHJvbGxlcicpO1xyXG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XHJcbiAgICAgIGV4dGVuZChjb250cm9sbGVycywgbmFtZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb250cm9sbGVyc1tuYW1lXSA9IGNvbnN0cnVjdG9yO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFsc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBJZiBjYWxsZWQsIGFsbG93cyBgJGNvbnRyb2xsZXJgIHRvIGZpbmQgY29udHJvbGxlciBjb25zdHJ1Y3RvcnMgb24gYHdpbmRvd2BcclxuICAgKi9cclxuICB0aGlzLmFsbG93R2xvYmFscyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZ2xvYmFscyA9IHRydWU7XHJcbiAgfTtcclxuXHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkaW5qZWN0b3IsICR3aW5kb3cpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgKiBAbmFtZSAkY29udHJvbGxlclxyXG4gICAgICogQHJlcXVpcmVzICRpbmplY3RvclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBjb25zdHJ1Y3RvciBJZiBjYWxsZWQgd2l0aCBhIGZ1bmN0aW9uIHRoZW4gaXQncyBjb25zaWRlcmVkIHRvIGJlIHRoZVxyXG4gICAgICogICAgY29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gT3RoZXJ3aXNlIGl0J3MgY29uc2lkZXJlZCB0byBiZSBhIHN0cmluZyB3aGljaCBpcyB1c2VkXHJcbiAgICAgKiAgICB0byByZXRyaWV2ZSB0aGUgY29udHJvbGxlciBjb25zdHJ1Y3RvciB1c2luZyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxyXG4gICAgICpcclxuICAgICAqICAgICogY2hlY2sgaWYgYSBjb250cm9sbGVyIHdpdGggZ2l2ZW4gbmFtZSBpcyByZWdpc3RlcmVkIHZpYSBgJGNvbnRyb2xsZXJQcm92aWRlcmBcclxuICAgICAqICAgICogY2hlY2sgaWYgZXZhbHVhdGluZyB0aGUgc3RyaW5nIG9uIHRoZSBjdXJyZW50IHNjb3BlIHJldHVybnMgYSBjb25zdHJ1Y3RvclxyXG4gICAgICogICAgKiBpZiAkY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFscywgY2hlY2sgYHdpbmRvd1tjb25zdHJ1Y3Rvcl1gIG9uIHRoZSBnbG9iYWxcclxuICAgICAqICAgICAgYHdpbmRvd2Agb2JqZWN0IChub3QgcmVjb21tZW5kZWQpXHJcbiAgICAgKlxyXG4gICAgICogICAgVGhlIHN0cmluZyBjYW4gdXNlIHRoZSBgY29udHJvbGxlciBhcyBwcm9wZXJ0eWAgc3ludGF4LCB3aGVyZSB0aGUgY29udHJvbGxlciBpbnN0YW5jZSBpcyBwdWJsaXNoZWRcclxuICAgICAqICAgIGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgb24gdGhlIGBzY29wZWA7IHRoZSBgc2NvcGVgIG11c3QgYmUgaW5qZWN0ZWQgaW50byBgbG9jYWxzYCBwYXJhbSBmb3IgdGhpc1xyXG4gICAgICogICAgdG8gd29yayBjb3JyZWN0bHkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxvY2FscyBJbmplY3Rpb24gbG9jYWxzIGZvciBDb250cm9sbGVyLlxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogYCRjb250cm9sbGVyYCBzZXJ2aWNlIGlzIHJlc3BvbnNpYmxlIGZvciBpbnN0YW50aWF0aW5nIGNvbnRyb2xsZXJzLlxyXG4gICAgICpcclxuICAgICAqIEl0J3MganVzdCBhIHNpbXBsZSBjYWxsIHRvIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LCBidXQgZXh0cmFjdGVkIGludG9cclxuICAgICAqIGEgc2VydmljZSwgc28gdGhhdCBvbmUgY2FuIG92ZXJyaWRlIHRoaXMgc2VydmljZSB3aXRoIFtCQyB2ZXJzaW9uXShodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xNjQ5Nzg4KS5cclxuICAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGxvY2FscywgbGF0ZXIsIGlkZW50KSB7XHJcbiAgICAgIC8vIFBSSVZBVEUgQVBJOlxyXG4gICAgICAvLyAgIHBhcmFtIGBsYXRlcmAgLS0tIGluZGljYXRlcyB0aGF0IHRoZSBjb250cm9sbGVyJ3MgY29uc3RydWN0b3IgaXMgaW52b2tlZCBhdCBhIGxhdGVyIHRpbWUuXHJcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgSWYgdHJ1ZSwgJGNvbnRyb2xsZXIgd2lsbCBhbGxvY2F0ZSB0aGUgb2JqZWN0IHdpdGggdGhlIGNvcnJlY3RcclxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwcm90b3R5cGUgY2hhaW4sIGJ1dCB3aWxsIG5vdCBpbnZva2UgdGhlIGNvbnRyb2xsZXIgdW50aWwgYSByZXR1cm5lZFxyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrIGlzIGludm9rZWQuXHJcbiAgICAgIC8vICAgcGFyYW0gYGlkZW50YCAtLS0gQW4gb3B0aW9uYWwgbGFiZWwgd2hpY2ggb3ZlcnJpZGVzIHRoZSBsYWJlbCBwYXJzZWQgZnJvbSB0aGUgY29udHJvbGxlclxyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIGlmIGFueS5cclxuICAgICAgdmFyIGluc3RhbmNlLCBtYXRjaCwgY29uc3RydWN0b3IsIGlkZW50aWZpZXI7XHJcbiAgICAgIGxhdGVyID0gbGF0ZXIgPT09IHRydWU7XHJcbiAgICAgIGlmIChpZGVudCAmJiBpc1N0cmluZyhpZGVudCkpIHtcclxuICAgICAgICBpZGVudGlmaWVyID0gaWRlbnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpc1N0cmluZyhleHByZXNzaW9uKSkge1xyXG4gICAgICAgIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaChDTlRSTF9SRUcpO1xyXG4gICAgICAgIGlmICghbWF0Y2gpIHtcclxuICAgICAgICAgIHRocm93ICRjb250cm9sbGVyTWluRXJyKCdjdHJsZm10JyxcclxuICAgICAgICAgICAgXCJCYWRseSBmb3JtZWQgY29udHJvbGxlciBzdHJpbmcgJ3swfScuIFwiICtcclxuICAgICAgICAgICAgXCJNdXN0IG1hdGNoIGBfX25hbWVfXyBhcyBfX2lkX19gIG9yIGBfX25hbWVfX2AuXCIsIGV4cHJlc3Npb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdHJ1Y3RvciA9IG1hdGNoWzFdLFxyXG4gICAgICAgIGlkZW50aWZpZXIgPSBpZGVudGlmaWVyIHx8IG1hdGNoWzNdO1xyXG4gICAgICAgIGV4cHJlc3Npb24gPSBjb250cm9sbGVycy5oYXNPd25Qcm9wZXJ0eShjb25zdHJ1Y3RvcilcclxuICAgICAgICAgICAgPyBjb250cm9sbGVyc1tjb25zdHJ1Y3Rvcl1cclxuICAgICAgICAgICAgOiBnZXR0ZXIobG9jYWxzLiRzY29wZSwgY29uc3RydWN0b3IsIHRydWUpIHx8XHJcbiAgICAgICAgICAgICAgICAoZ2xvYmFscyA/IGdldHRlcigkd2luZG93LCBjb25zdHJ1Y3RvciwgdHJ1ZSkgOiB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICBhc3NlcnRBcmdGbihleHByZXNzaW9uLCBjb25zdHJ1Y3RvciwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChsYXRlcikge1xyXG4gICAgICAgIC8vIEluc3RhbnRpYXRlIGNvbnRyb2xsZXIgbGF0ZXI6XHJcbiAgICAgICAgLy8gVGhpcyBtYWNoaW5lcnkgaXMgdXNlZCB0byBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIG9iamVjdCBiZWZvcmUgY2FsbGluZyB0aGVcclxuICAgICAgICAvLyBjb250cm9sbGVyJ3MgY29uc3RydWN0b3IgaXRzZWxmLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgcHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgY29udHJvbGxlciBiZWZvcmUgdGhlIGNvbnN0cnVjdG9yIGlzXHJcbiAgICAgICAgLy8gaW52b2tlZC4gUHJpbWFyaWx5LCB0aGlzIGlzIHVzZWQgZm9yIGlzb2xhdGUgc2NvcGUgYmluZGluZ3MgaW4gJGNvbXBpbGUuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBUaGlzIGZlYXR1cmUgaXMgbm90IGludGVuZGVkIGZvciB1c2UgYnkgYXBwbGljYXRpb25zLCBhbmQgaXMgdGh1cyBub3QgZG9jdW1lbnRlZFxyXG4gICAgICAgIC8vIHB1YmxpY2x5LlxyXG4gICAgICAgIC8vIE9iamVjdCBjcmVhdGlvbjogaHR0cDovL2pzcGVyZi5jb20vY3JlYXRlLWNvbnN0cnVjdG9yLzJcclxuICAgICAgICB2YXIgY29udHJvbGxlclByb3RvdHlwZSA9IChpc0FycmF5KGV4cHJlc3Npb24pID9cclxuICAgICAgICAgIGV4cHJlc3Npb25bZXhwcmVzc2lvbi5sZW5ndGggLSAxXSA6IGV4cHJlc3Npb24pLnByb3RvdHlwZTtcclxuICAgICAgICBpbnN0YW5jZSA9IE9iamVjdC5jcmVhdGUoY29udHJvbGxlclByb3RvdHlwZSB8fCBudWxsKTtcclxuXHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcclxuICAgICAgICAgIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgY29uc3RydWN0b3IgfHwgZXhwcmVzc2lvbi5uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkaW5qZWN0b3IuaW52b2tlKGV4cHJlc3Npb24sIGluc3RhbmNlLCBsb2NhbHMsIGNvbnN0cnVjdG9yKTtcclxuICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2UsXHJcbiAgICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGluc3RhbmNlID0gJGluamVjdG9yLmluc3RhbnRpYXRlKGV4cHJlc3Npb24sIGxvY2FscywgY29uc3RydWN0b3IpO1xyXG5cclxuICAgICAgaWYgKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIGNvbnN0cnVjdG9yIHx8IGV4cHJlc3Npb24ubmFtZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBuYW1lKSB7XHJcbiAgICAgIGlmICghKGxvY2FscyAmJiBpc09iamVjdChsb2NhbHMuJHNjb3BlKSkpIHtcclxuICAgICAgICB0aHJvdyBtaW5FcnIoJyRjb250cm9sbGVyJykoJ25vc2NwJyxcclxuICAgICAgICAgIFwiQ2Fubm90IGV4cG9ydCBjb250cm9sbGVyICd7MH0nIGFzICd7MX0nISBObyAkc2NvcGUgb2JqZWN0IHByb3ZpZGVkIHZpYSBgbG9jYWxzYC5cIixcclxuICAgICAgICAgIG5hbWUsIGlkZW50aWZpZXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsb2NhbHMuJHNjb3BlW2lkZW50aWZpZXJdID0gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkZG9jdW1lbnRcclxuICogQHJlcXVpcmVzICR3aW5kb3dcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEEge0BsaW5rIGFuZ3VsYXIuZWxlbWVudCBqUXVlcnkgb3IganFMaXRlfSB3cmFwcGVyIGZvciB0aGUgYnJvd3NlcidzIGB3aW5kb3cuZG9jdW1lbnRgIG9iamVjdC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwiZG9jdW1lbnRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxwPiRkb2N1bWVudCB0aXRsZTogPGIgbmctYmluZD1cInRpdGxlXCI+PC9iPjwvcD5cclxuICAgICAgICAgPHA+d2luZG93LmRvY3VtZW50IHRpdGxlOiA8YiBuZy1iaW5kPVwid2luZG93VGl0bGVcIj48L2I+PC9wPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkb2N1bWVudEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJHNjb3BlLCAkZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAkc2NvcGUudGl0bGUgPSAkZG9jdW1lbnRbMF0udGl0bGU7XHJcbiAgICAgICAgICAgJHNjb3BlLndpbmRvd1RpdGxlID0gYW5ndWxhci5lbGVtZW50KHdpbmRvdy5kb2N1bWVudClbMF0udGl0bGU7XHJcbiAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uICREb2N1bWVudFByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKHdpbmRvdykge1xyXG4gICAgcmV0dXJuIGpxTGl0ZSh3aW5kb3cuZG9jdW1lbnQpO1xyXG4gIH1dO1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJcclxuICogQHJlcXVpcmVzIG5nLiRsb2dcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEFueSB1bmNhdWdodCBleGNlcHRpb24gaW4gYW5ndWxhciBleHByZXNzaW9ucyBpcyBkZWxlZ2F0ZWQgdG8gdGhpcyBzZXJ2aWNlLlxyXG4gKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgZGVsZWdhdGVzIHRvIGAkbG9nLmVycm9yYCB3aGljaCBsb2dzIGl0IGludG9cclxuICogdGhlIGJyb3dzZXIgY29uc29sZS5cclxuICpcclxuICogSW4gdW5pdCB0ZXN0cywgaWYgYGFuZ3VsYXItbW9ja3MuanNgIGlzIGxvYWRlZCwgdGhpcyBzZXJ2aWNlIGlzIG92ZXJyaWRkZW4gYnlcclxuICoge0BsaW5rIG5nTW9jay4kZXhjZXB0aW9uSGFuZGxlciBtb2NrICRleGNlcHRpb25IYW5kbGVyfSB3aGljaCBhaWRzIGluIHRlc3RpbmcuXHJcbiAqXHJcbiAqICMjIEV4YW1wbGU6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgYW5ndWxhci5tb2R1bGUoJ2V4Y2VwdGlvbk92ZXJyaWRlJywgW10pLmZhY3RvcnkoJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICByZXR1cm4gZnVuY3Rpb24oZXhjZXB0aW9uLCBjYXVzZSkge1xyXG4gKiAgICAgICBleGNlcHRpb24ubWVzc2FnZSArPSAnIChjYXVzZWQgYnkgXCInICsgY2F1c2UgKyAnXCIpJztcclxuICogICAgICAgdGhyb3cgZXhjZXB0aW9uO1xyXG4gKiAgICAgfTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIFRoaXMgZXhhbXBsZSB3aWxsIG92ZXJyaWRlIHRoZSBub3JtYWwgYWN0aW9uIG9mIGAkZXhjZXB0aW9uSGFuZGxlcmAsIHRvIG1ha2UgYW5ndWxhclxyXG4gKiBleGNlcHRpb25zIGZhaWwgaGFyZCB3aGVuIHRoZXkgaGFwcGVuLCBpbnN0ZWFkIG9mIGp1c3QgbG9nZ2luZyB0byB0aGUgY29uc29sZS5cclxuICpcclxuICogPGhyIC8+XHJcbiAqIE5vdGUsIHRoYXQgY29kZSBleGVjdXRlZCBpbiBldmVudC1saXN0ZW5lcnMgKGV2ZW4gdGhvc2UgcmVnaXN0ZXJlZCB1c2luZyBqcUxpdGUncyBgb25gL2BiaW5kYFxyXG4gKiBtZXRob2RzKSBkb2VzIG5vdCBkZWxlZ2F0ZSBleGNlcHRpb25zIHRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9XHJcbiAqICh1bmxlc3MgZXhlY3V0ZWQgZHVyaW5nIGEgZGlnZXN0KS5cclxuICpcclxuICogSWYgeW91IHdpc2gsIHlvdSBjYW4gbWFudWFsbHkgZGVsZWdhdGUgZXhjZXB0aW9ucywgZS5nLlxyXG4gKiBgdHJ5IHsgLi4uIH0gY2F0Y2goZSkgeyAkZXhjZXB0aW9uSGFuZGxlcihlKTsgfWBcclxuICpcclxuICogQHBhcmFtIHtFcnJvcn0gZXhjZXB0aW9uIEV4Y2VwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGVycm9yLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IGNhdXNlIG9wdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb250ZXh0IGluIHdoaWNoXHJcbiAqICAgICAgIHRoZSBlcnJvciB3YXMgdGhyb3duLlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRsb2cnLCBmdW5jdGlvbigkbG9nKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZXhjZXB0aW9uLCBjYXVzZSkge1xyXG4gICAgICAkbG9nLmVycm9yLmFwcGx5KCRsb2csIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gIH1dO1xyXG59XHJcblxyXG52YXIgQVBQTElDQVRJT05fSlNPTiA9ICdhcHBsaWNhdGlvbi9qc29uJztcclxudmFyIENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OID0geydDb250ZW50LVR5cGUnOiBBUFBMSUNBVElPTl9KU09OICsgJztjaGFyc2V0PXV0Zi04J307XHJcbnZhciBKU09OX1NUQVJUID0gL15cXFt8Xlxceyg/IVxceykvO1xyXG52YXIgSlNPTl9FTkRTID0ge1xyXG4gICdbJzogL10kLyxcclxuICAneyc6IC99JC9cclxufTtcclxudmFyIEpTT05fUFJPVEVDVElPTl9QUkVGSVggPSAvXlxcKVxcXVxcfScsP1xcbi87XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtKGRhdGEsIGhlYWRlcnMpIHtcclxuICBpZiAoaXNTdHJpbmcoZGF0YSkpIHtcclxuICAgIC8vIFN0cmlwIGpzb24gdnVsbmVyYWJpbGl0eSBwcm90ZWN0aW9uIHByZWZpeCBhbmQgdHJpbSB3aGl0ZXNwYWNlXHJcbiAgICB2YXIgdGVtcERhdGEgPSBkYXRhLnJlcGxhY2UoSlNPTl9QUk9URUNUSU9OX1BSRUZJWCwgJycpLnRyaW0oKTtcclxuXHJcbiAgICBpZiAodGVtcERhdGEpIHtcclxuICAgICAgdmFyIGNvbnRlbnRUeXBlID0gaGVhZGVycygnQ29udGVudC1UeXBlJyk7XHJcbiAgICAgIGlmICgoY29udGVudFR5cGUgJiYgKGNvbnRlbnRUeXBlLmluZGV4T2YoQVBQTElDQVRJT05fSlNPTikgPT09IDApKSB8fCBpc0pzb25MaWtlKHRlbXBEYXRhKSkge1xyXG4gICAgICAgIGRhdGEgPSBmcm9tSnNvbih0ZW1wRGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0pzb25MaWtlKHN0cikge1xyXG4gICAgdmFyIGpzb25TdGFydCA9IHN0ci5tYXRjaChKU09OX1NUQVJUKTtcclxuICAgIHJldHVybiBqc29uU3RhcnQgJiYgSlNPTl9FTkRTW2pzb25TdGFydFswXV0udGVzdChzdHIpO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgaGVhZGVycyBpbnRvIGtleSB2YWx1ZSBvYmplY3RcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGhlYWRlcnMgUmF3IGhlYWRlcnMgYXMgYSBzdHJpbmdcclxuICogQHJldHVybnMge09iamVjdH0gUGFyc2VkIGhlYWRlcnMgYXMga2V5IHZhbHVlIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcclxuICB2YXIgcGFyc2VkID0gY3JlYXRlTWFwKCksIGtleSwgdmFsLCBpO1xyXG5cclxuICBpZiAoIWhlYWRlcnMpIHJldHVybiBwYXJzZWQ7XHJcblxyXG4gIGZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcclxuICAgIGtleSA9IGxvd2VyY2FzZSh0cmltKGxpbmUuc3Vic3RyKDAsIGkpKSk7XHJcbiAgICB2YWwgPSB0cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7XHJcblxyXG4gICAgaWYgKGtleSkge1xyXG4gICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gcGFyc2VkO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBwYXJzZWQgaGVhZGVycy5cclxuICpcclxuICogSGVhZGVycyBhcmUgbGF6eSBwYXJzZWQgd2hlbiBmaXJzdCByZXF1ZXN0ZWQuXHJcbiAqIEBzZWUgcGFyc2VIZWFkZXJzXHJcbiAqXHJcbiAqIEBwYXJhbSB7KHN0cmluZ3xPYmplY3QpfSBoZWFkZXJzIEhlYWRlcnMgdG8gcHJvdmlkZSBhY2Nlc3MgdG8uXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmc9KX0gUmV0dXJucyBhIGdldHRlciBmdW5jdGlvbiB3aGljaCBpZiBjYWxsZWQgd2l0aDpcclxuICpcclxuICogICAtIGlmIGNhbGxlZCB3aXRoIHNpbmdsZSBhbiBhcmd1bWVudCByZXR1cm5zIGEgc2luZ2xlIGhlYWRlciB2YWx1ZSBvciBudWxsXHJcbiAqICAgLSBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgaGVhZGVycy5cclxuICovXHJcbmZ1bmN0aW9uIGhlYWRlcnNHZXR0ZXIoaGVhZGVycykge1xyXG4gIHZhciBoZWFkZXJzT2JqID0gaXNPYmplY3QoaGVhZGVycykgPyBoZWFkZXJzIDogdW5kZWZpbmVkO1xyXG5cclxuICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgaWYgKCFoZWFkZXJzT2JqKSBoZWFkZXJzT2JqID0gIHBhcnNlSGVhZGVycyhoZWFkZXJzKTtcclxuXHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICB2YXIgdmFsdWUgPSBoZWFkZXJzT2JqW2xvd2VyY2FzZShuYW1lKV07XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgdmFsdWUgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGVhZGVyc09iajtcclxuICB9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENoYWluIGFsbCBnaXZlbiBmdW5jdGlvbnNcclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGZvciBib3RoIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWluZ1xyXG4gKlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgRGF0YSB0byB0cmFuc2Zvcm0uXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nPSl9IGhlYWRlcnMgSFRUUCBoZWFkZXJzIGdldHRlciBmbi5cclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXR1cyBIVFRQIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZS5cclxuICogQHBhcmFtIHsoRnVuY3Rpb258QXJyYXkuPEZ1bmN0aW9uPil9IGZucyBGdW5jdGlvbiBvciBhbiBhcnJheSBvZiBmdW5jdGlvbnMuXHJcbiAqIEByZXR1cm5zIHsqfSBUcmFuc2Zvcm1lZCBkYXRhLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBzdGF0dXMsIGZucykge1xyXG4gIGlmIChpc0Z1bmN0aW9uKGZucykpXHJcbiAgICByZXR1cm4gZm5zKGRhdGEsIGhlYWRlcnMsIHN0YXR1cyk7XHJcblxyXG4gIGZvckVhY2goZm5zLCBmdW5jdGlvbihmbikge1xyXG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMsIHN0YXR1cyk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNTdWNjZXNzKHN0YXR1cykge1xyXG4gIHJldHVybiAyMDAgPD0gc3RhdHVzICYmIHN0YXR1cyA8IDMwMDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGh0dHBQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVXNlIGAkaHR0cFByb3ZpZGVyYCB0byBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gc2VydmljZS5cclxuICogKi9cclxuZnVuY3Rpb24gJEh0dHBQcm92aWRlcigpIHtcclxuICAvKipcclxuICAgKiBAbmdkb2MgcHJvcGVydHlcclxuICAgKiBAbmFtZSAkaHR0cFByb3ZpZGVyI2RlZmF1bHRzXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBPYmplY3QgY29udGFpbmluZyBkZWZhdWx0IHZhbHVlcyBmb3IgYWxsIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gcmVxdWVzdHMuXHJcbiAgICpcclxuICAgKiAtICoqYGRlZmF1bHRzLmNhY2hlYCoqIC0ge09iamVjdH0gLSBhbiBvYmplY3QgYnVpbHQgd2l0aCB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9XHJcbiAgICogdGhhdCB3aWxsIHByb3ZpZGUgdGhlIGNhY2hlIGZvciBhbGwgcmVxdWVzdHMgd2hvIHNldCB0aGVpciBgY2FjaGVgIHByb3BlcnR5IHRvIGB0cnVlYC5cclxuICAgKiBJZiB5b3Ugc2V0IHRoZSBgZGVmYXVsdC5jYWNoZSA9IGZhbHNlYCB0aGVuIG9ubHkgcmVxdWVzdHMgdGhhdCBzcGVjaWZ5IHRoZWlyIG93biBjdXN0b21cclxuICAgKiBjYWNoZSBvYmplY3Qgd2lsbCBiZSBjYWNoZWQuIFNlZSB7QGxpbmsgJGh0dHAjY2FjaGluZyAkaHR0cCBDYWNoaW5nfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICAgKlxyXG4gICAqIC0gKipgZGVmYXVsdHMueHNyZkNvb2tpZU5hbWVgKiogLSB7c3RyaW5nfSAtIE5hbWUgb2YgY29va2llIGNvbnRhaW5pbmcgdGhlIFhTUkYgdG9rZW4uXHJcbiAgICogRGVmYXVsdHMgdmFsdWUgaXMgYCdYU1JGLVRPS0VOJ2AuXHJcbiAgICpcclxuICAgKiAtICoqYGRlZmF1bHRzLnhzcmZIZWFkZXJOYW1lYCoqIC0ge3N0cmluZ30gLSBOYW1lIG9mIEhUVFAgaGVhZGVyIHRvIHBvcHVsYXRlIHdpdGggdGhlXHJcbiAgICogWFNSRiB0b2tlbi4gRGVmYXVsdHMgdmFsdWUgaXMgYCdYLVhTUkYtVE9LRU4nYC5cclxuICAgKlxyXG4gICAqIC0gKipgZGVmYXVsdHMuaGVhZGVyc2AqKiAtIHtPYmplY3R9IC0gRGVmYXVsdCBoZWFkZXJzIGZvciBhbGwgJGh0dHAgcmVxdWVzdHMuXHJcbiAgICogUmVmZXIgdG8ge0BsaW5rIG5nLiRodHRwI3NldHRpbmctaHR0cC1oZWFkZXJzICRodHRwfSBmb3IgZG9jdW1lbnRhdGlvbiBvblxyXG4gICAqIHNldHRpbmcgZGVmYXVsdCBoZWFkZXJzLlxyXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMuY29tbW9uYCoqXHJcbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5wb3N0YCoqXHJcbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5wdXRgKipcclxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnBhdGNoYCoqXHJcbiAgICpcclxuICAgKiovXHJcbiAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcclxuICAgIC8vIHRyYW5zZm9ybSBpbmNvbWluZyByZXNwb25zZSBkYXRhXHJcbiAgICB0cmFuc2Zvcm1SZXNwb25zZTogW2RlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm1dLFxyXG5cclxuICAgIC8vIHRyYW5zZm9ybSBvdXRnb2luZyByZXF1ZXN0IGRhdGFcclxuICAgIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbihkKSB7XHJcbiAgICAgIHJldHVybiBpc09iamVjdChkKSAmJiAhaXNGaWxlKGQpICYmICFpc0Jsb2IoZCkgJiYgIWlzRm9ybURhdGEoZCkgPyB0b0pzb24oZCkgOiBkO1xyXG4gICAgfV0sXHJcblxyXG4gICAgLy8gZGVmYXVsdCBoZWFkZXJzXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGNvbW1vbjoge1xyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xyXG4gICAgICB9LFxyXG4gICAgICBwb3N0OiAgIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKSxcclxuICAgICAgcHV0OiAgICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXHJcbiAgICAgIHBhdGNoOiAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pXHJcbiAgICB9LFxyXG5cclxuICAgIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXHJcbiAgICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTidcclxuICB9O1xyXG5cclxuICB2YXIgdXNlQXBwbHlBc3luYyA9IGZhbHNlO1xyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkaHR0cFByb3ZpZGVyI3VzZUFwcGx5QXN5bmNcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIENvbmZpZ3VyZSAkaHR0cCBzZXJ2aWNlIHRvIGNvbWJpbmUgcHJvY2Vzc2luZyBvZiBtdWx0aXBsZSBodHRwIHJlc3BvbnNlcyByZWNlaXZlZCBhdCBhcm91bmRcclxuICAgKiB0aGUgc2FtZSB0aW1lIHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luYyAkcm9vdFNjb3BlLiRhcHBseUFzeW5jfS4gVGhpcyBjYW4gcmVzdWx0IGluXHJcbiAgICogc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnQgZm9yIGJpZ2dlciBhcHBsaWNhdGlvbnMgdGhhdCBtYWtlIG1hbnkgSFRUUCByZXF1ZXN0c1xyXG4gICAqIGNvbmN1cnJlbnRseSAoY29tbW9uIGR1cmluZyBhcHBsaWNhdGlvbiBib290c3RyYXApLlxyXG4gICAqXHJcbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuIElmIG5vIHZhbHVlIGlzIHNwZWNpZmVkLCByZXR1cm5zIHRoZSBjdXJyZW50IGNvbmZpZ3VyZWQgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiB0cnVlLCB3aGVuIHJlcXVlc3RzIGFyZSBsb2FkZWQsIHRoZXkgd2lsbCBzY2hlZHVsZSBhIGRlZmVycmVkXHJcbiAgICogICAgXCJhcHBseVwiIG9uIHRoZSBuZXh0IHRpY2ssIGdpdmluZyB0aW1lIGZvciBzdWJzZXF1ZW50IHJlcXVlc3RzIGluIGEgcm91Z2hseSB+MTBtcyB3aW5kb3dcclxuICAgKiAgICB0byBsb2FkIGFuZCBzaGFyZSB0aGUgc2FtZSBkaWdlc3QgY3ljbGUuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxPYmplY3R9IElmIGEgdmFsdWUgaXMgc3BlY2lmaWVkLCByZXR1cm5zIHRoZSAkaHR0cFByb3ZpZGVyIGZvciBjaGFpbmluZy5cclxuICAgKiAgICBvdGhlcndpc2UsIHJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJlZCB2YWx1ZS5cclxuICAgKiovXHJcbiAgdGhpcy51c2VBcHBseUFzeW5jID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgIHVzZUFwcGx5QXN5bmMgPSAhIXZhbHVlO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VBcHBseUFzeW5jO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjaW50ZXJjZXB0b3JzXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBBcnJheSBjb250YWluaW5nIHNlcnZpY2UgZmFjdG9yaWVzIGZvciBhbGwgc3luY2hyb25vdXMgb3IgYXN5bmNocm9ub3VzIHtAbGluayBuZy4kaHR0cCAkaHR0cH1cclxuICAgKiBwcmUtcHJvY2Vzc2luZyBvZiByZXF1ZXN0IG9yIHBvc3Rwcm9jZXNzaW5nIG9mIHJlc3BvbnNlcy5cclxuICAgKlxyXG4gICAqIFRoZXNlIHNlcnZpY2UgZmFjdG9yaWVzIGFyZSBvcmRlcmVkIGJ5IHJlcXVlc3QsIGkuZS4gdGhleSBhcmUgYXBwbGllZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcclxuICAgKiBhcnJheSwgb24gcmVxdWVzdCwgYnV0IHJldmVyc2Ugb3JkZXIsIG9uIHJlc3BvbnNlLlxyXG4gICAqXHJcbiAgICoge0BsaW5rIG5nLiRodHRwI2ludGVyY2VwdG9ycyBJbnRlcmNlcHRvcnMgZGV0YWlsZWQgaW5mb31cclxuICAgKiovXHJcbiAgdmFyIGludGVyY2VwdG9yRmFjdG9yaWVzID0gdGhpcy5pbnRlcmNlcHRvcnMgPSBbXTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckaHR0cEJhY2tlbmQnLCAnJGJyb3dzZXInLCAnJGNhY2hlRmFjdG9yeScsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbmplY3RvcicsXHJcbiAgICAgIGZ1bmN0aW9uKCRodHRwQmFja2VuZCwgJGJyb3dzZXIsICRjYWNoZUZhY3RvcnksICRyb290U2NvcGUsICRxLCAkaW5qZWN0b3IpIHtcclxuXHJcbiAgICB2YXIgZGVmYXVsdENhY2hlID0gJGNhY2hlRmFjdG9yeSgnJGh0dHAnKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEludGVyY2VwdG9ycyBzdG9yZWQgaW4gcmV2ZXJzZSBvcmRlci4gSW5uZXIgaW50ZXJjZXB0b3JzIGJlZm9yZSBvdXRlciBpbnRlcmNlcHRvcnMuXHJcbiAgICAgKiBUaGUgcmV2ZXJzYWwgaXMgbmVlZGVkIHNvIHRoYXQgd2UgY2FuIGJ1aWxkIHVwIHRoZSBpbnRlcmNlcHRpb24gY2hhaW4gYXJvdW5kIHRoZVxyXG4gICAgICogc2VydmVyIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHZhciByZXZlcnNlZEludGVyY2VwdG9ycyA9IFtdO1xyXG5cclxuICAgIGZvckVhY2goaW50ZXJjZXB0b3JGYWN0b3JpZXMsIGZ1bmN0aW9uKGludGVyY2VwdG9yRmFjdG9yeSkge1xyXG4gICAgICByZXZlcnNlZEludGVyY2VwdG9ycy51bnNoaWZ0KGlzU3RyaW5nKGludGVyY2VwdG9yRmFjdG9yeSlcclxuICAgICAgICAgID8gJGluamVjdG9yLmdldChpbnRlcmNlcHRvckZhY3RvcnkpIDogJGluamVjdG9yLmludm9rZShpbnRlcmNlcHRvckZhY3RvcnkpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgKiBAbmFtZSAkaHR0cFxyXG4gICAgICogQHJlcXVpcmVzIG5nLiRodHRwQmFja2VuZFxyXG4gICAgICogQHJlcXVpcmVzICRjYWNoZUZhY3RvcnlcclxuICAgICAqIEByZXF1aXJlcyAkcm9vdFNjb3BlXHJcbiAgICAgKiBAcmVxdWlyZXMgJHFcclxuICAgICAqIEByZXF1aXJlcyAkaW5qZWN0b3JcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFRoZSBgJGh0dHBgIHNlcnZpY2UgaXMgYSBjb3JlIEFuZ3VsYXIgc2VydmljZSB0aGF0IGZhY2lsaXRhdGVzIGNvbW11bmljYXRpb24gd2l0aCB0aGUgcmVtb3RlXHJcbiAgICAgKiBIVFRQIHNlcnZlcnMgdmlhIHRoZSBicm93c2VyJ3MgW1hNTEh0dHBSZXF1ZXN0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi94bWxodHRwcmVxdWVzdClcclxuICAgICAqIG9iamVjdCBvciB2aWEgW0pTT05QXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0pTT05QKS5cclxuICAgICAqXHJcbiAgICAgKiBGb3IgdW5pdCB0ZXN0aW5nIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSBgJGh0dHBgIHNlcnZpY2UsIHNlZVxyXG4gICAgICoge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxyXG4gICAgICpcclxuICAgICAqIEZvciBhIGhpZ2hlciBsZXZlbCBvZiBhYnN0cmFjdGlvbiwgcGxlYXNlIGNoZWNrIG91dCB0aGUge0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlXHJcbiAgICAgKiAkcmVzb3VyY2V9IHNlcnZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogVGhlICRodHRwIEFQSSBpcyBiYXNlZCBvbiB0aGUge0BsaW5rIG5nLiRxIGRlZmVycmVkL3Byb21pc2UgQVBJc30gZXhwb3NlZCBieVxyXG4gICAgICogdGhlICRxIHNlcnZpY2UuIFdoaWxlIGZvciBzaW1wbGUgdXNhZ2UgcGF0dGVybnMgdGhpcyBkb2Vzbid0IG1hdHRlciBtdWNoLCBmb3IgYWR2YW5jZWQgdXNhZ2VcclxuICAgICAqIGl0IGlzIGltcG9ydGFudCB0byBmYW1pbGlhcml6ZSB5b3Vyc2VsZiB3aXRoIHRoZXNlIEFQSXMgYW5kIHRoZSBndWFyYW50ZWVzIHRoZXkgcHJvdmlkZS5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogIyMgR2VuZXJhbCB1c2FnZVxyXG4gICAgICogVGhlIGAkaHR0cGAgc2VydmljZSBpcyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGEgc2luZ2xlIGFyZ3VtZW50IOKAlCBhIGNvbmZpZ3VyYXRpb24gb2JqZWN0IOKAlFxyXG4gICAgICogdGhhdCBpcyB1c2VkIHRvIGdlbmVyYXRlIGFuIEhUVFAgcmVxdWVzdCBhbmQgcmV0dXJucyAgYSB7QGxpbmsgbmcuJHEgcHJvbWlzZX1cclxuICAgICAqIHdpdGggdHdvICRodHRwIHNwZWNpZmljIG1ldGhvZHM6IGBzdWNjZXNzYCBhbmQgYGVycm9yYC5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICAvLyBTaW1wbGUgR0VUIHJlcXVlc3QgZXhhbXBsZSA6XHJcbiAgICAgKiAgICRodHRwLmdldCgnL3NvbWVVcmwnKS5cclxuICAgICAqICAgICBzdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XHJcbiAgICAgKiAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgKiAgICAgICAvLyB3aGVuIHRoZSByZXNwb25zZSBpcyBhdmFpbGFibGVcclxuICAgICAqICAgICB9KS5cclxuICAgICAqICAgICBlcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xyXG4gICAgICogICAgICAgLy8gY2FsbGVkIGFzeW5jaHJvbm91c2x5IGlmIGFuIGVycm9yIG9jY3Vyc1xyXG4gICAgICogICAgICAgLy8gb3Igc2VydmVyIHJldHVybnMgcmVzcG9uc2Ugd2l0aCBhbiBlcnJvciBzdGF0dXMuXHJcbiAgICAgKiAgICAgfSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICAvLyBTaW1wbGUgUE9TVCByZXF1ZXN0IGV4YW1wbGUgKHBhc3NpbmcgZGF0YSkgOlxyXG4gICAgICogICAkaHR0cC5wb3N0KCcvc29tZVVybCcsIHttc2c6J2hlbGxvIHdvcmQhJ30pLlxyXG4gICAgICogICAgIHN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcclxuICAgICAqICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHlcclxuICAgICAqICAgICAgIC8vIHdoZW4gdGhlIHJlc3BvbnNlIGlzIGF2YWlsYWJsZVxyXG4gICAgICogICAgIH0pLlxyXG4gICAgICogICAgIGVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XHJcbiAgICAgKiAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXHJcbiAgICAgKiAgICAgICAvLyBvciBzZXJ2ZXIgcmV0dXJucyByZXNwb25zZSB3aXRoIGFuIGVycm9yIHN0YXR1cy5cclxuICAgICAqICAgICB9KTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBTaW5jZSB0aGUgcmV0dXJuZWQgdmFsdWUgb2YgY2FsbGluZyB0aGUgJGh0dHAgZnVuY3Rpb24gaXMgYSBgcHJvbWlzZWAsIHlvdSBjYW4gYWxzbyB1c2VcclxuICAgICAqIHRoZSBgdGhlbmAgbWV0aG9kIHRvIHJlZ2lzdGVyIGNhbGxiYWNrcywgYW5kIHRoZXNlIGNhbGxiYWNrcyB3aWxsIHJlY2VpdmUgYSBzaW5nbGUgYXJndW1lbnQg4oCTXHJcbiAgICAgKiBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSByZXNwb25zZS4gU2VlIHRoZSBBUEkgc2lnbmF0dXJlIGFuZCB0eXBlIGluZm8gYmVsb3cgZm9yIG1vcmVcclxuICAgICAqIGRldGFpbHMuXHJcbiAgICAgKlxyXG4gICAgICogQSByZXNwb25zZSBzdGF0dXMgY29kZSBiZXR3ZWVuIDIwMCBhbmQgMjk5IGlzIGNvbnNpZGVyZWQgYSBzdWNjZXNzIHN0YXR1cyBhbmRcclxuICAgICAqIHdpbGwgcmVzdWx0IGluIHRoZSBzdWNjZXNzIGNhbGxiYWNrIGJlaW5nIGNhbGxlZC4gTm90ZSB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhIHJlZGlyZWN0LFxyXG4gICAgICogWE1MSHR0cFJlcXVlc3Qgd2lsbCB0cmFuc3BhcmVudGx5IGZvbGxvdyBpdCwgbWVhbmluZyB0aGF0IHRoZSBlcnJvciBjYWxsYmFjayB3aWxsIG5vdCBiZVxyXG4gICAgICogY2FsbGVkIGZvciBzdWNoIHJlc3BvbnNlcy5cclxuICAgICAqXHJcbiAgICAgKiAjIyBXcml0aW5nIFVuaXQgVGVzdHMgdGhhdCB1c2UgJGh0dHBcclxuICAgICAqIFdoZW4gdW5pdCB0ZXN0aW5nICh1c2luZyB7QGxpbmsgbmdNb2NrIG5nTW9ja30pLCBpdCBpcyBuZWNlc3NhcnkgdG8gY2FsbFxyXG4gICAgICoge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQjZmx1c2ggJGh0dHBCYWNrZW5kLmZsdXNoKCl9IHRvIGZsdXNoIGVhY2ggcGVuZGluZ1xyXG4gICAgICogcmVxdWVzdCB1c2luZyB0cmFpbmVkIHJlc3BvbnNlcy5cclxuICAgICAqXHJcbiAgICAgKiBgYGBcclxuICAgICAqICRodHRwQmFja2VuZC5leHBlY3RHRVQoLi4uKTtcclxuICAgICAqICRodHRwLmdldCguLi4pO1xyXG4gICAgICogJGh0dHBCYWNrZW5kLmZsdXNoKCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIyBTaG9ydGN1dCBtZXRob2RzXHJcbiAgICAgKlxyXG4gICAgICogU2hvcnRjdXQgbWV0aG9kcyBhcmUgYWxzbyBhdmFpbGFibGUuIEFsbCBzaG9ydGN1dCBtZXRob2RzIHJlcXVpcmUgcGFzc2luZyBpbiB0aGUgVVJMLCBhbmRcclxuICAgICAqIHJlcXVlc3QgZGF0YSBtdXN0IGJlIHBhc3NlZCBpbiBmb3IgUE9TVC9QVVQgcmVxdWVzdHMuXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqICAgJGh0dHAuZ2V0KCcvc29tZVVybCcpLnN1Y2Nlc3Moc3VjY2Vzc0NhbGxiYWNrKTtcclxuICAgICAqICAgJGh0dHAucG9zdCgnL3NvbWVVcmwnLCBkYXRhKS5zdWNjZXNzKHN1Y2Nlc3NDYWxsYmFjayk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBDb21wbGV0ZSBsaXN0IG9mIHNob3J0Y3V0IG1ldGhvZHM6XHJcbiAgICAgKlxyXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjZ2V0ICRodHRwLmdldH1cclxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2hlYWQgJGh0dHAuaGVhZH1cclxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3Bvc3QgJGh0dHAucG9zdH1cclxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3B1dCAkaHR0cC5wdXR9XHJcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNkZWxldGUgJGh0dHAuZGVsZXRlfVxyXG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjanNvbnAgJGh0dHAuanNvbnB9XHJcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwYXRjaCAkaHR0cC5wYXRjaH1cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogIyMgU2V0dGluZyBIVFRQIEhlYWRlcnNcclxuICAgICAqXHJcbiAgICAgKiBUaGUgJGh0dHAgc2VydmljZSB3aWxsIGF1dG9tYXRpY2FsbHkgYWRkIGNlcnRhaW4gSFRUUCBoZWFkZXJzIHRvIGFsbCByZXF1ZXN0cy4gVGhlc2UgZGVmYXVsdHNcclxuICAgICAqIGNhbiBiZSBmdWxseSBjb25maWd1cmVkIGJ5IGFjY2Vzc2luZyB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVyc2AgY29uZmlndXJhdGlvblxyXG4gICAgICogb2JqZWN0LCB3aGljaCBjdXJyZW50bHkgY29udGFpbnMgdGhpcyBkZWZhdWx0IGNvbmZpZ3VyYXRpb246XHJcbiAgICAgKlxyXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbmAgKGhlYWRlcnMgdGhhdCBhcmUgY29tbW9uIGZvciBhbGwgcmVxdWVzdHMpOlxyXG4gICAgICogICAtIGBBY2NlcHQ6IGFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICogLyAqYFxyXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnBvc3RgOiAoaGVhZGVyIGRlZmF1bHRzIGZvciBQT1NUIHJlcXVlc3RzKVxyXG4gICAgICogICAtIGBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25gXHJcbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucHV0YCAoaGVhZGVyIGRlZmF1bHRzIGZvciBQVVQgcmVxdWVzdHMpXHJcbiAgICAgKiAgIC0gYENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbmBcclxuICAgICAqXHJcbiAgICAgKiBUbyBhZGQgb3Igb3ZlcndyaXRlIHRoZXNlIGRlZmF1bHRzLCBzaW1wbHkgYWRkIG9yIHJlbW92ZSBhIHByb3BlcnR5IGZyb20gdGhlc2UgY29uZmlndXJhdGlvblxyXG4gICAgICogb2JqZWN0cy4gVG8gYWRkIGhlYWRlcnMgZm9yIGFuIEhUVFAgbWV0aG9kIG90aGVyIHRoYW4gUE9TVCBvciBQVVQsIHNpbXBseSBhZGQgYSBuZXcgb2JqZWN0XHJcbiAgICAgKiB3aXRoIHRoZSBsb3dlcmNhc2VkIEhUVFAgbWV0aG9kIG5hbWUgYXMgdGhlIGtleSwgZS5nLlxyXG4gICAgICogYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7ICdNeS1IZWFkZXInIDogJ3ZhbHVlJyB9LlxyXG4gICAgICpcclxuICAgICAqIFRoZSBkZWZhdWx0cyBjYW4gYWxzbyBiZSBzZXQgYXQgcnVudGltZSB2aWEgdGhlIGAkaHR0cC5kZWZhdWx0c2Agb2JqZWN0IGluIHRoZSBzYW1lXHJcbiAgICAgKiBmYXNoaW9uLiBGb3IgZXhhbXBsZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBcclxuICAgICAqIG1vZHVsZS5ydW4oZnVuY3Rpb24oJGh0dHApIHtcclxuICAgICAqICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb24uQXV0aG9yaXphdGlvbiA9ICdCYXNpYyBZbVZsY0RwaWIyOXcnXHJcbiAgICAgKiB9KTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEluIGFkZGl0aW9uLCB5b3UgY2FuIHN1cHBseSBhIGBoZWFkZXJzYCBwcm9wZXJ0eSBpbiB0aGUgY29uZmlnIG9iamVjdCBwYXNzZWQgd2hlblxyXG4gICAgICogY2FsbGluZyBgJGh0dHAoY29uZmlnKWAsIHdoaWNoIG92ZXJyaWRlcyB0aGUgZGVmYXVsdHMgd2l0aG91dCBjaGFuZ2luZyB0aGVtIGdsb2JhbGx5LlxyXG4gICAgICpcclxuICAgICAqIFRvIGV4cGxpY2l0bHkgcmVtb3ZlIGEgaGVhZGVyIGF1dG9tYXRpY2FsbHkgYWRkZWQgdmlhICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycyBvbiBhIHBlciByZXF1ZXN0IGJhc2lzLFxyXG4gICAgICogVXNlIHRoZSBgaGVhZGVyc2AgcHJvcGVydHksIHNldHRpbmcgdGhlIGRlc2lyZWQgaGVhZGVyIHRvIGB1bmRlZmluZWRgLiBGb3IgZXhhbXBsZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogdmFyIHJlcSA9IHtcclxuICAgICAqICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAqICB1cmw6ICdodHRwOi8vZXhhbXBsZS5jb20nLFxyXG4gICAgICogIGhlYWRlcnM6IHtcclxuICAgICAqICAgICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWRcclxuICAgICAqICB9LFxyXG4gICAgICogIGRhdGE6IHsgdGVzdDogJ3Rlc3QnIH0sXHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogJGh0dHAocmVxKS5zdWNjZXNzKGZ1bmN0aW9uKCl7Li4ufSkuZXJyb3IoZnVuY3Rpb24oKXsuLi59KTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIFRyYW5zZm9ybWluZyBSZXF1ZXN0cyBhbmQgUmVzcG9uc2VzXHJcbiAgICAgKlxyXG4gICAgICogQm90aCByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBiZSB0cmFuc2Zvcm1lZCB1c2luZyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnM6IGB0cmFuc2Zvcm1SZXF1ZXN0YFxyXG4gICAgICogYW5kIGB0cmFuc2Zvcm1SZXNwb25zZWAuIFRoZXNlIHByb3BlcnRpZXMgY2FuIGJlIGEgc2luZ2xlIGZ1bmN0aW9uIHRoYXQgcmV0dXJuc1xyXG4gICAgICogdGhlIHRyYW5zZm9ybWVkIHZhbHVlIChgZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlciwgc3RhdHVzKWApIG9yIGFuIGFycmF5IG9mIHN1Y2ggdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zLFxyXG4gICAgICogd2hpY2ggYWxsb3dzIHlvdSB0byBgcHVzaGAgb3IgYHVuc2hpZnRgIGEgbmV3IHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIGludG8gdGhlIHRyYW5zZm9ybWF0aW9uIGNoYWluLlxyXG4gICAgICpcclxuICAgICAqICMjIyBEZWZhdWx0IFRyYW5zZm9ybWF0aW9uc1xyXG4gICAgICpcclxuICAgICAqIFRoZSBgJGh0dHBQcm92aWRlcmAgcHJvdmlkZXIgYW5kIGAkaHR0cGAgc2VydmljZSBleHBvc2UgYGRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgIGFuZFxyXG4gICAgICogYGRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCBwcm9wZXJ0aWVzLiBJZiBhIHJlcXVlc3QgZG9lcyBub3QgcHJvdmlkZSBpdHMgb3duIHRyYW5zZm9ybWF0aW9uc1xyXG4gICAgICogdGhlbiB0aGVzZSB3aWxsIGJlIGFwcGxpZWQuXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBhdWdtZW50IG9yIHJlcGxhY2UgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zIGJ5IG1vZGlmeWluZyB0aGVzZSBwcm9wZXJ0aWVzIGJ5IGFkZGluZyB0byBvclxyXG4gICAgICogcmVwbGFjaW5nIHRoZSBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBBbmd1bGFyIHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnM6XHJcbiAgICAgKlxyXG4gICAgICogUmVxdWVzdCB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgIGFuZCBgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGApOlxyXG4gICAgICpcclxuICAgICAqIC0gSWYgdGhlIGBkYXRhYCBwcm9wZXJ0eSBvZiB0aGUgcmVxdWVzdCBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWlucyBhbiBvYmplY3QsIHNlcmlhbGl6ZSBpdFxyXG4gICAgICogICBpbnRvIEpTT04gZm9ybWF0LlxyXG4gICAgICpcclxuICAgICAqIFJlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucyAoYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgIGFuZCBgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgKTpcclxuICAgICAqXHJcbiAgICAgKiAgLSBJZiBYU1JGIHByZWZpeCBpcyBkZXRlY3RlZCwgc3RyaXAgaXQgKHNlZSBTZWN1cml0eSBDb25zaWRlcmF0aW9ucyBzZWN0aW9uIGJlbG93KS5cclxuICAgICAqICAtIElmIEpTT04gcmVzcG9uc2UgaXMgZGV0ZWN0ZWQsIGRlc2VyaWFsaXplIGl0IHVzaW5nIGEgSlNPTiBwYXJzZXIuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMjIyBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9ucyBQZXIgUmVxdWVzdFxyXG4gICAgICpcclxuICAgICAqIElmIHlvdSB3aXNoIG92ZXJyaWRlIHRoZSByZXF1ZXN0L3Jlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucyBvbmx5IGZvciBhIHNpbmdsZSByZXF1ZXN0IHRoZW4gcHJvdmlkZVxyXG4gICAgICogYHRyYW5zZm9ybVJlcXVlc3RgIGFuZC9vciBgdHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMgb24gdGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHBhc3NlZFxyXG4gICAgICogaW50byBgJGh0dHBgLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCBpZiB5b3UgcHJvdmlkZSB0aGVzZSBwcm9wZXJ0aWVzIG9uIHRoZSBjb25maWcgb2JqZWN0IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyB3aWxsIGJlXHJcbiAgICAgKiBvdmVyd3JpdHRlbi4gSWYgeW91IHdpc2ggdG8gYXVnbWVudCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgdGhlbiB5b3UgbXVzdCBpbmNsdWRlIHRoZW0gaW4geW91clxyXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24gYXJyYXkuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIGZvbGxvd2luZyBjb2RlIGRlbW9uc3RyYXRlcyBhZGRpbmcgYSBuZXcgcmVzcG9uc2UgdHJhbnNmb3JtYXRpb24gdG8gYmUgcnVuIGFmdGVyIHRoZSBkZWZhdWx0IHJlc3BvbnNlXHJcbiAgICAgKiB0cmFuc2Zvcm1hdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogZnVuY3Rpb24gYXBwZW5kVHJhbnNmb3JtKGRlZmF1bHRzLCB0cmFuc2Zvcm0pIHtcclxuICAgICAqXHJcbiAgICAgKiAgIC8vIFdlIGNhbid0IGd1YXJhbnRlZSB0aGF0IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9uIGlzIGFuIGFycmF5XHJcbiAgICAgKiAgIGRlZmF1bHRzID0gYW5ndWxhci5pc0FycmF5KGRlZmF1bHRzKSA/IGRlZmF1bHRzIDogW2RlZmF1bHRzXTtcclxuICAgICAqXHJcbiAgICAgKiAgIC8vIEFwcGVuZCB0aGUgbmV3IHRyYW5zZm9ybWF0aW9uIHRvIHRoZSBkZWZhdWx0c1xyXG4gICAgICogICByZXR1cm4gZGVmYXVsdHMuY29uY2F0KHRyYW5zZm9ybSk7XHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogJGh0dHAoe1xyXG4gICAgICogICB1cmw6ICcuLi4nLFxyXG4gICAgICogICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICogICB0cmFuc2Zvcm1SZXNwb25zZTogYXBwZW5kVHJhbnNmb3JtKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICogICAgIHJldHVybiBkb1RyYW5zZm9ybSh2YWx1ZSk7XHJcbiAgICAgKiAgIH0pXHJcbiAgICAgKiB9KTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAjIyBDYWNoaW5nXHJcbiAgICAgKlxyXG4gICAgICogVG8gZW5hYmxlIGNhY2hpbmcsIHNldCB0aGUgcmVxdWVzdCBjb25maWd1cmF0aW9uIGBjYWNoZWAgcHJvcGVydHkgdG8gYHRydWVgICh0byB1c2UgZGVmYXVsdFxyXG4gICAgICogY2FjaGUpIG9yIHRvIGEgY3VzdG9tIGNhY2hlIG9iamVjdCAoYnVpbHQgd2l0aCB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KS5cclxuICAgICAqIFdoZW4gdGhlIGNhY2hlIGlzIGVuYWJsZWQsIGAkaHR0cGAgc3RvcmVzIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgaW4gdGhlIHNwZWNpZmllZFxyXG4gICAgICogY2FjaGUuIFRoZSBuZXh0IHRpbWUgdGhlIHNhbWUgcmVxdWVzdCBpcyBtYWRlLCB0aGUgcmVzcG9uc2UgaXMgc2VydmVkIGZyb20gdGhlIGNhY2hlIHdpdGhvdXRcclxuICAgICAqIHNlbmRpbmcgYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IGV2ZW4gaWYgdGhlIHJlc3BvbnNlIGlzIHNlcnZlZCBmcm9tIGNhY2hlLCBkZWxpdmVyeSBvZiB0aGUgZGF0YSBpcyBhc3luY2hyb25vdXMgaW5cclxuICAgICAqIHRoZSBzYW1lIHdheSB0aGF0IHJlYWwgcmVxdWVzdHMgYXJlLlxyXG4gICAgICpcclxuICAgICAqIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBHRVQgcmVxdWVzdHMgZm9yIHRoZSBzYW1lIFVSTCB0aGF0IHNob3VsZCBiZSBjYWNoZWQgdXNpbmcgdGhlIHNhbWVcclxuICAgICAqIGNhY2hlLCBidXQgdGhlIGNhY2hlIGlzIG5vdCBwb3B1bGF0ZWQgeWV0LCBvbmx5IG9uZSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgd2lsbCBiZSBtYWRlIGFuZFxyXG4gICAgICogdGhlIHJlbWFpbmluZyByZXF1ZXN0cyB3aWxsIGJlIGZ1bGZpbGxlZCB1c2luZyB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgZmlyc3QgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBZb3UgY2FuIGNoYW5nZSB0aGUgZGVmYXVsdCBjYWNoZSB0byBhIG5ldyBvYmplY3QgKGJ1aWx0IHdpdGhcclxuICAgICAqIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5IGAkY2FjaGVGYWN0b3J5YH0pIGJ5IHVwZGF0aW5nIHRoZVxyXG4gICAgICoge0BsaW5rIG5nLiRodHRwI2RlZmF1bHRzIGAkaHR0cC5kZWZhdWx0cy5jYWNoZWB9IHByb3BlcnR5LiBBbGwgcmVxdWVzdHMgd2hvIHNldFxyXG4gICAgICogdGhlaXIgYGNhY2hlYCBwcm9wZXJ0eSB0byBgdHJ1ZWAgd2lsbCBub3cgdXNlIHRoaXMgY2FjaGUgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIElmIHlvdSBzZXQgdGhlIGRlZmF1bHQgY2FjaGUgdG8gYGZhbHNlYCB0aGVuIG9ubHkgcmVxdWVzdHMgdGhhdCBzcGVjaWZ5IHRoZWlyIG93biBjdXN0b21cclxuICAgICAqIGNhY2hlIG9iamVjdCB3aWxsIGJlIGNhY2hlZC5cclxuICAgICAqXHJcbiAgICAgKiAjIyBJbnRlcmNlcHRvcnNcclxuICAgICAqXHJcbiAgICAgKiBCZWZvcmUgeW91IHN0YXJ0IGNyZWF0aW5nIGludGVyY2VwdG9ycywgYmUgc3VyZSB0byB1bmRlcnN0YW5kIHRoZVxyXG4gICAgICoge0BsaW5rIG5nLiRxICRxIGFuZCBkZWZlcnJlZC9wcm9taXNlIEFQSXN9LlxyXG4gICAgICpcclxuICAgICAqIEZvciBwdXJwb3NlcyBvZiBnbG9iYWwgZXJyb3IgaGFuZGxpbmcsIGF1dGhlbnRpY2F0aW9uLCBvciBhbnkga2luZCBvZiBzeW5jaHJvbm91cyBvclxyXG4gICAgICogYXN5bmNocm9ub3VzIHByZS1wcm9jZXNzaW5nIG9mIHJlcXVlc3Qgb3IgcG9zdHByb2Nlc3Npbmcgb2YgcmVzcG9uc2VzLCBpdCBpcyBkZXNpcmFibGUgdG8gYmVcclxuICAgICAqIGFibGUgdG8gaW50ZXJjZXB0IHJlcXVlc3RzIGJlZm9yZSB0aGV5IGFyZSBoYW5kZWQgdG8gdGhlIHNlcnZlciBhbmRcclxuICAgICAqIHJlc3BvbnNlcyBiZWZvcmUgdGhleSBhcmUgaGFuZGVkIG92ZXIgdG8gdGhlIGFwcGxpY2F0aW9uIGNvZGUgdGhhdFxyXG4gICAgICogaW5pdGlhdGVkIHRoZXNlIHJlcXVlc3RzLiBUaGUgaW50ZXJjZXB0b3JzIGxldmVyYWdlIHRoZSB7QGxpbmsgbmcuJHFcclxuICAgICAqIHByb21pc2UgQVBJc30gdG8gZnVsZmlsbCB0aGlzIG5lZWQgZm9yIGJvdGggc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZy5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgaW50ZXJjZXB0b3JzIGFyZSBzZXJ2aWNlIGZhY3RvcmllcyB0aGF0IGFyZSByZWdpc3RlcmVkIHdpdGggdGhlIGAkaHR0cFByb3ZpZGVyYCBieVxyXG4gICAgICogYWRkaW5nIHRoZW0gdG8gdGhlIGAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9yc2AgYXJyYXkuIFRoZSBmYWN0b3J5IGlzIGNhbGxlZCBhbmRcclxuICAgICAqIGluamVjdGVkIHdpdGggZGVwZW5kZW5jaWVzIChpZiBzcGVjaWZpZWQpIGFuZCByZXR1cm5zIHRoZSBpbnRlcmNlcHRvci5cclxuICAgICAqXHJcbiAgICAgKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGludGVyY2VwdG9ycyAoYW5kIHR3byBraW5kcyBvZiByZWplY3Rpb24gaW50ZXJjZXB0b3JzKTpcclxuICAgICAqXHJcbiAgICAgKiAgICogYHJlcXVlc3RgOiBpbnRlcmNlcHRvcnMgZ2V0IGNhbGxlZCB3aXRoIGEgaHR0cCBgY29uZmlnYCBvYmplY3QuIFRoZSBmdW5jdGlvbiBpcyBmcmVlIHRvXHJcbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgY29uZmlnYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYGNvbmZpZ2BcclxuICAgICAqICAgICBvYmplY3QgZGlyZWN0bHksIG9yIGEgcHJvbWlzZSBjb250YWluaW5nIHRoZSBgY29uZmlnYCBvciBhIG5ldyBgY29uZmlnYCBvYmplY3QuXHJcbiAgICAgKiAgICogYHJlcXVlc3RFcnJvcmA6IGludGVyY2VwdG9yIGdldHMgY2FsbGVkIHdoZW4gYSBwcmV2aW91cyBpbnRlcmNlcHRvciB0aHJldyBhbiBlcnJvciBvclxyXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXHJcbiAgICAgKiAgICogYHJlc3BvbnNlYDogaW50ZXJjZXB0b3JzIGdldCBjYWxsZWQgd2l0aCBodHRwIGByZXNwb25zZWAgb2JqZWN0LiBUaGUgZnVuY3Rpb24gaXMgZnJlZSB0b1xyXG4gICAgICogICAgIG1vZGlmeSB0aGUgYHJlc3BvbnNlYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYHJlc3BvbnNlYFxyXG4gICAgICogICAgIG9iamVjdCBkaXJlY3RseSwgb3IgYXMgYSBwcm9taXNlIGNvbnRhaW5pbmcgdGhlIGByZXNwb25zZWAgb3IgYSBuZXcgYHJlc3BvbnNlYCBvYmplY3QuXHJcbiAgICAgKiAgICogYHJlc3BvbnNlRXJyb3JgOiBpbnRlcmNlcHRvciBnZXRzIGNhbGxlZCB3aGVuIGEgcHJldmlvdXMgaW50ZXJjZXB0b3IgdGhyZXcgYW4gZXJyb3Igb3JcclxuICAgICAqICAgICByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICAvLyByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgYXMgYSBzZXJ2aWNlXHJcbiAgICAgKiAgICRwcm92aWRlLmZhY3RvcnkoJ215SHR0cEludGVyY2VwdG9yJywgZnVuY3Rpb24oJHEsIGRlcGVuZGVuY3kxLCBkZXBlbmRlbmN5Mikge1xyXG4gICAgICogICAgIHJldHVybiB7XHJcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcclxuICAgICAqICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XHJcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXHJcbiAgICAgKiAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgKiAgICAgICB9LFxyXG4gICAgICpcclxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxyXG4gICAgICogICAgICAncmVxdWVzdEVycm9yJzogZnVuY3Rpb24ocmVqZWN0aW9uKSB7XHJcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxyXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XHJcbiAgICAgKiAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlT3JOZXdQcm9taXNlXHJcbiAgICAgKiAgICAgICAgIH1cclxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xyXG4gICAgICogICAgICAgfSxcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxyXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIHN1Y2Nlc3NcclxuICAgICAqICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICogICAgICAgfSxcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcclxuICAgICAqICAgICAgJ3Jlc3BvbnNlRXJyb3InOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcclxuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIGVycm9yXHJcbiAgICAgKiAgICAgICAgIGlmIChjYW5SZWNvdmVyKHJlamVjdGlvbikpIHtcclxuICAgICAqICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VPck5ld1Byb21pc2VcclxuICAgICAqICAgICAgICAgfVxyXG4gICAgICogICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XHJcbiAgICAgKiAgICAgICB9XHJcbiAgICAgKiAgICAgfTtcclxuICAgICAqICAgfSk7XHJcbiAgICAgKlxyXG4gICAgICogICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdteUh0dHBJbnRlcmNlcHRvcicpO1xyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAgIC8vIGFsdGVybmF0aXZlbHksIHJlZ2lzdGVyIHRoZSBpbnRlcmNlcHRvciB2aWEgYW4gYW5vbnltb3VzIGZhY3RvcnlcclxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaChmdW5jdGlvbigkcSwgZGVwZW5kZW5jeTEsIGRlcGVuZGVuY3kyKSB7XHJcbiAgICAgKiAgICAgcmV0dXJuIHtcclxuICAgICAqICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbihjb25maWcpIHtcclxuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcclxuICAgICAqICAgICAgIH0sXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcclxuICAgICAqICAgICAgIH1cclxuICAgICAqICAgICB9O1xyXG4gICAgICogICB9KTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiBkZXNpZ25pbmcgd2ViIGFwcGxpY2F0aW9ucywgY29uc2lkZXIgc2VjdXJpdHkgdGhyZWF0cyBmcm9tOlxyXG4gICAgICpcclxuICAgICAqIC0gW0pTT04gdnVsbmVyYWJpbGl0eV0oaHR0cDovL2hhYWNrZWQuY29tL2FyY2hpdmUvMjAwOC8xMS8yMC9hbmF0b215LW9mLWEtc3VidGxlLWpzb24tdnVsbmVyYWJpbGl0eS5hc3B4KVxyXG4gICAgICogLSBbWFNSRl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Dcm9zcy1zaXRlX3JlcXVlc3RfZm9yZ2VyeSlcclxuICAgICAqXHJcbiAgICAgKiBCb3RoIHNlcnZlciBhbmQgdGhlIGNsaWVudCBtdXN0IGNvb3BlcmF0ZSBpbiBvcmRlciB0byBlbGltaW5hdGUgdGhlc2UgdGhyZWF0cy4gQW5ndWxhciBjb21lc1xyXG4gICAgICogcHJlLWNvbmZpZ3VyZWQgd2l0aCBzdHJhdGVnaWVzIHRoYXQgYWRkcmVzcyB0aGVzZSBpc3N1ZXMsIGJ1dCBmb3IgdGhpcyB0byB3b3JrIGJhY2tlbmQgc2VydmVyXHJcbiAgICAgKiBjb29wZXJhdGlvbiBpcyByZXF1aXJlZC5cclxuICAgICAqXHJcbiAgICAgKiAjIyMgSlNPTiBWdWxuZXJhYmlsaXR5IFByb3RlY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBBIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcclxuICAgICAqIGFsbG93cyB0aGlyZCBwYXJ0eSB3ZWJzaXRlIHRvIHR1cm4geW91ciBKU09OIHJlc291cmNlIFVSTCBpbnRvXHJcbiAgICAgKiBbSlNPTlBdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSlNPTlApIHJlcXVlc3QgdW5kZXIgc29tZSBjb25kaXRpb25zLiBUb1xyXG4gICAgICogY291bnRlciB0aGlzIHlvdXIgc2VydmVyIGNhbiBwcmVmaXggYWxsIEpTT04gcmVxdWVzdHMgd2l0aCBmb2xsb3dpbmcgc3RyaW5nIGBcIildfScsXFxuXCJgLlxyXG4gICAgICogQW5ndWxhciB3aWxsIGF1dG9tYXRpY2FsbHkgc3RyaXAgdGhlIHByZWZpeCBiZWZvcmUgcHJvY2Vzc2luZyBpdCBhcyBKU09OLlxyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlIGlmIHlvdXIgc2VydmVyIG5lZWRzIHRvIHJldHVybjpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBbJ29uZScsJ3R3byddXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiB3aGljaCBpcyB2dWxuZXJhYmxlIHRvIGF0dGFjaywgeW91ciBzZXJ2ZXIgY2FuIHJldHVybjpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiApXX0nLFxyXG4gICAgICogWydvbmUnLCd0d28nXVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQW5ndWxhciB3aWxsIHN0cmlwIHRoZSBwcmVmaXgsIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBKU09OLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiAjIyMgQ3Jvc3MgU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgKFhTUkYpIFByb3RlY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBbWFNSRl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Dcm9zcy1zaXRlX3JlcXVlc3RfZm9yZ2VyeSkgaXMgYSB0ZWNobmlxdWUgYnkgd2hpY2hcclxuICAgICAqIGFuIHVuYXV0aG9yaXplZCBzaXRlIGNhbiBnYWluIHlvdXIgdXNlcidzIHByaXZhdGUgZGF0YS4gQW5ndWxhciBwcm92aWRlcyBhIG1lY2hhbmlzbVxyXG4gICAgICogdG8gY291bnRlciBYU1JGLiBXaGVuIHBlcmZvcm1pbmcgWEhSIHJlcXVlc3RzLCB0aGUgJGh0dHAgc2VydmljZSByZWFkcyBhIHRva2VuIGZyb20gYSBjb29raWVcclxuICAgICAqIChieSBkZWZhdWx0LCBgWFNSRi1UT0tFTmApIGFuZCBzZXRzIGl0IGFzIGFuIEhUVFAgaGVhZGVyIChgWC1YU1JGLVRPS0VOYCkuIFNpbmNlIG9ubHlcclxuICAgICAqIEphdmFTY3JpcHQgdGhhdCBydW5zIG9uIHlvdXIgZG9tYWluIGNvdWxkIHJlYWQgdGhlIGNvb2tpZSwgeW91ciBzZXJ2ZXIgY2FuIGJlIGFzc3VyZWQgdGhhdFxyXG4gICAgICogdGhlIFhIUiBjYW1lIGZyb20gSmF2YVNjcmlwdCBydW5uaW5nIG9uIHlvdXIgZG9tYWluLiBUaGUgaGVhZGVyIHdpbGwgbm90IGJlIHNldCBmb3JcclxuICAgICAqIGNyb3NzLWRvbWFpbiByZXF1ZXN0cy5cclxuICAgICAqXHJcbiAgICAgKiBUbyB0YWtlIGFkdmFudGFnZSBvZiB0aGlzLCB5b3VyIHNlcnZlciBuZWVkcyB0byBzZXQgYSB0b2tlbiBpbiBhIEphdmFTY3JpcHQgcmVhZGFibGUgc2Vzc2lvblxyXG4gICAgICogY29va2llIGNhbGxlZCBgWFNSRi1UT0tFTmAgb24gdGhlIGZpcnN0IEhUVFAgR0VUIHJlcXVlc3QuIE9uIHN1YnNlcXVlbnQgWEhSIHJlcXVlc3RzIHRoZVxyXG4gICAgICogc2VydmVyIGNhbiB2ZXJpZnkgdGhhdCB0aGUgY29va2llIG1hdGNoZXMgYFgtWFNSRi1UT0tFTmAgSFRUUCBoZWFkZXIsIGFuZCB0aGVyZWZvcmUgYmUgc3VyZVxyXG4gICAgICogdGhhdCBvbmx5IEphdmFTY3JpcHQgcnVubmluZyBvbiB5b3VyIGRvbWFpbiBjb3VsZCBoYXZlIHNlbnQgdGhlIHJlcXVlc3QuIFRoZSB0b2tlbiBtdXN0IGJlXHJcbiAgICAgKiB1bmlxdWUgZm9yIGVhY2ggdXNlciBhbmQgbXVzdCBiZSB2ZXJpZmlhYmxlIGJ5IHRoZSBzZXJ2ZXIgKHRvIHByZXZlbnQgdGhlIEphdmFTY3JpcHQgZnJvbVxyXG4gICAgICogbWFraW5nIHVwIGl0cyBvd24gdG9rZW5zKS4gV2UgcmVjb21tZW5kIHRoYXQgdGhlIHRva2VuIGlzIGEgZGlnZXN0IG9mIHlvdXIgc2l0ZSdzXHJcbiAgICAgKiBhdXRoZW50aWNhdGlvbiBjb29raWUgd2l0aCBhIFtzYWx0XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TYWx0XyhjcnlwdG9ncmFwaHkmIzQxOylcclxuICAgICAqIGZvciBhZGRlZCBzZWN1cml0eS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgaGVhZGVycyBjYW4gYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSB4c3JmSGVhZGVyTmFtZSBhbmQgeHNyZkNvb2tpZU5hbWVcclxuICAgICAqIHByb3BlcnRpZXMgb2YgZWl0aGVyICRodHRwUHJvdmlkZXIuZGVmYXVsdHMgYXQgY29uZmlnLXRpbWUsICRodHRwLmRlZmF1bHRzIGF0IHJ1bi10aW1lLFxyXG4gICAgICogb3IgdGhlIHBlci1yZXF1ZXN0IGNvbmZpZyBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgT2JqZWN0IGRlc2NyaWJpbmcgdGhlIHJlcXVlc3QgdG8gYmUgbWFkZSBhbmQgaG93IGl0IHNob3VsZCBiZVxyXG4gICAgICogICAgcHJvY2Vzc2VkLiBUaGUgb2JqZWN0IGhhcyBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICAgICAqXHJcbiAgICAgKiAgICAtICoqbWV0aG9kKiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgbWV0aG9kIChlLmcuICdHRVQnLCAnUE9TVCcsIGV0YylcclxuICAgICAqICAgIC0gKip1cmwqKiDigJMgYHtzdHJpbmd9YCDigJMgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZC5cclxuICAgICAqICAgIC0gKipwYXJhbXMqKiDigJMgYHtPYmplY3QuPHN0cmluZ3xPYmplY3Q+fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIG9iamVjdHMgd2hpY2ggd2lsbCBiZSB0dXJuZWRcclxuICAgICAqICAgICAgdG8gYD9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMmAgYWZ0ZXIgdGhlIHVybC4gSWYgdGhlIHZhbHVlIGlzIG5vdCBhIHN0cmluZywgaXQgd2lsbCBiZVxyXG4gICAgICogICAgICBKU09OaWZpZWQuXHJcbiAgICAgKiAgICAtICoqZGF0YSoqIOKAkyBge3N0cmluZ3xPYmplY3R9YCDigJMgRGF0YSB0byBiZSBzZW50IGFzIHRoZSByZXF1ZXN0IG1lc3NhZ2UgZGF0YS5cclxuICAgICAqICAgIC0gKipoZWFkZXJzKiog4oCTIGB7T2JqZWN0fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIGZ1bmN0aW9ucyB3aGljaCByZXR1cm4gc3RyaW5ncyByZXByZXNlbnRpbmdcclxuICAgICAqICAgICAgSFRUUCBoZWFkZXJzIHRvIHNlbmQgdG8gdGhlIHNlcnZlci4gSWYgdGhlIHJldHVybiB2YWx1ZSBvZiBhIGZ1bmN0aW9uIGlzIG51bGwsIHRoZVxyXG4gICAgICogICAgICBoZWFkZXIgd2lsbCBub3QgYmUgc2VudC5cclxuICAgICAqICAgIC0gKip4c3JmSGVhZGVyTmFtZSoqIOKAkyBge3N0cmluZ31gIOKAkyBOYW1lIG9mIEhUVFAgaGVhZGVyIHRvIHBvcHVsYXRlIHdpdGggdGhlIFhTUkYgdG9rZW4uXHJcbiAgICAgKiAgICAtICoqeHNyZkNvb2tpZU5hbWUqKiDigJMgYHtzdHJpbmd9YCDigJMgTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cclxuICAgICAqICAgIC0gKip0cmFuc2Zvcm1SZXF1ZXN0Kiog4oCTXHJcbiAgICAgKiAgICAgIGB7ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpPn1gIOKAk1xyXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcclxuICAgICAqICAgICAgcmVxdWVzdCBib2R5IGFuZCBoZWFkZXJzIGFuZCByZXR1cm5zIGl0cyB0cmFuc2Zvcm1lZCAodHlwaWNhbGx5IHNlcmlhbGl6ZWQpIHZlcnNpb24uXHJcbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgbmcuJGh0dHAjb3ZlcnJpZGluZy10aGUtZGVmYXVsdC10cmFuc2Zvcm1hdGlvbnMtcGVyLXJlcXVlc3RcclxuICAgICAqICAgICAgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnN9XHJcbiAgICAgKiAgICAtICoqdHJhbnNmb3JtUmVzcG9uc2UqKiDigJNcclxuICAgICAqICAgICAgYHtmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpfEFycmF5LjxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpPn1gIOKAk1xyXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcclxuICAgICAqICAgICAgcmVzcG9uc2UgYm9keSwgaGVhZGVycyBhbmQgc3RhdHVzIGFuZCByZXR1cm5zIGl0cyB0cmFuc2Zvcm1lZCAodHlwaWNhbGx5IGRlc2VyaWFsaXplZCkgdmVyc2lvbi5cclxuICAgICAqICAgICAgU2VlIHtAbGluayBuZy4kaHR0cCNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdFxyXG4gICAgICogICAgICBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9uc31cclxuICAgICAqICAgIC0gKipjYWNoZSoqIOKAkyBge2Jvb2xlYW58Q2FjaGV9YCDigJMgSWYgdHJ1ZSwgYSBkZWZhdWx0ICRodHRwIGNhY2hlIHdpbGwgYmUgdXNlZCB0byBjYWNoZSB0aGVcclxuICAgICAqICAgICAgR0VUIHJlcXVlc3QsIG90aGVyd2lzZSBpZiBhIGNhY2hlIGluc3RhbmNlIGJ1aWx0IHdpdGhcclxuICAgICAqICAgICAge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0sIHRoaXMgY2FjaGUgd2lsbCBiZSB1c2VkIGZvclxyXG4gICAgICogICAgICBjYWNoaW5nLlxyXG4gICAgICogICAgLSAqKnRpbWVvdXQqKiDigJMgYHtudW1iZXJ8UHJvbWlzZX1gIOKAkyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcywgb3Ige0BsaW5rIG5nLiRxIHByb21pc2V9XHJcbiAgICAgKiAgICAgIHRoYXQgc2hvdWxkIGFib3J0IHRoZSByZXF1ZXN0IHdoZW4gcmVzb2x2ZWQuXHJcbiAgICAgKiAgICAtICoqd2l0aENyZWRlbnRpYWxzKiogLSBge2Jvb2xlYW59YCAtIHdoZXRoZXIgdG8gc2V0IHRoZSBgd2l0aENyZWRlbnRpYWxzYCBmbGFnIG9uIHRoZVxyXG4gICAgICogICAgICBYSFIgb2JqZWN0LiBTZWUgW3JlcXVlc3RzIHdpdGggY3JlZGVudGlhbHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0hUVFAvQWNjZXNzX2NvbnRyb2xfQ09SUyNSZXF1ZXN0c193aXRoX2NyZWRlbnRpYWxzKVxyXG4gICAgICogICAgICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICAgICAqICAgIC0gKipyZXNwb25zZVR5cGUqKiAtIGB7c3RyaW5nfWAgLSBzZWVcclxuICAgICAqICAgICAgW3JlcXVlc3RUeXBlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9YTUxIdHRwUmVxdWVzdCNyZXNwb25zZVR5cGUpLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gUmV0dXJucyBhIHtAbGluayBuZy4kcSBwcm9taXNlfSBvYmplY3Qgd2l0aCB0aGVcclxuICAgICAqICAgc3RhbmRhcmQgYHRoZW5gIG1ldGhvZCBhbmQgdHdvIGh0dHAgc3BlY2lmaWMgbWV0aG9kczogYHN1Y2Nlc3NgIGFuZCBgZXJyb3JgLiBUaGUgYHRoZW5gXHJcbiAgICAgKiAgIG1ldGhvZCB0YWtlcyB0d28gYXJndW1lbnRzIGEgc3VjY2VzcyBhbmQgYW4gZXJyb3IgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2l0aCBhXHJcbiAgICAgKiAgIHJlc3BvbnNlIG9iamVjdC4gVGhlIGBzdWNjZXNzYCBhbmQgYGVycm9yYCBtZXRob2RzIHRha2UgYSBzaW5nbGUgYXJndW1lbnQgLSBhIGZ1bmN0aW9uIHRoYXRcclxuICAgICAqICAgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgcmVxdWVzdCBzdWNjZWVkcyBvciBmYWlscyByZXNwZWN0aXZlbHkuIFRoZSBhcmd1bWVudHMgcGFzc2VkIGludG9cclxuICAgICAqICAgdGhlc2UgZnVuY3Rpb25zIGFyZSBkZXN0cnVjdHVyZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlc3BvbnNlIG9iamVjdCBwYXNzZWQgaW50byB0aGVcclxuICAgICAqICAgYHRoZW5gIG1ldGhvZC4gVGhlIHJlc3BvbnNlIG9iamVjdCBoYXMgdGhlc2UgcHJvcGVydGllczpcclxuICAgICAqXHJcbiAgICAgKiAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBUaGUgcmVzcG9uc2UgYm9keSB0cmFuc2Zvcm1lZCB3aXRoIHRoZSB0cmFuc2Zvcm1cclxuICAgICAqICAgICBmdW5jdGlvbnMuXHJcbiAgICAgKiAgIC0gKipzdGF0dXMqKiDigJMgYHtudW1iZXJ9YCDigJMgSFRUUCBzdGF0dXMgY29kZSBvZiB0aGUgcmVzcG9uc2UuXHJcbiAgICAgKiAgIC0gKipoZWFkZXJzKiog4oCTIGB7ZnVuY3Rpb24oW2hlYWRlck5hbWVdKX1gIOKAkyBIZWFkZXIgZ2V0dGVyIGZ1bmN0aW9uLlxyXG4gICAgICogICAtICoqY29uZmlnKiog4oCTIGB7T2JqZWN0fWAg4oCTIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCB0aGF0IHdhcyB1c2VkIHRvIGdlbmVyYXRlIHRoZSByZXF1ZXN0LlxyXG4gICAgICogICAtICoqc3RhdHVzVGV4dCoqIOKAkyBge3N0cmluZ31gIOKAkyBIVFRQIHN0YXR1cyB0ZXh0IG9mIHRoZSByZXNwb25zZS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJvcGVydHkge0FycmF5LjxPYmplY3Q+fSBwZW5kaW5nUmVxdWVzdHMgQXJyYXkgb2YgY29uZmlnIG9iamVjdHMgZm9yIGN1cnJlbnRseSBwZW5kaW5nXHJcbiAgICAgKiAgIHJlcXVlc3RzLiBUaGlzIGlzIHByaW1hcmlseSBtZWFudCB0byBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbjxleGFtcGxlIG1vZHVsZT1cImh0dHBFeGFtcGxlXCI+XHJcbjxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgPGRpdiBuZy1jb250cm9sbGVyPVwiRmV0Y2hDb250cm9sbGVyXCI+XHJcbiAgICA8c2VsZWN0IG5nLW1vZGVsPVwibWV0aG9kXCI+XHJcbiAgICAgIDxvcHRpb24+R0VUPC9vcHRpb24+XHJcbiAgICAgIDxvcHRpb24+SlNPTlA8L29wdGlvbj5cclxuICAgIDwvc2VsZWN0PlxyXG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1cmxcIiBzaXplPVwiODBcIi8+XHJcbiAgICA8YnV0dG9uIGlkPVwiZmV0Y2hidG5cIiBuZy1jbGljaz1cImZldGNoKClcIj5mZXRjaDwvYnV0dG9uPjxicj5cclxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVnZXRidG5cIiBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdHRVQnLCAnaHR0cC1oZWxsby5odG1sJylcIj5TYW1wbGUgR0VUPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGlkPVwic2FtcGxlanNvbnBidG5cIlxyXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy9ncmVldC5waHA/Y2FsbGJhY2s9SlNPTl9DQUxMQkFDSyZuYW1lPVN1cGVyJTIwSGVybycpXCI+XHJcbiAgICAgIFNhbXBsZSBKU09OUFxyXG4gICAgPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGlkPVwiaW52YWxpZGpzb25wYnRuXCJcclxuICAgICAgbmctY2xpY2s9XCJ1cGRhdGVNb2RlbCgnSlNPTlAnLCAnaHR0cHM6Ly9hbmd1bGFyanMub3JnL2RvZXNudGV4aXN0JmNhbGxiYWNrPUpTT05fQ0FMTEJBQ0snKVwiPlxyXG4gICAgICAgIEludmFsaWQgSlNPTlBcclxuICAgICAgPC9idXR0b24+XHJcbiAgICA8cHJlPmh0dHAgc3RhdHVzIGNvZGU6IHt7c3RhdHVzfX08L3ByZT5cclxuICAgIDxwcmU+aHR0cCByZXNwb25zZSBkYXRhOiB7e2RhdGF9fTwvcHJlPlxyXG4gIDwvZGl2PlxyXG48L2ZpbGU+XHJcbjxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICBhbmd1bGFyLm1vZHVsZSgnaHR0cEV4YW1wbGUnLCBbXSlcclxuICAgIC5jb250cm9sbGVyKCdGZXRjaENvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsXHJcbiAgICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAgICAgICAgJHNjb3BlLm1ldGhvZCA9ICdHRVQnO1xyXG4gICAgICAgICRzY29wZS51cmwgPSAnaHR0cC1oZWxsby5odG1sJztcclxuXHJcbiAgICAgICAgJHNjb3BlLmZldGNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkc2NvcGUuY29kZSA9IG51bGw7XHJcbiAgICAgICAgICAkc2NvcGUucmVzcG9uc2UgPSBudWxsO1xyXG5cclxuICAgICAgICAgICRodHRwKHttZXRob2Q6ICRzY29wZS5tZXRob2QsIHVybDogJHNjb3BlLnVybCwgY2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuXHJcbiAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHN0YXR1cztcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIH0pLlxyXG4gICAgICAgICAgICBlcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IGRhdGEgfHwgXCJSZXF1ZXN0IGZhaWxlZFwiO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbihtZXRob2QsIHVybCkge1xyXG4gICAgICAgICAgJHNjb3BlLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgICAgICAgICRzY29wZS51cmwgPSB1cmw7XHJcbiAgICAgICAgfTtcclxuICAgICAgfV0pO1xyXG48L2ZpbGU+XHJcbjxmaWxlIG5hbWU9XCJodHRwLWhlbGxvLmh0bWxcIj5cclxuICBIZWxsbywgJGh0dHAhXHJcbjwvZmlsZT5cclxuPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gIHZhciBzdGF0dXMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3N0YXR1cycpKTtcclxuICB2YXIgZGF0YSA9IGVsZW1lbnQoYnkuYmluZGluZygnZGF0YScpKTtcclxuICB2YXIgZmV0Y2hCdG4gPSBlbGVtZW50KGJ5LmlkKCdmZXRjaGJ0bicpKTtcclxuICB2YXIgc2FtcGxlR2V0QnRuID0gZWxlbWVudChieS5pZCgnc2FtcGxlZ2V0YnRuJykpO1xyXG4gIHZhciBzYW1wbGVKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ3NhbXBsZWpzb25wYnRuJykpO1xyXG4gIHZhciBpbnZhbGlkSnNvbnBCdG4gPSBlbGVtZW50KGJ5LmlkKCdpbnZhbGlkanNvbnBidG4nKSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbWFrZSBhbiB4aHIgR0VUIHJlcXVlc3QnLCBmdW5jdGlvbigpIHtcclxuICAgIHNhbXBsZUdldEJ0bi5jbGljaygpO1xyXG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcclxuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcclxuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgvSGVsbG8sIFxcJGh0dHAhLyk7XHJcbiAgfSk7XHJcblxyXG4vLyBDb21tZW50ZWQgb3V0IGR1ZSB0byBmbGFrZXMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MTg1XHJcbi8vIGl0KCdzaG91bGQgbWFrZSBhIEpTT05QIHJlcXVlc3QgdG8gYW5ndWxhcmpzLm9yZycsIGZ1bmN0aW9uKCkge1xyXG4vLyAgIHNhbXBsZUpzb25wQnRuLmNsaWNrKCk7XHJcbi8vICAgZmV0Y2hCdG4uY2xpY2soKTtcclxuLy8gICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMjAwJyk7XHJcbi8vICAgZXhwZWN0KGRhdGEuZ2V0VGV4dCgpKS50b01hdGNoKC9TdXBlciBIZXJvIS8pO1xyXG4vLyB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBtYWtlIEpTT05QIHJlcXVlc3QgdG8gaW52YWxpZCBVUkwgYW5kIGludm9rZSB0aGUgZXJyb3IgaGFuZGxlcicsXHJcbiAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgaW52YWxpZEpzb25wQnRuLmNsaWNrKCk7XHJcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xyXG4gICAgZXhwZWN0KHN0YXR1cy5nZXRUZXh0KCkpLnRvTWF0Y2goJzAnKTtcclxuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgnUmVxdWVzdCBmYWlsZWQnKTtcclxuICB9KTtcclxuPC9maWxlPlxyXG48L2V4YW1wbGU+XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICRodHRwKHJlcXVlc3RDb25maWcpIHtcclxuXHJcbiAgICAgIGlmICghYW5ndWxhci5pc09iamVjdChyZXF1ZXN0Q29uZmlnKSkge1xyXG4gICAgICAgIHRocm93IG1pbkVycignJGh0dHAnKSgnYmFkcmVxJywgJ0h0dHAgcmVxdWVzdCBjb25maWd1cmF0aW9uIG11c3QgYmUgYW4gb2JqZWN0LiAgUmVjZWl2ZWQ6IHswfScsIHJlcXVlc3RDb25maWcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgY29uZmlnID0gZXh0ZW5kKHtcclxuICAgICAgICBtZXRob2Q6ICdnZXQnLFxyXG4gICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3QsXHJcbiAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6IGRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlXHJcbiAgICAgIH0sIHJlcXVlc3RDb25maWcpO1xyXG5cclxuICAgICAgY29uZmlnLmhlYWRlcnMgPSBtZXJnZUhlYWRlcnMocmVxdWVzdENvbmZpZyk7XHJcbiAgICAgIGNvbmZpZy5tZXRob2QgPSB1cHBlcmNhc2UoY29uZmlnLm1ldGhvZCk7XHJcblxyXG4gICAgICB2YXIgc2VydmVyUmVxdWVzdCA9IGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBoZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgICAgICAgdmFyIHJlcURhdGEgPSB0cmFuc2Zvcm1EYXRhKGNvbmZpZy5kYXRhLCBoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLCB1bmRlZmluZWQsIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTtcclxuXHJcbiAgICAgICAgLy8gc3RyaXAgY29udGVudC10eXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXHJcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHJlcURhdGEpKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBoZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKGxvd2VyY2FzZShoZWFkZXIpID09PSAnY29udGVudC10eXBlJykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQoY29uZmlnLndpdGhDcmVkZW50aWFscykgJiYgIWlzVW5kZWZpbmVkKGRlZmF1bHRzLndpdGhDcmVkZW50aWFscykpIHtcclxuICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgPSBkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZW5kIHJlcXVlc3RcclxuICAgICAgICByZXR1cm4gc2VuZFJlcShjb25maWcsIHJlcURhdGEpLnRoZW4odHJhbnNmb3JtUmVzcG9uc2UsIHRyYW5zZm9ybVJlc3BvbnNlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBjaGFpbiA9IFtzZXJ2ZXJSZXF1ZXN0LCB1bmRlZmluZWRdO1xyXG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLndoZW4oY29uZmlnKTtcclxuXHJcbiAgICAgIC8vIGFwcGx5IGludGVyY2VwdG9yc1xyXG4gICAgICBmb3JFYWNoKHJldmVyc2VkSW50ZXJjZXB0b3JzLCBmdW5jdGlvbihpbnRlcmNlcHRvcikge1xyXG4gICAgICAgIGlmIChpbnRlcmNlcHRvci5yZXF1ZXN0IHx8IGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcikge1xyXG4gICAgICAgICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5yZXF1ZXN0LCBpbnRlcmNlcHRvci5yZXF1ZXN0RXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW50ZXJjZXB0b3IucmVzcG9uc2UgfHwgaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcikge1xyXG4gICAgICAgICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5yZXNwb25zZSwgaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHdoaWxlIChjaGFpbi5sZW5ndGgpIHtcclxuICAgICAgICB2YXIgdGhlbkZuID0gY2hhaW4uc2hpZnQoKTtcclxuICAgICAgICB2YXIgcmVqZWN0Rm4gPSBjaGFpbi5zaGlmdCgpO1xyXG5cclxuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKHRoZW5GbiwgcmVqZWN0Rm4pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwcm9taXNlLnN1Y2Nlc3MgPSBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgZm4ocmVzcG9uc2UuZGF0YSwgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5oZWFkZXJzLCBjb25maWcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcHJvbWlzZS5lcnJvciA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgcHJvbWlzZS50aGVuKG51bGwsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICBmbihyZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmhlYWRlcnMsIGNvbmZpZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gcHJvbWlzZTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gbWFrZSBhIGNvcHkgc2luY2UgdGhlIHJlc3BvbnNlIG11c3QgYmUgY2FjaGVhYmxlXHJcbiAgICAgICAgdmFyIHJlc3AgPSBleHRlbmQoe30sIHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEpIHtcclxuICAgICAgICAgIHJlc3AuZGF0YSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc3AuZGF0YSA9IHRyYW5zZm9ybURhdGEocmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuaGVhZGVycywgcmVzcG9uc2Uuc3RhdHVzLCBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKGlzU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpKVxyXG4gICAgICAgICAgPyByZXNwXHJcbiAgICAgICAgICA6ICRxLnJlamVjdChyZXNwKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZXhlY3V0ZUhlYWRlckZucyhoZWFkZXJzKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQsIHByb2Nlc3NlZEhlYWRlcnMgPSB7fTtcclxuXHJcbiAgICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbihoZWFkZXJGbiwgaGVhZGVyKSB7XHJcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoZWFkZXJGbikpIHtcclxuICAgICAgICAgICAgaGVhZGVyQ29udGVudCA9IGhlYWRlckZuKCk7XHJcbiAgICAgICAgICAgIGlmIChoZWFkZXJDb250ZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJDb250ZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJGbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NlZEhlYWRlcnM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIG1lcmdlSGVhZGVycyhjb25maWcpIHtcclxuICAgICAgICB2YXIgZGVmSGVhZGVycyA9IGRlZmF1bHRzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIHJlcUhlYWRlcnMgPSBleHRlbmQoe30sIGNvbmZpZy5oZWFkZXJzKSxcclxuICAgICAgICAgICAgZGVmSGVhZGVyTmFtZSwgbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSwgcmVxSGVhZGVyTmFtZTtcclxuXHJcbiAgICAgICAgZGVmSGVhZGVycyA9IGV4dGVuZCh7fSwgZGVmSGVhZGVycy5jb21tb24sIGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7XHJcblxyXG4gICAgICAgIC8vIHVzaW5nIGZvci1pbiBpbnN0ZWFkIG9mIGZvckVhY2ggdG8gYXZvaWQgdW5lY2Vzc2FyeSBpdGVyYXRpb24gYWZ0ZXIgaGVhZGVyIGhhcyBiZWVuIGZvdW5kXHJcbiAgICAgICAgZGVmYXVsdEhlYWRlcnNJdGVyYXRpb246XHJcbiAgICAgICAgZm9yIChkZWZIZWFkZXJOYW1lIGluIGRlZkhlYWRlcnMpIHtcclxuICAgICAgICAgIGxvd2VyY2FzZURlZkhlYWRlck5hbWUgPSBsb3dlcmNhc2UoZGVmSGVhZGVyTmFtZSk7XHJcblxyXG4gICAgICAgICAgZm9yIChyZXFIZWFkZXJOYW1lIGluIHJlcUhlYWRlcnMpIHtcclxuICAgICAgICAgICAgaWYgKGxvd2VyY2FzZShyZXFIZWFkZXJOYW1lKSA9PT0gbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSkge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlIGRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmVxSGVhZGVyc1tkZWZIZWFkZXJOYW1lXSA9IGRlZkhlYWRlcnNbZGVmSGVhZGVyTmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBleGVjdXRlIGlmIGhlYWRlciB2YWx1ZSBpcyBhIGZ1bmN0aW9uIGZvciBtZXJnZWQgaGVhZGVyc1xyXG4gICAgICAgIHJldHVybiBleGVjdXRlSGVhZGVyRm5zKHJlcUhlYWRlcnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJGh0dHAucGVuZGluZ1JlcXVlc3RzID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaHR0cCNnZXRcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBHRVRgIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGh0dHAjZGVsZXRlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgREVMRVRFYCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRodHRwI2hlYWRcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBIRUFEYCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRodHRwI2pzb25wXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgSlNPTlBgIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3QuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIFRoZSBuYW1lIG9mIHRoZSBjYWxsYmFjayBzaG91bGQgYmUgdGhlIHN0cmluZyBgSlNPTl9DQUxMQkFDS2AuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZVNob3J0TWV0aG9kcygnZ2V0JywgJ2RlbGV0ZScsICdoZWFkJywgJ2pzb25wJyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaHR0cCNwb3N0XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGN1dCBtZXRob2QgdG8gcGVyZm9ybSBgUE9TVGAgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFJlcXVlc3QgY29udGVudFxyXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaHR0cCNwdXRcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQVVRgIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcclxuICAgICAqL1xyXG5cclxuICAgICAvKipcclxuICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICogQG5hbWUgJGh0dHAjcGF0Y2hcclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQQVRDSGAgcmVxdWVzdC5cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgICogQHBhcmFtIHsqfSBkYXRhIFJlcXVlc3QgY29udGVudFxyXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XHJcbiAgICAgICovXHJcbiAgICBjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YSgncG9zdCcsICdwdXQnLCAncGF0Y2gnKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgICAgICogQG5hbWUgJGh0dHAjZGVmYXVsdHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJ1bnRpbWUgZXF1aXZhbGVudCBvZiB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHNgIHByb3BlcnR5LiBBbGxvd3MgY29uZmlndXJhdGlvbiBvZlxyXG4gICAgICAgICAqIGRlZmF1bHQgaGVhZGVycywgd2l0aENyZWRlbnRpYWxzIGFzIHdlbGwgYXMgcmVxdWVzdCBhbmQgcmVzcG9uc2UgdHJhbnNmb3JtYXRpb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogU2VlIFwiU2V0dGluZyBIVFRQIEhlYWRlcnNcIiBhbmQgXCJUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1wiIHNlY3Rpb25zIGFib3ZlLlxyXG4gICAgICAgICAqL1xyXG4gICAgJGh0dHAuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuXHJcblxyXG4gICAgcmV0dXJuICRodHRwO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHMobmFtZXMpIHtcclxuICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAkaHR0cFtuYW1lXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XHJcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKGNvbmZpZyB8fCB7fSwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IG5hbWUsXHJcbiAgICAgICAgICAgIHVybDogdXJsXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKG5hbWUpIHtcclxuICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAkaHR0cFtuYW1lXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XHJcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKGNvbmZpZyB8fCB7fSwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IG5hbWUsXHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWFrZXMgdGhlIHJlcXVlc3QuXHJcbiAgICAgKlxyXG4gICAgICogISEhIEFDQ0VTU0VTIENMT1NVUkUgVkFSUzpcclxuICAgICAqICRodHRwQmFja2VuZCwgZGVmYXVsdHMsICRsb2csICRyb290U2NvcGUsIGRlZmF1bHRDYWNoZSwgJGh0dHAucGVuZGluZ1JlcXVlc3RzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNlbmRSZXEoY29uZmlnLCByZXFEYXRhKSB7XHJcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCksXHJcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSxcclxuICAgICAgICAgIGNhY2hlLFxyXG4gICAgICAgICAgY2FjaGVkUmVzcCxcclxuICAgICAgICAgIHJlcUhlYWRlcnMgPSBjb25maWcuaGVhZGVycyxcclxuICAgICAgICAgIHVybCA9IGJ1aWxkVXJsKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMpO1xyXG5cclxuICAgICAgJGh0dHAucGVuZGluZ1JlcXVlc3RzLnB1c2goY29uZmlnKTtcclxuICAgICAgcHJvbWlzZS50aGVuKHJlbW92ZVBlbmRpbmdSZXEsIHJlbW92ZVBlbmRpbmdSZXEpO1xyXG5cclxuXHJcbiAgICAgIGlmICgoY29uZmlnLmNhY2hlIHx8IGRlZmF1bHRzLmNhY2hlKSAmJiBjb25maWcuY2FjaGUgIT09IGZhbHNlICYmXHJcbiAgICAgICAgICAoY29uZmlnLm1ldGhvZCA9PT0gJ0dFVCcgfHwgY29uZmlnLm1ldGhvZCA9PT0gJ0pTT05QJykpIHtcclxuICAgICAgICBjYWNoZSA9IGlzT2JqZWN0KGNvbmZpZy5jYWNoZSkgPyBjb25maWcuY2FjaGVcclxuICAgICAgICAgICAgICA6IGlzT2JqZWN0KGRlZmF1bHRzLmNhY2hlKSA/IGRlZmF1bHRzLmNhY2hlXHJcbiAgICAgICAgICAgICAgOiBkZWZhdWx0Q2FjaGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjYWNoZSkge1xyXG4gICAgICAgIGNhY2hlZFJlc3AgPSBjYWNoZS5nZXQodXJsKTtcclxuICAgICAgICBpZiAoaXNEZWZpbmVkKGNhY2hlZFJlc3ApKSB7XHJcbiAgICAgICAgICBpZiAoaXNQcm9taXNlTGlrZShjYWNoZWRSZXNwKSkge1xyXG4gICAgICAgICAgICAvLyBjYWNoZWQgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuIHNlbnQsIGJ1dCB0aGVyZSBpcyBubyByZXNwb25zZSB5ZXRcclxuICAgICAgICAgICAgY2FjaGVkUmVzcC50aGVuKHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdCwgcmVzb2x2ZVByb21pc2VXaXRoUmVzdWx0KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNlcnZpbmcgZnJvbSBjYWNoZVxyXG4gICAgICAgICAgICBpZiAoaXNBcnJheShjYWNoZWRSZXNwKSkge1xyXG4gICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNhY2hlZFJlc3BbMV0sIGNhY2hlZFJlc3BbMF0sIHNoYWxsb3dDb3B5KGNhY2hlZFJlc3BbMl0pLCBjYWNoZWRSZXNwWzNdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShjYWNoZWRSZXNwLCAyMDAsIHt9LCAnT0snKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBwdXQgdGhlIHByb21pc2UgZm9yIHRoZSBub24tdHJhbnNmb3JtZWQgcmVzcG9uc2UgaW50byBjYWNoZSBhcyBhIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICBjYWNoZS5wdXQodXJsLCBwcm9taXNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvLyBpZiB3ZSB3b24ndCBoYXZlIHRoZSByZXNwb25zZSBpbiBjYWNoZSwgc2V0IHRoZSB4c3JmIGhlYWRlcnMgYW5kXHJcbiAgICAgIC8vIHNlbmQgdGhlIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmRcclxuICAgICAgaWYgKGlzVW5kZWZpbmVkKGNhY2hlZFJlc3ApKSB7XHJcbiAgICAgICAgdmFyIHhzcmZWYWx1ZSA9IHVybElzU2FtZU9yaWdpbihjb25maWcudXJsKVxyXG4gICAgICAgICAgICA/ICRicm93c2VyLmNvb2tpZXMoKVtjb25maWcueHNyZkNvb2tpZU5hbWUgfHwgZGVmYXVsdHMueHNyZkNvb2tpZU5hbWVdXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh4c3JmVmFsdWUpIHtcclxuICAgICAgICAgIHJlcUhlYWRlcnNbKGNvbmZpZy54c3JmSGVhZGVyTmFtZSB8fCBkZWZhdWx0cy54c3JmSGVhZGVyTmFtZSldID0geHNyZlZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGh0dHBCYWNrZW5kKGNvbmZpZy5tZXRob2QsIHVybCwgcmVxRGF0YSwgZG9uZSwgcmVxSGVhZGVycywgY29uZmlnLnRpbWVvdXQsXHJcbiAgICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMsIGNvbmZpZy5yZXNwb25zZVR5cGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcHJvbWlzZTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ2FsbGJhY2sgcmVnaXN0ZXJlZCB0byAkaHR0cEJhY2tlbmQoKTpcclxuICAgICAgICogIC0gY2FjaGVzIHRoZSByZXNwb25zZSBpZiBkZXNpcmVkXHJcbiAgICAgICAqICAtIHJlc29sdmVzIHRoZSByYXcgJGh0dHAgcHJvbWlzZVxyXG4gICAgICAgKiAgLSBjYWxscyAkYXBwbHlcclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIGRvbmUoc3RhdHVzLCByZXNwb25zZSwgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCkge1xyXG4gICAgICAgIGlmIChjYWNoZSkge1xyXG4gICAgICAgICAgaWYgKGlzU3VjY2VzcyhzdGF0dXMpKSB7XHJcbiAgICAgICAgICAgIGNhY2hlLnB1dCh1cmwsIFtzdGF0dXMsIHJlc3BvbnNlLCBwYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyksIHN0YXR1c1RleHRdKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBwcm9taXNlIGZyb20gdGhlIGNhY2hlXHJcbiAgICAgICAgICAgIGNhY2hlLnJlbW92ZSh1cmwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUh0dHBQcm9taXNlKCkge1xyXG4gICAgICAgICAgcmVzb2x2ZVByb21pc2UocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xyXG4gICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHlBc3luYyhyZXNvbHZlSHR0cFByb21pc2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXNvbHZlSHR0cFByb21pc2UoKTtcclxuICAgICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlKSAkcm9vdFNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZXNvbHZlcyB0aGUgcmF3ICRodHRwIHByb21pc2UuXHJcbiAgICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzLCBzdGF0dXNUZXh0KSB7XHJcbiAgICAgICAgLy8gbm9ybWFsaXplIGludGVybmFsIHN0YXR1c2VzIHRvIDBcclxuICAgICAgICBzdGF0dXMgPSBNYXRoLm1heChzdGF0dXMsIDApO1xyXG5cclxuICAgICAgICAoaXNTdWNjZXNzKHN0YXR1cykgPyBkZWZlcnJlZC5yZXNvbHZlIDogZGVmZXJyZWQucmVqZWN0KSh7XHJcbiAgICAgICAgICBkYXRhOiByZXNwb25zZSxcclxuICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxyXG4gICAgICAgICAgaGVhZGVyczogaGVhZGVyc0dldHRlcihoZWFkZXJzKSxcclxuICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxyXG4gICAgICAgICAgc3RhdHVzVGV4dDogc3RhdHVzVGV4dFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQocmVzdWx0KSB7XHJcbiAgICAgICAgcmVzb2x2ZVByb21pc2UocmVzdWx0LmRhdGEsIHJlc3VsdC5zdGF0dXMsIHNoYWxsb3dDb3B5KHJlc3VsdC5oZWFkZXJzKCkpLCByZXN1bHQuc3RhdHVzVGV4dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVBlbmRpbmdSZXEoKSB7XHJcbiAgICAgICAgdmFyIGlkeCA9ICRodHRwLnBlbmRpbmdSZXF1ZXN0cy5pbmRleE9mKGNvbmZpZyk7XHJcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpICRodHRwLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBidWlsZFVybCh1cmwsIHBhcmFtcykge1xyXG4gICAgICBpZiAoIXBhcmFtcykgcmV0dXJuIHVybDtcclxuICAgICAgdmFyIHBhcnRzID0gW107XHJcbiAgICAgIGZvckVhY2hTb3J0ZWQocGFyYW1zLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xyXG4gICAgICAgIGlmICghaXNBcnJheSh2YWx1ZSkpIHZhbHVlID0gW3ZhbHVlXTtcclxuXHJcbiAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgaWYgKGlzT2JqZWN0KHYpKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0RhdGUodikpIHtcclxuICAgICAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHYgPSB0b0pzb24odik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhcnRzLnB1c2goZW5jb2RlVXJpUXVlcnkoa2V5KSArICc9JyArXHJcbiAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVyaVF1ZXJ5KHYpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdXJsICs9ICgodXJsLmluZGV4T2YoJz8nKSA9PSAtMSkgPyAnPycgOiAnJicpICsgcGFydHMuam9pbignJicpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVhocigpIHtcclxuICAgIHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcclxuICogQHJlcXVpcmVzICR3aW5kb3dcclxuICogQHJlcXVpcmVzICRkb2N1bWVudFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogSFRUUCBiYWNrZW5kIHVzZWQgYnkgdGhlIHtAbGluayBuZy4kaHR0cCBzZXJ2aWNlfSB0aGF0IGRlbGVnYXRlcyB0b1xyXG4gKiBYTUxIdHRwUmVxdWVzdCBvYmplY3Qgb3IgSlNPTlAgYW5kIGRlYWxzIHdpdGggYnJvd3NlciBpbmNvbXBhdGliaWxpdGllcy5cclxuICpcclxuICogWW91IHNob3VsZCBuZXZlciBuZWVkIHRvIHVzZSB0aGlzIHNlcnZpY2UgZGlyZWN0bHksIGluc3RlYWQgdXNlIHRoZSBoaWdoZXItbGV2ZWwgYWJzdHJhY3Rpb25zOlxyXG4gKiB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IG9yIHtAbGluayBuZ1Jlc291cmNlLiRyZXNvdXJjZSAkcmVzb3VyY2V9LlxyXG4gKlxyXG4gKiBEdXJpbmcgdGVzdGluZyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIHN3YXBwZWQgd2l0aCB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCBtb2NrXHJcbiAqICRodHRwQmFja2VuZH0gd2hpY2ggY2FuIGJlIHRyYWluZWQgd2l0aCByZXNwb25zZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiAkSHR0cEJhY2tlbmRQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyR3aW5kb3cnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJGJyb3dzZXIsICR3aW5kb3csICRkb2N1bWVudCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLCBjcmVhdGVYaHIsICRicm93c2VyLmRlZmVyLCAkd2luZG93LmFuZ3VsYXIuY2FsbGJhY2tzLCAkZG9jdW1lbnRbMF0pO1xyXG4gIH1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVIdHRwQmFja2VuZCgkYnJvd3NlciwgY3JlYXRlWGhyLCAkYnJvd3NlckRlZmVyLCBjYWxsYmFja3MsIHJhd0RvY3VtZW50KSB7XHJcbiAgLy8gVE9ETyh2b2p0YSk6IGZpeCB0aGUgc2lnbmF0dXJlXHJcbiAgcmV0dXJuIGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwb3N0LCBjYWxsYmFjaywgaGVhZGVycywgdGltZW91dCwgd2l0aENyZWRlbnRpYWxzLCByZXNwb25zZVR5cGUpIHtcclxuICAgICRicm93c2VyLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtcclxuICAgIHVybCA9IHVybCB8fCAkYnJvd3Nlci51cmwoKTtcclxuXHJcbiAgICBpZiAobG93ZXJjYXNlKG1ldGhvZCkgPT0gJ2pzb25wJykge1xyXG4gICAgICB2YXIgY2FsbGJhY2tJZCA9ICdfJyArIChjYWxsYmFja3MuY291bnRlcisrKS50b1N0cmluZygzNik7XHJcbiAgICAgIGNhbGxiYWNrc1tjYWxsYmFja0lkXSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBjYWxsYmFja3NbY2FsbGJhY2tJZF0uZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgY2FsbGJhY2tzW2NhbGxiYWNrSWRdLmNhbGxlZCA9IHRydWU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIganNvbnBEb25lID0ganNvbnBSZXEodXJsLnJlcGxhY2UoJ0pTT05fQ0FMTEJBQ0snLCAnYW5ndWxhci5jYWxsYmFja3MuJyArIGNhbGxiYWNrSWQpLFxyXG4gICAgICAgICAgY2FsbGJhY2tJZCwgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XHJcbiAgICAgICAgY29tcGxldGVSZXF1ZXN0KGNhbGxiYWNrLCBzdGF0dXMsIGNhbGxiYWNrc1tjYWxsYmFja0lkXS5kYXRhLCBcIlwiLCB0ZXh0KTtcclxuICAgICAgICBjYWxsYmFja3NbY2FsbGJhY2tJZF0gPSBub29wO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICB2YXIgeGhyID0gY3JlYXRlWGhyKCk7XHJcblxyXG4gICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XHJcbiAgICAgIGZvckVhY2goaGVhZGVycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xyXG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gcmVxdWVzdExvYWRlZCgpIHtcclxuICAgICAgICB2YXIgc3RhdHVzVGV4dCA9IHhoci5zdGF0dXNUZXh0IHx8ICcnO1xyXG5cclxuICAgICAgICAvLyByZXNwb25zZVRleHQgaXMgdGhlIG9sZC1zY2hvb2wgd2F5IG9mIHJldHJpZXZpbmcgcmVzcG9uc2UgKHN1cHBvcnRlZCBieSBJRTggJiA5KVxyXG4gICAgICAgIC8vIHJlc3BvbnNlL3Jlc3BvbnNlVHlwZSBwcm9wZXJ0aWVzIHdlcmUgaW50cm9kdWNlZCBpbiBYSFIgTGV2ZWwyIHNwZWMgKHN1cHBvcnRlZCBieSBJRTEwKVxyXG4gICAgICAgIHZhciByZXNwb25zZSA9ICgncmVzcG9uc2UnIGluIHhocikgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xyXG5cclxuICAgICAgICAvLyBub3JtYWxpemUgSUU5IGJ1ZyAoaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTQ1MClcclxuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXM7XHJcblxyXG4gICAgICAgIC8vIGZpeCBzdGF0dXMgY29kZSB3aGVuIGl0IGlzIDAgKDAgc3RhdHVzIGlzIHVuZG9jdW1lbnRlZCkuXHJcbiAgICAgICAgLy8gT2NjdXJzIHdoZW4gYWNjZXNzaW5nIGZpbGUgcmVzb3VyY2VzIG9yIG9uIEFuZHJvaWQgNC4xIHN0b2NrIGJyb3dzZXJcclxuICAgICAgICAvLyB3aGlsZSByZXRyaWV2aW5nIGZpbGVzIGZyb20gYXBwbGljYXRpb24gY2FjaGUuXHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMCkge1xyXG4gICAgICAgICAgc3RhdHVzID0gcmVzcG9uc2UgPyAyMDAgOiB1cmxSZXNvbHZlKHVybCkucHJvdG9jb2wgPT0gJ2ZpbGUnID8gNDA0IDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjayxcclxuICAgICAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgICAgICByZXNwb25zZSxcclxuICAgICAgICAgICAgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLFxyXG4gICAgICAgICAgICBzdGF0dXNUZXh0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciByZXF1ZXN0RXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBUaGUgcmVzcG9uc2UgaXMgYWx3YXlzIGVtcHR5XHJcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8veGhyLnNwZWMud2hhdHdnLm9yZy8jcmVxdWVzdC1lcnJvci1zdGVwcyBhbmQgaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtbmV0d29yay1lcnJvclxyXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgLTEsIG51bGwsIG51bGwsICcnKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHhoci5vbmVycm9yID0gcmVxdWVzdEVycm9yO1xyXG4gICAgICB4aHIub25hYm9ydCA9IHJlcXVlc3RFcnJvcjtcclxuXHJcbiAgICAgIGlmICh3aXRoQ3JlZGVudGlhbHMpIHtcclxuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlVHlwZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIC8vIFdlYktpdCBhZGRlZCBzdXBwb3J0IGZvciB0aGUganNvbiByZXNwb25zZVR5cGUgdmFsdWUgb24gMDkvMDMvMjAxM1xyXG4gICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTczNjQ4LiBWZXJzaW9ucyBvZiBTYWZhcmkgcHJpb3IgdG8gNyBhcmVcclxuICAgICAgICAgIC8vIGtub3duIHRvIHRocm93IHdoZW4gc2V0dGluZyB0aGUgdmFsdWUgXCJqc29uXCIgYXMgdGhlIHJlc3BvbnNlIHR5cGUuIE90aGVyIG9sZGVyXHJcbiAgICAgICAgICAvLyBicm93c2VycyBpbXBsZW1lbnRpbmcgdGhlIHJlc3BvbnNlVHlwZVxyXG4gICAgICAgICAgLy9cclxuICAgICAgICAgIC8vIFRoZSBqc29uIHJlc3BvbnNlIHR5cGUgY2FuIGJlIGlnbm9yZWQgaWYgbm90IHN1cHBvcnRlZCwgYmVjYXVzZSBKU09OIHBheWxvYWRzIGFyZVxyXG4gICAgICAgICAgLy8gcGFyc2VkIG9uIHRoZSBjbGllbnQtc2lkZSByZWdhcmRsZXNzLlxyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB4aHIuc2VuZChwb3N0IHx8IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aW1lb3V0ID4gMCkge1xyXG4gICAgICB2YXIgdGltZW91dElkID0gJGJyb3dzZXJEZWZlcih0aW1lb3V0UmVxdWVzdCwgdGltZW91dCk7XHJcbiAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZUxpa2UodGltZW91dCkpIHtcclxuICAgICAgdGltZW91dC50aGVuKHRpbWVvdXRSZXF1ZXN0KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gdGltZW91dFJlcXVlc3QoKSB7XHJcbiAgICAgIGpzb25wRG9uZSAmJiBqc29ucERvbmUoKTtcclxuICAgICAgeGhyICYmIHhoci5hYm9ydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgc3RhdHVzLCByZXNwb25zZSwgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCkge1xyXG4gICAgICAvLyBjYW5jZWwgdGltZW91dCBhbmQgc3Vic2VxdWVudCB0aW1lb3V0IHByb21pc2UgcmVzb2x1dGlvblxyXG4gICAgICBpZiAodGltZW91dElkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAkYnJvd3NlckRlZmVyLmNhbmNlbCh0aW1lb3V0SWQpO1xyXG4gICAgICB9XHJcbiAgICAgIGpzb25wRG9uZSA9IHhociA9IG51bGw7XHJcblxyXG4gICAgICBjYWxsYmFjayhzdGF0dXMsIHJlc3BvbnNlLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0KTtcclxuICAgICAgJGJyb3dzZXIuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBqc29ucFJlcSh1cmwsIGNhbGxiYWNrSWQsIGRvbmUpIHtcclxuICAgIC8vIHdlIGNhbid0IHVzZSBqUXVlcnkvanFMaXRlIGhlcmUgYmVjYXVzZSBqUXVlcnkgZG9lcyBjcmF6eSBzaGl0IHdpdGggc2NyaXB0IGVsZW1lbnRzLCBlLmcuOlxyXG4gICAgLy8gLSBmZXRjaGVzIGxvY2FsIHNjcmlwdHMgdmlhIFhIUiBhbmQgZXZhbHMgdGhlbVxyXG4gICAgLy8gLSBhZGRzIGFuZCBpbW1lZGlhdGVseSByZW1vdmVzIHNjcmlwdCBlbGVtZW50cyBmcm9tIHRoZSBkb2N1bWVudFxyXG4gICAgdmFyIHNjcmlwdCA9IHJhd0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpLCBjYWxsYmFjayA9IG51bGw7XHJcbiAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiAgICBzY3JpcHQuc3JjID0gdXJsO1xyXG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcclxuXHJcbiAgICBjYWxsYmFjayA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwibG9hZFwiLCBjYWxsYmFjayk7XHJcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwiZXJyb3JcIiwgY2FsbGJhY2spO1xyXG4gICAgICByYXdEb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XHJcbiAgICAgIHNjcmlwdCA9IG51bGw7XHJcbiAgICAgIHZhciBzdGF0dXMgPSAtMTtcclxuICAgICAgdmFyIHRleHQgPSBcInVua25vd25cIjtcclxuXHJcbiAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBcImxvYWRcIiAmJiAhY2FsbGJhY2tzW2NhbGxiYWNrSWRdLmNhbGxlZCkge1xyXG4gICAgICAgICAgZXZlbnQgPSB7IHR5cGU6IFwiZXJyb3JcIiB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXh0ID0gZXZlbnQudHlwZTtcclxuICAgICAgICBzdGF0dXMgPSBldmVudC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkb25lKSB7XHJcbiAgICAgICAgZG9uZShzdGF0dXMsIHRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFkZEV2ZW50TGlzdGVuZXJGbihzY3JpcHQsIFwibG9hZFwiLCBjYWxsYmFjayk7XHJcbiAgICBhZGRFdmVudExpc3RlbmVyRm4oc2NyaXB0LCBcImVycm9yXCIsIGNhbGxiYWNrKTtcclxuICAgIHJhd0RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgIHJldHVybiBjYWxsYmFjaztcclxuICB9XHJcbn1cclxuXHJcbnZhciAkaW50ZXJwb2xhdGVNaW5FcnIgPSBtaW5FcnIoJyRpbnRlcnBvbGF0ZScpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVXNlZCBmb3IgY29uZmlndXJpbmcgdGhlIGludGVycG9sYXRpb24gbWFya3VwLiBEZWZhdWx0cyB0byBge3tgIGFuZCBgfX1gLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG48ZXhhbXBsZSBtb2R1bGU9XCJjdXN0b21JbnRlcnBvbGF0aW9uQXBwXCI+XHJcbjxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbjxzY3JpcHQ+XHJcbiAgdmFyIGN1c3RvbUludGVycG9sYXRpb25BcHAgPSBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tSW50ZXJwb2xhdGlvbkFwcCcsIFtdKTtcclxuXHJcbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb25maWcoZnVuY3Rpb24oJGludGVycG9sYXRlUHJvdmlkZXIpIHtcclxuICAgICRpbnRlcnBvbGF0ZVByb3ZpZGVyLnN0YXJ0U3ltYm9sKCcvLycpO1xyXG4gICAgJGludGVycG9sYXRlUHJvdmlkZXIuZW5kU3ltYm9sKCcvLycpO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb250cm9sbGVyKCdEZW1vQ29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLmxhYmVsID0gXCJUaGlzIGJpbmRpbmcgaXMgYnJvdWdodCB5b3UgYnkgLy8gaW50ZXJwb2xhdGlvbiBzeW1ib2xzLlwiO1xyXG4gIH0pO1xyXG48L3NjcmlwdD5cclxuPGRpdiBuZy1hcHA9XCJBcHBcIiBuZy1jb250cm9sbGVyPVwiRGVtb0NvbnRyb2xsZXIgYXMgZGVtb1wiPlxyXG4gICAgLy9kZW1vLmxhYmVsLy9cclxuPC9kaXY+XHJcbjwvZmlsZT5cclxuPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gIGl0KCdzaG91bGQgaW50ZXJwb2xhdGUgYmluZGluZyB3aXRoIGN1c3RvbSBzeW1ib2xzJywgZnVuY3Rpb24oKSB7XHJcbiAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdkZW1vLmxhYmVsJykpLmdldFRleHQoKSkudG9CZSgnVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy4nKTtcclxuICB9KTtcclxuPC9maWxlPlxyXG48L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpIHtcclxuICB2YXIgc3RhcnRTeW1ib2wgPSAne3snO1xyXG4gIHZhciBlbmRTeW1ib2wgPSAnfX0nO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2xcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTeW1ib2wgdG8gZGVub3RlIHN0YXJ0IG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB7e2AuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHZhbHVlIG5ldyB2YWx1ZSB0byBzZXQgdGhlIHN0YXJ0aW5nIHN5bWJvbCB0by5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfHNlbGZ9IFJldHVybnMgdGhlIHN5bWJvbCB3aGVuIHVzZWQgYXMgZ2V0dGVyIGFuZCBzZWxmIGlmIHVzZWQgYXMgc2V0dGVyLlxyXG4gICAqL1xyXG4gIHRoaXMuc3RhcnRTeW1ib2wgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHN0YXJ0U3ltYm9sID0gdmFsdWU7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlciNlbmRTeW1ib2xcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTeW1ib2wgdG8gZGVub3RlIHRoZSBlbmQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYH19YC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdmFsdWUgbmV3IHZhbHVlIHRvIHNldCB0aGUgZW5kaW5nIHN5bWJvbCB0by5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfHNlbGZ9IFJldHVybnMgdGhlIHN5bWJvbCB3aGVuIHVzZWQgYXMgZ2V0dGVyIGFuZCBzZWxmIGlmIHVzZWQgYXMgc2V0dGVyLlxyXG4gICAqL1xyXG4gIHRoaXMuZW5kU3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICBlbmRTeW1ib2wgPSB2YWx1ZTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZW5kU3ltYm9sO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRwYXJzZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckc2NlJywgZnVuY3Rpb24oJHBhcnNlLCAkZXhjZXB0aW9uSGFuZGxlciwgJHNjZSkge1xyXG4gICAgdmFyIHN0YXJ0U3ltYm9sTGVuZ3RoID0gc3RhcnRTeW1ib2wubGVuZ3RoLFxyXG4gICAgICAgIGVuZFN5bWJvbExlbmd0aCA9IGVuZFN5bWJvbC5sZW5ndGgsXHJcbiAgICAgICAgZXNjYXBlZFN0YXJ0UmVnZXhwID0gbmV3IFJlZ0V4cChzdGFydFN5bWJvbC5yZXBsYWNlKC8uL2csIGVzY2FwZSksICdnJyksXHJcbiAgICAgICAgZXNjYXBlZEVuZFJlZ2V4cCA9IG5ldyBSZWdFeHAoZW5kU3ltYm9sLnJlcGxhY2UoLy4vZywgZXNjYXBlKSwgJ2cnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBlc2NhcGUoY2gpIHtcclxuICAgICAgcmV0dXJuICdcXFxcXFxcXFxcXFwnICsgY2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlXHJcbiAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICpcclxuICAgICAqIEByZXF1aXJlcyAkcGFyc2VcclxuICAgICAqIEByZXF1aXJlcyAkc2NlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQ29tcGlsZXMgYSBzdHJpbmcgd2l0aCBtYXJrdXAgaW50byBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLiBUaGlzIHNlcnZpY2UgaXMgdXNlZCBieSB0aGVcclxuICAgICAqIEhUTUwge0BsaW5rIG5nLiRjb21waWxlICRjb21waWxlfSBzZXJ2aWNlIGZvciBkYXRhIGJpbmRpbmcuIFNlZVxyXG4gICAgICoge0BsaW5rIG5nLiRpbnRlcnBvbGF0ZVByb3ZpZGVyICRpbnRlcnBvbGF0ZVByb3ZpZGVyfSBmb3IgY29uZmlndXJpbmcgdGhlXHJcbiAgICAgKiBpbnRlcnBvbGF0aW9uIG1hcmt1cC5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqICAgdmFyICRpbnRlcnBvbGF0ZSA9IC4uLjsgLy8gaW5qZWN0ZWRcclxuICAgICAqICAgdmFyIGV4cCA9ICRpbnRlcnBvbGF0ZSgnSGVsbG8ge3tuYW1lIHwgdXBwZXJjYXNlfX0hJyk7XHJcbiAgICAgKiAgIGV4cGVjdChleHAoe25hbWU6J0FuZ3VsYXInfSkudG9FcXVhbCgnSGVsbG8gQU5HVUxBUiEnKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIGAkaW50ZXJwb2xhdGVgIHRha2VzIGFuIG9wdGlvbmFsIGZvdXJ0aCBhcmd1bWVudCwgYGFsbE9yTm90aGluZ2AuIElmIGBhbGxPck5vdGhpbmdgIGlzXHJcbiAgICAgKiBgdHJ1ZWAsIHRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGB1bmRlZmluZWRgIHVubGVzcyBhbGwgZW1iZWRkZWQgZXhwcmVzc2lvbnNcclxuICAgICAqIGV2YWx1YXRlIHRvIGEgdmFsdWUgb3RoZXIgdGhhbiBgdW5kZWZpbmVkYC5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogICB2YXIgJGludGVycG9sYXRlID0gLi4uOyAvLyBpbmplY3RlZFxyXG4gICAgICogICB2YXIgY29udGV4dCA9IHtncmVldGluZzogJ0hlbGxvJywgbmFtZTogdW5kZWZpbmVkIH07XHJcbiAgICAgKlxyXG4gICAgICogICAvLyBkZWZhdWx0IFwiZm9yZ2l2aW5nXCIgbW9kZVxyXG4gICAgICogICB2YXIgZXhwID0gJGludGVycG9sYXRlKCd7e2dyZWV0aW5nfX0ge3tuYW1lfX0hJyk7XHJcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvRXF1YWwoJ0hlbGxvICEnKTtcclxuICAgICAqXHJcbiAgICAgKiAgIC8vIFwiYWxsT3JOb3RoaW5nXCIgbW9kZVxyXG4gICAgICogICBleHAgPSAkaW50ZXJwb2xhdGUoJ3t7Z3JlZXRpbmd9fSB7e25hbWV9fSEnLCBmYWxzZSwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAqICAgY29udGV4dC5uYW1lID0gJ0FuZ3VsYXInO1xyXG4gICAgICogICBleHBlY3QoZXhwKGNvbnRleHQpKS50b0VxdWFsKCdIZWxsbyBBbmd1bGFyIScpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogYGFsbE9yTm90aGluZ2AgaXMgdXNlZnVsIGZvciBpbnRlcnBvbGF0aW5nIFVSTHMuIGBuZ1NyY2AgYW5kIGBuZ1NyY3NldGAgdXNlIHRoaXMgYmVoYXZpb3IuXHJcbiAgICAgKlxyXG4gICAgICogIyMjI0VzY2FwZWQgSW50ZXJwb2xhdGlvblxyXG4gICAgICogJGludGVycG9sYXRlIHByb3ZpZGVzIGEgbWVjaGFuaXNtIGZvciBlc2NhcGluZyBpbnRlcnBvbGF0aW9uIG1hcmtlcnMuIFN0YXJ0IGFuZCBlbmQgbWFya2Vyc1xyXG4gICAgICogY2FuIGJlIGVzY2FwZWQgYnkgcHJlY2VkaW5nIGVhY2ggb2YgdGhlaXIgY2hhcmFjdGVycyB3aXRoIGEgUkVWRVJTRSBTT0xJRFVTIFUrMDA1QyAoYmFja3NsYXNoKS5cclxuICAgICAqIEl0IHdpbGwgYmUgcmVuZGVyZWQgYXMgYSByZWd1bGFyIHN0YXJ0L2VuZCBtYXJrZXIsIGFuZCB3aWxsIG5vdCBiZSBpbnRlcnByZXRlZCBhcyBhbiBleHByZXNzaW9uXHJcbiAgICAgKiBvciBiaW5kaW5nLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgZW5hYmxlcyB3ZWItc2VydmVycyB0byBwcmV2ZW50IHNjcmlwdCBpbmplY3Rpb24gYXR0YWNrcyBhbmQgZGVmYWNpbmcgYXR0YWNrcywgdG8gc29tZVxyXG4gICAgICogZGVncmVlLCB3aGlsZSBhbHNvIGVuYWJsaW5nIGNvZGUgZXhhbXBsZXMgdG8gd29yayB3aXRob3V0IHJlbHlpbmcgb24gdGhlXHJcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTm9uQmluZGFibGUgbmdOb25CaW5kYWJsZX0gZGlyZWN0aXZlLlxyXG4gICAgICpcclxuICAgICAqICoqRm9yIHNlY3VyaXR5IHB1cnBvc2VzLCBpdCBpcyBzdHJvbmdseSBlbmNvdXJhZ2VkIHRoYXQgd2ViIHNlcnZlcnMgZXNjYXBlIHVzZXItc3VwcGxpZWQgZGF0YSxcclxuICAgICAqIHJlcGxhY2luZyBhbmdsZSBicmFja2V0cyAoJmx0OywgJmd0Oykgd2l0aCAmYW1wO2x0OyBhbmQgJmFtcDtndDsgcmVzcGVjdGl2ZWx5LCBhbmQgcmVwbGFjaW5nIGFsbFxyXG4gICAgICogaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIHRoZWlyIGVzY2FwZWQgY291bnRlcnBhcnRzLioqXHJcbiAgICAgKlxyXG4gICAgICogRXNjYXBlZCBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgYXJlIG9ubHkgcmVwbGFjZWQgd2l0aCB0aGUgYWN0dWFsIGludGVycG9sYXRpb24gbWFya2VycyBpbiByZW5kZXJlZFxyXG4gICAgICogb3V0cHV0IHdoZW4gdGhlICRpbnRlcnBvbGF0ZSBzZXJ2aWNlIHByb2Nlc3NlcyB0aGUgdGV4dC4gU28sIGZvciBIVE1MIGVsZW1lbnRzIGludGVycG9sYXRlZFxyXG4gICAgICogYnkge0BsaW5rIG5nLiRjb21waWxlICRjb21waWxlfSwgb3Igb3RoZXJ3aXNlIGludGVycG9sYXRlZCB3aXRoIHRoZSBgbXVzdEhhdmVFeHByZXNzaW9uYCBwYXJhbWV0ZXJcclxuICAgICAqIHNldCB0byBgdHJ1ZWAsIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dCBtdXN0IGNvbnRhaW4gYW4gdW5lc2NhcGVkIGludGVycG9sYXRpb24gZXhwcmVzc2lvbi4gQXMgc3VjaCxcclxuICAgICAqIHRoaXMgaXMgdHlwaWNhbGx5IHVzZWZ1bCBvbmx5IHdoZW4gdXNlci1kYXRhIGlzIHVzZWQgaW4gcmVuZGVyaW5nIGEgdGVtcGxhdGUgZnJvbSB0aGUgc2VydmVyLCBvclxyXG4gICAgICogd2hlbiBvdGhlcndpc2UgdW50cnVzdGVkIGRhdGEgaXMgdXNlZCBieSBhIGRpcmVjdGl2ZS5cclxuICAgICAqXHJcbiAgICAgKiA8ZXhhbXBsZT5cclxuICAgICAqICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICogICAgPGRpdiBuZy1pbml0PVwidXNlcm5hbWU9J0EgdXNlcidcIj5cclxuICAgICAqICAgICAgPHAgbmctaW5pdD1cImFwcHRpdGxlPSdFc2NhcGluZyBkZW1vJ1wiPnt7YXBwdGl0bGV9fTogXFx7XFx7IHVzZXJuYW1lID0gXCJkZWZhY2VkIHZhbHVlXCI7IFxcfVxcfVxyXG4gICAgICogICAgICAgIDwvcD5cclxuICAgICAqICAgICAgPHA+PHN0cm9uZz57e3VzZXJuYW1lfX08L3N0cm9uZz4gYXR0ZW1wdHMgdG8gaW5qZWN0IGNvZGUgd2hpY2ggd2lsbCBkZWZhY2UgdGhlXHJcbiAgICAgKiAgICAgICAgYXBwbGljYXRpb24sIGJ1dCBmYWlscyB0byBhY2NvbXBsaXNoIHRoZWlyIHRhc2ssIGJlY2F1c2UgdGhlIHNlcnZlciBoYXMgY29ycmVjdGx5XHJcbiAgICAgKiAgICAgICAgZXNjYXBlZCB0aGUgaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIFJFVkVSU0UgU09MSURVUyBVKzAwNUMgKGJhY2tzbGFzaClcclxuICAgICAqICAgICAgICBjaGFyYWN0ZXJzLjwvcD5cclxuICAgICAqICAgICAgPHA+SW5zdGVhZCwgdGhlIHJlc3VsdCBvZiB0aGUgYXR0ZW1wdGVkIHNjcmlwdCBpbmplY3Rpb24gaXMgdmlzaWJsZSwgYW5kIGNhbiBiZSByZW1vdmVkXHJcbiAgICAgKiAgICAgICAgZnJvbSB0aGUgZGF0YWJhc2UgYnkgYW4gYWRtaW5pc3RyYXRvci48L3A+XHJcbiAgICAgKiAgICA8L2Rpdj5cclxuICAgICAqICA8L2ZpbGU+XHJcbiAgICAgKiA8L2V4YW1wbGU+XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRleHQgd2l0aCBtYXJrdXAgdG8gaW50ZXJwb2xhdGUuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBtdXN0SGF2ZUV4cHJlc3Npb24gaWYgc2V0IHRvIHRydWUgdGhlbiB0aGUgaW50ZXJwb2xhdGlvbiBzdHJpbmcgbXVzdCBoYXZlXHJcbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIGluIG9yZGVyIHRvIHJldHVybiBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLiBTdHJpbmdzIHdpdGggbm9cclxuICAgICAqICAgIGVtYmVkZGVkIGV4cHJlc3Npb24gd2lsbCByZXR1cm4gbnVsbCBmb3IgdGhlIGludGVycG9sYXRpb24gZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IHRydXN0ZWRDb250ZXh0IHdoZW4gcHJvdmlkZWQsIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBwYXNzZXMgdGhlIGludGVycG9sYXRlZFxyXG4gICAgICogICAgcmVzdWx0IHRocm91Z2gge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWQoaW50ZXJwb2xhdGVkUmVzdWx0LFxyXG4gICAgICogICAgdHJ1c3RlZENvbnRleHQpfSBiZWZvcmUgcmV0dXJuaW5nIGl0LiAgUmVmZXIgdG8gdGhlIHtAbGluayBuZy4kc2NlICRzY2V9IHNlcnZpY2UgdGhhdFxyXG4gICAgICogICAgcHJvdmlkZXMgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgZm9yIGRldGFpbHMuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbGxPck5vdGhpbmcgaWYgYHRydWVgLCB0aGVuIHRoZSByZXR1cm5lZCBmdW5jdGlvbiByZXR1cm5zIHVuZGVmaW5lZFxyXG4gICAgICogICAgdW5sZXNzIGFsbCBlbWJlZGRlZCBleHByZXNzaW9ucyBldmFsdWF0ZSB0byBhIHZhbHVlIG90aGVyIHRoYW4gYHVuZGVmaW5lZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCl9IGFuIGludGVycG9sYXRpb24gZnVuY3Rpb24gd2hpY2ggaXMgdXNlZCB0byBjb21wdXRlIHRoZVxyXG4gICAgICogICAgaW50ZXJwb2xhdGVkIHN0cmluZy4gVGhlIGZ1bmN0aW9uIGhhcyB0aGVzZSBwYXJhbWV0ZXJzOlxyXG4gICAgICpcclxuICAgICAqIC0gYGNvbnRleHRgOiBldmFsdWF0aW9uIGNvbnRleHQgZm9yIGFsbCBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgaW50ZXJwb2xhdGVkIHRleHRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gJGludGVycG9sYXRlKHRleHQsIG11c3RIYXZlRXhwcmVzc2lvbiwgdHJ1c3RlZENvbnRleHQsIGFsbE9yTm90aGluZykge1xyXG4gICAgICBhbGxPck5vdGhpbmcgPSAhIWFsbE9yTm90aGluZztcclxuICAgICAgdmFyIHN0YXJ0SW5kZXgsXHJcbiAgICAgICAgICBlbmRJbmRleCxcclxuICAgICAgICAgIGluZGV4ID0gMCxcclxuICAgICAgICAgIGV4cHJlc3Npb25zID0gW10sXHJcbiAgICAgICAgICBwYXJzZUZucyA9IFtdLFxyXG4gICAgICAgICAgdGV4dExlbmd0aCA9IHRleHQubGVuZ3RoLFxyXG4gICAgICAgICAgZXhwLFxyXG4gICAgICAgICAgY29uY2F0ID0gW10sXHJcbiAgICAgICAgICBleHByZXNzaW9uUG9zaXRpb25zID0gW107XHJcblxyXG4gICAgICB3aGlsZSAoaW5kZXggPCB0ZXh0TGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKCgoc3RhcnRJbmRleCA9IHRleHQuaW5kZXhPZihzdGFydFN5bWJvbCwgaW5kZXgpKSAhPSAtMSkgJiZcclxuICAgICAgICAgICAgICgoZW5kSW5kZXggPSB0ZXh0LmluZGV4T2YoZW5kU3ltYm9sLCBzdGFydEluZGV4ICsgc3RhcnRTeW1ib2xMZW5ndGgpKSAhPSAtMSkpIHtcclxuICAgICAgICAgIGlmIChpbmRleCAhPT0gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgICBjb25jYXQucHVzaCh1bmVzY2FwZVRleHQodGV4dC5zdWJzdHJpbmcoaW5kZXgsIHN0YXJ0SW5kZXgpKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBleHAgPSB0ZXh0LnN1YnN0cmluZyhzdGFydEluZGV4ICsgc3RhcnRTeW1ib2xMZW5ndGgsIGVuZEluZGV4KTtcclxuICAgICAgICAgIGV4cHJlc3Npb25zLnB1c2goZXhwKTtcclxuICAgICAgICAgIHBhcnNlRm5zLnB1c2goJHBhcnNlKGV4cCwgcGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvcikpO1xyXG4gICAgICAgICAgaW5kZXggPSBlbmRJbmRleCArIGVuZFN5bWJvbExlbmd0aDtcclxuICAgICAgICAgIGV4cHJlc3Npb25Qb3NpdGlvbnMucHVzaChjb25jYXQubGVuZ3RoKTtcclxuICAgICAgICAgIGNvbmNhdC5wdXNoKCcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gd2UgZGlkIG5vdCBmaW5kIGFuIGludGVycG9sYXRpb24sIHNvIHdlIGhhdmUgdG8gYWRkIHRoZSByZW1haW5kZXIgdG8gdGhlIHNlcGFyYXRvcnMgYXJyYXlcclxuICAgICAgICAgIGlmIChpbmRleCAhPT0gdGV4dExlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25jYXQucHVzaCh1bmVzY2FwZVRleHQodGV4dC5zdWJzdHJpbmcoaW5kZXgpKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENvbmNhdGVuYXRpbmcgZXhwcmVzc2lvbnMgbWFrZXMgaXQgaGFyZCB0byByZWFzb24gYWJvdXQgd2hldGhlciBzb21lIGNvbWJpbmF0aW9uIG9mXHJcbiAgICAgIC8vIGNvbmNhdGVuYXRlZCB2YWx1ZXMgYXJlIHVuc2FmZSB0byB1c2UgYW5kIGNvdWxkIGVhc2lseSBsZWFkIHRvIFhTUy4gIEJ5IHJlcXVpcmluZyB0aGF0IGFcclxuICAgICAgLy8gc2luZ2xlIGV4cHJlc3Npb24gYmUgdXNlZCBmb3IgaWZyYW1lW3NyY10sIG9iamVjdFtzcmNdLCBldGMuLCB3ZSBlbnN1cmUgdGhhdCB0aGUgdmFsdWVcclxuICAgICAgLy8gdGhhdCdzIHVzZWQgaXMgYXNzaWduZWQgb3IgY29uc3RydWN0ZWQgYnkgc29tZSBKUyBjb2RlIHNvbWV3aGVyZSB0aGF0IGlzIG1vcmUgdGVzdGFibGUgb3JcclxuICAgICAgLy8gbWFrZSBpdCBvYnZpb3VzIHRoYXQgeW91IGJvdW5kIHRoZSB2YWx1ZSB0byBzb21lIHVzZXIgY29udHJvbGxlZCB2YWx1ZS4gIFRoaXMgaGVscHMgcmVkdWNlXHJcbiAgICAgIC8vIHRoZSBsb2FkIHdoZW4gYXVkaXRpbmcgZm9yIFhTUyBpc3N1ZXMuXHJcbiAgICAgIGlmICh0cnVzdGVkQ29udGV4dCAmJiBjb25jYXQubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgdGhyb3cgJGludGVycG9sYXRlTWluRXJyKCdub2NvbmNhdCcsXHJcbiAgICAgICAgICAgICAgXCJFcnJvciB3aGlsZSBpbnRlcnBvbGF0aW5nOiB7MH1cXG5TdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkaXNhbGxvd3MgXCIgK1xyXG4gICAgICAgICAgICAgIFwiaW50ZXJwb2xhdGlvbnMgdGhhdCBjb25jYXRlbmF0ZSBtdWx0aXBsZSBleHByZXNzaW9ucyB3aGVuIGEgdHJ1c3RlZCB2YWx1ZSBpcyBcIiArXHJcbiAgICAgICAgICAgICAgXCJyZXF1aXJlZC4gIFNlZSBodHRwOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy4kc2NlXCIsIHRleHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIW11c3RIYXZlRXhwcmVzc2lvbiB8fCBleHByZXNzaW9ucy5sZW5ndGgpIHtcclxuICAgICAgICB2YXIgY29tcHV0ZSA9IGZ1bmN0aW9uKHZhbHVlcykge1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYWxsT3JOb3RoaW5nICYmIGlzVW5kZWZpbmVkKHZhbHVlc1tpXSkpIHJldHVybjtcclxuICAgICAgICAgICAgY29uY2F0W2V4cHJlc3Npb25Qb3NpdGlvbnNbaV1dID0gdmFsdWVzW2ldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGNvbmNhdC5qb2luKCcnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0VmFsdWUgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydXN0ZWRDb250ZXh0ID9cclxuICAgICAgICAgICAgJHNjZS5nZXRUcnVzdGVkKHRydXN0ZWRDb250ZXh0LCB2YWx1ZSkgOlxyXG4gICAgICAgICAgICAkc2NlLnZhbHVlT2YodmFsdWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzdHJpbmdpZnkgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsgLy8gbnVsbCB8fCB1bmRlZmluZWRcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcclxuICAgICAgICAgICAgICB2YWx1ZSA9ICcnICsgdmFsdWU7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgdmFsdWUgPSB0b0pzb24odmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uIGludGVycG9sYXRpb25Gbihjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgdmFyIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGlpKTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgZm9yICg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaV0gPSBwYXJzZUZuc1tpXShjb250ZXh0KTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBjb21wdXRlKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgIHZhciBuZXdFcnIgPSAkaW50ZXJwb2xhdGVNaW5FcnIoJ2ludGVycicsIFwiQ2FuJ3QgaW50ZXJwb2xhdGU6IHswfVxcbnsxfVwiLCB0ZXh0LFxyXG4gICAgICAgICAgICAgICAgICBlcnIudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIobmV3RXJyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH0sIHtcclxuICAgICAgICAgIC8vIGFsbCBvZiB0aGVzZSBwcm9wZXJ0aWVzIGFyZSB1bmRvY3VtZW50ZWQgZm9yIG5vd1xyXG4gICAgICAgICAgZXhwOiB0ZXh0LCAvL2p1c3QgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCByZWd1bGFyIHdhdGNoZXJzIGNyZWF0ZWQgdmlhICR3YXRjaFxyXG4gICAgICAgICAgZXhwcmVzc2lvbnM6IGV4cHJlc3Npb25zLFxyXG4gICAgICAgICAgJCR3YXRjaERlbGVnYXRlOiBmdW5jdGlvbihzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBzY29wZS4kd2F0Y2hHcm91cChwYXJzZUZucywgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoZXIodmFsdWVzLCBvbGRWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICB2YXIgY3VyclZhbHVlID0gY29tcHV0ZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBjdXJyVmFsdWUsIHZhbHVlcyAhPT0gb2xkVmFsdWVzID8gbGFzdFZhbHVlIDogY3VyclZhbHVlLCBzY29wZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGN1cnJWYWx1ZTtcclxuICAgICAgICAgICAgfSwgb2JqZWN0RXF1YWxpdHkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiB1bmVzY2FwZVRleHQodGV4dCkge1xyXG4gICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoZXNjYXBlZFN0YXJ0UmVnZXhwLCBzdGFydFN5bWJvbCkuXHJcbiAgICAgICAgICByZXBsYWNlKGVzY2FwZWRFbmRSZWdleHAsIGVuZFN5bWJvbCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHBhcnNlU3RyaW5naWZ5SW50ZXJjZXB0b3IodmFsdWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdmFsdWUgPSBnZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICByZXR1cm4gYWxsT3JOb3RoaW5nICYmICFpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgdmFyIG5ld0VyciA9ICRpbnRlcnBvbGF0ZU1pbkVycignaW50ZXJyJywgXCJDYW4ndCBpbnRlcnBvbGF0ZTogezB9XFxuezF9XCIsIHRleHQsXHJcbiAgICAgICAgICAgIGVyci50b1N0cmluZygpKTtcclxuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKG5ld0Vycik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlI3N0YXJ0U3ltYm9sXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIHN0YXJ0IG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB7e2AuXHJcbiAgICAgKlxyXG4gICAgICogVXNlIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciNzdGFydFN5bWJvbCBgJGludGVycG9sYXRlUHJvdmlkZXIuc3RhcnRTeW1ib2xgfSB0byBjaGFuZ2VcclxuICAgICAqIHRoZSBzeW1ib2wuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gc3RhcnQgc3ltYm9sLlxyXG4gICAgICovXHJcbiAgICAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2wgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGUjZW5kU3ltYm9sXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIGVuZCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBgfX1gLlxyXG4gICAgICpcclxuICAgICAqIFVzZSB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIjZW5kU3ltYm9sIGAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2xgfSB0byBjaGFuZ2VcclxuICAgICAqIHRoZSBzeW1ib2wuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gZW5kIHN5bWJvbC5cclxuICAgICAqL1xyXG4gICAgJGludGVycG9sYXRlLmVuZFN5bWJvbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gZW5kU3ltYm9sO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gJGludGVycG9sYXRlO1xyXG4gIH1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiAkSW50ZXJ2YWxQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJHdpbmRvdycsICckcScsICckJHEnLFxyXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkd2luZG93LCAgICRxLCAgICQkcSkge1xyXG4gICAgdmFyIGludGVydmFscyA9IHt9O1xyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAgKiBAbmFtZSAkaW50ZXJ2YWxcclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAqIEFuZ3VsYXIncyB3cmFwcGVyIGZvciBgd2luZG93LnNldEludGVydmFsYC4gVGhlIGBmbmAgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZXZlcnkgYGRlbGF5YFxyXG4gICAgICAqIG1pbGxpc2Vjb25kcy5cclxuICAgICAgKlxyXG4gICAgICAqIFRoZSByZXR1cm4gdmFsdWUgb2YgcmVnaXN0ZXJpbmcgYW4gaW50ZXJ2YWwgZnVuY3Rpb24gaXMgYSBwcm9taXNlLiBUaGlzIHByb21pc2Ugd2lsbCBiZVxyXG4gICAgICAqIG5vdGlmaWVkIHVwb24gZWFjaCB0aWNrIG9mIHRoZSBpbnRlcnZhbCwgYW5kIHdpbGwgYmUgcmVzb2x2ZWQgYWZ0ZXIgYGNvdW50YCBpdGVyYXRpb25zLCBvclxyXG4gICAgICAqIHJ1biBpbmRlZmluaXRlbHkgaWYgYGNvdW50YCBpcyBub3QgZGVmaW5lZC4gVGhlIHZhbHVlIG9mIHRoZSBub3RpZmljYXRpb24gd2lsbCBiZSB0aGVcclxuICAgICAgKiBudW1iZXIgb2YgaXRlcmF0aW9ucyB0aGF0IGhhdmUgcnVuLlxyXG4gICAgICAqIFRvIGNhbmNlbCBhbiBpbnRlcnZhbCwgY2FsbCBgJGludGVydmFsLmNhbmNlbChwcm9taXNlKWAuXHJcbiAgICAgICpcclxuICAgICAgKiBJbiB0ZXN0cyB5b3UgY2FuIHVzZSB7QGxpbmsgbmdNb2NrLiRpbnRlcnZhbCNmbHVzaCBgJGludGVydmFsLmZsdXNoKG1pbGxpcylgfSB0b1xyXG4gICAgICAqIG1vdmUgZm9yd2FyZCBieSBgbWlsbGlzYCBtaWxsaXNlY29uZHMgYW5kIHRyaWdnZXIgYW55IGZ1bmN0aW9ucyBzY2hlZHVsZWQgdG8gcnVuIGluIHRoYXRcclxuICAgICAgKiB0aW1lLlxyXG4gICAgICAqXHJcbiAgICAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICAgICAgKiAqKk5vdGUqKjogSW50ZXJ2YWxzIGNyZWF0ZWQgYnkgdGhpcyBzZXJ2aWNlIG11c3QgYmUgZXhwbGljaXRseSBkZXN0cm95ZWQgd2hlbiB5b3UgYXJlIGZpbmlzaGVkXHJcbiAgICAgICogd2l0aCB0aGVtLiAgSW4gcGFydGljdWxhciB0aGV5IGFyZSBub3QgYXV0b21hdGljYWxseSBkZXN0cm95ZWQgd2hlbiBhIGNvbnRyb2xsZXIncyBzY29wZSBvciBhXHJcbiAgICAgICogZGlyZWN0aXZlJ3MgZWxlbWVudCBhcmUgZGVzdHJveWVkLlxyXG4gICAgICAqIFlvdSBzaG91bGQgdGFrZSB0aGlzIGludG8gY29uc2lkZXJhdGlvbiBhbmQgbWFrZSBzdXJlIHRvIGFsd2F5cyBjYW5jZWwgdGhlIGludGVydmFsIGF0IHRoZVxyXG4gICAgICAqIGFwcHJvcHJpYXRlIG1vbWVudC4gIFNlZSB0aGUgZXhhbXBsZSBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIG9uIGhvdyBhbmQgd2hlbiB0byBkbyB0aGlzLlxyXG4gICAgICAqIDwvZGl2PlxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCByZXBlYXRlZGx5LlxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZWFjaCBmdW5jdGlvbiBjYWxsLlxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gW2NvdW50PTBdIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQuIElmIG5vdCBzZXQsIG9yIDAsIHdpbGwgcmVwZWF0XHJcbiAgICAgICogICBpbmRlZmluaXRlbHkuXHJcbiAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW2ludm9rZUFwcGx5PXRydWVdIElmIHNldCB0byBgZmFsc2VgIHNraXBzIG1vZGVsIGRpcnR5IGNoZWNraW5nLCBvdGhlcndpc2VcclxuICAgICAgKiAgIHdpbGwgaW52b2tlIGBmbmAgd2l0aGluIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHkgJGFwcGx5fSBibG9jay5cclxuICAgICAgKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHdoaWNoIHdpbGwgYmUgbm90aWZpZWQgb24gZWFjaCBpdGVyYXRpb24uXHJcbiAgICAgICpcclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqIDxleGFtcGxlIG1vZHVsZT1cImludGVydmFsRXhhbXBsZVwiPlxyXG4gICAgICAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICogICA8c2NyaXB0PlxyXG4gICAgICAqICAgICBhbmd1bGFyLm1vZHVsZSgnaW50ZXJ2YWxFeGFtcGxlJywgW10pXHJcbiAgICAgICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGludGVydmFsJyxcclxuICAgICAgKiAgICAgICAgIGZ1bmN0aW9uKCRzY29wZSwgJGludGVydmFsKSB7XHJcbiAgICAgICogICAgICAgICAgICRzY29wZS5mb3JtYXQgPSAnTS9kL3l5IGg6bW06c3MgYSc7XHJcbiAgICAgICogICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gMTAwO1xyXG4gICAgICAqICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9IDEyMDtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICB2YXIgc3RvcDtcclxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmZpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICogICAgICAgICAgICAgLy8gRG9uJ3Qgc3RhcnQgYSBuZXcgZmlnaHQgaWYgd2UgYXJlIGFscmVhZHkgZmlnaHRpbmdcclxuICAgICAgKiAgICAgICAgICAgICBpZiAoIGFuZ3VsYXIuaXNEZWZpbmVkKHN0b3ApICkgcmV0dXJuO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAgICAgc3RvcCA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgKiAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYmxvb2RfMSA+IDAgJiYgJHNjb3BlLmJsb29kXzIgPiAwKSB7XHJcbiAgICAgICogICAgICAgICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gJHNjb3BlLmJsb29kXzEgLSAzO1xyXG4gICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9ICRzY29wZS5ibG9vZF8yIC0gNDtcclxuICAgICAgKiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICogICAgICAgICAgICAgICAgICRzY29wZS5zdG9wRmlnaHQoKTtcclxuICAgICAgKiAgICAgICAgICAgICAgIH1cclxuICAgICAgKiAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAqICAgICAgICAgICB9O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAgICRzY29wZS5zdG9wRmlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgKiAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoc3RvcCkpIHtcclxuICAgICAgKiAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcCk7XHJcbiAgICAgICogICAgICAgICAgICAgICBzdG9wID0gdW5kZWZpbmVkO1xyXG4gICAgICAqICAgICAgICAgICAgIH1cclxuICAgICAgKiAgICAgICAgICAgfTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICAkc2NvcGUucmVzZXRGaWdodCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAqICAgICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gMTAwO1xyXG4gICAgICAqICAgICAgICAgICAgICRzY29wZS5ibG9vZF8yID0gMTIwO1xyXG4gICAgICAqICAgICAgICAgICB9O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICogICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGludGVydmFsIGlzIGRlc3Ryb3llZCB0b29cclxuICAgICAgKiAgICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0KCk7XHJcbiAgICAgICogICAgICAgICAgIH0pO1xyXG4gICAgICAqICAgICAgICAgfV0pXHJcbiAgICAgICogICAgICAgLy8gUmVnaXN0ZXIgdGhlICdteUN1cnJlbnRUaW1lJyBkaXJlY3RpdmUgZmFjdG9yeSBtZXRob2QuXHJcbiAgICAgICogICAgICAgLy8gV2UgaW5qZWN0ICRpbnRlcnZhbCBhbmQgZGF0ZUZpbHRlciBzZXJ2aWNlIHNpbmNlIHRoZSBmYWN0b3J5IG1ldGhvZCBpcyBESS5cclxuICAgICAgKiAgICAgICAuZGlyZWN0aXZlKCdteUN1cnJlbnRUaW1lJywgWyckaW50ZXJ2YWwnLCAnZGF0ZUZpbHRlcicsXHJcbiAgICAgICogICAgICAgICBmdW5jdGlvbigkaW50ZXJ2YWwsIGRhdGVGaWx0ZXIpIHtcclxuICAgICAgKiAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBkaXJlY3RpdmUgbGluayBmdW5jdGlvbi4gKGNvbXBpbGUgZnVuY3Rpb24gbm90IG5lZWRlZClcclxuICAgICAgKiAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAqICAgICAgICAgICAgIHZhciBmb3JtYXQsICAvLyBkYXRlIGZvcm1hdFxyXG4gICAgICAqICAgICAgICAgICAgICAgICBzdG9wVGltZTsgLy8gc28gdGhhdCB3ZSBjYW4gY2FuY2VsIHRoZSB0aW1lIHVwZGF0ZXNcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICAgIC8vIHVzZWQgdG8gdXBkYXRlIHRoZSBVSVxyXG4gICAgICAqICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoKSB7XHJcbiAgICAgICogICAgICAgICAgICAgICBlbGVtZW50LnRleHQoZGF0ZUZpbHRlcihuZXcgRGF0ZSgpLCBmb3JtYXQpKTtcclxuICAgICAgKiAgICAgICAgICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgICAgICAvLyB3YXRjaCB0aGUgZXhwcmVzc2lvbiwgYW5kIHVwZGF0ZSB0aGUgVUkgb24gY2hhbmdlLlxyXG4gICAgICAqICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5teUN1cnJlbnRUaW1lLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAqICAgICAgICAgICAgICAgZm9ybWF0ID0gdmFsdWU7XHJcbiAgICAgICogICAgICAgICAgICAgICB1cGRhdGVUaW1lKCk7XHJcbiAgICAgICogICAgICAgICAgICAgfSk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgICAgICBzdG9wVGltZSA9ICRpbnRlcnZhbCh1cGRhdGVUaW1lLCAxMDAwKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgICAgIC8vIGxpc3RlbiBvbiBET00gZGVzdHJveSAocmVtb3ZhbCkgZXZlbnQsIGFuZCBjYW5jZWwgdGhlIG5leHQgVUkgdXBkYXRlXHJcbiAgICAgICogICAgICAgICAgICAgLy8gdG8gcHJldmVudCB1cGRhdGluZyB0aW1lIGFmdGVyIHRoZSBET00gZWxlbWVudCB3YXMgcmVtb3ZlZC5cclxuICAgICAgKiAgICAgICAgICAgICBlbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAqICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChzdG9wVGltZSk7XHJcbiAgICAgICogICAgICAgICAgICAgfSk7XHJcbiAgICAgICogICAgICAgICAgIH1cclxuICAgICAgKiAgICAgICAgIH1dKTtcclxuICAgICAgKiAgIDwvc2NyaXB0PlxyXG4gICAgICAqXHJcbiAgICAgICogICA8ZGl2PlxyXG4gICAgICAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAqICAgICAgIERhdGUgZm9ybWF0OiA8aW5wdXQgbmctbW9kZWw9XCJmb3JtYXRcIj4gPGhyLz5cclxuICAgICAgKiAgICAgICBDdXJyZW50IHRpbWUgaXM6IDxzcGFuIG15LWN1cnJlbnQtdGltZT1cImZvcm1hdFwiPjwvc3Bhbj5cclxuICAgICAgKiAgICAgICA8aHIvPlxyXG4gICAgICAqICAgICAgIEJsb29kIDEgOiA8Zm9udCBjb2xvcj0ncmVkJz57e2Jsb29kXzF9fTwvZm9udD5cclxuICAgICAgKiAgICAgICBCbG9vZCAyIDogPGZvbnQgY29sb3I9J3JlZCc+e3tibG9vZF8yfX08L2ZvbnQ+XHJcbiAgICAgICogICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1uZy1jbGljaz1cImZpZ2h0KClcIj5GaWdodDwvYnV0dG9uPlxyXG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJzdG9wRmlnaHQoKVwiPlN0b3BGaWdodDwvYnV0dG9uPlxyXG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJyZXNldEZpZ2h0KClcIj5yZXNldEZpZ2h0PC9idXR0b24+XHJcbiAgICAgICogICAgIDwvZGl2PlxyXG4gICAgICAqICAgPC9kaXY+XHJcbiAgICAgICpcclxuICAgICAgKiA8L2ZpbGU+XHJcbiAgICAgICogPC9leGFtcGxlPlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gaW50ZXJ2YWwoZm4sIGRlbGF5LCBjb3VudCwgaW52b2tlQXBwbHkpIHtcclxuICAgICAgdmFyIHNldEludGVydmFsID0gJHdpbmRvdy5zZXRJbnRlcnZhbCxcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwgPSAkd2luZG93LmNsZWFySW50ZXJ2YWwsXHJcbiAgICAgICAgICBpdGVyYXRpb24gPSAwLFxyXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcclxuICAgICAgICAgIGRlZmVycmVkID0gKHNraXBBcHBseSA/ICQkcSA6ICRxKS5kZWZlcigpLFxyXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XHJcblxyXG4gICAgICBjb3VudCA9IGlzRGVmaW5lZChjb3VudCkgPyBjb3VudCA6IDA7XHJcblxyXG4gICAgICBwcm9taXNlLnRoZW4obnVsbCwgbnVsbCwgZm4pO1xyXG5cclxuICAgICAgcHJvbWlzZS4kJGludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiB0aWNrKCkge1xyXG4gICAgICAgIGRlZmVycmVkLm5vdGlmeShpdGVyYXRpb24rKyk7XHJcblxyXG4gICAgICAgIGlmIChjb3VudCA+IDAgJiYgaXRlcmF0aW9uID49IGNvdW50KSB7XHJcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGl0ZXJhdGlvbik7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtcclxuICAgICAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XHJcblxyXG4gICAgICB9LCBkZWxheSk7XHJcblxyXG4gICAgICBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdID0gZGVmZXJyZWQ7XHJcblxyXG4gICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgKiBAbmFtZSAkaW50ZXJ2YWwjY2FuY2VsXHJcbiAgICAgICpcclxuICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgKiBDYW5jZWxzIGEgdGFzayBhc3NvY2lhdGVkIHdpdGggdGhlIGBwcm9taXNlYC5cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbSB7cHJvbWlzZX0gcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCRpbnRlcnZhbGAgZnVuY3Rpb24uXHJcbiAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIHdhcyBzdWNjZXNzZnVsbHkgY2FuY2VsZWQuXHJcbiAgICAgICovXHJcbiAgICBpbnRlcnZhbC5jYW5jZWwgPSBmdW5jdGlvbihwcm9taXNlKSB7XHJcbiAgICAgIGlmIChwcm9taXNlICYmIHByb21pc2UuJCRpbnRlcnZhbElkIGluIGludGVydmFscykge1xyXG4gICAgICAgIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO1xyXG4gICAgICAgICR3aW5kb3cuY2xlYXJJbnRlcnZhbChwcm9taXNlLiQkaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgZGVsZXRlIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF07XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gaW50ZXJ2YWw7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkbG9jYWxlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiAkbG9jYWxlIHNlcnZpY2UgcHJvdmlkZXMgbG9jYWxpemF0aW9uIHJ1bGVzIGZvciB2YXJpb3VzIEFuZ3VsYXIgY29tcG9uZW50cy4gQXMgb2YgcmlnaHQgbm93IHRoZVxyXG4gKiBvbmx5IHB1YmxpYyBhcGkgaXM6XHJcbiAqXHJcbiAqICogYGlkYCDigJMgYHtzdHJpbmd9YCDigJMgbG9jYWxlIGlkIGZvcm1hdHRlZCBhcyBgbGFuZ3VhZ2VJZC1jb3VudHJ5SWRgIChlLmcuIGBlbi11c2ApXHJcbiAqL1xyXG5mdW5jdGlvbiAkTG9jYWxlUHJvdmlkZXIoKSB7XHJcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogJ2VuLXVzJyxcclxuXHJcbiAgICAgIE5VTUJFUl9GT1JNQVRTOiB7XHJcbiAgICAgICAgREVDSU1BTF9TRVA6ICcuJyxcclxuICAgICAgICBHUk9VUF9TRVA6ICcsJyxcclxuICAgICAgICBQQVRURVJOUzogW1xyXG4gICAgICAgICAgeyAvLyBEZWNpbWFsIFBhdHRlcm5cclxuICAgICAgICAgICAgbWluSW50OiAxLFxyXG4gICAgICAgICAgICBtaW5GcmFjOiAwLFxyXG4gICAgICAgICAgICBtYXhGcmFjOiAzLFxyXG4gICAgICAgICAgICBwb3NQcmU6ICcnLFxyXG4gICAgICAgICAgICBwb3NTdWY6ICcnLFxyXG4gICAgICAgICAgICBuZWdQcmU6ICctJyxcclxuICAgICAgICAgICAgbmVnU3VmOiAnJyxcclxuICAgICAgICAgICAgZ1NpemU6IDMsXHJcbiAgICAgICAgICAgIGxnU2l6ZTogM1xyXG4gICAgICAgICAgfSx7IC8vQ3VycmVuY3kgUGF0dGVyblxyXG4gICAgICAgICAgICBtaW5JbnQ6IDEsXHJcbiAgICAgICAgICAgIG1pbkZyYWM6IDIsXHJcbiAgICAgICAgICAgIG1heEZyYWM6IDIsXHJcbiAgICAgICAgICAgIHBvc1ByZTogJ1xcdTAwQTQnLFxyXG4gICAgICAgICAgICBwb3NTdWY6ICcnLFxyXG4gICAgICAgICAgICBuZWdQcmU6ICcoXFx1MDBBNCcsXHJcbiAgICAgICAgICAgIG5lZ1N1ZjogJyknLFxyXG4gICAgICAgICAgICBnU2l6ZTogMyxcclxuICAgICAgICAgICAgbGdTaXplOiAzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBDVVJSRU5DWV9TWU06ICckJ1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgREFURVRJTUVfRk9STUFUUzoge1xyXG4gICAgICAgIE1PTlRIOlxyXG4gICAgICAgICAgICAnSmFudWFyeSxGZWJydWFyeSxNYXJjaCxBcHJpbCxNYXksSnVuZSxKdWx5LEF1Z3VzdCxTZXB0ZW1iZXIsT2N0b2JlcixOb3ZlbWJlcixEZWNlbWJlcidcclxuICAgICAgICAgICAgLnNwbGl0KCcsJyksXHJcbiAgICAgICAgU0hPUlRNT05USDogICdKYW4sRmViLE1hcixBcHIsTWF5LEp1bixKdWwsQXVnLFNlcCxPY3QsTm92LERlYycuc3BsaXQoJywnKSxcclxuICAgICAgICBEQVk6ICdTdW5kYXksTW9uZGF5LFR1ZXNkYXksV2VkbmVzZGF5LFRodXJzZGF5LEZyaWRheSxTYXR1cmRheScuc3BsaXQoJywnKSxcclxuICAgICAgICBTSE9SVERBWTogJ1N1bixNb24sVHVlLFdlZCxUaHUsRnJpLFNhdCcuc3BsaXQoJywnKSxcclxuICAgICAgICBBTVBNUzogWydBTScsJ1BNJ10sXHJcbiAgICAgICAgbWVkaXVtOiAnTU1NIGQsIHkgaDptbTpzcyBhJyxcclxuICAgICAgICAnc2hvcnQnOiAnTS9kL3l5IGg6bW0gYScsXHJcbiAgICAgICAgZnVsbERhdGU6ICdFRUVFLCBNTU1NIGQsIHknLFxyXG4gICAgICAgIGxvbmdEYXRlOiAnTU1NTSBkLCB5JyxcclxuICAgICAgICBtZWRpdW1EYXRlOiAnTU1NIGQsIHknLFxyXG4gICAgICAgIHNob3J0RGF0ZTogJ00vZC95eScsXHJcbiAgICAgICAgbWVkaXVtVGltZTogJ2g6bW06c3MgYScsXHJcbiAgICAgICAgc2hvcnRUaW1lOiAnaDptbSBhJ1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgcGx1cmFsQ2F0OiBmdW5jdGlvbihudW0pIHtcclxuICAgICAgICBpZiAobnVtID09PSAxKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ29uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnb3RoZXInO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH07XHJcbn1cclxuXHJcbnZhciBQQVRIX01BVENIID0gL14oW15cXD8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8sXHJcbiAgICBERUZBVUxUX1BPUlRTID0geydodHRwJzogODAsICdodHRwcyc6IDQ0MywgJ2Z0cCc6IDIxfTtcclxudmFyICRsb2NhdGlvbk1pbkVyciA9IG1pbkVycignJGxvY2F0aW9uJyk7XHJcblxyXG5cclxuLyoqXHJcbiAqIEVuY29kZSBwYXRoIHVzaW5nIGVuY29kZVVyaVNlZ21lbnQsIGlnbm9yaW5nIGZvcndhcmQgc2xhc2hlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlUGF0aChwYXRoKSB7XHJcbiAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLycpLFxyXG4gICAgICBpID0gc2VnbWVudHMubGVuZ3RoO1xyXG5cclxuICB3aGlsZSAoaS0tKSB7XHJcbiAgICBzZWdtZW50c1tpXSA9IGVuY29kZVVyaVNlZ21lbnQoc2VnbWVudHNbaV0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHNlZ21lbnRzLmpvaW4oJy8nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VBYnNvbHV0ZVVybChhYnNvbHV0ZVVybCwgbG9jYXRpb25PYmopIHtcclxuICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZShhYnNvbHV0ZVVybCk7XHJcblxyXG4gIGxvY2F0aW9uT2JqLiQkcHJvdG9jb2wgPSBwYXJzZWRVcmwucHJvdG9jb2w7XHJcbiAgbG9jYXRpb25PYmouJCRob3N0ID0gcGFyc2VkVXJsLmhvc3RuYW1lO1xyXG4gIGxvY2F0aW9uT2JqLiQkcG9ydCA9IGludChwYXJzZWRVcmwucG9ydCkgfHwgREVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdIHx8IG51bGw7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBwYXJzZUFwcFVybChyZWxhdGl2ZVVybCwgbG9jYXRpb25PYmopIHtcclxuICB2YXIgcHJlZml4ZWQgPSAocmVsYXRpdmVVcmwuY2hhckF0KDApICE9PSAnLycpO1xyXG4gIGlmIChwcmVmaXhlZCkge1xyXG4gICAgcmVsYXRpdmVVcmwgPSAnLycgKyByZWxhdGl2ZVVybDtcclxuICB9XHJcbiAgdmFyIG1hdGNoID0gdXJsUmVzb2x2ZShyZWxhdGl2ZVVybCk7XHJcbiAgbG9jYXRpb25PYmouJCRwYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KHByZWZpeGVkICYmIG1hdGNoLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nID9cclxuICAgICAgbWF0Y2gucGF0aG5hbWUuc3Vic3RyaW5nKDEpIDogbWF0Y2gucGF0aG5hbWUpO1xyXG4gIGxvY2F0aW9uT2JqLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShtYXRjaC5zZWFyY2gpO1xyXG4gIGxvY2F0aW9uT2JqLiQkaGFzaCA9IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaC5oYXNoKTtcclxuXHJcbiAgLy8gbWFrZSBzdXJlIHBhdGggc3RhcnRzIHdpdGggJy8nO1xyXG4gIGlmIChsb2NhdGlvbk9iai4kJHBhdGggJiYgbG9jYXRpb25PYmouJCRwYXRoLmNoYXJBdCgwKSAhPSAnLycpIHtcclxuICAgIGxvY2F0aW9uT2JqLiQkcGF0aCA9ICcvJyArIGxvY2F0aW9uT2JqLiQkcGF0aDtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGJlZ2luXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB3aG9sZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSByZXR1cm5zIHRleHQgZnJvbSB3aG9sZSBhZnRlciBiZWdpbiBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgYmVnaW4gd2l0aFxyXG4gKiAgICAgICAgICAgICAgICAgICBleHBlY3RlZCBzdHJpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBiZWdpbnNXaXRoKGJlZ2luLCB3aG9sZSkge1xyXG4gIGlmICh3aG9sZS5pbmRleE9mKGJlZ2luKSA9PT0gMCkge1xyXG4gICAgcmV0dXJuIHdob2xlLnN1YnN0cihiZWdpbi5sZW5ndGgpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHN0cmlwSGFzaCh1cmwpIHtcclxuICB2YXIgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xyXG4gIHJldHVybiBpbmRleCA9PSAtMSA/IHVybCA6IHVybC5zdWJzdHIoMCwgaW5kZXgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmltRW1wdHlIYXNoKHVybCkge1xyXG4gIHJldHVybiB1cmwucmVwbGFjZSgvKCMuKyl8IyQvLCAnJDEnKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHN0cmlwRmlsZSh1cmwpIHtcclxuICByZXR1cm4gdXJsLnN1YnN0cigwLCBzdHJpcEhhc2godXJsKS5sYXN0SW5kZXhPZignLycpICsgMSk7XHJcbn1cclxuXHJcbi8qIHJldHVybiB0aGUgc2VydmVyIG9ubHkgKHNjaGVtZTovL2hvc3Q6cG9ydCkgKi9cclxuZnVuY3Rpb24gc2VydmVyQmFzZSh1cmwpIHtcclxuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwuaW5kZXhPZignLycsIHVybC5pbmRleE9mKCcvLycpICsgMikpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIExvY2F0aW9uSHRtbDVVcmwgcmVwcmVzZW50cyBhbiB1cmxcclxuICogVGhpcyBvYmplY3QgaXMgZXhwb3NlZCBhcyAkbG9jYXRpb24gc2VydmljZSB3aGVuIEhUTUw1IG1vZGUgaXMgZW5hYmxlZCBhbmQgc3VwcG9ydGVkXHJcbiAqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVByZWZpeCB1cmwgcGF0aCBwcmVmaXhcclxuICovXHJcbmZ1bmN0aW9uIExvY2F0aW9uSHRtbDVVcmwoYXBwQmFzZSwgYmFzZVByZWZpeCkge1xyXG4gIHRoaXMuJCRodG1sNSA9IHRydWU7XHJcbiAgYmFzZVByZWZpeCA9IGJhc2VQcmVmaXggfHwgJyc7XHJcbiAgdmFyIGFwcEJhc2VOb0ZpbGUgPSBzdHJpcEZpbGUoYXBwQmFzZSk7XHJcbiAgcGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLCB0aGlzKTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGdpdmVuIGh0bWw1IChyZWd1bGFyKSB1cmwgc3RyaW5nIGludG8gcHJvcGVydGllc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSFRNTDUgdXJsXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcclxuICAgIHZhciBwYXRoVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpO1xyXG4gICAgaWYgKCFpc1N0cmluZyhwYXRoVXJsKSkge1xyXG4gICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lwdGhwcmZ4JywgJ0ludmFsaWQgdXJsIFwiezB9XCIsIG1pc3NpbmcgcGF0aCBwcmVmaXggXCJ7MX1cIi4nLCB1cmwsXHJcbiAgICAgICAgICBhcHBCYXNlTm9GaWxlKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUFwcFVybChwYXRoVXJsLCB0aGlzKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuJCRwYXRoKSB7XHJcbiAgICAgIHRoaXMuJCRwYXRoID0gJy8nO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJCRjb21wb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcG9zZSB1cmwgYW5kIHVwZGF0ZSBgYWJzVXJsYCBwcm9wZXJ0eVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdGhpcy4kJGNvbXBvc2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxyXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XHJcblxyXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XHJcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZU5vRmlsZSArIHRoaXMuJCR1cmwuc3Vic3RyKDEpOyAvLyBmaXJzdCBjaGFyIGlzIGFsd2F5cyAnLydcclxuICB9O1xyXG5cclxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XHJcbiAgICBpZiAocmVsSHJlZiAmJiByZWxIcmVmWzBdID09PSAnIycpIHtcclxuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcclxuICAgICAgLy8ga2VlcCB0aGUgb2xkIHVybCBhbmQgb25seSByZXBsYWNlIHRoZSBoYXNoIGZyYWdtZW50XHJcbiAgICAgIHRoaXMuaGFzaChyZWxIcmVmLnNsaWNlKDEpKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgYXBwVXJsLCBwcmV2QXBwVXJsO1xyXG4gICAgdmFyIHJld3JpdHRlblVybDtcclxuXHJcbiAgICBpZiAoKGFwcFVybCA9IGJlZ2luc1dpdGgoYXBwQmFzZSwgdXJsKSkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwcmV2QXBwVXJsID0gYXBwVXJsO1xyXG4gICAgICBpZiAoKGFwcFVybCA9IGJlZ2luc1dpdGgoYmFzZVByZWZpeCwgYXBwVXJsKSkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyAoYmVnaW5zV2l0aCgnLycsIGFwcFVybCkgfHwgYXBwVXJsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlICsgcHJldkFwcFVybDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICgoYXBwVXJsID0gYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyBhcHBVcmw7XHJcbiAgICB9IGVsc2UgaWYgKGFwcEJhc2VOb0ZpbGUgPT0gdXJsICsgJy8nKSB7XHJcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGU7XHJcbiAgICB9XHJcbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XHJcbiAgICAgIHRoaXMuJCRwYXJzZShyZXdyaXR0ZW5VcmwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIHVybFxyXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gZGV2ZWxvcGVyIGRvZXNuJ3Qgb3B0IGludG8gaHRtbDUgbW9kZS5cclxuICogSXQgYWxzbyBzZXJ2ZXMgYXMgdGhlIGJhc2UgY2xhc3MgZm9yIGh0bWw1IG1vZGUgZmFsbGJhY2sgb24gbGVnYWN5IGJyb3dzZXJzLlxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2UgYXBwbGljYXRpb24gYmFzZSBVUkxcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2hQcmVmaXggaGFzaGJhbmcgcHJlZml4XHJcbiAqL1xyXG5mdW5jdGlvbiBMb2NhdGlvbkhhc2hiYW5nVXJsKGFwcEJhc2UsIGhhc2hQcmVmaXgpIHtcclxuICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcclxuXHJcbiAgcGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLCB0aGlzKTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGdpdmVuIGhhc2hiYW5nIHVybCBpbnRvIHByb3BlcnRpZXNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIEhhc2hiYW5nIHVybFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdGhpcy4kJHBhcnNlID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICB2YXIgd2l0aG91dEJhc2VVcmwgPSBiZWdpbnNXaXRoKGFwcEJhc2UsIHVybCkgfHwgYmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLCB1cmwpO1xyXG4gICAgdmFyIHdpdGhvdXRIYXNoVXJsO1xyXG5cclxuICAgIGlmICh3aXRob3V0QmFzZVVybC5jaGFyQXQoMCkgPT09ICcjJykge1xyXG5cclxuICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIHVybCBzdGFydHMgd2l0aCBhIGhhc2ggc28gd2UgaGF2ZVxyXG4gICAgICAvLyBnb3QgZWl0aGVyIGEgaGFzaGJhbmcgcGF0aCBvciBhIHBsYWluIGhhc2ggZnJhZ21lbnRcclxuICAgICAgd2l0aG91dEhhc2hVcmwgPSBiZWdpbnNXaXRoKGhhc2hQcmVmaXgsIHdpdGhvdXRCYXNlVXJsKTtcclxuICAgICAgaWYgKGlzVW5kZWZpbmVkKHdpdGhvdXRIYXNoVXJsKSkge1xyXG4gICAgICAgIC8vIFRoZXJlIHdhcyBubyBoYXNoYmFuZyBwcmVmaXggc28gd2UganVzdCBoYXZlIGEgaGFzaCBmcmFnbWVudFxyXG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gd2l0aG91dEJhc2VVcmw7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBUaGVyZSB3YXMgbm8gaGFzaGJhbmcgcGF0aCBub3IgaGFzaCBmcmFnbWVudDpcclxuICAgICAgLy8gSWYgd2UgYXJlIGluIEhUTUw1IG1vZGUgd2UgdXNlIHdoYXQgaXMgbGVmdCBhcyB0aGUgcGF0aDtcclxuICAgICAgLy8gT3RoZXJ3aXNlIHdlIGlnbm9yZSB3aGF0IGlzIGxlZnRcclxuICAgICAgd2l0aG91dEhhc2hVcmwgPSB0aGlzLiQkaHRtbDUgPyB3aXRob3V0QmFzZVVybCA6ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLCB0aGlzKTtcclxuXHJcbiAgICB0aGlzLiQkcGF0aCA9IHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUodGhpcy4kJHBhdGgsIHdpdGhvdXRIYXNoVXJsLCBhcHBCYXNlKTtcclxuXHJcbiAgICB0aGlzLiQkY29tcG9zZSgpO1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBJbiBXaW5kb3dzLCBvbiBhbiBhbmNob3Igbm9kZSBvbiBkb2N1bWVudHMgbG9hZGVkIGZyb21cclxuICAgICAqIHRoZSBmaWxlc3lzdGVtLCB0aGUgYnJvd3NlciB3aWxsIHJldHVybiBhIHBhdGhuYW1lXHJcbiAgICAgKiBwcmVmaXhlZCB3aXRoIHRoZSBkcml2ZSBuYW1lICgnL0M6L3BhdGgnKSB3aGVuIGFcclxuICAgICAqIHBhdGhuYW1lIHdpdGhvdXQgYSBkcml2ZSBpcyBzZXQ6XHJcbiAgICAgKiAgKiBhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcvZm9vJylcclxuICAgICAqICAgKiBhLnBhdGhuYW1lID09PSAnL0M6L2ZvbycgLy90cnVlXHJcbiAgICAgKlxyXG4gICAgICogSW5zaWRlIG9mIEFuZ3VsYXIsIHdlJ3JlIGFsd2F5cyB1c2luZyBwYXRobmFtZXMgdGhhdFxyXG4gICAgICogZG8gbm90IGluY2x1ZGUgZHJpdmUgbmFtZXMgZm9yIHJvdXRpbmcuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUocGF0aCwgdXJsLCBiYXNlKSB7XHJcbiAgICAgIC8qXHJcbiAgICAgIE1hdGNoZXMgcGF0aHMgZm9yIGZpbGUgcHJvdG9jb2wgb24gd2luZG93cyxcclxuICAgICAgc3VjaCBhcyAvQzovZm9vL2JhciwgYW5kIGNhcHR1cmVzIG9ubHkgL2Zvby9iYXIuXHJcbiAgICAgICovXHJcbiAgICAgIHZhciB3aW5kb3dzRmlsZVBhdGhFeHAgPSAvXlxcL1tBLVpdOihcXC8uKikvO1xyXG5cclxuICAgICAgdmFyIGZpcnN0UGF0aFNlZ21lbnRNYXRjaDtcclxuXHJcbiAgICAgIC8vR2V0IHRoZSByZWxhdGl2ZSBwYXRoIGZyb20gdGhlIGlucHV0IFVSTC5cclxuICAgICAgaWYgKHVybC5pbmRleE9mKGJhc2UpID09PSAwKSB7XHJcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYmFzZSwgJycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUaGUgaW5wdXQgVVJMIGludGVudGlvbmFsbHkgY29udGFpbnMgYSBmaXJzdCBwYXRoIHNlZ21lbnQgdGhhdCBlbmRzIHdpdGggYSBjb2xvbi5cclxuICAgICAgaWYgKHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHVybCkpIHtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZmlyc3RQYXRoU2VnbWVudE1hdGNoID0gd2luZG93c0ZpbGVQYXRoRXhwLmV4ZWMocGF0aCk7XHJcbiAgICAgIHJldHVybiBmaXJzdFBhdGhTZWdtZW50TWF0Y2ggPyBmaXJzdFBhdGhTZWdtZW50TWF0Y2hbMV0gOiBwYXRoO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXBvc2UgaGFzaGJhbmcgdXJsIGFuZCB1cGRhdGUgYGFic1VybGAgcHJvcGVydHlcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VhcmNoID0gdG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxcclxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xyXG5cclxuICAgIHRoaXMuJCR1cmwgPSBlbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyBoYXNoO1xyXG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2UgKyAodGhpcy4kJHVybCA/IGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsIDogJycpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJCRwYXJzZUxpbmtVcmwgPSBmdW5jdGlvbih1cmwsIHJlbEhyZWYpIHtcclxuICAgIGlmIChzdHJpcEhhc2goYXBwQmFzZSkgPT0gc3RyaXBIYXNoKHVybCkpIHtcclxuICAgICAgdGhpcy4kJHBhcnNlKHVybCk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIHVybFxyXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gaHRtbDUgaGlzdG9yeSBhcGkgaXMgZW5hYmxlZCBidXQgdGhlIGJyb3dzZXJcclxuICogZG9lcyBub3Qgc3VwcG9ydCBpdC5cclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoUHJlZml4IGhhc2hiYW5nIHByZWZpeFxyXG4gKi9cclxuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmwoYXBwQmFzZSwgaGFzaFByZWZpeCkge1xyXG4gIHRoaXMuJCRodG1sNSA9IHRydWU7XHJcbiAgTG9jYXRpb25IYXNoYmFuZ1VybC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cclxuICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcclxuXHJcbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xyXG4gICAgaWYgKHJlbEhyZWYgJiYgcmVsSHJlZlswXSA9PT0gJyMnKSB7XHJcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgbGlua3MgdG8gaGFzaCBmcmFnbWVudHM6XHJcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxyXG4gICAgICB0aGlzLmhhc2gocmVsSHJlZi5zbGljZSgxKSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXdyaXR0ZW5Vcmw7XHJcbiAgICB2YXIgYXBwVXJsO1xyXG5cclxuICAgIGlmIChhcHBCYXNlID09IHN0cmlwSGFzaCh1cmwpKSB7XHJcbiAgICAgIHJld3JpdHRlblVybCA9IHVybDtcclxuICAgIH0gZWxzZSBpZiAoKGFwcFVybCA9IGJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSwgdXJsKSkpIHtcclxuICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIGhhc2hQcmVmaXggKyBhcHBVcmw7XHJcbiAgICB9IGVsc2UgaWYgKGFwcEJhc2VOb0ZpbGUgPT09IHVybCArICcvJykge1xyXG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xyXG4gICAgfVxyXG4gICAgaWYgKHJld3JpdHRlblVybCkge1xyXG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcclxuICAgIH1cclxuICAgIHJldHVybiAhIXJld3JpdHRlblVybDtcclxuICB9O1xyXG5cclxuICB0aGlzLiQkY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXHJcbiAgICAgICAgaGFzaCA9IHRoaXMuJCRoYXNoID8gJyMnICsgZW5jb2RlVXJpU2VnbWVudCh0aGlzLiQkaGFzaCkgOiAnJztcclxuXHJcbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcclxuICAgIC8vIGluY2x1ZGUgaGFzaFByZWZpeCBpbiAkJGFic1VybCB3aGVuICQkdXJsIGlzIGVtcHR5IHNvIElFOCAmIDkgZG8gbm90IHJlbG9hZCBwYWdlIGJlY2F1c2Ugb2YgcmVtb3ZhbCBvZiAnIydcclxuICAgIHRoaXMuJCRhYnNVcmwgPSBhcHBCYXNlICsgaGFzaFByZWZpeCArIHRoaXMuJCR1cmw7XHJcbiAgfTtcclxuXHJcbn1cclxuXHJcblxyXG52YXIgbG9jYXRpb25Qcm90b3R5cGUgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFyZSB3ZSBpbiBodG1sNSBtb2RlP1xyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgJCRodG1sNTogZmFsc2UsXHJcblxyXG4gIC8qKlxyXG4gICAqIEhhcyBhbnkgY2hhbmdlIGJlZW4gcmVwbGFjaW5nP1xyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgJCRyZXBsYWNlOiBmYWxzZSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiNhYnNVcmxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxyXG4gICAqXHJcbiAgICogUmV0dXJuIGZ1bGwgdXJsIHJlcHJlc2VudGF0aW9uIHdpdGggYWxsIHNlZ21lbnRzIGVuY29kZWQgYWNjb3JkaW5nIHRvIHJ1bGVzIHNwZWNpZmllZCBpblxyXG4gICAqIFtSRkMgMzk4Nl0oaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMzk4Ni50eHQpLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiBgYGBqc1xyXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xyXG4gICAqIHZhciBhYnNVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XHJcbiAgICogLy8gPT4gXCJodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1wiXHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGZ1bGwgdXJsXHJcbiAgICovXHJcbiAgYWJzVXJsOiBsb2NhdGlvbkdldHRlcignJCRhYnNVcmwnKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiN1cmxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cclxuICAgKlxyXG4gICAqIFJldHVybiB1cmwgKGUuZy4gYC9wYXRoP2E9YiNoYXNoYCkgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogQ2hhbmdlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaCwgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cclxuICAgKlxyXG4gICAqXHJcbiAgICogYGBganNcclxuICAgKiAvLyBnaXZlbiB1cmwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cclxuICAgKiB2YXIgdXJsID0gJGxvY2F0aW9uLnVybCgpO1xyXG4gICAqIC8vID0+IFwiL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXCJcclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdXJsIE5ldyB1cmwgd2l0aG91dCBiYXNlIHByZWZpeCAoZS5nLiBgL3BhdGg/YT1iI2hhc2hgKVxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gdXJsXHJcbiAgICovXHJcbiAgdXJsOiBmdW5jdGlvbih1cmwpIHtcclxuICAgIGlmIChpc1VuZGVmaW5lZCh1cmwpKVxyXG4gICAgICByZXR1cm4gdGhpcy4kJHVybDtcclxuXHJcbiAgICB2YXIgbWF0Y2ggPSBQQVRIX01BVENILmV4ZWModXJsKTtcclxuICAgIGlmIChtYXRjaFsxXSB8fCB1cmwgPT09ICcnKSB0aGlzLnBhdGgoZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzFdKSk7XHJcbiAgICBpZiAobWF0Y2hbMl0gfHwgbWF0Y2hbMV0gfHwgdXJsID09PSAnJykgdGhpcy5zZWFyY2gobWF0Y2hbM10gfHwgJycpO1xyXG4gICAgdGhpcy5oYXNoKG1hdGNoWzVdIHx8ICcnKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI3Byb3RvY29sXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cclxuICAgKlxyXG4gICAqIFJldHVybiBwcm90b2NvbCBvZiBjdXJyZW50IHVybC5cclxuICAgKlxyXG4gICAqXHJcbiAgICogYGBganNcclxuICAgKiAvLyBnaXZlbiB1cmwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cclxuICAgKiB2YXIgcHJvdG9jb2wgPSAkbG9jYXRpb24ucHJvdG9jb2woKTtcclxuICAgKiAvLyA9PiBcImh0dHBcIlxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBwcm90b2NvbCBvZiBjdXJyZW50IHVybFxyXG4gICAqL1xyXG4gIHByb3RvY29sOiBsb2NhdGlvbkdldHRlcignJCRwcm90b2NvbCcpLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hvc3RcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxyXG4gICAqXHJcbiAgICogUmV0dXJuIGhvc3Qgb2YgY3VycmVudCB1cmwuXHJcbiAgICpcclxuICAgKlxyXG4gICAqIGBgYGpzXHJcbiAgICogLy8gZ2l2ZW4gdXJsIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXHJcbiAgICogdmFyIGhvc3QgPSAkbG9jYXRpb24uaG9zdCgpO1xyXG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb21cIlxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBob3N0IG9mIGN1cnJlbnQgdXJsLlxyXG4gICAqL1xyXG4gIGhvc3Q6IGxvY2F0aW9uR2V0dGVyKCckJGhvc3QnKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwb3J0XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cclxuICAgKlxyXG4gICAqIFJldHVybiBwb3J0IG9mIGN1cnJlbnQgdXJsLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiBgYGBqc1xyXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xyXG4gICAqIHZhciBwb3J0ID0gJGxvY2F0aW9uLnBvcnQoKTtcclxuICAgKiAvLyA9PiA4MFxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogQHJldHVybiB7TnVtYmVyfSBwb3J0XHJcbiAgICovXHJcbiAgcG9ydDogbG9jYXRpb25HZXR0ZXIoJyQkcG9ydCcpLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI3BhdGhcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cclxuICAgKlxyXG4gICAqIFJldHVybiBwYXRoIG9mIGN1cnJlbnQgdXJsIHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIENoYW5nZSBwYXRoIHdoZW4gY2FsbGVkIHdpdGggcGFyYW1ldGVyIGFuZCByZXR1cm4gYCRsb2NhdGlvbmAuXHJcbiAgICpcclxuICAgKiBOb3RlOiBQYXRoIHNob3VsZCBhbHdheXMgYmVnaW4gd2l0aCBmb3J3YXJkIHNsYXNoICgvKSwgdGhpcyBtZXRob2Qgd2lsbCBhZGQgdGhlIGZvcndhcmQgc2xhc2hcclxuICAgKiBpZiBpdCBpcyBtaXNzaW5nLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiBgYGBqc1xyXG4gICAqIC8vIGdpdmVuIHVybCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xyXG4gICAqIHZhciBwYXRoID0gJGxvY2F0aW9uLnBhdGgoKTtcclxuICAgKiAvLyA9PiBcIi9zb21lL3BhdGhcIlxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcik9fSBwYXRoIE5ldyBwYXRoXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBwYXRoXHJcbiAgICovXHJcbiAgcGF0aDogbG9jYXRpb25HZXR0ZXJTZXR0ZXIoJyQkcGF0aCcsIGZ1bmN0aW9uKHBhdGgpIHtcclxuICAgIHBhdGggPSBwYXRoICE9PSBudWxsID8gcGF0aC50b1N0cmluZygpIDogJyc7XHJcbiAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT0gJy8nID8gcGF0aCA6ICcvJyArIHBhdGg7XHJcbiAgfSksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jc2VhcmNoXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXHJcbiAgICpcclxuICAgKiBSZXR1cm4gc2VhcmNoIHBhcnQgKGFzIG9iamVjdCkgb2YgY3VycmVudCB1cmwgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogQ2hhbmdlIHNlYXJjaCBwYXJ0IHdoZW4gY2FsbGVkIHdpdGggcGFyYW1ldGVyIGFuZCByZXR1cm4gYCRsb2NhdGlvbmAuXHJcbiAgICpcclxuICAgKlxyXG4gICAqIGBgYGpzXHJcbiAgICogLy8gZ2l2ZW4gdXJsIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXHJcbiAgICogdmFyIHNlYXJjaE9iamVjdCA9ICRsb2NhdGlvbi5zZWFyY2goKTtcclxuICAgKiAvLyA9PiB7Zm9vOiAnYmFyJywgYmF6OiAneG94byd9XHJcbiAgICpcclxuICAgKiAvLyBzZXQgZm9vIHRvICd5aXBlZSdcclxuICAgKiAkbG9jYXRpb24uc2VhcmNoKCdmb28nLCAneWlwZWUnKTtcclxuICAgKiAvLyAkbG9jYXRpb24uc2VhcmNoKCkgPT4ge2ZvbzogJ3lpcGVlJywgYmF6OiAneG94byd9XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZz58T2JqZWN0LjxBcnJheS48c3RyaW5nPj59IHNlYXJjaCBOZXcgc2VhcmNoIHBhcmFtcyAtIHN0cmluZyBvclxyXG4gICAqIGhhc2ggb2JqZWN0LlxyXG4gICAqXHJcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCB0aGUgbWV0aG9kIGFjdHMgYXMgYSBzZXR0ZXIsIHNldHRpbmcgdGhlIGBzZWFyY2hgIGNvbXBvbmVudFxyXG4gICAqIG9mIGAkbG9jYXRpb25gIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUuXHJcbiAgICpcclxuICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBoYXNoIG9iamVjdCBjb250YWluaW5nIGFuIGFycmF5IG9mIHZhbHVlcywgdGhlc2UgdmFsdWVzIHdpbGwgYmUgZW5jb2RlZFxyXG4gICAqIGFzIGR1cGxpY2F0ZSBzZWFyY2ggcGFyYW1ldGVycyBpbiB0aGUgdXJsLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsoc3RyaW5nfE51bWJlcnxBcnJheTxzdHJpbmc+fGJvb2xlYW4pPX0gcGFyYW1WYWx1ZSBJZiBgc2VhcmNoYCBpcyBhIHN0cmluZyBvciBudW1iZXIsIHRoZW4gYHBhcmFtVmFsdWVgXHJcbiAgICogd2lsbCBvdmVycmlkZSBvbmx5IGEgc2luZ2xlIHNlYXJjaCBwcm9wZXJ0eS5cclxuICAgKlxyXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBhbiBhcnJheSwgaXQgd2lsbCBvdmVycmlkZSB0aGUgcHJvcGVydHkgb2YgdGhlIGBzZWFyY2hgIGNvbXBvbmVudCBvZlxyXG4gICAqIGAkbG9jYXRpb25gIHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50LlxyXG4gICAqXHJcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGBudWxsYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgZGVsZXRlZC5cclxuICAgKlxyXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBgdHJ1ZWAsIHRoZSBwcm9wZXJ0eSBzcGVjaWZpZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudCB3aWxsIGJlIGFkZGVkIHdpdGggbm9cclxuICAgKiB2YWx1ZSBub3IgdHJhaWxpbmcgZXF1YWwgc2lnbi5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gSWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzIHJldHVybnMgdGhlIHBhcnNlZCBgc2VhcmNoYCBvYmplY3QuIElmIGNhbGxlZCB3aXRoXHJcbiAgICogb25lIG9yIG1vcmUgYXJndW1lbnRzIHJldHVybnMgYCRsb2NhdGlvbmAgb2JqZWN0IGl0c2VsZi5cclxuICAgKi9cclxuICBzZWFyY2g6IGZ1bmN0aW9uKHNlYXJjaCwgcGFyYW1WYWx1ZSkge1xyXG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIGNhc2UgMDpcclxuICAgICAgICByZXR1cm4gdGhpcy4kJHNlYXJjaDtcclxuICAgICAgY2FzZSAxOlxyXG4gICAgICAgIGlmIChpc1N0cmluZyhzZWFyY2gpIHx8IGlzTnVtYmVyKHNlYXJjaCkpIHtcclxuICAgICAgICAgIHNlYXJjaCA9IHNlYXJjaC50b1N0cmluZygpO1xyXG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHBhcnNlS2V5VmFsdWUoc2VhcmNoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNlYXJjaCkpIHtcclxuICAgICAgICAgIHNlYXJjaCA9IGNvcHkoc2VhcmNoLCB7fSk7XHJcbiAgICAgICAgICAvLyByZW1vdmUgb2JqZWN0IHVuZGVmaW5lZCBvciBudWxsIHByb3BlcnRpZXNcclxuICAgICAgICAgIGZvckVhY2goc2VhcmNoLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSBkZWxldGUgc2VhcmNoW2tleV07XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICB0aGlzLiQkc2VhcmNoID0gc2VhcmNoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lzcmNoYXJnJyxcclxuICAgICAgICAgICAgICAnVGhlIGZpcnN0IGFyZ3VtZW50IG9mIHRoZSBgJGxvY2F0aW9uI3NlYXJjaCgpYCBjYWxsIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gb2JqZWN0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocGFyYW1WYWx1ZSkgfHwgcGFyYW1WYWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgZGVsZXRlIHRoaXMuJCRzZWFyY2hbc2VhcmNoXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy4kJHNlYXJjaFtzZWFyY2hdID0gcGFyYW1WYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy4kJGNvbXBvc2UoKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jaGFzaFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxyXG4gICAqXHJcbiAgICogUmV0dXJuIGhhc2ggZnJhZ21lbnQgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogQ2hhbmdlIGhhc2ggZnJhZ21lbnQgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cclxuICAgKlxyXG4gICAqXHJcbiAgICogYGBganNcclxuICAgKiAvLyBnaXZlbiB1cmwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG8jaGFzaFZhbHVlXHJcbiAgICogdmFyIGhhc2ggPSAkbG9jYXRpb24uaGFzaCgpO1xyXG4gICAqIC8vID0+IFwiaGFzaFZhbHVlXCJcclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpPX0gaGFzaCBOZXcgaGFzaCBmcmFnbWVudFxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gaGFzaFxyXG4gICAqL1xyXG4gIGhhc2g6IGxvY2F0aW9uR2V0dGVyU2V0dGVyKCckJGhhc2gnLCBmdW5jdGlvbihoYXNoKSB7XHJcbiAgICByZXR1cm4gaGFzaCAhPT0gbnVsbCA/IGhhc2gudG9TdHJpbmcoKSA6ICcnO1xyXG4gIH0pLFxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uI3JlcGxhY2VcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIElmIGNhbGxlZCwgYWxsIGNoYW5nZXMgdG8gJGxvY2F0aW9uIGR1cmluZyBjdXJyZW50IGAkZGlnZXN0YCB3aWxsIGJlIHJlcGxhY2luZyBjdXJyZW50IGhpc3RvcnlcclxuICAgKiByZWNvcmQsIGluc3RlYWQgb2YgYWRkaW5nIG5ldyBvbmUuXHJcbiAgICovXHJcbiAgcmVwbGFjZTogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLiQkcmVwbGFjZSA9IHRydWU7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcbn07XHJcblxyXG5mb3JFYWNoKFtMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCwgTG9jYXRpb25IYXNoYmFuZ1VybCwgTG9jYXRpb25IdG1sNVVybF0sIGZ1bmN0aW9uKExvY2F0aW9uKSB7XHJcbiAgTG9jYXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb24jc3RhdGVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cclxuICAgKlxyXG4gICAqIFJldHVybiB0aGUgaGlzdG9yeSBzdGF0ZSBvYmplY3Qgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogQ2hhbmdlIHRoZSBoaXN0b3J5IHN0YXRlIG9iamVjdCB3aGVuIGNhbGxlZCB3aXRoIG9uZSBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cclxuICAgKiBUaGUgc3RhdGUgb2JqZWN0IGlzIGxhdGVyIHBhc3NlZCB0byBgcHVzaFN0YXRlYCBvciBgcmVwbGFjZVN0YXRlYC5cclxuICAgKlxyXG4gICAqIE5PVEU6IFRoaXMgbWV0aG9kIGlzIHN1cHBvcnRlZCBvbmx5IGluIEhUTUw1IG1vZGUgYW5kIG9ubHkgaW4gYnJvd3NlcnMgc3VwcG9ydGluZ1xyXG4gICAqIHRoZSBIVE1MNSBIaXN0b3J5IEFQSSAoaS5lLiBtZXRob2RzIGBwdXNoU3RhdGVgIGFuZCBgcmVwbGFjZVN0YXRlYCkuIElmIHlvdSBuZWVkIHRvIHN1cHBvcnRcclxuICAgKiBvbGRlciBicm93c2VycyAobGlrZSBJRTkgb3IgQW5kcm9pZCA8IDQuMCksIGRvbid0IHVzZSB0aGlzIG1ldGhvZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0PX0gc3RhdGUgU3RhdGUgb2JqZWN0IGZvciBwdXNoU3RhdGUgb3IgcmVwbGFjZVN0YXRlXHJcbiAgICogQHJldHVybiB7b2JqZWN0fSBzdGF0ZVxyXG4gICAqL1xyXG4gIExvY2F0aW9uLnByb3RvdHlwZS5zdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XHJcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpXHJcbiAgICAgIHJldHVybiB0aGlzLiQkc3RhdGU7XHJcblxyXG4gICAgaWYgKExvY2F0aW9uICE9PSBMb2NhdGlvbkh0bWw1VXJsIHx8ICF0aGlzLiQkaHRtbDUpIHtcclxuICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdub3N0YXRlJywgJ0hpc3RvcnkgQVBJIHN0YXRlIHN1cHBvcnQgaXMgYXZhaWxhYmxlIG9ubHkgJyArXHJcbiAgICAgICAgJ2luIEhUTUw1IG1vZGUgYW5kIG9ubHkgaW4gYnJvd3NlcnMgc3VwcG9ydGluZyBIVE1MNSBIaXN0b3J5IEFQSScpO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlIHVzZXIgbWlnaHQgbW9kaWZ5IGBzdGF0ZU9iamVjdGAgYWZ0ZXIgaW52b2tpbmcgYCRsb2NhdGlvbi5zdGF0ZShzdGF0ZU9iamVjdClgXHJcbiAgICAvLyBidXQgd2UncmUgY2hhbmdpbmcgdGhlICQkc3RhdGUgcmVmZXJlbmNlIHRvICRicm93c2VyLnN0YXRlKCkgZHVyaW5nIHRoZSAkZGlnZXN0XHJcbiAgICAvLyBzbyB0aGUgbW9kaWZpY2F0aW9uIHdpbmRvdyBpcyBuYXJyb3cuXHJcbiAgICB0aGlzLiQkc3RhdGUgPSBpc1VuZGVmaW5lZChzdGF0ZSkgPyBudWxsIDogc3RhdGU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxufSk7XHJcblxyXG5cclxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXIocHJvcGVydHkpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpc1twcm9wZXJ0eV07XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGxvY2F0aW9uR2V0dGVyU2V0dGVyKHByb3BlcnR5LCBwcmVwcm9jZXNzKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxyXG4gICAgICByZXR1cm4gdGhpc1twcm9wZXJ0eV07XHJcblxyXG4gICAgdGhpc1twcm9wZXJ0eV0gPSBwcmVwcm9jZXNzKHZhbHVlKTtcclxuICAgIHRoaXMuJCRjb21wb3NlKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkbG9jYXRpb25cclxuICpcclxuICogQHJlcXVpcmVzICRyb290RWxlbWVudFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlICRsb2NhdGlvbiBzZXJ2aWNlIHBhcnNlcyB0aGUgVVJMIGluIHRoZSBicm93c2VyIGFkZHJlc3MgYmFyIChiYXNlZCBvbiB0aGVcclxuICogW3dpbmRvdy5sb2NhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vd2luZG93LmxvY2F0aW9uKSkgYW5kIG1ha2VzIHRoZSBVUkxcclxuICogYXZhaWxhYmxlIHRvIHlvdXIgYXBwbGljYXRpb24uIENoYW5nZXMgdG8gdGhlIFVSTCBpbiB0aGUgYWRkcmVzcyBiYXIgYXJlIHJlZmxlY3RlZCBpbnRvXHJcbiAqICRsb2NhdGlvbiBzZXJ2aWNlIGFuZCBjaGFuZ2VzIHRvICRsb2NhdGlvbiBhcmUgcmVmbGVjdGVkIGludG8gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIuXHJcbiAqXHJcbiAqICoqVGhlICRsb2NhdGlvbiBzZXJ2aWNlOioqXHJcbiAqXHJcbiAqIC0gRXhwb3NlcyB0aGUgY3VycmVudCBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIsIHNvIHlvdSBjYW5cclxuICogICAtIFdhdGNoIGFuZCBvYnNlcnZlIHRoZSBVUkwuXHJcbiAqICAgLSBDaGFuZ2UgdGhlIFVSTC5cclxuICogLSBTeW5jaHJvbml6ZXMgdGhlIFVSTCB3aXRoIHRoZSBicm93c2VyIHdoZW4gdGhlIHVzZXJcclxuICogICAtIENoYW5nZXMgdGhlIGFkZHJlc3MgYmFyLlxyXG4gKiAgIC0gQ2xpY2tzIHRoZSBiYWNrIG9yIGZvcndhcmQgYnV0dG9uIChvciBjbGlja3MgYSBIaXN0b3J5IGxpbmspLlxyXG4gKiAgIC0gQ2xpY2tzIG9uIGEgbGluay5cclxuICogLSBSZXByZXNlbnRzIHRoZSBVUkwgb2JqZWN0IGFzIGEgc2V0IG9mIG1ldGhvZHMgKHByb3RvY29sLCBob3N0LCBwb3J0LCBwYXRoLCBzZWFyY2gsIGhhc2gpLlxyXG4gKlxyXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiBEZXZlbG9wZXIgR3VpZGU6IFVzaW5nICRsb2NhdGlvbn1cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIHByb3ZpZGVyXHJcbiAqIEBuYW1lICRsb2NhdGlvblByb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBVc2UgdGhlIGAkbG9jYXRpb25Qcm92aWRlcmAgdG8gY29uZmlndXJlIGhvdyB0aGUgYXBwbGljYXRpb24gZGVlcCBsaW5raW5nIHBhdGhzIGFyZSBzdG9yZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiAkTG9jYXRpb25Qcm92aWRlcigpIHtcclxuICB2YXIgaGFzaFByZWZpeCA9ICcnLFxyXG4gICAgICBodG1sNU1vZGUgPSB7XHJcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgcmVxdWlyZUJhc2U6IHRydWUsXHJcbiAgICAgICAgcmV3cml0ZUxpbmtzOiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkbG9jYXRpb25Qcm92aWRlciNoYXNoUHJlZml4XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwcmVmaXggUHJlZml4IGZvciBoYXNoIHBhcnQgKGNvbnRhaW5pbmcgcGF0aCBhbmQgc2VhcmNoKVxyXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXHJcbiAgICovXHJcbiAgdGhpcy5oYXNoUHJlZml4ID0gZnVuY3Rpb24ocHJlZml4KSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHByZWZpeCkpIHtcclxuICAgICAgaGFzaFByZWZpeCA9IHByZWZpeDtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gaGFzaFByZWZpeDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaHRtbDVNb2RlXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQHBhcmFtIHsoYm9vbGVhbnxPYmplY3QpPX0gbW9kZSBJZiBib29sZWFuLCBzZXRzIGBodG1sNU1vZGUuZW5hYmxlZGAgdG8gdmFsdWUuXHJcbiAgICogICBJZiBvYmplY3QsIHNldHMgYGVuYWJsZWRgLCBgcmVxdWlyZUJhc2VgIGFuZCBgcmV3cml0ZUxpbmtzYCB0byByZXNwZWN0aXZlIHZhbHVlcy4gU3VwcG9ydGVkXHJcbiAgICogICBwcm9wZXJ0aWVzOlxyXG4gICAqICAgLSAqKmVuYWJsZWQqKiDigJMgYHtib29sZWFufWAg4oCTIChkZWZhdWx0OiBmYWxzZSkgSWYgdHJ1ZSwgd2lsbCByZWx5IG9uIGBoaXN0b3J5LnB1c2hTdGF0ZWAgdG9cclxuICAgKiAgICAgY2hhbmdlIHVybHMgd2hlcmUgc3VwcG9ydGVkLiBXaWxsIGZhbGwgYmFjayB0byBoYXNoLXByZWZpeGVkIHBhdGhzIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XHJcbiAgICogICAgIHN1cHBvcnQgYHB1c2hTdGF0ZWAuXHJcbiAgICogICAtICoqcmVxdWlyZUJhc2UqKiAtIGB7Ym9vbGVhbn1gIC0gKGRlZmF1bHQ6IGB0cnVlYCkgV2hlbiBodG1sNU1vZGUgaXMgZW5hYmxlZCwgc3BlY2lmaWVzXHJcbiAgICogICAgIHdoZXRoZXIgb3Igbm90IGEgPGJhc2U+IHRhZyBpcyByZXF1aXJlZCB0byBiZSBwcmVzZW50LiBJZiBgZW5hYmxlZGAgYW5kIGByZXF1aXJlQmFzZWAgYXJlXHJcbiAgICogICAgIHRydWUsIGFuZCBhIGJhc2UgdGFnIGlzIG5vdCBwcmVzZW50LCBhbiBlcnJvciB3aWxsIGJlIHRocm93biB3aGVuIGAkbG9jYXRpb25gIGlzIGluamVjdGVkLlxyXG4gICAqICAgICBTZWUgdGhlIHtAbGluayBndWlkZS8kbG9jYXRpb24gJGxvY2F0aW9uIGd1aWRlIGZvciBtb3JlIGluZm9ybWF0aW9ufVxyXG4gICAqICAgLSAqKnJld3JpdGVMaW5rcyoqIC0gYHtib29sZWFufWAgLSAoZGVmYXVsdDogYHRydWVgKSBXaGVuIGh0bWw1TW9kZSBpcyBlbmFibGVkLFxyXG4gICAqICAgICBlbmFibGVzL2Rpc2FibGVzIHVybCByZXdyaXRpbmcgZm9yIHJlbGF0aXZlIGxpbmtzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge09iamVjdH0gaHRtbDVNb2RlIG9iamVjdCBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxyXG4gICAqL1xyXG4gIHRoaXMuaHRtbDVNb2RlID0gZnVuY3Rpb24obW9kZSkge1xyXG4gICAgaWYgKGlzQm9vbGVhbihtb2RlKSkge1xyXG4gICAgICBodG1sNU1vZGUuZW5hYmxlZCA9IG1vZGU7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSBlbHNlIGlmIChpc09iamVjdChtb2RlKSkge1xyXG5cclxuICAgICAgaWYgKGlzQm9vbGVhbihtb2RlLmVuYWJsZWQpKSB7XHJcbiAgICAgICAgaHRtbDVNb2RlLmVuYWJsZWQgPSBtb2RlLmVuYWJsZWQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpc0Jvb2xlYW4obW9kZS5yZXF1aXJlQmFzZSkpIHtcclxuICAgICAgICBodG1sNU1vZGUucmVxdWlyZUJhc2UgPSBtb2RlLnJlcXVpcmVCYXNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNCb29sZWFuKG1vZGUucmV3cml0ZUxpbmtzKSkge1xyXG4gICAgICAgIGh0bWw1TW9kZS5yZXdyaXRlTGlua3MgPSBtb2RlLnJld3JpdGVMaW5rcztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gaHRtbDVNb2RlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBldmVudFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiMkbG9jYXRpb25DaGFuZ2VTdGFydFxyXG4gICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHJvb3Qgc2NvcGVcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBCcm9hZGNhc3RlZCBiZWZvcmUgYSBVUkwgd2lsbCBjaGFuZ2UuXHJcbiAgICpcclxuICAgKiBUaGlzIGNoYW5nZSBjYW4gYmUgcHJldmVudGVkIGJ5IGNhbGxpbmdcclxuICAgKiBgcHJldmVudERlZmF1bHRgIG1ldGhvZCBvZiB0aGUgZXZlbnQuIFNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259IGZvciBtb3JlXHJcbiAgICogZGV0YWlscyBhYm91dCBldmVudCBvYmplY3QuIFVwb24gc3VjY2Vzc2Z1bCBjaGFuZ2VcclxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc30gaXMgZmlyZWQuXHJcbiAgICpcclxuICAgKiBUaGUgYG5ld1N0YXRlYCBhbmQgYG9sZFN0YXRlYCBwYXJhbWV0ZXJzIG1heSBiZSBkZWZpbmVkIG9ubHkgaW4gSFRNTDUgbW9kZSBhbmQgd2hlblxyXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9sZFVybCBVUkwgdGhhdCB3YXMgYmVmb3JlIGl0IHdhcyBjaGFuZ2VkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmV3U3RhdGUgTmV3IGhpc3Rvcnkgc3RhdGUgb2JqZWN0XHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBldmVudFxyXG4gICAqIEBuYW1lICRsb2NhdGlvbiMkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXHJcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEJyb2FkY2FzdGVkIGFmdGVyIGEgVVJMIHdhcyBjaGFuZ2VkLlxyXG4gICAqXHJcbiAgICogVGhlIGBuZXdTdGF0ZWAgYW5kIGBvbGRTdGF0ZWAgcGFyYW1ldGVycyBtYXkgYmUgZGVmaW5lZCBvbmx5IGluIEhUTUw1IG1vZGUgYW5kIHdoZW5cclxuICAgKiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGUgSFRNTDUgSGlzdG9yeSBBUEkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1VybCBOZXcgVVJMXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5ld1N0YXRlIE5ldyBoaXN0b3J5IHN0YXRlIG9iamVjdFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb2xkU3RhdGUgSGlzdG9yeSBzdGF0ZSBvYmplY3QgdGhhdCB3YXMgYmVmb3JlIGl0IHdhcyBjaGFuZ2VkLlxyXG4gICAqL1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGJyb3dzZXInLCAnJHNuaWZmZXInLCAnJHJvb3RFbGVtZW50JywgJyR3aW5kb3cnLFxyXG4gICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkYnJvd3NlciwgJHNuaWZmZXIsICRyb290RWxlbWVudCwgJHdpbmRvdykge1xyXG4gICAgdmFyICRsb2NhdGlvbixcclxuICAgICAgICBMb2NhdGlvbk1vZGUsXHJcbiAgICAgICAgYmFzZUhyZWYgPSAkYnJvd3Nlci5iYXNlSHJlZigpLCAvLyBpZiBiYXNlW2hyZWZdIGlzIHVuZGVmaW5lZCwgaXQgZGVmYXVsdHMgdG8gJydcclxuICAgICAgICBpbml0aWFsVXJsID0gJGJyb3dzZXIudXJsKCksXHJcbiAgICAgICAgYXBwQmFzZTtcclxuXHJcbiAgICBpZiAoaHRtbDVNb2RlLmVuYWJsZWQpIHtcclxuICAgICAgaWYgKCFiYXNlSHJlZiAmJiBodG1sNU1vZGUucmVxdWlyZUJhc2UpIHtcclxuICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vYmFzZScsXHJcbiAgICAgICAgICBcIiRsb2NhdGlvbiBpbiBIVE1MNSBtb2RlIHJlcXVpcmVzIGEgPGJhc2U+IHRhZyB0byBiZSBwcmVzZW50IVwiKTtcclxuICAgICAgfVxyXG4gICAgICBhcHBCYXNlID0gc2VydmVyQmFzZShpbml0aWFsVXJsKSArIChiYXNlSHJlZiB8fCAnLycpO1xyXG4gICAgICBMb2NhdGlvbk1vZGUgPSAkc25pZmZlci5oaXN0b3J5ID8gTG9jYXRpb25IdG1sNVVybCA6IExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXBwQmFzZSA9IHN0cmlwSGFzaChpbml0aWFsVXJsKTtcclxuICAgICAgTG9jYXRpb25Nb2RlID0gTG9jYXRpb25IYXNoYmFuZ1VybDtcclxuICAgIH1cclxuICAgICRsb2NhdGlvbiA9IG5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwgJyMnICsgaGFzaFByZWZpeCk7XHJcbiAgICAkbG9jYXRpb24uJCRwYXJzZUxpbmtVcmwoaW5pdGlhbFVybCwgaW5pdGlhbFVybCk7XHJcblxyXG4gICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xyXG5cclxuICAgIHZhciBJR05PUkVfVVJJX1JFR0VYUCA9IC9eXFxzKihqYXZhc2NyaXB0fG1haWx0byk6L2k7XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0QnJvd3NlclVybFdpdGhGYWxsYmFjayh1cmwsIHJlcGxhY2UsIHN0YXRlKSB7XHJcbiAgICAgIHZhciBvbGRVcmwgPSAkbG9jYXRpb24udXJsKCk7XHJcbiAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICRicm93c2VyLnVybCh1cmwsIHJlcGxhY2UsIHN0YXRlKTtcclxuXHJcbiAgICAgICAgLy8gTWFrZSBzdXJlICRsb2NhdGlvbi5zdGF0ZSgpIHJldHVybnMgcmVmZXJlbnRpYWxseSBpZGVudGljYWwgKG5vdCBqdXN0IGRlZXBseSBlcXVhbClcclxuICAgICAgICAvLyBzdGF0ZSBvYmplY3Q7IHRoaXMgbWFrZXMgcG9zc2libGUgcXVpY2sgY2hlY2tpbmcgaWYgdGhlIHN0YXRlIGNoYW5nZWQgaW4gdGhlIGRpZ2VzdFxyXG4gICAgICAgIC8vIGxvb3AuIENoZWNraW5nIGRlZXAgZXF1YWxpdHkgd291bGQgYmUgdG9vIGV4cGVuc2l2ZS5cclxuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBSZXN0b3JlIG9sZCB2YWx1ZXMgaWYgcHVzaFN0YXRlIGZhaWxzXHJcbiAgICAgICAgJGxvY2F0aW9uLnVybChvbGRVcmwpO1xyXG4gICAgICAgICRsb2NhdGlvbi4kJHN0YXRlID0gb2xkU3RhdGU7XHJcblxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAkcm9vdEVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgLy8gVE9ETyh2b2p0YSk6IHJld3JpdGUgbGluayB3aGVuIG9wZW5pbmcgaW4gbmV3IHRhYi93aW5kb3cgKGluIGxlZ2FjeSBicm93c2VyKVxyXG4gICAgICAvLyBjdXJyZW50bHkgd2Ugb3BlbiBuaWNlIHVybCBsaW5rIGFuZCByZWRpcmVjdCB0aGVuXHJcblxyXG4gICAgICBpZiAoIWh0bWw1TW9kZS5yZXdyaXRlTGlua3MgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LndoaWNoID09IDIgfHwgZXZlbnQuYnV0dG9uID09IDIpIHJldHVybjtcclxuXHJcbiAgICAgIHZhciBlbG0gPSBqcUxpdGUoZXZlbnQudGFyZ2V0KTtcclxuXHJcbiAgICAgIC8vIHRyYXZlcnNlIHRoZSBET00gdXAgdG8gZmluZCBmaXJzdCBBIHRhZ1xyXG4gICAgICB3aGlsZSAobm9kZU5hbWVfKGVsbVswXSkgIT09ICdhJykge1xyXG4gICAgICAgIC8vIGlnbm9yZSByZXdyaXRpbmcgaWYgbm8gQSB0YWcgKHJlYWNoZWQgcm9vdCBlbGVtZW50LCBvciBubyBwYXJlbnQgLSByZW1vdmVkIGZyb20gZG9jdW1lbnQpXHJcbiAgICAgICAgaWYgKGVsbVswXSA9PT0gJHJvb3RFbGVtZW50WzBdIHx8ICEoZWxtID0gZWxtLnBhcmVudCgpKVswXSkgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgYWJzSHJlZiA9IGVsbS5wcm9wKCdocmVmJyk7XHJcbiAgICAgIC8vIGdldCB0aGUgYWN0dWFsIGhyZWYgYXR0cmlidXRlIC0gc2VlXHJcbiAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kZDM0NzE0OCh2PXZzLjg1KS5hc3B4XHJcbiAgICAgIHZhciByZWxIcmVmID0gZWxtLmF0dHIoJ2hyZWYnKSB8fCBlbG0uYXR0cigneGxpbms6aHJlZicpO1xyXG5cclxuICAgICAgaWYgKGlzT2JqZWN0KGFic0hyZWYpICYmIGFic0hyZWYudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xyXG4gICAgICAgIC8vIFNWR0FuaW1hdGVkU3RyaW5nLmFuaW1WYWwgc2hvdWxkIGJlIGlkZW50aWNhbCB0byBTVkdBbmltYXRlZFN0cmluZy5iYXNlVmFsLCB1bmxlc3MgZHVyaW5nXHJcbiAgICAgICAgLy8gYW4gYW5pbWF0aW9uLlxyXG4gICAgICAgIGFic0hyZWYgPSB1cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWdub3JlIHdoZW4gdXJsIGlzIHN0YXJ0ZWQgd2l0aCBqYXZhc2NyaXB0OiBvciBtYWlsdG86XHJcbiAgICAgIGlmIChJR05PUkVfVVJJX1JFR0VYUC50ZXN0KGFic0hyZWYpKSByZXR1cm47XHJcblxyXG4gICAgICBpZiAoYWJzSHJlZiAmJiAhZWxtLmF0dHIoJ3RhcmdldCcpICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xyXG4gICAgICAgIGlmICgkbG9jYXRpb24uJCRwYXJzZUxpbmtVcmwoYWJzSHJlZiwgcmVsSHJlZikpIHtcclxuICAgICAgICAgIC8vIFdlIGRvIGEgcHJldmVudERlZmF1bHQgZm9yIGFsbCB1cmxzIHRoYXQgYXJlIHBhcnQgb2YgdGhlIGFuZ3VsYXIgYXBwbGljYXRpb24sXHJcbiAgICAgICAgICAvLyBpbiBodG1sNW1vZGUgYW5kIGFsc28gd2l0aG91dCwgc28gdGhhdCB3ZSBhcmUgYWJsZSB0byBhYm9ydCBuYXZpZ2F0aW9uIHdpdGhvdXRcclxuICAgICAgICAgIC8vIGdldHRpbmcgZG91YmxlIGVudHJpZXMgaW4gdGhlIGxvY2F0aW9uIGhpc3RvcnkuXHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgLy8gdXBkYXRlIGxvY2F0aW9uIG1hbnVhbGx5XHJcbiAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9ICRicm93c2VyLnVybCgpKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgIC8vIGhhY2sgdG8gd29yayBhcm91bmQgRkY2IGJ1ZyA2ODQyMDggd2hlbiBzY2VuYXJpbyBydW5uZXIgY2xpY2tzIG9uIGxpbmtzXHJcbiAgICAgICAgICAgICR3aW5kb3cuYW5ndWxhclsnZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0J10gPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vIHJld3JpdGUgaGFzaGJhbmcgdXJsIDw+IGh0bWw1IHVybFxyXG4gICAgaWYgKHRyaW1FbXB0eUhhc2goJGxvY2F0aW9uLmFic1VybCgpKSAhPSB0cmltRW1wdHlIYXNoKGluaXRpYWxVcmwpKSB7XHJcbiAgICAgICRicm93c2VyLnVybCgkbG9jYXRpb24uYWJzVXJsKCksIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbml0aWFsaXppbmcgPSB0cnVlO1xyXG5cclxuICAgIC8vIHVwZGF0ZSAkbG9jYXRpb24gd2hlbiAkYnJvd3NlciB1cmwgY2hhbmdlc1xyXG4gICAgJGJyb3dzZXIub25VcmxDaGFuZ2UoZnVuY3Rpb24obmV3VXJsLCBuZXdTdGF0ZSkge1xyXG4gICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG9sZFVybCA9ICRsb2NhdGlvbi5hYnNVcmwoKTtcclxuICAgICAgICB2YXIgb2xkU3RhdGUgPSAkbG9jYXRpb24uJCRzdGF0ZTtcclxuICAgICAgICB2YXIgZGVmYXVsdFByZXZlbnRlZDtcclxuXHJcbiAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2UobmV3VXJsKTtcclxuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG5ld1N0YXRlO1xyXG5cclxuICAgICAgICBkZWZhdWx0UHJldmVudGVkID0gJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckbG9jYXRpb25DaGFuZ2VTdGFydCcsIG5ld1VybCwgb2xkVXJsLFxyXG4gICAgICAgICAgICBuZXdTdGF0ZSwgb2xkU3RhdGUpLmRlZmF1bHRQcmV2ZW50ZWQ7XHJcblxyXG4gICAgICAgIC8vIGlmIHRoZSBsb2NhdGlvbiB3YXMgY2hhbmdlZCBieSBhIGAkbG9jYXRpb25DaGFuZ2VTdGFydGAgaGFuZGxlciB0aGVuIHN0b3BcclxuICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXHJcbiAgICAgICAgaWYgKCRsb2NhdGlvbi5hYnNVcmwoKSAhPT0gbmV3VXJsKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XHJcbiAgICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpO1xyXG4gICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcclxuICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sob2xkVXJsLCBmYWxzZSwgb2xkU3RhdGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbml0aWFsaXppbmcgPSBmYWxzZTtcclxuICAgICAgICAgIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsLCBvbGRTdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gdXBkYXRlIGJyb3dzZXJcclxuICAgICRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uICRsb2NhdGlvbldhdGNoKCkge1xyXG4gICAgICB2YXIgb2xkVXJsID0gdHJpbUVtcHR5SGFzaCgkYnJvd3Nlci51cmwoKSk7XHJcbiAgICAgIHZhciBuZXdVcmwgPSB0cmltRW1wdHlIYXNoKCRsb2NhdGlvbi5hYnNVcmwoKSk7XHJcbiAgICAgIHZhciBvbGRTdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XHJcbiAgICAgIHZhciBjdXJyZW50UmVwbGFjZSA9ICRsb2NhdGlvbi4kJHJlcGxhY2U7XHJcbiAgICAgIHZhciB1cmxPclN0YXRlQ2hhbmdlZCA9IG9sZFVybCAhPT0gbmV3VXJsIHx8XHJcbiAgICAgICAgKCRsb2NhdGlvbi4kJGh0bWw1ICYmICRzbmlmZmVyLmhpc3RvcnkgJiYgb2xkU3RhdGUgIT09ICRsb2NhdGlvbi4kJHN0YXRlKTtcclxuXHJcbiAgICAgIGlmIChpbml0aWFsaXppbmcgfHwgdXJsT3JTdGF0ZUNoYW5nZWQpIHtcclxuICAgICAgICBpbml0aWFsaXppbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIG5ld1VybCA9ICRsb2NhdGlvbi5hYnNVcmwoKTtcclxuICAgICAgICAgIHZhciBkZWZhdWx0UHJldmVudGVkID0gJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckbG9jYXRpb25DaGFuZ2VTdGFydCcsIG5ld1VybCwgb2xkVXJsLFxyXG4gICAgICAgICAgICAgICRsb2NhdGlvbi4kJHN0YXRlLCBvbGRTdGF0ZSkuZGVmYXVsdFByZXZlbnRlZDtcclxuXHJcbiAgICAgICAgICAvLyBpZiB0aGUgbG9jYXRpb24gd2FzIGNoYW5nZWQgYnkgYSBgJGxvY2F0aW9uQ2hhbmdlU3RhcnRgIGhhbmRsZXIgdGhlbiBzdG9wXHJcbiAgICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXHJcbiAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSBuZXdVcmwpIHJldHVybjtcclxuXHJcbiAgICAgICAgICBpZiAoZGVmYXVsdFByZXZlbnRlZCkge1xyXG4gICAgICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpO1xyXG4gICAgICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG9sZFN0YXRlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHVybE9yU3RhdGVDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgc2V0QnJvd3NlclVybFdpdGhGYWxsYmFjayhuZXdVcmwsIGN1cnJlbnRSZXBsYWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkU3RhdGUgPT09ICRsb2NhdGlvbi4kJHN0YXRlID8gbnVsbCA6ICRsb2NhdGlvbi4kJHN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZnRlckxvY2F0aW9uQ2hhbmdlKG9sZFVybCwgb2xkU3RhdGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkbG9jYXRpb24uJCRyZXBsYWNlID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHJldHVybiBhbnl0aGluZyBiZWNhdXNlICRldmFsQXN5bmMgd2lsbCBtYWtlIHRoZSBkaWdlc3QgbG9vcCBkaXJ0eSB3aGVuXHJcbiAgICAgIC8vIHRoZXJlIGlzIGEgY2hhbmdlXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gJGxvY2F0aW9uO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsLCBvbGRTdGF0ZSkge1xyXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCxcclxuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSwgb2xkU3RhdGUpO1xyXG4gICAgfVxyXG59XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRsb2dcclxuICogQHJlcXVpcmVzICR3aW5kb3dcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNpbXBsZSBzZXJ2aWNlIGZvciBsb2dnaW5nLiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHNhZmVseSB3cml0ZXMgdGhlIG1lc3NhZ2VcclxuICogaW50byB0aGUgYnJvd3NlcidzIGNvbnNvbGUgKGlmIHByZXNlbnQpLlxyXG4gKlxyXG4gKiBUaGUgbWFpbiBwdXJwb3NlIG9mIHRoaXMgc2VydmljZSBpcyB0byBzaW1wbGlmeSBkZWJ1Z2dpbmcgYW5kIHRyb3VibGVzaG9vdGluZy5cclxuICpcclxuICogVGhlIGRlZmF1bHQgaXMgdG8gbG9nIGBkZWJ1Z2AgbWVzc2FnZXMuIFlvdSBjYW4gdXNlXHJcbiAqIHtAbGluayBuZy4kbG9nUHJvdmlkZXIgbmcuJGxvZ1Byb3ZpZGVyI2RlYnVnRW5hYmxlZH0gdG8gY2hhbmdlIHRoaXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImxvZ0V4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnbG9nRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAuY29udHJvbGxlcignTG9nQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2cnLCBmdW5jdGlvbigkc2NvcGUsICRsb2cpIHtcclxuICAgICAgICAgICAkc2NvcGUuJGxvZyA9ICRsb2c7XHJcbiAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSAnSGVsbG8gV29ybGQhJztcclxuICAgICAgICAgfV0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTG9nQ29udHJvbGxlclwiPlxyXG4gICAgICAgICA8cD5SZWxvYWQgdGhpcyBwYWdlIHdpdGggb3BlbiBjb25zb2xlLCBlbnRlciB0ZXh0IGFuZCBoaXQgdGhlIGxvZyBidXR0b24uLi48L3A+XHJcbiAgICAgICAgIE1lc3NhZ2U6XHJcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibWVzc2FnZVwiLz5cclxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cubG9nKG1lc3NhZ2UpXCI+bG9nPC9idXR0b24+XHJcbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLndhcm4obWVzc2FnZSlcIj53YXJuPC9idXR0b24+XHJcbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmluZm8obWVzc2FnZSlcIj5pbmZvPC9idXR0b24+XHJcbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmVycm9yKG1lc3NhZ2UpXCI+ZXJyb3I8L2J1dHRvbj5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGxvZ1Byb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBVc2UgdGhlIGAkbG9nUHJvdmlkZXJgIHRvIGNvbmZpZ3VyZSBob3cgdGhlIGFwcGxpY2F0aW9uIGxvZ3MgbWVzc2FnZXNcclxuICovXHJcbmZ1bmN0aW9uICRMb2dQcm92aWRlcigpIHtcclxuICB2YXIgZGVidWcgPSB0cnVlLFxyXG4gICAgICBzZWxmID0gdGhpcztcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWRcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBmbGFnIGVuYWJsZSBvciBkaXNhYmxlIGRlYnVnIGxldmVsIG1lc3NhZ2VzXHJcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcclxuICAgKi9cclxuICB0aGlzLmRlYnVnRW5hYmxlZCA9IGZ1bmN0aW9uKGZsYWcpIHtcclxuICAgIGlmIChpc0RlZmluZWQoZmxhZykpIHtcclxuICAgICAgZGVidWcgPSBmbGFnO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZGVidWc7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgZnVuY3Rpb24oJHdpbmRvdykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGxvZyNsb2dcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFdyaXRlIGEgbG9nIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIGxvZzogY29uc29sZUxvZygnbG9nJyksXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkbG9nI2luZm9cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFdyaXRlIGFuIGluZm9ybWF0aW9uIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIGluZm86IGNvbnNvbGVMb2coJ2luZm8nKSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRsb2cjd2FyblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogV3JpdGUgYSB3YXJuaW5nIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIHdhcm46IGNvbnNvbGVMb2coJ3dhcm4nKSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRsb2cjZXJyb3JcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFdyaXRlIGFuIGVycm9yIG1lc3NhZ2VcclxuICAgICAgICovXHJcbiAgICAgIGVycm9yOiBjb25zb2xlTG9nKCdlcnJvcicpLFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJGxvZyNkZWJ1Z1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogV3JpdGUgYSBkZWJ1ZyBtZXNzYWdlXHJcbiAgICAgICAqL1xyXG4gICAgICBkZWJ1ZzogKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBmbiA9IGNvbnNvbGVMb2coJ2RlYnVnJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChkZWJ1Zykge1xyXG4gICAgICAgICAgICBmbi5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0oKSlcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZm9ybWF0RXJyb3IoYXJnKSB7XHJcbiAgICAgIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgIGlmIChhcmcuc3RhY2spIHtcclxuICAgICAgICAgIGFyZyA9IChhcmcubWVzc2FnZSAmJiBhcmcuc3RhY2suaW5kZXhPZihhcmcubWVzc2FnZSkgPT09IC0xKVxyXG4gICAgICAgICAgICAgID8gJ0Vycm9yOiAnICsgYXJnLm1lc3NhZ2UgKyAnXFxuJyArIGFyZy5zdGFja1xyXG4gICAgICAgICAgICAgIDogYXJnLnN0YWNrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXJnLnNvdXJjZVVSTCkge1xyXG4gICAgICAgICAgYXJnID0gYXJnLm1lc3NhZ2UgKyAnXFxuJyArIGFyZy5zb3VyY2VVUkwgKyAnOicgKyBhcmcubGluZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGFyZztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb25zb2xlTG9nKHR5cGUpIHtcclxuICAgICAgdmFyIGNvbnNvbGUgPSAkd2luZG93LmNvbnNvbGUgfHwge30sXHJcbiAgICAgICAgICBsb2dGbiA9IGNvbnNvbGVbdHlwZV0gfHwgY29uc29sZS5sb2cgfHwgbm9vcCxcclxuICAgICAgICAgIGhhc0FwcGx5ID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBOb3RlOiByZWFkaW5nIGxvZ0ZuLmFwcGx5IHRocm93cyBhbiBlcnJvciBpbiBJRTExIGluIElFOCBkb2N1bWVudCBtb2RlLlxyXG4gICAgICAvLyBUaGUgcmVhc29uIGJlaGluZCB0aGlzIGlzIHRoYXQgY29uc29sZS5sb2cgaGFzIHR5cGUgXCJvYmplY3RcIiBpbiBJRTguLi5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBoYXNBcHBseSA9ICEhbG9nRm4uYXBwbHk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcblxyXG4gICAgICBpZiAoaGFzQXBwbHkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykge1xyXG4gICAgICAgICAgICBhcmdzLnB1c2goZm9ybWF0RXJyb3IoYXJnKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBsb2dGbi5hcHBseShjb25zb2xlLCBhcmdzKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyB3ZSBhcmUgSUUgd2hpY2ggZWl0aGVyIGRvZXNuJ3QgaGF2ZSB3aW5kb3cuY29uc29sZSA9PiB0aGlzIGlzIG5vb3AgYW5kIHdlIGRvIG5vdGhpbmcsXHJcbiAgICAgIC8vIG9yIHdlIGFyZSBJRSB3aGVyZSBjb25zb2xlLmxvZyBkb2Vzbid0IGhhdmUgYXBwbHkgc28gd2UgbG9nIGF0IGxlYXN0IGZpcnN0IDIgYXJnc1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xyXG4gICAgICAgIGxvZ0ZuKGFyZzEsIGFyZzIgPT0gbnVsbCA/ICcnIDogYXJnMik7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfV07XHJcbn1cclxuXHJcbnZhciAkcGFyc2VNaW5FcnIgPSBtaW5FcnIoJyRwYXJzZScpO1xyXG5cclxuLy8gU2FuZGJveGluZyBBbmd1bGFyIEV4cHJlc3Npb25zXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBBbmd1bGFyIGV4cHJlc3Npb25zIGFyZSBnZW5lcmFsbHkgY29uc2lkZXJlZCBzYWZlIGJlY2F1c2UgdGhlc2UgZXhwcmVzc2lvbnMgb25seSBoYXZlIGRpcmVjdFxyXG4vLyBhY2Nlc3MgdG8gYCRzY29wZWAgYW5kIGxvY2Fscy4gSG93ZXZlciwgb25lIGNhbiBvYnRhaW4gdGhlIGFiaWxpdHkgdG8gZXhlY3V0ZSBhcmJpdHJhcnkgSlMgY29kZSBieVxyXG4vLyBvYnRhaW5pbmcgYSByZWZlcmVuY2UgdG8gbmF0aXZlIEpTIGZ1bmN0aW9ucyBzdWNoIGFzIHRoZSBGdW5jdGlvbiBjb25zdHJ1Y3Rvci5cclxuLy9cclxuLy8gQXMgYW4gZXhhbXBsZSwgY29uc2lkZXIgdGhlIGZvbGxvd2luZyBBbmd1bGFyIGV4cHJlc3Npb246XHJcbi8vXHJcbi8vICAge30udG9TdHJpbmcuY29uc3RydWN0b3IoJ2FsZXJ0KFwiZXZpbCBKUyBjb2RlXCIpJylcclxuLy9cclxuLy8gVGhpcyBzYW5kYm94aW5nIHRlY2huaXF1ZSBpcyBub3QgcGVyZmVjdCBhbmQgZG9lc24ndCBhaW0gdG8gYmUuIFRoZSBnb2FsIGlzIHRvIHByZXZlbnQgZXhwbG9pdHNcclxuLy8gYWdhaW5zdCB0aGUgZXhwcmVzc2lvbiBsYW5ndWFnZSwgYnV0IG5vdCB0byBwcmV2ZW50IGV4cGxvaXRzIHRoYXQgd2VyZSBlbmFibGVkIGJ5IGV4cG9zaW5nXHJcbi8vIHNlbnNpdGl2ZSBKYXZhU2NyaXB0IG9yIGJyb3dzZXIgQVBJcyBvbiBTY29wZS4gRXhwb3Npbmcgc3VjaCBvYmplY3RzIG9uIGEgU2NvcGUgaXMgbmV2ZXIgYSBnb29kXHJcbi8vIHByYWN0aWNlIGFuZCB0aGVyZWZvcmUgd2UgYXJlIG5vdCBldmVuIHRyeWluZyB0byBwcm90ZWN0IGFnYWluc3QgaW50ZXJhY3Rpb24gd2l0aCBhbiBvYmplY3RcclxuLy8gZXhwbGljaXRseSBleHBvc2VkIGluIHRoaXMgd2F5LlxyXG4vL1xyXG4vLyBJbiBnZW5lcmFsLCBpdCBpcyBub3QgcG9zc2libGUgdG8gYWNjZXNzIGEgV2luZG93IG9iamVjdCBmcm9tIGFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB1bmxlc3MgYVxyXG4vLyB3aW5kb3cgb3Igc29tZSBET00gb2JqZWN0IHRoYXQgaGFzIGEgcmVmZXJlbmNlIHRvIHdpbmRvdyBpcyBwdWJsaXNoZWQgb250byBhIFNjb3BlLlxyXG4vLyBTaW1pbGFybHkgd2UgcHJldmVudCBpbnZvY2F0aW9ucyBvZiBmdW5jdGlvbiBrbm93biB0byBiZSBkYW5nZXJvdXMsIGFzIHdlbGwgYXMgYXNzaWdubWVudHMgdG9cclxuLy8gbmF0aXZlIG9iamVjdHMuXHJcbi8vXHJcbi8vIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9ndWlkZS9zZWN1cml0eVxyXG5cclxuXHJcbmZ1bmN0aW9uIGVuc3VyZVNhZmVNZW1iZXJOYW1lKG5hbWUsIGZ1bGxFeHByZXNzaW9uKSB7XHJcbiAgaWYgKG5hbWUgPT09IFwiX19kZWZpbmVHZXR0ZXJfX1wiIHx8IG5hbWUgPT09IFwiX19kZWZpbmVTZXR0ZXJfX1wiXHJcbiAgICAgIHx8IG5hbWUgPT09IFwiX19sb29rdXBHZXR0ZXJfX1wiIHx8IG5hbWUgPT09IFwiX19sb29rdXBTZXR0ZXJfX1wiXHJcbiAgICAgIHx8IG5hbWUgPT09IFwiX19wcm90b19fXCIpIHtcclxuICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZsZCcsXHJcbiAgICAgICAgJ0F0dGVtcHRpbmcgdG8gYWNjZXNzIGEgZGlzYWxsb3dlZCBmaWVsZCBpbiBBbmd1bGFyIGV4cHJlc3Npb25zISAnXHJcbiAgICAgICAgKyAnRXhwcmVzc2lvbjogezB9JywgZnVsbEV4cHJlc3Npb24pO1xyXG4gIH1cclxuICByZXR1cm4gbmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5zdXJlU2FmZU9iamVjdChvYmosIGZ1bGxFeHByZXNzaW9uKSB7XHJcbiAgLy8gbmlmdHkgY2hlY2sgaWYgb2JqIGlzIEZ1bmN0aW9uIHRoYXQgaXMgZmFzdCBhbmQgd29ya3MgYWNyb3NzIGlmcmFtZXMgYW5kIG90aGVyIGNvbnRleHRzXHJcbiAgaWYgKG9iaikge1xyXG4gICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gb2JqKSB7XHJcbiAgICAgIHRocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJyxcclxuICAgICAgICAgICdSZWZlcmVuY2luZyBGdW5jdGlvbiBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsXHJcbiAgICAgICAgICBmdWxsRXhwcmVzc2lvbik7XHJcbiAgICB9IGVsc2UgaWYgKC8vIGlzV2luZG93KG9iailcclxuICAgICAgICBvYmoud2luZG93ID09PSBvYmopIHtcclxuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCdpc2Vjd2luZG93JyxcclxuICAgICAgICAgICdSZWZlcmVuY2luZyB0aGUgV2luZG93IGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcclxuICAgICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcclxuICAgIH0gZWxzZSBpZiAoLy8gaXNFbGVtZW50KG9iailcclxuICAgICAgICBvYmouY2hpbGRyZW4gJiYgKG9iai5ub2RlTmFtZSB8fCAob2JqLnByb3AgJiYgb2JqLmF0dHIgJiYgb2JqLmZpbmQpKSkge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNkb20nLFxyXG4gICAgICAgICAgJ1JlZmVyZW5jaW5nIERPTSBub2RlcyBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsXHJcbiAgICAgICAgICBmdWxsRXhwcmVzc2lvbik7XHJcbiAgICB9IGVsc2UgaWYgKC8vIGJsb2NrIE9iamVjdCBzbyB0aGF0IHdlIGNhbid0IGdldCBob2xkIG9mIGRhbmdlcm91cyBPYmplY3QuKiBtZXRob2RzXHJcbiAgICAgICAgb2JqID09PSBPYmplY3QpIHtcclxuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCdpc2Vjb2JqJyxcclxuICAgICAgICAgICdSZWZlcmVuY2luZyBPYmplY3QgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxyXG4gICAgICAgICAgZnVsbEV4cHJlc3Npb24pO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG52YXIgQ0FMTCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO1xyXG52YXIgQVBQTFkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XHJcbnZhciBCSU5EID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7XHJcblxyXG5mdW5jdGlvbiBlbnN1cmVTYWZlRnVuY3Rpb24ob2JqLCBmdWxsRXhwcmVzc2lvbikge1xyXG4gIGlmIChvYmopIHtcclxuICAgIGlmIChvYmouY29uc3RydWN0b3IgPT09IG9iaikge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmbicsXHJcbiAgICAgICAgJ1JlZmVyZW5jaW5nIEZ1bmN0aW9uIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxcclxuICAgICAgICBmdWxsRXhwcmVzc2lvbik7XHJcbiAgICB9IGVsc2UgaWYgKG9iaiA9PT0gQ0FMTCB8fCBvYmogPT09IEFQUExZIHx8IG9iaiA9PT0gQklORCkge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmZicsXHJcbiAgICAgICAgJ1JlZmVyZW5jaW5nIGNhbGwsIGFwcGx5IG9yIGJpbmQgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLFxyXG4gICAgICAgIGZ1bGxFeHByZXNzaW9uKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vS2V5d29yZCBjb25zdGFudHNcclxudmFyIENPTlNUQU5UUyA9IGNyZWF0ZU1hcCgpO1xyXG5mb3JFYWNoKHtcclxuICAnbnVsbCc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbnVsbDsgfSxcclxuICAndHJ1ZSc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcclxuICAnZmFsc2UnOiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9LFxyXG4gICd1bmRlZmluZWQnOiBmdW5jdGlvbigpIHt9XHJcbn0sIGZ1bmN0aW9uKGNvbnN0YW50R2V0dGVyLCBuYW1lKSB7XHJcbiAgY29uc3RhbnRHZXR0ZXIuY29uc3RhbnQgPSBjb25zdGFudEdldHRlci5saXRlcmFsID0gY29uc3RhbnRHZXR0ZXIuc2hhcmVkR2V0dGVyID0gdHJ1ZTtcclxuICBDT05TVEFOVFNbbmFtZV0gPSBjb25zdGFudEdldHRlcjtcclxufSk7XHJcblxyXG4vL05vdCBxdWl0ZSBhIGNvbnN0YW50LCBidXQgY2FuIGJlIGxleC9wYXJzZWQgdGhlIHNhbWVcclxuQ09OU1RBTlRTWyd0aGlzJ10gPSBmdW5jdGlvbihzZWxmKSB7IHJldHVybiBzZWxmOyB9O1xyXG5DT05TVEFOVFNbJ3RoaXMnXS5zaGFyZWRHZXR0ZXIgPSB0cnVlO1xyXG5cclxuXHJcbi8vT3BlcmF0b3JzIC0gd2lsbCBiZSB3cmFwcGVkIGJ5IGJpbmFyeUZuL3VuYXJ5Rm4vYXNzaWdubWVudC9maWx0ZXJcclxudmFyIE9QRVJBVE9SUyA9IGV4dGVuZChjcmVhdGVNYXAoKSwge1xyXG4gICAgJysnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge1xyXG4gICAgICBhPWEoc2VsZiwgbG9jYWxzKTsgYj1iKHNlbGYsIGxvY2Fscyk7XHJcbiAgICAgIGlmIChpc0RlZmluZWQoYSkpIHtcclxuICAgICAgICBpZiAoaXNEZWZpbmVkKGIpKSB7XHJcbiAgICAgICAgICByZXR1cm4gYSArIGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBpc0RlZmluZWQoYikgPyBiIDogdW5kZWZpbmVkO30sXHJcbiAgICAnLSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7XHJcbiAgICAgICAgICBhPWEoc2VsZiwgbG9jYWxzKTsgYj1iKHNlbGYsIGxvY2Fscyk7XHJcbiAgICAgICAgICByZXR1cm4gKGlzRGVmaW5lZChhKSA/IGEgOiAwKSAtIChpc0RlZmluZWQoYikgPyBiIDogMCk7XHJcbiAgICAgICAgfSxcclxuICAgICcqJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEsIGIpIHtyZXR1cm4gYShzZWxmLCBsb2NhbHMpICogYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnLyc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSAvIGIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJyUnOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgJSBiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICc9PT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgPT09IGIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJyE9PSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSAhPT0gYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnPT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgPT0gYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnIT0nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgIT0gYihzZWxmLCBsb2NhbHMpO30sXHJcbiAgICAnPCc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSA8IGIoc2VsZiwgbG9jYWxzKTt9LFxyXG4gICAgJz4nOmZ1bmN0aW9uKHNlbGYsIGxvY2FscywgYSwgYikge3JldHVybiBhKHNlbGYsIGxvY2FscykgPiBiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICc8PSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSA8PSBiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICc+PSc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSA+PSBiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICcmJic6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSAmJiBiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICd8fCc6ZnVuY3Rpb24oc2VsZiwgbG9jYWxzLCBhLCBiKSB7cmV0dXJuIGEoc2VsZiwgbG9jYWxzKSB8fCBiKHNlbGYsIGxvY2Fscyk7fSxcclxuICAgICchJzpmdW5jdGlvbihzZWxmLCBsb2NhbHMsIGEpIHtyZXR1cm4gIWEoc2VsZiwgbG9jYWxzKTt9LFxyXG5cclxuICAgIC8vVG9rZW5pemVkIGFzIG9wZXJhdG9ycyBidXQgcGFyc2VkIGFzIGFzc2lnbm1lbnQvZmlsdGVyc1xyXG4gICAgJz0nOnRydWUsXHJcbiAgICAnfCc6dHJ1ZVxyXG59KTtcclxudmFyIEVTQ0FQRSA9IHtcIm5cIjpcIlxcblwiLCBcImZcIjpcIlxcZlwiLCBcInJcIjpcIlxcclwiLCBcInRcIjpcIlxcdFwiLCBcInZcIjpcIlxcdlwiLCBcIidcIjpcIidcIiwgJ1wiJzonXCInfTtcclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbnZhciBMZXhlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG59O1xyXG5cclxuTGV4ZXIucHJvdG90eXBlID0ge1xyXG4gIGNvbnN0cnVjdG9yOiBMZXhlcixcclxuXHJcbiAgbGV4OiBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xyXG4gICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICB0aGlzLnRva2VucyA9IFtdO1xyXG5cclxuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xyXG4gICAgICB2YXIgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xyXG4gICAgICBpZiAoY2ggPT09ICdcIicgfHwgY2ggPT09IFwiJ1wiKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkU3RyaW5nKGNoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTnVtYmVyKGNoKSB8fCBjaCA9PT0gJy4nICYmIHRoaXMuaXNOdW1iZXIodGhpcy5wZWVrKCkpKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkTnVtYmVyKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0lkZW50KGNoKSkge1xyXG4gICAgICAgIHRoaXMucmVhZElkZW50KCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pcyhjaCwgJygpe31bXS4sOzo/JykpIHtcclxuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtpbmRleDogdGhpcy5pbmRleCwgdGV4dDogY2h9KTtcclxuICAgICAgICB0aGlzLmluZGV4Kys7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1doaXRlc3BhY2UoY2gpKSB7XHJcbiAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBjaDIgPSBjaCArIHRoaXMucGVlaygpO1xyXG4gICAgICAgIHZhciBjaDMgPSBjaDIgKyB0aGlzLnBlZWsoMik7XHJcbiAgICAgICAgdmFyIG9wMSA9IE9QRVJBVE9SU1tjaF07XHJcbiAgICAgICAgdmFyIG9wMiA9IE9QRVJBVE9SU1tjaDJdO1xyXG4gICAgICAgIHZhciBvcDMgPSBPUEVSQVRPUlNbY2gzXTtcclxuICAgICAgICBpZiAob3AxIHx8IG9wMiB8fCBvcDMpIHtcclxuICAgICAgICAgIHZhciB0b2tlbiA9IG9wMyA/IGNoMyA6IChvcDIgPyBjaDIgOiBjaCk7XHJcbiAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtpbmRleDogdGhpcy5pbmRleCwgdGV4dDogdG9rZW4sIG9wZXJhdG9yOiB0cnVlfSk7XHJcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IHRva2VuLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyICcsIHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyAxKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnRva2VucztcclxuICB9LFxyXG5cclxuICBpczogZnVuY3Rpb24oY2gsIGNoYXJzKSB7XHJcbiAgICByZXR1cm4gY2hhcnMuaW5kZXhPZihjaCkgIT09IC0xO1xyXG4gIH0sXHJcblxyXG4gIHBlZWs6IGZ1bmN0aW9uKGkpIHtcclxuICAgIHZhciBudW0gPSBpIHx8IDE7XHJcbiAgICByZXR1cm4gKHRoaXMuaW5kZXggKyBudW0gPCB0aGlzLnRleHQubGVuZ3RoKSA/IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCArIG51bSkgOiBmYWxzZTtcclxuICB9LFxyXG5cclxuICBpc051bWJlcjogZnVuY3Rpb24oY2gpIHtcclxuICAgIHJldHVybiAoJzAnIDw9IGNoICYmIGNoIDw9ICc5JykgJiYgdHlwZW9mIGNoID09PSBcInN0cmluZ1wiO1xyXG4gIH0sXHJcblxyXG4gIGlzV2hpdGVzcGFjZTogZnVuY3Rpb24oY2gpIHtcclxuICAgIC8vIElFIHRyZWF0cyBub24tYnJlYWtpbmcgc3BhY2UgYXMgXFx1MDBBMFxyXG4gICAgcmV0dXJuIChjaCA9PT0gJyAnIHx8IGNoID09PSAnXFxyJyB8fCBjaCA9PT0gJ1xcdCcgfHxcclxuICAgICAgICAgICAgY2ggPT09ICdcXG4nIHx8IGNoID09PSAnXFx2JyB8fCBjaCA9PT0gJ1xcdTAwQTAnKTtcclxuICB9LFxyXG5cclxuICBpc0lkZW50OiBmdW5jdGlvbihjaCkge1xyXG4gICAgcmV0dXJuICgnYScgPD0gY2ggJiYgY2ggPD0gJ3onIHx8XHJcbiAgICAgICAgICAgICdBJyA8PSBjaCAmJiBjaCA8PSAnWicgfHxcclxuICAgICAgICAgICAgJ18nID09PSBjaCB8fCBjaCA9PT0gJyQnKTtcclxuICB9LFxyXG5cclxuICBpc0V4cE9wZXJhdG9yOiBmdW5jdGlvbihjaCkge1xyXG4gICAgcmV0dXJuIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycgfHwgdGhpcy5pc051bWJlcihjaCkpO1xyXG4gIH0sXHJcblxyXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKGVycm9yLCBzdGFydCwgZW5kKSB7XHJcbiAgICBlbmQgPSBlbmQgfHwgdGhpcy5pbmRleDtcclxuICAgIHZhciBjb2xTdHIgPSAoaXNEZWZpbmVkKHN0YXJ0KVxyXG4gICAgICAgICAgICA/ICdzICcgKyBzdGFydCArICAnLScgKyB0aGlzLmluZGV4ICsgJyBbJyArIHRoaXMudGV4dC5zdWJzdHJpbmcoc3RhcnQsIGVuZCkgKyAnXSdcclxuICAgICAgICAgICAgOiAnICcgKyBlbmQpO1xyXG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdsZXhlcnInLCAnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLFxyXG4gICAgICAgIGVycm9yLCBjb2xTdHIsIHRoaXMudGV4dCk7XHJcbiAgfSxcclxuXHJcbiAgcmVhZE51bWJlcjogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbnVtYmVyID0gJyc7XHJcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xyXG4gICAgd2hpbGUgKHRoaXMuaW5kZXggPCB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgIHZhciBjaCA9IGxvd2VyY2FzZSh0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpKTtcclxuICAgICAgaWYgKGNoID09ICcuJyB8fCB0aGlzLmlzTnVtYmVyKGNoKSkge1xyXG4gICAgICAgIG51bWJlciArPSBjaDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgcGVla0NoID0gdGhpcy5wZWVrKCk7XHJcbiAgICAgICAgaWYgKGNoID09ICdlJyAmJiB0aGlzLmlzRXhwT3BlcmF0b3IocGVla0NoKSkge1xyXG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0V4cE9wZXJhdG9yKGNoKSAmJlxyXG4gICAgICAgICAgICBwZWVrQ2ggJiYgdGhpcy5pc051bWJlcihwZWVrQ2gpICYmXHJcbiAgICAgICAgICAgIG51bWJlci5jaGFyQXQobnVtYmVyLmxlbmd0aCAtIDEpID09ICdlJykge1xyXG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0V4cE9wZXJhdG9yKGNoKSAmJlxyXG4gICAgICAgICAgICAoIXBlZWtDaCB8fCAhdGhpcy5pc051bWJlcihwZWVrQ2gpKSAmJlxyXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PSAnZScpIHtcclxuICAgICAgICAgIHRoaXMudGhyb3dFcnJvcignSW52YWxpZCBleHBvbmVudCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgfVxyXG4gICAgdGhpcy50b2tlbnMucHVzaCh7XHJcbiAgICAgIGluZGV4OiBzdGFydCxcclxuICAgICAgdGV4dDogbnVtYmVyLFxyXG4gICAgICBjb25zdGFudDogdHJ1ZSxcclxuICAgICAgdmFsdWU6IE51bWJlcihudW1iZXIpXHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICByZWFkSWRlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5pbmRleDtcclxuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xyXG4gICAgICB2YXIgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xyXG4gICAgICBpZiAoISh0aGlzLmlzSWRlbnQoY2gpIHx8IHRoaXMuaXNOdW1iZXIoY2gpKSkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgIH1cclxuICAgIHRoaXMudG9rZW5zLnB1c2goe1xyXG4gICAgICBpbmRleDogc3RhcnQsXHJcbiAgICAgIHRleHQ6IHRoaXMudGV4dC5zbGljZShzdGFydCwgdGhpcy5pbmRleCksXHJcbiAgICAgIGlkZW50aWZpZXI6IHRydWVcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIHJlYWRTdHJpbmc6IGZ1bmN0aW9uKHF1b3RlKSB7XHJcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xyXG4gICAgdGhpcy5pbmRleCsrO1xyXG4gICAgdmFyIHN0cmluZyA9ICcnO1xyXG4gICAgdmFyIHJhd1N0cmluZyA9IHF1b3RlO1xyXG4gICAgdmFyIGVzY2FwZSA9IGZhbHNlO1xyXG4gICAgd2hpbGUgKHRoaXMuaW5kZXggPCB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XHJcbiAgICAgIHJhd1N0cmluZyArPSBjaDtcclxuICAgICAgaWYgKGVzY2FwZSkge1xyXG4gICAgICAgIGlmIChjaCA9PT0gJ3UnKSB7XHJcbiAgICAgICAgICB2YXIgaGV4ID0gdGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLmluZGV4ICsgMSwgdGhpcy5pbmRleCArIDUpO1xyXG4gICAgICAgICAgaWYgKCFoZXgubWF0Y2goL1tcXGRhLWZdezR9L2kpKVxyXG4gICAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ0ludmFsaWQgdW5pY29kZSBlc2NhcGUgW1xcXFx1JyArIGhleCArICddJyk7XHJcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IDQ7XHJcbiAgICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChoZXgsIDE2KSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhciByZXAgPSBFU0NBUEVbY2hdO1xyXG4gICAgICAgICAgc3RyaW5nID0gc3RyaW5nICsgKHJlcCB8fCBjaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVzY2FwZSA9IGZhbHNlO1xyXG4gICAgICB9IGVsc2UgaWYgKGNoID09PSAnXFxcXCcpIHtcclxuICAgICAgICBlc2NhcGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKGNoID09PSBxdW90ZSkge1xyXG4gICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcclxuICAgICAgICAgIGluZGV4OiBzdGFydCxcclxuICAgICAgICAgIHRleHQ6IHJhd1N0cmluZyxcclxuICAgICAgICAgIGNvbnN0YW50OiB0cnVlLFxyXG4gICAgICAgICAgdmFsdWU6IHN0cmluZ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdHJpbmcgKz0gY2g7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgfVxyXG4gICAgdGhpcy50aHJvd0Vycm9yKCdVbnRlcm1pbmF0ZWQgcXVvdGUnLCBzdGFydCk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIGlzQ29uc3RhbnQoZXhwKSB7XHJcbiAgcmV0dXJuIGV4cC5jb25zdGFudDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxudmFyIFBhcnNlciA9IGZ1bmN0aW9uKGxleGVyLCAkZmlsdGVyLCBvcHRpb25zKSB7XHJcbiAgdGhpcy5sZXhlciA9IGxleGVyO1xyXG4gIHRoaXMuJGZpbHRlciA9ICRmaWx0ZXI7XHJcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxufTtcclxuXHJcblBhcnNlci5aRVJPID0gZXh0ZW5kKGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiAwO1xyXG59LCB7XHJcbiAgc2hhcmVkR2V0dGVyOiB0cnVlLFxyXG4gIGNvbnN0YW50OiB0cnVlXHJcbn0pO1xyXG5cclxuUGFyc2VyLnByb3RvdHlwZSA9IHtcclxuICBjb25zdHJ1Y3RvcjogUGFyc2VyLFxyXG5cclxuICBwYXJzZTogZnVuY3Rpb24odGV4dCkge1xyXG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICAgIHRoaXMudG9rZW5zID0gdGhpcy5sZXhlci5sZXgodGV4dCk7XHJcblxyXG4gICAgdmFyIHZhbHVlID0gdGhpcy5zdGF0ZW1lbnRzKCk7XHJcblxyXG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICB0aGlzLnRocm93RXJyb3IoJ2lzIGFuIHVuZXhwZWN0ZWQgdG9rZW4nLCB0aGlzLnRva2Vuc1swXSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsdWUubGl0ZXJhbCA9ICEhdmFsdWUubGl0ZXJhbDtcclxuICAgIHZhbHVlLmNvbnN0YW50ID0gISF2YWx1ZS5jb25zdGFudDtcclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfSxcclxuXHJcbiAgcHJpbWFyeTogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcHJpbWFyeTtcclxuICAgIGlmICh0aGlzLmV4cGVjdCgnKCcpKSB7XHJcbiAgICAgIHByaW1hcnkgPSB0aGlzLmZpbHRlckNoYWluKCk7XHJcbiAgICAgIHRoaXMuY29uc3VtZSgnKScpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmV4cGVjdCgnWycpKSB7XHJcbiAgICAgIHByaW1hcnkgPSB0aGlzLmFycmF5RGVjbGFyYXRpb24oKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5leHBlY3QoJ3snKSkge1xyXG4gICAgICBwcmltYXJ5ID0gdGhpcy5vYmplY3QoKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuaWRlbnRpZmllciAmJiB0aGlzLnBlZWsoKS50ZXh0IGluIENPTlNUQU5UUykge1xyXG4gICAgICBwcmltYXJ5ID0gQ09OU1RBTlRTW3RoaXMuY29uc3VtZSgpLnRleHRdO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnBlZWsoKS5pZGVudGlmaWVyKSB7XHJcbiAgICAgIHByaW1hcnkgPSB0aGlzLmlkZW50aWZpZXIoKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuY29uc3RhbnQpIHtcclxuICAgICAgcHJpbWFyeSA9IHRoaXMuY29uc3RhbnQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJywgdGhpcy5wZWVrKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBuZXh0LCBjb250ZXh0O1xyXG4gICAgd2hpbGUgKChuZXh0ID0gdGhpcy5leHBlY3QoJygnLCAnWycsICcuJykpKSB7XHJcbiAgICAgIGlmIChuZXh0LnRleHQgPT09ICcoJykge1xyXG4gICAgICAgIHByaW1hcnkgPSB0aGlzLmZ1bmN0aW9uQ2FsbChwcmltYXJ5LCBjb250ZXh0KTtcclxuICAgICAgICBjb250ZXh0ID0gbnVsbDtcclxuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICdbJykge1xyXG4gICAgICAgIGNvbnRleHQgPSBwcmltYXJ5O1xyXG4gICAgICAgIHByaW1hcnkgPSB0aGlzLm9iamVjdEluZGV4KHByaW1hcnkpO1xyXG4gICAgICB9IGVsc2UgaWYgKG5leHQudGV4dCA9PT0gJy4nKSB7XHJcbiAgICAgICAgY29udGV4dCA9IHByaW1hcnk7XHJcbiAgICAgICAgcHJpbWFyeSA9IHRoaXMuZmllbGRBY2Nlc3MocHJpbWFyeSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwcmltYXJ5O1xyXG4gIH0sXHJcblxyXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKG1zZywgdG9rZW4pIHtcclxuICAgIHRocm93ICRwYXJzZU1pbkVycignc3ludGF4JyxcclxuICAgICAgICAnU3ludGF4IEVycm9yOiBUb2tlbiBcXCd7MH1cXCcgezF9IGF0IGNvbHVtbiB7Mn0gb2YgdGhlIGV4cHJlc3Npb24gW3szfV0gc3RhcnRpbmcgYXQgW3s0fV0uJyxcclxuICAgICAgICAgIHRva2VuLnRleHQsIG1zZywgKHRva2VuLmluZGV4ICsgMSksIHRoaXMudGV4dCwgdGhpcy50ZXh0LnN1YnN0cmluZyh0b2tlbi5pbmRleCkpO1xyXG4gIH0sXHJcblxyXG4gIHBlZWtUb2tlbjogZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID09PSAwKVxyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3Vlb2UnLCAnVW5leHBlY3RlZCBlbmQgb2YgZXhwcmVzc2lvbjogezB9JywgdGhpcy50ZXh0KTtcclxuICAgIHJldHVybiB0aGlzLnRva2Vuc1swXTtcclxuICB9LFxyXG5cclxuICBwZWVrOiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGVla0FoZWFkKDAsIGUxLCBlMiwgZTMsIGU0KTtcclxuICB9LFxyXG4gIHBlZWtBaGVhZDogZnVuY3Rpb24oaSwgZTEsIGUyLCBlMywgZTQpIHtcclxuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPiBpKSB7XHJcbiAgICAgIHZhciB0b2tlbiA9IHRoaXMudG9rZW5zW2ldO1xyXG4gICAgICB2YXIgdCA9IHRva2VuLnRleHQ7XHJcbiAgICAgIGlmICh0ID09PSBlMSB8fCB0ID09PSBlMiB8fCB0ID09PSBlMyB8fCB0ID09PSBlNCB8fFxyXG4gICAgICAgICAgKCFlMSAmJiAhZTIgJiYgIWUzICYmICFlNCkpIHtcclxuICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9LFxyXG5cclxuICBleHBlY3Q6IGZ1bmN0aW9uKGUxLCBlMiwgZTMsIGU0KSB7XHJcbiAgICB2YXIgdG9rZW4gPSB0aGlzLnBlZWsoZTEsIGUyLCBlMywgZTQpO1xyXG4gICAgaWYgKHRva2VuKSB7XHJcbiAgICAgIHRoaXMudG9rZW5zLnNoaWZ0KCk7XHJcbiAgICAgIHJldHVybiB0b2tlbjtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9LFxyXG5cclxuICBjb25zdW1lOiBmdW5jdGlvbihlMSkge1xyXG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3Vlb2UnLCAnVW5leHBlY3RlZCBlbmQgb2YgZXhwcmVzc2lvbjogezB9JywgdGhpcy50ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdG9rZW4gPSB0aGlzLmV4cGVjdChlMSk7XHJcbiAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgIHRoaXMudGhyb3dFcnJvcignaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFsnICsgZTEgKyAnXScsIHRoaXMucGVlaygpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0b2tlbjtcclxuICB9LFxyXG5cclxuICB1bmFyeUZuOiBmdW5jdGlvbihvcCwgcmlnaHQpIHtcclxuICAgIHZhciBmbiA9IE9QRVJBVE9SU1tvcF07XHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZVVuYXJ5Rm4oc2VsZiwgbG9jYWxzKSB7XHJcbiAgICAgIHJldHVybiBmbihzZWxmLCBsb2NhbHMsIHJpZ2h0KTtcclxuICAgIH0sIHtcclxuICAgICAgY29uc3RhbnQ6cmlnaHQuY29uc3RhbnQsXHJcbiAgICAgIGlucHV0czogW3JpZ2h0XVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgYmluYXJ5Rm46IGZ1bmN0aW9uKGxlZnQsIG9wLCByaWdodCwgaXNCcmFuY2hpbmcpIHtcclxuICAgIHZhciBmbiA9IE9QRVJBVE9SU1tvcF07XHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUJpbmFyeUZuKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICByZXR1cm4gZm4oc2VsZiwgbG9jYWxzLCBsZWZ0LCByaWdodCk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGNvbnN0YW50OiBsZWZ0LmNvbnN0YW50ICYmIHJpZ2h0LmNvbnN0YW50LFxyXG4gICAgICBpbnB1dHM6ICFpc0JyYW5jaGluZyAmJiBbbGVmdCwgcmlnaHRdXHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBpZGVudGlmaWVyOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBpZCA9IHRoaXMuY29uc3VtZSgpLnRleHQ7XHJcblxyXG4gICAgLy9Db250aW51ZSByZWFkaW5nIGVhY2ggYC5pZGVudGlmaWVyYCB1bmxlc3MgaXQgaXMgYSBtZXRob2QgaW52b2NhdGlvblxyXG4gICAgd2hpbGUgKHRoaXMucGVlaygnLicpICYmIHRoaXMucGVla0FoZWFkKDEpLmlkZW50aWZpZXIgJiYgIXRoaXMucGVla0FoZWFkKDIsICcoJykpIHtcclxuICAgICAgaWQgKz0gdGhpcy5jb25zdW1lKCkudGV4dCArIHRoaXMuY29uc3VtZSgpLnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGdldHRlckZuKGlkLCB0aGlzLm9wdGlvbnMsIHRoaXMudGV4dCk7XHJcbiAgfSxcclxuXHJcbiAgY29uc3RhbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHZhbHVlID0gdGhpcy5jb25zdW1lKCkudmFsdWU7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VDb25zdGFudCgpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfSwge1xyXG4gICAgICBjb25zdGFudDogdHJ1ZSxcclxuICAgICAgbGl0ZXJhbDogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgc3RhdGVtZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc3RhdGVtZW50cyA9IFtdO1xyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA+IDAgJiYgIXRoaXMucGVlaygnfScsICcpJywgJzsnLCAnXScpKVxyXG4gICAgICAgIHN0YXRlbWVudHMucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpO1xyXG4gICAgICBpZiAoIXRoaXMuZXhwZWN0KCc7JykpIHtcclxuICAgICAgICAvLyBvcHRpbWl6ZSBmb3IgdGhlIGNvbW1vbiBjYXNlIHdoZXJlIHRoZXJlIGlzIG9ubHkgb25lIHN0YXRlbWVudC5cclxuICAgICAgICAvLyBUT0RPKHNpemUpOiBtYXliZSB3ZSBzaG91bGQgbm90IHN1cHBvcnQgbXVsdGlwbGUgc3RhdGVtZW50cz9cclxuICAgICAgICByZXR1cm4gKHN0YXRlbWVudHMubGVuZ3RoID09PSAxKVxyXG4gICAgICAgICAgICA/IHN0YXRlbWVudHNbMF1cclxuICAgICAgICAgICAgOiBmdW5jdGlvbiAkcGFyc2VTdGF0ZW1lbnRzKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3RhdGVtZW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gc3RhdGVtZW50c1tpXShzZWxmLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG5cclxuICBmaWx0ZXJDaGFpbjogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMuZXhwcmVzc2lvbigpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCd8JykpKSB7XHJcbiAgICAgIGxlZnQgPSB0aGlzLmZpbHRlcihsZWZ0KTtcclxuICAgIH1cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIGZpbHRlcjogZnVuY3Rpb24oaW5wdXRGbikge1xyXG4gICAgdmFyIGZuID0gdGhpcy4kZmlsdGVyKHRoaXMuY29uc3VtZSgpLnRleHQpO1xyXG4gICAgdmFyIGFyZ3NGbjtcclxuICAgIHZhciBhcmdzO1xyXG5cclxuICAgIGlmICh0aGlzLnBlZWsoJzonKSkge1xyXG4gICAgICBhcmdzRm4gPSBbXTtcclxuICAgICAgYXJncyA9IFtdOyAvLyB3ZSBjYW4gc2FmZWx5IHJldXNlIHRoZSBhcnJheVxyXG4gICAgICB3aGlsZSAodGhpcy5leHBlY3QoJzonKSkge1xyXG4gICAgICAgIGFyZ3NGbi5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbnB1dHMgPSBbaW5wdXRGbl0uY29uY2F0KGFyZ3NGbiB8fCBbXSk7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VGaWx0ZXIoc2VsZiwgbG9jYWxzKSB7XHJcbiAgICAgIHZhciBpbnB1dCA9IGlucHV0Rm4oc2VsZiwgbG9jYWxzKTtcclxuICAgICAgaWYgKGFyZ3MpIHtcclxuICAgICAgICBhcmdzWzBdID0gaW5wdXQ7XHJcblxyXG4gICAgICAgIHZhciBpID0gYXJnc0ZuLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICBhcmdzW2kgKyAxXSA9IGFyZ3NGbltpXShzZWxmLCBsb2NhbHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmbihpbnB1dCk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGNvbnN0YW50OiAhZm4uJHN0YXRlZnVsICYmIGlucHV0cy5ldmVyeShpc0NvbnN0YW50KSxcclxuICAgICAgaW5wdXRzOiAhZm4uJHN0YXRlZnVsICYmIGlucHV0c1xyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgZXhwcmVzc2lvbjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5hc3NpZ25tZW50KCk7XHJcbiAgfSxcclxuXHJcbiAgYXNzaWdubWVudDogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMudGVybmFyeSgpO1xyXG4gICAgdmFyIHJpZ2h0O1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc9JykpKSB7XHJcbiAgICAgIGlmICghbGVmdC5hc3NpZ24pIHtcclxuICAgICAgICB0aGlzLnRocm93RXJyb3IoJ2ltcGxpZXMgYXNzaWdubWVudCBidXQgWycgK1xyXG4gICAgICAgICAgICB0aGlzLnRleHQuc3Vic3RyaW5nKDAsIHRva2VuLmluZGV4KSArICddIGNhbiBub3QgYmUgYXNzaWduZWQgdG8nLCB0b2tlbik7XHJcbiAgICAgIH1cclxuICAgICAgcmlnaHQgPSB0aGlzLnRlcm5hcnkoKTtcclxuICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VBc3NpZ25tZW50KHNjb3BlLCBsb2NhbHMpIHtcclxuICAgICAgICByZXR1cm4gbGVmdC5hc3NpZ24oc2NvcGUsIHJpZ2h0KHNjb3BlLCBsb2NhbHMpLCBsb2NhbHMpO1xyXG4gICAgICB9LCB7XHJcbiAgICAgICAgaW5wdXRzOiBbbGVmdCwgcmlnaHRdXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgdGVybmFyeTogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMubG9naWNhbE9SKCk7XHJcbiAgICB2YXIgbWlkZGxlO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc/JykpKSB7XHJcbiAgICAgIG1pZGRsZSA9IHRoaXMuYXNzaWdubWVudCgpO1xyXG4gICAgICBpZiAodGhpcy5jb25zdW1lKCc6JykpIHtcclxuICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmFzc2lnbm1lbnQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VUZXJuYXJ5KHNlbGYsIGxvY2Fscykge1xyXG4gICAgICAgICAgcmV0dXJuIGxlZnQoc2VsZiwgbG9jYWxzKSA/IG1pZGRsZShzZWxmLCBsb2NhbHMpIDogcmlnaHQoc2VsZiwgbG9jYWxzKTtcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICBjb25zdGFudDogbGVmdC5jb25zdGFudCAmJiBtaWRkbGUuY29uc3RhbnQgJiYgcmlnaHQuY29uc3RhbnRcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIGxvZ2ljYWxPUjogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbGVmdCA9IHRoaXMubG9naWNhbEFORCgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCd8fCcpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5iaW5hcnlGbihsZWZ0LCB0b2tlbi50ZXh0LCB0aGlzLmxvZ2ljYWxBTkQoKSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICBsb2dpY2FsQU5EOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5lcXVhbGl0eSgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCcmJicpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5iaW5hcnlGbihsZWZ0LCB0b2tlbi50ZXh0LCB0aGlzLmVxdWFsaXR5KCksIHRydWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgZXF1YWxpdHk6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxlZnQgPSB0aGlzLnJlbGF0aW9uYWwoKTtcclxuICAgIHZhciB0b2tlbjtcclxuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnPT0nLCchPScsJz09PScsJyE9PScpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5iaW5hcnlGbihsZWZ0LCB0b2tlbi50ZXh0LCB0aGlzLnJlbGF0aW9uYWwoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9LFxyXG5cclxuICByZWxhdGlvbmFsOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5hZGRpdGl2ZSgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc8JywgJz4nLCAnPD0nLCAnPj0nKSkpIHtcclxuICAgICAgbGVmdCA9IHRoaXMuYmluYXJ5Rm4obGVmdCwgdG9rZW4udGV4dCwgdGhpcy5hZGRpdGl2ZSgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsZWZ0O1xyXG4gIH0sXHJcblxyXG4gIGFkZGl0aXZlOiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsZWZ0ID0gdGhpcy5tdWx0aXBsaWNhdGl2ZSgpO1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCcrJywnLScpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5iaW5hcnlGbihsZWZ0LCB0b2tlbi50ZXh0LCB0aGlzLm11bHRpcGxpY2F0aXZlKCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgbXVsdGlwbGljYXRpdmU6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxlZnQgPSB0aGlzLnVuYXJ5KCk7XHJcbiAgICB2YXIgdG9rZW47XHJcbiAgICB3aGlsZSAoKHRva2VuID0gdGhpcy5leHBlY3QoJyonLCcvJywnJScpKSkge1xyXG4gICAgICBsZWZ0ID0gdGhpcy5iaW5hcnlGbihsZWZ0LCB0b2tlbi50ZXh0LCB0aGlzLnVuYXJ5KCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlZnQ7XHJcbiAgfSxcclxuXHJcbiAgdW5hcnk6IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHRva2VuO1xyXG4gICAgaWYgKHRoaXMuZXhwZWN0KCcrJykpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucHJpbWFyeSgpO1xyXG4gICAgfSBlbHNlIGlmICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnLScpKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5iaW5hcnlGbihQYXJzZXIuWkVSTywgdG9rZW4udGV4dCwgdGhpcy51bmFyeSgpKTtcclxuICAgIH0gZWxzZSBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJyEnKSkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMudW5hcnlGbih0b2tlbi50ZXh0LCB0aGlzLnVuYXJ5KCkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMucHJpbWFyeSgpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGZpZWxkQWNjZXNzOiBmdW5jdGlvbihvYmplY3QpIHtcclxuICAgIHZhciBnZXR0ZXIgPSB0aGlzLmlkZW50aWZpZXIoKTtcclxuXHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUZpZWxkQWNjZXNzKHNjb3BlLCBsb2NhbHMsIHNlbGYpIHtcclxuICAgICAgdmFyIG8gPSBzZWxmIHx8IG9iamVjdChzY29wZSwgbG9jYWxzKTtcclxuICAgICAgcmV0dXJuIChvID09IG51bGwpID8gdW5kZWZpbmVkIDogZ2V0dGVyKG8pO1xyXG4gICAgfSwge1xyXG4gICAgICBhc3NpZ246IGZ1bmN0aW9uKHNjb3BlLCB2YWx1ZSwgbG9jYWxzKSB7XHJcbiAgICAgICAgdmFyIG8gPSBvYmplY3Qoc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgaWYgKCFvKSBvYmplY3QuYXNzaWduKHNjb3BlLCBvID0ge30sIGxvY2Fscyk7XHJcbiAgICAgICAgcmV0dXJuIGdldHRlci5hc3NpZ24obywgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBvYmplY3RJbmRleDogZnVuY3Rpb24ob2JqKSB7XHJcbiAgICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMudGV4dDtcclxuXHJcbiAgICB2YXIgaW5kZXhGbiA9IHRoaXMuZXhwcmVzc2lvbigpO1xyXG4gICAgdGhpcy5jb25zdW1lKCddJyk7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VPYmplY3RJbmRleChzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgdmFyIG8gPSBvYmooc2VsZiwgbG9jYWxzKSxcclxuICAgICAgICAgIGkgPSBpbmRleEZuKHNlbGYsIGxvY2FscyksXHJcbiAgICAgICAgICB2O1xyXG5cclxuICAgICAgZW5zdXJlU2FmZU1lbWJlck5hbWUoaSwgZXhwcmVzc2lvbik7XHJcbiAgICAgIGlmICghbykgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgdiA9IGVuc3VyZVNhZmVPYmplY3Qob1tpXSwgZXhwcmVzc2lvbik7XHJcbiAgICAgIHJldHVybiB2O1xyXG4gICAgfSwge1xyXG4gICAgICBhc3NpZ246IGZ1bmN0aW9uKHNlbGYsIHZhbHVlLCBsb2NhbHMpIHtcclxuICAgICAgICB2YXIga2V5ID0gZW5zdXJlU2FmZU1lbWJlck5hbWUoaW5kZXhGbihzZWxmLCBsb2NhbHMpLCBleHByZXNzaW9uKTtcclxuICAgICAgICAvLyBwcmV2ZW50IG92ZXJ3cml0aW5nIG9mIEZ1bmN0aW9uLmNvbnN0cnVjdG9yIHdoaWNoIHdvdWxkIGJyZWFrIGVuc3VyZVNhZmVPYmplY3QgY2hlY2tcclxuICAgICAgICB2YXIgbyA9IGVuc3VyZVNhZmVPYmplY3Qob2JqKHNlbGYsIGxvY2FscyksIGV4cHJlc3Npb24pO1xyXG4gICAgICAgIGlmICghbykgb2JqLmFzc2lnbihzZWxmLCBvID0ge30sIGxvY2Fscyk7XHJcbiAgICAgICAgcmV0dXJuIG9ba2V5XSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBmdW5jdGlvbkNhbGw6IGZ1bmN0aW9uKGZuR2V0dGVyLCBjb250ZXh0R2V0dGVyKSB7XHJcbiAgICB2YXIgYXJnc0ZuID0gW107XHJcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnKScpIHtcclxuICAgICAgZG8ge1xyXG4gICAgICAgIGFyZ3NGbi5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtcclxuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbnN1bWUoJyknKTtcclxuXHJcbiAgICB2YXIgZXhwcmVzc2lvblRleHQgPSB0aGlzLnRleHQ7XHJcbiAgICAvLyB3ZSBjYW4gc2FmZWx5IHJldXNlIHRoZSBhcnJheSBhY3Jvc3MgaW52b2NhdGlvbnNcclxuICAgIHZhciBhcmdzID0gYXJnc0ZuLmxlbmd0aCA/IFtdIDogbnVsbDtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gJHBhcnNlRnVuY3Rpb25DYWxsKHNjb3BlLCBsb2NhbHMpIHtcclxuICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0R2V0dGVyID8gY29udGV4dEdldHRlcihzY29wZSwgbG9jYWxzKSA6IGlzRGVmaW5lZChjb250ZXh0R2V0dGVyKSA/IHVuZGVmaW5lZCA6IHNjb3BlO1xyXG4gICAgICB2YXIgZm4gPSBmbkdldHRlcihzY29wZSwgbG9jYWxzLCBjb250ZXh0KSB8fCBub29wO1xyXG5cclxuICAgICAgaWYgKGFyZ3MpIHtcclxuICAgICAgICB2YXIgaSA9IGFyZ3NGbi5sZW5ndGg7XHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgYXJnc1tpXSA9IGVuc3VyZVNhZmVPYmplY3QoYXJnc0ZuW2ldKHNjb3BlLCBsb2NhbHMpLCBleHByZXNzaW9uVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbnN1cmVTYWZlT2JqZWN0KGNvbnRleHQsIGV4cHJlc3Npb25UZXh0KTtcclxuICAgICAgZW5zdXJlU2FmZUZ1bmN0aW9uKGZuLCBleHByZXNzaW9uVGV4dCk7XHJcblxyXG4gICAgICAvLyBJRSBkb2Vzbid0IGhhdmUgYXBwbHkgZm9yIHNvbWUgbmF0aXZlIGZ1bmN0aW9uc1xyXG4gICAgICB2YXIgdiA9IGZuLmFwcGx5XHJcbiAgICAgICAgICAgID8gZm4uYXBwbHkoY29udGV4dCwgYXJncylcclxuICAgICAgICAgICAgOiBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdKTtcclxuXHJcbiAgICAgIGlmIChhcmdzKSB7XHJcbiAgICAgICAgLy8gRnJlZS11cCB0aGUgbWVtb3J5IChhcmd1bWVudHMgb2YgdGhlIGxhc3QgZnVuY3Rpb24gY2FsbCkuXHJcbiAgICAgICAgYXJncy5sZW5ndGggPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZW5zdXJlU2FmZU9iamVjdCh2LCBleHByZXNzaW9uVGV4dCk7XHJcbiAgICAgIH07XHJcbiAgfSxcclxuXHJcbiAgLy8gVGhpcyBpcyB1c2VkIHdpdGgganNvbiBhcnJheSBkZWNsYXJhdGlvblxyXG4gIGFycmF5RGVjbGFyYXRpb246IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGVsZW1lbnRGbnMgPSBbXTtcclxuICAgIGlmICh0aGlzLnBlZWtUb2tlbigpLnRleHQgIT09ICddJykge1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVlaygnXScpKSB7XHJcbiAgICAgICAgICAvLyBTdXBwb3J0IHRyYWlsaW5nIGNvbW1hcyBwZXIgRVM1LjEuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbWVudEZucy5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtcclxuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbnN1bWUoJ10nKTtcclxuXHJcbiAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRwYXJzZUFycmF5TGl0ZXJhbChzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgdmFyIGFycmF5ID0gW107XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVsZW1lbnRGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIGFycmF5LnB1c2goZWxlbWVudEZuc1tpXShzZWxmLCBsb2NhbHMpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9LCB7XHJcbiAgICAgIGxpdGVyYWw6IHRydWUsXHJcbiAgICAgIGNvbnN0YW50OiBlbGVtZW50Rm5zLmV2ZXJ5KGlzQ29uc3RhbnQpLFxyXG4gICAgICBpbnB1dHM6IGVsZW1lbnRGbnNcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIG9iamVjdDogZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIga2V5cyA9IFtdLCB2YWx1ZUZucyA9IFtdO1xyXG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJ30nKSB7XHJcbiAgICAgIGRvIHtcclxuICAgICAgICBpZiAodGhpcy5wZWVrKCd9JykpIHtcclxuICAgICAgICAgIC8vIFN1cHBvcnQgdHJhaWxpbmcgY29tbWFzIHBlciBFUzUuMS5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmNvbnN1bWUoKTtcclxuICAgICAgICBpZiAodG9rZW4uY29uc3RhbnQpIHtcclxuICAgICAgICAgIGtleXMucHVzaCh0b2tlbi52YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbi5pZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICBrZXlzLnB1c2godG9rZW4udGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudGhyb3dFcnJvcihcImludmFsaWQga2V5XCIsIHRva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25zdW1lKCc6Jyk7XHJcbiAgICAgICAgdmFsdWVGbnMucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7XHJcbiAgICAgIH0gd2hpbGUgKHRoaXMuZXhwZWN0KCcsJykpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb25zdW1lKCd9Jyk7XHJcblxyXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkcGFyc2VPYmplY3RMaXRlcmFsKHNlbGYsIGxvY2Fscykge1xyXG4gICAgICB2YXIgb2JqZWN0ID0ge307XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHZhbHVlRm5zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICBvYmplY3Rba2V5c1tpXV0gPSB2YWx1ZUZuc1tpXShzZWxmLCBsb2NhbHMpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICB9LCB7XHJcbiAgICAgIGxpdGVyYWw6IHRydWUsXHJcbiAgICAgIGNvbnN0YW50OiB2YWx1ZUZucy5ldmVyeShpc0NvbnN0YW50KSxcclxuICAgICAgaW5wdXRzOiB2YWx1ZUZuc1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIFBhcnNlciBoZWxwZXIgZnVuY3Rpb25zXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBzZXR0ZXIob2JqLCBsb2NhbHMsIHBhdGgsIHNldFZhbHVlLCBmdWxsRXhwKSB7XHJcbiAgZW5zdXJlU2FmZU9iamVjdChvYmosIGZ1bGxFeHApO1xyXG4gIGVuc3VyZVNhZmVPYmplY3QobG9jYWxzLCBmdWxsRXhwKTtcclxuXHJcbiAgdmFyIGVsZW1lbnQgPSBwYXRoLnNwbGl0KCcuJyksIGtleTtcclxuICBmb3IgKHZhciBpID0gMDsgZWxlbWVudC5sZW5ndGggPiAxOyBpKyspIHtcclxuICAgIGtleSA9IGVuc3VyZVNhZmVNZW1iZXJOYW1lKGVsZW1lbnQuc2hpZnQoKSwgZnVsbEV4cCk7XHJcbiAgICB2YXIgcHJvcGVydHlPYmogPSAoaSA9PT0gMCAmJiBsb2NhbHMgJiYgbG9jYWxzW2tleV0pIHx8IG9ialtrZXldO1xyXG4gICAgaWYgKCFwcm9wZXJ0eU9iaikge1xyXG4gICAgICBwcm9wZXJ0eU9iaiA9IHt9O1xyXG4gICAgICBvYmpba2V5XSA9IHByb3BlcnR5T2JqO1xyXG4gICAgfVxyXG4gICAgb2JqID0gZW5zdXJlU2FmZU9iamVjdChwcm9wZXJ0eU9iaiwgZnVsbEV4cCk7XHJcbiAgfVxyXG4gIGtleSA9IGVuc3VyZVNhZmVNZW1iZXJOYW1lKGVsZW1lbnQuc2hpZnQoKSwgZnVsbEV4cCk7XHJcbiAgZW5zdXJlU2FmZU9iamVjdChvYmpba2V5XSwgZnVsbEV4cCk7XHJcbiAgb2JqW2tleV0gPSBzZXRWYWx1ZTtcclxuICByZXR1cm4gc2V0VmFsdWU7XHJcbn1cclxuXHJcbnZhciBnZXR0ZXJGbkNhY2hlRGVmYXVsdCA9IGNyZWF0ZU1hcCgpO1xyXG52YXIgZ2V0dGVyRm5DYWNoZUV4cGVuc2l2ZSA9IGNyZWF0ZU1hcCgpO1xyXG5cclxuZnVuY3Rpb24gaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUobmFtZSkge1xyXG4gIHJldHVybiBuYW1lID09ICdjb25zdHJ1Y3Rvcic7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgXCJCbGFjayBIb2xlXCIgdmFyaWFudCBmcm9tOlxyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL2FuZ3VsYXJqcy1wYXJzZS1nZXR0ZXIvNFxyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL3BhdGgtZXZhbHVhdGlvbi1zaW1wbGlmaWVkLzdcclxuICovXHJcbmZ1bmN0aW9uIGNzcFNhZmVHZXR0ZXJGbihrZXkwLCBrZXkxLCBrZXkyLCBrZXkzLCBrZXk0LCBmdWxsRXhwLCBleHBlbnNpdmVDaGVja3MpIHtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkwLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkxLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkyLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkzLCBmdWxsRXhwKTtcclxuICBlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXk0LCBmdWxsRXhwKTtcclxuICB2YXIgZXNvID0gZnVuY3Rpb24obykge1xyXG4gICAgcmV0dXJuIGVuc3VyZVNhZmVPYmplY3QobywgZnVsbEV4cCk7XHJcbiAgfTtcclxuICB2YXIgZXNvMCA9IChleHBlbnNpdmVDaGVja3MgfHwgaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUoa2V5MCkpID8gZXNvIDogaWRlbnRpdHk7XHJcbiAgdmFyIGVzbzEgPSAoZXhwZW5zaXZlQ2hlY2tzIHx8IGlzUG9zc2libHlEYW5nZXJvdXNNZW1iZXJOYW1lKGtleTEpKSA/IGVzbyA6IGlkZW50aXR5O1xyXG4gIHZhciBlc28yID0gKGV4cGVuc2l2ZUNoZWNrcyB8fCBpc1Bvc3NpYmx5RGFuZ2Vyb3VzTWVtYmVyTmFtZShrZXkyKSkgPyBlc28gOiBpZGVudGl0eTtcclxuICB2YXIgZXNvMyA9IChleHBlbnNpdmVDaGVja3MgfHwgaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUoa2V5MykpID8gZXNvIDogaWRlbnRpdHk7XHJcbiAgdmFyIGVzbzQgPSAoZXhwZW5zaXZlQ2hlY2tzIHx8IGlzUG9zc2libHlEYW5nZXJvdXNNZW1iZXJOYW1lKGtleTQpKSA/IGVzbyA6IGlkZW50aXR5O1xyXG5cclxuICByZXR1cm4gZnVuY3Rpb24gY3NwU2FmZUdldHRlcihzY29wZSwgbG9jYWxzKSB7XHJcbiAgICB2YXIgcGF0aFZhbCA9IChsb2NhbHMgJiYgbG9jYWxzLmhhc093blByb3BlcnR5KGtleTApKSA/IGxvY2FscyA6IHNjb3BlO1xyXG5cclxuICAgIGlmIChwYXRoVmFsID09IG51bGwpIHJldHVybiBwYXRoVmFsO1xyXG4gICAgcGF0aFZhbCA9IGVzbzAocGF0aFZhbFtrZXkwXSk7XHJcblxyXG4gICAgaWYgKCFrZXkxKSByZXR1cm4gcGF0aFZhbDtcclxuICAgIGlmIChwYXRoVmFsID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBwYXRoVmFsID0gZXNvMShwYXRoVmFsW2tleTFdKTtcclxuXHJcbiAgICBpZiAoIWtleTIpIHJldHVybiBwYXRoVmFsO1xyXG4gICAgaWYgKHBhdGhWYWwgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIHBhdGhWYWwgPSBlc28yKHBhdGhWYWxba2V5Ml0pO1xyXG5cclxuICAgIGlmICgha2V5MykgcmV0dXJuIHBhdGhWYWw7XHJcbiAgICBpZiAocGF0aFZhbCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgcGF0aFZhbCA9IGVzbzMocGF0aFZhbFtrZXkzXSk7XHJcblxyXG4gICAgaWYgKCFrZXk0KSByZXR1cm4gcGF0aFZhbDtcclxuICAgIGlmIChwYXRoVmFsID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBwYXRoVmFsID0gZXNvNChwYXRoVmFsW2tleTRdKTtcclxuXHJcbiAgICByZXR1cm4gcGF0aFZhbDtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXR0ZXJGbldpdGhFbnN1cmVTYWZlT2JqZWN0KGZuLCBmdWxsRXhwcmVzc2lvbikge1xyXG4gIHJldHVybiBmdW5jdGlvbihzLCBsKSB7XHJcbiAgICByZXR1cm4gZm4ocywgbCwgZW5zdXJlU2FmZU9iamVjdCwgZnVsbEV4cHJlc3Npb24pO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldHRlckZuKHBhdGgsIG9wdGlvbnMsIGZ1bGxFeHApIHtcclxuICB2YXIgZXhwZW5zaXZlQ2hlY2tzID0gb3B0aW9ucy5leHBlbnNpdmVDaGVja3M7XHJcbiAgdmFyIGdldHRlckZuQ2FjaGUgPSAoZXhwZW5zaXZlQ2hlY2tzID8gZ2V0dGVyRm5DYWNoZUV4cGVuc2l2ZSA6IGdldHRlckZuQ2FjaGVEZWZhdWx0KTtcclxuICB2YXIgZm4gPSBnZXR0ZXJGbkNhY2hlW3BhdGhdO1xyXG4gIGlmIChmbikgcmV0dXJuIGZuO1xyXG5cclxuXHJcbiAgdmFyIHBhdGhLZXlzID0gcGF0aC5zcGxpdCgnLicpLFxyXG4gICAgICBwYXRoS2V5c0xlbmd0aCA9IHBhdGhLZXlzLmxlbmd0aDtcclxuXHJcbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vYW5ndWxhcmpzLXBhcnNlLWdldHRlci82XHJcbiAgaWYgKG9wdGlvbnMuY3NwKSB7XHJcbiAgICBpZiAocGF0aEtleXNMZW5ndGggPCA2KSB7XHJcbiAgICAgIGZuID0gY3NwU2FmZUdldHRlckZuKHBhdGhLZXlzWzBdLCBwYXRoS2V5c1sxXSwgcGF0aEtleXNbMl0sIHBhdGhLZXlzWzNdLCBwYXRoS2V5c1s0XSwgZnVsbEV4cCwgZXhwZW5zaXZlQ2hlY2tzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZuID0gZnVuY3Rpb24gY3NwU2FmZUdldHRlcihzY29wZSwgbG9jYWxzKSB7XHJcbiAgICAgICAgdmFyIGkgPSAwLCB2YWw7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgdmFsID0gY3NwU2FmZUdldHRlckZuKHBhdGhLZXlzW2krK10sIHBhdGhLZXlzW2krK10sIHBhdGhLZXlzW2krK10sIHBhdGhLZXlzW2krK10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aEtleXNbaSsrXSwgZnVsbEV4cCwgZXhwZW5zaXZlQ2hlY2tzKShzY29wZSwgbG9jYWxzKTtcclxuXHJcbiAgICAgICAgICBsb2NhbHMgPSB1bmRlZmluZWQ7IC8vIGNsZWFyIGFmdGVyIGZpcnN0IGl0ZXJhdGlvblxyXG4gICAgICAgICAgc2NvcGUgPSB2YWw7XHJcbiAgICAgICAgfSB3aGlsZSAoaSA8IHBhdGhLZXlzTGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICB2YXIgY29kZSA9ICcnO1xyXG4gICAgaWYgKGV4cGVuc2l2ZUNoZWNrcykge1xyXG4gICAgICBjb2RlICs9ICdzID0gZXNvKHMsIGZlKTtcXG5sID0gZXNvKGwsIGZlKTtcXG4nO1xyXG4gICAgfVxyXG4gICAgdmFyIG5lZWRzRW5zdXJlU2FmZU9iamVjdCA9IGV4cGVuc2l2ZUNoZWNrcztcclxuICAgIGZvckVhY2gocGF0aEtleXMsIGZ1bmN0aW9uKGtleSwgaW5kZXgpIHtcclxuICAgICAgZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5LCBmdWxsRXhwKTtcclxuICAgICAgdmFyIGxvb2t1cEpzID0gKGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBzaW1wbHkgZGVyZWZlcmVuY2UgJ3MnIG9uIGFueSAuZG90IG5vdGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICA/ICdzJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGlmIHdlIGFyZSBmaXJzdCB0aGVuIHdlIGNoZWNrIGxvY2FscyBmaXJzdCwgYW5kIGlmIHNvIHJlYWQgaXQgZmlyc3RcclxuICAgICAgICAgICAgICAgICAgICAgIDogJygobCYmbC5oYXNPd25Qcm9wZXJ0eShcIicgKyBrZXkgKyAnXCIpKT9sOnMpJykgKyAnLicgKyBrZXk7XHJcbiAgICAgIGlmIChleHBlbnNpdmVDaGVja3MgfHwgaXNQb3NzaWJseURhbmdlcm91c01lbWJlck5hbWUoa2V5KSkge1xyXG4gICAgICAgIGxvb2t1cEpzID0gJ2VzbygnICsgbG9va3VwSnMgKyAnLCBmZSknO1xyXG4gICAgICAgIG5lZWRzRW5zdXJlU2FmZU9iamVjdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgY29kZSArPSAnaWYocyA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xcbicgK1xyXG4gICAgICAgICAgICAgICdzPScgKyBsb29rdXBKcyArICc7XFxuJztcclxuICAgIH0pO1xyXG4gICAgY29kZSArPSAncmV0dXJuIHM7JztcclxuXHJcbiAgICAvKiBqc2hpbnQgLVcwNTQgKi9cclxuICAgIHZhciBldmFsZWRGbkdldHRlciA9IG5ldyBGdW5jdGlvbigncycsICdsJywgJ2VzbycsICdmZScsIGNvZGUpOyAvLyBzPXNjb3BlLCBsPWxvY2FscywgZXNvPWVuc3VyZVNhZmVPYmplY3RcclxuICAgIC8qIGpzaGludCArVzA1NCAqL1xyXG4gICAgZXZhbGVkRm5HZXR0ZXIudG9TdHJpbmcgPSB2YWx1ZUZuKGNvZGUpO1xyXG4gICAgaWYgKG5lZWRzRW5zdXJlU2FmZU9iamVjdCkge1xyXG4gICAgICBldmFsZWRGbkdldHRlciA9IGdldHRlckZuV2l0aEVuc3VyZVNhZmVPYmplY3QoZXZhbGVkRm5HZXR0ZXIsIGZ1bGxFeHApO1xyXG4gICAgfVxyXG4gICAgZm4gPSBldmFsZWRGbkdldHRlcjtcclxuICB9XHJcblxyXG4gIGZuLnNoYXJlZEdldHRlciA9IHRydWU7XHJcbiAgZm4uYXNzaWduID0gZnVuY3Rpb24oc2VsZiwgdmFsdWUsIGxvY2Fscykge1xyXG4gICAgcmV0dXJuIHNldHRlcihzZWxmLCBsb2NhbHMsIHBhdGgsIHZhbHVlLCBwYXRoKTtcclxuICB9O1xyXG4gIGdldHRlckZuQ2FjaGVbcGF0aF0gPSBmbjtcclxuICByZXR1cm4gZm47XHJcbn1cclxuXHJcbnZhciBvYmplY3RWYWx1ZU9mID0gT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mO1xyXG5cclxuZnVuY3Rpb24gZ2V0VmFsdWVPZih2YWx1ZSkge1xyXG4gIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpID8gdmFsdWUudmFsdWVPZigpIDogb2JqZWN0VmFsdWVPZi5jYWxsKHZhbHVlKTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkcGFyc2VcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIENvbnZlcnRzIEFuZ3VsYXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIHZhciBnZXR0ZXIgPSAkcGFyc2UoJ3VzZXIubmFtZScpO1xyXG4gKiAgIHZhciBzZXR0ZXIgPSBnZXR0ZXIuYXNzaWduO1xyXG4gKiAgIHZhciBjb250ZXh0ID0ge3VzZXI6e25hbWU6J2FuZ3VsYXInfX07XHJcbiAqICAgdmFyIGxvY2FscyA9IHt1c2VyOntuYW1lOidsb2NhbCd9fTtcclxuICpcclxuICogICBleHBlY3QoZ2V0dGVyKGNvbnRleHQpKS50b0VxdWFsKCdhbmd1bGFyJyk7XHJcbiAqICAgc2V0dGVyKGNvbnRleHQsICduZXdWYWx1ZScpO1xyXG4gKiAgIGV4cGVjdChjb250ZXh0LnVzZXIubmFtZSkudG9FcXVhbCgnbmV3VmFsdWUnKTtcclxuICogICBleHBlY3QoZ2V0dGVyKGNvbnRleHQsIGxvY2FscykpLnRvRXF1YWwoJ2xvY2FsJyk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxyXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxyXG4gKlxyXG4gKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXHJcbiAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxyXG4gKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAqICAgICAgYGNvbnRleHRgLlxyXG4gKlxyXG4gKiAgICBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gYWxzbyBoYXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxyXG4gKiAgICAgICogYGxpdGVyYWxgIOKAkyBge2Jvb2xlYW59YCDigJMgd2hldGhlciB0aGUgZXhwcmVzc2lvbidzIHRvcC1sZXZlbCBub2RlIGlzIGEgSmF2YVNjcmlwdFxyXG4gKiAgICAgICAgbGl0ZXJhbC5cclxuICogICAgICAqIGBjb25zdGFudGAg4oCTIGB7Ym9vbGVhbn1gIOKAkyB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIG1hZGUgZW50aXJlbHkgb2YgSmF2YVNjcmlwdFxyXG4gKiAgICAgICAgY29uc3RhbnQgbGl0ZXJhbHMuXHJcbiAqICAgICAgKiBgYXNzaWduYCDigJMgYHs/ZnVuY3Rpb24oY29udGV4dCwgdmFsdWUpfWAg4oCTIGlmIHRoZSBleHByZXNzaW9uIGlzIGFzc2lnbmFibGUsIHRoaXMgd2lsbCBiZVxyXG4gKiAgICAgICAgc2V0IHRvIGEgZnVuY3Rpb24gdG8gY2hhbmdlIGl0cyB2YWx1ZSBvbiB0aGUgZ2l2ZW4gY29udGV4dC5cclxuICpcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkcGFyc2VQcm92aWRlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogYCRwYXJzZVByb3ZpZGVyYCBjYW4gYmUgdXNlZCBmb3IgY29uZmlndXJpbmcgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBuZy4kcGFyc2UgJHBhcnNlfVxyXG4gKiAgc2VydmljZS5cclxuICovXHJcbmZ1bmN0aW9uICRQYXJzZVByb3ZpZGVyKCkge1xyXG4gIHZhciBjYWNoZURlZmF1bHQgPSBjcmVhdGVNYXAoKTtcclxuICB2YXIgY2FjaGVFeHBlbnNpdmUgPSBjcmVhdGVNYXAoKTtcclxuXHJcblxyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRmaWx0ZXInLCAnJHNuaWZmZXInLCBmdW5jdGlvbigkZmlsdGVyLCAkc25pZmZlcikge1xyXG4gICAgdmFyICRwYXJzZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICBjc3A6ICRzbmlmZmVyLmNzcCxcclxuICAgICAgICAgIGV4cGVuc2l2ZUNoZWNrczogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgICRwYXJzZU9wdGlvbnNFeHBlbnNpdmUgPSB7XHJcbiAgICAgICAgICBjc3A6ICRzbmlmZmVyLmNzcCxcclxuICAgICAgICAgIGV4cGVuc2l2ZUNoZWNrczogdHJ1ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gd3JhcFNoYXJlZEV4cHJlc3Npb24oZXhwKSB7XHJcbiAgICAgIHZhciB3cmFwcGVkID0gZXhwO1xyXG5cclxuICAgICAgaWYgKGV4cC5zaGFyZWRHZXR0ZXIpIHtcclxuICAgICAgICB3cmFwcGVkID0gZnVuY3Rpb24gJHBhcnNlV3JhcHBlcihzZWxmLCBsb2NhbHMpIHtcclxuICAgICAgICAgIHJldHVybiBleHAoc2VsZiwgbG9jYWxzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdyYXBwZWQubGl0ZXJhbCA9IGV4cC5saXRlcmFsO1xyXG4gICAgICAgIHdyYXBwZWQuY29uc3RhbnQgPSBleHAuY29uc3RhbnQ7XHJcbiAgICAgICAgd3JhcHBlZC5hc3NpZ24gPSBleHAuYXNzaWduO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gd3JhcHBlZDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gJHBhcnNlKGV4cCwgaW50ZXJjZXB0b3JGbiwgZXhwZW5zaXZlQ2hlY2tzKSB7XHJcbiAgICAgIHZhciBwYXJzZWRFeHByZXNzaW9uLCBvbmVUaW1lLCBjYWNoZUtleTtcclxuXHJcbiAgICAgIHN3aXRjaCAodHlwZW9mIGV4cCkge1xyXG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgICBjYWNoZUtleSA9IGV4cCA9IGV4cC50cmltKCk7XHJcblxyXG4gICAgICAgICAgdmFyIGNhY2hlID0gKGV4cGVuc2l2ZUNoZWNrcyA/IGNhY2hlRXhwZW5zaXZlIDogY2FjaGVEZWZhdWx0KTtcclxuICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBjYWNoZVtjYWNoZUtleV07XHJcblxyXG4gICAgICAgICAgaWYgKCFwYXJzZWRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChleHAuY2hhckF0KDApID09PSAnOicgJiYgZXhwLmNoYXJBdCgxKSA9PT0gJzonKSB7XHJcbiAgICAgICAgICAgICAgb25lVGltZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgZXhwID0gZXhwLnN1YnN0cmluZygyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHBhcnNlT3B0aW9ucyA9IGV4cGVuc2l2ZUNoZWNrcyA/ICRwYXJzZU9wdGlvbnNFeHBlbnNpdmUgOiAkcGFyc2VPcHRpb25zO1xyXG4gICAgICAgICAgICB2YXIgbGV4ZXIgPSBuZXcgTGV4ZXIocGFyc2VPcHRpb25zKTtcclxuICAgICAgICAgICAgdmFyIHBhcnNlciA9IG5ldyBQYXJzZXIobGV4ZXIsICRmaWx0ZXIsIHBhcnNlT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBwYXJzZXIucGFyc2UoZXhwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLmNvbnN0YW50KSB7XHJcbiAgICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBjb25zdGFudFdhdGNoRGVsZWdhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob25lVGltZSkge1xyXG4gICAgICAgICAgICAgIC8vb25lVGltZSBpcyBub3QgcGFydCBvZiB0aGUgZXhwIHBhc3NlZCB0byB0aGUgUGFyc2VyIHNvIHdlIG1heSBoYXZlIHRvXHJcbiAgICAgICAgICAgICAgLy93cmFwIHRoZSBwYXJzZWRFeHByZXNzaW9uIGJlZm9yZSBhZGRpbmcgYSAkJHdhdGNoRGVsZWdhdGVcclxuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uID0gd3JhcFNoYXJlZEV4cHJlc3Npb24ocGFyc2VkRXhwcmVzc2lvbik7XHJcbiAgICAgICAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBwYXJzZWRFeHByZXNzaW9uLmxpdGVyYWwgP1xyXG4gICAgICAgICAgICAgICAgb25lVGltZUxpdGVyYWxXYXRjaERlbGVnYXRlIDogb25lVGltZVdhdGNoRGVsZWdhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMpIHtcclxuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSA9IGlucHV0c1dhdGNoRGVsZWdhdGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhY2hlW2NhY2hlS2V5XSA9IHBhcnNlZEV4cHJlc3Npb247XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3IocGFyc2VkRXhwcmVzc2lvbiwgaW50ZXJjZXB0b3JGbik7XHJcblxyXG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihleHAsIGludGVyY2VwdG9yRm4pO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKG5vb3AsIGludGVyY2VwdG9yRm4pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbGxlY3RFeHByZXNzaW9uSW5wdXRzKGlucHV0cywgbGlzdCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0c1tpXTtcclxuICAgICAgICBpZiAoIWlucHV0LmNvbnN0YW50KSB7XHJcbiAgICAgICAgICBpZiAoaW5wdXQuaW5wdXRzKSB7XHJcbiAgICAgICAgICAgIGNvbGxlY3RFeHByZXNzaW9uSW5wdXRzKGlucHV0LmlucHV0cywgbGlzdCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGxpc3QuaW5kZXhPZihpbnB1dCkgPT09IC0xKSB7IC8vIFRPRE8ocGVyZikgY2FuIHdlIGRvIGJldHRlcj9cclxuICAgICAgICAgICAgbGlzdC5wdXNoKGlucHV0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3VmFsdWUsIG9sZFZhbHVlT2ZWYWx1ZSkge1xyXG5cclxuICAgICAgaWYgKG5ld1ZhbHVlID09IG51bGwgfHwgb2xkVmFsdWVPZlZhbHVlID09IG51bGwpIHsgLy8gbnVsbC91bmRlZmluZWRcclxuICAgICAgICByZXR1cm4gbmV3VmFsdWUgPT09IG9sZFZhbHVlT2ZWYWx1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuXHJcbiAgICAgICAgLy8gYXR0ZW1wdCB0byBjb252ZXJ0IHRoZSB2YWx1ZSB0byBhIHByaW1pdGl2ZSB0eXBlXHJcbiAgICAgICAgLy8gVE9ETyhkb2NzKTogYWRkIGEgbm90ZSB0byBkb2NzIHRoYXQgYnkgaW1wbGVtZW50aW5nIHZhbHVlT2YgZXZlbiBvYmplY3RzIGFuZCBhcnJheXMgY2FuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYmUgY2hlYXBseSBkaXJ0eS1jaGVja2VkXHJcbiAgICAgICAgbmV3VmFsdWUgPSBnZXRWYWx1ZU9mKG5ld1ZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgIC8vIG9iamVjdHMvYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkIC0gZGVlcC13YXRjaGluZyB0aGVtIHdvdWxkIGJlIHRvbyBleHBlbnNpdmVcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZhbGwtdGhyb3VnaCB0byB0aGUgcHJpbWl0aXZlIGVxdWFsaXR5IGNoZWNrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vUHJpbWl0aXZlIG9yIE5hTlxyXG4gICAgICByZXR1cm4gbmV3VmFsdWUgPT09IG9sZFZhbHVlT2ZWYWx1ZSB8fCAobmV3VmFsdWUgIT09IG5ld1ZhbHVlICYmIG9sZFZhbHVlT2ZWYWx1ZSAhPT0gb2xkVmFsdWVPZlZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbnB1dHNXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24pIHtcclxuICAgICAgdmFyIGlucHV0RXhwcmVzc2lvbnMgPSBwYXJzZWRFeHByZXNzaW9uLiQkaW5wdXRzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKHBhcnNlZEV4cHJlc3Npb24uJCRpbnB1dHMgPSBjb2xsZWN0RXhwcmVzc2lvbklucHV0cyhwYXJzZWRFeHByZXNzaW9uLmlucHV0cywgW10pKTtcclxuXHJcbiAgICAgIHZhciBsYXN0UmVzdWx0O1xyXG5cclxuICAgICAgaWYgKGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgdmFyIG9sZElucHV0VmFsdWUgPSBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrOyAvLyBpbml0IHRvIHNvbWV0aGluZyB1bmlxdWUgc28gdGhhdCBlcXVhbHMgY2hlY2sgZmFpbHNcclxuICAgICAgICBpbnB1dEV4cHJlc3Npb25zID0gaW5wdXRFeHByZXNzaW9uc1swXTtcclxuICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dFdhdGNoKHNjb3BlKSB7XHJcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnMoc2NvcGUpO1xyXG4gICAgICAgICAgaWYgKCFleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrKG5ld0lucHV0VmFsdWUsIG9sZElucHV0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGxhc3RSZXN1bHQgPSBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcclxuICAgICAgICAgICAgb2xkSW5wdXRWYWx1ZSA9IG5ld0lucHV0VmFsdWUgJiYgZ2V0VmFsdWVPZihuZXdJbnB1dFZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xyXG4gICAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXMgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXRFeHByZXNzaW9ucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldID0gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjazsgLy8gaW5pdCB0byBzb21ldGhpbmcgdW5pcXVlIHNvIHRoYXQgZXF1YWxzIGNoZWNrIGZhaWxzXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBzY29wZS4kd2F0Y2goZnVuY3Rpb24gZXhwcmVzc2lvbklucHV0c1dhdGNoKHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXRFeHByZXNzaW9ucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnNbaV0oc2NvcGUpO1xyXG4gICAgICAgICAgaWYgKGNoYW5nZWQgfHwgKGNoYW5nZWQgPSAhZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayhuZXdJbnB1dFZhbHVlLCBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0pKSkge1xyXG4gICAgICAgICAgICBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0gPSBuZXdJbnB1dFZhbHVlICYmIGdldFZhbHVlT2YobmV3SW5wdXRWYWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgICAgbGFzdFJlc3VsdCA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XHJcbiAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25lVGltZVdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xyXG4gICAgICB2YXIgdW53YXRjaCwgbGFzdFZhbHVlO1xyXG4gICAgICByZXR1cm4gdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBvbmVUaW1lV2F0Y2goc2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uIG9uZVRpbWVMaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSkge1xyXG4gICAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChsYXN0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgdW53YXRjaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIG9iamVjdEVxdWFsaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xyXG4gICAgICB2YXIgdW53YXRjaCwgbGFzdFZhbHVlO1xyXG4gICAgICByZXR1cm4gdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBvbmVUaW1lV2F0Y2goc2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uIG9uZVRpbWVMaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSkge1xyXG4gICAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCB2YWx1ZSwgb2xkLCBzY29wZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc0FsbERlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0FsbERlZmluZWQobGFzdFZhbHVlKSkgdW53YXRjaCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBvYmplY3RFcXVhbGl0eSk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBpc0FsbERlZmluZWQodmFsdWUpIHtcclxuICAgICAgICB2YXIgYWxsRGVmaW5lZCA9IHRydWU7XHJcbiAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICBpZiAoIWlzRGVmaW5lZCh2YWwpKSBhbGxEZWZpbmVkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFsbERlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb25zdGFudFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xyXG4gICAgICB2YXIgdW53YXRjaDtcclxuICAgICAgcmV0dXJuIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gY29uc3RhbnRXYXRjaChzY29wZSkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcclxuICAgICAgfSwgZnVuY3Rpb24gY29uc3RhbnRMaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSkge1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdW53YXRjaCgpO1xyXG4gICAgICB9LCBvYmplY3RFcXVhbGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkSW50ZXJjZXB0b3IocGFyc2VkRXhwcmVzc2lvbiwgaW50ZXJjZXB0b3JGbikge1xyXG4gICAgICBpZiAoIWludGVyY2VwdG9yRm4pIHJldHVybiBwYXJzZWRFeHByZXNzaW9uO1xyXG4gICAgICB2YXIgd2F0Y2hEZWxlZ2F0ZSA9IHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlO1xyXG5cclxuICAgICAgdmFyIHJlZ3VsYXJXYXRjaCA9XHJcbiAgICAgICAgICB3YXRjaERlbGVnYXRlICE9PSBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUgJiZcclxuICAgICAgICAgIHdhdGNoRGVsZWdhdGUgIT09IG9uZVRpbWVXYXRjaERlbGVnYXRlO1xyXG5cclxuICAgICAgdmFyIGZuID0gcmVndWxhcldhdGNoID8gZnVuY3Rpb24gcmVndWxhckludGVyY2VwdGVkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzKTtcclxuICAgICAgICByZXR1cm4gaW50ZXJjZXB0b3JGbih2YWx1ZSwgc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgIH0gOiBmdW5jdGlvbiBvbmVUaW1lSW50ZXJjZXB0ZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBpbnRlcmNlcHRvckZuKHZhbHVlLCBzY29wZSwgbG9jYWxzKTtcclxuICAgICAgICAvLyB3ZSBvbmx5IHJldHVybiB0aGUgaW50ZXJjZXB0b3IncyByZXN1bHQgaWYgdGhlXHJcbiAgICAgICAgLy8gaW5pdGlhbCB2YWx1ZSBpcyBkZWZpbmVkIChmb3IgYmluZC1vbmNlKVxyXG4gICAgICAgIHJldHVybiBpc0RlZmluZWQodmFsdWUpID8gcmVzdWx0IDogdmFsdWU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBQcm9wYWdhdGUgJCR3YXRjaERlbGVnYXRlcyBvdGhlciB0aGVuIGlucHV0c1dhdGNoRGVsZWdhdGVcclxuICAgICAgaWYgKHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlICYmXHJcbiAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSAhPT0gaW5wdXRzV2F0Y2hEZWxlZ2F0ZSkge1xyXG4gICAgICAgIGZuLiQkd2F0Y2hEZWxlZ2F0ZSA9IHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlO1xyXG4gICAgICB9IGVsc2UgaWYgKCFpbnRlcmNlcHRvckZuLiRzdGF0ZWZ1bCkge1xyXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGludGVyY2VwdG9yLCBidXQgbm8gd2F0Y2hEZWxlZ2F0ZSB0aGVuIHRyZWF0IHRoZSBpbnRlcmNlcHRvciBsaWtlXHJcbiAgICAgICAgLy8gd2UgdHJlYXQgZmlsdGVycyAtIGl0IGlzIGFzc3VtZWQgdG8gYmUgYSBwdXJlIGZ1bmN0aW9uIHVubGVzcyBmbGFnZ2VkIHdpdGggJHN0YXRlZnVsXHJcbiAgICAgICAgZm4uJCR3YXRjaERlbGVnYXRlID0gaW5wdXRzV2F0Y2hEZWxlZ2F0ZTtcclxuICAgICAgICBmbi5pbnB1dHMgPSBbcGFyc2VkRXhwcmVzc2lvbl07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmbjtcclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRxXHJcbiAqIEByZXF1aXJlcyAkcm9vdFNjb3BlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBIHNlcnZpY2UgdGhhdCBoZWxwcyB5b3UgcnVuIGZ1bmN0aW9ucyBhc3luY2hyb25vdXNseSwgYW5kIHVzZSB0aGVpciByZXR1cm4gdmFsdWVzIChvciBleGNlcHRpb25zKVxyXG4gKiB3aGVuIHRoZXkgYXJlIGRvbmUgcHJvY2Vzc2luZy5cclxuICpcclxuICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBwcm9taXNlcy9kZWZlcnJlZCBvYmplY3RzIGluc3BpcmVkIGJ5XHJcbiAqIFtLcmlzIEtvd2FsJ3MgUV0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xKS5cclxuICpcclxuICogJHEgY2FuIGJlIHVzZWQgaW4gdHdvIGZhc2hpb25zIC0tLSBvbmUgd2hpY2ggaXMgbW9yZSBzaW1pbGFyIHRvIEtyaXMgS293YWwncyBRIG9yIGpRdWVyeSdzIERlZmVycmVkXHJcbiAqIGltcGxlbWVudGF0aW9ucywgYW5kIHRoZSBvdGhlciB3aGljaCByZXNlbWJsZXMgRVM2IHByb21pc2VzIHRvIHNvbWUgZGVncmVlLlxyXG4gKlxyXG4gKiAjICRxIGNvbnN0cnVjdG9yXHJcbiAqXHJcbiAqIFRoZSBzdHJlYW1saW5lZCBFUzYgc3R5bGUgcHJvbWlzZSBpcyBlc3NlbnRpYWxseSBqdXN0IHVzaW5nICRxIGFzIGEgY29uc3RydWN0b3Igd2hpY2ggdGFrZXMgYSBgcmVzb2x2ZXJgXHJcbiAqIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhpcyBpcyBzaW1pbGFyIHRvIHRoZSBuYXRpdmUgUHJvbWlzZSBpbXBsZW1lbnRhdGlvbiBmcm9tIEVTNiBIYXJtb255LFxyXG4gKiBzZWUgW01ETl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZSkuXHJcbiAqXHJcbiAqIFdoaWxlIHRoZSBjb25zdHJ1Y3Rvci1zdHlsZSB1c2UgaXMgc3VwcG9ydGVkLCBub3QgYWxsIG9mIHRoZSBzdXBwb3J0aW5nIG1ldGhvZHMgZnJvbSBFUzYgSGFybW9ueSBwcm9taXNlcyBhcmVcclxuICogYXZhaWxhYmxlIHlldC5cclxuICpcclxuICogSXQgY2FuIGJlIHVzZWQgbGlrZSBzbzpcclxuICpcclxuICogYGBganNcclxuICogICAvLyBmb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBleGFtcGxlIGxldCdzIGFzc3VtZSB0aGF0IHZhcmlhYmxlcyBgJHFgIGFuZCBgb2tUb0dyZWV0YFxyXG4gKiAgIC8vIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgbGV4aWNhbCBzY29wZSAodGhleSBjb3VsZCBoYXZlIGJlZW4gaW5qZWN0ZWQgb3IgcGFzc2VkIGluKS5cclxuICpcclxuICogICBmdW5jdGlvbiBhc3luY0dyZWV0KG5hbWUpIHtcclxuICogICAgIC8vIHBlcmZvcm0gc29tZSBhc3luY2hyb25vdXMgb3BlcmF0aW9uLCByZXNvbHZlIG9yIHJlamVjdCB0aGUgcHJvbWlzZSB3aGVuIGFwcHJvcHJpYXRlLlxyXG4gKiAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gKiAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICAgIGlmIChva1RvR3JlZXQobmFtZSkpIHtcclxuICogICAgICAgICAgIHJlc29sdmUoJ0hlbGxvLCAnICsgbmFtZSArICchJyk7XHJcbiAqICAgICAgICAgfSBlbHNlIHtcclxuICogICAgICAgICAgIHJlamVjdCgnR3JlZXRpbmcgJyArIG5hbWUgKyAnIGlzIG5vdCBhbGxvd2VkLicpO1xyXG4gKiAgICAgICAgIH1cclxuICogICAgICAgfSwgMTAwMCk7XHJcbiAqICAgICB9KTtcclxuICogICB9XHJcbiAqXHJcbiAqICAgdmFyIHByb21pc2UgPSBhc3luY0dyZWV0KCdSb2JpbiBIb29kJyk7XHJcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XHJcbiAqICAgICBhbGVydCgnU3VjY2VzczogJyArIGdyZWV0aW5nKTtcclxuICogICB9LCBmdW5jdGlvbihyZWFzb24pIHtcclxuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogTm90ZTogcHJvZ3Jlc3Mvbm90aWZ5IGNhbGxiYWNrcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgdmlhIHRoZSBFUzYtc3R5bGUgaW50ZXJmYWNlLlxyXG4gKlxyXG4gKiBIb3dldmVyLCB0aGUgbW9yZSB0cmFkaXRpb25hbCBDb21tb25KUy1zdHlsZSB1c2FnZSBpcyBzdGlsbCBhdmFpbGFibGUsIGFuZCBkb2N1bWVudGVkIGJlbG93LlxyXG4gKlxyXG4gKiBbVGhlIENvbW1vbkpTIFByb21pc2UgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1Byb21pc2VzKSBkZXNjcmliZXMgYSBwcm9taXNlIGFzIGFuXHJcbiAqIGludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYW4gYWN0aW9uIHRoYXQgaXNcclxuICogcGVyZm9ybWVkIGFzeW5jaHJvbm91c2x5LCBhbmQgbWF5IG9yIG1heSBub3QgYmUgZmluaXNoZWQgYXQgYW55IGdpdmVuIHBvaW50IGluIHRpbWUuXHJcbiAqXHJcbiAqIEZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIGRlYWxpbmcgd2l0aCBlcnJvciBoYW5kbGluZywgZGVmZXJyZWQgYW5kIHByb21pc2UgQVBJcyBhcmUgdG9cclxuICogYXN5bmNocm9ub3VzIHByb2dyYW1taW5nIHdoYXQgYHRyeWAsIGBjYXRjaGAgYW5kIGB0aHJvd2Aga2V5d29yZHMgYXJlIHRvIHN5bmNocm9ub3VzIHByb2dyYW1taW5nLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIC8vIGZvciB0aGUgcHVycG9zZSBvZiB0aGlzIGV4YW1wbGUgbGV0J3MgYXNzdW1lIHRoYXQgdmFyaWFibGVzIGAkcWAgYW5kIGBva1RvR3JlZXRgXHJcbiAqICAgLy8gYXJlIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlICh0aGV5IGNvdWxkIGhhdmUgYmVlbiBpbmplY3RlZCBvciBwYXNzZWQgaW4pLlxyXG4gKlxyXG4gKiAgIGZ1bmN0aW9uIGFzeW5jR3JlZXQobmFtZSkge1xyXG4gKiAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICpcclxuICogICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGRlZmVycmVkLm5vdGlmeSgnQWJvdXQgdG8gZ3JlZXQgJyArIG5hbWUgKyAnLicpO1xyXG4gKlxyXG4gKiAgICAgICBpZiAob2tUb0dyZWV0KG5hbWUpKSB7XHJcbiAqICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnSGVsbG8sICcgKyBuYW1lICsgJyEnKTtcclxuICogICAgICAgfSBlbHNlIHtcclxuICogICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ0dyZWV0aW5nICcgKyBuYW1lICsgJyBpcyBub3QgYWxsb3dlZC4nKTtcclxuICogICAgICAgfVxyXG4gKiAgICAgfSwgMTAwMCk7XHJcbiAqXHJcbiAqICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICogICB9XHJcbiAqXHJcbiAqICAgdmFyIHByb21pc2UgPSBhc3luY0dyZWV0KCdSb2JpbiBIb29kJyk7XHJcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XHJcbiAqICAgICBhbGVydCgnU3VjY2VzczogJyArIGdyZWV0aW5nKTtcclxuICogICB9LCBmdW5jdGlvbihyZWFzb24pIHtcclxuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xyXG4gKiAgIH0sIGZ1bmN0aW9uKHVwZGF0ZSkge1xyXG4gKiAgICAgYWxlcnQoJ0dvdCBub3RpZmljYXRpb246ICcgKyB1cGRhdGUpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQXQgZmlyc3QgaXQgbWlnaHQgbm90IGJlIG9idmlvdXMgd2h5IHRoaXMgZXh0cmEgY29tcGxleGl0eSBpcyB3b3J0aCB0aGUgdHJvdWJsZS4gVGhlIHBheW9mZlxyXG4gKiBjb21lcyBpbiB0aGUgd2F5IG9mIGd1YXJhbnRlZXMgdGhhdCBwcm9taXNlIGFuZCBkZWZlcnJlZCBBUElzIG1ha2UsIHNlZVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3VuY29tbW9uanMvYmxvYi9tYXN0ZXIvcHJvbWlzZXMvc3BlY2lmaWNhdGlvbi5tZC5cclxuICpcclxuICogQWRkaXRpb25hbGx5IHRoZSBwcm9taXNlIGFwaSBhbGxvd3MgZm9yIGNvbXBvc2l0aW9uIHRoYXQgaXMgdmVyeSBoYXJkIHRvIGRvIHdpdGggdGhlXHJcbiAqIHRyYWRpdGlvbmFsIGNhbGxiYWNrIChbQ1BTXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbnRpbnVhdGlvbi1wYXNzaW5nX3N0eWxlKSkgYXBwcm9hY2guXHJcbiAqIEZvciBtb3JlIG9uIHRoaXMgcGxlYXNlIHNlZSB0aGUgW1EgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xKSBlc3BlY2lhbGx5IHRoZVxyXG4gKiBzZWN0aW9uIG9uIHNlcmlhbCBvciBwYXJhbGxlbCBqb2luaW5nIG9mIHByb21pc2VzLlxyXG4gKlxyXG4gKiAjIFRoZSBEZWZlcnJlZCBBUElcclxuICpcclxuICogQSBuZXcgaW5zdGFuY2Ugb2YgZGVmZXJyZWQgaXMgY29uc3RydWN0ZWQgYnkgY2FsbGluZyBgJHEuZGVmZXIoKWAuXHJcbiAqXHJcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBkZWZlcnJlZCBvYmplY3QgaXMgdG8gZXhwb3NlIHRoZSBhc3NvY2lhdGVkIFByb21pc2UgaW5zdGFuY2UgYXMgd2VsbCBhcyBBUElzXHJcbiAqIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHNpZ25hbGluZyB0aGUgc3VjY2Vzc2Z1bCBvciB1bnN1Y2Nlc3NmdWwgY29tcGxldGlvbiwgYXMgd2VsbCBhcyB0aGUgc3RhdHVzXHJcbiAqIG9mIHRoZSB0YXNrLlxyXG4gKlxyXG4gKiAqKk1ldGhvZHMqKlxyXG4gKlxyXG4gKiAtIGByZXNvbHZlKHZhbHVlKWAg4oCTIHJlc29sdmVzIHRoZSBkZXJpdmVkIHByb21pc2Ugd2l0aCB0aGUgYHZhbHVlYC4gSWYgdGhlIHZhbHVlIGlzIGEgcmVqZWN0aW9uXHJcbiAqICAgY29uc3RydWN0ZWQgdmlhIGAkcS5yZWplY3RgLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIGluc3RlYWQuXHJcbiAqIC0gYHJlamVjdChyZWFzb24pYCDigJMgcmVqZWN0cyB0aGUgZGVyaXZlZCBwcm9taXNlIHdpdGggdGhlIGByZWFzb25gLiBUaGlzIGlzIGVxdWl2YWxlbnQgdG9cclxuICogICByZXNvbHZpbmcgaXQgd2l0aCBhIHJlamVjdGlvbiBjb25zdHJ1Y3RlZCB2aWEgYCRxLnJlamVjdGAuXHJcbiAqIC0gYG5vdGlmeSh2YWx1ZSlgIC0gcHJvdmlkZXMgdXBkYXRlcyBvbiB0aGUgc3RhdHVzIG9mIHRoZSBwcm9taXNlJ3MgZXhlY3V0aW9uLiBUaGlzIG1heSBiZSBjYWxsZWRcclxuICogICBtdWx0aXBsZSB0aW1lcyBiZWZvcmUgdGhlIHByb21pc2UgaXMgZWl0aGVyIHJlc29sdmVkIG9yIHJlamVjdGVkLlxyXG4gKlxyXG4gKiAqKlByb3BlcnRpZXMqKlxyXG4gKlxyXG4gKiAtIHByb21pc2Ug4oCTIGB7UHJvbWlzZX1gIOKAkyBwcm9taXNlIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBkZWZlcnJlZC5cclxuICpcclxuICpcclxuICogIyBUaGUgUHJvbWlzZSBBUElcclxuICpcclxuICogQSBuZXcgcHJvbWlzZSBpbnN0YW5jZSBpcyBjcmVhdGVkIHdoZW4gYSBkZWZlcnJlZCBpbnN0YW5jZSBpcyBjcmVhdGVkIGFuZCBjYW4gYmUgcmV0cmlldmVkIGJ5XHJcbiAqIGNhbGxpbmcgYGRlZmVycmVkLnByb21pc2VgLlxyXG4gKlxyXG4gKiBUaGUgcHVycG9zZSBvZiB0aGUgcHJvbWlzZSBvYmplY3QgaXMgdG8gYWxsb3cgZm9yIGludGVyZXN0ZWQgcGFydGllcyB0byBnZXQgYWNjZXNzIHRvIHRoZSByZXN1bHRcclxuICogb2YgdGhlIGRlZmVycmVkIHRhc2sgd2hlbiBpdCBjb21wbGV0ZXMuXHJcbiAqXHJcbiAqICoqTWV0aG9kcyoqXHJcbiAqXHJcbiAqIC0gYHRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBub3RpZnlDYWxsYmFjaylgIOKAkyByZWdhcmRsZXNzIG9mIHdoZW4gdGhlIHByb21pc2Ugd2FzIG9yXHJcbiAqICAgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCwgYHRoZW5gIGNhbGxzIG9uZSBvZiB0aGUgc3VjY2VzcyBvciBlcnJvciBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHlcclxuICogICBhcyBzb29uIGFzIHRoZSByZXN1bHQgaXMgYXZhaWxhYmxlLiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudDogdGhlIHJlc3VsdFxyXG4gKiAgIG9yIHJlamVjdGlvbiByZWFzb24uIEFkZGl0aW9uYWxseSwgdGhlIG5vdGlmeSBjYWxsYmFjayBtYXkgYmUgY2FsbGVkIHplcm8gb3IgbW9yZSB0aW1lcyB0b1xyXG4gKiAgIHByb3ZpZGUgYSBwcm9ncmVzcyBpbmRpY2F0aW9uLCBiZWZvcmUgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqICAgVGhpcyBtZXRob2QgKnJldHVybnMgYSBuZXcgcHJvbWlzZSogd2hpY2ggaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgdmlhIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlXHJcbiAqICAgYHN1Y2Nlc3NDYWxsYmFja2AsIGBlcnJvckNhbGxiYWNrYC4gSXQgYWxzbyBub3RpZmllcyB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGVcclxuICogICBgbm90aWZ5Q2FsbGJhY2tgIG1ldGhvZC4gVGhlIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIGZyb20gdGhlIG5vdGlmeUNhbGxiYWNrXHJcbiAqICAgbWV0aG9kLlxyXG4gKlxyXG4gKiAtIGBjYXRjaChlcnJvckNhbGxiYWNrKWAg4oCTIHNob3J0aGFuZCBmb3IgYHByb21pc2UudGhlbihudWxsLCBlcnJvckNhbGxiYWNrKWBcclxuICpcclxuICogLSBgZmluYWxseShjYWxsYmFjaywgbm90aWZ5Q2FsbGJhY2spYCDigJMgYWxsb3dzIHlvdSB0byBvYnNlcnZlIGVpdGhlciB0aGUgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIG9mIGEgcHJvbWlzZSxcclxuICogICBidXQgdG8gZG8gc28gd2l0aG91dCBtb2RpZnlpbmcgdGhlIGZpbmFsIHZhbHVlLiBUaGlzIGlzIHVzZWZ1bCB0byByZWxlYXNlIHJlc291cmNlcyBvciBkbyBzb21lXHJcbiAqICAgY2xlYW4tdXAgdGhhdCBuZWVkcyB0byBiZSBkb25lIHdoZXRoZXIgdGhlIHByb21pc2Ugd2FzIHJlamVjdGVkIG9yIHJlc29sdmVkLiBTZWUgdGhlIFtmdWxsXHJcbiAqICAgc3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xL3dpa2kvQVBJLVJlZmVyZW5jZSNwcm9taXNlZmluYWxseWNhbGxiYWNrKSBmb3JcclxuICogICBtb3JlIGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiAjIENoYWluaW5nIHByb21pc2VzXHJcbiAqXHJcbiAqIEJlY2F1c2UgY2FsbGluZyB0aGUgYHRoZW5gIG1ldGhvZCBvZiBhIHByb21pc2UgcmV0dXJucyBhIG5ldyBkZXJpdmVkIHByb21pc2UsIGl0IGlzIGVhc2lseVxyXG4gKiBwb3NzaWJsZSB0byBjcmVhdGUgYSBjaGFpbiBvZiBwcm9taXNlczpcclxuICpcclxuICogYGBganNcclxuICogICBwcm9taXNlQiA9IHByb21pc2VBLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAqICAgICByZXR1cm4gcmVzdWx0ICsgMTtcclxuICogICB9KTtcclxuICpcclxuICogICAvLyBwcm9taXNlQiB3aWxsIGJlIHJlc29sdmVkIGltbWVkaWF0ZWx5IGFmdGVyIHByb21pc2VBIGlzIHJlc29sdmVkIGFuZCBpdHMgdmFsdWVcclxuICogICAvLyB3aWxsIGJlIHRoZSByZXN1bHQgb2YgcHJvbWlzZUEgaW5jcmVtZW50ZWQgYnkgMVxyXG4gKiBgYGBcclxuICpcclxuICogSXQgaXMgcG9zc2libGUgdG8gY3JlYXRlIGNoYWlucyBvZiBhbnkgbGVuZ3RoIGFuZCBzaW5jZSBhIHByb21pc2UgY2FuIGJlIHJlc29sdmVkIHdpdGggYW5vdGhlclxyXG4gKiBwcm9taXNlICh3aGljaCB3aWxsIGRlZmVyIGl0cyByZXNvbHV0aW9uIGZ1cnRoZXIpLCBpdCBpcyBwb3NzaWJsZSB0byBwYXVzZS9kZWZlciByZXNvbHV0aW9uIG9mXHJcbiAqIHRoZSBwcm9taXNlcyBhdCBhbnkgcG9pbnQgaW4gdGhlIGNoYWluLiBUaGlzIG1ha2VzIGl0IHBvc3NpYmxlIHRvIGltcGxlbWVudCBwb3dlcmZ1bCBBUElzIGxpa2VcclxuICogJGh0dHAncyByZXNwb25zZSBpbnRlcmNlcHRvcnMuXHJcbiAqXHJcbiAqXHJcbiAqICMgRGlmZmVyZW5jZXMgYmV0d2VlbiBLcmlzIEtvd2FsJ3MgUSBhbmQgJHFcclxuICpcclxuICogIFRoZXJlIGFyZSB0d28gbWFpbiBkaWZmZXJlbmNlczpcclxuICpcclxuICogLSAkcSBpcyBpbnRlZ3JhdGVkIHdpdGggdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlfSBTY29wZSBtb2RlbCBvYnNlcnZhdGlvblxyXG4gKiAgIG1lY2hhbmlzbSBpbiBhbmd1bGFyLCB3aGljaCBtZWFucyBmYXN0ZXIgcHJvcGFnYXRpb24gb2YgcmVzb2x1dGlvbiBvciByZWplY3Rpb24gaW50byB5b3VyXHJcbiAqICAgbW9kZWxzIGFuZCBhdm9pZGluZyB1bm5lY2Vzc2FyeSBicm93c2VyIHJlcGFpbnRzLCB3aGljaCB3b3VsZCByZXN1bHQgaW4gZmxpY2tlcmluZyBVSS5cclxuICogLSBRIGhhcyBtYW55IG1vcmUgZmVhdHVyZXMgdGhhbiAkcSwgYnV0IHRoYXQgY29tZXMgYXQgYSBjb3N0IG9mIGJ5dGVzLiAkcSBpcyB0aW55LCBidXQgY29udGFpbnNcclxuICogICBhbGwgdGhlIGltcG9ydGFudCBmdW5jdGlvbmFsaXR5IG5lZWRlZCBmb3IgY29tbW9uIGFzeW5jIHRhc2tzLlxyXG4gKlxyXG4gKiAgIyBUZXN0aW5nXHJcbiAqXHJcbiAqICBgYGBqc1xyXG4gKiAgICBpdCgnc2hvdWxkIHNpbXVsYXRlIHByb21pc2UnLCBpbmplY3QoZnVuY3Rpb24oJHEsICRyb290U2NvcGUpIHtcclxuICogICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gKiAgICAgIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcclxuICogICAgICB2YXIgcmVzb2x2ZWRWYWx1ZTtcclxuICpcclxuICogICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsgcmVzb2x2ZWRWYWx1ZSA9IHZhbHVlOyB9KTtcclxuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gKlxyXG4gKiAgICAgIC8vIFNpbXVsYXRlIHJlc29sdmluZyBvZiBwcm9taXNlXHJcbiAqICAgICAgZGVmZXJyZWQucmVzb2x2ZSgxMjMpO1xyXG4gKiAgICAgIC8vIE5vdGUgdGhhdCB0aGUgJ3RoZW4nIGZ1bmN0aW9uIGRvZXMgbm90IGdldCBjYWxsZWQgc3luY2hyb25vdXNseS5cclxuICogICAgICAvLyBUaGlzIGlzIGJlY2F1c2Ugd2Ugd2FudCB0aGUgcHJvbWlzZSBBUEkgdG8gYWx3YXlzIGJlIGFzeW5jLCB3aGV0aGVyIG9yIG5vdFxyXG4gKiAgICAgIC8vIGl0IGdvdCBjYWxsZWQgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25vdXNseS5cclxuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gKlxyXG4gKiAgICAgIC8vIFByb3BhZ2F0ZSBwcm9taXNlIHJlc29sdXRpb24gdG8gJ3RoZW4nIGZ1bmN0aW9ucyB1c2luZyAkYXBwbHkoKS5cclxuICogICAgICAkcm9vdFNjb3BlLiRhcHBseSgpO1xyXG4gKiAgICAgIGV4cGVjdChyZXNvbHZlZFZhbHVlKS50b0VxdWFsKDEyMyk7XHJcbiAqICAgIH0pKTtcclxuICogIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uLCBmdW5jdGlvbil9IHJlc29sdmVyIEZ1bmN0aW9uIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciByZXNvbHZpbmcgb3JcclxuICogICByZWplY3RpbmcgdGhlIG5ld2x5IGNyZWF0ZWQgcHJvbWlzZS4gVGhlIGZpcnN0IHBhcmFtZXRlciBpcyBhIGZ1bmN0aW9uIHdoaWNoIHJlc29sdmVzIHRoZVxyXG4gKiAgIHByb21pc2UsIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24gd2hpY2ggcmVqZWN0cyB0aGUgcHJvbWlzZS5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBuZXdseSBjcmVhdGVkIHByb21pc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiAkUVByb3ZpZGVyKCkge1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlcikge1xyXG4gICAgcmV0dXJuIHFGYWN0b3J5KGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XHJcbiAgICB9LCAkZXhjZXB0aW9uSGFuZGxlcik7XHJcbiAgfV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uICQkUVByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbigkYnJvd3NlciwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcclxuICAgIHJldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAkYnJvd3Nlci5kZWZlcihjYWxsYmFjayk7XHJcbiAgICB9LCAkZXhjZXB0aW9uSGFuZGxlcik7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGEgcHJvbWlzZSBtYW5hZ2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uKX0gbmV4dFRpY2sgRnVuY3Rpb24gZm9yIGV4ZWN1dGluZyBmdW5jdGlvbnMgaW4gdGhlIG5leHQgdHVybi5cclxuICogQHBhcmFtIHtmdW5jdGlvbiguLi4qKX0gZXhjZXB0aW9uSGFuZGxlciBGdW5jdGlvbiBpbnRvIHdoaWNoIHVuZXhwZWN0ZWQgZXhjZXB0aW9ucyBhcmUgcGFzc2VkIGZvclxyXG4gKiAgICAgZGVidWdnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBQcm9taXNlIG1hbmFnZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBxRmFjdG9yeShuZXh0VGljaywgZXhjZXB0aW9uSGFuZGxlcikge1xyXG4gIHZhciAkcU1pbkVyciA9IG1pbkVycignJHEnLCBUeXBlRXJyb3IpO1xyXG4gIGZ1bmN0aW9uIGNhbGxPbmNlKHNlbGYsIHJlc29sdmVGbiwgcmVqZWN0Rm4pIHtcclxuICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcclxuICAgIGZ1bmN0aW9uIHdyYXAoZm4pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgZm4uY2FsbChzZWxmLCB2YWx1ZSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFt3cmFwKHJlc29sdmVGbiksIHdyYXAocmVqZWN0Rm4pXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZy4kcSNkZWZlclxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDcmVhdGVzIGEgYERlZmVycmVkYCBvYmplY3Qgd2hpY2ggcmVwcmVzZW50cyBhIHRhc2sgd2hpY2ggd2lsbCBmaW5pc2ggaW4gdGhlIGZ1dHVyZS5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtEZWZlcnJlZH0gUmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiBkZWZlcnJlZC5cclxuICAgKi9cclxuICB2YXIgZGVmZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgRGVmZXJyZWQoKTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBQcm9taXNlKCkge1xyXG4gICAgdGhpcy4kJHN0YXRlID0geyBzdGF0dXM6IDAgfTtcclxuICB9XHJcblxyXG4gIFByb21pc2UucHJvdG90eXBlID0ge1xyXG4gICAgdGhlbjogZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb2dyZXNzQmFjaykge1xyXG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XHJcblxyXG4gICAgICB0aGlzLiQkc3RhdGUucGVuZGluZyA9IHRoaXMuJCRzdGF0ZS5wZW5kaW5nIHx8IFtdO1xyXG4gICAgICB0aGlzLiQkc3RhdGUucGVuZGluZy5wdXNoKFtyZXN1bHQsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9ncmVzc0JhY2tdKTtcclxuICAgICAgaWYgKHRoaXMuJCRzdGF0ZS5zdGF0dXMgPiAwKSBzY2hlZHVsZVByb2Nlc3NRdWV1ZSh0aGlzLiQkc3RhdGUpO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdC5wcm9taXNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgY2FsbGJhY2spO1xyXG4gICAgfSxcclxuXHJcbiAgICBcImZpbmFsbHlcIjogZnVuY3Rpb24oY2FsbGJhY2ssIHByb2dyZXNzQmFjaykge1xyXG4gICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZUNhbGxiYWNrKHZhbHVlLCB0cnVlLCBjYWxsYmFjayk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZUNhbGxiYWNrKGVycm9yLCBmYWxzZSwgY2FsbGJhY2spO1xyXG4gICAgICB9LCBwcm9ncmVzc0JhY2spO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vRmFzdGVyLCBtb3JlIGJhc2ljIHRoYW4gYW5ndWxhci5iaW5kIGh0dHA6Ly9qc3BlcmYuY29tL2FuZ3VsYXItYmluZC12cy1jdXN0b20tdnMtbmF0aXZlXHJcbiAgZnVuY3Rpb24gc2ltcGxlQmluZChjb250ZXh0LCBmbikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIGZuLmNhbGwoY29udGV4dCwgdmFsdWUpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByb2Nlc3NRdWV1ZShzdGF0ZSkge1xyXG4gICAgdmFyIGZuLCBwcm9taXNlLCBwZW5kaW5nO1xyXG5cclxuICAgIHBlbmRpbmcgPSBzdGF0ZS5wZW5kaW5nO1xyXG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IGZhbHNlO1xyXG4gICAgc3RhdGUucGVuZGluZyA9IHVuZGVmaW5lZDtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBlbmRpbmcubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICBwcm9taXNlID0gcGVuZGluZ1tpXVswXTtcclxuICAgICAgZm4gPSBwZW5kaW5nW2ldW3N0YXRlLnN0YXR1c107XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XHJcbiAgICAgICAgICBwcm9taXNlLnJlc29sdmUoZm4oc3RhdGUudmFsdWUpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLnN0YXR1cyA9PT0gMSkge1xyXG4gICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHN0YXRlLnZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcHJvbWlzZS5yZWplY3Qoc3RhdGUudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHN0YXRlKSB7XHJcbiAgICBpZiAoc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCB8fCAhc3RhdGUucGVuZGluZykgcmV0dXJuO1xyXG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IHRydWU7XHJcbiAgICBuZXh0VGljayhmdW5jdGlvbigpIHsgcHJvY2Vzc1F1ZXVlKHN0YXRlKTsgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBEZWZlcnJlZCgpIHtcclxuICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCk7XHJcbiAgICAvL05lY2Vzc2FyeSB0byBzdXBwb3J0IHVuYm91bmQgZXhlY3V0aW9uIDovXHJcbiAgICB0aGlzLnJlc29sdmUgPSBzaW1wbGVCaW5kKHRoaXMsIHRoaXMucmVzb2x2ZSk7XHJcbiAgICB0aGlzLnJlamVjdCA9IHNpbXBsZUJpbmQodGhpcywgdGhpcy5yZWplY3QpO1xyXG4gICAgdGhpcy5ub3RpZnkgPSBzaW1wbGVCaW5kKHRoaXMsIHRoaXMubm90aWZ5KTtcclxuICB9XHJcblxyXG4gIERlZmVycmVkLnByb3RvdHlwZSA9IHtcclxuICAgIHJlc29sdmU6IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICBpZiAodGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzKSByZXR1cm47XHJcbiAgICAgIGlmICh2YWwgPT09IHRoaXMucHJvbWlzZSkge1xyXG4gICAgICAgIHRoaXMuJCRyZWplY3QoJHFNaW5FcnIoXHJcbiAgICAgICAgICAncWN5Y2xlJyxcclxuICAgICAgICAgIFwiRXhwZWN0ZWQgcHJvbWlzZSB0byBiZSByZXNvbHZlZCB3aXRoIHZhbHVlIG90aGVyIHRoYW4gaXRzZWxmICd7MH0nXCIsXHJcbiAgICAgICAgICB2YWwpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLiQkcmVzb2x2ZSh2YWwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAkJHJlc29sdmU6IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICB2YXIgdGhlbiwgZm5zO1xyXG5cclxuICAgICAgZm5zID0gY2FsbE9uY2UodGhpcywgdGhpcy4kJHJlc29sdmUsIHRoaXMuJCRyZWplY3QpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICgoaXNPYmplY3QodmFsKSB8fCBpc0Z1bmN0aW9uKHZhbCkpKSB0aGVuID0gdmFsICYmIHZhbC50aGVuO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoZW4pKSB7XHJcbiAgICAgICAgICB0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAtMTtcclxuICAgICAgICAgIHRoZW4uY2FsbCh2YWwsIGZuc1swXSwgZm5zWzFdLCB0aGlzLm5vdGlmeSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzID0gMTtcclxuICAgICAgICAgIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHRoaXMucHJvbWlzZS4kJHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBmbnNbMV0oZSk7XHJcbiAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICByZWplY3Q6IGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICBpZiAodGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzKSByZXR1cm47XHJcbiAgICAgIHRoaXMuJCRyZWplY3QocmVhc29uKTtcclxuICAgIH0sXHJcblxyXG4gICAgJCRyZWplY3Q6IGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICB0aGlzLnByb21pc2UuJCRzdGF0ZS52YWx1ZSA9IHJlYXNvbjtcclxuICAgICAgdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzID0gMjtcclxuICAgICAgc2NoZWR1bGVQcm9jZXNzUXVldWUodGhpcy5wcm9taXNlLiQkc3RhdGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBub3RpZnk6IGZ1bmN0aW9uKHByb2dyZXNzKSB7XHJcbiAgICAgIHZhciBjYWxsYmFja3MgPSB0aGlzLnByb21pc2UuJCRzdGF0ZS5wZW5kaW5nO1xyXG5cclxuICAgICAgaWYgKCh0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPD0gMCkgJiYgY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5sZW5ndGgpIHtcclxuICAgICAgICBuZXh0VGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBjYWxsYmFjaywgcmVzdWx0O1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2tzW2ldWzBdO1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrc1tpXVszXTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICByZXN1bHQubm90aWZ5KGlzRnVuY3Rpb24oY2FsbGJhY2spID8gY2FsbGJhY2socHJvZ3Jlc3MpIDogcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRxI3JlamVjdFxyXG4gICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDcmVhdGVzIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIGFzIHJlamVjdGVkIHdpdGggdGhlIHNwZWNpZmllZCBgcmVhc29uYC4gVGhpcyBhcGkgc2hvdWxkIGJlXHJcbiAgICogdXNlZCB0byBmb3J3YXJkIHJlamVjdGlvbiBpbiBhIGNoYWluIG9mIHByb21pc2VzLiBJZiB5b3UgYXJlIGRlYWxpbmcgd2l0aCB0aGUgbGFzdCBwcm9taXNlIGluXHJcbiAgICogYSBwcm9taXNlIGNoYWluLCB5b3UgZG9uJ3QgbmVlZCB0byB3b3JyeSBhYm91dCBpdC5cclxuICAgKlxyXG4gICAqIFdoZW4gY29tcGFyaW5nIGRlZmVycmVkcy9wcm9taXNlcyB0byB0aGUgZmFtaWxpYXIgYmVoYXZpb3Igb2YgdHJ5L2NhdGNoL3Rocm93LCB0aGluayBvZlxyXG4gICAqIGByZWplY3RgIGFzIHRoZSBgdGhyb3dgIGtleXdvcmQgaW4gSmF2YVNjcmlwdC4gVGhpcyBhbHNvIG1lYW5zIHRoYXQgaWYgeW91IFwiY2F0Y2hcIiBhbiBlcnJvciB2aWFcclxuICAgKiBhIHByb21pc2UgZXJyb3IgY2FsbGJhY2sgYW5kIHlvdSB3YW50IHRvIGZvcndhcmQgdGhlIGVycm9yIHRvIHRoZSBwcm9taXNlIGRlcml2ZWQgZnJvbSB0aGVcclxuICAgKiBjdXJyZW50IHByb21pc2UsIHlvdSBoYXZlIHRvIFwicmV0aHJvd1wiIHRoZSBlcnJvciBieSByZXR1cm5pbmcgYSByZWplY3Rpb24gY29uc3RydWN0ZWQgdmlhXHJcbiAgICogYHJlamVjdGAuXHJcbiAgICpcclxuICAgKiBgYGBqc1xyXG4gICAqICAgcHJvbWlzZUIgPSBwcm9taXNlQS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAqICAgICAvLyBzdWNjZXNzOiBkbyBzb21ldGhpbmcgYW5kIHJlc29sdmUgcHJvbWlzZUJcclxuICAgKiAgICAgLy8gICAgICAgICAgd2l0aCB0aGUgb2xkIG9yIGEgbmV3IHJlc3VsdFxyXG4gICAqICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICogICAgIC8vIGVycm9yOiBoYW5kbGUgdGhlIGVycm9yIGlmIHBvc3NpYmxlIGFuZFxyXG4gICAqICAgICAvLyAgICAgICAgcmVzb2x2ZSBwcm9taXNlQiB3aXRoIG5ld1Byb21pc2VPclZhbHVlLFxyXG4gICAqICAgICAvLyAgICAgICAgb3RoZXJ3aXNlIGZvcndhcmQgdGhlIHJlamVjdGlvbiB0byBwcm9taXNlQlxyXG4gICAqICAgICBpZiAoY2FuSGFuZGxlKHJlYXNvbikpIHtcclxuICAgKiAgICAgIC8vIGhhbmRsZSB0aGUgZXJyb3IgYW5kIHJlY292ZXJcclxuICAgKiAgICAgIHJldHVybiBuZXdQcm9taXNlT3JWYWx1ZTtcclxuICAgKiAgICAgfVxyXG4gICAqICAgICByZXR1cm4gJHEucmVqZWN0KHJlYXNvbik7XHJcbiAgICogICB9KTtcclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gcmVhc29uIENvbnN0YW50LCBtZXNzYWdlLCBleGNlcHRpb24gb3IgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmVqZWN0aW9uIHJlYXNvbi5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2UgdGhhdCB3YXMgYWxyZWFkeSByZXNvbHZlZCBhcyByZWplY3RlZCB3aXRoIHRoZSBgcmVhc29uYC5cclxuICAgKi9cclxuICB2YXIgcmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICByZXN1bHQucmVqZWN0KHJlYXNvbik7XHJcbiAgICByZXR1cm4gcmVzdWx0LnByb21pc2U7XHJcbiAgfTtcclxuXHJcbiAgdmFyIG1ha2VQcm9taXNlID0gZnVuY3Rpb24gbWFrZVByb21pc2UodmFsdWUsIHJlc29sdmVkKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBpZiAocmVzb2x2ZWQpIHtcclxuICAgICAgcmVzdWx0LnJlc29sdmUodmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzdWx0LnJlamVjdCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0LnByb21pc2U7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGhhbmRsZUNhbGxiYWNrID0gZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2sodmFsdWUsIGlzUmVzb2x2ZWQsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgY2FsbGJhY2tPdXRwdXQgPSBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSBjYWxsYmFja091dHB1dCA9IGNhbGxiYWNrKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiBtYWtlUHJvbWlzZShlLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNQcm9taXNlTGlrZShjYWxsYmFja091dHB1dCkpIHtcclxuICAgICAgcmV0dXJuIGNhbGxiYWNrT3V0cHV0LnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1ha2VQcm9taXNlKHZhbHVlLCBpc1Jlc29sdmVkKTtcclxuICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gbWFrZVByb21pc2UoZXJyb3IsIGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbWFrZVByb21pc2UodmFsdWUsIGlzUmVzb2x2ZWQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkcSN3aGVuXHJcbiAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFdyYXBzIGFuIG9iamVjdCB0aGF0IG1pZ2h0IGJlIGEgdmFsdWUgb3IgYSAoM3JkIHBhcnR5KSB0aGVuLWFibGUgcHJvbWlzZSBpbnRvIGEgJHEgcHJvbWlzZS5cclxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSBhcmUgZGVhbGluZyB3aXRoIGFuIG9iamVjdCB0aGF0IG1pZ2h0IG9yIG1pZ2h0IG5vdCBiZSBhIHByb21pc2UsIG9yIGlmXHJcbiAgICogdGhlIHByb21pc2UgY29tZXMgZnJvbSBhIHNvdXJjZSB0aGF0IGNhbid0IGJlIHRydXN0ZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIG9yIGEgcHJvbWlzZVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgcHJvbWlzZSBvZiB0aGUgcGFzc2VkIHZhbHVlIG9yIHByb21pc2VcclxuICAgKi9cclxuXHJcblxyXG4gIHZhciB3aGVuID0gZnVuY3Rpb24odmFsdWUsIGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spIHtcclxuICAgIHZhciByZXN1bHQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHJlc3VsdC5yZXNvbHZlKHZhbHVlKTtcclxuICAgIHJldHVybiByZXN1bHQucHJvbWlzZS50aGVuKGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkcSNhbGxcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ29tYmluZXMgbXVsdGlwbGUgcHJvbWlzZXMgaW50byBhIHNpbmdsZSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBhbGwgb2YgdGhlIGlucHV0XHJcbiAgICogcHJvbWlzZXMgYXJlIHJlc29sdmVkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheS48UHJvbWlzZT58T2JqZWN0LjxQcm9taXNlPn0gcHJvbWlzZXMgQW4gYXJyYXkgb3IgaGFzaCBvZiBwcm9taXNlcy5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUmV0dXJucyBhIHNpbmdsZSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIGFuIGFycmF5L2hhc2ggb2YgdmFsdWVzLFxyXG4gICAqICAgZWFjaCB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9taXNlIGF0IHRoZSBzYW1lIGluZGV4L2tleSBpbiB0aGUgYHByb21pc2VzYCBhcnJheS9oYXNoLlxyXG4gICAqICAgSWYgYW55IG9mIHRoZSBwcm9taXNlcyBpcyByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLCB0aGlzIHJlc3VsdGluZyBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWRcclxuICAgKiAgIHdpdGggdGhlIHNhbWUgcmVqZWN0aW9uIHZhbHVlLlxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcclxuICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpLFxyXG4gICAgICAgIGNvdW50ZXIgPSAwLFxyXG4gICAgICAgIHJlc3VsdHMgPSBpc0FycmF5KHByb21pc2VzKSA/IFtdIDoge307XHJcblxyXG4gICAgZm9yRWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwga2V5KSB7XHJcbiAgICAgIGNvdW50ZXIrKztcclxuICAgICAgd2hlbihwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHJlc3VsdHMuaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuO1xyXG4gICAgICAgIHJlc3VsdHNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICghKC0tY291bnRlcikpIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgIGlmIChyZXN1bHRzLmhhc093blByb3BlcnR5KGtleSkpIHJldHVybjtcclxuICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoY291bnRlciA9PT0gMCkge1xyXG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgdmFyICRRID0gZnVuY3Rpb24gUShyZXNvbHZlcikge1xyXG4gICAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVyKSkge1xyXG4gICAgICB0aHJvdyAkcU1pbkVycignbm9yc2x2cicsIFwiRXhwZWN0ZWQgcmVzb2x2ZXJGbiwgZ290ICd7MH0nXCIsIHJlc29sdmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUSkpIHtcclxuICAgICAgLy8gTW9yZSB1c2VmdWwgd2hlbiAkUSBpcyB0aGUgUHJvbWlzZSBpdHNlbGYuXHJcbiAgICAgIHJldHVybiBuZXcgUShyZXNvbHZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzb2x2ZUZuKHZhbHVlKSB7XHJcbiAgICAgIGRlZmVycmVkLnJlc29sdmUodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlamVjdEZuKHJlYXNvbikge1xyXG4gICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNvbHZlcihyZXNvbHZlRm4sIHJlamVjdEZuKTtcclxuXHJcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICB9O1xyXG5cclxuICAkUS5kZWZlciA9IGRlZmVyO1xyXG4gICRRLnJlamVjdCA9IHJlamVjdDtcclxuICAkUS53aGVuID0gd2hlbjtcclxuICAkUS5hbGwgPSBhbGw7XHJcblxyXG4gIHJldHVybiAkUTtcclxufVxyXG5cclxuZnVuY3Rpb24gJCRSQUZQcm92aWRlcigpIHsgLy9yQUZcclxuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbigkd2luZG93LCAkdGltZW91dCkge1xyXG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblxyXG4gICAgdmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblxyXG4gICAgdmFyIHJhZlN1cHBvcnRlZCA9ICEhcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG4gICAgdmFyIHJhZiA9IHJhZlN1cHBvcnRlZFxyXG4gICAgICA/IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICB2YXIgaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pO1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgOiBmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgdmFyIHRpbWVyID0gJHRpbWVvdXQoZm4sIDE2LjY2LCBmYWxzZSk7IC8vIDEwMDAgLyA2MCA9IDE2LjY2NlxyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIHJhZi5zdXBwb3J0ZWQgPSByYWZTdXBwb3J0ZWQ7XHJcblxyXG4gICAgcmV0dXJuIHJhZjtcclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERFU0lHTiBOT1RFU1xyXG4gKlxyXG4gKiBUaGUgZGVzaWduIGRlY2lzaW9ucyBiZWhpbmQgdGhlIHNjb3BlIGFyZSBoZWF2aWx5IGZhdm9yZWQgZm9yIHNwZWVkIGFuZCBtZW1vcnkgY29uc3VtcHRpb24uXHJcbiAqXHJcbiAqIFRoZSB0eXBpY2FsIHVzZSBvZiBzY29wZSBpcyB0byB3YXRjaCB0aGUgZXhwcmVzc2lvbnMsIHdoaWNoIG1vc3Qgb2YgdGhlIHRpbWUgcmV0dXJuIHRoZSBzYW1lXHJcbiAqIHZhbHVlIGFzIGxhc3QgdGltZSBzbyB3ZSBvcHRpbWl6ZSB0aGUgb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBDbG9zdXJlcyBjb25zdHJ1Y3Rpb24gaXMgZXhwZW5zaXZlIGluIHRlcm1zIG9mIHNwZWVkIGFzIHdlbGwgYXMgbWVtb3J5OlxyXG4gKiAgIC0gTm8gY2xvc3VyZXMsIGluc3RlYWQgdXNlIHByb3RvdHlwaWNhbCBpbmhlcml0YW5jZSBmb3IgQVBJXHJcbiAqICAgLSBJbnRlcm5hbCBzdGF0ZSBuZWVkcyB0byBiZSBzdG9yZWQgb24gc2NvcGUgZGlyZWN0bHksIHdoaWNoIG1lYW5zIHRoYXQgcHJpdmF0ZSBzdGF0ZSBpc1xyXG4gKiAgICAgZXhwb3NlZCBhcyAkJF9fX18gcHJvcGVydGllc1xyXG4gKlxyXG4gKiBMb29wIG9wZXJhdGlvbnMgYXJlIG9wdGltaXplZCBieSB1c2luZyB3aGlsZShjb3VudC0tKSB7IC4uLiB9XHJcbiAqICAgLSB0aGlzIG1lYW5zIHRoYXQgaW4gb3JkZXIgdG8ga2VlcCB0aGUgc2FtZSBvcmRlciBvZiBleGVjdXRpb24gYXMgYWRkaXRpb24gd2UgaGF2ZSB0byBhZGRcclxuICogICAgIGl0ZW1zIHRvIHRoZSBhcnJheSBhdCB0aGUgYmVnaW5uaW5nICh1bnNoaWZ0KSBpbnN0ZWFkIG9mIGF0IHRoZSBlbmQgKHB1c2gpXHJcbiAqXHJcbiAqIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCBhbmQgcmVtb3ZlZCBvZnRlblxyXG4gKiAgIC0gVXNpbmcgYW4gYXJyYXkgd291bGQgYmUgc2xvdyBzaW5jZSBpbnNlcnRzIGluIG1pZGRsZSBhcmUgZXhwZW5zaXZlIHNvIHdlIHVzZSBsaW5rZWQgbGlzdFxyXG4gKlxyXG4gKiBUaGVyZSBhcmUgZmV3IHdhdGNoZXMgdGhlbiBhIGxvdCBvZiBvYnNlcnZlcnMuIFRoaXMgaXMgd2h5IHlvdSBkb24ndCB3YW50IHRoZSBvYnNlcnZlciB0byBiZVxyXG4gKiBpbXBsZW1lbnRlZCBpbiB0aGUgc2FtZSB3YXkgYXMgd2F0Y2guIFdhdGNoIHJlcXVpcmVzIHJldHVybiBvZiBpbml0aWFsaXphdGlvbiBmdW5jdGlvbiB3aGljaFxyXG4gKiBhcmUgZXhwZW5zaXZlIHRvIGNvbnN0cnVjdC5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkcm9vdFNjb3BlUHJvdmlkZXJcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFByb3ZpZGVyIGZvciB0aGUgJHJvb3RTY29wZSBzZXJ2aWNlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbWV0aG9kXHJcbiAqIEBuYW1lICRyb290U2NvcGVQcm92aWRlciNkaWdlc3RUdGxcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFNldHMgdGhlIG51bWJlciBvZiBgJGRpZ2VzdGAgaXRlcmF0aW9ucyB0aGUgc2NvcGUgc2hvdWxkIGF0dGVtcHQgdG8gZXhlY3V0ZSBiZWZvcmUgZ2l2aW5nIHVwIGFuZFxyXG4gKiBhc3N1bWluZyB0aGF0IHRoZSBtb2RlbCBpcyB1bnN0YWJsZS5cclxuICpcclxuICogVGhlIGN1cnJlbnQgZGVmYXVsdCBpcyAxMCBpdGVyYXRpb25zLlxyXG4gKlxyXG4gKiBJbiBjb21wbGV4IGFwcGxpY2F0aW9ucyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGRlcGVuZGVuY2llcyBiZXR3ZWVuIGAkd2F0Y2hgcyB3aWxsIHJlc3VsdCBpblxyXG4gKiBzZXZlcmFsIGRpZ2VzdCBpdGVyYXRpb25zLiBIb3dldmVyIGlmIGFuIGFwcGxpY2F0aW9uIG5lZWRzIG1vcmUgdGhhbiB0aGUgZGVmYXVsdCAxMCBkaWdlc3RcclxuICogaXRlcmF0aW9ucyBmb3IgaXRzIG1vZGVsIHRvIHN0YWJpbGl6ZSB0aGVuIHlvdSBzaG91bGQgaW52ZXN0aWdhdGUgd2hhdCBpcyBjYXVzaW5nIHRoZSBtb2RlbCB0b1xyXG4gKiBjb250aW51b3VzbHkgY2hhbmdlIGR1cmluZyB0aGUgZGlnZXN0LlxyXG4gKlxyXG4gKiBJbmNyZWFzaW5nIHRoZSBUVEwgY291bGQgaGF2ZSBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMsIHNvIHlvdSBzaG91bGQgbm90IGNoYW5nZSBpdCB3aXRob3V0XHJcbiAqIHByb3BlciBqdXN0aWZpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGltaXQgVGhlIG51bWJlciBvZiBkaWdlc3QgaXRlcmF0aW9ucy5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRyb290U2NvcGVcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIEV2ZXJ5IGFwcGxpY2F0aW9uIGhhcyBhIHNpbmdsZSByb290IHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfS5cclxuICogQWxsIG90aGVyIHNjb3BlcyBhcmUgZGVzY2VuZGFudCBzY29wZXMgb2YgdGhlIHJvb3Qgc2NvcGUuIFNjb3BlcyBwcm92aWRlIHNlcGFyYXRpb25cclxuICogYmV0d2VlbiB0aGUgbW9kZWwgYW5kIHRoZSB2aWV3LCB2aWEgYSBtZWNoYW5pc20gZm9yIHdhdGNoaW5nIHRoZSBtb2RlbCBmb3IgY2hhbmdlcy5cclxuICogVGhleSBhbHNvIHByb3ZpZGUgYW4gZXZlbnQgZW1pc3Npb24vYnJvYWRjYXN0IGFuZCBzdWJzY3JpcHRpb24gZmFjaWxpdHkuIFNlZSB0aGVcclxuICoge0BsaW5rIGd1aWRlL3Njb3BlIGRldmVsb3BlciBndWlkZSBvbiBzY29wZXN9LlxyXG4gKi9cclxuZnVuY3Rpb24gJFJvb3RTY29wZVByb3ZpZGVyKCkge1xyXG4gIHZhciBUVEwgPSAxMDtcclxuICB2YXIgJHJvb3RTY29wZU1pbkVyciA9IG1pbkVycignJHJvb3RTY29wZScpO1xyXG4gIHZhciBsYXN0RGlydHlXYXRjaCA9IG51bGw7XHJcbiAgdmFyIGFwcGx5QXN5bmNJZCA9IG51bGw7XHJcblxyXG4gIHRoaXMuZGlnZXN0VHRsID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIFRUTCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFRUTDtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckZXhjZXB0aW9uSGFuZGxlcicsICckcGFyc2UnLCAnJGJyb3dzZXInLFxyXG4gICAgICBmdW5jdGlvbigkaW5qZWN0b3IsICRleGNlcHRpb25IYW5kbGVyLCAkcGFyc2UsICRicm93c2VyKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgdHlwZVxyXG4gICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQSByb290IHNjb3BlIGNhbiBiZSByZXRyaWV2ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlICRyb290U2NvcGV9IGtleSBmcm9tIHRoZVxyXG4gICAgICoge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCB1c2luZyB0aGVcclxuICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRuZXcgJG5ldygpfSBtZXRob2QuIChNb3N0IHNjb3BlcyBhcmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW5cclxuICAgICAqIGNvbXBpbGVkIEhUTUwgdGVtcGxhdGUgaXMgZXhlY3V0ZWQuKVxyXG4gICAgICpcclxuICAgICAqIEhlcmUgaXMgYSBzaW1wbGUgc2NvcGUgc25pcHBldCB0byBzaG93IGhvdyB5b3UgY2FuIGludGVyYWN0IHdpdGggdGhlIHNjb3BlLlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGZpbGUgc3JjPVwiLi90ZXN0L25nL3Jvb3RTY29wZVNwZWMuanNcIiB0YWc9XCJkb2NzMVwiIC8+XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIEluaGVyaXRhbmNlXHJcbiAgICAgKiBBIHNjb3BlIGNhbiBpbmhlcml0IGZyb20gYSBwYXJlbnQgc2NvcGUsIGFzIGluIHRoaXMgZXhhbXBsZTpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgICAgIHZhciBwYXJlbnQgPSAkcm9vdFNjb3BlO1xyXG4gICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldygpO1xyXG5cclxuICAgICAgICAgcGFyZW50LnNhbHV0YXRpb24gPSBcIkhlbGxvXCI7XHJcbiAgICAgICAgIGV4cGVjdChjaGlsZC5zYWx1dGF0aW9uKS50b0VxdWFsKCdIZWxsbycpO1xyXG5cclxuICAgICAgICAgY2hpbGQuc2FsdXRhdGlvbiA9IFwiV2VsY29tZVwiO1xyXG4gICAgICAgICBleHBlY3QoY2hpbGQuc2FsdXRhdGlvbikudG9FcXVhbCgnV2VsY29tZScpO1xyXG4gICAgICAgICBleHBlY3QocGFyZW50LnNhbHV0YXRpb24pLnRvRXF1YWwoJ0hlbGxvJyk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBXaGVuIGludGVyYWN0aW5nIHdpdGggYFNjb3BlYCBpbiB0ZXN0cywgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kcyBhcmUgYXZhaWxhYmxlIG9uIHRoZVxyXG4gICAgICogaW5zdGFuY2VzIG9mIGBTY29wZWAgdHlwZS4gU2VlIHtAbGluayBuZ01vY2suJHJvb3RTY29wZS5TY29wZSBuZ01vY2sgU2NvcGV9IGZvciBhZGRpdGlvbmFsXHJcbiAgICAgKiBkZXRhaWxzLlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbigpPj19IHByb3ZpZGVycyBNYXAgb2Ygc2VydmljZSBmYWN0b3J5IHdoaWNoIG5lZWQgdG8gYmVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWQgZm9yIHRoZSBjdXJyZW50IHNjb3BlLiBEZWZhdWx0cyB0byB7QGxpbmsgbmd9LlxyXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgKj49fSBpbnN0YW5jZUNhY2hlIFByb3ZpZGVzIHByZS1pbnN0YW50aWF0ZWQgc2VydmljZXMgd2hpY2ggc2hvdWxkXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZC9vdmVycmlkZSBzZXJ2aWNlcyBwcm92aWRlZCBieSBgcHJvdmlkZXJzYC4gVGhpcyBpcyBoYW5keVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIHVuaXQtdGVzdGluZyBhbmQgaGF2aW5nIHRoZSBuZWVkIHRvIG92ZXJyaWRlIGEgZGVmYXVsdFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLlxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gTmV3bHkgY3JlYXRlZCBzY29wZS5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFNjb3BlKCkge1xyXG4gICAgICB0aGlzLiRpZCA9IG5leHRVaWQoKTtcclxuICAgICAgdGhpcy4kJHBoYXNlID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kJHdhdGNoZXJzID1cclxuICAgICAgICAgICAgICAgICAgICAgdGhpcy4kJG5leHRTaWJsaW5nID0gdGhpcy4kJHByZXZTaWJsaW5nID1cclxuICAgICAgICAgICAgICAgICAgICAgdGhpcy4kJGNoaWxkSGVhZCA9IHRoaXMuJCRjaGlsZFRhaWwgPSBudWxsO1xyXG4gICAgICB0aGlzLiRyb290ID0gdGhpcztcclxuICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XHJcbiAgICAgIHRoaXMuJCRsaXN0ZW5lckNvdW50ID0ge307XHJcbiAgICAgIHRoaXMuJCRpc29sYXRlQmluZGluZ3MgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRpZFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogVW5pcXVlIHNjb3BlIElEIChtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcpIHVzZWZ1bCBmb3IgZGVidWdnaW5nLlxyXG4gICAgICovXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxyXG4gICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHBhcmVudFxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgc2NvcGUuXHJcbiAgICAgICovXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHJvb3RcclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFJlZmVyZW5jZSB0byB0aGUgcm9vdCBzY29wZS5cclxuICAgICAgICovXHJcblxyXG4gICAgU2NvcGUucHJvdG90eXBlID0ge1xyXG4gICAgICBjb25zdHJ1Y3RvcjogU2NvcGUsXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJG5ld1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogQ3JlYXRlcyBhIG5ldyBjaGlsZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFRoZSBwYXJlbnQgc2NvcGUgd2lsbCBwcm9wYWdhdGUgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBldmVudC5cclxuICAgICAgICogVGhlIHNjb3BlIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlIHNjb3BlIGhpZXJhcmNoeSB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfS5cclxuICAgICAgICpcclxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3kgJGRlc3Ryb3koKX0gbXVzdCBiZSBjYWxsZWQgb24gYSBzY29wZSB3aGVuIGl0IGlzXHJcbiAgICAgICAqIGRlc2lyZWQgZm9yIHRoZSBzY29wZSBhbmQgaXRzIGNoaWxkIHNjb3BlcyB0byBiZSBwZXJtYW5lbnRseSBkZXRhY2hlZCBmcm9tIHRoZSBwYXJlbnQgYW5kXHJcbiAgICAgICAqIHRodXMgc3RvcCBwYXJ0aWNpcGF0aW5nIGluIG1vZGVsIGNoYW5nZSBkZXRlY3Rpb24gYW5kIGxpc3RlbmVyIG5vdGlmaWNhdGlvbiBieSBpbnZva2luZy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc29sYXRlIElmIHRydWUsIHRoZW4gdGhlIHNjb3BlIGRvZXMgbm90IHByb3RvdHlwaWNhbGx5IGluaGVyaXQgZnJvbSB0aGVcclxuICAgICAgICogICAgICAgICBwYXJlbnQgc2NvcGUuIFRoZSBzY29wZSBpcyBpc29sYXRlZCwgYXMgaXQgY2FuIG5vdCBzZWUgcGFyZW50IHNjb3BlIHByb3BlcnRpZXMuXHJcbiAgICAgICAqICAgICAgICAgV2hlbiBjcmVhdGluZyB3aWRnZXRzLCBpdCBpcyB1c2VmdWwgZm9yIHRoZSB3aWRnZXQgdG8gbm90IGFjY2lkZW50YWxseSByZWFkIHBhcmVudFxyXG4gICAgICAgKiAgICAgICAgIHN0YXRlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge1Njb3BlfSBbcGFyZW50PXRoaXNdIFRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBgU2NvcGVgfSB0aGF0IHdpbGwgYmUgdGhlIGAkcGFyZW50YFxyXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIHRoZSBuZXdseSBjcmVhdGVkIHNjb3BlLiBEZWZhdWx0cyB0byBgdGhpc2Agc2NvcGUgaWYgbm90IHByb3ZpZGVkLlxyXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgdXNlZCB3aGVuIGNyZWF0aW5nIGEgdHJhbnNjbHVkZSBzY29wZSB0byBjb3JyZWN0bHkgcGxhY2UgaXRcclxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgc2NvcGUgaGllcmFyY2h5IHdoaWxlIG1haW50YWluaW5nIHRoZSBjb3JyZWN0IHByb3RvdHlwaWNhbFxyXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhbmNlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbmV3bHkgY3JlYXRlZCBjaGlsZCBzY29wZS5cclxuICAgICAgICpcclxuICAgICAgICovXHJcbiAgICAgICRuZXc6IGZ1bmN0aW9uKGlzb2xhdGUsIHBhcmVudCkge1xyXG4gICAgICAgIHZhciBjaGlsZDtcclxuXHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50IHx8IHRoaXM7XHJcblxyXG4gICAgICAgIGlmIChpc29sYXRlKSB7XHJcbiAgICAgICAgICBjaGlsZCA9IG5ldyBTY29wZSgpO1xyXG4gICAgICAgICAgY2hpbGQuJHJvb3QgPSB0aGlzLiRyb290O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBPbmx5IGNyZWF0ZSBhIGNoaWxkIHNjb3BlIGNsYXNzIGlmIHNvbWVib2R5IGFza3MgZm9yIG9uZSxcclxuICAgICAgICAgIC8vIGJ1dCBjYWNoZSBpdCB0byBhbGxvdyB0aGUgVk0gdG8gb3B0aW1pemUgbG9va3Vwcy5cclxuICAgICAgICAgIGlmICghdGhpcy4kJENoaWxkU2NvcGUpIHtcclxuICAgICAgICAgICAgdGhpcy4kJENoaWxkU2NvcGUgPSBmdW5jdGlvbiBDaGlsZFNjb3BlKCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuJCR3YXRjaGVycyA9IHRoaXMuJCRuZXh0U2libGluZyA9XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuJCRjaGlsZEhlYWQgPSB0aGlzLiQkY2hpbGRUYWlsID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XHJcbiAgICAgICAgICAgICAgdGhpcy4kJGxpc3RlbmVyQ291bnQgPSB7fTtcclxuICAgICAgICAgICAgICB0aGlzLiRpZCA9IG5leHRVaWQoKTtcclxuICAgICAgICAgICAgICB0aGlzLiQkQ2hpbGRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuJCRDaGlsZFNjb3BlLnByb3RvdHlwZSA9IHRoaXM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjaGlsZCA9IG5ldyB0aGlzLiQkQ2hpbGRTY29wZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGlsZC4kcGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIGNoaWxkLiQkcHJldlNpYmxpbmcgPSBwYXJlbnQuJCRjaGlsZFRhaWw7XHJcbiAgICAgICAgaWYgKHBhcmVudC4kJGNoaWxkSGVhZCkge1xyXG4gICAgICAgICAgcGFyZW50LiQkY2hpbGRUYWlsLiQkbmV4dFNpYmxpbmcgPSBjaGlsZDtcclxuICAgICAgICAgIHBhcmVudC4kJGNoaWxkVGFpbCA9IGNoaWxkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwYXJlbnQuJCRjaGlsZEhlYWQgPSBwYXJlbnQuJCRjaGlsZFRhaWwgPSBjaGlsZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFdoZW4gdGhlIG5ldyBzY29wZSBpcyBub3QgaXNvbGF0ZWQgb3Igd2UgaW5oZXJpdCBmcm9tIGB0aGlzYCwgYW5kXHJcbiAgICAgICAgLy8gdGhlIHBhcmVudCBzY29wZSBpcyBkZXN0cm95ZWQsIHRoZSBwcm9wZXJ0eSBgJCRkZXN0cm95ZWRgIGlzIGluaGVyaXRlZFxyXG4gICAgICAgIC8vIHByb3RvdHlwaWNhbGx5LiBJbiBhbGwgb3RoZXIgY2FzZXMsIHRoaXMgcHJvcGVydHkgbmVlZHMgdG8gYmUgc2V0XHJcbiAgICAgICAgLy8gd2hlbiB0aGUgcGFyZW50IHNjb3BlIGlzIGRlc3Ryb3llZC5cclxuICAgICAgICAvLyBUaGUgbGlzdGVuZXIgbmVlZHMgdG8gYmUgYWRkZWQgYWZ0ZXIgdGhlIHBhcmVudCBpcyBzZXRcclxuICAgICAgICBpZiAoaXNvbGF0ZSB8fCBwYXJlbnQgIT0gdGhpcykgY2hpbGQuJG9uKCckZGVzdHJveScsIGRlc3Ryb3lDaGlsZCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveUNoaWxkKCkge1xyXG4gICAgICAgICAgY2hpbGQuJCRkZXN0cm95ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBSZWdpc3RlcnMgYSBgbGlzdGVuZXJgIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkIHdoZW5ldmVyIHRoZSBgd2F0Y2hFeHByZXNzaW9uYCBjaGFuZ2VzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAtIFRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBjYWxsZWQgb24gZXZlcnkgY2FsbCB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0XHJcbiAgICAgICAqICAgJGRpZ2VzdCgpfSBhbmQgc2hvdWxkIHJldHVybiB0aGUgdmFsdWUgdGhhdCB3aWxsIGJlIHdhdGNoZWQuIChTaW5jZVxyXG4gICAgICAgKiAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSByZXJ1bnMgd2hlbiBpdCBkZXRlY3RzIGNoYW5nZXMgdGhlXHJcbiAgICAgICAqICAgYHdhdGNoRXhwcmVzc2lvbmAgY2FuIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgcGVyXHJcbiAgICAgICAqICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IGFuZCBzaG91bGQgYmUgaWRlbXBvdGVudC4pXHJcbiAgICAgICAqIC0gVGhlIGBsaXN0ZW5lcmAgaXMgY2FsbGVkIG9ubHkgd2hlbiB0aGUgdmFsdWUgZnJvbSB0aGUgY3VycmVudCBgd2F0Y2hFeHByZXNzaW9uYCBhbmQgdGhlXHJcbiAgICAgICAqICAgcHJldmlvdXMgY2FsbCB0byBgd2F0Y2hFeHByZXNzaW9uYCBhcmUgbm90IGVxdWFsICh3aXRoIHRoZSBleGNlcHRpb24gb2YgdGhlIGluaXRpYWwgcnVuLFxyXG4gICAgICAgKiAgIHNlZSBiZWxvdykuIEluZXF1YWxpdHkgaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gcmVmZXJlbmNlIGluZXF1YWxpdHksXHJcbiAgICAgICAqICAgW3N0cmljdCBjb21wYXJpc29uXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9PcGVyYXRvcnMvQ29tcGFyaXNvbl9PcGVyYXRvcnMpXHJcbiAgICAgICAqICAgIHZpYSB0aGUgYCE9PWAgSmF2YXNjcmlwdCBvcGVyYXRvciwgdW5sZXNzIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYFxyXG4gICAgICAgKiAgIChzZWUgbmV4dCBwb2ludClcclxuICAgICAgICogLSBXaGVuIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYCwgaW5lcXVhbGl0eSBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbmAgaXMgZGV0ZXJtaW5lZFxyXG4gICAgICAgKiAgIGFjY29yZGluZyB0byB0aGUge0BsaW5rIGFuZ3VsYXIuZXF1YWxzfSBmdW5jdGlvbi4gVG8gc2F2ZSB0aGUgdmFsdWUgb2YgdGhlIG9iamVjdCBmb3JcclxuICAgICAgICogICBsYXRlciBjb21wYXJpc29uLCB0aGUge0BsaW5rIGFuZ3VsYXIuY29weX0gZnVuY3Rpb24gaXMgdXNlZC4gVGhpcyB0aGVyZWZvcmUgbWVhbnMgdGhhdFxyXG4gICAgICAgKiAgIHdhdGNoaW5nIGNvbXBsZXggb2JqZWN0cyB3aWxsIGhhdmUgYWR2ZXJzZSBtZW1vcnkgYW5kIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9ucy5cclxuICAgICAgICogLSBUaGUgd2F0Y2ggYGxpc3RlbmVyYCBtYXkgY2hhbmdlIHRoZSBtb2RlbCwgd2hpY2ggbWF5IHRyaWdnZXIgb3RoZXIgYGxpc3RlbmVyYHMgdG8gZmlyZS5cclxuICAgICAgICogICBUaGlzIGlzIGFjaGlldmVkIGJ5IHJlcnVubmluZyB0aGUgd2F0Y2hlcnMgdW50aWwgbm8gY2hhbmdlcyBhcmUgZGV0ZWN0ZWQuIFRoZSByZXJ1blxyXG4gICAgICAgKiAgIGl0ZXJhdGlvbiBsaW1pdCBpcyAxMCB0byBwcmV2ZW50IGFuIGluZmluaXRlIGxvb3AgZGVhZGxvY2suXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIElmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gaXMgY2FsbGVkLFxyXG4gICAgICAgKiB5b3UgY2FuIHJlZ2lzdGVyIGEgYHdhdGNoRXhwcmVzc2lvbmAgZnVuY3Rpb24gd2l0aCBubyBgbGlzdGVuZXJgLiAoU2luY2UgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogY2FuIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgcGVyIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUgd2hlbiBhXHJcbiAgICAgICAqIGNoYW5nZSBpcyBkZXRlY3RlZCwgYmUgcHJlcGFyZWQgZm9yIG11bHRpcGxlIGNhbGxzIHRvIHlvdXIgbGlzdGVuZXIuKVxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBZnRlciBhIHdhdGNoZXIgaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBzY29wZSwgdGhlIGBsaXN0ZW5lcmAgZm4gaXMgY2FsbGVkIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAqICh2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luYyAkZXZhbEFzeW5jfSkgdG8gaW5pdGlhbGl6ZSB0aGVcclxuICAgICAgICogd2F0Y2hlci4gSW4gcmFyZSBjYXNlcywgdGhpcyBpcyB1bmRlc2lyYWJsZSBiZWNhdXNlIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQgd2hlbiB0aGUgcmVzdWx0XHJcbiAgICAgICAqIG9mIGB3YXRjaEV4cHJlc3Npb25gIGRpZG4ndCBjaGFuZ2UuIFRvIGRldGVjdCB0aGlzIHNjZW5hcmlvIHdpdGhpbiB0aGUgYGxpc3RlbmVyYCBmbiwgeW91XHJcbiAgICAgICAqIGNhbiBjb21wYXJlIHRoZSBgbmV3VmFsYCBhbmQgYG9sZFZhbGAuIElmIHRoZXNlIHR3byB2YWx1ZXMgYXJlIGlkZW50aWNhbCAoYD09PWApIHRoZW4gdGhlXHJcbiAgICAgICAqIGxpc3RlbmVyIHdhcyBjYWxsZWQgZHVlIHRvIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAjIEV4YW1wbGVcclxuICAgICAgICogYGBganNcclxuICAgICAgICAgICAvLyBsZXQncyBhc3N1bWUgdGhhdCBzY29wZSB3YXMgZGVwZW5kZW5jeSBpbmplY3RlZCBhcyB0aGUgJHJvb3RTY29wZVxyXG4gICAgICAgICAgIHZhciBzY29wZSA9ICRyb290U2NvcGU7XHJcbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdtaXNrbyc7XHJcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XHJcblxyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xyXG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgc2NvcGUuY291bnRlciA9IHNjb3BlLmNvdW50ZXIgKyAxO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xyXG5cclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcclxuXHJcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgIC8vIGJ1dCBub3cgaXQgd2lsbCBub3QgYmUgY2FsbGVkIHVubGVzcyB0aGUgdmFsdWUgY2hhbmdlc1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDEpO1xyXG5cclxuICAgICAgICAgICBzY29wZS5uYW1lID0gJ2FkYW0nO1xyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAvLyBVc2luZyBhIGZ1bmN0aW9uIGFzIGEgd2F0Y2hFeHByZXNzaW9uXHJcbiAgICAgICAgICAgdmFyIGZvb2Q7XHJcbiAgICAgICAgICAgc2NvcGUuZm9vZENvdW50ZXIgPSAwO1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgwKTtcclxuICAgICAgICAgICBzY29wZS4kd2F0Y2goXHJcbiAgICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIGJlaW5nIHdhdGNoZWQuIEl0IGlzIGNhbGxlZCBmb3IgZWFjaCB0dXJuIG9mIHRoZSAkZGlnZXN0IGxvb3BcclxuICAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gZm9vZDsgfSxcclxuICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNoYW5nZSBsaXN0ZW5lciwgY2FsbGVkIHdoZW4gdGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGFib3ZlIGZ1bmN0aW9uIGNoYW5nZXNcclxuICAgICAgICAgICAgIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICBpZiAoIG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSApIHtcclxuICAgICAgICAgICAgICAgICAvLyBPbmx5IGluY3JlbWVudCB0aGUgY291bnRlciBpZiB0aGUgdmFsdWUgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgIHNjb3BlLmZvb2RDb3VudGVyID0gc2NvcGUuZm9vZENvdW50ZXIgKyAxO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgKTtcclxuICAgICAgICAgICAvLyBObyBkaWdlc3QgaGFzIGJlZW4gcnVuIHNvIHRoZSBjb3VudGVyIHdpbGwgYmUgemVyb1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgwKTtcclxuXHJcbiAgICAgICAgICAgLy8gUnVuIHRoZSBkaWdlc3QgYnV0IHNpbmNlIGZvb2QgaGFzIG5vdCBjaGFuZ2VkIGNvdW50IHdpbGwgc3RpbGwgYmUgemVyb1xyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XHJcblxyXG4gICAgICAgICAgIC8vIFVwZGF0ZSBmb29kIGFuZCBydW4gZGlnZXN0LiAgTm93IHRoZSBjb3VudGVyIHdpbGwgaW5jcmVtZW50XHJcbiAgICAgICAgICAgZm9vZCA9ICdjaGVlc2VidXJnZXInO1xyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMSk7XHJcblxyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHsoZnVuY3Rpb24oKXxzdHJpbmcpfSB3YXRjaEV4cHJlc3Npb24gRXhwcmVzc2lvbiB0aGF0IGlzIGV2YWx1YXRlZCBvbiBlYWNoXHJcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEEgY2hhbmdlIGluIHRoZSByZXR1cm4gdmFsdWUgdHJpZ2dlcnNcclxuICAgICAgICogICAgYSBjYWxsIHRvIHRoZSBgbGlzdGVuZXJgLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cclxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogY2FsbGVkIHdpdGggY3VycmVudCBgc2NvcGVgIGFzIGEgcGFyYW1ldGVyLlxyXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsLCBzY29wZSl9IGxpc3RlbmVyIENhbGxiYWNrIGNhbGxlZCB3aGVuZXZlciB0aGUgdmFsdWVcclxuICAgICAgICogICAgb2YgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cclxuICAgICAgICpcclxuICAgICAgICogICAgLSBgbmV3VmFsYCBjb250YWlucyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogICAgLSBgb2xkVmFsYCBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXHJcbiAgICAgICAqICAgIC0gYHNjb3BlYCByZWZlcnMgdG8gdGhlIGN1cnJlbnQgc2NvcGVcclxuICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gb2JqZWN0RXF1YWxpdHkgQ29tcGFyZSBmb3Igb2JqZWN0IGVxdWFsaXR5IHVzaW5nIHtAbGluayBhbmd1bGFyLmVxdWFsc30gaW5zdGVhZCBvZlxyXG4gICAgICAgKiAgICAgY29tcGFyaW5nIGZvciByZWZlcmVuY2UgZXF1YWxpdHkuXHJcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXHJcbiAgICAgICAqL1xyXG4gICAgICAkd2F0Y2g6IGZ1bmN0aW9uKHdhdGNoRXhwLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHkpIHtcclxuICAgICAgICB2YXIgZ2V0ID0gJHBhcnNlKHdhdGNoRXhwKTtcclxuXHJcbiAgICAgICAgaWYgKGdldC4kJHdhdGNoRGVsZWdhdGUpIHtcclxuICAgICAgICAgIHJldHVybiBnZXQuJCR3YXRjaERlbGVnYXRlKHRoaXMsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcyxcclxuICAgICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzLFxyXG4gICAgICAgICAgICB3YXRjaGVyID0ge1xyXG4gICAgICAgICAgICAgIGZuOiBsaXN0ZW5lcixcclxuICAgICAgICAgICAgICBsYXN0OiBpbml0V2F0Y2hWYWwsXHJcbiAgICAgICAgICAgICAgZ2V0OiBnZXQsXHJcbiAgICAgICAgICAgICAgZXhwOiB3YXRjaEV4cCxcclxuICAgICAgICAgICAgICBlcTogISFvYmplY3RFcXVhbGl0eVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpIHtcclxuICAgICAgICAgIHdhdGNoZXIuZm4gPSBub29wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFhcnJheSkge1xyXG4gICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHdlIHVzZSB1bnNoaWZ0IHNpbmNlIHdlIHVzZSBhIHdoaWxlIGxvb3AgaW4gJGRpZ2VzdCBmb3Igc3BlZWQuXHJcbiAgICAgICAgLy8gdGhlIHdoaWxlIGxvb3AgcmVhZHMgaW4gcmV2ZXJzZSBvcmRlci5cclxuICAgICAgICBhcnJheS51bnNoaWZ0KHdhdGNoZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoKCkge1xyXG4gICAgICAgICAgYXJyYXlSZW1vdmUoYXJyYXksIHdhdGNoZXIpO1xyXG4gICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaEdyb3VwXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBBIHZhcmlhbnQgb2Yge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoICR3YXRjaCgpfSB3aGVyZSBpdCB3YXRjaGVzIGFuIGFycmF5IG9mIGB3YXRjaEV4cHJlc3Npb25zYC5cclxuICAgICAgICogSWYgYW55IG9uZSBleHByZXNzaW9uIGluIHRoZSBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGBsaXN0ZW5lcmAgaXMgZXhlY3V0ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIC0gVGhlIGl0ZW1zIGluIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AgYXJyYXkgYXJlIG9ic2VydmVkIHZpYSBzdGFuZGFyZCAkd2F0Y2ggb3BlcmF0aW9uIGFuZCBhcmUgZXhhbWluZWQgb24gZXZlcnlcclxuICAgICAgICogICBjYWxsIHRvICRkaWdlc3QoKSB0byBzZWUgaWYgYW55IGl0ZW1zIGNoYW5nZXMuXHJcbiAgICAgICAqIC0gVGhlIGBsaXN0ZW5lcmAgaXMgY2FsbGVkIHdoZW5ldmVyIGFueSBleHByZXNzaW9uIGluIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AgYXJyYXkgY2hhbmdlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZ1bmN0aW9uKHNjb3BlKT59IHdhdGNoRXhwcmVzc2lvbnMgQXJyYXkgb2YgZXhwcmVzc2lvbnMgdGhhdCB3aWxsIGJlIGluZGl2aWR1YWxseVxyXG4gICAgICAgKiB3YXRjaGVkIHVzaW5nIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX1cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2NvcGUpfSBsaXN0ZW5lciBDYWxsYmFjayBjYWxsZWQgd2hlbmV2ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiBhbnlcclxuICAgICAgICogICAgZXhwcmVzc2lvbiBpbiBgd2F0Y2hFeHByZXNzaW9uc2AgY2hhbmdlc1xyXG4gICAgICAgKiAgICBUaGUgYG5ld1ZhbHVlc2AgYXJyYXkgY29udGFpbnMgdGhlIGN1cnJlbnQgdmFsdWVzIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AsIHdpdGggdGhlIGluZGV4ZXMgbWF0Y2hpbmdcclxuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogICAgYW5kIHRoZSBgb2xkVmFsdWVzYCBhcnJheSBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AsIHdpdGggdGhlIGluZGV4ZXMgbWF0Y2hpbmdcclxuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmBcclxuICAgICAgICogICAgVGhlIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlLlxyXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgYWxsIGxpc3RlbmVycy5cclxuICAgICAgICovXHJcbiAgICAgICR3YXRjaEdyb3VwOiBmdW5jdGlvbih3YXRjaEV4cHJlc3Npb25zLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBvbGRWYWx1ZXMgPSBuZXcgQXJyYXkod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpO1xyXG4gICAgICAgIHZhciBuZXdWYWx1ZXMgPSBuZXcgQXJyYXkod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpO1xyXG4gICAgICAgIHZhciBkZXJlZ2lzdGVyRm5zID0gW107XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBmaXJzdFJ1biA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmICghd2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgIC8vIE5vIGV4cHJlc3Npb25zIG1lYW5zIHdlIGNhbGwgdGhlIGxpc3RlbmVyIEFTQVBcclxuICAgICAgICAgIHZhciBzaG91bGRDYWxsID0gdHJ1ZTtcclxuICAgICAgICAgIHNlbGYuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHNob3VsZENhbGwpIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaEdyb3VwKCkge1xyXG4gICAgICAgICAgICBzaG91bGRDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAvLyBTcGVjaWFsIGNhc2Ugc2l6ZSBvZiBvbmVcclxuICAgICAgICAgIHJldHVybiB0aGlzLiR3YXRjaCh3YXRjaEV4cHJlc3Npb25zWzBdLCBmdW5jdGlvbiB3YXRjaEdyb3VwQWN0aW9uKHZhbHVlLCBvbGRWYWx1ZSwgc2NvcGUpIHtcclxuICAgICAgICAgICAgbmV3VmFsdWVzWzBdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIG9sZFZhbHVlc1swXSA9IG9sZFZhbHVlO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsICh2YWx1ZSA9PT0gb2xkVmFsdWUpID8gbmV3VmFsdWVzIDogb2xkVmFsdWVzLCBzY29wZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvckVhY2god2F0Y2hFeHByZXNzaW9ucywgZnVuY3Rpb24oZXhwciwgaSkge1xyXG4gICAgICAgICAgdmFyIHVud2F0Y2hGbiA9IHNlbGYuJHdhdGNoKGV4cHIsIGZ1bmN0aW9uIHdhdGNoR3JvdXBTdWJBY3Rpb24odmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlc1tpXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBvbGRWYWx1ZXNbaV0gPSBvbGRWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCkge1xyXG4gICAgICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBzZWxmLiRldmFsQXN5bmMod2F0Y2hHcm91cEFjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZGVyZWdpc3RlckZucy5wdXNoKHVud2F0Y2hGbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdhdGNoR3JvdXBBY3Rpb24oKSB7XHJcbiAgICAgICAgICBjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIGlmIChmaXJzdFJ1bikge1xyXG4gICAgICAgICAgICBmaXJzdFJ1biA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsIG5ld1ZhbHVlcywgc2VsZik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2VsZik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XHJcbiAgICAgICAgICB3aGlsZSAoZGVyZWdpc3RlckZucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGVyZWdpc3RlckZucy5zaGlmdCgpKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaENvbGxlY3Rpb25cclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFNoYWxsb3cgd2F0Y2hlcyB0aGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgYW5kIGZpcmVzIHdoZW5ldmVyIGFueSBvZiB0aGUgcHJvcGVydGllcyBjaGFuZ2VcclxuICAgICAgICogKGZvciBhcnJheXMsIHRoaXMgaW1wbGllcyB3YXRjaGluZyB0aGUgYXJyYXkgaXRlbXM7IGZvciBvYmplY3QgbWFwcywgdGhpcyBpbXBsaWVzIHdhdGNoaW5nXHJcbiAgICAgICAqIHRoZSBwcm9wZXJ0aWVzKS4gSWYgYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQsIHRoZSBgbGlzdGVuZXJgIGNhbGxiYWNrIGlzIGZpcmVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAtIFRoZSBgb2JqYCBjb2xsZWN0aW9uIGlzIG9ic2VydmVkIHZpYSBzdGFuZGFyZCAkd2F0Y2ggb3BlcmF0aW9uIGFuZCBpcyBleGFtaW5lZCBvbiBldmVyeVxyXG4gICAgICAgKiAgIGNhbGwgdG8gJGRpZ2VzdCgpIHRvIHNlZSBpZiBhbnkgaXRlbXMgaGF2ZSBiZWVuIGFkZGVkLCByZW1vdmVkLCBvciBtb3ZlZC5cclxuICAgICAgICogLSBUaGUgYGxpc3RlbmVyYCBpcyBjYWxsZWQgd2hlbmV2ZXIgYW55dGhpbmcgd2l0aGluIHRoZSBgb2JqYCBoYXMgY2hhbmdlZC4gRXhhbXBsZXMgaW5jbHVkZVxyXG4gICAgICAgKiAgIGFkZGluZywgcmVtb3ZpbmcsIGFuZCBtb3ZpbmcgaXRlbXMgYmVsb25naW5nIHRvIGFuIG9iamVjdCBvciBhcnJheS5cclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogIyBFeGFtcGxlXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ2lnb3InLCAnbWF0aWFzJywgJ21pc2tvJywgJ2phbWVzJ107XHJcbiAgICAgICAgICAkc2NvcGUuZGF0YUNvdW50ID0gNDtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignbmFtZXMnLCBmdW5jdGlvbihuZXdOYW1lcywgb2xkTmFtZXMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGFDb3VudCA9IG5ld05hbWVzLmxlbmd0aDtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xyXG4gICAgICAgICAgJHNjb3BlLiRkaWdlc3QoKTtcclxuXHJcbiAgICAgICAgICAvL3N0aWxsIGF0IDQgLi4uIG5vIGNoYW5nZXNcclxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xyXG5cclxuICAgICAgICAgICRzY29wZS5uYW1lcy5wb3AoKTtcclxuICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XHJcblxyXG4gICAgICAgICAgLy9ub3cgdGhlcmUncyBiZWVuIGEgY2hhbmdlXHJcbiAgICAgICAgICBleHBlY3QoJHNjb3BlLmRhdGFDb3VudCkudG9FcXVhbCgzKTtcclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9uKHNjb3BlKX0gb2JqIEV2YWx1YXRlZCBhcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS4gVGhlXHJcbiAgICAgICAqICAgIGV4cHJlc3Npb24gdmFsdWUgc2hvdWxkIGV2YWx1YXRlIHRvIGFuIG9iamVjdCBvciBhbiBhcnJheSB3aGljaCBpcyBvYnNlcnZlZCBvbiBlYWNoXHJcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEFueSBzaGFsbG93IGNoYW5nZSB3aXRoaW4gdGhlXHJcbiAgICAgICAqICAgIGNvbGxlY3Rpb24gd2lsbCB0cmlnZ2VyIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdDb2xsZWN0aW9uLCBvbGRDb2xsZWN0aW9uLCBzY29wZSl9IGxpc3RlbmVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkXHJcbiAgICAgICAqICAgIHdoZW4gYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQuXHJcbiAgICAgICAqICAgIC0gVGhlIGBuZXdDb2xsZWN0aW9uYCBvYmplY3QgaXMgdGhlIG5ld2x5IG1vZGlmaWVkIGRhdGEgb2J0YWluZWQgZnJvbSB0aGUgYG9iamAgZXhwcmVzc2lvblxyXG4gICAgICAgKiAgICAtIFRoZSBgb2xkQ29sbGVjdGlvbmAgb2JqZWN0IGlzIGEgY29weSBvZiB0aGUgZm9ybWVyIGNvbGxlY3Rpb24gZGF0YS5cclxuICAgICAgICogICAgICBEdWUgdG8gcGVyZm9ybWFuY2UgY29uc2lkZXJhdGlvbnMsIHRoZWBvbGRDb2xsZWN0aW9uYCB2YWx1ZSBpcyBjb21wdXRlZCBvbmx5IGlmIHRoZVxyXG4gICAgICAgKiAgICAgIGBsaXN0ZW5lcmAgZnVuY3Rpb24gZGVjbGFyZXMgdHdvIG9yIG1vcmUgYXJndW1lbnRzLlxyXG4gICAgICAgKiAgICAtIFRoZSBgc2NvcGVgIGFyZ3VtZW50IHJlZmVycyB0byB0aGUgY3VycmVudCBzY29wZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuIFdoZW4gdGhlXHJcbiAgICAgICAqICAgIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBpcyBleGVjdXRlZCwgdGhlIGludGVybmFsIHdhdGNoIG9wZXJhdGlvbiBpcyB0ZXJtaW5hdGVkLlxyXG4gICAgICAgKi9cclxuICAgICAgJHdhdGNoQ29sbGVjdGlvbjogZnVuY3Rpb24ob2JqLCBsaXN0ZW5lcikge1xyXG4gICAgICAgICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvci4kc3RhdGVmdWwgPSB0cnVlO1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy8gdGhlIGN1cnJlbnQgdmFsdWUsIHVwZGF0ZWQgb24gZWFjaCBkaXJ0eS1jaGVjayBydW5cclxuICAgICAgICB2YXIgbmV3VmFsdWU7XHJcbiAgICAgICAgLy8gYSBzaGFsbG93IGNvcHkgb2YgdGhlIG5ld1ZhbHVlIGZyb20gdGhlIGxhc3QgZGlydHktY2hlY2sgcnVuLFxyXG4gICAgICAgIC8vIHVwZGF0ZWQgdG8gbWF0Y2ggbmV3VmFsdWUgZHVyaW5nIGRpcnR5LWNoZWNrIHJ1blxyXG4gICAgICAgIHZhciBvbGRWYWx1ZTtcclxuICAgICAgICAvLyBhIHNoYWxsb3cgY29weSBvZiB0aGUgbmV3VmFsdWUgZnJvbSB3aGVuIHRoZSBsYXN0IGNoYW5nZSBoYXBwZW5lZFxyXG4gICAgICAgIHZhciB2ZXJ5T2xkVmFsdWU7XHJcbiAgICAgICAgLy8gb25seSB0cmFjayB2ZXJ5T2xkVmFsdWUgaWYgdGhlIGxpc3RlbmVyIGlzIGFza2luZyBmb3IgaXRcclxuICAgICAgICB2YXIgdHJhY2tWZXJ5T2xkVmFsdWUgPSAobGlzdGVuZXIubGVuZ3RoID4gMSk7XHJcbiAgICAgICAgdmFyIGNoYW5nZURldGVjdGVkID0gMDtcclxuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0b3IgPSAkcGFyc2Uob2JqLCAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IpO1xyXG4gICAgICAgIHZhciBpbnRlcm5hbEFycmF5ID0gW107XHJcbiAgICAgICAgdmFyIGludGVybmFsT2JqZWN0ID0ge307XHJcbiAgICAgICAgdmFyIGluaXRSdW4gPSB0cnVlO1xyXG4gICAgICAgIHZhciBvbGRMZW5ndGggPSAwO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IoX3ZhbHVlKSB7XHJcbiAgICAgICAgICBuZXdWYWx1ZSA9IF92YWx1ZTtcclxuICAgICAgICAgIHZhciBuZXdMZW5ndGgsIGtleSwgYm90aE5hTiwgbmV3SXRlbSwgb2xkSXRlbTtcclxuXHJcbiAgICAgICAgICAvLyBJZiB0aGUgbmV3IHZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlbiByZXR1cm4gdW5kZWZpbmVkIGFzIHRoZSB3YXRjaCBtYXkgYmUgYSBvbmUtdGltZSB3YXRjaFxyXG4gICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKG5ld1ZhbHVlKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7IC8vIGlmIHByaW1pdGl2ZVxyXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlMaWtlKG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IGludGVybmFsQXJyYXkpIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIHNvbWV0aGluZyB3aGljaCB3YXMgbm90IGFuIGFycmF5IGludG8gYXJyYXkuXHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbEFycmF5O1xyXG4gICAgICAgICAgICAgIG9sZExlbmd0aCA9IG9sZFZhbHVlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gbmV3VmFsdWUubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCAhPT0gbmV3TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgLy8gaWYgbGVuZ3RocyBkbyBub3QgbWF0Y2ggd2UgbmVlZCB0byB0cmlnZ2VyIGNoYW5nZSBub3RpZmljYXRpb25cclxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICAgIG9sZFZhbHVlLmxlbmd0aCA9IG9sZExlbmd0aCA9IG5ld0xlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb3B5IHRoZSBpdGVtcyB0byBvbGRWYWx1ZSBhbmQgbG9vayBmb3IgY2hhbmdlcy5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIG9sZEl0ZW0gPSBvbGRWYWx1ZVtpXTtcclxuICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVbaV07XHJcblxyXG4gICAgICAgICAgICAgIGJvdGhOYU4gPSAob2xkSXRlbSAhPT0gb2xkSXRlbSkgJiYgKG5ld0l0ZW0gIT09IG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZVtpXSA9IG5ld0l0ZW07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IGludGVybmFsT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBvYmplY3QgaW50byBvYmplY3QuXHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbE9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgIG9sZExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb3B5IHRoZSBpdGVtcyB0byBvbGRWYWx1ZSBhbmQgbG9vayBmb3IgY2hhbmdlcy5cclxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZm9yIChrZXkgaW4gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICBpZiAobmV3VmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbmV3TGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgIG9sZEl0ZW0gPSBvbGRWYWx1ZVtrZXldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgYm90aE5hTiA9IChvbGRJdGVtICE9PSBvbGRJdGVtKSAmJiAobmV3SXRlbSAhPT0gbmV3SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlW2tleV0gPSBuZXdJdGVtO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBvbGRMZW5ndGgrKztcclxuICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XHJcbiAgICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvbGRMZW5ndGggPiBuZXdMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAvLyB3ZSB1c2VkIHRvIGhhdmUgbW9yZSBrZXlzLCBuZWVkIHRvIGZpbmQgdGhlbSBhbmQgZGVzdHJveSB0aGVtLlxyXG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XHJcbiAgICAgICAgICAgICAgZm9yIChrZXkgaW4gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbmV3VmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICBvbGRMZW5ndGgtLTtcclxuICAgICAgICAgICAgICAgICAgZGVsZXRlIG9sZFZhbHVlW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gY2hhbmdlRGV0ZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uQWN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGluaXRSdW4pIHtcclxuICAgICAgICAgICAgaW5pdFJ1biA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZSwgbmV3VmFsdWUsIHNlbGYpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIHZlcnlPbGRWYWx1ZSwgc2VsZik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gbWFrZSBhIGNvcHkgZm9yIHRoZSBuZXh0IHRpbWUgYSBjb2xsZWN0aW9uIGlzIGNoYW5nZWRcclxuICAgICAgICAgIGlmICh0cmFja1ZlcnlPbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIC8vcHJpbWl0aXZlXHJcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheUxpa2UobmV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdWYWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlW2ldID0gbmV3VmFsdWVbaV07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBpZiBvYmplY3RcclxuICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWUgPSB7fTtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG5ld1ZhbHVlLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZVtrZXldID0gbmV3VmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLiR3YXRjaChjaGFuZ2VEZXRlY3RvciwgJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3RcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIFByb2Nlc3NlcyBhbGwgb2YgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyc30gb2YgdGhlIGN1cnJlbnQgc2NvcGUgYW5kXHJcbiAgICAgICAqIGl0cyBjaGlsZHJlbi4gQmVjYXVzZSBhIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyfSdzIGxpc3RlbmVyIGNhbiBjaGFuZ2VcclxuICAgICAgICogdGhlIG1vZGVsLCB0aGUgYCRkaWdlc3QoKWAga2VlcHMgY2FsbGluZyB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNoZXJzfVxyXG4gICAgICAgKiB1bnRpbCBubyBtb3JlIGxpc3RlbmVycyBhcmUgZmlyaW5nLiBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgcG9zc2libGUgdG8gZ2V0IGludG8gYW4gaW5maW5pdGVcclxuICAgICAgICogbG9vcC4gVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGAnTWF4aW11bSBpdGVyYXRpb24gbGltaXQgZXhjZWVkZWQuJ2AgaWYgdGhlIG51bWJlciBvZlxyXG4gICAgICAgKiBpdGVyYXRpb25zIGV4Y2VlZHMgMTAuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFVzdWFsbHksIHlvdSBkb24ndCBjYWxsIGAkZGlnZXN0KClgIGRpcmVjdGx5IGluXHJcbiAgICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDb250cm9sbGVyIGNvbnRyb2xsZXJzfSBvciBpblxyXG4gICAgICAgKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXHJcbiAgICAgICAqIEluc3RlYWQsIHlvdSBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHkgJGFwcGx5KCl9ICh0eXBpY2FsbHkgZnJvbSB3aXRoaW5cclxuICAgICAgICogYSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlfSksIHdoaWNoIHdpbGwgZm9yY2UgYSBgJGRpZ2VzdCgpYC5cclxuICAgICAgICpcclxuICAgICAgICogSWYgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQgd2hlbmV2ZXIgYCRkaWdlc3QoKWAgaXMgY2FsbGVkLFxyXG4gICAgICAgKiB5b3UgY2FuIHJlZ2lzdGVyIGEgYHdhdGNoRXhwcmVzc2lvbmAgZnVuY3Rpb24gd2l0aFxyXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9IHdpdGggbm8gYGxpc3RlbmVyYC5cclxuICAgICAgICpcclxuICAgICAgICogSW4gdW5pdCB0ZXN0cywgeW91IG1heSBuZWVkIHRvIGNhbGwgYCRkaWdlc3QoKWAgdG8gc2ltdWxhdGUgdGhlIHNjb3BlIGxpZmUgY3ljbGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICMgRXhhbXBsZVxyXG4gICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAgIHZhciBzY29wZSA9IC4uLjtcclxuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcclxuICAgICAgICAgICBzY29wZS5jb3VudGVyID0gMDtcclxuXHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XHJcbiAgICAgICAgICAgc2NvcGUuJHdhdGNoKCduYW1lJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICBzY29wZS5jb3VudGVyID0gc2NvcGUuY291bnRlciArIDE7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XHJcblxyXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgICAvLyB0aGUgbGlzdGVuZXIgaXMgYWx3YXlzIGNhbGxlZCBkdXJpbmcgdGhlIGZpcnN0ICRkaWdlc3QgbG9vcCBhZnRlciBpdCB3YXMgcmVnaXN0ZXJlZFxyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDEpO1xyXG5cclxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgLy8gYnV0IG5vdyBpdCB3aWxsIG5vdCBiZSBjYWxsZWQgdW5sZXNzIHRoZSB2YWx1ZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XHJcblxyXG4gICAgICAgICAgIHNjb3BlLm5hbWUgPSAnYWRhbSc7XHJcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDIpO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICovXHJcbiAgICAgICRkaWdlc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB3YXRjaCwgdmFsdWUsIGxhc3QsXHJcbiAgICAgICAgICAgIHdhdGNoZXJzLFxyXG4gICAgICAgICAgICBsZW5ndGgsXHJcbiAgICAgICAgICAgIGRpcnR5LCB0dGwgPSBUVEwsXHJcbiAgICAgICAgICAgIG5leHQsIGN1cnJlbnQsIHRhcmdldCA9IHRoaXMsXHJcbiAgICAgICAgICAgIHdhdGNoTG9nID0gW10sXHJcbiAgICAgICAgICAgIGxvZ0lkeCwgbG9nTXNnLCBhc3luY1Rhc2s7XHJcblxyXG4gICAgICAgIGJlZ2luUGhhc2UoJyRkaWdlc3QnKTtcclxuICAgICAgICAvLyBDaGVjayBmb3IgY2hhbmdlcyB0byBicm93c2VyIHVybCB0aGF0IGhhcHBlbmVkIGluIHN5bmMgYmVmb3JlIHRoZSBjYWxsIHRvICRkaWdlc3RcclxuICAgICAgICAkYnJvd3Nlci4kJGNoZWNrVXJsQ2hhbmdlKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzID09PSAkcm9vdFNjb3BlICYmIGFwcGx5QXN5bmNJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgcm9vdCBzY29wZSwgYW5kICRhcHBseUFzeW5jIGhhcyBzY2hlZHVsZWQgYSBkZWZlcnJlZCAkYXBwbHkoKSwgdGhlblxyXG4gICAgICAgICAgLy8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgJGFwcGx5IGFuZCBmbHVzaCB0aGUgcXVldWUgb2YgZXhwcmVzc2lvbnMgdG8gYmUgZXZhbHVhdGVkLlxyXG4gICAgICAgICAgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKGFwcGx5QXN5bmNJZCk7XHJcbiAgICAgICAgICBmbHVzaEFwcGx5QXN5bmMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcclxuXHJcbiAgICAgICAgZG8geyAvLyBcIndoaWxlIGRpcnR5XCIgbG9vcFxyXG4gICAgICAgICAgZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQ7XHJcblxyXG4gICAgICAgICAgd2hpbGUgKGFzeW5jUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgYXN5bmNUYXNrID0gYXN5bmNRdWV1ZS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgIGFzeW5jVGFzay5zY29wZS4kZXZhbChhc3luY1Rhc2suZXhwcmVzc2lvbiwgYXN5bmNUYXNrLmxvY2Fscyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdHJhdmVyc2VTY29wZXNMb29wOlxyXG4gICAgICAgICAgZG8geyAvLyBcInRyYXZlcnNlIHRoZSBzY29wZXNcIiBsb29wXHJcbiAgICAgICAgICAgIGlmICgod2F0Y2hlcnMgPSBjdXJyZW50LiQkd2F0Y2hlcnMpKSB7XHJcbiAgICAgICAgICAgICAgLy8gcHJvY2VzcyBvdXIgd2F0Y2hlc1xyXG4gICAgICAgICAgICAgIGxlbmd0aCA9IHdhdGNoZXJzLmxlbmd0aDtcclxuICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIHdhdGNoID0gd2F0Y2hlcnNbbGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgLy8gTW9zdCBjb21tb24gd2F0Y2hlcyBhcmUgb24gcHJpbWl0aXZlcywgaW4gd2hpY2ggY2FzZSB3ZSBjYW4gc2hvcnRcclxuICAgICAgICAgICAgICAgICAgLy8gY2lyY3VpdCBpdCB3aXRoID09PSBvcGVyYXRvciwgb25seSB3aGVuID09PSBmYWlscyBkbyB3ZSB1c2UgLmVxdWFsc1xyXG4gICAgICAgICAgICAgICAgICBpZiAod2F0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlID0gd2F0Y2guZ2V0KGN1cnJlbnQpKSAhPT0gKGxhc3QgPSB3YXRjaC5sYXN0KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoLmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGVxdWFscyh2YWx1ZSwgbGFzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGxhc3QgPT09ICdudW1iZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBpc05hTih2YWx1ZSkgJiYgaXNOYU4obGFzdCkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSB3YXRjaDtcclxuICAgICAgICAgICAgICAgICAgICAgIHdhdGNoLmxhc3QgPSB3YXRjaC5lcSA/IGNvcHkodmFsdWUsIG51bGwpIDogdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3YXRjaC5mbih2YWx1ZSwgKChsYXN0ID09PSBpbml0V2F0Y2hWYWwpID8gdmFsdWUgOiBsYXN0KSwgY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodHRsIDwgNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dJZHggPSA0IC0gdHRsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhdGNoTG9nW2xvZ0lkeF0pIHdhdGNoTG9nW2xvZ0lkeF0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hMb2dbbG9nSWR4XS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGlzRnVuY3Rpb24od2F0Y2guZXhwKSA/ICdmbjogJyArICh3YXRjaC5leHAubmFtZSB8fCB3YXRjaC5leHAudG9TdHJpbmcoKSkgOiB3YXRjaC5leHAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsOiB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWw6IGxhc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3YXRjaCA9PT0gbGFzdERpcnR5V2F0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBtb3N0IHJlY2VudGx5IGRpcnR5IHdhdGNoZXIgaXMgbm93IGNsZWFuLCBzaG9ydCBjaXJjdWl0IHNpbmNlIHRoZSByZW1haW5pbmcgd2F0Y2hlcnNcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgYWxyZWFkeSBiZWVuIHRlc3RlZC5cclxuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICBicmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSW5zYW5pdHkgV2FybmluZzogc2NvcGUgZGVwdGgtZmlyc3QgdHJhdmVyc2FsXHJcbiAgICAgICAgICAgIC8vIHllcywgdGhpcyBjb2RlIGlzIGEgYml0IGNyYXp5LCBidXQgaXQgd29ya3MgYW5kIHdlIGhhdmUgdGVzdHMgdG8gcHJvdmUgaXQhXHJcbiAgICAgICAgICAgIC8vIHRoaXMgcGllY2Ugc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSB0cmF2ZXJzYWwgaW4gJGJyb2FkY2FzdFxyXG4gICAgICAgICAgICBpZiAoIShuZXh0ID0gKGN1cnJlbnQuJCRjaGlsZEhlYWQgfHxcclxuICAgICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XHJcbiAgICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IHRhcmdldCAmJiAhKG5leHQgPSBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC4kcGFyZW50O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBuZXh0KSk7XHJcblxyXG4gICAgICAgICAgLy8gYGJyZWFrIHRyYXZlcnNlU2NvcGVzTG9vcDtgIHRha2VzIHVzIHRvIGhlcmVcclxuXHJcbiAgICAgICAgICBpZiAoKGRpcnR5IHx8IGFzeW5jUXVldWUubGVuZ3RoKSAmJiAhKHR0bC0tKSkge1xyXG4gICAgICAgICAgICBjbGVhclBoYXNlKCk7XHJcbiAgICAgICAgICAgIHRocm93ICRyb290U2NvcGVNaW5FcnIoJ2luZmRpZycsXHJcbiAgICAgICAgICAgICAgICAnezB9ICRkaWdlc3QoKSBpdGVyYXRpb25zIHJlYWNoZWQuIEFib3J0aW5nIVxcbicgK1xyXG4gICAgICAgICAgICAgICAgJ1dhdGNoZXJzIGZpcmVkIGluIHRoZSBsYXN0IDUgaXRlcmF0aW9uczogezF9JyxcclxuICAgICAgICAgICAgICAgIFRUTCwgd2F0Y2hMb2cpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IHdoaWxlIChkaXJ0eSB8fCBhc3luY1F1ZXVlLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGNsZWFyUGhhc2UoKTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHBvc3REaWdlc3RRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZS5zaGlmdCgpKCk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIGV2ZW50XHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3lcclxuICAgICAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gc2NvcGUgYmVpbmcgZGVzdHJveWVkXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBCcm9hZGNhc3RlZCB3aGVuIGEgc2NvcGUgYW5kIGl0cyBjaGlsZHJlbiBhcmUgYmVpbmcgZGVzdHJveWVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xyXG4gICAgICAgKiBjbGVhbiB1cCBET00gYmluZGluZ3MgYmVmb3JlIGFuIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00uXHJcbiAgICAgICAqL1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveVxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogUmVtb3ZlcyB0aGUgY3VycmVudCBzY29wZSAoYW5kIGFsbCBvZiBpdHMgY2hpbGRyZW4pIGZyb20gdGhlIHBhcmVudCBzY29wZS4gUmVtb3ZhbCBpbXBsaWVzXHJcbiAgICAgICAqIHRoYXQgY2FsbHMgdG8ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IHdpbGwgbm8gbG9uZ2VyXHJcbiAgICAgICAqIHByb3BhZ2F0ZSB0byB0aGUgY3VycmVudCBzY29wZSBhbmQgaXRzIGNoaWxkcmVuLiBSZW1vdmFsIGFsc28gaW1wbGllcyB0aGF0IHRoZSBjdXJyZW50XHJcbiAgICAgICAqIHNjb3BlIGlzIGVsaWdpYmxlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIFRoZSBgJGRlc3Ryb3koKWAgaXMgdXN1YWxseSB1c2VkIGJ5IGRpcmVjdGl2ZXMgc3VjaCBhc1xyXG4gICAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IG5nUmVwZWF0fSBmb3IgbWFuYWdpbmcgdGhlXHJcbiAgICAgICAqIHVucm9sbGluZyBvZiB0aGUgbG9vcC5cclxuICAgICAgICpcclxuICAgICAgICogSnVzdCBiZWZvcmUgYSBzY29wZSBpcyBkZXN0cm95ZWQsIGEgYCRkZXN0cm95YCBldmVudCBpcyBicm9hZGNhc3RlZCBvbiB0aGlzIHNjb3BlLlxyXG4gICAgICAgKiBBcHBsaWNhdGlvbiBjb2RlIGNhbiByZWdpc3RlciBhIGAkZGVzdHJveWAgZXZlbnQgaGFuZGxlciB0aGF0IHdpbGwgZ2l2ZSBpdCBhIGNoYW5jZSB0b1xyXG4gICAgICAgKiBwZXJmb3JtIGFueSBuZWNlc3NhcnkgY2xlYW51cC5cclxuICAgICAgICpcclxuICAgICAgICogTm90ZSB0aGF0LCBpbiBBbmd1bGFySlMsIHRoZXJlIGlzIGFsc28gYSBgJGRlc3Ryb3lgIGpRdWVyeSBldmVudCwgd2hpY2ggY2FuIGJlIHVzZWQgdG9cclxuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxyXG4gICAgICAgKi9cclxuICAgICAgJGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHdlIGNhbid0IGRlc3Ryb3kgdGhlIHJvb3Qgc2NvcGUgb3IgYSBzY29wZSB0aGF0IGhhcyBiZWVuIGFscmVhZHkgZGVzdHJveWVkXHJcbiAgICAgICAgaWYgKHRoaXMuJCRkZXN0cm95ZWQpIHJldHVybjtcclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xyXG5cclxuICAgICAgICB0aGlzLiRicm9hZGNhc3QoJyRkZXN0cm95Jyk7XHJcbiAgICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMgPT09ICRyb290U2NvcGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgZXZlbnROYW1lIGluIHRoaXMuJCRsaXN0ZW5lckNvdW50KSB7XHJcbiAgICAgICAgICBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KHRoaXMsIHRoaXMuJCRsaXN0ZW5lckNvdW50W2V2ZW50TmFtZV0sIGV2ZW50TmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZXZlciBhbGwgdGhlIHJlZmVyZW5jZXMgdG8gcGFyZW50IHNjb3BlcyAoYWZ0ZXIgdGhpcyBjbGVhbnVwLCB0aGUgY3VycmVudCBzY29wZSBzaG91bGRcclxuICAgICAgICAvLyBub3QgYmUgcmV0YWluZWQgYnkgYW55IG9mIG91ciByZWZlcmVuY2VzIGFuZCBzaG91bGQgYmUgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbilcclxuICAgICAgICBpZiAocGFyZW50LiQkY2hpbGRIZWFkID09IHRoaXMpIHBhcmVudC4kJGNoaWxkSGVhZCA9IHRoaXMuJCRuZXh0U2libGluZztcclxuICAgICAgICBpZiAocGFyZW50LiQkY2hpbGRUYWlsID09IHRoaXMpIHBhcmVudC4kJGNoaWxkVGFpbCA9IHRoaXMuJCRwcmV2U2libGluZztcclxuICAgICAgICBpZiAodGhpcy4kJHByZXZTaWJsaW5nKSB0aGlzLiQkcHJldlNpYmxpbmcuJCRuZXh0U2libGluZyA9IHRoaXMuJCRuZXh0U2libGluZztcclxuICAgICAgICBpZiAodGhpcy4kJG5leHRTaWJsaW5nKSB0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZztcclxuXHJcbiAgICAgICAgLy8gRGlzYWJsZSBsaXN0ZW5lcnMsIHdhdGNoZXJzIGFuZCBhcHBseS9kaWdlc3QgbWV0aG9kc1xyXG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSB0aGlzLiRkaWdlc3QgPSB0aGlzLiRhcHBseSA9IHRoaXMuJGV2YWxBc3luYyA9IHRoaXMuJGFwcGx5QXN5bmMgPSBub29wO1xyXG4gICAgICAgIHRoaXMuJG9uID0gdGhpcy4kd2F0Y2ggPSB0aGlzLiR3YXRjaEdyb3VwID0gZnVuY3Rpb24oKSB7IHJldHVybiBub29wOyB9O1xyXG4gICAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQWxsIG9mIHRoZSBjb2RlIGJlbG93IGlzIGJvZ3VzIGNvZGUgdGhhdCB3b3JrcyBhcm91bmQgVjgncyBtZW1vcnkgbGVhayB2aWEgb3B0aW1pemVkIGNvZGVcclxuICAgICAgICAvLyBhbmQgaW5saW5lIGNhY2hlcy5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIHNlZTpcclxuICAgICAgICAvLyAtIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMDczI2MyNlxyXG4gICAgICAgIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNjc5NCNpc3N1ZWNvbW1lbnQtMzg2NDg5MDlcclxuICAgICAgICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzEzMTMjaXNzdWVjb21tZW50LTEwMzc4NDUxXHJcblxyXG4gICAgICAgIHRoaXMuJHBhcmVudCA9IHRoaXMuJCRuZXh0U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZyA9IHRoaXMuJCRjaGlsZEhlYWQgPVxyXG4gICAgICAgICAgICB0aGlzLiQkY2hpbGRUYWlsID0gdGhpcy4kcm9vdCA9IHRoaXMuJCR3YXRjaGVycyA9IG51bGw7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRldmFsXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBFeGVjdXRlcyB0aGUgYGV4cHJlc3Npb25gIG9uIHRoZSBjdXJyZW50IHNjb3BlIGFuZCByZXR1cm5zIHRoZSByZXN1bHQuIEFueSBleGNlcHRpb25zIGluXHJcbiAgICAgICAqIHRoZSBleHByZXNzaW9uIGFyZSBwcm9wYWdhdGVkICh1bmNhdWdodCkuIFRoaXMgaXMgdXNlZnVsIHdoZW4gZXZhbHVhdGluZyBBbmd1bGFyXHJcbiAgICAgICAqIGV4cHJlc3Npb25zLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAjIEV4YW1wbGVcclxuICAgICAgICogYGBganNcclxuICAgICAgICAgICB2YXIgc2NvcGUgPSBuZy4kcm9vdFNjb3BlLlNjb3BlKCk7XHJcbiAgICAgICAgICAgc2NvcGUuYSA9IDE7XHJcbiAgICAgICAgICAgc2NvcGUuYiA9IDI7XHJcblxyXG4gICAgICAgICAgIGV4cGVjdChzY29wZS4kZXZhbCgnYStiJykpLnRvRXF1YWwoMyk7XHJcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLiRldmFsKGZ1bmN0aW9uKHNjb3BlKXsgcmV0dXJuIHNjb3BlLmEgKyBzY29wZS5iOyB9KSkudG9FcXVhbCgzKTtcclxuICAgICAgICogYGBgXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cHJlc3Npb24gQW4gYW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluICB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cclxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHsob2JqZWN0KT19IGxvY2FscyBMb2NhbCB2YXJpYWJsZXMgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluIHNjb3BlLlxyXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uLlxyXG4gICAgICAgKi9cclxuICAgICAgJGV2YWw6IGZ1bmN0aW9uKGV4cHIsIGxvY2Fscykge1xyXG4gICAgICAgIHJldHVybiAkcGFyc2UoZXhwcikodGhpcywgbG9jYWxzKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luY1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogRXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gb24gdGhlIGN1cnJlbnQgc2NvcGUgYXQgYSBsYXRlciBwb2ludCBpbiB0aW1lLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgYCRldmFsQXN5bmNgIG1ha2VzIG5vIGd1YXJhbnRlZXMgYXMgdG8gd2hlbiB0aGUgYGV4cHJlc3Npb25gIHdpbGwgYmUgZXhlY3V0ZWQsIG9ubHlcclxuICAgICAgICogdGhhdDpcclxuICAgICAgICpcclxuICAgICAgICogICAtIGl0IHdpbGwgZXhlY3V0ZSBhZnRlciB0aGUgZnVuY3Rpb24gdGhhdCBzY2hlZHVsZWQgdGhlIGV2YWx1YXRpb24gKHByZWZlcmFibHkgYmVmb3JlIERPTVxyXG4gICAgICAgKiAgICAgcmVuZGVyaW5nKS5cclxuICAgICAgICogICAtIGF0IGxlYXN0IG9uZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QgY3ljbGV9IHdpbGwgYmUgcGVyZm9ybWVkIGFmdGVyXHJcbiAgICAgICAqICAgICBgZXhwcmVzc2lvbmAgZXhlY3V0aW9uLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBbnkgZXhjZXB0aW9ucyBmcm9tIHRoZSBleGVjdXRpb24gb2YgdGhlIGV4cHJlc3Npb24gYXJlIGZvcndhcmRlZCB0byB0aGVcclxuICAgICAgICoge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBfX05vdGU6X18gaWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGAkZGlnZXN0YCBjeWNsZSwgYSBuZXcgYCRkaWdlc3RgIGN5Y2xlXHJcbiAgICAgICAqIHdpbGwgYmUgc2NoZWR1bGVkLiBIb3dldmVyLCBpdCBpcyBlbmNvdXJhZ2VkIHRvIGFsd2F5cyBjYWxsIGNvZGUgdGhhdCBjaGFuZ2VzIHRoZSBtb2RlbFxyXG4gICAgICAgKiBmcm9tIHdpdGhpbiBhbiBgJGFwcGx5YCBjYWxsLiBUaGF0IGluY2x1ZGVzIGNvZGUgZXZhbHVhdGVkIHZpYSBgJGV2YWxBc3luY2AuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cHJlc3Npb24gQW4gYW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxyXG4gICAgICAgKiAgICAtIGBmdW5jdGlvbihzY29wZSlgOiBleGVjdXRlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXHJcbiAgICAgICAqL1xyXG4gICAgICAkZXZhbEFzeW5jOiBmdW5jdGlvbihleHByLCBsb2NhbHMpIHtcclxuICAgICAgICAvLyBpZiB3ZSBhcmUgb3V0c2lkZSBvZiBhbiAkZGlnZXN0IGxvb3AgYW5kIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgd2UgYXJlIHNjaGVkdWxpbmcgYXN5bmNcclxuICAgICAgICAvLyB0YXNrIGFsc28gc2NoZWR1bGUgYXN5bmMgYXV0by1mbHVzaFxyXG4gICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlICYmICFhc3luY1F1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChhc3luY1F1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFzeW5jUXVldWUucHVzaCh7c2NvcGU6IHRoaXMsIGV4cHJlc3Npb246IGV4cHIsIGxvY2FsczogbG9jYWxzfSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAkJHBvc3REaWdlc3Q6IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgcG9zdERpZ2VzdFF1ZXVlLnB1c2goZm4pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkYXBwbHlcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIGAkYXBwbHkoKWAgaXMgdXNlZCB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gYW5ndWxhciBmcm9tIG91dHNpZGUgb2YgdGhlIGFuZ3VsYXJcclxuICAgICAgICogZnJhbWV3b3JrLiAoRm9yIGV4YW1wbGUgZnJvbSBicm93c2VyIERPTSBldmVudHMsIHNldFRpbWVvdXQsIFhIUiBvciB0aGlyZCBwYXJ0eSBsaWJyYXJpZXMpLlxyXG4gICAgICAgKiBCZWNhdXNlIHdlIGFyZSBjYWxsaW5nIGludG8gdGhlIGFuZ3VsYXIgZnJhbWV3b3JrIHdlIG5lZWQgdG8gcGVyZm9ybSBwcm9wZXIgc2NvcGUgbGlmZVxyXG4gICAgICAgKiBjeWNsZSBvZiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgZXhjZXB0aW9uIGhhbmRsaW5nfSxcclxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCBleGVjdXRpbmcgd2F0Y2hlc30uXHJcbiAgICAgICAqXHJcbiAgICAgICAqICMjIExpZmUgY3ljbGVcclxuICAgICAgICpcclxuICAgICAgICogIyBQc2V1ZG8tQ29kZSBvZiBgJGFwcGx5KClgXHJcbiAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICAgZnVuY3Rpb24gJGFwcGx5KGV4cHIpIHtcclxuICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAkZXZhbChleHByKTtcclxuICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAkcm9vdC4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgKiBgYGBcclxuICAgICAgICpcclxuICAgICAgICpcclxuICAgICAgICogU2NvcGUncyBgJGFwcGx5KClgIG1ldGhvZCB0cmFuc2l0aW9ucyB0aHJvdWdoIHRoZSBmb2xsb3dpbmcgc3RhZ2VzOlxyXG4gICAgICAgKlxyXG4gICAgICAgKiAxLiBUaGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgZXhlY3V0ZWQgdXNpbmcgdGhlXHJcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRldmFsICRldmFsKCl9IG1ldGhvZC5cclxuICAgICAgICogMi4gQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXHJcbiAgICAgICAqICAgIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cclxuICAgICAgICogMy4gVGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaH0gbGlzdGVuZXJzIGFyZSBmaXJlZCBpbW1lZGlhdGVseSBhZnRlciB0aGVcclxuICAgICAgICogICAgZXhwcmVzc2lvbiB3YXMgZXhlY3V0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBtZXRob2QuXHJcbiAgICAgICAqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cCBBbiBhbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uXHJcbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMgeyp9IFRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyB0aGUgZXhwcmVzc2lvbi5cclxuICAgICAgICovXHJcbiAgICAgICRhcHBseTogZnVuY3Rpb24oZXhwcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBiZWdpblBoYXNlKCckYXBwbHknKTtcclxuICAgICAgICAgIHJldHVybiB0aGlzLiRldmFsKGV4cHIpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBjbGVhclBoYXNlKCk7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luY1xyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogU2NoZWR1bGUgdGhlIGludm9jYXRpb24gb2YgJGFwcGx5IHRvIG9jY3VyIGF0IGEgbGF0ZXIgdGltZS4gVGhlIGFjdHVhbCB0aW1lIGRpZmZlcmVuY2VcclxuICAgICAgICogdmFyaWVzIGFjcm9zcyBicm93c2VycywgYnV0IGlzIHR5cGljYWxseSBhcm91bmQgfjEwIG1pbGxpc2Vjb25kcy5cclxuICAgICAgICpcclxuICAgICAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBxdWV1ZSB1cCBtdWx0aXBsZSBleHByZXNzaW9ucyB3aGljaCBuZWVkIHRvIGJlIGV2YWx1YXRlZCBpbiB0aGUgc2FtZVxyXG4gICAgICAgKiBkaWdlc3QuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cCBBbiBhbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uXHJcbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cclxuICAgICAgICovXHJcbiAgICAgICRhcHBseUFzeW5jOiBmdW5jdGlvbihleHByKSB7XHJcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcclxuICAgICAgICBleHByICYmIGFwcGx5QXN5bmNRdWV1ZS5wdXNoKCRhcHBseUFzeW5jRXhwcmVzc2lvbik7XHJcbiAgICAgICAgc2NoZWR1bGVBcHBseUFzeW5jKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uICRhcHBseUFzeW5jRXhwcmVzc2lvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiRldmFsKGV4cHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJG9uXHJcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgKiBMaXN0ZW5zIG9uIGV2ZW50cyBvZiBhIGdpdmVuIHR5cGUuIFNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZW1pdCAkZW1pdH0gZm9yXHJcbiAgICAgICAqIGRpc2N1c3Npb24gb2YgZXZlbnQgbGlmZSBjeWNsZS5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIGZvcm1hdCBpczogYGZ1bmN0aW9uKGV2ZW50LCBhcmdzLi4uKWAuIFRoZSBgZXZlbnRgIG9iamVjdFxyXG4gICAgICAgKiBwYXNzZWQgaW50byB0aGUgbGlzdGVuZXIgaGFzIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlczpcclxuICAgICAgICpcclxuICAgICAgICogICAtIGB0YXJnZXRTY29wZWAgLSBge1Njb3BlfWA6IHRoZSBzY29wZSBvbiB3aGljaCB0aGUgZXZlbnQgd2FzIGAkZW1pdGAtZWQgb3JcclxuICAgICAgICogICAgIGAkYnJvYWRjYXN0YC1lZC5cclxuICAgICAgICogICAtIGBjdXJyZW50U2NvcGVgIC0gYHtTY29wZX1gOiB0aGUgc2NvcGUgdGhhdCBpcyBjdXJyZW50bHkgaGFuZGxpbmcgdGhlIGV2ZW50LiBPbmNlIHRoZVxyXG4gICAgICAgKiAgICAgZXZlbnQgcHJvcGFnYXRlcyB0aHJvdWdoIHRoZSBzY29wZSBoaWVyYXJjaHksIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIG51bGwuXHJcbiAgICAgICAqICAgLSBgbmFtZWAgLSBge3N0cmluZ31gOiBuYW1lIG9mIHRoZSBldmVudC5cclxuICAgICAgICogICAtIGBzdG9wUHJvcGFnYXRpb25gIC0gYHtmdW5jdGlvbj19YDogY2FsbGluZyBgc3RvcFByb3BhZ2F0aW9uYCBmdW5jdGlvbiB3aWxsIGNhbmNlbFxyXG4gICAgICAgKiAgICAgZnVydGhlciBldmVudCBwcm9wYWdhdGlvbiAoYXZhaWxhYmxlIG9ubHkgZm9yIGV2ZW50cyB0aGF0IHdlcmUgYCRlbWl0YC1lZCkuXHJcbiAgICAgICAqICAgLSBgcHJldmVudERlZmF1bHRgIC0gYHtmdW5jdGlvbn1gOiBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgc2V0cyBgZGVmYXVsdFByZXZlbnRlZGAgZmxhZ1xyXG4gICAgICAgKiAgICAgdG8gdHJ1ZS5cclxuICAgICAgICogICAtIGBkZWZhdWx0UHJldmVudGVkYCAtIGB7Ym9vbGVhbn1gOiB0cnVlIGlmIGBwcmV2ZW50RGVmYXVsdGAgd2FzIGNhbGxlZC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBsaXN0ZW4gb24uXHJcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQsIC4uLmFyZ3MpfSBsaXN0ZW5lciBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuXHJcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXHJcbiAgICAgICAqL1xyXG4gICAgICAkb246IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIG5hbWVkTGlzdGVuZXJzID0gdGhpcy4kJGxpc3RlbmVyc1tuYW1lXTtcclxuICAgICAgICBpZiAoIW5hbWVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICB0aGlzLiQkbGlzdGVuZXJzW25hbWVdID0gbmFtZWRMaXN0ZW5lcnMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmFtZWRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcztcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICBpZiAoIWN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKys7XHJcbiAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBpbmRleE9mTGlzdGVuZXIgPSBuYW1lZExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcclxuICAgICAgICAgIGlmIChpbmRleE9mTGlzdGVuZXIgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzW2luZGV4T2ZMaXN0ZW5lcl0gPSBudWxsO1xyXG4gICAgICAgICAgICBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KHNlbGYsIDEsIG5hbWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZW1pdFxyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBgbmFtZWAgdXB3YXJkcyB0aHJvdWdoIHRoZSBzY29wZSBoaWVyYXJjaHkgbm90aWZ5aW5nIHRoZVxyXG4gICAgICAgKiByZWdpc3RlcmVkIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0gbGlzdGVuZXJzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBUaGUgZXZlbnQgbGlmZSBjeWNsZSBzdGFydHMgYXQgdGhlIHNjb3BlIG9uIHdoaWNoIGAkZW1pdGAgd2FzIGNhbGxlZC4gQWxsXHJcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IGxpc3RlbmluZyBmb3IgYG5hbWVgIGV2ZW50IG9uIHRoaXMgc2NvcGUgZ2V0XHJcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgdHJhdmVyc2VzIHVwd2FyZHMgdG93YXJkIHRoZSByb290IHNjb3BlIGFuZCBjYWxscyBhbGxcclxuICAgICAgICogcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgYWxvbmcgdGhlIHdheS4gVGhlIGV2ZW50IHdpbGwgc3RvcCBwcm9wYWdhdGluZyBpZiBvbmUgb2YgdGhlIGxpc3RlbmVyc1xyXG4gICAgICAgKiBjYW5jZWxzIGl0LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBbnkgZXhjZXB0aW9uIGVtaXR0ZWQgZnJvbSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gd2lsbCBiZSBwYXNzZWRcclxuICAgICAgICogb250byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGVtaXQuXHJcbiAgICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyBPcHRpb25hbCBvbmUgb3IgbW9yZSBhcmd1bWVudHMgd2hpY2ggd2lsbCBiZSBwYXNzZWQgb250byB0aGUgZXZlbnQgbGlzdGVuZXJzLlxyXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEV2ZW50IG9iamVjdCAoc2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0pLlxyXG4gICAgICAgKi9cclxuICAgICAgJGVtaXQ6IGZ1bmN0aW9uKG5hbWUsIGFyZ3MpIHtcclxuICAgICAgICB2YXIgZW1wdHkgPSBbXSxcclxuICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnMsXHJcbiAgICAgICAgICAgIHNjb3BlID0gdGhpcyxcclxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHNjb3BlLFxyXG4gICAgICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7c3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTt9LFxyXG4gICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZGVmYXVsdFByZXZlbnRlZDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGlzdGVuZXJBcmdzID0gY29uY2F0KFtldmVudF0sIGFyZ3VtZW50cywgMSksXHJcbiAgICAgICAgICAgIGksIGxlbmd0aDtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgbmFtZWRMaXN0ZW5lcnMgPSBzY29wZS4kJGxpc3RlbmVyc1tuYW1lXSB8fCBlbXB0eTtcclxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gbmFtZWRMaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcclxuICAgICAgICAgICAgaWYgKCFuYW1lZExpc3RlbmVyc1tpXSkge1xyXG4gICAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgICAgbGVuZ3RoLS07XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAvL2FsbG93IGFsbCBsaXN0ZW5lcnMgYXR0YWNoZWQgdG8gdGhlIGN1cnJlbnQgc2NvcGUgdG8gcnVuXHJcbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvL2lmIGFueSBsaXN0ZW5lciBvbiB0aGUgY3VycmVudCBzY29wZSBzdG9wcyBwcm9wYWdhdGlvbiwgcHJldmVudCBidWJibGluZ1xyXG4gICAgICAgICAgaWYgKHN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvL3RyYXZlcnNlIHVwd2FyZHNcclxuICAgICAgICAgIHNjb3BlID0gc2NvcGUuJHBhcmVudDtcclxuICAgICAgICB9IHdoaWxlIChzY29wZSk7XHJcblxyXG4gICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiBldmVudDtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRicm9hZGNhc3RcclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cclxuICAgICAgICpcclxuICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYG5hbWVgIGRvd253YXJkcyB0byBhbGwgY2hpbGQgc2NvcGVzIChhbmQgdGhlaXIgY2hpbGRyZW4pIG5vdGlmeWluZyB0aGVcclxuICAgICAgICogcmVnaXN0ZXJlZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259IGxpc3RlbmVycy5cclxuICAgICAgICpcclxuICAgICAgICogVGhlIGV2ZW50IGxpZmUgY3ljbGUgc3RhcnRzIGF0IHRoZSBzY29wZSBvbiB3aGljaCBgJGJyb2FkY2FzdGAgd2FzIGNhbGxlZC4gQWxsXHJcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IGxpc3RlbmluZyBmb3IgYG5hbWVgIGV2ZW50IG9uIHRoaXMgc2NvcGUgZ2V0XHJcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgcHJvcGFnYXRlcyB0byBhbGwgZGlyZWN0IGFuZCBpbmRpcmVjdCBzY29wZXMgb2YgdGhlIGN1cnJlbnRcclxuICAgICAgICogc2NvcGUgYW5kIGNhbGxzIGFsbCByZWdpc3RlcmVkIGxpc3RlbmVycyBhbG9uZyB0aGUgd2F5LiBUaGUgZXZlbnQgY2Fubm90IGJlIGNhbmNlbGVkLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBBbnkgZXhjZXB0aW9uIGVtaXR0ZWQgZnJvbSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gd2lsbCBiZSBwYXNzZWRcclxuICAgICAgICogb250byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGJyb2FkY2FzdC5cclxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXHJcbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gRXZlbnQgb2JqZWN0LCBzZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufVxyXG4gICAgICAgKi9cclxuICAgICAgJGJyb2FkY2FzdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLFxyXG4gICAgICAgICAgICBjdXJyZW50ID0gdGFyZ2V0LFxyXG4gICAgICAgICAgICBuZXh0ID0gdGFyZ2V0LFxyXG4gICAgICAgICAgICBldmVudCA9IHtcclxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgIHRhcmdldFNjb3BlOiB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoIXRhcmdldC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHJldHVybiBldmVudDtcclxuXHJcbiAgICAgICAgdmFyIGxpc3RlbmVyQXJncyA9IGNvbmNhdChbZXZlbnRdLCBhcmd1bWVudHMsIDEpLFxyXG4gICAgICAgICAgICBsaXN0ZW5lcnMsIGksIGxlbmd0aDtcclxuXHJcbiAgICAgICAgLy9kb3duIHdoaWxlIHlvdSBjYW4sIHRoZW4gdXAgYW5kIG5leHQgc2libGluZyBvciB1cCBhbmQgbmV4dCBzaWJsaW5nIHVudGlsIGJhY2sgYXQgcm9vdFxyXG4gICAgICAgIHdoaWxlICgoY3VycmVudCA9IG5leHQpKSB7XHJcbiAgICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBjdXJyZW50O1xyXG4gICAgICAgICAgbGlzdGVuZXJzID0gY3VycmVudC4kJGxpc3RlbmVyc1tuYW1lXSB8fCBbXTtcclxuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBpZiBsaXN0ZW5lcnMgd2VyZSBkZXJlZ2lzdGVyZWQsIGRlZnJhZ21lbnQgdGhlIGFycmF5XHJcbiAgICAgICAgICAgIGlmICghbGlzdGVuZXJzW2ldKSB7XHJcbiAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgICAgbGVuZ3RoLS07XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KG51bGwsIGxpc3RlbmVyQXJncyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEluc2FuaXR5IFdhcm5pbmc6IHNjb3BlIGRlcHRoLWZpcnN0IHRyYXZlcnNhbFxyXG4gICAgICAgICAgLy8geWVzLCB0aGlzIGNvZGUgaXMgYSBiaXQgY3JhenksIGJ1dCBpdCB3b3JrcyBhbmQgd2UgaGF2ZSB0ZXN0cyB0byBwcm92ZSBpdCFcclxuICAgICAgICAgIC8vIHRoaXMgcGllY2Ugc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSB0cmF2ZXJzYWwgaW4gJGRpZ2VzdFxyXG4gICAgICAgICAgLy8gKHRob3VnaCBpdCBkaWZmZXJzIGR1ZSB0byBoYXZpbmcgdGhlIGV4dHJhIGNoZWNrIGZvciAkJGxpc3RlbmVyQ291bnQpXHJcbiAgICAgICAgICBpZiAoIShuZXh0ID0gKChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSAmJiBjdXJyZW50LiQkY2hpbGRIZWFkKSB8fFxyXG4gICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgIShuZXh0ID0gY3VycmVudC4kJG5leHRTaWJsaW5nKSkge1xyXG4gICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciAkcm9vdFNjb3BlID0gbmV3IFNjb3BlKCk7XHJcblxyXG4gICAgLy9UaGUgaW50ZXJuYWwgcXVldWVzLiBFeHBvc2UgdGhlbSBvbiB0aGUgJHJvb3RTY29wZSBmb3IgZGVidWdnaW5nL3Rlc3RpbmcgcHVycG9zZXMuXHJcbiAgICB2YXIgYXN5bmNRdWV1ZSA9ICRyb290U2NvcGUuJCRhc3luY1F1ZXVlID0gW107XHJcbiAgICB2YXIgcG9zdERpZ2VzdFF1ZXVlID0gJHJvb3RTY29wZS4kJHBvc3REaWdlc3RRdWV1ZSA9IFtdO1xyXG4gICAgdmFyIGFwcGx5QXN5bmNRdWV1ZSA9ICRyb290U2NvcGUuJCRhcHBseUFzeW5jUXVldWUgPSBbXTtcclxuXHJcbiAgICByZXR1cm4gJHJvb3RTY29wZTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYmVnaW5QaGFzZShwaGFzZSkge1xyXG4gICAgICBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XHJcbiAgICAgICAgdGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5wcm9nJywgJ3swfSBhbHJlYWR5IGluIHByb2dyZXNzJywgJHJvb3RTY29wZS4kJHBoYXNlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gcGhhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xlYXJQaGFzZSgpIHtcclxuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZGVjcmVtZW50TGlzdGVuZXJDb3VudChjdXJyZW50LCBjb3VudCwgbmFtZSkge1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gLT0gY291bnQ7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSA9PT0gMCkge1xyXG4gICAgICAgICAgZGVsZXRlIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHVzZWQgYXMgYW4gaW5pdGlhbCB2YWx1ZSBmb3Igd2F0Y2hlcnMuXHJcbiAgICAgKiBiZWNhdXNlIGl0J3MgdW5pcXVlIHdlIGNhbiBlYXNpbHkgdGVsbCBpdCBhcGFydCBmcm9tIG90aGVyIHZhbHVlc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpbml0V2F0Y2hWYWwoKSB7fVxyXG5cclxuICAgIGZ1bmN0aW9uIGZsdXNoQXBwbHlBc3luYygpIHtcclxuICAgICAgd2hpbGUgKGFwcGx5QXN5bmNRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXBwbHlBc3luY1F1ZXVlLnNoaWZ0KCkoKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgYXBwbHlBc3luY0lkID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY2hlZHVsZUFwcGx5QXN5bmMoKSB7XHJcbiAgICAgIGlmIChhcHBseUFzeW5jSWQgPT09IG51bGwpIHtcclxuICAgICAgICBhcHBseUFzeW5jSWQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZsdXNoQXBwbHlBc3luYyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBQcml2YXRlIHNlcnZpY2UgdG8gc2FuaXRpemUgdXJpcyBmb3IgbGlua3MgYW5kIGltYWdlcy4gVXNlZCBieSAkY29tcGlsZSBhbmQgJHNhbml0aXplLlxyXG4gKi9cclxuZnVuY3Rpb24gJCRTYW5pdGl6ZVVyaVByb3ZpZGVyKCkge1xyXG4gIHZhciBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IC9eXFxzKihodHRwcz98ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxcclxuICAgIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IC9eXFxzKigoaHR0cHM/fGZ0cHxmaWxlfGJsb2IpOnxkYXRhOmltYWdlXFwvKS87XHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcclxuICAgKiB1cmxzIGR1cmluZyBhW2hyZWZdIHNhbml0aXphdGlvbi5cclxuICAgKlxyXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnQgWFNTIGF0dGFja3MgdmlhIGh0bWwgbGlua3MuXHJcbiAgICpcclxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGFbaHJlZl0gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xyXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGBcclxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcclxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXHJcbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxyXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cclxuICAgKi9cclxuICB0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XHJcbiAgICBpZiAoaXNEZWZpbmVkKHJlZ2V4cCkpIHtcclxuICAgICAgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSByZWdleHA7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXHJcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxyXG4gICAqXHJcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cclxuICAgKlxyXG4gICAqIEFueSB1cmwgYWJvdXQgdG8gYmUgYXNzaWduZWQgdG8gaW1nW3NyY10gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xyXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXHJcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXHJcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxyXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgdGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSBmdW5jdGlvbihyZWdleHApIHtcclxuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xyXG4gICAgICBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSByZWdleHA7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdDtcclxuICB9O1xyXG5cclxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBzYW5pdGl6ZVVyaSh1cmksIGlzSW1hZ2UpIHtcclxuICAgICAgdmFyIHJlZ2V4ID0gaXNJbWFnZSA/IGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA6IGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O1xyXG4gICAgICB2YXIgbm9ybWFsaXplZFZhbDtcclxuICAgICAgbm9ybWFsaXplZFZhbCA9IHVybFJlc29sdmUodXJpKS5ocmVmO1xyXG4gICAgICBpZiAobm9ybWFsaXplZFZhbCAhPT0gJycgJiYgIW5vcm1hbGl6ZWRWYWwubWF0Y2gocmVnZXgpKSB7XHJcbiAgICAgICAgcmV0dXJuICd1bnNhZmU6JyArIG5vcm1hbGl6ZWRWYWw7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVyaTtcclxuICAgIH07XHJcbiAgfTtcclxufVxyXG5cclxudmFyICRzY2VNaW5FcnIgPSBtaW5FcnIoJyRzY2UnKTtcclxuXHJcbnZhciBTQ0VfQ09OVEVYVFMgPSB7XHJcbiAgSFRNTDogJ2h0bWwnLFxyXG4gIENTUzogJ2NzcycsXHJcbiAgVVJMOiAndXJsJyxcclxuICAvLyBSRVNPVVJDRV9VUkwgaXMgYSBzdWJ0eXBlIG9mIFVSTCB1c2VkIGluIGNvbnRleHRzIHdoZXJlIGEgcHJpdmlsZWdlZCByZXNvdXJjZSBpcyBzb3VyY2VkIGZyb20gYVxyXG4gIC8vIHVybC4gIChlLmcuIG5nLWluY2x1ZGUsIHNjcmlwdCBzcmMsIHRlbXBsYXRlVXJsKVxyXG4gIFJFU09VUkNFX1VSTDogJ3Jlc291cmNlVXJsJyxcclxuICBKUzogJ2pzJ1xyXG59O1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb2xsb3cuXHJcblxyXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpIHtcclxuICBpZiAobWF0Y2hlciA9PT0gJ3NlbGYnKSB7XHJcbiAgICByZXR1cm4gbWF0Y2hlcjtcclxuICB9IGVsc2UgaWYgKGlzU3RyaW5nKG1hdGNoZXIpKSB7XHJcbiAgICAvLyBTdHJpbmdzIG1hdGNoIGV4YWN0bHkgZXhjZXB0IGZvciAyIHdpbGRjYXJkcyAtICcqJyBhbmQgJyoqJy5cclxuICAgIC8vICcqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgZXhjZXB0IHRob3NlIGZyb20gdGhlIHNldCAnOi8uPyYnLlxyXG4gICAgLy8gJyoqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgKGxpa2UgLiogaW4gYSBSZWdFeHApLlxyXG4gICAgLy8gTW9yZSB0aGFuIDIgKidzIHJhaXNlcyBhbiBlcnJvciBhcyBpdCdzIGlsbCBkZWZpbmVkLlxyXG4gICAgaWYgKG1hdGNoZXIuaW5kZXhPZignKioqJykgPiAtMSkge1xyXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLFxyXG4gICAgICAgICAgJ0lsbGVnYWwgc2VxdWVuY2UgKioqIGluIHN0cmluZyBtYXRjaGVyLiAgU3RyaW5nOiB7MH0nLCBtYXRjaGVyKTtcclxuICAgIH1cclxuICAgIG1hdGNoZXIgPSBlc2NhcGVGb3JSZWdleHAobWF0Y2hlcikuXHJcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2UoJ1xcXFwqXFxcXConLCAnLionKS5cclxuICAgICAgICAgICAgICAgICAgcmVwbGFjZSgnXFxcXConLCAnW146Ly4/JjtdKicpO1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgbWF0Y2hlciArICckJyk7XHJcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChtYXRjaGVyKSkge1xyXG4gICAgLy8gVGhlIG9ubHkgb3RoZXIgdHlwZSBvZiBtYXRjaGVyIGFsbG93ZWQgaXMgYSBSZWdleHAuXHJcbiAgICAvLyBNYXRjaCBlbnRpcmUgVVJMIC8gZGlzYWxsb3cgcGFydGlhbCBtYXRjaGVzLlxyXG4gICAgLy8gRmxhZ3MgYXJlIHJlc2V0IChpLmUuIG5vIGdsb2JhbCwgaWdub3JlQ2FzZSBvciBtdWx0aWxpbmUpXHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBtYXRjaGVyLnNvdXJjZSArICckJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93ICRzY2VNaW5FcnIoJ2ltYXRjaGVyJyxcclxuICAgICAgICAnTWF0Y2hlcnMgbWF5IG9ubHkgYmUgXCJzZWxmXCIsIHN0cmluZyBwYXR0ZXJucyBvciBSZWdFeHAgb2JqZWN0cycpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkanVzdE1hdGNoZXJzKG1hdGNoZXJzKSB7XHJcbiAgdmFyIGFkanVzdGVkTWF0Y2hlcnMgPSBbXTtcclxuICBpZiAoaXNEZWZpbmVkKG1hdGNoZXJzKSkge1xyXG4gICAgZm9yRWFjaChtYXRjaGVycywgZnVuY3Rpb24obWF0Y2hlcikge1xyXG4gICAgICBhZGp1c3RlZE1hdGNoZXJzLnB1c2goYWRqdXN0TWF0Y2hlcihtYXRjaGVyKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmV0dXJuIGFkanVzdGVkTWF0Y2hlcnM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHNjZURlbGVnYXRlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBgJHNjZURlbGVnYXRlYCBpcyBhIHNlcnZpY2UgdGhhdCBpcyB1c2VkIGJ5IHRoZSBgJHNjZWAgc2VydmljZSB0byBwcm92aWRlIHtAbGluayBuZy4kc2NlIFN0cmljdFxyXG4gKiBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfSBzZXJ2aWNlcyB0byBBbmd1bGFySlMuXHJcbiAqXHJcbiAqIFR5cGljYWxseSwgeW91IHdvdWxkIGNvbmZpZ3VyZSBvciBvdmVycmlkZSB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSAkc2NlRGVsZWdhdGV9IGluc3RlYWQgb2ZcclxuICogdGhlIGAkc2NlYCBzZXJ2aWNlIHRvIGN1c3RvbWl6ZSB0aGUgd2F5IFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIHdvcmtzIGluIEFuZ3VsYXJKUy4gIFRoaXMgaXNcclxuICogYmVjYXVzZSwgd2hpbGUgdGhlIGAkc2NlYCBwcm92aWRlcyBudW1lcm91cyBzaG9ydGhhbmQgbWV0aG9kcywgZXRjLiwgeW91IHJlYWxseSBvbmx5IG5lZWQgdG9cclxuICogb3ZlcnJpZGUgMyBjb3JlIGZ1bmN0aW9ucyAoYHRydXN0QXNgLCBgZ2V0VHJ1c3RlZGAgYW5kIGB2YWx1ZU9mYCkgdG8gcmVwbGFjZSB0aGUgd2F5IHRoaW5nc1xyXG4gKiB3b3JrIGJlY2F1c2UgYCRzY2VgIGRlbGVnYXRlcyB0byBgJHNjZURlbGVnYXRlYCBmb3IgdGhlc2Ugb3BlcmF0aW9ucy5cclxuICpcclxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSB0byBjb25maWd1cmUgdGhpcyBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBUaGUgZGVmYXVsdCBpbnN0YW5jZSBvZiBgJHNjZURlbGVnYXRlYCBzaG91bGQgd29yayBvdXQgb2YgdGhlIGJveCB3aXRoIGxpdHRsZSBwYWluLiAgV2hpbGUgeW91XHJcbiAqIGNhbiBvdmVycmlkZSBpdCBjb21wbGV0ZWx5IHRvIGNoYW5nZSB0aGUgYmVoYXZpb3Igb2YgYCRzY2VgLCB0aGUgY29tbW9uIGNhc2Ugd291bGRcclxuICogaW52b2x2ZSBjb25maWd1cmluZyB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBpbnN0ZWFkIGJ5IHNldHRpbmdcclxuICogeW91ciBvd24gd2hpdGVsaXN0cyBhbmQgYmxhY2tsaXN0cyBmb3IgdHJ1c3RpbmcgVVJMcyB1c2VkIGZvciBsb2FkaW5nIEFuZ3VsYXJKUyByZXNvdXJjZXMgc3VjaCBhc1xyXG4gKiB0ZW1wbGF0ZXMuICBSZWZlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3RcclxuICogJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3R9IGFuZCB7QGxpbmtcclxuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBwcm92aWRlclxyXG4gKiBAbmFtZSAkc2NlRGVsZWdhdGVQcm92aWRlclxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogVGhlIGAkc2NlRGVsZWdhdGVQcm92aWRlcmAgcHJvdmlkZXIgYWxsb3dzIGRldmVsb3BlcnMgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlXHJcbiAqICRzY2VEZWxlZ2F0ZX0gc2VydmljZS4gIFRoaXMgYWxsb3dzIG9uZSB0byBnZXQvc2V0IHRoZSB3aGl0ZWxpc3RzIGFuZCBibGFja2xpc3RzIHVzZWQgdG8gZW5zdXJlXHJcbiAqIHRoYXQgdGhlIFVSTHMgdXNlZCBmb3Igc291cmNpbmcgQW5ndWxhciB0ZW1wbGF0ZXMgYXJlIHNhZmUuICBSZWZlciB7QGxpbmtcclxuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3R9IGFuZFxyXG4gKiB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XHJcbiAqXHJcbiAqIEZvciB0aGUgZ2VuZXJhbCBkZXRhaWxzIGFib3V0IHRoaXMgc2VydmljZSBpbiBBbmd1bGFyLCByZWFkIHRoZSBtYWluIHBhZ2UgZm9yIHtAbGluayBuZy4kc2NlXHJcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cclxuICpcclxuICogKipFeGFtcGxlKio6ICBDb25zaWRlciB0aGUgZm9sbG93aW5nIGNhc2UuIDxhIG5hbWU9XCJleGFtcGxlXCI+PC9hPlxyXG4gKlxyXG4gKiAtIHlvdXIgYXBwIGlzIGhvc3RlZCBhdCB1cmwgYGh0dHA6Ly9teWFwcC5leGFtcGxlLmNvbS9gXHJcbiAqIC0gYnV0IHNvbWUgb2YgeW91ciB0ZW1wbGF0ZXMgYXJlIGhvc3RlZCBvbiBvdGhlciBkb21haW5zIHlvdSBjb250cm9sIHN1Y2ggYXNcclxuICogICBgaHR0cDovL3NydjAxLmFzc2V0cy5leGFtcGxlLmNvbS9gLMKgIGBodHRwOi8vc3J2MDIuYXNzZXRzLmV4YW1wbGUuY29tL2AsIGV0Yy5cclxuICogLSBhbmQgeW91IGhhdmUgYW4gb3BlbiByZWRpcmVjdCBhdCBgaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2NsaWNrVGhydT8uLi5gLlxyXG4gKlxyXG4gKiBIZXJlIGlzIHdoYXQgYSBzZWN1cmUgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBzY2VuYXJpbyBtaWdodCBsb29rIGxpa2U6XHJcbiAqXHJcbiAqIGBgYFxyXG4gKiAgYW5ndWxhci5tb2R1bGUoJ215QXBwJywgW10pLmNvbmZpZyhmdW5jdGlvbigkc2NlRGVsZWdhdGVQcm92aWRlcikge1xyXG4gKiAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdChbXHJcbiAqICAgICAgLy8gQWxsb3cgc2FtZSBvcmlnaW4gcmVzb3VyY2UgbG9hZHMuXHJcbiAqICAgICAgJ3NlbGYnLFxyXG4gKiAgICAgIC8vIEFsbG93IGxvYWRpbmcgZnJvbSBvdXIgYXNzZXRzIGRvbWFpbi4gIE5vdGljZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuICogYW5kICoqLlxyXG4gKiAgICAgICdodHRwOi8vc3J2Ki5hc3NldHMuZXhhbXBsZS5jb20vKionXHJcbiAqICAgIF0pO1xyXG4gKlxyXG4gKiAgICAvLyBUaGUgYmxhY2tsaXN0IG92ZXJyaWRlcyB0aGUgd2hpdGVsaXN0IHNvIHRoZSBvcGVuIHJlZGlyZWN0IGhlcmUgaXMgYmxvY2tlZC5cclxuICogICAgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3QoW1xyXG4gKiAgICAgICdodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vY2xpY2tUaHJ1KionXHJcbiAqICAgIF0pO1xyXG4gKiAgfSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uICRTY2VEZWxlZ2F0ZVByb3ZpZGVyKCkge1xyXG4gIHRoaXMuU0NFX0NPTlRFWFRTID0gU0NFX0NPTlRFWFRTO1xyXG5cclxuICAvLyBSZXNvdXJjZSBVUkxzIGNhbiBhbHNvIGJlIHRydXN0ZWQgYnkgcG9saWN5LlxyXG4gIHZhciByZXNvdXJjZVVybFdoaXRlbGlzdCA9IFsnc2VsZiddLFxyXG4gICAgICByZXNvdXJjZVVybEJsYWNrbGlzdCA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3RcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheT19IHdoaXRlbGlzdCBXaGVuIHByb3ZpZGVkLCByZXBsYWNlcyB0aGUgcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2l0aCB0aGUgdmFsdWVcclxuICAgKiAgICAgcHJvdmlkZWQuICBUaGlzIG11c3QgYmUgYW4gYXJyYXkgb3IgbnVsbC4gIEEgc25hcHNob3Qgb2YgdGhpcyBhcnJheSBpcyB1c2VkIHNvIGZ1cnRoZXJcclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuXHJcbiAgICpcclxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcclxuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LlxyXG4gICAqXHJcbiAgICogICAgIE5vdGU6ICoqYW4gZW1wdHkgd2hpdGVsaXN0IGFycmF5IHdpbGwgYmxvY2sgYWxsIFVSTHMqKiFcclxuICAgKlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSB0aGUgY3VycmVudGx5IHNldCB3aGl0ZWxpc3QgYXJyYXkuXHJcbiAgICpcclxuICAgKiBUaGUgKipkZWZhdWx0IHZhbHVlKiogd2hlbiBubyB3aGl0ZWxpc3QgaGFzIGJlZW4gZXhwbGljaXRseSBzZXQgaXMgYFsnc2VsZiddYCBhbGxvd2luZyBvbmx5XHJcbiAgICogc2FtZSBvcmlnaW4gcmVzb3VyY2UgcmVxdWVzdHMuXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzL0dldHMgdGhlIHdoaXRlbGlzdCBvZiB0cnVzdGVkIHJlc291cmNlIFVSTHMuXHJcbiAgICovXHJcbiAgdGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXNvdXJjZVVybFdoaXRlbGlzdCA9IGFkanVzdE1hdGNoZXJzKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNvdXJjZVVybFdoaXRlbGlzdDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3RcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheT19IGJsYWNrbGlzdCBXaGVuIHByb3ZpZGVkLCByZXBsYWNlcyB0aGUgcmVzb3VyY2VVcmxCbGFja2xpc3Qgd2l0aCB0aGUgdmFsdWVcclxuICAgKiAgICAgcHJvdmlkZWQuICBUaGlzIG11c3QgYmUgYW4gYXJyYXkgb3IgbnVsbC4gIEEgc25hcHNob3Qgb2YgdGhpcyBhcnJheSBpcyB1c2VkIHNvIGZ1cnRoZXJcclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuXHJcbiAgICpcclxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcclxuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LlxyXG4gICAqXHJcbiAgICogICAgIFRoZSB0eXBpY2FsIHVzYWdlIGZvciB0aGUgYmxhY2tsaXN0IGlzIHRvICoqYmxvY2tcclxuICAgKiAgICAgW29wZW4gcmVkaXJlY3RzXShodHRwOi8vY3dlLm1pdHJlLm9yZy9kYXRhL2RlZmluaXRpb25zLzYwMS5odG1sKSoqIHNlcnZlZCBieSB5b3VyIGRvbWFpbiBhc1xyXG4gICAqICAgICB0aGVzZSB3b3VsZCBvdGhlcndpc2UgYmUgdHJ1c3RlZCBidXQgYWN0dWFsbHkgcmV0dXJuIGNvbnRlbnQgZnJvbSB0aGUgcmVkaXJlY3RlZCBkb21haW4uXHJcbiAgICpcclxuICAgKiAgICAgRmluYWxseSwgKip0aGUgYmxhY2tsaXN0IG92ZXJyaWRlcyB0aGUgd2hpdGVsaXN0KiogYW5kIGhhcyB0aGUgZmluYWwgc2F5LlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7QXJyYXl9IHRoZSBjdXJyZW50bHkgc2V0IGJsYWNrbGlzdCBhcnJheS5cclxuICAgKlxyXG4gICAqIFRoZSAqKmRlZmF1bHQgdmFsdWUqKiB3aGVuIG5vIHdoaXRlbGlzdCBoYXMgYmVlbiBleHBsaWNpdGx5IHNldCBpcyB0aGUgZW1wdHkgYXJyYXkgKGkuZS4gdGhlcmVcclxuICAgKiBpcyBubyBibGFja2xpc3QuKVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cy9HZXRzIHRoZSBibGFja2xpc3Qgb2YgdHJ1c3RlZCByZXNvdXJjZSBVUkxzLlxyXG4gICAqL1xyXG5cclxuICB0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIHJlc291cmNlVXJsQmxhY2tsaXN0ID0gYWRqdXN0TWF0Y2hlcnModmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc291cmNlVXJsQmxhY2tsaXN0O1xyXG4gIH07XHJcblxyXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XHJcblxyXG4gICAgdmFyIGh0bWxTYW5pdGl6ZXIgPSBmdW5jdGlvbiBodG1sU2FuaXRpemVyKGh0bWwpIHtcclxuICAgICAgdGhyb3cgJHNjZU1pbkVycigndW5zYWZlJywgJ0F0dGVtcHRpbmcgdG8gdXNlIGFuIHVuc2FmZSB2YWx1ZSBpbiBhIHNhZmUgY29udGV4dC4nKTtcclxuICAgIH07XHJcblxyXG4gICAgaWYgKCRpbmplY3Rvci5oYXMoJyRzYW5pdGl6ZScpKSB7XHJcbiAgICAgIGh0bWxTYW5pdGl6ZXIgPSAkaW5qZWN0b3IuZ2V0KCckc2FuaXRpemUnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gbWF0Y2hVcmwobWF0Y2hlciwgcGFyc2VkVXJsKSB7XHJcbiAgICAgIGlmIChtYXRjaGVyID09PSAnc2VsZicpIHtcclxuICAgICAgICByZXR1cm4gdXJsSXNTYW1lT3JpZ2luKHBhcnNlZFVybCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZGVmaW5pdGVseSBhIHJlZ2V4LiAgU2VlIGFkanVzdE1hdGNoZXJzKClcclxuICAgICAgICByZXR1cm4gISFtYXRjaGVyLmV4ZWMocGFyc2VkVXJsLmhyZWYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNSZXNvdXJjZVVybEFsbG93ZWRCeVBvbGljeSh1cmwpIHtcclxuICAgICAgdmFyIHBhcnNlZFVybCA9IHVybFJlc29sdmUodXJsLnRvU3RyaW5nKCkpO1xyXG4gICAgICB2YXIgaSwgbiwgYWxsb3dlZCA9IGZhbHNlO1xyXG4gICAgICAvLyBFbnN1cmUgdGhhdCBhdCBsZWFzdCBvbmUgaXRlbSBmcm9tIHRoZSB3aGl0ZWxpc3QgYWxsb3dzIHRoaXMgdXJsLlxyXG4gICAgICBmb3IgKGkgPSAwLCBuID0gcmVzb3VyY2VVcmxXaGl0ZWxpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgaWYgKG1hdGNoVXJsKHJlc291cmNlVXJsV2hpdGVsaXN0W2ldLCBwYXJzZWRVcmwpKSB7XHJcbiAgICAgICAgICBhbGxvd2VkID0gdHJ1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoYWxsb3dlZCkge1xyXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IG5vIGl0ZW0gZnJvbSB0aGUgYmxhY2tsaXN0IGJsb2NrZWQgdGhpcyB1cmwuXHJcbiAgICAgICAgZm9yIChpID0gMCwgbiA9IHJlc291cmNlVXJsQmxhY2tsaXN0Lmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgaWYgKG1hdGNoVXJsKHJlc291cmNlVXJsQmxhY2tsaXN0W2ldLCBwYXJzZWRVcmwpKSB7XHJcbiAgICAgICAgICAgIGFsbG93ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhbGxvd2VkO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlSG9sZGVyVHlwZShCYXNlKSB7XHJcbiAgICAgIHZhciBob2xkZXJUeXBlID0gZnVuY3Rpb24gVHJ1c3RlZFZhbHVlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWUpIHtcclxuICAgICAgICB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1c3RlZFZhbHVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChCYXNlKSB7XHJcbiAgICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUgPSBuZXcgQmFzZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbiBzY2VWYWx1ZU9mKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XHJcbiAgICAgIH07XHJcbiAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gc2NlVG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpO1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gaG9sZGVyVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSA9IGdlbmVyYXRlSG9sZGVyVHlwZSgpLFxyXG4gICAgICAgIGJ5VHlwZSA9IHt9O1xyXG5cclxuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuSFRNTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XHJcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkNTU10gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XHJcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XHJcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkpTXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcclxuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuUkVTT1VSQ0VfVVJMXSA9IGdlbmVyYXRlSG9sZGVyVHlwZShieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZURlbGVnYXRlI3RydXN0QXNcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgaXMgdHJ1c3RlZCBieSBhbmd1bGFyIGZvciB1c2UgaW4gc3BlY2lmaWVkIHN0cmljdFxyXG4gICAgICogY29udGV4dHVhbCBlc2NhcGluZyBjb250ZXh0cyAoc3VjaCBhcyBuZy1iaW5kLWh0bWwsIG5nLWluY2x1ZGUsIGFueSBzcmNcclxuICAgICAqIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uLCBhbnkgZG9tIGV2ZW50IGJpbmRpbmcgYXR0cmlidXRlIGludGVycG9sYXRpb25cclxuICAgICAqIHN1Y2ggYXMgZm9yIG9uY2xpY2ssICBldGMuKSB0aGF0IHVzZXMgdGhlIHByb3ZpZGVkIHZhbHVlLlxyXG4gICAgICogU2VlIHtAbGluayBuZy4kc2NlICRzY2V9IGZvciBlbmFibGluZyBzdHJpY3QgY29udGV4dHVhbCBlc2NhcGluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUga2luZCBvZiBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgc2FmZSBmb3IgdXNlLiAgZS5nLiB1cmwsXHJcbiAgICAgKiAgIHJlc291cmNlVXJsLCBodG1sLCBqcyBhbmQgY3NzLlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdGhhdCB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRydXN0ZWQvc2FmZS5cclxuICAgICAqIEByZXR1cm5zIHsqfSBBIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgdG8gc3RhbmQgaW4gZm9yIHRoZSBwcm92aWRlZCBgdmFsdWVgIGluIHBsYWNlc1xyXG4gICAgICogd2hlcmUgQW5ndWxhciBleHBlY3RzIGEgJHNjZS50cnVzdEFzKCkgcmV0dXJuIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiB0cnVzdEFzKHR5cGUsIHRydXN0ZWRWYWx1ZSkge1xyXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSAoYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpID8gYnlUeXBlW3R5cGVdIDogbnVsbCk7XHJcbiAgICAgIGlmICghQ29uc3RydWN0b3IpIHtcclxuICAgICAgICB0aHJvdyAkc2NlTWluRXJyKCdpY29udGV4dCcsXHJcbiAgICAgICAgICAgICdBdHRlbXB0ZWQgdG8gdHJ1c3QgYSB2YWx1ZSBpbiBpbnZhbGlkIGNvbnRleHQuIENvbnRleHQ6IHswfTsgVmFsdWU6IHsxfScsXHJcbiAgICAgICAgICAgIHR5cGUsIHRydXN0ZWRWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRydXN0ZWRWYWx1ZSA9PT0gbnVsbCB8fCB0cnVzdGVkVmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0cnVzdGVkVmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydXN0ZWRWYWx1ZTtcclxuICAgICAgfVxyXG4gICAgICAvLyBBbGwgdGhlIGN1cnJlbnQgY29udGV4dHMgaW4gU0NFX0NPTlRFWFRTIGhhcHBlbiB0byBiZSBzdHJpbmdzLiAgSW4gb3JkZXIgdG8gYXZvaWQgdHJ1c3RpbmdcclxuICAgICAgLy8gbXV0YWJsZSBvYmplY3RzLCB3ZSBlbnN1cmUgaGVyZSB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW4gaXMgYWN0dWFsbHkgYSBzdHJpbmcuXHJcbiAgICAgIGlmICh0eXBlb2YgdHJ1c3RlZFZhbHVlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2l0eXBlJyxcclxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIG5vbi1zdHJpbmcgdmFsdWUgaW4gYSBjb250ZW50IHJlcXVpcmluZyBhIHN0cmluZzogQ29udGV4dDogezB9JyxcclxuICAgICAgICAgICAgdHlwZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0cnVzdGVkVmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZURlbGVnYXRlI3ZhbHVlT2ZcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIElmIHRoZSBwYXNzZWQgcGFyYW1ldGVyIGhhZCBiZWVuIHJldHVybmVkIGJ5IGEgcHJpb3IgY2FsbCB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcclxuICAgICAqIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LCByZXR1cm5zIHRoZSB2YWx1ZSB0aGF0IGhhZCBiZWVuIHBhc3NlZCB0byB7QGxpbmtcclxuICAgICAqIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LlxyXG4gICAgICpcclxuICAgICAqIElmIHRoZSBwYXNzZWQgcGFyYW1ldGVyIGlzIG5vdCBhIHZhbHVlIHRoYXQgaGFkIGJlZW4gcmV0dXJuZWQgYnkge0BsaW5rXHJcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSwgcmV0dXJucyBpdCBhcy1pcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH1cclxuICAgICAqICAgICAgY2FsbCBvciBhbnl0aGluZyBlbHNlLlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSBgdmFsdWVgIHRoYXQgd2FzIG9yaWdpbmFsbHkgcHJvdmlkZWQgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXHJcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gaWYgYHZhbHVlYCBpcyB0aGUgcmVzdWx0IG9mIHN1Y2ggYSBjYWxsLiAgT3RoZXJ3aXNlLCByZXR1cm5zXHJcbiAgICAgKiAgICAgYHZhbHVlYCB1bmNoYW5nZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHZhbHVlT2YobWF5YmVUcnVzdGVkKSB7XHJcbiAgICAgIGlmIChtYXliZVRydXN0ZWQgaW5zdGFuY2VvZiB0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZC4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBUYWtlcyB0aGUgcmVzdWx0IG9mIGEge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IGNhbGwgYW5kXHJcbiAgICAgKiByZXR1cm5zIHRoZSBvcmlnaW5hbGx5IHN1cHBsaWVkIHZhbHVlIGlmIHRoZSBxdWVyaWVkIGNvbnRleHQgdHlwZSBpcyBhIHN1cGVydHlwZSBvZiB0aGVcclxuICAgICAqIGNyZWF0ZWQgdHlwZS4gIElmIHRoaXMgY29uZGl0aW9uIGlzbid0IHNhdGlzZmllZCwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUga2luZCBvZiBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgdG8gYmUgdXNlZC5cclxuICAgICAqIEBwYXJhbSB7Kn0gbWF5YmVUcnVzdGVkIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcclxuICAgICAqICAgICBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBjYWxsLlxyXG4gICAgICogQHJldHVybnMgeyp9IFRoZSB2YWx1ZSB0aGUgd2FzIG9yaWdpbmFsbHkgcHJvdmlkZWQgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXHJcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gaWYgdmFsaWQgaW4gdGhpcyBjb250ZXh0LiAgT3RoZXJ3aXNlLCB0aHJvd3MgYW4gZXhjZXB0aW9uLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRUcnVzdGVkKHR5cGUsIG1heWJlVHJ1c3RlZCkge1xyXG4gICAgICBpZiAobWF5YmVUcnVzdGVkID09PSBudWxsIHx8IG1heWJlVHJ1c3RlZCA9PT0gdW5kZWZpbmVkIHx8IG1heWJlVHJ1c3RlZCA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBjb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcclxuICAgICAgaWYgKGNvbnN0cnVjdG9yICYmIG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZC4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIElmIHdlIGdldCBoZXJlLCB0aGVuIHdlIG1heSBvbmx5IHRha2Ugb25lIG9mIHR3byBhY3Rpb25zLlxyXG4gICAgICAvLyAxLiBzYW5pdGl6ZSB0aGUgdmFsdWUgZm9yIHRoZSByZXF1ZXN0ZWQgdHlwZSwgb3JcclxuICAgICAgLy8gMi4gdGhyb3cgYW4gZXhjZXB0aW9uLlxyXG4gICAgICBpZiAodHlwZSA9PT0gU0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTCkge1xyXG4gICAgICAgIGlmIChpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5KG1heWJlVHJ1c3RlZCkpIHtcclxuICAgICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2luc2VjdXJsJyxcclxuICAgICAgICAgICAgICAnQmxvY2tlZCBsb2FkaW5nIHJlc291cmNlIGZyb20gdXJsIG5vdCBhbGxvd2VkIGJ5ICRzY2VEZWxlZ2F0ZSBwb2xpY3kuICBVUkw6IHswfScsXHJcbiAgICAgICAgICAgICAgbWF5YmVUcnVzdGVkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuSFRNTCkge1xyXG4gICAgICAgIHJldHVybiBodG1sU2FuaXRpemVyKG1heWJlVHJ1c3RlZCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgJHNjZU1pbkVycigndW5zYWZlJywgJ0F0dGVtcHRpbmcgdG8gdXNlIGFuIHVuc2FmZSB2YWx1ZSBpbiBhIHNhZmUgY29udGV4dC4nKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB0cnVzdEFzOiB0cnVzdEFzLFxyXG4gICAgICAgICAgICAgZ2V0VHJ1c3RlZDogZ2V0VHJ1c3RlZCxcclxuICAgICAgICAgICAgIHZhbHVlT2Y6IHZhbHVlT2YgfTtcclxuICB9XTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJHNjZVByb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBUaGUgJHNjZVByb3ZpZGVyIHByb3ZpZGVyIGFsbG93cyBkZXZlbG9wZXJzIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIG5nLiRzY2UgJHNjZX0gc2VydmljZS5cclxuICogLSAgIGVuYWJsZS9kaXNhYmxlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpIGluIGEgbW9kdWxlXHJcbiAqIC0gICBvdmVycmlkZSB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB3aXRoIGEgY3VzdG9tIGRlbGVnYXRlXHJcbiAqXHJcbiAqIFJlYWQgbW9yZSBhYm91dCB7QGxpbmsgbmcuJHNjZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0uXHJcbiAqL1xyXG5cclxuLyoganNoaW50IG1heGxlbjogZmFsc2UqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAqIEBuYW1lICRzY2VcclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIGAkc2NlYCBpcyBhIHNlcnZpY2UgdGhhdCBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBzZXJ2aWNlcyB0byBBbmd1bGFySlMuXHJcbiAqXHJcbiAqICMgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmdcclxuICpcclxuICogU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSkgaXMgYSBtb2RlIGluIHdoaWNoIEFuZ3VsYXJKUyByZXF1aXJlcyBiaW5kaW5ncyBpbiBjZXJ0YWluXHJcbiAqIGNvbnRleHRzIHRvIHJlc3VsdCBpbiBhIHZhbHVlIHRoYXQgaXMgbWFya2VkIGFzIHNhZmUgdG8gdXNlIGZvciB0aGF0IGNvbnRleHQuICBPbmUgZXhhbXBsZSBvZlxyXG4gKiBzdWNoIGEgY29udGV4dCBpcyBiaW5kaW5nIGFyYml0cmFyeSBodG1sIGNvbnRyb2xsZWQgYnkgdGhlIHVzZXIgdmlhIGBuZy1iaW5kLWh0bWxgLiAgV2UgcmVmZXJcclxuICogdG8gdGhlc2UgY29udGV4dHMgYXMgcHJpdmlsZWdlZCBvciBTQ0UgY29udGV4dHMuXHJcbiAqXHJcbiAqIEFzIG9mIHZlcnNpb24gMS4yLCBBbmd1bGFyIHNoaXBzIHdpdGggU0NFIGVuYWJsZWQgYnkgZGVmYXVsdC5cclxuICpcclxuICogTm90ZTogIFdoZW4gZW5hYmxlZCAodGhlIGRlZmF1bHQpLCBJRTwxMSBpbiBxdWlya3MgbW9kZSBpcyBub3Qgc3VwcG9ydGVkLiAgSW4gdGhpcyBtb2RlLCBJRTwxMSBhbGxvd1xyXG4gKiBvbmUgdG8gZXhlY3V0ZSBhcmJpdHJhcnkgamF2YXNjcmlwdCBieSB0aGUgdXNlIG9mIHRoZSBleHByZXNzaW9uKCkgc3ludGF4LiAgUmVmZXJcclxuICogPGh0dHA6Ly9ibG9ncy5tc2RuLmNvbS9iL2llL2FyY2hpdmUvMjAwOC8xMC8xNi9lbmRpbmctZXhwcmVzc2lvbnMuYXNweD4gdG8gbGVhcm4gbW9yZSBhYm91dCB0aGVtLlxyXG4gKiBZb3UgY2FuIGVuc3VyZSB5b3VyIGRvY3VtZW50IGlzIGluIHN0YW5kYXJkcyBtb2RlIGFuZCBub3QgcXVpcmtzIG1vZGUgYnkgYWRkaW5nIGA8IWRvY3R5cGUgaHRtbD5gXHJcbiAqIHRvIHRoZSB0b3Agb2YgeW91ciBIVE1MIGRvY3VtZW50LlxyXG4gKlxyXG4gKiBTQ0UgYXNzaXN0cyBpbiB3cml0aW5nIGNvZGUgaW4gd2F5IHRoYXQgKGEpIGlzIHNlY3VyZSBieSBkZWZhdWx0IGFuZCAoYikgbWFrZXMgYXVkaXRpbmcgZm9yXHJcbiAqIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcyBzdWNoIGFzIFhTUywgY2xpY2tqYWNraW5nLCBldGMuIGEgbG90IGVhc2llci5cclxuICpcclxuICogSGVyZSdzIGFuIGV4YW1wbGUgb2YgYSBiaW5kaW5nIGluIGEgcHJpdmlsZWdlZCBjb250ZXh0OlxyXG4gKlxyXG4gKiBgYGBcclxuICogPGlucHV0IG5nLW1vZGVsPVwidXNlckh0bWxcIj5cclxuICogPGRpdiBuZy1iaW5kLWh0bWw9XCJ1c2VySHRtbFwiPjwvZGl2PlxyXG4gKiBgYGBcclxuICpcclxuICogTm90aWNlIHRoYXQgYG5nLWJpbmQtaHRtbGAgaXMgYm91bmQgdG8gYHVzZXJIdG1sYCBjb250cm9sbGVkIGJ5IHRoZSB1c2VyLiAgV2l0aCBTQ0VcclxuICogZGlzYWJsZWQsIHRoaXMgYXBwbGljYXRpb24gYWxsb3dzIHRoZSB1c2VyIHRvIHJlbmRlciBhcmJpdHJhcnkgSFRNTCBpbnRvIHRoZSBESVYuXHJcbiAqIEluIGEgbW9yZSByZWFsaXN0aWMgZXhhbXBsZSwgb25lIG1heSBiZSByZW5kZXJpbmcgdXNlciBjb21tZW50cywgYmxvZyBhcnRpY2xlcywgZXRjLiB2aWFcclxuICogYmluZGluZ3MuICAoSFRNTCBpcyBqdXN0IG9uZSBleGFtcGxlIG9mIGEgY29udGV4dCB3aGVyZSByZW5kZXJpbmcgdXNlciBjb250cm9sbGVkIGlucHV0IGNyZWF0ZXNcclxuICogc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLilcclxuICpcclxuICogRm9yIHRoZSBjYXNlIG9mIEhUTUwsIHlvdSBtaWdodCB1c2UgYSBsaWJyYXJ5LCBlaXRoZXIgb24gdGhlIGNsaWVudCBzaWRlLCBvciBvbiB0aGUgc2VydmVyIHNpZGUsXHJcbiAqIHRvIHNhbml0aXplIHVuc2FmZSBIVE1MIGJlZm9yZSBiaW5kaW5nIHRvIHRoZSB2YWx1ZSBhbmQgcmVuZGVyaW5nIGl0IGluIHRoZSBkb2N1bWVudC5cclxuICpcclxuICogSG93IHdvdWxkIHlvdSBlbnN1cmUgdGhhdCBldmVyeSBwbGFjZSB0aGF0IHVzZWQgdGhlc2UgdHlwZXMgb2YgYmluZGluZ3Mgd2FzIGJvdW5kIHRvIGEgdmFsdWUgdGhhdFxyXG4gKiB3YXMgc2FuaXRpemVkIGJ5IHlvdXIgbGlicmFyeSAob3IgcmV0dXJuZWQgYXMgc2FmZSBmb3IgcmVuZGVyaW5nIGJ5IHlvdXIgc2VydmVyPykgIEhvdyBjYW4geW91XHJcbiAqIGVuc3VyZSB0aGF0IHlvdSBkaWRuJ3QgYWNjaWRlbnRhbGx5IGRlbGV0ZSB0aGUgbGluZSB0aGF0IHNhbml0aXplZCB0aGUgdmFsdWUsIG9yIHJlbmFtZWQgc29tZVxyXG4gKiBwcm9wZXJ0aWVzL2ZpZWxkcyBhbmQgZm9yZ290IHRvIHVwZGF0ZSB0aGUgYmluZGluZyB0byB0aGUgc2FuaXRpemVkIHZhbHVlP1xyXG4gKlxyXG4gKiBUbyBiZSBzZWN1cmUgYnkgZGVmYXVsdCwgeW91IHdhbnQgdG8gZW5zdXJlIHRoYXQgYW55IHN1Y2ggYmluZGluZ3MgYXJlIGRpc2FsbG93ZWQgdW5sZXNzIHlvdSBjYW5cclxuICogZGV0ZXJtaW5lIHRoYXQgc29tZXRoaW5nIGV4cGxpY2l0bHkgc2F5cyBpdCdzIHNhZmUgdG8gdXNlIGEgdmFsdWUgZm9yIGJpbmRpbmcgaW4gdGhhdFxyXG4gKiBjb250ZXh0LiAgWW91IGNhbiB0aGVuIGF1ZGl0IHlvdXIgY29kZSAoYSBzaW1wbGUgZ3JlcCB3b3VsZCBkbykgdG8gZW5zdXJlIHRoYXQgdGhpcyBpcyBvbmx5IGRvbmVcclxuICogZm9yIHRob3NlIHZhbHVlcyB0aGF0IHlvdSBjYW4gZWFzaWx5IHRlbGwgYXJlIHNhZmUgLSBiZWNhdXNlIHRoZXkgd2VyZSByZWNlaXZlZCBmcm9tIHlvdXIgc2VydmVyLFxyXG4gKiBzYW5pdGl6ZWQgYnkgeW91ciBsaWJyYXJ5LCBldGMuICBZb3UgY2FuIG9yZ2FuaXplIHlvdXIgY29kZWJhc2UgdG8gaGVscCB3aXRoIHRoaXMgLSBwZXJoYXBzXHJcbiAqIGFsbG93aW5nIG9ubHkgdGhlIGZpbGVzIGluIGEgc3BlY2lmaWMgZGlyZWN0b3J5IHRvIGRvIHRoaXMuICBFbnN1cmluZyB0aGF0IHRoZSBpbnRlcm5hbCBBUElcclxuICogZXhwb3NlZCBieSB0aGF0IGNvZGUgZG9lc24ndCBtYXJrdXAgYXJiaXRyYXJ5IHZhbHVlcyBhcyBzYWZlIHRoZW4gYmVjb21lcyBhIG1vcmUgbWFuYWdlYWJsZSB0YXNrLlxyXG4gKlxyXG4gKiBJbiB0aGUgY2FzZSBvZiBBbmd1bGFySlMnIFNDRSBzZXJ2aWNlLCBvbmUgdXNlcyB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc31cclxuICogKGFuZCBzaG9ydGhhbmQgbWV0aG9kcyBzdWNoIGFzIHtAbGluayBuZy4kc2NlI3RydXN0QXNIdG1sICRzY2UudHJ1c3RBc0h0bWx9LCBldGMuKSB0b1xyXG4gKiBvYnRhaW4gdmFsdWVzIHRoYXQgd2lsbCBiZSBhY2NlcHRlZCBieSBTQ0UgLyBwcml2aWxlZ2VkIGNvbnRleHRzLlxyXG4gKlxyXG4gKlxyXG4gKiAjIyBIb3cgZG9lcyBpdCB3b3JrP1xyXG4gKlxyXG4gKiBJbiBwcml2aWxlZ2VkIGNvbnRleHRzLCBkaXJlY3RpdmVzIGFuZCBjb2RlIHdpbGwgYmluZCB0byB0aGUgcmVzdWx0IG9mIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWRcclxuICogJHNjZS5nZXRUcnVzdGVkKGNvbnRleHQsIHZhbHVlKX0gcmF0aGVyIHRoYW4gdG8gdGhlIHZhbHVlIGRpcmVjdGx5LiAgRGlyZWN0aXZlcyB1c2Uge0BsaW5rXHJcbiAqIG5nLiRzY2UjcGFyc2VBcyAkc2NlLnBhcnNlQXN9IHJhdGhlciB0aGFuIGAkcGFyc2VgIHRvIHdhdGNoIGF0dHJpYnV0ZSBiaW5kaW5ncywgd2hpY2ggcGVyZm9ybXMgdGhlXHJcbiAqIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkfSBiZWhpbmQgdGhlIHNjZW5lcyBvbiBub24tY29uc3RhbnQgbGl0ZXJhbHMuXHJcbiAqXHJcbiAqIEFzIGFuIGV4YW1wbGUsIHtAbGluayBuZy5kaXJlY3RpdmU6bmdCaW5kSHRtbCBuZ0JpbmRIdG1sfSB1c2VzIHtAbGlua1xyXG4gKiBuZy4kc2NlI3BhcnNlQXNIdG1sICRzY2UucGFyc2VBc0h0bWwoYmluZGluZyBleHByZXNzaW9uKX0uICBIZXJlJ3MgdGhlIGFjdHVhbCBjb2RlIChzbGlnaHRseVxyXG4gKiBzaW1wbGlmaWVkKTpcclxuICpcclxuICogYGBgXHJcbiAqIHZhciBuZ0JpbmRIdG1sRGlyZWN0aXZlID0gWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xyXG4gKiAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gKiAgICAgc2NvcGUuJHdhdGNoKCRzY2UucGFyc2VBc0h0bWwoYXR0ci5uZ0JpbmRIdG1sKSwgZnVuY3Rpb24odmFsdWUpIHtcclxuICogICAgICAgZWxlbWVudC5odG1sKHZhbHVlIHx8ICcnKTtcclxuICogICAgIH0pO1xyXG4gKiAgIH07XHJcbiAqIH1dO1xyXG4gKiBgYGBcclxuICpcclxuICogIyMgSW1wYWN0IG9uIGxvYWRpbmcgdGVtcGxhdGVzXHJcbiAqXHJcbiAqIFRoaXMgYXBwbGllcyBib3RoIHRvIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmctaW5jbHVkZWB9IGRpcmVjdGl2ZSBhcyB3ZWxsIGFzXHJcbiAqIGB0ZW1wbGF0ZVVybGAncyBzcGVjaWZpZWQgYnkge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS5cclxuICpcclxuICogQnkgZGVmYXVsdCwgQW5ndWxhciBvbmx5IGxvYWRzIHRlbXBsYXRlcyBmcm9tIHRoZSBzYW1lIGRvbWFpbiBhbmQgcHJvdG9jb2wgYXMgdGhlIGFwcGxpY2F0aW9uXHJcbiAqIGRvY3VtZW50LiAgVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXHJcbiAqICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsfSBvbiB0aGUgdGVtcGxhdGUgVVJMLiAgVG8gbG9hZCB0ZW1wbGF0ZXMgZnJvbSBvdGhlciBkb21haW5zIGFuZC9vclxyXG4gKiBwcm90b2NvbHMsIHlvdSBtYXkgZWl0aGVyIGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0XHJcbiAqIHRoZW19IG9yIHtAbGluayBuZy4kc2NlI3RydXN0QXNSZXNvdXJjZVVybCB3cmFwIGl0fSBpbnRvIGEgdHJ1c3RlZCB2YWx1ZS5cclxuICpcclxuICogKlBsZWFzZSBub3RlKjpcclxuICogVGhlIGJyb3dzZXInc1xyXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxyXG4gKiBhbmQgW0Nyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKV0oaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8pXHJcbiAqIHBvbGljeSBhcHBseSBpbiBhZGRpdGlvbiB0byB0aGlzIGFuZCBtYXkgZnVydGhlciByZXN0cmljdCB3aGV0aGVyIHRoZSB0ZW1wbGF0ZSBpcyBzdWNjZXNzZnVsbHlcclxuICogbG9hZGVkLiAgVGhpcyBtZWFucyB0aGF0IHdpdGhvdXQgdGhlIHJpZ2h0IENPUlMgcG9saWN5LCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGEgZGlmZmVyZW50IGRvbWFpblxyXG4gKiB3b24ndCB3b3JrIG9uIGFsbCBicm93c2Vycy4gIEFsc28sIGxvYWRpbmcgdGVtcGxhdGVzIGZyb20gYGZpbGU6Ly9gIFVSTCBkb2VzIG5vdCB3b3JrIG9uIHNvbWVcclxuICogYnJvd3NlcnMuXHJcbiAqXHJcbiAqICMjIFRoaXMgZmVlbHMgbGlrZSB0b28gbXVjaCBvdmVyaGVhZFxyXG4gKlxyXG4gKiBJdCdzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IFNDRSBvbmx5IGFwcGxpZXMgdG8gaW50ZXJwb2xhdGlvbiBleHByZXNzaW9ucy5cclxuICpcclxuICogSWYgeW91ciBleHByZXNzaW9ucyBhcmUgY29uc3RhbnQgbGl0ZXJhbHMsIHRoZXkncmUgYXV0b21hdGljYWxseSB0cnVzdGVkIGFuZCB5b3UgZG9uJ3QgbmVlZCB0b1xyXG4gKiBjYWxsIGAkc2NlLnRydXN0QXNgIG9uIHRoZW0gKHJlbWVtYmVyIHRvIGluY2x1ZGUgdGhlIGBuZ1Nhbml0aXplYCBtb2R1bGUpIChlLmcuXHJcbiAqIGA8ZGl2IG5nLWJpbmQtaHRtbD1cIic8Yj5pbXBsaWNpdGx5IHRydXN0ZWQ8L2I+J1wiPjwvZGl2PmApIGp1c3Qgd29ya3MuXHJcbiAqXHJcbiAqIEFkZGl0aW9uYWxseSwgYGFbaHJlZl1gIGFuZCBgaW1nW3NyY11gIGF1dG9tYXRpY2FsbHkgc2FuaXRpemUgdGhlaXIgVVJMcyBhbmQgZG8gbm90IHBhc3MgdGhlbVxyXG4gKiB0aHJvdWdoIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgJHNjZS5nZXRUcnVzdGVkfS4gIFNDRSBkb2Vzbid0IHBsYXkgYSByb2xlIGhlcmUuXHJcbiAqXHJcbiAqIFRoZSBpbmNsdWRlZCB7QGxpbmsgbmcuJHNjZURlbGVnYXRlICRzY2VEZWxlZ2F0ZX0gY29tZXMgd2l0aCBzYW5lIGRlZmF1bHRzIHRvIGFsbG93IHlvdSB0byBsb2FkXHJcbiAqIHRlbXBsYXRlcyBpbiBgbmctaW5jbHVkZWAgZnJvbSB5b3VyIGFwcGxpY2F0aW9uJ3MgZG9tYWluIHdpdGhvdXQgaGF2aW5nIHRvIGV2ZW4ga25vdyBhYm91dCBTQ0UuXHJcbiAqIEl0IGJsb2NrcyBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgbG9hZGluZyB0ZW1wbGF0ZXMgb3ZlciBodHRwIGZyb20gYW4gaHR0cHNcclxuICogc2VydmVkIGRvY3VtZW50LiAgWW91IGNhbiBjaGFuZ2UgdGhlc2UgYnkgc2V0dGluZyB5b3VyIG93biBjdXN0b20ge0BsaW5rXHJcbiAqIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHdoaXRlbGlzdHN9IGFuZCB7QGxpbmtcclxuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgYmxhY2tsaXN0c30gZm9yIG1hdGNoaW5nIHN1Y2ggVVJMcy5cclxuICpcclxuICogVGhpcyBzaWduaWZpY2FudGx5IHJlZHVjZXMgdGhlIG92ZXJoZWFkLiAgSXQgaXMgZmFyIGVhc2llciB0byBwYXkgdGhlIHNtYWxsIG92ZXJoZWFkIGFuZCBoYXZlIGFuXHJcbiAqIGFwcGxpY2F0aW9uIHRoYXQncyBzZWN1cmUgYW5kIGNhbiBiZSBhdWRpdGVkIHRvIHZlcmlmeSB0aGF0IHdpdGggbXVjaCBtb3JlIGVhc2UgdGhhbiBib2x0aW5nXHJcbiAqIHNlY3VyaXR5IG9udG8gYW4gYXBwbGljYXRpb24gbGF0ZXIuXHJcbiAqXHJcbiAqIDxhIG5hbWU9XCJjb250ZXh0c1wiPjwvYT5cclxuICogIyMgV2hhdCB0cnVzdGVkIGNvbnRleHQgdHlwZXMgYXJlIHN1cHBvcnRlZD9cclxuICpcclxuICogfCBDb250ZXh0ICAgICAgICAgICAgIHwgTm90ZXMgICAgICAgICAgfFxyXG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS18XHJcbiAqIHwgYCRzY2UuSFRNTGAgICAgICAgICB8IEZvciBIVE1MIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIFRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gZGlyZWN0aXZlIHVzZXMgdGhpcyBjb250ZXh0IGZvciBiaW5kaW5ncy4gSWYgYW4gdW5zYWZlIHZhbHVlIGlzIGVuY291bnRlcmVkIGFuZCB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfSBtb2R1bGUgaXMgcHJlc2VudCB0aGlzIHdpbGwgc2FuaXRpemUgdGhlIHZhbHVlIGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIHxcclxuICogfCBgJHNjZS5DU1NgICAgICAgICAgIHwgRm9yIENTUyB0aGF0J3Mgc2FmZSB0byBzb3VyY2UgaW50byB0aGUgYXBwbGljYXRpb24uICBDdXJyZW50bHkgdW51c2VkLiAgRmVlbCBmcmVlIHRvIHVzZSBpdCBpbiB5b3VyIG93biBkaXJlY3RpdmVzLiB8XHJcbiAqIHwgYCRzY2UuVVJMYCAgICAgICAgICB8IEZvciBVUkxzIHRoYXQgYXJlIHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLiAgQ3VycmVudGx5IHVudXNlZCAoYDxhIGhyZWY9YCBhbmQgYDxpbWcgc3JjPWAgc2FuaXRpemUgdGhlaXIgdXJscyBhbmQgZG9uJ3QgY29uc3RpdHV0ZSBhbiBTQ0UgY29udGV4dC4gfFxyXG4gKiB8IGAkc2NlLlJFU09VUkNFX1VSTGAgfCBGb3IgVVJMcyB0aGF0IGFyZSBub3Qgb25seSBzYWZlIHRvIGZvbGxvdyBhcyBsaW5rcywgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSBhbHNvIHNhZmUgdG8gaW5jbHVkZSBpbiB5b3VyIGFwcGxpY2F0aW9uLiAgRXhhbXBsZXMgaW5jbHVkZSBgbmctaW5jbHVkZWAsIGBzcmNgIC8gYG5nU3JjYCBiaW5kaW5ncyBmb3IgdGFncyBvdGhlciB0aGFuIGBJTUdgIChlLmcuIGBJRlJBTUVgLCBgT0JKRUNUYCwgZXRjLikgIDxicj48YnI+Tm90ZSB0aGF0IGAkc2NlLlJFU09VUkNFX1VSTGAgbWFrZXMgYSBzdHJvbmdlciBzdGF0ZW1lbnQgYWJvdXQgdGhlIFVSTCB0aGFuIGAkc2NlLlVSTGAgZG9lcyBhbmQgdGhlcmVmb3JlIGNvbnRleHRzIHJlcXVpcmluZyB2YWx1ZXMgdHJ1c3RlZCBmb3IgYCRzY2UuUkVTT1VSQ0VfVVJMYCBjYW4gYmUgdXNlZCBhbnl3aGVyZSB0aGF0IHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5VUkxgIGFyZSByZXF1aXJlZC4gfFxyXG4gKiB8IGAkc2NlLkpTYCAgICAgICAgICAgfCBGb3IgSmF2YVNjcmlwdCB0aGF0IGlzIHNhZmUgdG8gZXhlY3V0ZSBpbiB5b3VyIGFwcGxpY2F0aW9uJ3MgY29udGV4dC4gIEN1cnJlbnRseSB1bnVzZWQuICBGZWVsIGZyZWUgdG8gdXNlIGl0IGluIHlvdXIgb3duIGRpcmVjdGl2ZXMuIHxcclxuICpcclxuICogIyMgRm9ybWF0IG9mIGl0ZW1zIGluIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCByZXNvdXJjZVVybFdoaXRlbGlzdH0ve0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0IEJsYWNrbGlzdH0gPGEgbmFtZT1cInJlc291cmNlVXJsUGF0dGVybkl0ZW1cIj48L2E+XHJcbiAqXHJcbiAqICBFYWNoIGVsZW1lbnQgaW4gdGhlc2UgYXJyYXlzIG11c3QgYmUgb25lIG9mIHRoZSBmb2xsb3dpbmc6XHJcbiAqXHJcbiAqICAtICoqJ3NlbGYnKipcclxuICogICAgLSBUaGUgc3BlY2lhbCAqKnN0cmluZyoqLCBgJ3NlbGYnYCwgY2FuIGJlIHVzZWQgdG8gbWF0Y2ggYWdhaW5zdCBhbGwgVVJMcyBvZiB0aGUgKipzYW1lXHJcbiAqICAgICAgZG9tYWluKiogYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHVzaW5nIHRoZSAqKnNhbWUgcHJvdG9jb2wqKi5cclxuICogIC0gKipTdHJpbmcqKiAoZXhjZXB0IHRoZSBzcGVjaWFsIHZhbHVlIGAnc2VsZidgKVxyXG4gKiAgICAtIFRoZSBzdHJpbmcgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBmdWxsICpub3JtYWxpemVkIC8gYWJzb2x1dGUgVVJMKiBvZiB0aGUgcmVzb3VyY2VcclxuICogICAgICBiZWluZyB0ZXN0ZWQgKHN1YnN0cmluZyBtYXRjaGVzIGFyZSBub3QgZ29vZCBlbm91Z2guKVxyXG4gKiAgICAtIFRoZXJlIGFyZSBleGFjdGx5ICoqdHdvIHdpbGRjYXJkIHNlcXVlbmNlcyoqIC0gYCpgIGFuZCBgKipgLiAgQWxsIG90aGVyIGNoYXJhY3RlcnNcclxuICogICAgICBtYXRjaCB0aGVtc2VsdmVzLlxyXG4gKiAgICAtIGAqYDogbWF0Y2hlcyB6ZXJvIG9yIG1vcmUgb2NjdXJyZW5jZXMgb2YgYW55IGNoYXJhY3RlciBvdGhlciB0aGFuIG9uZSBvZiB0aGUgZm9sbG93aW5nIDZcclxuICogICAgICBjaGFyYWN0ZXJzOiAnYDpgJywgJ2AvYCcsICdgLmAnLCAnYD9gJywgJ2AmYCcgYW5kICc7Jy4gIEl0J3MgYSB1c2VmdWwgd2lsZGNhcmQgZm9yIHVzZVxyXG4gKiAgICAgIGluIGEgd2hpdGVsaXN0LlxyXG4gKiAgICAtIGAqKmA6IG1hdGNoZXMgemVybyBvciBtb3JlIG9jY3VycmVuY2VzIG9mICphbnkqIGNoYXJhY3Rlci4gIEFzIHN1Y2gsIGl0J3Mgbm90XHJcbiAqICAgICAgbm90IGFwcHJvcHJpYXRlIHRvIHVzZSBpbiBmb3IgYSBzY2hlbWUsIGRvbWFpbiwgZXRjLiBhcyBpdCB3b3VsZCBtYXRjaCB0b28gbXVjaC4gIChlLmcuXHJcbiAqICAgICAgaHR0cDovLyoqLmV4YW1wbGUuY29tLyB3b3VsZCBtYXRjaCBodHRwOi8vZXZpbC5jb20vP2lnbm9yZT0uZXhhbXBsZS5jb20vIGFuZCB0aGF0IG1pZ2h0XHJcbiAqICAgICAgbm90IGhhdmUgYmVlbiB0aGUgaW50ZW50aW9uLikgIEl0cyB1c2FnZSBhdCB0aGUgdmVyeSBlbmQgb2YgdGhlIHBhdGggaXMgb2suICAoZS5nLlxyXG4gKiAgICAgIGh0dHA6Ly9mb28uZXhhbXBsZS5jb20vdGVtcGxhdGVzLyoqKS5cclxuICogIC0gKipSZWdFeHAqKiAoKnNlZSBjYXZlYXQgYmVsb3cqKVxyXG4gKiAgICAtICpDYXZlYXQqOiAgV2hpbGUgcmVndWxhciBleHByZXNzaW9ucyBhcmUgcG93ZXJmdWwgYW5kIG9mZmVyIGdyZWF0IGZsZXhpYmlsaXR5LCAgdGhlaXIgc3ludGF4XHJcbiAqICAgICAgKGFuZCBhbGwgdGhlIGluZXZpdGFibGUgZXNjYXBpbmcpIG1ha2VzIHRoZW0gKmhhcmRlciB0byBtYWludGFpbiouICBJdCdzIGVhc3kgdG9cclxuICogICAgICBhY2NpZGVudGFsbHkgaW50cm9kdWNlIGEgYnVnIHdoZW4gb25lIHVwZGF0ZXMgYSBjb21wbGV4IGV4cHJlc3Npb24gKGltaG8sIGFsbCByZWdleGVzIHNob3VsZFxyXG4gKiAgICAgIGhhdmUgZ29vZCB0ZXN0IGNvdmVyYWdlLikuICBGb3IgaW5zdGFuY2UsIHRoZSB1c2Ugb2YgYC5gIGluIHRoZSByZWdleCBpcyBjb3JyZWN0IG9ubHkgaW4gYVxyXG4gKiAgICAgIHNtYWxsIG51bWJlciBvZiBjYXNlcy4gIEEgYC5gIGNoYXJhY3RlciBpbiB0aGUgcmVnZXggdXNlZCB3aGVuIG1hdGNoaW5nIHRoZSBzY2hlbWUgb3IgYVxyXG4gKiAgICAgIHN1YmRvbWFpbiBjb3VsZCBiZSBtYXRjaGVkIGFnYWluc3QgYSBgOmAgb3IgbGl0ZXJhbCBgLmAgdGhhdCB3YXMgbGlrZWx5IG5vdCBpbnRlbmRlZC4gICBJdFxyXG4gKiAgICAgIGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgdGhlIHN0cmluZyBwYXR0ZXJucyBhbmQgb25seSBmYWxsIGJhY2sgdG8gcmVndWxhciBleHByZXNzaW9uc1xyXG4gKiAgICAgIGlmIHRoZXkgYXMgYSBsYXN0IHJlc29ydC5cclxuICogICAgLSBUaGUgcmVndWxhciBleHByZXNzaW9uIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVnRXhwIChpLmUuIG5vdCBhIHN0cmluZy4pICBJdCBpc1xyXG4gKiAgICAgIG1hdGNoZWQgYWdhaW5zdCB0aGUgKiplbnRpcmUqKiAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlIGJlaW5nIHRlc3RlZFxyXG4gKiAgICAgIChldmVuIHdoZW4gdGhlIFJlZ0V4cCBkaWQgbm90IGhhdmUgdGhlIGBeYCBhbmQgYCRgIGNvZGVzLikgIEluIGFkZGl0aW9uLCBhbnkgZmxhZ3NcclxuICogICAgICBwcmVzZW50IG9uIHRoZSBSZWdFeHAgKHN1Y2ggYXMgbXVsdGlsaW5lLCBnbG9iYWwsIGlnbm9yZUNhc2UpIGFyZSBpZ25vcmVkLlxyXG4gKiAgICAtIElmIHlvdSBhcmUgZ2VuZXJhdGluZyB5b3VyIEphdmFTY3JpcHQgZnJvbSBzb21lIG90aGVyIHRlbXBsYXRpbmcgZW5naW5lIChub3RcclxuICogICAgICByZWNvbW1lbmRlZCwgZS5nLiBpbiBpc3N1ZSBbIzQwMDZdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzQwMDYpKSxcclxuICogICAgICByZW1lbWJlciB0byBlc2NhcGUgeW91ciByZWd1bGFyIGV4cHJlc3Npb24gKGFuZCBiZSBhd2FyZSB0aGF0IHlvdSBtaWdodCBuZWVkIG1vcmUgdGhhblxyXG4gKiAgICAgIG9uZSBsZXZlbCBvZiBlc2NhcGluZyBkZXBlbmRpbmcgb24geW91ciB0ZW1wbGF0aW5nIGVuZ2luZSBhbmQgdGhlIHdheSB5b3UgaW50ZXJwb2xhdGVkXHJcbiAqICAgICAgdGhlIHZhbHVlLikgIERvIG1ha2UgdXNlIG9mIHlvdXIgcGxhdGZvcm0ncyBlc2NhcGluZyBtZWNoYW5pc20gYXMgaXQgbWlnaHQgYmUgZ29vZFxyXG4gKiAgICAgIGVub3VnaCBiZWZvcmUgY29kaW5nIHlvdXIgb3duLiAgZS5nLiBSdWJ5IGhhc1xyXG4gKiAgICAgIFtSZWdleHAuZXNjYXBlKHN0cildKGh0dHA6Ly93d3cucnVieS1kb2Mub3JnL2NvcmUtMi4wLjAvUmVnZXhwLmh0bWwjbWV0aG9kLWMtZXNjYXBlKVxyXG4gKiAgICAgIGFuZCBQeXRob24gaGFzIFtyZS5lc2NhcGVdKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9yZS5odG1sI3JlLmVzY2FwZSkuXHJcbiAqICAgICAgSmF2YXNjcmlwdCBsYWNrcyBhIHNpbWlsYXIgYnVpbHQgaW4gZnVuY3Rpb24gZm9yIGVzY2FwaW5nLiAgVGFrZSBhIGxvb2sgYXQgR29vZ2xlXHJcbiAqICAgICAgQ2xvc3VyZSBsaWJyYXJ5J3MgW2dvb2cuc3RyaW5nLnJlZ0V4cEVzY2FwZShzKV0oXHJcbiAqICAgICAgaHR0cDovL2RvY3MuY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC9jbG9zdXJlX2dvb2dfc3RyaW5nX3N0cmluZy5qcy5zb3VyY2UuaHRtbCNsaW5lOTYyKS5cclxuICpcclxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBmb3IgYW4gZXhhbXBsZS5cclxuICpcclxuICogIyMgU2hvdyBtZSBhbiBleGFtcGxlIHVzaW5nIFNDRS5cclxuICpcclxuICogPGV4YW1wbGUgbW9kdWxlPVwibXlTY2VBcHBcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxyXG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgIDxkaXYgbmctY29udHJvbGxlcj1cIkFwcENvbnRyb2xsZXIgYXMgbXlDdHJsXCI+XHJcbiAqICAgICA8aSBuZy1iaW5kLWh0bWw9XCJteUN0cmwuZXhwbGljaXRseVRydXN0ZWRIdG1sXCIgaWQ9XCJleHBsaWNpdGx5VHJ1c3RlZEh0bWxcIj48L2k+PGJyPjxicj5cclxuICogICAgIDxiPlVzZXIgY29tbWVudHM8L2I+PGJyPlxyXG4gKiAgICAgQnkgZGVmYXVsdCwgSFRNTCB0aGF0IGlzbid0IGV4cGxpY2l0bHkgdHJ1c3RlZCAoZS5nLiBBbGljZSdzIGNvbW1lbnQpIGlzIHNhbml0aXplZCB3aGVuXHJcbiAqICAgICAkc2FuaXRpemUgaXMgYXZhaWxhYmxlLiAgSWYgJHNhbml0aXplIGlzbid0IGF2YWlsYWJsZSwgdGhpcyByZXN1bHRzIGluIGFuIGVycm9yIGluc3RlYWQgb2YgYW5cclxuICogICAgIGV4cGxvaXQuXHJcbiAqICAgICA8ZGl2IGNsYXNzPVwid2VsbFwiPlxyXG4gKiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInVzZXJDb21tZW50IGluIG15Q3RybC51c2VyQ29tbWVudHNcIj5cclxuICogICAgICAgICA8Yj57e3VzZXJDb21tZW50Lm5hbWV9fTwvYj46XHJcbiAqICAgICAgICAgPHNwYW4gbmctYmluZC1odG1sPVwidXNlckNvbW1lbnQuaHRtbENvbW1lbnRcIiBjbGFzcz1cImh0bWxDb21tZW50XCI+PC9zcGFuPlxyXG4gKiAgICAgICAgIDxicj5cclxuICogICAgICAgPC9kaXY+XHJcbiAqICAgICA8L2Rpdj5cclxuICogICA8L2Rpdj5cclxuICogPC9maWxlPlxyXG4gKlxyXG4gKiA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAqICAgYW5ndWxhci5tb2R1bGUoJ215U2NlQXBwJywgWyduZ1Nhbml0aXplJ10pXHJcbiAqICAgICAuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIFsnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnLCAnJHNjZScsXHJcbiAqICAgICAgIGZ1bmN0aW9uKCRodHRwLCAkdGVtcGxhdGVDYWNoZSwgJHNjZSkge1xyXG4gKiAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICogICAgICAgICAkaHR0cC5nZXQoXCJ0ZXN0X2RhdGEuanNvblwiLCB7Y2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuc3VjY2VzcyhmdW5jdGlvbih1c2VyQ29tbWVudHMpIHtcclxuICogICAgICAgICAgIHNlbGYudXNlckNvbW1lbnRzID0gdXNlckNvbW1lbnRzO1xyXG4gKiAgICAgICAgIH0pO1xyXG4gKiAgICAgICAgIHNlbGYuZXhwbGljaXRseVRydXN0ZWRIdG1sID0gJHNjZS50cnVzdEFzSHRtbChcclxuICogICAgICAgICAgICAgJzxzcGFuIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD0mcXVvdDtFeHBsaWNpdGx5IHRydXN0ZWQgSFRNTCBieXBhc3NlcyAnICtcclxuICogICAgICAgICAgICAgJ3Nhbml0aXphdGlvbi4mcXVvdDtcIj5Ib3ZlciBvdmVyIHRoaXMgdGV4dC48L3NwYW4+Jyk7XHJcbiAqICAgICAgIH1dKTtcclxuICogPC9maWxlPlxyXG4gKlxyXG4gKiA8ZmlsZSBuYW1lPVwidGVzdF9kYXRhLmpzb25cIj5cclxuICogW1xyXG4gKiAgIHsgXCJuYW1lXCI6IFwiQWxpY2VcIixcclxuICogICAgIFwiaHRtbENvbW1lbnRcIjpcclxuICogICAgICAgICBcIjxzcGFuIG9ubW91c2VvdmVyPSd0aGlzLnRleHRDb250ZW50PVxcXCJQV04zRCFcXFwiJz5JcyA8aT5hbnlvbmU8L2k+IHJlYWRpbmcgdGhpcz88L3NwYW4+XCJcclxuICogICB9LFxyXG4gKiAgIHsgXCJuYW1lXCI6IFwiQm9iXCIsXHJcbiAqICAgICBcImh0bWxDb21tZW50XCI6IFwiPGk+WWVzITwvaT4gIEFtIEkgdGhlIG9ubHkgb3RoZXIgb25lP1wiXHJcbiAqICAgfVxyXG4gKiBdXHJcbiAqIDwvZmlsZT5cclxuICpcclxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgIGRlc2NyaWJlKCdTQ0UgZG9jIGRlbW8nLCBmdW5jdGlvbigpIHtcclxuICogICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdW50cnVzdGVkIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcuaHRtbENvbW1lbnQnKSkuZmlyc3QoKS5nZXRJbm5lckh0bWwoKSlcclxuICogICAgICAgICAgIC50b0JlKCc8c3Bhbj5JcyA8aT5hbnlvbmU8L2k+IHJlYWRpbmcgdGhpcz88L3NwYW4+Jyk7XHJcbiAqICAgICB9KTtcclxuICpcclxuICogICAgIGl0KCdzaG91bGQgTk9UIHNhbml0aXplIGV4cGxpY2l0bHkgdHJ1c3RlZCB2YWx1ZXMnLCBmdW5jdGlvbigpIHtcclxuICogICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2V4cGxpY2l0bHlUcnVzdGVkSHRtbCcpKS5nZXRJbm5lckh0bWwoKSkudG9CZShcclxuICogICAgICAgICAgICc8c3BhbiBvbm1vdXNlb3Zlcj1cInRoaXMudGV4dENvbnRlbnQ9JnF1b3Q7RXhwbGljaXRseSB0cnVzdGVkIEhUTUwgYnlwYXNzZXMgJyArXHJcbiAqICAgICAgICAgICAnc2FuaXRpemF0aW9uLiZxdW90O1wiPkhvdmVyIG92ZXIgdGhpcyB0ZXh0Ljwvc3Bhbj4nKTtcclxuICogICAgIH0pO1xyXG4gKiAgIH0pO1xyXG4gKiA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICpcclxuICpcclxuICogIyMgQ2FuIEkgZGlzYWJsZSBTQ0UgY29tcGxldGVseT9cclxuICpcclxuICogWWVzLCB5b3UgY2FuLiAgSG93ZXZlciwgdGhpcyBpcyBzdHJvbmdseSBkaXNjb3VyYWdlZC4gIFNDRSBnaXZlcyB5b3UgYSBsb3Qgb2Ygc2VjdXJpdHkgYmVuZWZpdHNcclxuICogZm9yIGxpdHRsZSBjb2Rpbmcgb3ZlcmhlYWQuICBJdCB3aWxsIGJlIG11Y2ggaGFyZGVyIHRvIHRha2UgYW4gU0NFIGRpc2FibGVkIGFwcGxpY2F0aW9uIGFuZFxyXG4gKiBlaXRoZXIgc2VjdXJlIGl0IG9uIHlvdXIgb3duIG9yIGVuYWJsZSBTQ0UgYXQgYSBsYXRlciBzdGFnZS4gIEl0IG1pZ2h0IG1ha2Ugc2Vuc2UgdG8gZGlzYWJsZSBTQ0VcclxuICogZm9yIGNhc2VzIHdoZXJlIHlvdSBoYXZlIGEgbG90IG9mIGV4aXN0aW5nIGNvZGUgdGhhdCB3YXMgd3JpdHRlbiBiZWZvcmUgU0NFIHdhcyBpbnRyb2R1Y2VkIGFuZFxyXG4gKiB5b3UncmUgbWlncmF0aW5nIHRoZW0gYSBtb2R1bGUgYXQgYSB0aW1lLlxyXG4gKlxyXG4gKiBUaGF0IHNhaWQsIGhlcmUncyBob3cgeW91IGNhbiBjb21wbGV0ZWx5IGRpc2FibGUgU0NFOlxyXG4gKlxyXG4gKiBgYGBcclxuICogYW5ndWxhci5tb2R1bGUoJ215QXBwV2l0aFNjZURpc2FibGVkbXlBcHAnLCBbXSkuY29uZmlnKGZ1bmN0aW9uKCRzY2VQcm92aWRlcikge1xyXG4gKiAgIC8vIENvbXBsZXRlbHkgZGlzYWJsZSBTQ0UuICBGb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IVxyXG4gKiAgIC8vIERvIG5vdCB1c2UgaW4gbmV3IHByb2plY3RzLlxyXG4gKiAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcclxuICogfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKi9cclxuLyoganNoaW50IG1heGxlbjogMTAwICovXHJcblxyXG5mdW5jdGlvbiAkU2NlUHJvdmlkZXIoKSB7XHJcbiAgdmFyIGVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJHNjZVByb3ZpZGVyI2VuYWJsZWRcclxuICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFuPX0gdmFsdWUgSWYgcHJvdmlkZWQsIHRoZW4gZW5hYmxlcy9kaXNhYmxlcyBTQ0UuXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogRW5hYmxlcy9kaXNhYmxlcyBTQ0UgYW5kIHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWUuXHJcbiAgICovXHJcbiAgdGhpcy5lbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIGVuYWJsZWQgPSAhIXZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVuYWJsZWQ7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qIERlc2lnbiBub3RlcyBvbiB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBmb3IgU0NFLlxyXG4gICAqXHJcbiAgICogVGhlIEFQSSBjb250cmFjdCBmb3IgdGhlIFNDRSBkZWxlZ2F0ZVxyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiBUaGUgU0NFIGRlbGVnYXRlIG9iamVjdCBtdXN0IHByb3ZpZGUgdGhlIGZvbGxvd2luZyAzIG1ldGhvZHM6XHJcbiAgICpcclxuICAgKiAtIHRydXN0QXMoY29udGV4dEVudW0sIHZhbHVlKVxyXG4gICAqICAgICBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHRlbGwgdGhlIFNDRSBzZXJ2aWNlIHRoYXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIE9LIHRvIHVzZSBpbiB0aGVcclxuICAgKiAgICAgY29udGV4dHMgc3BlY2lmaWVkIGJ5IGNvbnRleHRFbnVtLiAgSXQgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBhY2NlcHRlZCBieVxyXG4gICAqICAgICBnZXRUcnVzdGVkKCkgZm9yIGEgY29tcGF0aWJsZSBjb250ZXh0RW51bSBhbmQgcmV0dXJuIHRoaXMgdmFsdWUuXHJcbiAgICpcclxuICAgKiAtIHZhbHVlT2YodmFsdWUpXHJcbiAgICogICAgIEZvciB2YWx1ZXMgdGhhdCB3ZXJlIG5vdCBwcm9kdWNlZCBieSB0cnVzdEFzKCksIHJldHVybiB0aGVtIGFzIGlzLiAgRm9yIHZhbHVlcyB0aGF0IHdlcmVcclxuICAgKiAgICAgcHJvZHVjZWQgYnkgdHJ1c3RBcygpLCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgdmFsdWUgdG8gdHJ1c3RBcy4gIEJhc2ljYWxseSwgaWZcclxuICAgKiAgICAgdHJ1c3RBcyBpcyB3cmFwcGluZyB0aGUgZ2l2ZW4gdmFsdWVzIGludG8gc29tZSB0eXBlLCB0aGlzIG9wZXJhdGlvbiB1bndyYXBzIGl0IHdoZW4gZ2l2ZW5cclxuICAgKiAgICAgc3VjaCBhIHZhbHVlLlxyXG4gICAqXHJcbiAgICogLSBnZXRUcnVzdGVkKGNvbnRleHRFbnVtLCB2YWx1ZSlcclxuICAgKiAgICAgVGhpcyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIHRoZSBhIHZhbHVlIHRoYXQgaXMgc2FmZSB0byB1c2UgaW4gdGhlIGNvbnRleHQgc3BlY2lmaWVkIGJ5XHJcbiAgICogICAgIGNvbnRleHRFbnVtIG9yIHRocm93IGFuZCBleGNlcHRpb24gb3RoZXJ3aXNlLlxyXG4gICAqXHJcbiAgICogTk9URTogVGhpcyBjb250cmFjdCBkZWxpYmVyYXRlbHkgZG9lcyBOT1Qgc3RhdGUgdGhhdCB2YWx1ZXMgcmV0dXJuZWQgYnkgdHJ1c3RBcygpIG11c3QgYmVcclxuICAgKiBvcGFxdWUgb3Igd3JhcHBlZCBpbiBzb21lIGhvbGRlciBvYmplY3QuICBUaGF0IGhhcHBlbnMgdG8gYmUgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsLiAgRm9yXHJcbiAgICogaW5zdGFuY2UsIGFuIGltcGxlbWVudGF0aW9uIGNvdWxkIG1haW50YWluIGEgcmVnaXN0cnkgb2YgYWxsIHRydXN0ZWQgb2JqZWN0cyBieSBjb250ZXh0LiAgSW5cclxuICAgKiBzdWNoIGEgY2FzZSwgdHJ1c3RBcygpIHdvdWxkIHJldHVybiB0aGUgc2FtZSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGluLiAgZ2V0VHJ1c3RlZCgpIHdvdWxkXHJcbiAgICogcmV0dXJuIHRoZSBzYW1lIG9iamVjdCBwYXNzZWQgaW4gaWYgaXQgd2FzIGZvdW5kIGluIHRoZSByZWdpc3RyeSB1bmRlciBhIGNvbXBhdGlibGUgY29udGV4dCBvclxyXG4gICAqIHRocm93IGFuIGV4Y2VwdGlvbiBvdGhlcndpc2UuICBBbiBpbXBsZW1lbnRhdGlvbiBtaWdodCBvbmx5IHdyYXAgdmFsdWVzIHNvbWUgb2YgdGhlIHRpbWUgYmFzZWRcclxuICAgKiBvbiBzb21lIGNyaXRlcmlhLiAgZ2V0VHJ1c3RlZCgpIG1pZ2h0IHJldHVybiBhIHZhbHVlIGFuZCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uIGZvciBzcGVjaWFsXHJcbiAgICogY29uc3RhbnRzIG9yIG9iamVjdHMgZXZlbiBpZiBub3Qgd3JhcHBlZC4gIEFsbCBzdWNoIGltcGxlbWVudGF0aW9ucyBmdWxmaWxsIHRoaXMgY29udHJhY3QuXHJcbiAgICpcclxuICAgKlxyXG4gICAqIEEgbm90ZSBvbiB0aGUgaW5oZXJpdGFuY2UgbW9kZWwgZm9yIFNDRSBjb250ZXh0c1xyXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqIEkndmUgdXNlZCBpbmhlcml0YW5jZSBhbmQgbWFkZSBSRVNPVVJDRV9VUkwgd3JhcHBlZCB0eXBlcyBhIHN1YnR5cGUgb2YgVVJMIHdyYXBwZWQgdHlwZXMuICBUaGlzXHJcbiAgICogaXMgcHVyZWx5IGFuIGltcGxlbWVudGF0aW9uIGRldGFpbHMuXHJcbiAgICpcclxuICAgKiBUaGUgY29udHJhY3QgaXMgc2ltcGx5IHRoaXM6XHJcbiAgICpcclxuICAgKiAgICAgZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpIHN1Y2NlZWRpbmcgaW1wbGllcyB0aGF0IGdldFRydXN0ZWQoJHNjZS5VUkwsIHZhbHVlKVxyXG4gICAqICAgICB3aWxsIGFsc28gc3VjY2VlZC5cclxuICAgKlxyXG4gICAqIEluaGVyaXRhbmNlIGhhcHBlbnMgdG8gY2FwdHVyZSB0aGlzIGluIGEgbmF0dXJhbCB3YXkuICBJbiBzb21lIGZ1dHVyZSwgd2VcclxuICAgKiBtYXkgbm90IHVzZSBpbmhlcml0YW5jZSBhbnltb3JlLiAgVGhhdCBpcyBPSyBiZWNhdXNlIG5vIGNvZGUgb3V0c2lkZSBvZlxyXG4gICAqIHNjZS5qcyBhbmQgc2NlU3BlY3MuanMgd291bGQgbmVlZCB0byBiZSBhd2FyZSBvZiB0aGlzIGRldGFpbC5cclxuICAgKi9cclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckcGFyc2UnLCAnJHNjZURlbGVnYXRlJywgZnVuY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAkcGFyc2UsICAgJHNjZURlbGVnYXRlKSB7XHJcbiAgICAvLyBQcmVyZXE6IEVuc3VyZSB0aGF0IHdlJ3JlIG5vdCBydW5uaW5nIGluIElFPDExIHF1aXJrcyBtb2RlLiAgSW4gdGhhdCBtb2RlLCBJRSA8IDExIGFsbG93XHJcbiAgICAvLyB0aGUgXCJleHByZXNzaW9uKGphdmFzY3JpcHQgZXhwcmVzc2lvbilcIiBzeW50YXggd2hpY2ggaXMgaW5zZWN1cmUuXHJcbiAgICBpZiAoZW5hYmxlZCAmJiBtc2llIDwgOCkge1xyXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpZXF1aXJrcycsXHJcbiAgICAgICAgJ1N0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGRvZXMgbm90IHN1cHBvcnQgSW50ZXJuZXQgRXhwbG9yZXIgdmVyc2lvbiA8IDExIGluIHF1aXJrcyAnICtcclxuICAgICAgICAnbW9kZS4gIFlvdSBjYW4gZml4IHRoaXMgYnkgYWRkaW5nIHRoZSB0ZXh0IDwhZG9jdHlwZSBodG1sPiB0byB0aGUgdG9wIG9mIHlvdXIgSFRNTCAnICtcclxuICAgICAgICAnZG9jdW1lbnQuICBTZWUgaHR0cDovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcuJHNjZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2NlID0gc2hhbGxvd0NvcHkoU0NFX0NPTlRFWFRTKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjaXNFbmFibGVkXHJcbiAgICAgKiBAa2luZCBmdW5jdGlvblxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgU0NFIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS4gIElmIHlvdSB3YW50IHRvIHNldCB0aGUgdmFsdWUsIHlvdVxyXG4gICAgICogaGF2ZSB0byBkbyBpdCBhdCBtb2R1bGUgY29uZmlnIHRpbWUgb24ge0BsaW5rIG5nLiRzY2VQcm92aWRlciAkc2NlUHJvdmlkZXJ9LlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiBTQ0UgaXMgZW5hYmxlZC5cclxuICAgICAqL1xyXG4gICAgc2NlLmlzRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gZW5hYmxlZDtcclxuICAgIH07XHJcbiAgICBzY2UudHJ1c3RBcyA9ICRzY2VEZWxlZ2F0ZS50cnVzdEFzO1xyXG4gICAgc2NlLmdldFRydXN0ZWQgPSAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZDtcclxuICAgIHNjZS52YWx1ZU9mID0gJHNjZURlbGVnYXRlLnZhbHVlT2Y7XHJcblxyXG4gICAgaWYgKCFlbmFibGVkKSB7XHJcbiAgICAgIHNjZS50cnVzdEFzID0gc2NlLmdldFRydXN0ZWQgPSBmdW5jdGlvbih0eXBlLCB2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XHJcbiAgICAgIHNjZS52YWx1ZU9mID0gaWRlbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnZlcnRzIEFuZ3VsYXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLiAgVGhpcyBpcyBsaWtlIHtAbGlua1xyXG4gICAgICogbmcuJHBhcnNlICRwYXJzZX0gYW5kIGlzIGlkZW50aWNhbCB3aGVuIHRoZSBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCBjb25zdGFudC4gIE90aGVyd2lzZSwgaXRcclxuICAgICAqIHdyYXBzIHRoZSBleHByZXNzaW9uIGluIGEgY2FsbCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZCgqdHlwZSosXHJcbiAgICAgKiAqcmVzdWx0Kil9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgU0NFIGNvbnRleHQgaW4gd2hpY2ggdGhpcyByZXN1bHQgd2lsbCBiZSB1c2VkLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAgICAgKlxyXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAgICAgKiAgICAgIGBjb250ZXh0YC5cclxuICAgICAqL1xyXG4gICAgc2NlLnBhcnNlQXMgPSBmdW5jdGlvbiBzY2VQYXJzZUFzKHR5cGUsIGV4cHIpIHtcclxuICAgICAgdmFyIHBhcnNlZCA9ICRwYXJzZShleHByKTtcclxuICAgICAgaWYgKHBhcnNlZC5saXRlcmFsICYmIHBhcnNlZC5jb25zdGFudCkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICRwYXJzZShleHByLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHNjZS5nZXRUcnVzdGVkKHR5cGUsIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogRGVsZWdhdGVzIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfS4gIEFzIHN1Y2gsXHJcbiAgICAgKiByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGlzIHRydXN0ZWQgYnkgYW5ndWxhciBmb3IgdXNlIGluIHNwZWNpZmllZCBzdHJpY3QgY29udGV4dHVhbFxyXG4gICAgICogZXNjYXBpbmcgY29udGV4dHMgKHN1Y2ggYXMgbmctYmluZC1odG1sLCBuZy1pbmNsdWRlLCBhbnkgc3JjIGF0dHJpYnV0ZVxyXG4gICAgICogaW50ZXJwb2xhdGlvbiwgYW55IGRvbSBldmVudCBiaW5kaW5nIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIHN1Y2ggYXMgZm9yIG9uY2xpY2ssICBldGMuKVxyXG4gICAgICogdGhhdCB1c2VzIHRoZSBwcm92aWRlZCB2YWx1ZS4gIFNlZSAqIHtAbGluayBuZy4kc2NlICRzY2V9IGZvciBlbmFibGluZyBzdHJpY3QgY29udGV4dHVhbFxyXG4gICAgICogZXNjYXBpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGtpbmQgb2YgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZS4gIGUuZy4gdXJsLFxyXG4gICAgICogICByZXNvdXJjZV91cmwsIGh0bWwsIGpzIGFuZCBjc3MuXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC9zYWZlLlxyXG4gICAgICogQHJldHVybnMgeyp9IEEgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB0byBzdGFuZCBpbiBmb3IgdGhlIHByb3ZpZGVkIGB2YWx1ZWAgaW4gcGxhY2VzXHJcbiAgICAgKiB3aGVyZSBBbmd1bGFyIGV4cGVjdHMgYSAkc2NlLnRydXN0QXMoKSByZXR1cm4gdmFsdWUuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc0h0bWxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzSHRtbCh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5IVE1MLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRydXN0QXMuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkSHRtbFxyXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZEh0bWwodmFsdWUpfSB0byBvYnRhaW4gdGhlIG9yaWdpbmFsIHZhbHVlLiAgKHByaXZpbGVnZWQgZGlyZWN0aXZlc1xyXG4gICAgICogICAgIG9ubHkgYWNjZXB0IGV4cHJlc3Npb25zIHRoYXQgYXJlIGVpdGhlciBsaXRlcmFsIGNvbnN0YW50cyBvciBhcmUgdGhlXHJcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfS4pXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1VybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuVVJMLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRydXN0QXMuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkVXJsXHJcbiAgICAgKiAgICAgJHNjZS5nZXRUcnVzdGVkVXJsKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcclxuICAgICAqICAgICBvbmx5IGFjY2VwdCBleHByZXNzaW9ucyB0aGF0IGFyZSBlaXRoZXIgbGl0ZXJhbCBjb25zdGFudHMgb3IgYXJlIHRoZVxyXG4gICAgICogICAgIHJldHVybiB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNSZXNvdXJjZVVybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gdHJ1c3RBcy5cclxuICAgICAqIEByZXR1cm5zIHsqfSBBbiBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxyXG4gICAgICogICAgICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHZhbHVlKX0gdG8gb2J0YWluIHRoZSBvcmlnaW5hbCB2YWx1ZS4gIChwcml2aWxlZ2VkIGRpcmVjdGl2ZXNcclxuICAgICAqICAgICBvbmx5IGFjY2VwdCBleHByZXNzaW9ucyB0aGF0IGFyZSBlaXRoZXIgbGl0ZXJhbCBjb25zdGFudHMgb3IgYXJlIHRoZSByZXR1cm5cclxuICAgICAqICAgICB2YWx1ZSBvZiB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc30uKVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNKc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNKcyh2YWx1ZSlgIOKGklxyXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5KUywgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB0cnVzdEFzLlxyXG4gICAgICogQHJldHVybnMgeyp9IEFuIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8ge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZEpzXHJcbiAgICAgKiAgICAgJHNjZS5nZXRUcnVzdGVkSnModmFsdWUpfSB0byBvYnRhaW4gdGhlIG9yaWdpbmFsIHZhbHVlLiAgKHByaXZpbGVnZWQgZGlyZWN0aXZlc1xyXG4gICAgICogICAgIG9ubHkgYWNjZXB0IGV4cHJlc3Npb25zIHRoYXQgYXJlIGVpdGhlciBsaXRlcmFsIGNvbnN0YW50cyBvciBhcmUgdGhlXHJcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfS4pXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogRGVsZWdhdGVzIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWRgfS4gIEFzIHN1Y2gsXHJcbiAgICAgKiB0YWtlcyB0aGUgcmVzdWx0IG9mIGEge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyBgJHNjZS50cnVzdEFzYH0oKSBjYWxsIGFuZCByZXR1cm5zIHRoZVxyXG4gICAgICogb3JpZ2luYWxseSBzdXBwbGllZCB2YWx1ZSBpZiB0aGUgcXVlcmllZCBjb250ZXh0IHR5cGUgaXMgYSBzdXBlcnR5cGUgb2YgdGhlIGNyZWF0ZWQgdHlwZS5cclxuICAgICAqIElmIHRoaXMgY29uZGl0aW9uIGlzbid0IHNhdGlzZmllZCwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUga2luZCBvZiBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgdG8gYmUgdXNlZC5cclxuICAgICAqIEBwYXJhbSB7Kn0gbWF5YmVUcnVzdGVkIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzIGAkc2NlLnRydXN0QXNgfVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgY2FsbC5cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgdmFsdWUgdGhlIHdhcyBvcmlnaW5hbGx5IHByb3ZpZGVkIHRvXHJcbiAgICAgKiAgICAgICAgICAgICAge0BsaW5rIG5nLiRzY2UjdHJ1c3RBcyBgJHNjZS50cnVzdEFzYH0gaWYgdmFsaWQgaW4gdGhpcyBjb250ZXh0LlxyXG4gICAgICogICAgICAgICAgICAgIE90aGVyd2lzZSwgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkSHRtbFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRIdG1sKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkhUTUwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cclxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5IVE1MLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZENzc1xyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRDc3ModmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFVybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZEpzXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZEpzKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkpTLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSlMsIHZhbHVlKWBcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzSHRtbFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNIdG1sKGV4cHJlc3Npb24gc3RyaW5nKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuSFRNTCwgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxyXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcclxuICAgICAqXHJcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXHJcbiAgICAgKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cclxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cclxuICAgICAqICAgICAgYGNvbnRleHRgLlxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNDc3NcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzQ3NzKHZhbHVlKWAg4oaSXHJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuQ1NTLCB2YWx1ZSlgfVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXHJcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gYSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxyXG4gICAgICpcclxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ3NcclxuICAgICAqICAgICAgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxyXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpblxyXG4gICAgICogICAgICBgY29udGV4dGAuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1VybFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5VUkwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAgICAgKlxyXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAgICAgKiAgICAgIGBjb250ZXh0YC5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzUmVzb3VyY2VVcmxcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cclxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XHJcbiAgICAgKlxyXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xyXG4gICAgICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXHJcbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXHJcbiAgICAgKiAgICAgIGBjb250ZXh0YC5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzSnNcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzSnModmFsdWUpYCDihpJcclxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5KUywgdmFsdWUpYH1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxyXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IGEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcclxuICAgICAqXHJcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdzXHJcbiAgICAgKiAgICAgIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cclxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW5cclxuICAgICAqICAgICAgYGNvbnRleHRgLlxyXG4gICAgICovXHJcblxyXG4gICAgLy8gU2hvcnRoYW5kIGRlbGVnYXRpb25zLlxyXG4gICAgdmFyIHBhcnNlID0gc2NlLnBhcnNlQXMsXHJcbiAgICAgICAgZ2V0VHJ1c3RlZCA9IHNjZS5nZXRUcnVzdGVkLFxyXG4gICAgICAgIHRydXN0QXMgPSBzY2UudHJ1c3RBcztcclxuXHJcbiAgICBmb3JFYWNoKFNDRV9DT05URVhUUywgZnVuY3Rpb24oZW51bVZhbHVlLCBuYW1lKSB7XHJcbiAgICAgIHZhciBsTmFtZSA9IGxvd2VyY2FzZShuYW1lKTtcclxuICAgICAgc2NlW2NhbWVsQ2FzZShcInBhcnNlX2FzX1wiICsgbE5hbWUpXSA9IGZ1bmN0aW9uKGV4cHIpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2UoZW51bVZhbHVlLCBleHByKTtcclxuICAgICAgfTtcclxuICAgICAgc2NlW2NhbWVsQ2FzZShcImdldF90cnVzdGVkX1wiICsgbE5hbWUpXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldFRydXN0ZWQoZW51bVZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgIH07XHJcbiAgICAgIHNjZVtjYW1lbENhc2UoXCJ0cnVzdF9hc19cIiArIGxOYW1lKV0gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0cnVzdEFzKGVudW1WYWx1ZSwgdmFsdWUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNjZTtcclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBzZXJ2aWNlICEhIVxyXG4gKlxyXG4gKiBAbmFtZSAkc25pZmZlclxyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xyXG4gKiBAcmVxdWlyZXMgJGRvY3VtZW50XHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaGlzdG9yeSBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgaHRtbDUgaGlzdG9yeSBhcGkgP1xyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHRyYW5zaXRpb25zIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCBDU1MgdHJhbnNpdGlvbiBldmVudHMgP1xyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGlvbnMgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IENTUyBhbmltYXRpb24gZXZlbnRzID9cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoaXMgaXMgdmVyeSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgdGVzdGluZyBicm93c2VyJ3MgZmVhdHVyZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiAkU25pZmZlclByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQpIHtcclxuICAgIHZhciBldmVudFN1cHBvcnQgPSB7fSxcclxuICAgICAgICBhbmRyb2lkID1cclxuICAgICAgICAgIGludCgoL2FuZHJvaWQgKFxcZCspLy5leGVjKGxvd2VyY2FzZSgoJHdpbmRvdy5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCkpIHx8IFtdKVsxXSksXHJcbiAgICAgICAgYm94ZWUgPSAvQm94ZWUvaS50ZXN0KCgkd2luZG93Lm5hdmlnYXRvciB8fCB7fSkudXNlckFnZW50KSxcclxuICAgICAgICBkb2N1bWVudCA9ICRkb2N1bWVudFswXSB8fCB7fSxcclxuICAgICAgICB2ZW5kb3JQcmVmaXgsXHJcbiAgICAgICAgdmVuZG9yUmVnZXggPSAvXihNb3p8d2Via2l0fG1zKSg/PVtBLVpdKS8sXHJcbiAgICAgICAgYm9keVN0eWxlID0gZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LnN0eWxlLFxyXG4gICAgICAgIHRyYW5zaXRpb25zID0gZmFsc2UsXHJcbiAgICAgICAgYW5pbWF0aW9ucyA9IGZhbHNlLFxyXG4gICAgICAgIG1hdGNoO1xyXG5cclxuICAgIGlmIChib2R5U3R5bGUpIHtcclxuICAgICAgZm9yICh2YXIgcHJvcCBpbiBib2R5U3R5bGUpIHtcclxuICAgICAgICBpZiAobWF0Y2ggPSB2ZW5kb3JSZWdleC5leGVjKHByb3ApKSB7XHJcbiAgICAgICAgICB2ZW5kb3JQcmVmaXggPSBtYXRjaFswXTtcclxuICAgICAgICAgIHZlbmRvclByZWZpeCA9IHZlbmRvclByZWZpeC5zdWJzdHIoMCwgMSkudG9VcHBlckNhc2UoKSArIHZlbmRvclByZWZpeC5zdWJzdHIoMSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdmVuZG9yUHJlZml4KSB7XHJcbiAgICAgICAgdmVuZG9yUHJlZml4ID0gKCdXZWJraXRPcGFjaXR5JyBpbiBib2R5U3R5bGUpICYmICd3ZWJraXQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0cmFuc2l0aW9ucyA9ICEhKCgndHJhbnNpdGlvbicgaW4gYm9keVN0eWxlKSB8fCAodmVuZG9yUHJlZml4ICsgJ1RyYW5zaXRpb24nIGluIGJvZHlTdHlsZSkpO1xyXG4gICAgICBhbmltYXRpb25zICA9ICEhKCgnYW5pbWF0aW9uJyBpbiBib2R5U3R5bGUpIHx8ICh2ZW5kb3JQcmVmaXggKyAnQW5pbWF0aW9uJyBpbiBib2R5U3R5bGUpKTtcclxuXHJcbiAgICAgIGlmIChhbmRyb2lkICYmICghdHJhbnNpdGlvbnMgfHwgICFhbmltYXRpb25zKSkge1xyXG4gICAgICAgIHRyYW5zaXRpb25zID0gaXNTdHJpbmcoZG9jdW1lbnQuYm9keS5zdHlsZS53ZWJraXRUcmFuc2l0aW9uKTtcclxuICAgICAgICBhbmltYXRpb25zID0gaXNTdHJpbmcoZG9jdW1lbnQuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIC8vIEFuZHJvaWQgaGFzIGhpc3RvcnkucHVzaFN0YXRlLCBidXQgaXQgZG9lcyBub3QgdXBkYXRlIGxvY2F0aW9uIGNvcnJlY3RseVxyXG4gICAgICAvLyBzbyBsZXQncyBub3QgdXNlIHRoZSBoaXN0b3J5IEFQSSBhdCBhbGwuXHJcbiAgICAgIC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MTc0NzFcclxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTA0XHJcblxyXG4gICAgICAvLyBvbGRlciB3ZWJraXQgYnJvd3NlciAoNTMzLjkpIG9uIEJveGVlIGJveCBoYXMgZXhhY3RseSB0aGUgc2FtZSBwcm9ibGVtIGFzIEFuZHJvaWQgaGFzXHJcbiAgICAgIC8vIHNvIGxldCdzIG5vdCB1c2UgdGhlIGhpc3RvcnkgQVBJIGFsc29cclxuICAgICAgLy8gV2UgYXJlIHB1cnBvc2VmdWxseSB1c2luZyBgIShhbmRyb2lkIDwgNClgIHRvIGNvdmVyIHRoZSBjYXNlIHdoZW4gYGFuZHJvaWRgIGlzIHVuZGVmaW5lZFxyXG4gICAgICAvLyBqc2hpbnQgLVcwMThcclxuICAgICAgaGlzdG9yeTogISEoJHdpbmRvdy5oaXN0b3J5ICYmICR3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUgJiYgIShhbmRyb2lkIDwgNCkgJiYgIWJveGVlKSxcclxuICAgICAgLy8ganNoaW50ICtXMDE4XHJcbiAgICAgIGhhc0V2ZW50OiBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIC8vIElFOSBpbXBsZW1lbnRzICdpbnB1dCcgZXZlbnQgaXQncyBzbyBmdWJhcmVkIHRoYXQgd2UgcmF0aGVyIHByZXRlbmQgdGhhdCBpdCBkb2Vzbid0IGhhdmVcclxuICAgICAgICAvLyBpdC4gSW4gcGFydGljdWxhciB0aGUgZXZlbnQgaXMgbm90IGZpcmVkIHdoZW4gYmFja3NwYWNlIG9yIGRlbGV0ZSBrZXkgYXJlIHByZXNzZWQgb3JcclxuICAgICAgICAvLyB3aGVuIGN1dCBvcGVyYXRpb24gaXMgcGVyZm9ybWVkLlxyXG4gICAgICAgIC8vIElFMTArIGltcGxlbWVudHMgJ2lucHV0JyBldmVudCBidXQgaXQgZXJyb25lb3VzbHkgZmlyZXMgdW5kZXIgdmFyaW91cyBzaXR1YXRpb25zLFxyXG4gICAgICAgIC8vIGUuZy4gd2hlbiBwbGFjZWhvbGRlciBjaGFuZ2VzLCBvciBhIGZvcm0gaXMgZm9jdXNlZC5cclxuICAgICAgICBpZiAoZXZlbnQgPT09ICdpbnB1dCcgJiYgbXNpZSA8PSAxMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQoZXZlbnRTdXBwb3J0W2V2ZW50XSkpIHtcclxuICAgICAgICAgIHZhciBkaXZFbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIGV2ZW50U3VwcG9ydFtldmVudF0gPSAnb24nICsgZXZlbnQgaW4gZGl2RWxtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGV2ZW50U3VwcG9ydFtldmVudF07XHJcbiAgICAgIH0sXHJcbiAgICAgIGNzcDogY3NwKCksXHJcbiAgICAgIHZlbmRvclByZWZpeDogdmVuZG9yUHJlZml4LFxyXG4gICAgICB0cmFuc2l0aW9uczogdHJhbnNpdGlvbnMsXHJcbiAgICAgIGFuaW1hdGlvbnM6IGFuaW1hdGlvbnMsXHJcbiAgICAgIGFuZHJvaWQ6IGFuZHJvaWRcclxuICAgIH07XHJcbiAgfV07XHJcbn1cclxuXHJcbnZhciAkY29tcGlsZU1pbkVyciA9IG1pbkVycignJGNvbXBpbGUnKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYCR0ZW1wbGF0ZVJlcXVlc3RgIHNlcnZpY2UgZG93bmxvYWRzIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZSB1c2luZyBgJGh0dHBgIGFuZCwgdXBvbiBzdWNjZXNzLFxyXG4gKiBzdG9yZXMgdGhlIGNvbnRlbnRzIGluc2lkZSBvZiBgJHRlbXBsYXRlQ2FjaGVgLiBJZiB0aGUgSFRUUCByZXF1ZXN0IGZhaWxzIG9yIHRoZSByZXNwb25zZSBkYXRhXHJcbiAqIG9mIHRoZSBIVFRQIHJlcXVlc3QgaXMgZW1wdHksIGEgYCRjb21waWxlYCBlcnJvciB3aWxsIGJlIHRocm93biAodGhlIGV4Y2VwdGlvbiBjYW4gYmUgdGh3YXJ0ZWRcclxuICogYnkgc2V0dGluZyB0aGUgMm5kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gdG8gdHJ1ZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0cGwgVGhlIEhUVFAgcmVxdWVzdCB0ZW1wbGF0ZSBVUkxcclxuICogQHBhcmFtIHtib29sZWFuPX0gaWdub3JlUmVxdWVzdEVycm9yIFdoZXRoZXIgb3Igbm90IHRvIGlnbm9yZSB0aGUgZXhjZXB0aW9uIHdoZW4gdGhlIHJlcXVlc3QgZmFpbHMgb3IgdGhlIHRlbXBsYXRlIGlzIGVtcHR5XHJcbiAqXHJcbiAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBIVFRQIFByb21pc2UgZm9yIHRoZSBnaXZlbi5cclxuICpcclxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRvdGFsUGVuZGluZ1JlcXVlc3RzIHRvdGFsIGFtb3VudCBvZiBwZW5kaW5nIHRlbXBsYXRlIHJlcXVlc3RzIGJlaW5nIGRvd25sb2FkZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIoKSB7XHJcbiAgdGhpcy4kZ2V0ID0gWyckdGVtcGxhdGVDYWNoZScsICckaHR0cCcsICckcScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlLCAkaHR0cCwgJHEpIHtcclxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3RGbih0cGwsIGlnbm9yZVJlcXVlc3RFcnJvcikge1xyXG4gICAgICBoYW5kbGVSZXF1ZXN0Rm4udG90YWxQZW5kaW5nUmVxdWVzdHMrKztcclxuXHJcbiAgICAgIHZhciB0cmFuc2Zvcm1SZXNwb25zZSA9ICRodHRwLmRlZmF1bHRzICYmICRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO1xyXG5cclxuICAgICAgaWYgKGlzQXJyYXkodHJhbnNmb3JtUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2UgPSB0cmFuc2Zvcm1SZXNwb25zZS5maWx0ZXIoZnVuY3Rpb24odHJhbnNmb3JtZXIpIHtcclxuICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1lciAhPT0gZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmICh0cmFuc2Zvcm1SZXNwb25zZSA9PT0gZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybSkge1xyXG4gICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGh0dHBPcHRpb25zID0ge1xyXG4gICAgICAgIGNhY2hlOiAkdGVtcGxhdGVDYWNoZSxcclxuICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZTogdHJhbnNmb3JtUmVzcG9uc2VcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQodHBsLCBodHRwT3B0aW9ucylcclxuICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgIH0sIGhhbmRsZUVycm9yKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlc3ApIHtcclxuICAgICAgICBpZiAoIWlnbm9yZVJlcXVlc3RFcnJvcikge1xyXG4gICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbG9hZCcsICdGYWlsZWQgdG8gbG9hZCB0ZW1wbGF0ZTogezB9JywgdHBsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cyA9IDA7XHJcblxyXG4gICAgcmV0dXJuIGhhbmRsZVJlcXVlc3RGbjtcclxuICB9XTtcclxufVxyXG5cclxuZnVuY3Rpb24gJCRUZXN0YWJpbGl0eVByb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckbG9jYXRpb24nLFxyXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkYnJvd3NlciwgICAkbG9jYXRpb24pIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lICR0ZXN0YWJpbGl0eVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogVGhlIHByaXZhdGUgJCR0ZXN0YWJpbGl0eSBzZXJ2aWNlIHByb3ZpZGVzIGEgY29sbGVjdGlvbiBvZiBtZXRob2RzIGZvciB1c2Ugd2hlbiBkZWJ1Z2dpbmdcclxuICAgICAqIG9yIGJ5IGF1dG9tYXRlZCB0ZXN0IGFuZCBkZWJ1Z2dpbmcgdG9vbHMuXHJcbiAgICAgKi9cclxuICAgIHZhciB0ZXN0YWJpbGl0eSA9IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNmaW5kQmluZGluZ3NcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBhcmUgYm91bmQgKHZpYSBuZy1iaW5kIG9yIHt7fX0pXHJcbiAgICAgKiB0byBleHByZXNzaW9ucyBtYXRjaGluZyB0aGUgaW5wdXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHJvb3QgdG8gc2VhcmNoIGZyb20uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBUaGUgYmluZGluZyBleHByZXNzaW9uIHRvIG1hdGNoLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRfZXhhY3RNYXRjaCBJZiB0cnVlLCBvbmx5IHJldHVybnMgZXhhY3QgbWF0Y2hlc1xyXG4gICAgICogICAgIGZvciB0aGUgZXhwcmVzc2lvbi4gRmlsdGVycyBhbmQgd2hpdGVzcGFjZSBhcmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgdGVzdGFiaWxpdHkuZmluZEJpbmRpbmdzID0gZnVuY3Rpb24oZWxlbWVudCwgZXhwcmVzc2lvbiwgb3B0X2V4YWN0TWF0Y2gpIHtcclxuICAgICAgdmFyIGJpbmRpbmdzID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduZy1iaW5kaW5nJyk7XHJcbiAgICAgIHZhciBtYXRjaGVzID0gW107XHJcbiAgICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHtcclxuICAgICAgICB2YXIgZGF0YUJpbmRpbmcgPSBhbmd1bGFyLmVsZW1lbnQoYmluZGluZykuZGF0YSgnJGJpbmRpbmcnKTtcclxuICAgICAgICBpZiAoZGF0YUJpbmRpbmcpIHtcclxuICAgICAgICAgIGZvckVhY2goZGF0YUJpbmRpbmcsIGZ1bmN0aW9uKGJpbmRpbmdOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRfZXhhY3RNYXRjaCkge1xyXG4gICAgICAgICAgICAgIHZhciBtYXRjaGVyID0gbmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIGVzY2FwZUZvclJlZ2V4cChleHByZXNzaW9uKSArICcoXFxcXHN8XFxcXHx8JCknKTtcclxuICAgICAgICAgICAgICBpZiAobWF0Y2hlci50ZXN0KGJpbmRpbmdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGJpbmRpbmcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAoYmluZGluZ05hbWUuaW5kZXhPZihleHByZXNzaW9uKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGJpbmRpbmcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIG1hdGNoZXM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNmaW5kTW9kZWxzXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgYXJlIHR3by13YXkgZm91bmQgdmlhIG5nLW1vZGVsIHRvXHJcbiAgICAgKiBleHByZXNzaW9ucyBtYXRjaGluZyB0aGUgaW5wdXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHJvb3QgdG8gc2VhcmNoIGZyb20uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBUaGUgbW9kZWwgZXhwcmVzc2lvbiB0byBtYXRjaC5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2V4YWN0TWF0Y2ggSWYgdHJ1ZSwgb25seSByZXR1cm5zIGV4YWN0IG1hdGNoZXNcclxuICAgICAqICAgICBmb3IgdGhlIGV4cHJlc3Npb24uXHJcbiAgICAgKi9cclxuICAgIHRlc3RhYmlsaXR5LmZpbmRNb2RlbHMgPSBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBvcHRfZXhhY3RNYXRjaCkge1xyXG4gICAgICB2YXIgcHJlZml4ZXMgPSBbJ25nLScsICdkYXRhLW5nLScsICduZ1xcXFw6J107XHJcbiAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgcHJlZml4ZXMubGVuZ3RoOyArK3ApIHtcclxuICAgICAgICB2YXIgYXR0cmlidXRlRXF1YWxzID0gb3B0X2V4YWN0TWF0Y2ggPyAnPScgOiAnKj0nO1xyXG4gICAgICAgIHZhciBzZWxlY3RvciA9ICdbJyArIHByZWZpeGVzW3BdICsgJ21vZGVsJyArIGF0dHJpYnV0ZUVxdWFscyArICdcIicgKyBleHByZXNzaW9uICsgJ1wiXSc7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICByZXR1cm4gZWxlbWVudHM7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNnZXRMb2NhdGlvblxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgZm9yIGdldHRpbmcgdGhlIGxvY2F0aW9uIGluIGEgYnJvd3NlciBhZ25vc3RpYyB3YXkuIFJldHVybnNcclxuICAgICAqICAgICB0aGUgcGF0aCwgc2VhcmNoLCBhbmQgaGFzaC4gKGUuZy4gL3BhdGg/YT1iI2hhc2gpXHJcbiAgICAgKi9cclxuICAgIHRlc3RhYmlsaXR5LmdldExvY2F0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiAkbG9jYXRpb24udXJsKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNzZXRMb2NhdGlvblxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogU2hvcnRjdXQgZm9yIG5hdmlnYXRpbmcgdG8gYSBsb2NhdGlvbiB3aXRob3V0IGRvaW5nIGEgZnVsbCBwYWdlIHJlbG9hZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBsb2NhdGlvbiB1cmwgKHBhdGgsIHNlYXJjaCBhbmQgaGFzaCxcclxuICAgICAqICAgICBlLmcuIC9wYXRoP2E9YiNoYXNoKSB0byBnbyB0by5cclxuICAgICAqL1xyXG4gICAgdGVzdGFiaWxpdHkuc2V0TG9jYXRpb24gPSBmdW5jdGlvbih1cmwpIHtcclxuICAgICAgaWYgKHVybCAhPT0gJGxvY2F0aW9uLnVybCgpKSB7XHJcbiAgICAgICAgJGxvY2F0aW9uLnVybCh1cmwpO1xyXG4gICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSN3aGVuU3RhYmxlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiAkdGltZW91dCBhbmQgJGh0dHAgcmVxdWVzdHMgYXJlIGNvbXBsZXRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICB0ZXN0YWJpbGl0eS53aGVuU3RhYmxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgJGJyb3dzZXIubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyhjYWxsYmFjayk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB0ZXN0YWJpbGl0eTtcclxuICB9XTtcclxufVxyXG5cclxuZnVuY3Rpb24gJFRpbWVvdXRQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLCAnJGJyb3dzZXInLCAnJHEnLCAnJCRxJywgJyRleGNlcHRpb25IYW5kbGVyJyxcclxuICAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJHEsICAgJCRxLCAgICRleGNlcHRpb25IYW5kbGVyKSB7XHJcbiAgICB2YXIgZGVmZXJyZWRzID0ge307XHJcblxyXG5cclxuICAgICAvKipcclxuICAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICAqIEBuYW1lICR0aW1lb3V0XHJcbiAgICAgICpcclxuICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgKiBBbmd1bGFyJ3Mgd3JhcHBlciBmb3IgYHdpbmRvdy5zZXRUaW1lb3V0YC4gVGhlIGBmbmAgZnVuY3Rpb24gaXMgd3JhcHBlZCBpbnRvIGEgdHJ5L2NhdGNoXHJcbiAgICAgICogYmxvY2sgYW5kIGRlbGVnYXRlcyBhbnkgZXhjZXB0aW9ucyB0b1xyXG4gICAgICAqIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cclxuICAgICAgKlxyXG4gICAgICAqIFRoZSByZXR1cm4gdmFsdWUgb2YgcmVnaXN0ZXJpbmcgYSB0aW1lb3V0IGZ1bmN0aW9uIGlzIGEgcHJvbWlzZSwgd2hpY2ggd2lsbCBiZSByZXNvbHZlZCB3aGVuXHJcbiAgICAgICogdGhlIHRpbWVvdXQgaXMgcmVhY2hlZCBhbmQgdGhlIHRpbWVvdXQgZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXHJcbiAgICAgICpcclxuICAgICAgKiBUbyBjYW5jZWwgYSB0aW1lb3V0IHJlcXVlc3QsIGNhbGwgYCR0aW1lb3V0LmNhbmNlbChwcm9taXNlKWAuXHJcbiAgICAgICpcclxuICAgICAgKiBJbiB0ZXN0cyB5b3UgY2FuIHVzZSB7QGxpbmsgbmdNb2NrLiR0aW1lb3V0IGAkdGltZW91dC5mbHVzaCgpYH0gdG9cclxuICAgICAgKiBzeW5jaHJvbm91c2x5IGZsdXNoIHRoZSBxdWV1ZSBvZiBkZWZlcnJlZCBmdW5jdGlvbnMuXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEEgZnVuY3Rpb24sIHdob3NlIGV4ZWN1dGlvbiBzaG91bGQgYmUgZGVsYXllZC5cclxuICAgICAgKiBAcGFyYW0ge251bWJlcj19IFtkZWxheT0wXSBEZWxheSBpbiBtaWxsaXNlY29uZHMuXHJcbiAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW2ludm9rZUFwcGx5PXRydWVdIElmIHNldCB0byBgZmFsc2VgIHNraXBzIG1vZGVsIGRpcnR5IGNoZWNraW5nLCBvdGhlcndpc2VcclxuICAgICAgKiAgIHdpbGwgaW52b2tlIGBmbmAgd2l0aGluIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHkgJGFwcGx5fSBibG9jay5cclxuICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiB0aGUgdGltZW91dCBpcyByZWFjaGVkLiBUaGUgdmFsdWUgdGhpc1xyXG4gICAgICAqICAgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGggaXMgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgYGZuYCBmdW5jdGlvbi5cclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdGltZW91dChmbiwgZGVsYXksIGludm9rZUFwcGx5KSB7XHJcbiAgICAgIHZhciBza2lwQXBwbHkgPSAoaXNEZWZpbmVkKGludm9rZUFwcGx5KSAmJiAhaW52b2tlQXBwbHkpLFxyXG4gICAgICAgICAgZGVmZXJyZWQgPSAoc2tpcEFwcGx5ID8gJCRxIDogJHEpLmRlZmVyKCksXHJcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSxcclxuICAgICAgICAgIHRpbWVvdXRJZDtcclxuXHJcbiAgICAgIHRpbWVvdXRJZCA9ICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGZuKCkpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcclxuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgIGRlbGV0ZSBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNraXBBcHBseSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcclxuICAgICAgfSwgZGVsYXkpO1xyXG5cclxuICAgICAgcHJvbWlzZS4kJHRpbWVvdXRJZCA9IHRpbWVvdXRJZDtcclxuICAgICAgZGVmZXJyZWRzW3RpbWVvdXRJZF0gPSBkZWZlcnJlZDtcclxuXHJcbiAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAqIEBuYW1lICR0aW1lb3V0I2NhbmNlbFxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICogQ2FuY2VscyBhIHRhc2sgYXNzb2NpYXRlZCB3aXRoIHRoZSBgcHJvbWlzZWAuIEFzIGEgcmVzdWx0IG9mIHRoaXMsIHRoZSBwcm9taXNlIHdpbGwgYmVcclxuICAgICAgKiByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLlxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtIHtQcm9taXNlPX0gcHJvbWlzZSBQcm9taXNlIHJldHVybmVkIGJ5IHRoZSBgJHRpbWVvdXRgIGZ1bmN0aW9uLlxyXG4gICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdGFzayBoYXNuJ3QgZXhlY3V0ZWQgeWV0IGFuZCB3YXMgc3VjY2Vzc2Z1bGx5XHJcbiAgICAgICogICBjYW5jZWxlZC5cclxuICAgICAgKi9cclxuICAgIHRpbWVvdXQuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xyXG4gICAgICBpZiAocHJvbWlzZSAmJiBwcm9taXNlLiQkdGltZW91dElkIGluIGRlZmVycmVkcykge1xyXG4gICAgICAgIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXS5yZWplY3QoJ2NhbmNlbGVkJyk7XHJcbiAgICAgICAgZGVsZXRlIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXTtcclxuICAgICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIuY2FuY2VsKHByb21pc2UuJCR0aW1lb3V0SWQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRpbWVvdXQ7XHJcbiAgfV07XHJcbn1cclxuXHJcbi8vIE5PVEU6ICBUaGUgdXNhZ2Ugb2Ygd2luZG93IGFuZCBkb2N1bWVudCBpbnN0ZWFkIG9mICR3aW5kb3cgYW5kICRkb2N1bWVudCBoZXJlIGlzXHJcbi8vIGRlbGliZXJhdGUuICBUaGlzIHNlcnZpY2UgZGVwZW5kcyBvbiB0aGUgc3BlY2lmaWMgYmVoYXZpb3Igb2YgYW5jaG9yIG5vZGVzIGNyZWF0ZWQgYnkgdGhlXHJcbi8vIGJyb3dzZXIgKHJlc29sdmluZyBhbmQgcGFyc2luZyBVUkxzKSB0aGF0IGlzIHVubGlrZWx5IHRvIGJlIHByb3ZpZGVkIGJ5IG1vY2sgb2JqZWN0cyBhbmRcclxuLy8gY2F1c2UgdXMgdG8gYnJlYWsgdGVzdHMuICBJbiBhZGRpdGlvbiwgd2hlbiB0aGUgYnJvd3NlciByZXNvbHZlcyBhIFVSTCBmb3IgWEhSLCBpdFxyXG4vLyBkb2Vzbid0IGtub3cgYWJvdXQgbW9ja2VkIGxvY2F0aW9ucyBhbmQgcmVzb2x2ZXMgVVJMcyB0byB0aGUgcmVhbCBkb2N1bWVudCAtIHdoaWNoIGlzXHJcbi8vIGV4YWN0bHkgdGhlIGJlaGF2aW9yIG5lZWRlZCBoZXJlLiAgVGhlcmUgaXMgbGl0dGxlIHZhbHVlIGlzIG1vY2tpbmcgdGhlc2Ugb3V0IGZvciB0aGlzXHJcbi8vIHNlcnZpY2UuXHJcbnZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG52YXIgb3JpZ2luVXJsID0gdXJsUmVzb2x2ZSh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEltcGxlbWVudGF0aW9uIE5vdGVzIGZvciBub24tSUUgYnJvd3NlcnNcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBBc3NpZ25pbmcgYSBVUkwgdG8gdGhlIGhyZWYgcHJvcGVydHkgb2YgYW4gYW5jaG9yIERPTSBub2RlLCBldmVuIG9uZSBhdHRhY2hlZCB0byB0aGUgRE9NLFxyXG4gKiByZXN1bHRzIGJvdGggaW4gdGhlIG5vcm1hbGl6aW5nIGFuZCBwYXJzaW5nIG9mIHRoZSBVUkwuICBOb3JtYWxpemluZyBtZWFucyB0aGF0IGEgcmVsYXRpdmVcclxuICogVVJMIHdpbGwgYmUgcmVzb2x2ZWQgaW50byBhbiBhYnNvbHV0ZSBVUkwgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxyXG4gKiBQYXJzaW5nIG1lYW5zIHRoYXQgdGhlIGFuY2hvciBub2RlJ3MgaG9zdCwgaG9zdG5hbWUsIHByb3RvY29sLCBwb3J0LCBwYXRobmFtZSBhbmQgcmVsYXRlZFxyXG4gKiBwcm9wZXJ0aWVzIGFyZSBhbGwgcG9wdWxhdGVkIHRvIHJlZmxlY3QgdGhlIG5vcm1hbGl6ZWQgVVJMLiAgVGhpcyBhcHByb2FjaCBoYXMgd2lkZVxyXG4gKiBjb21wYXRpYmlsaXR5IC0gU2FmYXJpIDErLCBNb3ppbGxhIDErLCBPcGVyYSA3KyxlIGV0Yy4gIFNlZVxyXG4gKiBodHRwOi8vd3d3LmFwdGFuYS5jb20vcmVmZXJlbmNlL2h0bWwvYXBpL0hUTUxBbmNob3JFbGVtZW50Lmh0bWxcclxuICpcclxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIElFXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBJRSA+PSA4IGFuZCA8PSAxMCBub3JtYWxpemVzIHRoZSBVUkwgd2hlbiBhc3NpZ25lZCB0byB0aGUgYW5jaG9yIG5vZGUgc2ltaWxhciB0byB0aGUgb3RoZXJcclxuICogYnJvd3NlcnMuICBIb3dldmVyLCB0aGUgcGFyc2VkIGNvbXBvbmVudHMgd2lsbCBub3QgYmUgc2V0IGlmIHRoZSBVUkwgYXNzaWduZWQgZGlkIG5vdCBzcGVjaWZ5XHJcbiAqIHRoZW0uICAoZS5nLiBpZiB5b3UgYXNzaWduIGEuaHJlZiA9IFwiZm9vXCIsIHRoZW4gYS5wcm90b2NvbCwgYS5ob3N0LCBldGMuIHdpbGwgYmUgZW1wdHkuKSAgV2VcclxuICogd29yayBhcm91bmQgdGhhdCBieSBwZXJmb3JtaW5nIHRoZSBwYXJzaW5nIGluIGEgMm5kIHN0ZXAgYnkgdGFraW5nIGEgcHJldmlvdXNseSBub3JtYWxpemVkXHJcbiAqIFVSTCAoZS5nLiBieSBhc3NpZ25pbmcgdG8gYS5ocmVmKSBhbmQgYXNzaWduaW5nIGl0IGEuaHJlZiBhZ2Fpbi4gIFRoaXMgY29ycmVjdGx5IHBvcHVsYXRlcyB0aGVcclxuICogcHJvcGVydGllcyBzdWNoIGFzIHByb3RvY29sLCBob3N0bmFtZSwgcG9ydCwgZXRjLlxyXG4gKlxyXG4gKiBJRTcgZG9lcyBub3Qgbm9ybWFsaXplIHRoZSBVUkwgd2hlbiBhc3NpZ25lZCB0byBhbiBhbmNob3Igbm9kZS4gIChBcHBhcmVudGx5LCBpdCBkb2VzLCBpZiBvbmVcclxuICogdXNlcyB0aGUgaW5uZXIgSFRNTCBhcHByb2FjaCB0byBhc3NpZ24gdGhlIFVSTCBhcyBwYXJ0IG9mIGFuIEhUTUwgc25pcHBldCAtXHJcbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ3MjcyOSkgIEhvd2V2ZXIsIHNldHRpbmcgaW1nW3NyY10gZG9lcyBub3JtYWxpemUgdGhlIFVSTC5cclxuICogVW5mb3J0dW5hdGVseSwgc2V0dGluZyBpbWdbc3JjXSB0byBzb21ldGhpbmcgbGlrZSBcImphdmFzY3JpcHQ6Zm9vXCIgb24gSUUgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICogU2luY2UgdGhlIHByaW1hcnkgdXNhZ2UgZm9yIG5vcm1hbGl6aW5nIFVSTHMgaXMgdG8gc2FuaXRpemUgc3VjaCBVUkxzLCB3ZSBjYW4ndCB1c2UgdGhhdFxyXG4gKiBtZXRob2QgYW5kIElFIDwgOCBpcyB1bnN1cHBvcnRlZC5cclxuICpcclxuICogUmVmZXJlbmNlczpcclxuICogICBodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MQW5jaG9yRWxlbWVudFxyXG4gKiAgIGh0dHA6Ly93d3cuYXB0YW5hLmNvbS9yZWZlcmVuY2UvaHRtbC9hcGkvSFRNTEFuY2hvckVsZW1lbnQuaHRtbFxyXG4gKiAgIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xyXG4gKiAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8yOTAyXHJcbiAqICAgaHR0cDovL2phbWVzLnBhZG9sc2V5LmNvbS9qYXZhc2NyaXB0L3BhcnNpbmctdXJscy13aXRoLXRoZS1kb20vXHJcbiAqXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWQuXHJcbiAqIEBkZXNjcmlwdGlvbiBOb3JtYWxpemVzIGFuZCBwYXJzZXMgYSBVUkwuXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IFJldHVybnMgdGhlIG5vcm1hbGl6ZWQgVVJMIGFzIGEgZGljdGlvbmFyeS5cclxuICpcclxuICogICB8IG1lbWJlciBuYW1lICAgfCBEZXNjcmlwdGlvbiAgICB8XHJcbiAqICAgfC0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tfFxyXG4gKiAgIHwgaHJlZiAgICAgICAgICB8IEEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBwcm92aWRlZCBVUkwgaWYgaXQgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwgfFxyXG4gKiAgIHwgcHJvdG9jb2wgICAgICB8IFRoZSBwcm90b2NvbCBpbmNsdWRpbmcgdGhlIHRyYWlsaW5nIGNvbG9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiAgIHwgaG9zdCAgICAgICAgICB8IFRoZSBob3N0IGFuZCBwb3J0IChpZiB0aGUgcG9ydCBpcyBub24tZGVmYXVsdCkgb2YgdGhlIG5vcm1hbGl6ZWRVcmwgICAgfFxyXG4gKiAgIHwgc2VhcmNoICAgICAgICB8IFRoZSBzZWFyY2ggcGFyYW1zLCBtaW51cyB0aGUgcXVlc3Rpb24gbWFyayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiAgIHwgaGFzaCAgICAgICAgICB8IFRoZSBoYXNoIHN0cmluZywgbWludXMgdGhlIGhhc2ggc3ltYm9sXHJcbiAqICAgfCBob3N0bmFtZSAgICAgIHwgVGhlIGhvc3RuYW1lXHJcbiAqICAgfCBwb3J0ICAgICAgICAgIHwgVGhlIHBvcnQsIHdpdGhvdXQgXCI6XCJcclxuICogICB8IHBhdGhuYW1lICAgICAgfCBUaGUgcGF0aG5hbWUsIGJlZ2lubmluZyB3aXRoIFwiL1wiXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiB1cmxSZXNvbHZlKHVybCkge1xyXG4gIHZhciBocmVmID0gdXJsO1xyXG5cclxuICBpZiAobXNpZSkge1xyXG4gICAgLy8gTm9ybWFsaXplIGJlZm9yZSBwYXJzZS4gIFJlZmVyIEltcGxlbWVudGF0aW9uIE5vdGVzIG9uIHdoeSB0aGlzIGlzXHJcbiAgICAvLyBkb25lIGluIHR3byBzdGVwcyBvbiBJRS5cclxuICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgaHJlZik7XHJcbiAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcclxuICB9XHJcblxyXG4gIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xyXG5cclxuICAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXHJcbiAgcmV0dXJuIHtcclxuICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXHJcbiAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxyXG4gICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcclxuICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcclxuICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXHJcbiAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXHJcbiAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxyXG4gICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJylcclxuICAgICAgPyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxyXG4gICAgICA6ICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGEgcmVxdWVzdCBVUkwgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYSBzYW1lLW9yaWdpbiByZXF1ZXN0IGFzIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZXF1ZXN0VXJsIFRoZSB1cmwgb2YgdGhlIHJlcXVlc3QgYXMgYSBzdHJpbmcgdGhhdCB3aWxsIGJlIHJlc29sdmVkXHJcbiAqIG9yIGEgcGFyc2VkIFVSTCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGZvciB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gdXJsSXNTYW1lT3JpZ2luKHJlcXVlc3RVcmwpIHtcclxuICB2YXIgcGFyc2VkID0gKGlzU3RyaW5nKHJlcXVlc3RVcmwpKSA/IHVybFJlc29sdmUocmVxdWVzdFVybCkgOiByZXF1ZXN0VXJsO1xyXG4gIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VcmwucHJvdG9jb2wgJiZcclxuICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VcmwuaG9zdCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkd2luZG93XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBIHJlZmVyZW5jZSB0byB0aGUgYnJvd3NlcidzIGB3aW5kb3dgIG9iamVjdC4gV2hpbGUgYHdpbmRvd2BcclxuICogaXMgZ2xvYmFsbHkgYXZhaWxhYmxlIGluIEphdmFTY3JpcHQsIGl0IGNhdXNlcyB0ZXN0YWJpbGl0eSBwcm9ibGVtcywgYmVjYXVzZVxyXG4gKiBpdCBpcyBhIGdsb2JhbCB2YXJpYWJsZS4gSW4gYW5ndWxhciB3ZSBhbHdheXMgcmVmZXIgdG8gaXQgdGhyb3VnaCB0aGVcclxuICogYCR3aW5kb3dgIHNlcnZpY2UsIHNvIGl0IG1heSBiZSBvdmVycmlkZGVuLCByZW1vdmVkIG9yIG1vY2tlZCBmb3IgdGVzdGluZy5cclxuICpcclxuICogRXhwcmVzc2lvbnMsIGxpa2UgdGhlIG9uZSBkZWZpbmVkIGZvciB0aGUgYG5nQ2xpY2tgIGRpcmVjdGl2ZSBpbiB0aGUgZXhhbXBsZVxyXG4gKiBiZWxvdywgYXJlIGV2YWx1YXRlZCB3aXRoIHJlc3BlY3QgdG8gdGhlIGN1cnJlbnQgc2NvcGUuICBUaGVyZWZvcmUsIHRoZXJlIGlzXHJcbiAqIG5vIHJpc2sgb2YgaW5hZHZlcnRlbnRseSBjb2RpbmcgaW4gYSBkZXBlbmRlbmN5IG9uIGEgZ2xvYmFsIHZhbHVlIGluIHN1Y2ggYW5cclxuICogZXhwcmVzc2lvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwid2luZG93RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnd2luZG93RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkc2NvcGUsICR3aW5kb3cpIHtcclxuICAgICAgICAgICAgICRzY29wZS5ncmVldGluZyA9ICdIZWxsbywgV29ybGQhJztcclxuICAgICAgICAgICAgICRzY29wZS5kb0dyZWV0aW5nID0gZnVuY3Rpb24oZ3JlZXRpbmcpIHtcclxuICAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydChncmVldGluZyk7XHJcbiAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJncmVldGluZ1wiIC8+XHJcbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJkb0dyZWV0aW5nKGdyZWV0aW5nKVwiPkFMRVJUPC9idXR0b24+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICBpdCgnc2hvdWxkIGRpc3BsYXkgdGhlIGdyZWV0aW5nIGluIHRoZSBpbnB1dCBib3gnLCBmdW5jdGlvbigpIHtcclxuICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2dyZWV0aW5nJykpLnNlbmRLZXlzKCdIZWxsbywgRTJFIFRlc3RzJyk7XHJcbiAgICAgICAvLyBJZiB3ZSBjbGljayB0aGUgYnV0dG9uIGl0IHdpbGwgYmxvY2sgdGhlIHRlc3QgcnVubmVyXHJcbiAgICAgICAvLyBlbGVtZW50KCc6YnV0dG9uJykuY2xpY2soKTtcclxuICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiAkV2luZG93UHJvdmlkZXIoKSB7XHJcbiAgdGhpcy4kZ2V0ID0gdmFsdWVGbih3aW5kb3cpO1xyXG59XHJcblxyXG4vKiBnbG9iYWwgY3VycmVuY3lGaWx0ZXI6IHRydWUsXHJcbiBkYXRlRmlsdGVyOiB0cnVlLFxyXG4gZmlsdGVyRmlsdGVyOiB0cnVlLFxyXG4ganNvbkZpbHRlcjogdHJ1ZSxcclxuIGxpbWl0VG9GaWx0ZXI6IHRydWUsXHJcbiBsb3dlcmNhc2VGaWx0ZXI6IHRydWUsXHJcbiBudW1iZXJGaWx0ZXI6IHRydWUsXHJcbiBvcmRlckJ5RmlsdGVyOiB0cnVlLFxyXG4gdXBwZXJjYXNlRmlsdGVyOiB0cnVlLFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJGZpbHRlclByb3ZpZGVyXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiBGaWx0ZXJzIGFyZSBqdXN0IGZ1bmN0aW9ucyB3aGljaCB0cmFuc2Zvcm0gaW5wdXQgdG8gYW4gb3V0cHV0LiBIb3dldmVyIGZpbHRlcnMgbmVlZCB0byBiZVxyXG4gKiBEZXBlbmRlbmN5IEluamVjdGVkLiBUbyBhY2hpZXZlIHRoaXMgYSBmaWx0ZXIgZGVmaW5pdGlvbiBjb25zaXN0cyBvZiBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggaXNcclxuICogYW5ub3RhdGVkIHdpdGggZGVwZW5kZW5jaWVzIGFuZCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgYSBmaWx0ZXIgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqICAgLy8gRmlsdGVyIHJlZ2lzdHJhdGlvblxyXG4gKiAgIGZ1bmN0aW9uIE15TW9kdWxlKCRwcm92aWRlLCAkZmlsdGVyUHJvdmlkZXIpIHtcclxuICogICAgIC8vIGNyZWF0ZSBhIHNlcnZpY2UgdG8gZGVtb25zdHJhdGUgaW5qZWN0aW9uIChub3QgYWx3YXlzIG5lZWRlZClcclxuICogICAgICRwcm92aWRlLnZhbHVlKCdncmVldCcsIGZ1bmN0aW9uKG5hbWUpe1xyXG4gKiAgICAgICByZXR1cm4gJ0hlbGxvICcgKyBuYW1lICsgJyEnO1xyXG4gKiAgICAgfSk7XHJcbiAqXHJcbiAqICAgICAvLyByZWdpc3RlciBhIGZpbHRlciBmYWN0b3J5IHdoaWNoIHVzZXMgdGhlXHJcbiAqICAgICAvLyBncmVldCBzZXJ2aWNlIHRvIGRlbW9uc3RyYXRlIERJLlxyXG4gKiAgICAgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCdncmVldCcsIGZ1bmN0aW9uKGdyZWV0KXtcclxuICogICAgICAgLy8gcmV0dXJuIHRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggdXNlcyB0aGUgZ3JlZXQgc2VydmljZVxyXG4gKiAgICAgICAvLyB0byBnZW5lcmF0ZSBzYWx1dGF0aW9uXHJcbiAqICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XHJcbiAqICAgICAgICAgLy8gZmlsdGVycyBuZWVkIHRvIGJlIGZvcmdpdmluZyBzbyBjaGVjayBpbnB1dCB2YWxpZGl0eVxyXG4gKiAgICAgICAgIHJldHVybiB0ZXh0ICYmIGdyZWV0KHRleHQpIHx8IHRleHQ7XHJcbiAqICAgICAgIH07XHJcbiAqICAgICB9KTtcclxuICogICB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgZmlsdGVyIGZ1bmN0aW9uIGlzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRpbmplY3RvcmAgdW5kZXIgdGhlIGZpbHRlciBuYW1lIHN1ZmZpeCB3aXRoXHJcbiAqIGBGaWx0ZXJgLlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAgIGl0KCdzaG91bGQgYmUgdGhlIHNhbWUgaW5zdGFuY2UnLCBpbmplY3QoXHJcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyUHJvdmlkZXIpIHtcclxuICogICAgICAgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCdyZXZlcnNlJywgZnVuY3Rpb24oKXtcclxuICogICAgICAgICByZXR1cm4gLi4uO1xyXG4gKiAgICAgICB9KTtcclxuICogICAgIH0sXHJcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyLCByZXZlcnNlRmlsdGVyKSB7XHJcbiAqICAgICAgIGV4cGVjdCgkZmlsdGVyKCdyZXZlcnNlJykpLnRvQmUocmV2ZXJzZUZpbHRlcik7XHJcbiAqICAgICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvdyBhbmd1bGFyIGZpbHRlcnMgd29yaywgYW5kIGhvdyB0byBjcmVhdGUgeW91ciBvd24gZmlsdGVycywgc2VlXHJcbiAqIHtAbGluayBndWlkZS9maWx0ZXIgRmlsdGVyc30gaW4gdGhlIEFuZ3VsYXIgRGV2ZWxvcGVyIEd1aWRlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkZmlsdGVyXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBGaWx0ZXJzIGFyZSB1c2VkIGZvciBmb3JtYXR0aW5nIGRhdGEgZGlzcGxheWVkIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBUaGUgZ2VuZXJhbCBzeW50YXggaW4gdGVtcGxhdGVzIGlzIGFzIGZvbGxvd3M6XHJcbiAqXHJcbiAqICAgICAgICAge3sgZXhwcmVzc2lvbiBbfCBmaWx0ZXJfbmFtZVs6cGFyYW1ldGVyX3ZhbHVlXSAuLi4gXSB9fVxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBmaWx0ZXIgZnVuY3Rpb24gdG8gcmV0cmlldmVcclxuICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBmaWx0ZXIgZnVuY3Rpb25cclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbmFtZT1cIiRmaWx0ZXJcIiBtb2R1bGU9XCJmaWx0ZXJFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIk1haW5DdHJsXCI+XHJcbiAgICAgICAgPGgzPnt7IG9yaWdpbmFsVGV4dCB9fTwvaDM+XHJcbiAgICAgICAgPGgzPnt7IGZpbHRlcmVkVGV4dCB9fTwvaDM+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcblxyXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2ZpbHRlckV4YW1wbGUnLCBbXSlcclxuICAgICAgLmNvbnRyb2xsZXIoJ01haW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlsdGVyKSB7XHJcbiAgICAgICAgJHNjb3BlLm9yaWdpbmFsVGV4dCA9ICdoZWxsbyc7XHJcbiAgICAgICAgJHNjb3BlLmZpbHRlcmVkVGV4dCA9ICRmaWx0ZXIoJ3VwcGVyY2FzZScpKCRzY29wZS5vcmlnaW5hbFRleHQpO1xyXG4gICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICAqL1xyXG4kRmlsdGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnXTtcclxuZnVuY3Rpb24gJEZpbHRlclByb3ZpZGVyKCRwcm92aWRlKSB7XHJcbiAgdmFyIHN1ZmZpeCA9ICdGaWx0ZXInO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGZpbHRlciBmdW5jdGlvbiwgb3IgYW4gb2JqZWN0IG1hcCBvZiBmaWx0ZXJzIHdoZXJlXHJcbiAgICogICAgdGhlIGtleXMgYXJlIHRoZSBmaWx0ZXIgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmaWx0ZXIgZmFjdG9yaWVzLlxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJlZ2lzdGVyZWQgZmlsdGVyIGluc3RhbmNlLCBvciBpZiBhIG1hcCBvZiBmaWx0ZXJzIHdhcyBwcm92aWRlZCB0aGVuIGEgbWFwXHJcbiAgICogICAgb2YgdGhlIHJlZ2lzdGVyZWQgZmlsdGVyIGluc3RhbmNlcy5cclxuICAgKi9cclxuICBmdW5jdGlvbiByZWdpc3RlcihuYW1lLCBmYWN0b3J5KSB7XHJcbiAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcclxuICAgICAgdmFyIGZpbHRlcnMgPSB7fTtcclxuICAgICAgZm9yRWFjaChuYW1lLCBmdW5jdGlvbihmaWx0ZXIsIGtleSkge1xyXG4gICAgICAgIGZpbHRlcnNba2V5XSA9IHJlZ2lzdGVyKGtleSwgZmlsdGVyKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmaWx0ZXJzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICRwcm92aWRlLmZhY3RvcnkobmFtZSArIHN1ZmZpeCwgZmFjdG9yeSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHRoaXMucmVnaXN0ZXIgPSByZWdpc3RlcjtcclxuXHJcbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgIHJldHVybiAkaW5qZWN0b3IuZ2V0KG5hbWUgKyBzdWZmaXgpO1xyXG4gICAgfTtcclxuICB9XTtcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAvKiBnbG9iYWxcclxuICAgIGN1cnJlbmN5RmlsdGVyOiBmYWxzZSxcclxuICAgIGRhdGVGaWx0ZXI6IGZhbHNlLFxyXG4gICAgZmlsdGVyRmlsdGVyOiBmYWxzZSxcclxuICAgIGpzb25GaWx0ZXI6IGZhbHNlLFxyXG4gICAgbGltaXRUb0ZpbHRlcjogZmFsc2UsXHJcbiAgICBsb3dlcmNhc2VGaWx0ZXI6IGZhbHNlLFxyXG4gICAgbnVtYmVyRmlsdGVyOiBmYWxzZSxcclxuICAgIG9yZGVyQnlGaWx0ZXI6IGZhbHNlLFxyXG4gICAgdXBwZXJjYXNlRmlsdGVyOiBmYWxzZSxcclxuICAqL1xyXG5cclxuICByZWdpc3RlcignY3VycmVuY3knLCBjdXJyZW5jeUZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ2RhdGUnLCBkYXRlRmlsdGVyKTtcclxuICByZWdpc3RlcignZmlsdGVyJywgZmlsdGVyRmlsdGVyKTtcclxuICByZWdpc3RlcignanNvbicsIGpzb25GaWx0ZXIpO1xyXG4gIHJlZ2lzdGVyKCdsaW1pdFRvJywgbGltaXRUb0ZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ2xvd2VyY2FzZScsIGxvd2VyY2FzZUZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ251bWJlcicsIG51bWJlckZpbHRlcik7XHJcbiAgcmVnaXN0ZXIoJ29yZGVyQnknLCBvcmRlckJ5RmlsdGVyKTtcclxuICByZWdpc3RlcigndXBwZXJjYXNlJywgdXBwZXJjYXNlRmlsdGVyKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgZmlsdGVyXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTZWxlY3RzIGEgc3Vic2V0IG9mIGl0ZW1zIGZyb20gYGFycmF5YCBhbmQgcmV0dXJucyBpdCBhcyBhIG5ldyBhcnJheS5cclxuICpcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvdXJjZSBhcnJheS5cclxuICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fGZ1bmN0aW9uKCl9IGV4cHJlc3Npb24gVGhlIHByZWRpY2F0ZSB0byBiZSB1c2VkIGZvciBzZWxlY3RpbmcgaXRlbXMgZnJvbVxyXG4gKiAgIGBhcnJheWAuXHJcbiAqXHJcbiAqICAgQ2FuIGJlIG9uZSBvZjpcclxuICpcclxuICogICAtIGBzdHJpbmdgOiBUaGUgc3RyaW5nIGlzIHVzZWQgZm9yIG1hdGNoaW5nIGFnYWluc3QgdGhlIGNvbnRlbnRzIG9mIHRoZSBgYXJyYXlgLiBBbGwgc3RyaW5ncyBvclxyXG4gKiAgICAgb2JqZWN0cyB3aXRoIHN0cmluZyBwcm9wZXJ0aWVzIGluIGBhcnJheWAgdGhhdCBtYXRjaCB0aGlzIHN0cmluZyB3aWxsIGJlIHJldHVybmVkLiBUaGlzIGFsc29cclxuICogICAgIGFwcGxpZXMgdG8gbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzLlxyXG4gKiAgICAgVGhlIHByZWRpY2F0ZSBjYW4gYmUgbmVnYXRlZCBieSBwcmVmaXhpbmcgdGhlIHN0cmluZyB3aXRoIGAhYC5cclxuICpcclxuICogICAtIGBPYmplY3RgOiBBIHBhdHRlcm4gb2JqZWN0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciBzcGVjaWZpYyBwcm9wZXJ0aWVzIG9uIG9iamVjdHMgY29udGFpbmVkXHJcbiAqICAgICBieSBgYXJyYXlgLiBGb3IgZXhhbXBsZSBge25hbWU6XCJNXCIsIHBob25lOlwiMVwifWAgcHJlZGljYXRlIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIGl0ZW1zXHJcbiAqICAgICB3aGljaCBoYXZlIHByb3BlcnR5IGBuYW1lYCBjb250YWluaW5nIFwiTVwiIGFuZCBwcm9wZXJ0eSBgcGhvbmVgIGNvbnRhaW5pbmcgXCIxXCIuIEEgc3BlY2lhbFxyXG4gKiAgICAgcHJvcGVydHkgbmFtZSBgJGAgY2FuIGJlIHVzZWQgKGFzIGluIGB7JDpcInRleHRcIn1gKSB0byBhY2NlcHQgYSBtYXRjaCBhZ2FpbnN0IGFueVxyXG4gKiAgICAgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBvciBpdHMgbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzLiBUaGF0J3MgZXF1aXZhbGVudCB0byB0aGUgc2ltcGxlXHJcbiAqICAgICBzdWJzdHJpbmcgbWF0Y2ggd2l0aCBhIGBzdHJpbmdgIGFzIGRlc2NyaWJlZCBhYm92ZS4gVGhlIHByZWRpY2F0ZSBjYW4gYmUgbmVnYXRlZCBieSBwcmVmaXhpbmdcclxuICogICAgIHRoZSBzdHJpbmcgd2l0aCBgIWAuXHJcbiAqICAgICBGb3IgZXhhbXBsZSBge25hbWU6IFwiIU1cIn1gIHByZWRpY2F0ZSB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBpdGVtcyB3aGljaCBoYXZlIHByb3BlcnR5IGBuYW1lYFxyXG4gKiAgICAgbm90IGNvbnRhaW5pbmcgXCJNXCIuXHJcbiAqXHJcbiAqICAgICBOb3RlIHRoYXQgYSBuYW1lZCBwcm9wZXJ0eSB3aWxsIG1hdGNoIHByb3BlcnRpZXMgb24gdGhlIHNhbWUgbGV2ZWwgb25seSwgd2hpbGUgdGhlIHNwZWNpYWxcclxuICogICAgIGAkYCBwcm9wZXJ0eSB3aWxsIG1hdGNoIHByb3BlcnRpZXMgb24gdGhlIHNhbWUgbGV2ZWwgb3IgZGVlcGVyLiBFLmcuIGFuIGFycmF5IGl0ZW0gbGlrZVxyXG4gKiAgICAgYHtuYW1lOiB7Zmlyc3Q6ICdKb2huJywgbGFzdDogJ0RvZSd9fWAgd2lsbCAqKm5vdCoqIGJlIG1hdGNoZWQgYnkgYHtuYW1lOiAnSm9obid9YCwgYnV0XHJcbiAqICAgICAqKndpbGwqKiBiZSBtYXRjaGVkIGJ5IGB7JDogJ0pvaG4nfWAuXHJcbiAqXHJcbiAqICAgLSBgZnVuY3Rpb24odmFsdWUsIGluZGV4KWA6IEEgcHJlZGljYXRlIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHdyaXRlIGFyYml0cmFyeSBmaWx0ZXJzLiBUaGVcclxuICogICAgIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgZWFjaCBlbGVtZW50IG9mIGBhcnJheWAuIFRoZSBmaW5hbCByZXN1bHQgaXMgYW4gYXJyYXkgb2YgdGhvc2VcclxuICogICAgIGVsZW1lbnRzIHRoYXQgdGhlIHByZWRpY2F0ZSByZXR1cm5lZCB0cnVlIGZvci5cclxuICpcclxuICogQHBhcmFtIHtmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKXx0cnVlfHVuZGVmaW5lZH0gY29tcGFyYXRvciBDb21wYXJhdG9yIHdoaWNoIGlzIHVzZWQgaW5cclxuICogICAgIGRldGVybWluaW5nIGlmIHRoZSBleHBlY3RlZCB2YWx1ZSAoZnJvbSB0aGUgZmlsdGVyIGV4cHJlc3Npb24pIGFuZCBhY3R1YWwgdmFsdWUgKGZyb21cclxuICogICAgIHRoZSBvYmplY3QgaW4gdGhlIGFycmF5KSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1hdGNoLlxyXG4gKlxyXG4gKiAgIENhbiBiZSBvbmUgb2Y6XHJcbiAqXHJcbiAqICAgLSBgZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZClgOlxyXG4gKiAgICAgVGhlIGZ1bmN0aW9uIHdpbGwgYmUgZ2l2ZW4gdGhlIG9iamVjdCB2YWx1ZSBhbmQgdGhlIHByZWRpY2F0ZSB2YWx1ZSB0byBjb21wYXJlIGFuZFxyXG4gKiAgICAgc2hvdWxkIHJldHVybiB0cnVlIGlmIGJvdGggdmFsdWVzIHNob3VsZCBiZSBjb25zaWRlcmVkIGVxdWFsLlxyXG4gKlxyXG4gKiAgIC0gYHRydWVgOiBBIHNob3J0aGFuZCBmb3IgYGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHsgcmV0dXJuIGFuZ3VsYXIuZXF1YWxzKGFjdHVhbCwgZXhwZWN0ZWQpfWAuXHJcbiAqICAgICBUaGlzIGlzIGVzc2VudGlhbGx5IHN0cmljdCBjb21wYXJpc29uIG9mIGV4cGVjdGVkIGFuZCBhY3R1YWwuXHJcbiAqXHJcbiAqICAgLSBgZmFsc2V8dW5kZWZpbmVkYDogQSBzaG9ydCBoYW5kIGZvciBhIGZ1bmN0aW9uIHdoaWNoIHdpbGwgbG9vayBmb3IgYSBzdWJzdHJpbmcgbWF0Y2ggaW4gY2FzZVxyXG4gKiAgICAgaW5zZW5zaXRpdmUgd2F5LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPGRpdiBuZy1pbml0PVwiZnJpZW5kcyA9IFt7bmFtZTonSm9obicsIHBob25lOic1NTUtMTI3Nid9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidNYXJ5JywgcGhvbmU6JzgwMC1CSUctTUFSWSd9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidNaWtlJywgcGhvbmU6JzU1NS00MzIxJ30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0FkYW0nLCBwaG9uZTonNTU1LTU2NzgnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonSnVsaWUnLCBwaG9uZTonNTU1LTg3NjUnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonSnVsaWV0dGUnLCBwaG9uZTonNTU1LTU2NzgnfV1cIj48L2Rpdj5cclxuXHJcbiAgICAgICBTZWFyY2g6IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaFRleHRcIj5cclxuICAgICAgIDx0YWJsZSBpZD1cInNlYXJjaFRleHRSZXN1bHRzXCI+XHJcbiAgICAgICAgIDx0cj48dGg+TmFtZTwvdGg+PHRoPlBob25lPC90aD48L3RyPlxyXG4gICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6c2VhcmNoVGV4dFwiPlxyXG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxyXG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cclxuICAgICAgICAgPC90cj5cclxuICAgICAgIDwvdGFibGU+XHJcbiAgICAgICA8aHI+XHJcbiAgICAgICBBbnk6IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC4kXCI+IDxicj5cclxuICAgICAgIE5hbWUgb25seSA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2gubmFtZVwiPjxicj5cclxuICAgICAgIFBob25lIG9ubHkgPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLnBob25lXCI+PGJyPlxyXG4gICAgICAgRXF1YWxpdHkgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwic3RyaWN0XCI+PGJyPlxyXG4gICAgICAgPHRhYmxlIGlkPVwic2VhcmNoT2JqUmVzdWx0c1wiPlxyXG4gICAgICAgICA8dHI+PHRoPk5hbWU8L3RoPjx0aD5QaG9uZTwvdGg+PC90cj5cclxuICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZE9iaiBpbiBmcmllbmRzIHwgZmlsdGVyOnNlYXJjaDpzdHJpY3RcIj5cclxuICAgICAgICAgICA8dGQ+e3tmcmllbmRPYmoubmFtZX19PC90ZD5cclxuICAgICAgICAgICA8dGQ+e3tmcmllbmRPYmoucGhvbmV9fTwvdGQ+XHJcbiAgICAgICAgIDwvdHI+XHJcbiAgICAgICA8L3RhYmxlPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICB2YXIgZXhwZWN0RnJpZW5kTmFtZXMgPSBmdW5jdGlvbihleHBlY3RlZE5hbWVzLCBrZXkpIHtcclxuICAgICAgICAgZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoa2V5ICsgJyBpbiBmcmllbmRzJykuY29sdW1uKGtleSArICcubmFtZScpKS50aGVuKGZ1bmN0aW9uKGFycikge1xyXG4gICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uKHdkLCBpKSB7XHJcbiAgICAgICAgICAgICBleHBlY3Qod2QuZ2V0VGV4dCgpKS50b01hdGNoKGV4cGVjdGVkTmFtZXNbaV0pO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgIH07XHJcblxyXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggYWNyb3NzIGFsbCBmaWVsZHMgd2hlbiBmaWx0ZXJpbmcgd2l0aCBhIHN0cmluZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgc2VhcmNoVGV4dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlYXJjaFRleHQnKSk7XHJcbiAgICAgICAgIHNlYXJjaFRleHQuY2xlYXIoKTtcclxuICAgICAgICAgc2VhcmNoVGV4dC5zZW5kS2V5cygnbScpO1xyXG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ01hcnknLCAnTWlrZScsICdBZGFtJ10sICdmcmllbmQnKTtcclxuXHJcbiAgICAgICAgIHNlYXJjaFRleHQuY2xlYXIoKTtcclxuICAgICAgICAgc2VhcmNoVGV4dC5zZW5kS2V5cygnNzYnKTtcclxuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydKb2huJywgJ0p1bGllJ10sICdmcmllbmQnKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgc2VhcmNoIGluIHNwZWNpZmljIGZpZWxkcyB3aGVuIGZpbHRlcmluZyB3aXRoIGEgcHJlZGljYXRlIG9iamVjdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgc2VhcmNoQW55ID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoLiQnKSk7XHJcbiAgICAgICAgIHNlYXJjaEFueS5jbGVhcigpO1xyXG4gICAgICAgICBzZWFyY2hBbnkuc2VuZEtleXMoJ2knKTtcclxuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnSnVsaWUnLCAnSnVsaWV0dGUnXSwgJ2ZyaWVuZE9iaicpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICBpdCgnc2hvdWxkIHVzZSBhIGVxdWFsIGNvbXBhcmlzb24gd2hlbiBjb21wYXJhdG9yIGlzIHRydWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIHNlYXJjaE5hbWUgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2gubmFtZScpKTtcclxuICAgICAgICAgdmFyIHN0cmljdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3N0cmljdCcpKTtcclxuICAgICAgICAgc2VhcmNoTmFtZS5jbGVhcigpO1xyXG4gICAgICAgICBzZWFyY2hOYW1lLnNlbmRLZXlzKCdKdWxpZScpO1xyXG4gICAgICAgICBzdHJpY3QuY2xpY2soKTtcclxuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydKdWxpZSddLCAnZnJpZW5kT2JqJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmZ1bmN0aW9uIGZpbHRlckZpbHRlcigpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGV4cHJlc3Npb24sIGNvbXBhcmF0b3IpIHtcclxuICAgIGlmICghaXNBcnJheShhcnJheSkpIHJldHVybiBhcnJheTtcclxuXHJcbiAgICB2YXIgcHJlZGljYXRlRm47XHJcbiAgICB2YXIgbWF0Y2hBZ2FpbnN0QW55UHJvcDtcclxuXHJcbiAgICBzd2l0Y2ggKHR5cGVvZiBleHByZXNzaW9uKSB7XHJcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICBwcmVkaWNhdGVGbiA9IGV4cHJlc3Npb247XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxyXG4gICAgICBjYXNlICdudW1iZXInOlxyXG4gICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgIG1hdGNoQWdhaW5zdEFueVByb3AgPSB0cnVlO1xyXG4gICAgICAgIC8vanNoaW50IC1XMDg2XHJcbiAgICAgIGNhc2UgJ29iamVjdCc6XHJcbiAgICAgICAgLy9qc2hpbnQgK1cwODZcclxuICAgICAgICBwcmVkaWNhdGVGbiA9IGNyZWF0ZVByZWRpY2F0ZUZuKGV4cHJlc3Npb24sIGNvbXBhcmF0b3IsIG1hdGNoQWdhaW5zdEFueVByb3ApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyYXkuZmlsdGVyKHByZWRpY2F0ZUZuKTtcclxuICB9O1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBgZmlsdGVyRmlsdGVyYFxyXG5mdW5jdGlvbiBjcmVhdGVQcmVkaWNhdGVGbihleHByZXNzaW9uLCBjb21wYXJhdG9yLCBtYXRjaEFnYWluc3RBbnlQcm9wKSB7XHJcbiAgdmFyIHNob3VsZE1hdGNoUHJpbWl0aXZlcyA9IGlzT2JqZWN0KGV4cHJlc3Npb24pICYmICgnJCcgaW4gZXhwcmVzc2lvbik7XHJcbiAgdmFyIHByZWRpY2F0ZUZuO1xyXG5cclxuICBpZiAoY29tcGFyYXRvciA9PT0gdHJ1ZSkge1xyXG4gICAgY29tcGFyYXRvciA9IGVxdWFscztcclxuICB9IGVsc2UgaWYgKCFpc0Z1bmN0aW9uKGNvbXBhcmF0b3IpKSB7XHJcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCkge1xyXG4gICAgICBpZiAoaXNPYmplY3QoYWN0dWFsKSB8fCBpc09iamVjdChleHBlY3RlZCkpIHtcclxuICAgICAgICAvLyBQcmV2ZW50IGFuIG9iamVjdCB0byBiZSBjb25zaWRlcmVkIGVxdWFsIHRvIGEgc3RyaW5nIGxpa2UgYCdbb2JqZWN0J2BcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFjdHVhbCA9IGxvd2VyY2FzZSgnJyArIGFjdHVhbCk7XHJcbiAgICAgIGV4cGVjdGVkID0gbG93ZXJjYXNlKCcnICsgZXhwZWN0ZWQpO1xyXG4gICAgICByZXR1cm4gYWN0dWFsLmluZGV4T2YoZXhwZWN0ZWQpICE9PSAtMTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwcmVkaWNhdGVGbiA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIGlmIChzaG91bGRNYXRjaFByaW1pdGl2ZXMgJiYgIWlzT2JqZWN0KGl0ZW0pKSB7XHJcbiAgICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHByZXNzaW9uLiQsIGNvbXBhcmF0b3IsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHByZXNzaW9uLCBjb21wYXJhdG9yLCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gcHJlZGljYXRlRm47XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIG1hdGNoQWdhaW5zdEFueVByb3AsIGRvbnRNYXRjaFdob2xlT2JqZWN0KSB7XHJcbiAgdmFyIGFjdHVhbFR5cGUgPSB0eXBlb2YgYWN0dWFsO1xyXG4gIHZhciBleHBlY3RlZFR5cGUgPSB0eXBlb2YgZXhwZWN0ZWQ7XHJcblxyXG4gIGlmICgoZXhwZWN0ZWRUeXBlID09PSAnc3RyaW5nJykgJiYgKGV4cGVjdGVkLmNoYXJBdCgwKSA9PT0gJyEnKSkge1xyXG4gICAgcmV0dXJuICFkZWVwQ29tcGFyZShhY3R1YWwsIGV4cGVjdGVkLnN1YnN0cmluZygxKSwgY29tcGFyYXRvciwgbWF0Y2hBZ2FpbnN0QW55UHJvcCk7XHJcbiAgfSBlbHNlIGlmIChpc0FycmF5KGFjdHVhbCkpIHtcclxuICAgIC8vIEluIGNhc2UgYGFjdHVhbGAgaXMgYW4gYXJyYXksIGNvbnNpZGVyIGl0IGEgbWF0Y2hcclxuICAgIC8vIGlmIEFOWSBvZiBpdCdzIGl0ZW1zIG1hdGNoZXMgYGV4cGVjdGVkYFxyXG4gICAgcmV0dXJuIGFjdHVhbC5zb21lKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIGRlZXBDb21wYXJlKGl0ZW0sIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3dpdGNoIChhY3R1YWxUeXBlKSB7XHJcbiAgICBjYXNlICdvYmplY3QnOlxyXG4gICAgICB2YXIga2V5O1xyXG4gICAgICBpZiAobWF0Y2hBZ2FpbnN0QW55UHJvcCkge1xyXG4gICAgICAgIGZvciAoa2V5IGluIGFjdHVhbCkge1xyXG4gICAgICAgICAgaWYgKChrZXkuY2hhckF0KDApICE9PSAnJCcpICYmIGRlZXBDb21wYXJlKGFjdHVhbFtrZXldLCBleHBlY3RlZCwgY29tcGFyYXRvciwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkb250TWF0Y2hXaG9sZU9iamVjdCA/IGZhbHNlIDogZGVlcENvbXBhcmUoYWN0dWFsLCBleHBlY3RlZCwgY29tcGFyYXRvciwgZmFsc2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBmb3IgKGtleSBpbiBleHBlY3RlZCkge1xyXG4gICAgICAgICAgdmFyIGV4cGVjdGVkVmFsID0gZXhwZWN0ZWRba2V5XTtcclxuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGV4cGVjdGVkVmFsKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgbWF0Y2hBbnlQcm9wZXJ0eSA9IGtleSA9PT0gJyQnO1xyXG4gICAgICAgICAgdmFyIGFjdHVhbFZhbCA9IG1hdGNoQW55UHJvcGVydHkgPyBhY3R1YWwgOiBhY3R1YWxba2V5XTtcclxuICAgICAgICAgIGlmICghZGVlcENvbXBhcmUoYWN0dWFsVmFsLCBleHBlY3RlZFZhbCwgY29tcGFyYXRvciwgbWF0Y2hBbnlQcm9wZXJ0eSwgbWF0Y2hBbnlQcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gY29tcGFyYXRvcihhY3R1YWwsIGV4cGVjdGVkKTtcclxuICAgICAgfVxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoYWN0dWFsLCBleHBlY3RlZCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBjdXJyZW5jeVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRm9ybWF0cyBhIG51bWJlciBhcyBhIGN1cnJlbmN5IChpZSAkMSwyMzQuNTYpLiBXaGVuIG5vIGN1cnJlbmN5IHN5bWJvbCBpcyBwcm92aWRlZCwgZGVmYXVsdFxyXG4gKiBzeW1ib2wgZm9yIGN1cnJlbnQgbG9jYWxlIGlzIHVzZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSW5wdXQgdG8gZmlsdGVyLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IHN5bWJvbCBDdXJyZW5jeSBzeW1ib2wgb3IgaWRlbnRpZmllciB0byBiZSBkaXNwbGF5ZWQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyPX0gZnJhY3Rpb25TaXplIE51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byByb3VuZCB0aGUgYW1vdW50IHRvLCBkZWZhdWx0cyB0byBkZWZhdWx0IG1heCBmcmFjdGlvbiBzaXplIGZvciBjdXJyZW50IGxvY2FsZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgbnVtYmVyLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJjdXJyZW5jeUV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2N1cnJlbmN5RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUuYW1vdW50ID0gMTIzNC41NjtcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJhbW91bnRcIj4gPGJyPlxyXG4gICAgICAgICBkZWZhdWx0IGN1cnJlbmN5IHN5bWJvbCAoJCk6IDxzcGFuIGlkPVwiY3VycmVuY3ktZGVmYXVsdFwiPnt7YW1vdW50IHwgY3VycmVuY3l9fTwvc3Bhbj48YnI+XHJcbiAgICAgICAgIGN1c3RvbSBjdXJyZW5jeSBpZGVudGlmaWVyIChVU0QkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1jdXN0b21cIj57e2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwifX08L3NwYW4+XHJcbiAgICAgICAgIG5vIGZyYWN0aW9ucyAoMCk6IDxzcGFuIGlkPVwiY3VycmVuY3ktbm8tZnJhY3Rpb25zXCI+e3thbW91bnQgfCBjdXJyZW5jeTpcIlVTRCRcIjowfX08L3NwYW4+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBpbml0IHdpdGggMTIzNC41NicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJyQxLDIzNC41NicpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktY3VzdG9tJykpLmdldFRleHQoKSkudG9CZSgnVVNEJDEsMjM0LjU2Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1uby1mcmFjdGlvbnMnKSkuZ2V0VGV4dCgpKS50b0JlKCdVU0QkMSwyMzUnKTtcclxuICAgICAgIH0pO1xyXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ3NhZmFyaScpIHtcclxuICAgICAgICAgICAvLyBTYWZhcmkgZG9lcyBub3QgdW5kZXJzdGFuZCB0aGUgbWludXMga2V5LiBTZWVcclxuICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODFcclxuICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnYW1vdW50JykpLmNsZWFyKCk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2Ftb3VudCcpKS5zZW5kS2V5cygnLTEyMzQnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCcoJDEsMjM0LjAwKScpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktY3VzdG9tJykpLmdldFRleHQoKSkudG9CZSgnKFVTRCQxLDIzNC4wMCknKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LW5vLWZyYWN0aW9ucycpKS5nZXRUZXh0KCkpLnRvQmUoJyhVU0QkMSwyMzQpJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbmN1cnJlbmN5RmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcclxuZnVuY3Rpb24gY3VycmVuY3lGaWx0ZXIoJGxvY2FsZSkge1xyXG4gIHZhciBmb3JtYXRzID0gJGxvY2FsZS5OVU1CRVJfRk9STUFUUztcclxuICByZXR1cm4gZnVuY3Rpb24oYW1vdW50LCBjdXJyZW5jeVN5bWJvbCwgZnJhY3Rpb25TaXplKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQoY3VycmVuY3lTeW1ib2wpKSB7XHJcbiAgICAgIGN1cnJlbmN5U3ltYm9sID0gZm9ybWF0cy5DVVJSRU5DWV9TWU07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzVW5kZWZpbmVkKGZyYWN0aW9uU2l6ZSkpIHtcclxuICAgICAgZnJhY3Rpb25TaXplID0gZm9ybWF0cy5QQVRURVJOU1sxXS5tYXhGcmFjO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIG51bGwgb3IgdW5kZWZpbmVkIHBhc3MgaXQgdGhyb3VnaFxyXG4gICAgcmV0dXJuIChhbW91bnQgPT0gbnVsbClcclxuICAgICAgICA/IGFtb3VudFxyXG4gICAgICAgIDogZm9ybWF0TnVtYmVyKGFtb3VudCwgZm9ybWF0cy5QQVRURVJOU1sxXSwgZm9ybWF0cy5HUk9VUF9TRVAsIGZvcm1hdHMuREVDSU1BTF9TRVAsIGZyYWN0aW9uU2l6ZSkuXHJcbiAgICAgICAgICAgIHJlcGxhY2UoL1xcdTAwQTQvZywgY3VycmVuY3lTeW1ib2wpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIG51bWJlclxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRm9ybWF0cyBhIG51bWJlciBhcyB0ZXh0LlxyXG4gKlxyXG4gKiBJZiB0aGUgaW5wdXQgaXMgbm90IGEgbnVtYmVyIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBudW1iZXIgTnVtYmVyIHRvIGZvcm1hdC5cclxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBmcmFjdGlvblNpemUgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRoZSBudW1iZXIgdG8uXHJcbiAqIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkIHRoZW4gdGhlIGZyYWN0aW9uIHNpemUgaXMgY29tcHV0ZWQgZnJvbSB0aGUgY3VycmVudCBsb2NhbGUncyBudW1iZXJcclxuICogZm9ybWF0dGluZyBwYXR0ZXJuLiBJbiB0aGUgY2FzZSBvZiB0aGUgZGVmYXVsdCBsb2NhbGUsIGl0IHdpbGwgYmUgMy5cclxuICogQHJldHVybnMge3N0cmluZ30gTnVtYmVyIHJvdW5kZWQgdG8gZGVjaW1hbFBsYWNlcyBhbmQgcGxhY2VzIGEg4oCcLOKAnSBhZnRlciBlYWNoIHRoaXJkIGRpZ2l0LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJudW1iZXJGaWx0ZXJFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJGaWx0ZXJFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICRzY29wZS52YWwgPSAxMjM0LjU2Nzg5O1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgRW50ZXIgbnVtYmVyOiA8aW5wdXQgbmctbW9kZWw9J3ZhbCc+PGJyPlxyXG4gICAgICAgICBEZWZhdWx0IGZvcm1hdHRpbmc6IDxzcGFuIGlkPSdudW1iZXItZGVmYXVsdCc+e3t2YWwgfCBudW1iZXJ9fTwvc3Bhbj48YnI+XHJcbiAgICAgICAgIE5vIGZyYWN0aW9uczogPHNwYW4+e3t2YWwgfCBudW1iZXI6MH19PC9zcGFuPjxicj5cclxuICAgICAgICAgTmVnYXRpdmUgbnVtYmVyOiA8c3Bhbj57ey12YWwgfCBudW1iZXI6NH19PC9zcGFuPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgZm9ybWF0IG51bWJlcnMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ251bWJlci1kZWZhdWx0JykpLmdldFRleHQoKSkudG9CZSgnMSwyMzQuNTY4Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbCB8IG51bWJlcjowJykpLmdldFRleHQoKSkudG9CZSgnMSwyMzUnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTEsMjM0LjU2NzknKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbCcpKS5jbGVhcigpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuc2VuZEtleXMoJzMzNzQuMzMzJyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzMsMzc0LjMzMycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd2YWwgfCBudW1iZXI6MCcpKS5nZXRUZXh0KCkpLnRvQmUoJzMsMzc0Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJy12YWwgfCBudW1iZXI6NCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0zLDM3NC4zMzMwJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG5udW1iZXJGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xyXG5mdW5jdGlvbiBudW1iZXJGaWx0ZXIoJGxvY2FsZSkge1xyXG4gIHZhciBmb3JtYXRzID0gJGxvY2FsZS5OVU1CRVJfRk9STUFUUztcclxuICByZXR1cm4gZnVuY3Rpb24obnVtYmVyLCBmcmFjdGlvblNpemUpIHtcclxuXHJcbiAgICAvLyBpZiBudWxsIG9yIHVuZGVmaW5lZCBwYXNzIGl0IHRocm91Z2hcclxuICAgIHJldHVybiAobnVtYmVyID09IG51bGwpXHJcbiAgICAgICAgPyBudW1iZXJcclxuICAgICAgICA6IGZvcm1hdE51bWJlcihudW1iZXIsIGZvcm1hdHMuUEFUVEVSTlNbMF0sIGZvcm1hdHMuR1JPVVBfU0VQLCBmb3JtYXRzLkRFQ0lNQUxfU0VQLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uU2l6ZSk7XHJcbiAgfTtcclxufVxyXG5cclxudmFyIERFQ0lNQUxfU0VQID0gJy4nO1xyXG5mdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtYmVyLCBwYXR0ZXJuLCBncm91cFNlcCwgZGVjaW1hbFNlcCwgZnJhY3Rpb25TaXplKSB7XHJcbiAgaWYgKCFpc0Zpbml0ZShudW1iZXIpIHx8IGlzT2JqZWN0KG51bWJlcikpIHJldHVybiAnJztcclxuXHJcbiAgdmFyIGlzTmVnYXRpdmUgPSBudW1iZXIgPCAwO1xyXG4gIG51bWJlciA9IE1hdGguYWJzKG51bWJlcik7XHJcbiAgdmFyIG51bVN0ciA9IG51bWJlciArICcnLFxyXG4gICAgICBmb3JtYXRlZFRleHQgPSAnJyxcclxuICAgICAgcGFydHMgPSBbXTtcclxuXHJcbiAgdmFyIGhhc0V4cG9uZW50ID0gZmFsc2U7XHJcbiAgaWYgKG51bVN0ci5pbmRleE9mKCdlJykgIT09IC0xKSB7XHJcbiAgICB2YXIgbWF0Y2ggPSBudW1TdHIubWF0Y2goLyhbXFxkXFwuXSspZSgtPykoXFxkKykvKTtcclxuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSA9PSAnLScgJiYgbWF0Y2hbM10gPiBmcmFjdGlvblNpemUgKyAxKSB7XHJcbiAgICAgIG51bWJlciA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3JtYXRlZFRleHQgPSBudW1TdHI7XHJcbiAgICAgIGhhc0V4cG9uZW50ID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmICghaGFzRXhwb25lbnQpIHtcclxuICAgIHZhciBmcmFjdGlvbkxlbiA9IChudW1TdHIuc3BsaXQoREVDSU1BTF9TRVApWzFdIHx8ICcnKS5sZW5ndGg7XHJcblxyXG4gICAgLy8gZGV0ZXJtaW5lIGZyYWN0aW9uU2l6ZSBpZiBpdCBpcyBub3Qgc3BlY2lmaWVkXHJcbiAgICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSkge1xyXG4gICAgICBmcmFjdGlvblNpemUgPSBNYXRoLm1pbihNYXRoLm1heChwYXR0ZXJuLm1pbkZyYWMsIGZyYWN0aW9uTGVuKSwgcGF0dGVybi5tYXhGcmFjKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzYWZlbHkgcm91bmQgbnVtYmVycyBpbiBKUyB3aXRob3V0IGhpdHRpbmcgaW1wcmVjaXNpb25zIG9mIGZsb2F0aW5nLXBvaW50IGFyaXRobWV0aWNzXHJcbiAgICAvLyBpbnNwaXJlZCBieTpcclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL01hdGgvcm91bmRcclxuICAgIG51bWJlciA9ICsoTWF0aC5yb3VuZCgrKG51bWJlci50b1N0cmluZygpICsgJ2UnICsgZnJhY3Rpb25TaXplKSkudG9TdHJpbmcoKSArICdlJyArIC1mcmFjdGlvblNpemUpO1xyXG5cclxuICAgIHZhciBmcmFjdGlvbiA9ICgnJyArIG51bWJlcikuc3BsaXQoREVDSU1BTF9TRVApO1xyXG4gICAgdmFyIHdob2xlID0gZnJhY3Rpb25bMF07XHJcbiAgICBmcmFjdGlvbiA9IGZyYWN0aW9uWzFdIHx8ICcnO1xyXG5cclxuICAgIHZhciBpLCBwb3MgPSAwLFxyXG4gICAgICAgIGxncm91cCA9IHBhdHRlcm4ubGdTaXplLFxyXG4gICAgICAgIGdyb3VwID0gcGF0dGVybi5nU2l6ZTtcclxuXHJcbiAgICBpZiAod2hvbGUubGVuZ3RoID49IChsZ3JvdXAgKyBncm91cCkpIHtcclxuICAgICAgcG9zID0gd2hvbGUubGVuZ3RoIC0gbGdyb3VwO1xyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcG9zOyBpKyspIHtcclxuICAgICAgICBpZiAoKHBvcyAtIGkpICUgZ3JvdXAgPT09IDAgJiYgaSAhPT0gMCkge1xyXG4gICAgICAgICAgZm9ybWF0ZWRUZXh0ICs9IGdyb3VwU2VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3JtYXRlZFRleHQgKz0gd2hvbGUuY2hhckF0KGkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChpID0gcG9zOyBpIDwgd2hvbGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKCh3aG9sZS5sZW5ndGggLSBpKSAlIGxncm91cCA9PT0gMCAmJiBpICE9PSAwKSB7XHJcbiAgICAgICAgZm9ybWF0ZWRUZXh0ICs9IGdyb3VwU2VwO1xyXG4gICAgICB9XHJcbiAgICAgIGZvcm1hdGVkVGV4dCArPSB3aG9sZS5jaGFyQXQoaSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZm9ybWF0IGZyYWN0aW9uIHBhcnQuXHJcbiAgICB3aGlsZSAoZnJhY3Rpb24ubGVuZ3RoIDwgZnJhY3Rpb25TaXplKSB7XHJcbiAgICAgIGZyYWN0aW9uICs9ICcwJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZnJhY3Rpb25TaXplICYmIGZyYWN0aW9uU2l6ZSAhPT0gXCIwXCIpIGZvcm1hdGVkVGV4dCArPSBkZWNpbWFsU2VwICsgZnJhY3Rpb24uc3Vic3RyKDAsIGZyYWN0aW9uU2l6ZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmIChmcmFjdGlvblNpemUgPiAwICYmIG51bWJlciA8IDEpIHtcclxuICAgICAgZm9ybWF0ZWRUZXh0ID0gbnVtYmVyLnRvRml4ZWQoZnJhY3Rpb25TaXplKTtcclxuICAgICAgbnVtYmVyID0gcGFyc2VGbG9hdChmb3JtYXRlZFRleHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKG51bWJlciA9PT0gMCkge1xyXG4gICAgaXNOZWdhdGl2ZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcGFydHMucHVzaChpc05lZ2F0aXZlID8gcGF0dGVybi5uZWdQcmUgOiBwYXR0ZXJuLnBvc1ByZSxcclxuICAgICAgICAgICAgIGZvcm1hdGVkVGV4dCxcclxuICAgICAgICAgICAgIGlzTmVnYXRpdmUgPyBwYXR0ZXJuLm5lZ1N1ZiA6IHBhdHRlcm4ucG9zU3VmKTtcclxuICByZXR1cm4gcGFydHMuam9pbignJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZE51bWJlcihudW0sIGRpZ2l0cywgdHJpbSkge1xyXG4gIHZhciBuZWcgPSAnJztcclxuICBpZiAobnVtIDwgMCkge1xyXG4gICAgbmVnID0gICctJztcclxuICAgIG51bSA9IC1udW07XHJcbiAgfVxyXG4gIG51bSA9ICcnICsgbnVtO1xyXG4gIHdoaWxlIChudW0ubGVuZ3RoIDwgZGlnaXRzKSBudW0gPSAnMCcgKyBudW07XHJcbiAgaWYgKHRyaW0pXHJcbiAgICBudW0gPSBudW0uc3Vic3RyKG51bS5sZW5ndGggLSBkaWdpdHMpO1xyXG4gIHJldHVybiBuZWcgKyBudW07XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkYXRlR2V0dGVyKG5hbWUsIHNpemUsIG9mZnNldCwgdHJpbSkge1xyXG4gIG9mZnNldCA9IG9mZnNldCB8fCAwO1xyXG4gIHJldHVybiBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICB2YXIgdmFsdWUgPSBkYXRlWydnZXQnICsgbmFtZV0oKTtcclxuICAgIGlmIChvZmZzZXQgPiAwIHx8IHZhbHVlID4gLW9mZnNldClcclxuICAgICAgdmFsdWUgKz0gb2Zmc2V0O1xyXG4gICAgaWYgKHZhbHVlID09PSAwICYmIG9mZnNldCA9PSAtMTIpIHZhbHVlID0gMTI7XHJcbiAgICByZXR1cm4gcGFkTnVtYmVyKHZhbHVlLCBzaXplLCB0cmltKTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBkYXRlU3RyR2V0dGVyKG5hbWUsIHNob3J0Rm9ybSkge1xyXG4gIHJldHVybiBmdW5jdGlvbihkYXRlLCBmb3JtYXRzKSB7XHJcbiAgICB2YXIgdmFsdWUgPSBkYXRlWydnZXQnICsgbmFtZV0oKTtcclxuICAgIHZhciBnZXQgPSB1cHBlcmNhc2Uoc2hvcnRGb3JtID8gKCdTSE9SVCcgKyBuYW1lKSA6IG5hbWUpO1xyXG5cclxuICAgIHJldHVybiBmb3JtYXRzW2dldF1bdmFsdWVdO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRpbWVab25lR2V0dGVyKGRhdGUpIHtcclxuICB2YXIgem9uZSA9IC0xICogZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xyXG4gIHZhciBwYWRkZWRab25lID0gKHpvbmUgPj0gMCkgPyBcIitcIiA6IFwiXCI7XHJcblxyXG4gIHBhZGRlZFpvbmUgKz0gcGFkTnVtYmVyKE1hdGhbem9uZSA+IDAgPyAnZmxvb3InIDogJ2NlaWwnXSh6b25lIC8gNjApLCAyKSArXHJcbiAgICAgICAgICAgICAgICBwYWROdW1iZXIoTWF0aC5hYnMoem9uZSAlIDYwKSwgMik7XHJcblxyXG4gIHJldHVybiBwYWRkZWRab25lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKHllYXIpIHtcclxuICAgIC8vIDAgPSBpbmRleCBvZiBKYW51YXJ5XHJcbiAgICB2YXIgZGF5T2ZXZWVrT25GaXJzdCA9IChuZXcgRGF0ZSh5ZWFyLCAwLCAxKSkuZ2V0RGF5KCk7XHJcbiAgICAvLyA0ID0gaW5kZXggb2YgVGh1cnNkYXkgKCsxIHRvIGFjY291bnQgZm9yIDFzdCA9IDUpXHJcbiAgICAvLyAxMSA9IGluZGV4IG9mICpuZXh0KiBUaHVyc2RheSAoKzEgYWNjb3VudCBmb3IgMXN0ID0gMTIpXHJcbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgMCwgKChkYXlPZldlZWtPbkZpcnN0IDw9IDQpID8gNSA6IDEyKSAtIGRheU9mV2Vla09uRmlyc3QpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGV0aW1lKSB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZXRpbWUuZ2V0RnVsbFllYXIoKSwgZGF0ZXRpbWUuZ2V0TW9udGgoKSxcclxuICAgICAgLy8gNCA9IGluZGV4IG9mIFRodXJzZGF5XHJcbiAgICAgIGRhdGV0aW1lLmdldERhdGUoKSArICg0IC0gZGF0ZXRpbWUuZ2V0RGF5KCkpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gd2Vla0dldHRlcihzaXplKSB7XHJcbiAgIHJldHVybiBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgIHZhciBmaXJzdFRodXJzID0gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkpLFxyXG4gICAgICAgICB0aGlzVGh1cnMgPSBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGUpO1xyXG5cclxuICAgICAgdmFyIGRpZmYgPSArdGhpc1RodXJzIC0gK2ZpcnN0VGh1cnMsXHJcbiAgICAgICAgIHJlc3VsdCA9IDEgKyBNYXRoLnJvdW5kKGRpZmYgLyA2LjA0OGU4KTsgLy8gNi4wNDhlOCBtcyBwZXIgd2Vla1xyXG5cclxuICAgICAgcmV0dXJuIHBhZE51bWJlcihyZXN1bHQsIHNpemUpO1xyXG4gICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhbXBtR2V0dGVyKGRhdGUsIGZvcm1hdHMpIHtcclxuICByZXR1cm4gZGF0ZS5nZXRIb3VycygpIDwgMTIgPyBmb3JtYXRzLkFNUE1TWzBdIDogZm9ybWF0cy5BTVBNU1sxXTtcclxufVxyXG5cclxudmFyIERBVEVfRk9STUFUUyA9IHtcclxuICB5eXl5OiBkYXRlR2V0dGVyKCdGdWxsWWVhcicsIDQpLFxyXG4gICAgeXk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMiwgMCwgdHJ1ZSksXHJcbiAgICAgeTogZGF0ZUdldHRlcignRnVsbFllYXInLCAxKSxcclxuICBNTU1NOiBkYXRlU3RyR2V0dGVyKCdNb250aCcpLFxyXG4gICBNTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJywgdHJ1ZSksXHJcbiAgICBNTTogZGF0ZUdldHRlcignTW9udGgnLCAyLCAxKSxcclxuICAgICBNOiBkYXRlR2V0dGVyKCdNb250aCcsIDEsIDEpLFxyXG4gICAgZGQ6IGRhdGVHZXR0ZXIoJ0RhdGUnLCAyKSxcclxuICAgICBkOiBkYXRlR2V0dGVyKCdEYXRlJywgMSksXHJcbiAgICBISDogZGF0ZUdldHRlcignSG91cnMnLCAyKSxcclxuICAgICBIOiBkYXRlR2V0dGVyKCdIb3VycycsIDEpLFxyXG4gICAgaGg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMiwgLTEyKSxcclxuICAgICBoOiBkYXRlR2V0dGVyKCdIb3VycycsIDEsIC0xMiksXHJcbiAgICBtbTogZGF0ZUdldHRlcignTWludXRlcycsIDIpLFxyXG4gICAgIG06IGRhdGVHZXR0ZXIoJ01pbnV0ZXMnLCAxKSxcclxuICAgIHNzOiBkYXRlR2V0dGVyKCdTZWNvbmRzJywgMiksXHJcbiAgICAgczogZGF0ZUdldHRlcignU2Vjb25kcycsIDEpLFxyXG4gICAgIC8vIHdoaWxlIElTTyA4NjAxIHJlcXVpcmVzIGZyYWN0aW9ucyB0byBiZSBwcmVmaXhlZCB3aXRoIGAuYCBvciBgLGBcclxuICAgICAvLyB3ZSBjYW4gYmUganVzdCBzYWZlbHkgcmVseSBvbiB1c2luZyBgc3NzYCBzaW5jZSB3ZSBjdXJyZW50bHkgZG9uJ3Qgc3VwcG9ydCBzaW5nbGUgb3IgdHdvIGRpZ2l0IGZyYWN0aW9uc1xyXG4gICBzc3M6IGRhdGVHZXR0ZXIoJ01pbGxpc2Vjb25kcycsIDMpLFxyXG4gIEVFRUU6IGRhdGVTdHJHZXR0ZXIoJ0RheScpLFxyXG4gICBFRUU6IGRhdGVTdHJHZXR0ZXIoJ0RheScsIHRydWUpLFxyXG4gICAgIGE6IGFtcG1HZXR0ZXIsXHJcbiAgICAgWjogdGltZVpvbmVHZXR0ZXIsXHJcbiAgICB3dzogd2Vla0dldHRlcigyKSxcclxuICAgICB3OiB3ZWVrR2V0dGVyKDEpXHJcbn07XHJcblxyXG52YXIgREFURV9GT1JNQVRTX1NQTElUID0gLygoPzpbXnlNZEhobXNhWkV3J10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxafHcrKSkoLiopLyxcclxuICAgIE5VTUJFUl9TVFJJTkcgPSAvXlxcLT9cXGQrJC87XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBkYXRlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiAgIEZvcm1hdHMgYGRhdGVgIHRvIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSByZXF1ZXN0ZWQgYGZvcm1hdGAuXHJcbiAqXHJcbiAqICAgYGZvcm1hdGAgc3RyaW5nIGNhbiBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGVsZW1lbnRzOlxyXG4gKlxyXG4gKiAgICogYCd5eXl5J2A6IDQgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciAoZS5nLiBBRCAxID0+IDAwMDEsIEFEIDIwMTAgPT4gMjAxMClcclxuICogICAqIGAneXknYDogMiBkaWdpdCByZXByZXNlbnRhdGlvbiBvZiB5ZWFyLCBwYWRkZWQgKDAwLTk5KS4gKGUuZy4gQUQgMjAwMSA9PiAwMSwgQUQgMjAxMCA9PiAxMClcclxuICogICAqIGAneSdgOiAxIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIGUuZy4gKEFEIDEgPT4gMSwgQUQgMTk5ID0+IDE5OSlcclxuICogICAqIGAnTU1NTSdgOiBNb250aCBpbiB5ZWFyIChKYW51YXJ5LURlY2VtYmVyKVxyXG4gKiAgICogYCdNTU0nYDogTW9udGggaW4geWVhciAoSmFuLURlYylcclxuICogICAqIGAnTU0nYDogTW9udGggaW4geWVhciwgcGFkZGVkICgwMS0xMilcclxuICogICAqIGAnTSdgOiBNb250aCBpbiB5ZWFyICgxLTEyKVxyXG4gKiAgICogYCdkZCdgOiBEYXkgaW4gbW9udGgsIHBhZGRlZCAoMDEtMzEpXHJcbiAqICAgKiBgJ2QnYDogRGF5IGluIG1vbnRoICgxLTMxKVxyXG4gKiAgICogYCdFRUVFJ2A6IERheSBpbiBXZWVrLChTdW5kYXktU2F0dXJkYXkpXHJcbiAqICAgKiBgJ0VFRSdgOiBEYXkgaW4gV2VlaywgKFN1bi1TYXQpXHJcbiAqICAgKiBgJ0hIJ2A6IEhvdXIgaW4gZGF5LCBwYWRkZWQgKDAwLTIzKVxyXG4gKiAgICogYCdIJ2A6IEhvdXIgaW4gZGF5ICgwLTIzKVxyXG4gKiAgICogYCdoaCdgOiBIb3VyIGluIEFNL1BNLCBwYWRkZWQgKDAxLTEyKVxyXG4gKiAgICogYCdoJ2A6IEhvdXIgaW4gQU0vUE0sICgxLTEyKVxyXG4gKiAgICogYCdtbSdgOiBNaW51dGUgaW4gaG91ciwgcGFkZGVkICgwMC01OSlcclxuICogICAqIGAnbSdgOiBNaW51dGUgaW4gaG91ciAoMC01OSlcclxuICogICAqIGAnc3MnYDogU2Vjb25kIGluIG1pbnV0ZSwgcGFkZGVkICgwMC01OSlcclxuICogICAqIGAncydgOiBTZWNvbmQgaW4gbWludXRlICgwLTU5KVxyXG4gKiAgICogYCdzc3MnYDogTWlsbGlzZWNvbmQgaW4gc2Vjb25kLCBwYWRkZWQgKDAwMC05OTkpXHJcbiAqICAgKiBgJ2EnYDogQU0vUE0gbWFya2VyXHJcbiAqICAgKiBgJ1onYDogNCBkaWdpdCAoK3NpZ24pIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0aW1lem9uZSBvZmZzZXQgKC0xMjAwLSsxMjAwKVxyXG4gKiAgICogYCd3dydgOiBXZWVrIG9mIHllYXIsIHBhZGRlZCAoMDAtNTMpLiBXZWVrIDAxIGlzIHRoZSB3ZWVrIHdpdGggdGhlIGZpcnN0IFRodXJzZGF5IG9mIHRoZSB5ZWFyXHJcbiAqICAgKiBgJ3cnYDogV2VlayBvZiB5ZWFyICgwLTUzKS4gV2VlayAxIGlzIHRoZSB3ZWVrIHdpdGggdGhlIGZpcnN0IFRodXJzZGF5IG9mIHRoZSB5ZWFyXHJcbiAqXHJcbiAqICAgYGZvcm1hdGAgc3RyaW5nIGNhbiBhbHNvIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHByZWRlZmluZWRcclxuICogICB7QGxpbmsgZ3VpZGUvaTE4biBsb2NhbGl6YWJsZSBmb3JtYXRzfTpcclxuICpcclxuICogICAqIGAnbWVkaXVtJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSBoOm1tOnNzIGEnYCBmb3IgZW5fVVMgbG9jYWxlXHJcbiAqICAgICAoZS5nLiBTZXAgMywgMjAxMCAxMjowNTowOCBQTSlcclxuICogICAqIGAnc2hvcnQnYDogZXF1aXZhbGVudCB0byBgJ00vZC95eSBoOm1tIGEnYCBmb3IgZW5fVVMgIGxvY2FsZSAoZS5nLiA5LzMvMTAgMTI6MDUgUE0pXHJcbiAqICAgKiBgJ2Z1bGxEYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdFRUVFLCBNTU1NIGQsIHknYCBmb3IgZW5fVVMgIGxvY2FsZVxyXG4gKiAgICAgKGUuZy4gRnJpZGF5LCBTZXB0ZW1iZXIgMywgMjAxMClcclxuICogICAqIGAnbG9uZ0RhdGUnYDogZXF1aXZhbGVudCB0byBgJ01NTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIFNlcHRlbWJlciAzLCAyMDEwKVxyXG4gKiAgICogYCdtZWRpdW1EYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIFNlcCAzLCAyMDEwKVxyXG4gKiAgICogYCdzaG9ydERhdGUnYDogZXF1aXZhbGVudCB0byBgJ00vZC95eSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gOS8zLzEwKVxyXG4gKiAgICogYCdtZWRpdW1UaW1lJ2A6IGVxdWl2YWxlbnQgdG8gYCdoOm1tOnNzIGEnYCBmb3IgZW5fVVMgbG9jYWxlIChlLmcuIDEyOjA1OjA4IFBNKVxyXG4gKiAgICogYCdzaG9ydFRpbWUnYDogZXF1aXZhbGVudCB0byBgJ2g6bW0gYSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gMTI6MDUgUE0pXHJcbiAqXHJcbiAqICAgYGZvcm1hdGAgc3RyaW5nIGNhbiBjb250YWluIGxpdGVyYWwgdmFsdWVzLiBUaGVzZSBuZWVkIHRvIGJlIGVzY2FwZWQgYnkgc3Vycm91bmRpbmcgd2l0aCBzaW5nbGUgcXVvdGVzIChlLmcuXHJcbiAqICAgYFwiaCAnaW4gdGhlIG1vcm5pbmcnXCJgKS4gSW4gb3JkZXIgdG8gb3V0cHV0IGEgc2luZ2xlIHF1b3RlLCBlc2NhcGUgaXQgLSBpLmUuLCB0d28gc2luZ2xlIHF1b3RlcyBpbiBhIHNlcXVlbmNlXHJcbiAqICAgKGUuZy4gYFwiaCAnbycnY2xvY2snXCJgKS5cclxuICpcclxuICogQHBhcmFtIHsoRGF0ZXxudW1iZXJ8c3RyaW5nKX0gZGF0ZSBEYXRlIHRvIGZvcm1hdCBlaXRoZXIgYXMgRGF0ZSBvYmplY3QsIG1pbGxpc2Vjb25kcyAoc3RyaW5nIG9yXHJcbiAqICAgIG51bWJlcikgb3IgdmFyaW91cyBJU08gODYwMSBkYXRldGltZSBzdHJpbmcgZm9ybWF0cyAoZS5nLiB5eXl5LU1NLWRkVEhIOm1tOnNzLnNzc1ogYW5kIGl0c1xyXG4gKiAgICBzaG9ydGVyIHZlcnNpb25zIGxpa2UgeXl5eS1NTS1kZFRISDptbVosIHl5eXktTU0tZGQgb3IgeXl5eU1NZGRUSEhtbXNzWikuIElmIG5vIHRpbWV6b25lIGlzXHJcbiAqICAgIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGlucHV0LCB0aGUgdGltZSBpcyBjb25zaWRlcmVkIHRvIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBmb3JtYXQgRm9ybWF0dGluZyBydWxlcyAoc2VlIERlc2NyaXB0aW9uKS4gSWYgbm90IHNwZWNpZmllZCxcclxuICogICAgYG1lZGl1bURhdGVgIGlzIHVzZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gdGltZXpvbmUgVGltZXpvbmUgdG8gYmUgdXNlZCBmb3IgZm9ybWF0dGluZy4gUmlnaHQgbm93LCBvbmx5IGAnVVRDJ2AgaXMgc3VwcG9ydGVkLlxyXG4gKiAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIgd2lsbCBiZSB1c2VkLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgc3RyaW5nIG9yIHRoZSBpbnB1dCBpZiBpbnB1dCBpcyBub3QgcmVjb2duaXplZCBhcyBkYXRlL21pbGxpcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOidtZWRpdW0nfX08L3NwYW4+OlxyXG4gICAgICAgICAgIDxzcGFuPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSd9fTwvc3Bhbj48YnI+XHJcbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ319PC9zcGFuPjpcclxuICAgICAgICAgIDxzcGFuPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWid9fTwvc3Bhbj48YnI+XHJcbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjpcclxuICAgICAgICAgIDxzcGFuPnt7JzEyODgzMjM2MjMwMDYnIHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjxicj5cclxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOlwiTU0vZGQveXl5eSAnYXQnIGg6bW1hXCJ9fTwvc3Bhbj46XHJcbiAgICAgICAgICA8c3Bhbj57eycxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XCJNTS9kZC95eXl5ICdhdCcgaDptbWFcIn19PC9zcGFuPjxicj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBmb3JtYXQgZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSdcIikpLmdldFRleHQoKSkuXHJcbiAgICAgICAgICAgIHRvTWF0Y2goL09jdCAyXFxkLCAyMDEwIFxcZHsxLDJ9OlxcZHsyfTpcXGR7Mn0gKEFNfFBNKS8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWidcIikpLmdldFRleHQoKSkuXHJcbiAgICAgICAgICAgIHRvTWF0Y2goLzIwMTBcXC0xMFxcLTJcXGQgXFxkezJ9OlxcZHsyfTpcXGR7Mn0gKFxcLXxcXCspP1xcZHs0fS8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiJzEyODgzMjM2MjMwMDYnIHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ1wiKSkuZ2V0VGV4dCgpKS5cclxuICAgICAgICAgICAgdG9NYXRjaCgvMTBcXC8yXFxkXFwvMjAxMCBAIFxcZHsxLDJ9OlxcZHsyfShBTXxQTSkvKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIicxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XFxcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVxcXCJcIikpLmdldFRleHQoKSkuXHJcbiAgICAgICAgICAgIHRvTWF0Y2goLzEwXFwvMlxcZFxcLzIwMTAgYXQgXFxkezEsMn06XFxkezJ9KEFNfFBNKS8pO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5kYXRlRmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcclxuZnVuY3Rpb24gZGF0ZUZpbHRlcigkbG9jYWxlKSB7XHJcblxyXG5cclxuICB2YXIgUl9JU084NjAxX1NUUiA9IC9eKFxcZHs0fSktPyhcXGRcXGQpLT8oXFxkXFxkKSg/OlQoXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86XFwuKFxcZCspKT8pPyk/KFp8KFsrLV0pKFxcZFxcZCk6PyhcXGRcXGQpKT8pPyQvO1xyXG4gICAgICAgICAgICAgICAgICAgICAvLyAxICAgICAgICAyICAgICAgIDMgICAgICAgICA0ICAgICAgICAgIDUgICAgICAgICAgNiAgICAgICAgICA3ICAgICAgICAgIDggIDkgICAgIDEwICAgICAgMTFcclxuICBmdW5jdGlvbiBqc29uU3RyaW5nVG9EYXRlKHN0cmluZykge1xyXG4gICAgdmFyIG1hdGNoO1xyXG4gICAgaWYgKG1hdGNoID0gc3RyaW5nLm1hdGNoKFJfSVNPODYwMV9TVFIpKSB7XHJcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCksXHJcbiAgICAgICAgICB0ekhvdXIgPSAwLFxyXG4gICAgICAgICAgdHpNaW4gID0gMCxcclxuICAgICAgICAgIGRhdGVTZXR0ZXIgPSBtYXRjaFs4XSA/IGRhdGUuc2V0VVRDRnVsbFllYXIgOiBkYXRlLnNldEZ1bGxZZWFyLFxyXG4gICAgICAgICAgdGltZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENIb3VycyA6IGRhdGUuc2V0SG91cnM7XHJcblxyXG4gICAgICBpZiAobWF0Y2hbOV0pIHtcclxuICAgICAgICB0ekhvdXIgPSBpbnQobWF0Y2hbOV0gKyBtYXRjaFsxMF0pO1xyXG4gICAgICAgIHR6TWluID0gaW50KG1hdGNoWzldICsgbWF0Y2hbMTFdKTtcclxuICAgICAgfVxyXG4gICAgICBkYXRlU2V0dGVyLmNhbGwoZGF0ZSwgaW50KG1hdGNoWzFdKSwgaW50KG1hdGNoWzJdKSAtIDEsIGludChtYXRjaFszXSkpO1xyXG4gICAgICB2YXIgaCA9IGludChtYXRjaFs0XSB8fCAwKSAtIHR6SG91cjtcclxuICAgICAgdmFyIG0gPSBpbnQobWF0Y2hbNV0gfHwgMCkgLSB0ek1pbjtcclxuICAgICAgdmFyIHMgPSBpbnQobWF0Y2hbNl0gfHwgMCk7XHJcbiAgICAgIHZhciBtcyA9IE1hdGgucm91bmQocGFyc2VGbG9hdCgnMC4nICsgKG1hdGNoWzddIHx8IDApKSAqIDEwMDApO1xyXG4gICAgICB0aW1lU2V0dGVyLmNhbGwoZGF0ZSwgaCwgbSwgcywgbXMpO1xyXG4gICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUsIGZvcm1hdCwgdGltZXpvbmUpIHtcclxuICAgIHZhciB0ZXh0ID0gJycsXHJcbiAgICAgICAgcGFydHMgPSBbXSxcclxuICAgICAgICBmbiwgbWF0Y2g7XHJcblxyXG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8ICdtZWRpdW1EYXRlJztcclxuICAgIGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tmb3JtYXRdIHx8IGZvcm1hdDtcclxuICAgIGlmIChpc1N0cmluZyhkYXRlKSkge1xyXG4gICAgICBkYXRlID0gTlVNQkVSX1NUUklORy50ZXN0KGRhdGUpID8gaW50KGRhdGUpIDoganNvblN0cmluZ1RvRGF0ZShkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNOdW1iZXIoZGF0ZSkpIHtcclxuICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNEYXRlKGRhdGUpKSB7XHJcbiAgICAgIHJldHVybiBkYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHdoaWxlIChmb3JtYXQpIHtcclxuICAgICAgbWF0Y2ggPSBEQVRFX0ZPUk1BVFNfU1BMSVQuZXhlYyhmb3JtYXQpO1xyXG4gICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICBwYXJ0cyA9IGNvbmNhdChwYXJ0cywgbWF0Y2gsIDEpO1xyXG4gICAgICAgIGZvcm1hdCA9IHBhcnRzLnBvcCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhcnRzLnB1c2goZm9ybWF0KTtcclxuICAgICAgICBmb3JtYXQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRpbWV6b25lICYmIHRpbWV6b25lID09PSAnVVRDJykge1xyXG4gICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgICBkYXRlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkpO1xyXG4gICAgfVxyXG4gICAgZm9yRWFjaChwYXJ0cywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgZm4gPSBEQVRFX0ZPUk1BVFNbdmFsdWVdO1xyXG4gICAgICB0ZXh0ICs9IGZuID8gZm4oZGF0ZSwgJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTKVxyXG4gICAgICAgICAgICAgICAgIDogdmFsdWUucmVwbGFjZSgvKF4nfCckKS9nLCAnJykucmVwbGFjZSgvJycvZywgXCInXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRleHQ7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIGpzb25cclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqICAgQWxsb3dzIHlvdSB0byBjb252ZXJ0IGEgSmF2YVNjcmlwdCBvYmplY3QgaW50byBKU09OIHN0cmluZy5cclxuICpcclxuICogICBUaGlzIGZpbHRlciBpcyBtb3N0bHkgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuIFdoZW4gdXNpbmcgdGhlIGRvdWJsZSBjdXJseSB7e3ZhbHVlfX0gbm90YXRpb25cclxuICogICB0aGUgYmluZGluZyBpcyBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBKU09OLlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IG9iamVjdCBBbnkgSmF2YVNjcmlwdCBvYmplY3QgKGluY2x1ZGluZyBhcnJheXMgYW5kIHByaW1pdGl2ZSB0eXBlcykgdG8gZmlsdGVyLlxyXG4gKiBAcGFyYW0ge251bWJlcj19IHNwYWNpbmcgVGhlIG51bWJlciBvZiBzcGFjZXMgdG8gdXNlIHBlciBpbmRlbnRhdGlvbiwgZGVmYXVsdHMgdG8gMi5cclxuICogQHJldHVybnMge3N0cmluZ30gSlNPTiBzdHJpbmcuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8cHJlIGlkPVwiZGVmYXVsdC1zcGFjaW5nXCI+e3sgeyduYW1lJzondmFsdWUnfSB8IGpzb24gfX08L3ByZT5cclxuICAgICAgIDxwcmUgaWQ9XCJjdXN0b20tc3BhY2luZ1wiPnt7IHsnbmFtZSc6J3ZhbHVlJ30gfCBqc29uOjQgfX08L3ByZT5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBqc29uaWZ5IGZpbHRlcmVkIG9iamVjdHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RlZmF1bHQtc3BhY2luZycpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiAgXCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXN0b20tc3BhY2luZycpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiAgICBcIm5hbWVcIjogP1widmFsdWVcIlxcbn0vKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkZpbHRlcigpIHtcclxuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBzcGFjaW5nKSB7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQoc3BhY2luZykpIHtcclxuICAgICAgICBzcGFjaW5nID0gMjtcclxuICAgIH1cclxuICAgIHJldHVybiB0b0pzb24ob2JqZWN0LCBzcGFjaW5nKTtcclxuICB9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBmaWx0ZXJcclxuICogQG5hbWUgbG93ZXJjYXNlXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDb252ZXJ0cyBzdHJpbmcgdG8gbG93ZXJjYXNlLlxyXG4gKiBAc2VlIGFuZ3VsYXIubG93ZXJjYXNlXHJcbiAqL1xyXG52YXIgbG93ZXJjYXNlRmlsdGVyID0gdmFsdWVGbihsb3dlcmNhc2UpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIHVwcGVyY2FzZVxyXG4gKiBAa2luZCBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ29udmVydHMgc3RyaW5nIHRvIHVwcGVyY2FzZS5cclxuICogQHNlZSBhbmd1bGFyLnVwcGVyY2FzZVxyXG4gKi9cclxudmFyIHVwcGVyY2FzZUZpbHRlciA9IHZhbHVlRm4odXBwZXJjYXNlKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIGxpbWl0VG9cclxuICogQGtpbmQgZnVuY3Rpb25cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIENyZWF0ZXMgYSBuZXcgYXJyYXkgb3Igc3RyaW5nIGNvbnRhaW5pbmcgb25seSBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMuIFRoZSBlbGVtZW50c1xyXG4gKiBhcmUgdGFrZW4gZnJvbSBlaXRoZXIgdGhlIGJlZ2lubmluZyBvciB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXksIHN0cmluZyBvciBudW1iZXIsIGFzIHNwZWNpZmllZCBieVxyXG4gKiB0aGUgdmFsdWUgYW5kIHNpZ24gKHBvc2l0aXZlIG9yIG5lZ2F0aXZlKSBvZiBgbGltaXRgLiBJZiBhIG51bWJlciBpcyB1c2VkIGFzIGlucHV0LCBpdCBpc1xyXG4gKiBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfG51bWJlcn0gaW5wdXQgU291cmNlIGFycmF5LCBzdHJpbmcgb3IgbnVtYmVyIHRvIGJlIGxpbWl0ZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gbGltaXQgVGhlIGxlbmd0aCBvZiB0aGUgcmV0dXJuZWQgYXJyYXkgb3Igc3RyaW5nLiBJZiB0aGUgYGxpbWl0YCBudW1iZXJcclxuICogICAgIGlzIHBvc2l0aXZlLCBgbGltaXRgIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBhcnJheS9zdHJpbmcgYXJlIGNvcGllZC5cclxuICogICAgIElmIHRoZSBudW1iZXIgaXMgbmVnYXRpdmUsIGBsaW1pdGAgbnVtYmVyICBvZiBpdGVtcyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBhcnJheS9zdHJpbmdcclxuICogICAgIGFyZSBjb3BpZWQuIFRoZSBgbGltaXRgIHdpbGwgYmUgdHJpbW1lZCBpZiBpdCBleGNlZWRzIGBhcnJheS5sZW5ndGhgXHJcbiAqIEByZXR1cm5zIHtBcnJheXxzdHJpbmd9IEEgbmV3IHN1Yi1hcnJheSBvciBzdWJzdHJpbmcgb2YgbGVuZ3RoIGBsaW1pdGAgb3IgbGVzcyBpZiBpbnB1dCBhcnJheVxyXG4gKiAgICAgaGFkIGxlc3MgdGhhbiBgbGltaXRgIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJsaW1pdFRvRXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbGltaXRUb0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLm51bWJlcnMgPSBbMSwyLDMsNCw1LDYsNyw4LDldO1xyXG4gICAgICAgICAgICAgJHNjb3BlLmxldHRlcnMgPSBcImFiY2RlZmdoaVwiO1xyXG4gICAgICAgICAgICAgJHNjb3BlLmxvbmdOdW1iZXIgPSAyMzQ1NDMyMzQyO1xyXG4gICAgICAgICAgICAgJHNjb3BlLm51bUxpbWl0ID0gMztcclxuICAgICAgICAgICAgICRzY29wZS5sZXR0ZXJMaW1pdCA9IDM7XHJcbiAgICAgICAgICAgICAkc2NvcGUubG9uZ051bWJlckxpbWl0ID0gMztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIExpbWl0IHt7bnVtYmVyc319IHRvOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJudW1MaW1pdFwiPlxyXG4gICAgICAgICA8cD5PdXRwdXQgbnVtYmVyczoge3sgbnVtYmVycyB8IGxpbWl0VG86bnVtTGltaXQgfX08L3A+XHJcbiAgICAgICAgIExpbWl0IHt7bGV0dGVyc319IHRvOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJsZXR0ZXJMaW1pdFwiPlxyXG4gICAgICAgICA8cD5PdXRwdXQgbGV0dGVyczoge3sgbGV0dGVycyB8IGxpbWl0VG86bGV0dGVyTGltaXQgfX08L3A+XHJcbiAgICAgICAgIExpbWl0IHt7bG9uZ051bWJlcn19IHRvOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJsb25nTnVtYmVyTGltaXRcIj5cclxuICAgICAgICAgPHA+T3V0cHV0IGxvbmcgbnVtYmVyOiB7eyBsb25nTnVtYmVyIHwgbGltaXRUbzpsb25nTnVtYmVyTGltaXQgfX08L3A+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgdmFyIG51bUxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdudW1MaW1pdCcpKTtcclxuICAgICAgIHZhciBsZXR0ZXJMaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGV0dGVyTGltaXQnKSk7XHJcbiAgICAgICB2YXIgbG9uZ051bWJlckxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsb25nTnVtYmVyTGltaXQnKSk7XHJcbiAgICAgICB2YXIgbGltaXRlZE51bWJlcnMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ251bWJlcnMgfCBsaW1pdFRvOm51bUxpbWl0JykpO1xyXG4gICAgICAgdmFyIGxpbWl0ZWRMZXR0ZXJzID0gZWxlbWVudChieS5iaW5kaW5nKCdsZXR0ZXJzIHwgbGltaXRUbzpsZXR0ZXJMaW1pdCcpKTtcclxuICAgICAgIHZhciBsaW1pdGVkTG9uZ051bWJlciA9IGVsZW1lbnQoYnkuYmluZGluZygnbG9uZ051bWJlciB8IGxpbWl0VG86bG9uZ051bWJlckxpbWl0JykpO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbGltaXQgdGhlIG51bWJlciBhcnJheSB0byBmaXJzdCB0aHJlZSBpdGVtcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QobnVtTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcclxuICAgICAgICAgZXhwZWN0KGxldHRlckxpbWl0SW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCczJyk7XHJcbiAgICAgICAgIGV4cGVjdChsb25nTnVtYmVyTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFsxLDIsM10nKTtcclxuICAgICAgICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGFiYycpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDIzNCcpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gVGhlcmUgaXMgYSBidWcgaW4gc2FmYXJpIGFuZCBwcm90cmFjdG9yIHRoYXQgZG9lc24ndCBsaWtlIHRoZSBtaW51cyBrZXlcclxuICAgICAgIC8vIGl0KCdzaG91bGQgdXBkYXRlIHRoZSBvdXRwdXQgd2hlbiAtMyBpcyBlbnRlcmVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAvLyAgIG51bUxpbWl0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgIC8vICAgbnVtTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcclxuICAgICAgIC8vICAgbGV0dGVyTGltaXRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgLy8gICBsZXR0ZXJMaW1pdElucHV0LnNlbmRLZXlzKCctMycpO1xyXG4gICAgICAgLy8gICBsb25nTnVtYmVyTGltaXRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgLy8gICBsb25nTnVtYmVyTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcclxuICAgICAgIC8vICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFs3LDgsOV0nKTtcclxuICAgICAgIC8vICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGdoaScpO1xyXG4gICAgICAgLy8gICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDM0MicpO1xyXG4gICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgaXQoJ3Nob3VsZCBub3QgZXhjZWVkIHRoZSBtYXhpbXVtIHNpemUgb2YgaW5wdXQgYXJyYXknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgbnVtTGltaXRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBudW1MaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcclxuICAgICAgICAgbGV0dGVyTGltaXRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBsZXR0ZXJMaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcclxuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZE51bWJlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbnVtYmVyczogWzEsMiwzLDQsNSw2LDcsOCw5XScpO1xyXG4gICAgICAgICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogYWJjZGVmZ2hpJyk7XHJcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMjM0NTQzMjM0MicpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiovXHJcbmZ1bmN0aW9uIGxpbWl0VG9GaWx0ZXIoKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0LCBsaW1pdCkge1xyXG4gICAgaWYgKGlzTnVtYmVyKGlucHV0KSkgaW5wdXQgPSBpbnB1dC50b1N0cmluZygpO1xyXG4gICAgaWYgKCFpc0FycmF5KGlucHV0KSAmJiAhaXNTdHJpbmcoaW5wdXQpKSByZXR1cm4gaW5wdXQ7XHJcblxyXG4gICAgaWYgKE1hdGguYWJzKE51bWJlcihsaW1pdCkpID09PSBJbmZpbml0eSkge1xyXG4gICAgICBsaW1pdCA9IE51bWJlcihsaW1pdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsaW1pdCA9IGludChsaW1pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9OYU4gY2hlY2sgb24gbGltaXRcclxuICAgIGlmIChsaW1pdCkge1xyXG4gICAgICByZXR1cm4gbGltaXQgPiAwID8gaW5wdXQuc2xpY2UoMCwgbGltaXQpIDogaW5wdXQuc2xpY2UobGltaXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGlzU3RyaW5nKGlucHV0KSA/IFwiXCIgOiBbXTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGZpbHRlclxyXG4gKiBAbmFtZSBvcmRlckJ5XHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBPcmRlcnMgYSBzcGVjaWZpZWQgYGFycmF5YCBieSB0aGUgYGV4cHJlc3Npb25gIHByZWRpY2F0ZS4gSXQgaXMgb3JkZXJlZCBhbHBoYWJldGljYWxseVxyXG4gKiBmb3Igc3RyaW5ncyBhbmQgbnVtZXJpY2FsbHkgZm9yIG51bWJlcnMuIE5vdGU6IGlmIHlvdSBub3RpY2UgbnVtYmVycyBhcmUgbm90IGJlaW5nIHNvcnRlZFxyXG4gKiBjb3JyZWN0bHksIG1ha2Ugc3VyZSB0aGV5IGFyZSBhY3R1YWxseSBiZWluZyBzYXZlZCBhcyBudW1iZXJzIGFuZCBub3Qgc3RyaW5ncy5cclxuICpcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNvcnQuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil8c3RyaW5nfEFycmF5LjwoZnVuY3Rpb24oKil8c3RyaW5nKT49fSBleHByZXNzaW9uIEEgcHJlZGljYXRlIHRvIGJlXHJcbiAqICAgIHVzZWQgYnkgdGhlIGNvbXBhcmF0b3IgdG8gZGV0ZXJtaW5lIHRoZSBvcmRlciBvZiBlbGVtZW50cy5cclxuICpcclxuICogICAgQ2FuIGJlIG9uZSBvZjpcclxuICpcclxuICogICAgLSBgZnVuY3Rpb25gOiBHZXR0ZXIgZnVuY3Rpb24uIFRoZSByZXN1bHQgb2YgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIHNvcnRlZCB1c2luZyB0aGVcclxuICogICAgICBgPGAsIGA9YCwgYD5gIG9wZXJhdG9yLlxyXG4gKiAgICAtIGBzdHJpbmdgOiBBbiBBbmd1bGFyIGV4cHJlc3Npb24uIFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIGlzIHVzZWQgdG8gY29tcGFyZSBlbGVtZW50c1xyXG4gKiAgICAgIChmb3IgZXhhbXBsZSBgbmFtZWAgdG8gc29ydCBieSBhIHByb3BlcnR5IGNhbGxlZCBgbmFtZWAgb3IgYG5hbWUuc3Vic3RyKDAsIDMpYCB0byBzb3J0IGJ5XHJcbiAqICAgICAgMyBmaXJzdCBjaGFyYWN0ZXJzIG9mIGEgcHJvcGVydHkgY2FsbGVkIGBuYW1lYCkuIFRoZSByZXN1bHQgb2YgYSBjb25zdGFudCBleHByZXNzaW9uXHJcbiAqICAgICAgaXMgaW50ZXJwcmV0ZWQgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvIGJlIHVzZWQgaW4gY29tcGFyaXNvbnMgKGZvciBleGFtcGxlIGBcInNwZWNpYWwgbmFtZVwiYFxyXG4gKiAgICAgIHRvIHNvcnQgb2JqZWN0IGJ5IHRoZSB2YWx1ZSBvZiB0aGVpciBgc3BlY2lhbCBuYW1lYCBwcm9wZXJ0eSkuIEFuIGV4cHJlc3Npb24gY2FuIGJlXHJcbiAqICAgICAgb3B0aW9uYWxseSBwcmVmaXhlZCB3aXRoIGArYCBvciBgLWAgdG8gY29udHJvbCBhc2NlbmRpbmcgb3IgZGVzY2VuZGluZyBzb3J0IG9yZGVyXHJcbiAqICAgICAgKGZvciBleGFtcGxlLCBgK25hbWVgIG9yIGAtbmFtZWApLiBJZiBubyBwcm9wZXJ0eSBpcyBwcm92aWRlZCwgKGUuZy4gYCcrJ2ApIHRoZW4gdGhlIGFycmF5XHJcbiAqICAgICAgZWxlbWVudCBpdHNlbGYgaXMgdXNlZCB0byBjb21wYXJlIHdoZXJlIHNvcnRpbmcuXHJcbiAqICAgIC0gYEFycmF5YDogQW4gYXJyYXkgb2YgZnVuY3Rpb24gb3Igc3RyaW5nIHByZWRpY2F0ZXMuIFRoZSBmaXJzdCBwcmVkaWNhdGUgaW4gdGhlIGFycmF5XHJcbiAqICAgICAgaXMgdXNlZCBmb3Igc29ydGluZywgYnV0IHdoZW4gdHdvIGl0ZW1zIGFyZSBlcXVpdmFsZW50LCB0aGUgbmV4dCBwcmVkaWNhdGUgaXMgdXNlZC5cclxuICpcclxuICogICAgSWYgdGhlIHByZWRpY2F0ZSBpcyBtaXNzaW5nIG9yIGVtcHR5IHRoZW4gaXQgZGVmYXVsdHMgdG8gYCcrJ2AuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IHJldmVyc2UgUmV2ZXJzZSB0aGUgb3JkZXIgb2YgdGhlIGFycmF5LlxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IFNvcnRlZCBjb3B5IG9mIHRoZSBzb3VyY2UgYXJyYXkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9XHJcbiAgICAgICAgICAgICAgICAgW3tuYW1lOidKb2huJywgcGhvbmU6JzU1NS0xMjEyJywgYWdlOjEwfSxcclxuICAgICAgICAgICAgICAgICAge25hbWU6J01hcnknLCBwaG9uZTonNTU1LTk4NzYnLCBhZ2U6MTl9LFxyXG4gICAgICAgICAgICAgICAgICB7bmFtZTonTWlrZScsIHBob25lOic1NTUtNDMyMScsIGFnZToyMX0sXHJcbiAgICAgICAgICAgICAgICAgIHtuYW1lOidBZGFtJywgcGhvbmU6JzU1NS01Njc4JywgYWdlOjM1fSxcclxuICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGllJywgcGhvbmU6JzU1NS04NzY1JywgYWdlOjI5fV07XHJcbiAgICAgICAgICAgICAkc2NvcGUucHJlZGljYXRlID0gJy1hZ2UnO1xyXG4gICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPHByZT5Tb3J0aW5nIHByZWRpY2F0ZSA9IHt7cHJlZGljYXRlfX07IHJldmVyc2UgPSB7e3JldmVyc2V9fTwvcHJlPlxyXG4gICAgICAgICA8aHIvPlxyXG4gICAgICAgICBbIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInByZWRpY2F0ZT0nJ1wiPnVuc29ydGVkPC9hPiBdXHJcbiAgICAgICAgIDx0YWJsZSBjbGFzcz1cImZyaWVuZFwiPlxyXG4gICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJwcmVkaWNhdGUgPSAnbmFtZSc7IHJldmVyc2U9ZmFsc2VcIj5OYW1lPC9hPlxyXG4gICAgICAgICAgICAgICAgICg8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJwcmVkaWNhdGUgPSAnLW5hbWUnOyByZXZlcnNlPWZhbHNlXCI+XjwvYT4pPC90aD5cclxuICAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJwcmVkaWNhdGUgPSAncGhvbmUnOyByZXZlcnNlPSFyZXZlcnNlXCI+UGhvbmUgTnVtYmVyPC9hPjwvdGg+XHJcbiAgICAgICAgICAgICA8dGg+PGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwicHJlZGljYXRlID0gJ2FnZSc7IHJldmVyc2U9IXJldmVyc2VcIj5BZ2U8L2E+PC90aD5cclxuICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IG9yZGVyQnk6cHJlZGljYXRlOnJldmVyc2VcIj5cclxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxyXG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLnBob25lfX08L3RkPlxyXG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cclxuICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIEl0J3MgYWxzbyBwb3NzaWJsZSB0byBjYWxsIHRoZSBvcmRlckJ5IGZpbHRlciBtYW51YWxseSwgYnkgaW5qZWN0aW5nIGAkZmlsdGVyYCwgcmV0cmlldmluZyB0aGVcclxuICogZmlsdGVyIHJvdXRpbmUgd2l0aCBgJGZpbHRlcignb3JkZXJCeScpYCwgYW5kIGNhbGxpbmcgdGhlIHJldHVybmVkIGZpbHRlciByb3V0aW5lIHdpdGggdGhlXHJcbiAqIGRlc2lyZWQgcGFyYW1ldGVycy5cclxuICpcclxuICogRXhhbXBsZTpcclxuICpcclxuICogQGV4YW1wbGVcclxuICA8ZXhhbXBsZSBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRcIj5cclxuICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgPHRoPjxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInJldmVyc2U9ZmFsc2U7b3JkZXIoJ25hbWUnLCBmYWxzZSlcIj5OYW1lPC9hPlxyXG4gICAgICAgICAgICAgICg8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJvcmRlcignLW5hbWUnLGZhbHNlKVwiPl48L2E+KTwvdGg+XHJcbiAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJyZXZlcnNlPSFyZXZlcnNlO29yZGVyKCdwaG9uZScsIHJldmVyc2UpXCI+UGhvbmUgTnVtYmVyPC9hPjwvdGg+XHJcbiAgICAgICAgICAgIDx0aD48YSBocmVmPVwiXCIgbmctY2xpY2s9XCJyZXZlcnNlPSFyZXZlcnNlO29yZGVyKCdhZ2UnLHJldmVyc2UpXCI+QWdlPC9hPjwvdGg+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzXCI+XHJcbiAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxyXG4gICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5hZ2V9fTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG5cclxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGZpbHRlcicsIGZ1bmN0aW9uKCRzY29wZSwgJGZpbHRlcikge1xyXG4gICAgICAgICAgdmFyIG9yZGVyQnkgPSAkZmlsdGVyKCdvcmRlckJ5Jyk7XHJcbiAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IFtcclxuICAgICAgICAgICAgeyBuYW1lOiAnSm9obicsICAgIHBob25lOiAnNTU1LTEyMTInLCAgICBhZ2U6IDEwIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ01hcnknLCAgICBwaG9uZTogJzU1NS05ODc2JywgICAgYWdlOiAxOSB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdNaWtlJywgICAgcGhvbmU6ICc1NTUtNDMyMScsICAgIGFnZTogMjEgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnQWRhbScsICAgIHBob25lOiAnNTU1LTU2NzgnLCAgICBhZ2U6IDM1IH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0p1bGllJywgICBwaG9uZTogJzU1NS04NzY1JywgICAgYWdlOiAyOSB9XHJcbiAgICAgICAgICBdO1xyXG4gICAgICAgICAgJHNjb3BlLm9yZGVyID0gZnVuY3Rpb24ocHJlZGljYXRlLCByZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5mcmllbmRzID0gb3JkZXJCeSgkc2NvcGUuZnJpZW5kcywgcHJlZGljYXRlLCByZXZlcnNlKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICAkc2NvcGUub3JkZXIoJy1hZ2UnLGZhbHNlKTtcclxuICAgICAgICB9XSk7XHJcbiAgICA8L2ZpbGU+XHJcbjwvZXhhbXBsZT5cclxuICovXHJcbm9yZGVyQnlGaWx0ZXIuJGluamVjdCA9IFsnJHBhcnNlJ107XHJcbmZ1bmN0aW9uIG9yZGVyQnlGaWx0ZXIoJHBhcnNlKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBzb3J0UHJlZGljYXRlLCByZXZlcnNlT3JkZXIpIHtcclxuICAgIGlmICghKGlzQXJyYXlMaWtlKGFycmF5KSkpIHJldHVybiBhcnJheTtcclxuICAgIHNvcnRQcmVkaWNhdGUgPSBpc0FycmF5KHNvcnRQcmVkaWNhdGUpID8gc29ydFByZWRpY2F0ZSA6IFtzb3J0UHJlZGljYXRlXTtcclxuICAgIGlmIChzb3J0UHJlZGljYXRlLmxlbmd0aCA9PT0gMCkgeyBzb3J0UHJlZGljYXRlID0gWycrJ107IH1cclxuICAgIHNvcnRQcmVkaWNhdGUgPSBzb3J0UHJlZGljYXRlLm1hcChmdW5jdGlvbihwcmVkaWNhdGUpIHtcclxuICAgICAgdmFyIGRlc2NlbmRpbmcgPSBmYWxzZSwgZ2V0ID0gcHJlZGljYXRlIHx8IGlkZW50aXR5O1xyXG4gICAgICBpZiAoaXNTdHJpbmcocHJlZGljYXRlKSkge1xyXG4gICAgICAgIGlmICgocHJlZGljYXRlLmNoYXJBdCgwKSA9PSAnKycgfHwgcHJlZGljYXRlLmNoYXJBdCgwKSA9PSAnLScpKSB7XHJcbiAgICAgICAgICBkZXNjZW5kaW5nID0gcHJlZGljYXRlLmNoYXJBdCgwKSA9PSAnLSc7XHJcbiAgICAgICAgICBwcmVkaWNhdGUgPSBwcmVkaWNhdGUuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJlZGljYXRlID09PSAnJykge1xyXG4gICAgICAgICAgLy8gRWZmZWN0aXZlbHkgbm8gcHJlZGljYXRlIHdhcyBwYXNzZWQgc28gd2UgY29tcGFyZSBpZGVudGl0eVxyXG4gICAgICAgICAgcmV0dXJuIHJldmVyc2VDb21wYXJhdG9yKGNvbXBhcmUsIGRlc2NlbmRpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXQgPSAkcGFyc2UocHJlZGljYXRlKTtcclxuICAgICAgICBpZiAoZ2V0LmNvbnN0YW50KSB7XHJcbiAgICAgICAgICB2YXIga2V5ID0gZ2V0KCk7XHJcbiAgICAgICAgICByZXR1cm4gcmV2ZXJzZUNvbXBhcmF0b3IoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcGFyZShhW2tleV0sIGJba2V5XSk7XHJcbiAgICAgICAgICB9LCBkZXNjZW5kaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJldmVyc2VDb21wYXJhdG9yKGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gY29tcGFyZShnZXQoYSksZ2V0KGIpKTtcclxuICAgICAgfSwgZGVzY2VuZGluZyk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5KS5zb3J0KHJldmVyc2VDb21wYXJhdG9yKGNvbXBhcmF0b3IsIHJldmVyc2VPcmRlcikpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhcmF0b3IobzEsIG8yKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc29ydFByZWRpY2F0ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjb21wID0gc29ydFByZWRpY2F0ZVtpXShvMSwgbzIpO1xyXG4gICAgICAgIGlmIChjb21wICE9PSAwKSByZXR1cm4gY29tcDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJldmVyc2VDb21wYXJhdG9yKGNvbXAsIGRlc2NlbmRpbmcpIHtcclxuICAgICAgcmV0dXJuIGRlc2NlbmRpbmdcclxuICAgICAgICAgID8gZnVuY3Rpb24oYSwgYikge3JldHVybiBjb21wKGIsYSk7fVxyXG4gICAgICAgICAgOiBjb21wO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XHJcbiAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XHJcbiAgICAgICAgY2FzZSAnbnVtYmVyJzogLyogZmFsbHMgdGhyb3VnaCAqL1xyXG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOiAvKiBmYWxscyB0aHJvdWdoICovXHJcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZSkge1xyXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiAnbnVsbCc7XHJcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUudmFsdWVPZiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudmFsdWVPZigpO1xyXG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlLnRvU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xyXG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGFyZSh2MSwgdjIpIHtcclxuICAgICAgdmFyIHQxID0gdHlwZW9mIHYxO1xyXG4gICAgICB2YXIgdDIgPSB0eXBlb2YgdjI7XHJcbiAgICAgIGlmICh0MSA9PT0gdDIgJiYgdDEgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICB2MSA9IG9iamVjdFRvU3RyaW5nKHYxKTtcclxuICAgICAgICB2MiA9IG9iamVjdFRvU3RyaW5nKHYyKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodDEgPT09IHQyKSB7XHJcbiAgICAgICAgaWYgKHQxID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgdjEgPSB2MS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgIHYyID0gdjIudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHYxID09PSB2MikgcmV0dXJuIDA7XHJcbiAgICAgICAgcmV0dXJuIHYxIDwgdjIgPyAtMSA6IDE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHQxIDwgdDIgPyAtMSA6IDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBuZ0RpcmVjdGl2ZShkaXJlY3RpdmUpIHtcclxuICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XHJcbiAgICBkaXJlY3RpdmUgPSB7XHJcbiAgICAgIGxpbms6IGRpcmVjdGl2ZVxyXG4gICAgfTtcclxuICB9XHJcbiAgZGlyZWN0aXZlLnJlc3RyaWN0ID0gZGlyZWN0aXZlLnJlc3RyaWN0IHx8ICdBQyc7XHJcbiAgcmV0dXJuIHZhbHVlRm4oZGlyZWN0aXZlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgYVxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogTW9kaWZpZXMgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIGh0bWwgQSB0YWcgc28gdGhhdCB0aGUgZGVmYXVsdCBhY3Rpb24gaXMgcHJldmVudGVkIHdoZW5cclxuICogdGhlIGhyZWYgYXR0cmlidXRlIGlzIGVtcHR5LlxyXG4gKlxyXG4gKiBUaGlzIGNoYW5nZSBwZXJtaXRzIHRoZSBlYXN5IGNyZWF0aW9uIG9mIGFjdGlvbiBsaW5rcyB3aXRoIHRoZSBgbmdDbGlja2AgZGlyZWN0aXZlXHJcbiAqIHdpdGhvdXQgY2hhbmdpbmcgdGhlIGxvY2F0aW9uIG9yIGNhdXNpbmcgcGFnZSByZWxvYWRzLCBlLmcuOlxyXG4gKiBgPGEgaHJlZj1cIlwiIG5nLWNsaWNrPVwibGlzdC5hZGRJdGVtKClcIj5BZGQgSXRlbTwvYT5gXHJcbiAqL1xyXG52YXIgaHRtbEFuY2hvckRpcmVjdGl2ZSA9IHZhbHVlRm4oe1xyXG4gIHJlc3RyaWN0OiAnRScsXHJcbiAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xyXG4gICAgaWYgKCFhdHRyLmhyZWYgJiYgIWF0dHIueGxpbmtIcmVmICYmICFhdHRyLm5hbWUpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGxpbmtlZCBlbGVtZW50IGlzIG5vdCBhbiBhbmNob3IgdGFnIGFueW1vcmUsIGRvIG5vdGhpbmdcclxuICAgICAgICBpZiAoZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYScpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gU1ZHQUVsZW1lbnQgZG9lcyBub3QgdXNlIHRoZSBocmVmIGF0dHJpYnV0ZSwgYnV0IHJhdGhlciB0aGUgJ3hsaW5rSHJlZicgYXR0cmlidXRlLlxyXG4gICAgICAgIHZhciBocmVmID0gdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXScgP1xyXG4gICAgICAgICAgICAgICAgICAgJ3hsaW5rOmhyZWYnIDogJ2hyZWYnO1xyXG4gICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbm8gaHJlZiB1cmwsIHRoZW4gZG9uJ3QgbmF2aWdhdGUgYW55d2hlcmUuXHJcbiAgICAgICAgICBpZiAoIWVsZW1lbnQuYXR0cihocmVmKSkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0hyZWZcclxuICogQHJlc3RyaWN0IEFcclxuICogQHByaW9yaXR5IDk5XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBVc2luZyBBbmd1bGFyIG1hcmt1cCBsaWtlIGB7e2hhc2h9fWAgaW4gYW4gaHJlZiBhdHRyaWJ1dGUgd2lsbFxyXG4gKiBtYWtlIHRoZSBsaW5rIGdvIHRvIHRoZSB3cm9uZyBVUkwgaWYgdGhlIHVzZXIgY2xpY2tzIGl0IGJlZm9yZVxyXG4gKiBBbmd1bGFyIGhhcyBhIGNoYW5jZSB0byByZXBsYWNlIHRoZSBge3toYXNofX1gIG1hcmt1cCB3aXRoIGl0c1xyXG4gKiB2YWx1ZS4gVW50aWwgQW5ndWxhciByZXBsYWNlcyB0aGUgbWFya3VwIHRoZSBsaW5rIHdpbGwgYmUgYnJva2VuXHJcbiAqIGFuZCB3aWxsIG1vc3QgbGlrZWx5IHJldHVybiBhIDQwNCBlcnJvci4gVGhlIGBuZ0hyZWZgIGRpcmVjdGl2ZVxyXG4gKiBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxyXG4gKlxyXG4gKiBUaGUgd3Jvbmcgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxhIGhyZWY9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIj5saW5rMTwvYT5cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcclxuICogYGBgaHRtbFxyXG4gKiA8YSBuZy1ocmVmPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCI+bGluazE8L2E+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZWxlbWVudCBBXHJcbiAqIEBwYXJhbSB7dGVtcGxhdGV9IG5nSHJlZiBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyB2YXJpb3VzIGNvbWJpbmF0aW9ucyBvZiBgaHJlZmAsIGBuZy1ocmVmYCBhbmQgYG5nLWNsaWNrYCBhdHRyaWJ1dGVzXHJcbiAqIGluIGxpbmtzIGFuZCB0aGVpciBkaWZmZXJlbnQgYmVoYXZpb3JzOlxyXG4gICAgPGV4YW1wbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidmFsdWVcIiAvPjxiciAvPlxyXG4gICAgICAgIDxhIGlkPVwibGluay0xXCIgaHJlZiBuZy1jbGljaz1cInZhbHVlID0gMVwiPmxpbmsgMTwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstMlwiIGhyZWY9XCJcIiBuZy1jbGljaz1cInZhbHVlID0gMlwiPmxpbmsgMjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstM1wiIG5nLWhyZWY9XCIve3snMTIzJ319XCI+bGluayAzPC9hPiAobGluaywgcmVsb2FkISk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstNFwiIGhyZWY9XCJcIiBuYW1lPVwieHhcIiBuZy1jbGljaz1cInZhbHVlID0gNFwiPmFuY2hvcjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cclxuICAgICAgICA8YSBpZD1cImxpbmstNVwiIG5hbWU9XCJ4eHhcIiBuZy1jbGljaz1cInZhbHVlID0gNVwiPmFuY2hvcjwvYT4gKG5vIGxpbmspPGJyIC8+XHJcbiAgICAgICAgPGEgaWQ9XCJsaW5rLTZcIiBuZy1ocmVmPVwie3t2YWx1ZX19XCI+bGluazwvYT4gKGxpbmssIGNoYW5nZSBsb2NhdGlvbilcclxuICAgICAgPC9maWxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gaHJlZiB3aXRob3V0IHZhbHVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzEnKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIGVtcHR5IHN0cmluZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay0yJykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCcyJyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay0yJykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGFuZCBjaGFuZ2UgdXJsIHdoZW4gbmctaHJlZiBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvTWF0Y2goL1xcLzEyMyQvKTtcclxuXHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBuYXZpZ2F0ZSBhd2F5IGZyb20gYW4gQW5ndWxhciBwYWdlLCBzbyB3ZSBuZWVkXHJcbiAgICAgICAgICAvLyB0byB1c2UgYnJvd3Nlci5kcml2ZXIgdG8gZ2V0IHRoZSBiYXNlIHdlYmRyaXZlci5cclxuXHJcbiAgICAgICAgICBicm93c2VyLndhaXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBicm93c2VyLmRyaXZlci5nZXRDdXJyZW50VXJsKCkudGhlbihmdW5jdGlvbih1cmwpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC8xMjMkLyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC8xMjMnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgeGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nIGFuZCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay00JykpLmNsaWNrKCk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCc0Jyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay00JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gbm8gaHJlZiBidXQgbmFtZSBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5jbGljaygpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnNScpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZShudWxsKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBvbmx5IGNoYW5nZSB1cmwgd2hlbiBvbmx5IG5nLWhyZWYnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmNsZWFyKCk7XHJcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5zZW5kS2V5cygnNicpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9NYXRjaCgvXFwvNiQvKTtcclxuXHJcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTYnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBuYXZpZ2F0ZSBhd2F5IGZyb20gYW4gQW5ndWxhciBwYWdlLCBzbyB3ZSBuZWVkXHJcbiAgICAgICAgICAvLyB0byB1c2UgYnJvd3Nlci5kcml2ZXIgdG8gZ2V0IHRoZSBiYXNlIHdlYmRyaXZlci5cclxuICAgICAgICAgIGJyb3dzZXIud2FpdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB1cmwubWF0Y2goL1xcLzYkLyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC82Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1NyY1xyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgOTlcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzaW5nIEFuZ3VsYXIgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNgIGF0dHJpYnV0ZSBkb2Vzbid0XHJcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcclxuICogdGV4dCBge3toYXNofX1gIHVudGlsIEFuZ3VsYXIgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXHJcbiAqIGB7e2hhc2h9fWAuIFRoZSBgbmdTcmNgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxyXG4gKlxyXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgbmctc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogQGVsZW1lbnQgSU1HXHJcbiAqIEBwYXJhbSB7dGVtcGxhdGV9IG5nU3JjIGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1NyY3NldFxyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgOTlcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFVzaW5nIEFuZ3VsYXIgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNzZXRgIGF0dHJpYnV0ZSBkb2Vzbid0XHJcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcclxuICogdGV4dCBge3toYXNofX1gIHVudGlsIEFuZ3VsYXIgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXHJcbiAqIGB7e2hhc2h9fWAuIFRoZSBgbmdTcmNzZXRgIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtLlxyXG4gKlxyXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxyXG4gKiBgYGBodG1sXHJcbiAqIDxpbWcgbmctc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIvPlxyXG4gKiBgYGBcclxuICpcclxuICogQGVsZW1lbnQgSU1HXHJcbiAqIEBwYXJhbSB7dGVtcGxhdGV9IG5nU3Jjc2V0IGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0Rpc2FibGVkXHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSAxMDBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFRoaXMgZGlyZWN0aXZlIHNldHMgdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50IGlmIHRoZVxyXG4gKiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpbnNpZGUgYG5nRGlzYWJsZWRgIGV2YWx1YXRlcyB0byB0cnV0aHkuXHJcbiAqXHJcbiAqIEEgc3BlY2lhbCBkaXJlY3RpdmUgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGUgYGRpc2FibGVkYFxyXG4gKiBhdHRyaWJ1dGUuICBUaGUgZm9sbG93aW5nIGV4YW1wbGUgd291bGQgbWFrZSB0aGUgYnV0dG9uIGVuYWJsZWQgb24gQ2hyb21lL0ZpcmVmb3hcclxuICogYnV0IG5vdCBvbiBvbGRlciBJRXM6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPGRpdiBuZy1pbml0PVwiaXNEaXNhYmxlZCA9IGZhbHNlXCI+XHJcbiAqICA8YnV0dG9uIGRpc2FibGVkPVwie3tpc0Rpc2FibGVkfX1cIj5EaXNhYmxlZDwvYnV0dG9uPlxyXG4gKiA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFRoaXMgaXMgYmVjYXVzZSB0aGUgSFRNTCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IHJlcXVpcmUgYnJvd3NlcnMgdG8gcHJlc2VydmUgdGhlIHZhbHVlcyBvZlxyXG4gKiBib29sZWFuIGF0dHJpYnV0ZXMgc3VjaCBhcyBgZGlzYWJsZWRgIChUaGVpciBwcmVzZW5jZSBtZWFucyB0cnVlIGFuZCB0aGVpciBhYnNlbmNlIG1lYW5zIGZhbHNlLilcclxuICogSWYgd2UgcHV0IGFuIEFuZ3VsYXIgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uIGludG8gc3VjaCBhbiBhdHRyaWJ1dGUgdGhlbiB0aGVcclxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgQ2xpY2sgbWUgdG8gdG9nZ2xlOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCI+PGJyLz5cclxuICAgICAgICA8YnV0dG9uIG5nLW1vZGVsPVwiYnV0dG9uXCIgbmctZGlzYWJsZWQ9XCJjaGVja2VkXCI+QnV0dG9uPC9idXR0b24+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIGJ1dHRvbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCdidXR0b24nKSkuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpKS50b0JlRmFsc3koKTtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIEBlbGVtZW50IElOUFVUXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdEaXNhYmxlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxyXG4gKiAgICAgdGhlbiB0aGUgYGRpc2FibGVkYCBhdHRyaWJ1dGUgd2lsbCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDaGVja2VkXHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSAxMDBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBIVE1MIHNwZWNpZmljYXRpb24gZG9lcyBub3QgcmVxdWlyZSBicm93c2VycyB0byBwcmVzZXJ2ZSB0aGUgdmFsdWVzIG9mIGJvb2xlYW4gYXR0cmlidXRlc1xyXG4gKiBzdWNoIGFzIGNoZWNrZWQuIChUaGVpciBwcmVzZW5jZSBtZWFucyB0cnVlIGFuZCB0aGVpciBhYnNlbmNlIG1lYW5zIGZhbHNlLilcclxuICogSWYgd2UgcHV0IGFuIEFuZ3VsYXIgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uIGludG8gc3VjaCBhbiBhdHRyaWJ1dGUgdGhlbiB0aGVcclxuICogYmluZGluZyBpbmZvcm1hdGlvbiB3b3VsZCBiZSBsb3N0IHdoZW4gdGhlIGJyb3dzZXIgcmVtb3ZlcyB0aGUgYXR0cmlidXRlLlxyXG4gKiBUaGUgYG5nQ2hlY2tlZGAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0gZm9yIHRoZSBgY2hlY2tlZGAgYXR0cmlidXRlLlxyXG4gKiBUaGlzIGNvbXBsZW1lbnRhcnkgZGlyZWN0aXZlIGlzIG5vdCByZW1vdmVkIGJ5IHRoZSBicm93c2VyIGFuZCBzbyBwcm92aWRlc1xyXG4gKiBhIHBlcm1hbmVudCByZWxpYWJsZSBwbGFjZSB0byBzdG9yZSB0aGUgYmluZGluZyBpbmZvcm1hdGlvbi5cclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIENoZWNrIG1lIHRvIGNoZWNrIGJvdGg6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cIm1hc3RlclwiPjxici8+XHJcbiAgICAgICAgPGlucHV0IGlkPVwiY2hlY2tTbGF2ZVwiIHR5cGU9XCJjaGVja2JveFwiIG5nLWNoZWNrZWQ9XCJtYXN0ZXJcIj5cclxuICAgICAgPC9maWxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjaGVjayBib3RoIGNoZWNrQm94ZXMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjaGVja1NsYXZlJykpLmdldEF0dHJpYnV0ZSgnY2hlY2tlZCcpKS50b0JlRmFsc3koKTtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ21hc3RlcicpKS5jbGljaygpO1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2NoZWNrU2xhdmUnKSkuZ2V0QXR0cmlidXRlKCdjaGVja2VkJykpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBAZWxlbWVudCBJTlBVVFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2hlY2tlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxyXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcImNoZWNrZWRcIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1JlYWRvbmx5XHJcbiAqIEByZXN0cmljdCBBXHJcbiAqIEBwcmlvcml0eSAxMDBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBIVE1MIHNwZWNpZmljYXRpb24gZG9lcyBub3QgcmVxdWlyZSBicm93c2VycyB0byBwcmVzZXJ2ZSB0aGUgdmFsdWVzIG9mIGJvb2xlYW4gYXR0cmlidXRlc1xyXG4gKiBzdWNoIGFzIHJlYWRvbmx5LiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXHJcbiAqIElmIHdlIHB1dCBhbiBBbmd1bGFyIGludGVycG9sYXRpb24gZXhwcmVzc2lvbiBpbnRvIHN1Y2ggYW4gYXR0cmlidXRlIHRoZW4gdGhlXHJcbiAqIGJpbmRpbmcgaW5mb3JtYXRpb24gd291bGQgYmUgbG9zdCB3aGVuIHRoZSBicm93c2VyIHJlbW92ZXMgdGhlIGF0dHJpYnV0ZS5cclxuICogVGhlIGBuZ1JlYWRvbmx5YCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbSBmb3IgdGhlIGByZWFkb25seWAgYXR0cmlidXRlLlxyXG4gKiBUaGlzIGNvbXBsZW1lbnRhcnkgZGlyZWN0aXZlIGlzIG5vdCByZW1vdmVkIGJ5IHRoZSBicm93c2VyIGFuZCBzbyBwcm92aWRlc1xyXG4gKiBhIHBlcm1hbmVudCByZWxpYWJsZSBwbGFjZSB0byBzdG9yZSB0aGUgYmluZGluZyBpbmZvcm1hdGlvbi5cclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIENoZWNrIG1lIHRvIG1ha2UgdGV4dCByZWFkb25seTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjxici8+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctcmVhZG9ubHk9XCJjaGVja2VkXCIgdmFsdWU9XCJJJ20gQW5ndWxhclwiLz5cclxuICAgICAgPC9maWxlPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgcmVhZG9ubHkgYXR0cicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCdbdHlwZT1cInRleHRcIl0nKSkuZ2V0QXR0cmlidXRlKCdyZWFkb25seScpKS50b0JlRmFsc3koKTtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIEBlbGVtZW50IElOUFVUXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdSZWFkb25seSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxyXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcInJlYWRvbmx5XCIgd2lsbCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdTZWxlY3RlZFxyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgMTAwXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgSFRNTCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IHJlcXVpcmUgYnJvd3NlcnMgdG8gcHJlc2VydmUgdGhlIHZhbHVlcyBvZiBib29sZWFuIGF0dHJpYnV0ZXNcclxuICogc3VjaCBhcyBzZWxlY3RlZC4gKFRoZWlyIHByZXNlbmNlIG1lYW5zIHRydWUgYW5kIHRoZWlyIGFic2VuY2UgbWVhbnMgZmFsc2UuKVxyXG4gKiBJZiB3ZSBwdXQgYW4gQW5ndWxhciBpbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gaW50byBzdWNoIGFuIGF0dHJpYnV0ZSB0aGVuIHRoZVxyXG4gKiBiaW5kaW5nIGluZm9ybWF0aW9uIHdvdWxkIGJlIGxvc3Qgd2hlbiB0aGUgYnJvd3NlciByZW1vdmVzIHRoZSBhdHRyaWJ1dGUuXHJcbiAqIFRoZSBgbmdTZWxlY3RlZGAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0gZm9yIHRoZSBgc2VsZWN0ZWRgIGF0dHJpYnV0ZS5cclxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcclxuICogYSBwZXJtYW5lbnQgcmVsaWFibGUgcGxhY2UgdG8gc3RvcmUgdGhlIGJpbmRpbmcgaW5mb3JtYXRpb24uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICBDaGVjayBtZSB0byBzZWxlY3Q6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+PGJyLz5cclxuICAgICAgICA8c2VsZWN0PlxyXG4gICAgICAgICAgPG9wdGlvbj5IZWxsbyE8L29wdGlvbj5cclxuICAgICAgICAgIDxvcHRpb24gaWQ9XCJncmVldFwiIG5nLXNlbGVjdGVkPVwic2VsZWN0ZWRcIj5HcmVldGluZ3MhPC9vcHRpb24+XHJcbiAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgc2VsZWN0IEdyZWV0aW5ncyEnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdncmVldCcpKS5nZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc2VsZWN0ZWQnKSkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdncmVldCcpKS5nZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKiBAZWxlbWVudCBPUFRJT05cclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1NlbGVjdGVkIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXHJcbiAqICAgICB0aGVuIHNwZWNpYWwgYXR0cmlidXRlIFwic2VsZWN0ZWRcIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nT3BlblxyXG4gKiBAcmVzdHJpY3QgQVxyXG4gKiBAcHJpb3JpdHkgMTAwXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgSFRNTCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IHJlcXVpcmUgYnJvd3NlcnMgdG8gcHJlc2VydmUgdGhlIHZhbHVlcyBvZiBib29sZWFuIGF0dHJpYnV0ZXNcclxuICogc3VjaCBhcyBvcGVuLiAoVGhlaXIgcHJlc2VuY2UgbWVhbnMgdHJ1ZSBhbmQgdGhlaXIgYWJzZW5jZSBtZWFucyBmYWxzZS4pXHJcbiAqIElmIHdlIHB1dCBhbiBBbmd1bGFyIGludGVycG9sYXRpb24gZXhwcmVzc2lvbiBpbnRvIHN1Y2ggYW4gYXR0cmlidXRlIHRoZW4gdGhlXHJcbiAqIGJpbmRpbmcgaW5mb3JtYXRpb24gd291bGQgYmUgbG9zdCB3aGVuIHRoZSBicm93c2VyIHJlbW92ZXMgdGhlIGF0dHJpYnV0ZS5cclxuICogVGhlIGBuZ09wZW5gIGRpcmVjdGl2ZSBzb2x2ZXMgdGhpcyBwcm9ibGVtIGZvciB0aGUgYG9wZW5gIGF0dHJpYnV0ZS5cclxuICogVGhpcyBjb21wbGVtZW50YXJ5IGRpcmVjdGl2ZSBpcyBub3QgcmVtb3ZlZCBieSB0aGUgYnJvd3NlciBhbmQgc28gcHJvdmlkZXNcclxuICogYSBwZXJtYW5lbnQgcmVsaWFibGUgcGxhY2UgdG8gc3RvcmUgdGhlIGJpbmRpbmcgaW5mb3JtYXRpb24uXHJcbiAqIEBleGFtcGxlXHJcbiAgICAgPGV4YW1wbGU+XHJcbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICBDaGVjayBtZSBjaGVjayBtdWx0aXBsZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwib3BlblwiPjxici8+XHJcbiAgICAgICAgIDxkZXRhaWxzIGlkPVwiZGV0YWlsc1wiIG5nLW9wZW49XCJvcGVuXCI+XHJcbiAgICAgICAgICAgIDxzdW1tYXJ5PlNob3cvSGlkZSBtZTwvc3VtbWFyeT5cclxuICAgICAgICAgPC9kZXRhaWxzPlxyXG4gICAgICAgPC9maWxlPlxyXG4gICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSBvcGVuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RldGFpbHMnKSkuZ2V0QXR0cmlidXRlKCdvcGVuJykpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ29wZW4nKSkuY2xpY2soKTtcclxuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZGV0YWlscycpKS5nZXRBdHRyaWJ1dGUoJ29wZW4nKSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgIDwvZmlsZT5cclxuICAgICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqIEBlbGVtZW50IERFVEFJTFNcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ09wZW4gSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcclxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJvcGVuXCIgd2lsbCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcclxuICovXHJcblxyXG52YXIgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXMgPSB7fTtcclxuXHJcblxyXG4vLyBib29sZWFuIGF0dHJzIGFyZSBldmFsdWF0ZWRcclxuZm9yRWFjaChCT09MRUFOX0FUVFIsIGZ1bmN0aW9uKHByb3BOYW1lLCBhdHRyTmFtZSkge1xyXG4gIC8vIGJpbmRpbmcgdG8gbXVsdGlwbGUgaXMgbm90IHN1cHBvcnRlZFxyXG4gIGlmIChwcm9wTmFtZSA9PSBcIm11bHRpcGxlXCIpIHJldHVybjtcclxuXHJcbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XHJcbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXNbbm9ybWFsaXplZF0gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJbbm9ybWFsaXplZF0sIGZ1bmN0aW9uIG5nQm9vbGVhbkF0dHJXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgYXR0ci4kc2V0KGF0dHJOYW1lLCAhIXZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9O1xyXG59KTtcclxuXHJcbi8vIGFsaWFzZWQgaW5wdXQgYXR0cnMgYXJlIGV2YWx1YXRlZFxyXG5mb3JFYWNoKEFMSUFTRURfQVRUUiwgZnVuY3Rpb24oaHRtbEF0dHIsIG5nQXR0cikge1xyXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25nQXR0cl0gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgLy9zcGVjaWFsIGNhc2UgbmdQYXR0ZXJuIHdoZW4gYSBsaXRlcmFsIHJlZ3VsYXIgZXhwcmVzc2lvbiB2YWx1ZVxyXG4gICAgICAgIC8vaXMgdXNlZCBhcyB0aGUgZXhwcmVzc2lvbiAodGhpcyB3YXkgd2UgZG9uJ3QgaGF2ZSB0byB3YXRjaCBhbnl0aGluZykuXHJcbiAgICAgICAgaWYgKG5nQXR0ciA9PT0gXCJuZ1BhdHRlcm5cIiAmJiBhdHRyLm5nUGF0dGVybi5jaGFyQXQoMCkgPT0gXCIvXCIpIHtcclxuICAgICAgICAgIHZhciBtYXRjaCA9IGF0dHIubmdQYXR0ZXJuLm1hdGNoKFJFR0VYX1NUUklOR19SRUdFWFApO1xyXG4gICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIGF0dHIuJHNldChcIm5nUGF0dGVyblwiLCBuZXcgUmVnRXhwKG1hdGNoWzFdLCBtYXRjaFsyXSkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0cltuZ0F0dHJdLCBmdW5jdGlvbiBuZ0F0dHJBbGlhc1dhdGNoQWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBhdHRyLiRzZXQobmdBdHRyLCB2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfTtcclxufSk7XHJcblxyXG4vLyBuZy1zcmMsIG5nLXNyY3NldCwgbmctaHJlZiBhcmUgaW50ZXJwb2xhdGVkXHJcbmZvckVhY2goWydzcmMnLCAnc3Jjc2V0JywgJ2hyZWYnXSwgZnVuY3Rpb24oYXR0ck5hbWUpIHtcclxuICB2YXIgbm9ybWFsaXplZCA9IGRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJyArIGF0dHJOYW1lKTtcclxuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlc1tub3JtYWxpemVkXSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcHJpb3JpdHk6IDk5LCAvLyBpdCBuZWVkcyB0byBydW4gYWZ0ZXIgdGhlIGF0dHJpYnV0ZXMgYXJlIGludGVycG9sYXRlZFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIHZhciBwcm9wTmFtZSA9IGF0dHJOYW1lLFxyXG4gICAgICAgICAgICBuYW1lID0gYXR0ck5hbWU7XHJcblxyXG4gICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ2hyZWYnICYmXHJcbiAgICAgICAgICAgIHRvU3RyaW5nLmNhbGwoZWxlbWVudC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nKSB7XHJcbiAgICAgICAgICBuYW1lID0gJ3hsaW5rSHJlZic7XHJcbiAgICAgICAgICBhdHRyLiRhdHRyW25hbWVdID0gJ3hsaW5rOmhyZWYnO1xyXG4gICAgICAgICAgcHJvcE5hbWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXR0ci4kb2JzZXJ2ZShub3JtYWxpemVkLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoYXR0ck5hbWUgPT09ICdocmVmJykge1xyXG4gICAgICAgICAgICAgIGF0dHIuJHNldChuYW1lLCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAvLyBvbiBJRSwgaWYgXCJuZzpzcmNcIiBkaXJlY3RpdmUgZGVjbGFyYXRpb24gaXMgdXNlZCBhbmQgXCJzcmNcIiBhdHRyaWJ1dGUgZG9lc24ndCBleGlzdFxyXG4gICAgICAgICAgLy8gdGhlbiBjYWxsaW5nIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCAnZm9vJykgZG9lc24ndCBkbyBhbnl0aGluZywgc28gd2UgbmVlZFxyXG4gICAgICAgICAgLy8gdG8gc2V0IHRoZSBwcm9wZXJ0eSBhcyB3ZWxsIHRvIGFjaGlldmUgdGhlIGRlc2lyZWQgZWZmZWN0LlxyXG4gICAgICAgICAgLy8gd2UgdXNlIGF0dHJbYXR0ck5hbWVdIHZhbHVlIHNpbmNlICRzZXQgY2FuIHNhbml0aXplIHRoZSB1cmwuXHJcbiAgICAgICAgICBpZiAobXNpZSAmJiBwcm9wTmFtZSkgZWxlbWVudC5wcm9wKHByb3BOYW1lLCBhdHRyW25hbWVdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9O1xyXG59KTtcclxuXHJcbi8qIGdsb2JhbCAtbnVsbEZvcm1DdHJsLCAtU1VCTUlUVEVEX0NMQVNTLCBhZGRTZXRWYWxpZGl0eU1ldGhvZDogdHJ1ZVxyXG4gKi9cclxudmFyIG51bGxGb3JtQ3RybCA9IHtcclxuICAkYWRkQ29udHJvbDogbm9vcCxcclxuICAkJHJlbmFtZUNvbnRyb2w6IG51bGxGb3JtUmVuYW1lQ29udHJvbCxcclxuICAkcmVtb3ZlQ29udHJvbDogbm9vcCxcclxuICAkc2V0VmFsaWRpdHk6IG5vb3AsXHJcbiAgJHNldERpcnR5OiBub29wLFxyXG4gICRzZXRQcmlzdGluZTogbm9vcCxcclxuICAkc2V0U3VibWl0dGVkOiBub29wXHJcbn0sXHJcblNVQk1JVFRFRF9DTEFTUyA9ICduZy1zdWJtaXR0ZWQnO1xyXG5cclxuZnVuY3Rpb24gbnVsbEZvcm1SZW5hbWVDb250cm9sKGNvbnRyb2wsIG5hbWUpIHtcclxuICBjb250cm9sLiRuYW1lID0gbmFtZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyB0eXBlXHJcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXJcclxuICpcclxuICogQHByb3BlcnR5IHtib29sZWFufSAkcHJpc3RpbmUgVHJ1ZSBpZiB1c2VyIGhhcyBub3QgaW50ZXJhY3RlZCB3aXRoIHRoZSBmb3JtIHlldC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgZm9ybS5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkdmFsaWQgVHJ1ZSBpZiBhbGwgb2YgdGhlIGNvbnRhaW5pbmcgZm9ybXMgYW5kIGNvbnRyb2xzIGFyZSB2YWxpZC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkaW52YWxpZCBUcnVlIGlmIGF0IGxlYXN0IG9uZSBjb250YWluaW5nIGNvbnRyb2wgb3IgZm9ybSBpcyBpbnZhbGlkLlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRzdWJtaXR0ZWQgVHJ1ZSBpZiB1c2VyIGhhcyBzdWJtaXR0ZWQgdGhlIGZvcm0gZXZlbiBpZiBpdHMgaW52YWxpZC5cclxuICpcclxuICogQHByb3BlcnR5IHtPYmplY3R9ICRlcnJvciBJcyBhbiBvYmplY3QgaGFzaCwgY29udGFpbmluZyByZWZlcmVuY2VzIHRvIGNvbnRyb2xzIG9yXHJcbiAqICBmb3JtcyB3aXRoIGZhaWxpbmcgdmFsaWRhdG9ycywgd2hlcmU6XHJcbiAqXHJcbiAqICAtIGtleXMgYXJlIHZhbGlkYXRpb24gdG9rZW5zIChlcnJvciBuYW1lcyksXHJcbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIGZhaWxpbmcgdmFsaWRhdG9yIGZvciBnaXZlbiBlcnJvciBuYW1lLlxyXG4gKlxyXG4gKiAgQnVpbHQtaW4gdmFsaWRhdGlvbiB0b2tlbnM6XHJcbiAqXHJcbiAqICAtIGBlbWFpbGBcclxuICogIC0gYG1heGBcclxuICogIC0gYG1heGxlbmd0aGBcclxuICogIC0gYG1pbmBcclxuICogIC0gYG1pbmxlbmd0aGBcclxuICogIC0gYG51bWJlcmBcclxuICogIC0gYHBhdHRlcm5gXHJcbiAqICAtIGByZXF1aXJlZGBcclxuICogIC0gYHVybGBcclxuICogIC0gYGRhdGVgXHJcbiAqICAtIGBkYXRldGltZWxvY2FsYFxyXG4gKiAgLSBgdGltZWBcclxuICogIC0gYHdlZWtgXHJcbiAqICAtIGBtb250aGBcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIGBGb3JtQ29udHJvbGxlcmAga2VlcHMgdHJhY2sgb2YgYWxsIGl0cyBjb250cm9scyBhbmQgbmVzdGVkIGZvcm1zIGFzIHdlbGwgYXMgdGhlIHN0YXRlIG9mIHRoZW0sXHJcbiAqIHN1Y2ggYXMgYmVpbmcgdmFsaWQvaW52YWxpZCBvciBkaXJ0eS9wcmlzdGluZS5cclxuICpcclxuICogRWFjaCB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0gZm9ybX0gZGlyZWN0aXZlIGNyZWF0ZXMgYW4gaW5zdGFuY2VcclxuICogb2YgYEZvcm1Db250cm9sbGVyYC5cclxuICpcclxuICovXHJcbi8vYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXHJcbkZvcm1Db250cm9sbGVyLiRpbmplY3QgPSBbJyRlbGVtZW50JywgJyRhdHRycycsICckc2NvcGUnLCAnJGFuaW1hdGUnLCAnJGludGVycG9sYXRlJ107XHJcbmZ1bmN0aW9uIEZvcm1Db250cm9sbGVyKGVsZW1lbnQsIGF0dHJzLCAkc2NvcGUsICRhbmltYXRlLCAkaW50ZXJwb2xhdGUpIHtcclxuICB2YXIgZm9ybSA9IHRoaXMsXHJcbiAgICAgIGNvbnRyb2xzID0gW107XHJcblxyXG4gIHZhciBwYXJlbnRGb3JtID0gZm9ybS4kJHBhcmVudEZvcm0gPSBlbGVtZW50LnBhcmVudCgpLmNvbnRyb2xsZXIoJ2Zvcm0nKSB8fCBudWxsRm9ybUN0cmw7XHJcblxyXG4gIC8vIGluaXQgc3RhdGVcclxuICBmb3JtLiRlcnJvciA9IHt9O1xyXG4gIGZvcm0uJCRzdWNjZXNzID0ge307XHJcbiAgZm9ybS4kcGVuZGluZyA9IHVuZGVmaW5lZDtcclxuICBmb3JtLiRuYW1lID0gJGludGVycG9sYXRlKGF0dHJzLm5hbWUgfHwgYXR0cnMubmdGb3JtIHx8ICcnKSgkc2NvcGUpO1xyXG4gIGZvcm0uJGRpcnR5ID0gZmFsc2U7XHJcbiAgZm9ybS4kcHJpc3RpbmUgPSB0cnVlO1xyXG4gIGZvcm0uJHZhbGlkID0gdHJ1ZTtcclxuICBmb3JtLiRpbnZhbGlkID0gZmFsc2U7XHJcbiAgZm9ybS4kc3VibWl0dGVkID0gZmFsc2U7XHJcblxyXG4gIHBhcmVudEZvcm0uJGFkZENvbnRyb2woZm9ybSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRyb2xsYmFja1ZpZXdWYWx1ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUm9sbGJhY2sgYWxsIGZvcm0gY29udHJvbHMgcGVuZGluZyB1cGRhdGVzIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxyXG4gICAqXHJcbiAgICogVXBkYXRlcyBtYXkgYmUgcGVuZGluZyBieSBhIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBhIHNvbWUgZnV0dXJlXHJcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIFRoaXMgbWV0aG9kIGlzIHR5cGljYWxseSBuZWVkZWQgYnkgdGhlIHJlc2V0IGJ1dHRvbiBvZlxyXG4gICAqIGEgZm9ybSB0aGF0IHVzZXMgYG5nLW1vZGVsLW9wdGlvbnNgIHRvIHBlbmQgdXBkYXRlcy5cclxuICAgKi9cclxuICBmb3JtLiRyb2xsYmFja1ZpZXdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgICBjb250cm9sLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJGNvbW1pdFZpZXdWYWx1ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ29tbWl0IGFsbCBmb3JtIGNvbnRyb2xzIHBlbmRpbmcgdXBkYXRlcyB0byB0aGUgYCRtb2RlbFZhbHVlYC5cclxuICAgKlxyXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxyXG4gICAqIGV2ZW50IGRlZmluZWQgaW4gYG5nLW1vZGVsLW9wdGlvbnNgLiBUaGlzIG1ldGhvZCBpcyByYXJlbHkgbmVlZGVkIGFzIGBOZ01vZGVsQ29udHJvbGxlcmBcclxuICAgKiB1c3VhbGx5IGhhbmRsZXMgY2FsbGluZyB0aGlzIGluIHJlc3BvbnNlIHRvIGlucHV0IGV2ZW50cy5cclxuICAgKi9cclxuICBmb3JtLiRjb21taXRWaWV3VmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvckVhY2goY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcclxuICAgICAgY29udHJvbC4kY29tbWl0Vmlld1ZhbHVlKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkYWRkQ29udHJvbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmVnaXN0ZXIgYSBjb250cm9sIHdpdGggdGhlIGZvcm0uXHJcbiAgICpcclxuICAgKiBJbnB1dCBlbGVtZW50cyB1c2luZyBuZ01vZGVsQ29udHJvbGxlciBkbyB0aGlzIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGV5IGFyZSBsaW5rZWQuXHJcbiAgICovXHJcbiAgZm9ybS4kYWRkQ29udHJvbCA9IGZ1bmN0aW9uKGNvbnRyb2wpIHtcclxuICAgIC8vIEJyZWFraW5nIGNoYW5nZSAtIGJlZm9yZSwgaW5wdXRzIHdob3NlIG5hbWUgd2FzIFwiaGFzT3duUHJvcGVydHlcIiB3ZXJlIHF1aWV0bHkgaWdub3JlZFxyXG4gICAgLy8gYW5kIG5vdCBhZGRlZCB0byB0aGUgc2NvcGUuICBOb3cgd2UgdGhyb3cgYW4gZXJyb3IuXHJcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShjb250cm9sLiRuYW1lLCAnaW5wdXQnKTtcclxuICAgIGNvbnRyb2xzLnB1c2goY29udHJvbCk7XHJcblxyXG4gICAgaWYgKGNvbnRyb2wuJG5hbWUpIHtcclxuICAgICAgZm9ybVtjb250cm9sLiRuYW1lXSA9IGNvbnRyb2w7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gUHJpdmF0ZSBBUEk6IHJlbmFtZSBhIGZvcm0gY29udHJvbFxyXG4gIGZvcm0uJCRyZW5hbWVDb250cm9sID0gZnVuY3Rpb24oY29udHJvbCwgbmV3TmFtZSkge1xyXG4gICAgdmFyIG9sZE5hbWUgPSBjb250cm9sLiRuYW1lO1xyXG5cclxuICAgIGlmIChmb3JtW29sZE5hbWVdID09PSBjb250cm9sKSB7XHJcbiAgICAgIGRlbGV0ZSBmb3JtW29sZE5hbWVdO1xyXG4gICAgfVxyXG4gICAgZm9ybVtuZXdOYW1lXSA9IGNvbnRyb2w7XHJcbiAgICBjb250cm9sLiRuYW1lID0gbmV3TmFtZTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkcmVtb3ZlQ29udHJvbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogRGVyZWdpc3RlciBhIGNvbnRyb2wgZnJvbSB0aGUgZm9ybS5cclxuICAgKlxyXG4gICAqIElucHV0IGVsZW1lbnRzIHVzaW5nIG5nTW9kZWxDb250cm9sbGVyIGRvIHRoaXMgYXV0b21hdGljYWxseSB3aGVuIHRoZXkgYXJlIGRlc3Ryb3llZC5cclxuICAgKi9cclxuICBmb3JtLiRyZW1vdmVDb250cm9sID0gZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgaWYgKGNvbnRyb2wuJG5hbWUgJiYgZm9ybVtjb250cm9sLiRuYW1lXSA9PT0gY29udHJvbCkge1xyXG4gICAgICBkZWxldGUgZm9ybVtjb250cm9sLiRuYW1lXTtcclxuICAgIH1cclxuICAgIGZvckVhY2goZm9ybS4kcGVuZGluZywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcclxuICAgICAgZm9ybS4kc2V0VmFsaWRpdHkobmFtZSwgbnVsbCwgY29udHJvbCk7XHJcbiAgICB9KTtcclxuICAgIGZvckVhY2goZm9ybS4kZXJyb3IsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XHJcbiAgICAgIGZvcm0uJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xyXG4gICAgfSk7XHJcbiAgICBmb3JFYWNoKGZvcm0uJCRzdWNjZXNzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xyXG4gICAgICBmb3JtLiRzZXRWYWxpZGl0eShuYW1lLCBudWxsLCBjb250cm9sKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFycmF5UmVtb3ZlKGNvbnRyb2xzLCBjb250cm9sKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFZhbGlkaXR5XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSB2YWxpZGl0eSBvZiBhIGZvcm0gY29udHJvbC5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gcGFyZW50IGZvcm1zLlxyXG4gICAqL1xyXG4gIGFkZFNldFZhbGlkaXR5TWV0aG9kKHtcclxuICAgIGN0cmw6IHRoaXMsXHJcbiAgICAkZWxlbWVudDogZWxlbWVudCxcclxuICAgIHNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgY29udHJvbGxlcikge1xyXG4gICAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XHJcbiAgICAgIGlmICghbGlzdCkge1xyXG4gICAgICAgIG9iamVjdFtwcm9wZXJ0eV0gPSBbY29udHJvbGxlcl07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gbGlzdC5pbmRleE9mKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgIGxpc3QucHVzaChjb250cm9sbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB1bnNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgY29udHJvbGxlcikge1xyXG4gICAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XHJcbiAgICAgIGlmICghbGlzdCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBhcnJheVJlbW92ZShsaXN0LCBjb250cm9sbGVyKTtcclxuICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBwYXJlbnRGb3JtOiBwYXJlbnRGb3JtLFxyXG4gICAgJGFuaW1hdGU6ICRhbmltYXRlXHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXREaXJ0eVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgZm9ybSB0byBhIGRpcnR5IHN0YXRlLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byBhZGQgdGhlICduZy1kaXJ0eScgY2xhc3MgYW5kIHNldCB0aGUgZm9ybSB0byBhIGRpcnR5XHJcbiAgICogc3RhdGUgKG5nLWRpcnR5IGNsYXNzKS4gVGhpcyBtZXRob2Qgd2lsbCBhbHNvIHByb3BhZ2F0ZSB0byBwYXJlbnQgZm9ybXMuXHJcbiAgICovXHJcbiAgZm9ybS4kc2V0RGlydHkgPSBmdW5jdGlvbigpIHtcclxuICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcclxuICAgICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcclxuICAgIGZvcm0uJGRpcnR5ID0gdHJ1ZTtcclxuICAgIGZvcm0uJHByaXN0aW5lID0gZmFsc2U7XHJcbiAgICBwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRQcmlzdGluZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgZm9ybSB0byBpdHMgcHJpc3RpbmUgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgJ25nLWRpcnR5JyBjbGFzcyBhbmQgc2V0IHRoZSBmb3JtIHRvIGl0cyBwcmlzdGluZVxyXG4gICAqIHN0YXRlIChuZy1wcmlzdGluZSBjbGFzcykuIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gYWxsIHRoZSBjb250cm9scyBjb250YWluZWRcclxuICAgKiBpbiB0aGlzIGZvcm0uXHJcbiAgICpcclxuICAgKiBTZXR0aW5nIGEgZm9ybSBiYWNrIHRvIGEgcHJpc3RpbmUgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gd2Ugd2FudCB0byAncmV1c2UnIGEgZm9ybSBhZnRlclxyXG4gICAqIHNhdmluZyBvciByZXNldHRpbmcgaXQuXHJcbiAgICovXHJcbiAgZm9ybS4kc2V0UHJpc3RpbmUgPSBmdW5jdGlvbigpIHtcclxuICAgICRhbmltYXRlLnNldENsYXNzKGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTLCBESVJUWV9DTEFTUyArICcgJyArIFNVQk1JVFRFRF9DTEFTUyk7XHJcbiAgICBmb3JtLiRkaXJ0eSA9IGZhbHNlO1xyXG4gICAgZm9ybS4kcHJpc3RpbmUgPSB0cnVlO1xyXG4gICAgZm9ybS4kc3VibWl0dGVkID0gZmFsc2U7XHJcbiAgICBmb3JFYWNoKGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XHJcbiAgICAgIGNvbnRyb2wuJHNldFByaXN0aW5lKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkc2V0VW50b3VjaGVkXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGl0cyB1bnRvdWNoZWQgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgJ25nLXRvdWNoZWQnIGNsYXNzIGFuZCBzZXQgdGhlIGZvcm0gY29udHJvbHMgdG8gdGhlaXJcclxuICAgKiB1bnRvdWNoZWQgc3RhdGUgKG5nLXVudG91Y2hlZCBjbGFzcykuXHJcbiAgICpcclxuICAgKiBTZXR0aW5nIGEgZm9ybSBjb250cm9scyBiYWNrIHRvIHRoZWlyIHVudG91Y2hlZCBzdGF0ZSBpcyBvZnRlbiB1c2VmdWwgd2hlbiBzZXR0aW5nIHRoZSBmb3JtXHJcbiAgICogYmFjayB0byBpdHMgcHJpc3RpbmUgc3RhdGUuXHJcbiAgICovXHJcbiAgZm9ybS4kc2V0VW50b3VjaGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3JFYWNoKGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XHJcbiAgICAgIGNvbnRyb2wuJHNldFVudG91Y2hlZCgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFN1Ym1pdHRlZFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgZm9ybSB0byBpdHMgc3VibWl0dGVkIHN0YXRlLlxyXG4gICAqL1xyXG4gIGZvcm0uJHNldFN1Ym1pdHRlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCwgU1VCTUlUVEVEX0NMQVNTKTtcclxuICAgIGZvcm0uJHN1Ym1pdHRlZCA9IHRydWU7XHJcbiAgICBwYXJlbnRGb3JtLiRzZXRTdWJtaXR0ZWQoKTtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0Zvcm1cclxuICogQHJlc3RyaWN0IEVBQ1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogTmVzdGFibGUgYWxpYXMgb2Yge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGBmb3JtYH0gZGlyZWN0aXZlLiBIVE1MXHJcbiAqIGRvZXMgbm90IGFsbG93IG5lc3Rpbmcgb2YgZm9ybSBlbGVtZW50cy4gSXQgaXMgdXNlZnVsIHRvIG5lc3QgZm9ybXMsIGZvciBleGFtcGxlIGlmIHRoZSB2YWxpZGl0eSBvZiBhXHJcbiAqIHN1Yi1ncm91cCBvZiBjb250cm9scyBuZWVkcyB0byBiZSBkZXRlcm1pbmVkLlxyXG4gKlxyXG4gKiBOb3RlOiB0aGUgcHVycG9zZSBvZiBgbmdGb3JtYCBpcyB0byBncm91cCBjb250cm9scyxcclxuICogYnV0IG5vdCB0byBiZSBhIHJlcGxhY2VtZW50IGZvciB0aGUgYDxmb3JtPmAgdGFnIHdpdGggYWxsIG9mIGl0cyBjYXBhYmlsaXRpZXNcclxuICogKGUuZy4gcG9zdGluZyB0byB0aGUgc2VydmVyLCAuLi4pLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nRm9ybXxuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkIHNjb3BlLCB1bmRlciB0aGlzIG5hbWUuXHJcbiAqXHJcbiAqL1xyXG5cclxuIC8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIGZvcm1cclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERpcmVjdGl2ZSB0aGF0IGluc3RhbnRpYXRlc1xyXG4gKiB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlciBGb3JtQ29udHJvbGxlcn0uXHJcbiAqXHJcbiAqIElmIHRoZSBgbmFtZWAgYXR0cmlidXRlIGlzIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciBpcyBwdWJsaXNoZWQgb250byB0aGUgY3VycmVudCBzY29wZSB1bmRlclxyXG4gKiB0aGlzIG5hbWUuXHJcbiAqXHJcbiAqICMgQWxpYXM6IHtAbGluayBuZy5kaXJlY3RpdmU6bmdGb3JtIGBuZ0Zvcm1gfVxyXG4gKlxyXG4gKiBJbiBBbmd1bGFyIGZvcm1zIGNhbiBiZSBuZXN0ZWQuIFRoaXMgbWVhbnMgdGhhdCB0aGUgb3V0ZXIgZm9ybSBpcyB2YWxpZCB3aGVuIGFsbCBvZiB0aGUgY2hpbGRcclxuICogZm9ybXMgYXJlIHZhbGlkIGFzIHdlbGwuIEhvd2V2ZXIsIGJyb3dzZXJzIGRvIG5vdCBhbGxvdyBuZXN0aW5nIG9mIGA8Zm9ybT5gIGVsZW1lbnRzLCBzb1xyXG4gKiBBbmd1bGFyIHByb3ZpZGVzIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nRm9ybSBgbmdGb3JtYH0gZGlyZWN0aXZlIHdoaWNoIGJlaGF2ZXMgaWRlbnRpY2FsbHkgdG9cclxuICogYDxmb3JtPmAgYnV0IGNhbiBiZSBuZXN0ZWQuICBUaGlzIGFsbG93cyB5b3UgdG8gaGF2ZSBuZXN0ZWQgZm9ybXMsIHdoaWNoIGlzIHZlcnkgdXNlZnVsIHdoZW5cclxuICogdXNpbmcgQW5ndWxhciB2YWxpZGF0aW9uIGRpcmVjdGl2ZXMgaW4gZm9ybXMgdGhhdCBhcmUgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IGBuZ1JlcGVhdGB9IGRpcmVjdGl2ZS4gU2luY2UgeW91IGNhbm5vdCBkeW5hbWljYWxseSBnZW5lcmF0ZSB0aGUgYG5hbWVgXHJcbiAqIGF0dHJpYnV0ZSBvZiBpbnB1dCBlbGVtZW50cyB1c2luZyBpbnRlcnBvbGF0aW9uLCB5b3UgaGF2ZSB0byB3cmFwIGVhY2ggc2V0IG9mIHJlcGVhdGVkIGlucHV0cyBpbiBhblxyXG4gKiBgbmdGb3JtYCBkaXJlY3RpdmUgYW5kIG5lc3QgdGhlc2UgaW4gYW4gb3V0ZXIgYGZvcm1gIGVsZW1lbnQuXHJcbiAqXHJcbiAqXHJcbiAqICMgQ1NTIGNsYXNzZXNcclxuICogIC0gYG5nLXZhbGlkYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgdmFsaWQuXHJcbiAqICAtIGBuZy1pbnZhbGlkYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgaW52YWxpZC5cclxuICogIC0gYG5nLXByaXN0aW5lYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgcHJpc3RpbmUuXHJcbiAqICAtIGBuZy1kaXJ0eWAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIGRpcnR5LlxyXG4gKiAgLSBgbmctc3VibWl0dGVkYCBpcyBzZXQgaWYgdGhlIGZvcm0gd2FzIHN1Ym1pdHRlZC5cclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQgbmdBbmltYXRlIGNhbiBkZXRlY3QgZWFjaCBvZiB0aGVzZSBjbGFzc2VzIHdoZW4gYWRkZWQgYW5kIHJlbW92ZWQuXHJcbiAqXHJcbiAqXHJcbiAqICMgU3VibWl0dGluZyBhIGZvcm0gYW5kIHByZXZlbnRpbmcgdGhlIGRlZmF1bHQgYWN0aW9uXHJcbiAqXHJcbiAqIFNpbmNlIHRoZSByb2xlIG9mIGZvcm1zIGluIGNsaWVudC1zaWRlIEFuZ3VsYXIgYXBwbGljYXRpb25zIGlzIGRpZmZlcmVudCB0aGFuIGluIGNsYXNzaWNhbFxyXG4gKiByb3VuZHRyaXAgYXBwcywgaXQgaXMgZGVzaXJhYmxlIGZvciB0aGUgYnJvd3NlciBub3QgdG8gdHJhbnNsYXRlIHRoZSBmb3JtIHN1Ym1pc3Npb24gaW50byBhIGZ1bGxcclxuICogcGFnZSByZWxvYWQgdGhhdCBzZW5kcyB0aGUgZGF0YSB0byB0aGUgc2VydmVyLiBJbnN0ZWFkIHNvbWUgamF2YXNjcmlwdCBsb2dpYyBzaG91bGQgYmUgdHJpZ2dlcmVkXHJcbiAqIHRvIGhhbmRsZSB0aGUgZm9ybSBzdWJtaXNzaW9uIGluIGFuIGFwcGxpY2F0aW9uLXNwZWNpZmljIHdheS5cclxuICpcclxuICogRm9yIHRoaXMgcmVhc29uLCBBbmd1bGFyIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiAoZm9ybSBzdWJtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIpIHVubGVzcyB0aGVcclxuICogYDxmb3JtPmAgZWxlbWVudCBoYXMgYW4gYGFjdGlvbmAgYXR0cmlidXRlIHNwZWNpZmllZC5cclxuICpcclxuICogWW91IGNhbiB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmcgdHdvIHdheXMgdG8gc3BlY2lmeSB3aGF0IGphdmFzY3JpcHQgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlblxyXG4gKiBhIGZvcm0gaXMgc3VibWl0dGVkOlxyXG4gKlxyXG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgbmdTdWJtaXR9IGRpcmVjdGl2ZSBvbiB0aGUgZm9ybSBlbGVtZW50XHJcbiAqIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9IGRpcmVjdGl2ZSBvbiB0aGUgZmlyc3RcclxuICAqICBidXR0b24gb3IgaW5wdXQgZmllbGQgb2YgdHlwZSBzdWJtaXQgKGlucHV0W3R5cGU9c3VibWl0XSlcclxuICpcclxuICogVG8gcHJldmVudCBkb3VibGUgZXhlY3V0aW9uIG9mIHRoZSBoYW5kbGVyLCB1c2Ugb25seSBvbmUgb2YgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgbmdTdWJtaXR9XHJcbiAqIG9yIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmVzLlxyXG4gKiBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIGZvbGxvd2luZyBmb3JtIHN1Ym1pc3Npb24gcnVsZXMgaW4gdGhlIEhUTUwgc3BlY2lmaWNhdGlvbjpcclxuICpcclxuICogLSBJZiBhIGZvcm0gaGFzIG9ubHkgb25lIGlucHV0IGZpZWxkIHRoZW4gaGl0dGluZyBlbnRlciBpbiB0aGlzIGZpZWxkIHRyaWdnZXJzIGZvcm0gc3VibWl0XHJcbiAqIChgbmdTdWJtaXRgKVxyXG4gKiAtIGlmIGEgZm9ybSBoYXMgMisgaW5wdXQgZmllbGRzIGFuZCBubyBidXR0b25zIG9yIGlucHV0W3R5cGU9c3VibWl0XSB0aGVuIGhpdHRpbmcgZW50ZXJcclxuICogZG9lc24ndCB0cmlnZ2VyIHN1Ym1pdFxyXG4gKiAtIGlmIGEgZm9ybSBoYXMgb25lIG9yIG1vcmUgaW5wdXQgZmllbGRzIGFuZCBvbmUgb3IgbW9yZSBidXR0b25zIG9yIGlucHV0W3R5cGU9c3VibWl0XSB0aGVuXHJcbiAqIGhpdHRpbmcgZW50ZXIgaW4gYW55IG9mIHRoZSBpbnB1dCBmaWVsZHMgd2lsbCB0cmlnZ2VyIHRoZSBjbGljayBoYW5kbGVyIG9uIHRoZSAqZmlyc3QqIGJ1dHRvbiBvclxyXG4gKiBpbnB1dFt0eXBlPXN1Ym1pdF0gKGBuZ0NsaWNrYCkgKmFuZCogYSBzdWJtaXQgaGFuZGxlciBvbiB0aGUgZW5jbG9zaW5nIGZvcm0gKGBuZ1N1Ym1pdGApXHJcbiAqXHJcbiAqIEFueSBwZW5kaW5nIGBuZ01vZGVsT3B0aW9uc2AgY2hhbmdlcyB3aWxsIHRha2UgcGxhY2UgaW1tZWRpYXRlbHkgd2hlbiBhbiBlbmNsb3NpbmcgZm9ybSBpc1xyXG4gKiBzdWJtaXR0ZWQuIE5vdGUgdGhhdCBgbmdDbGlja2AgZXZlbnRzIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBtb2RlbCBpcyB1cGRhdGVkLiBVc2UgYG5nU3VibWl0YFxyXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cclxuICpcclxuICogIyMgQW5pbWF0aW9uIEhvb2tzXHJcbiAqXHJcbiAqIEFuaW1hdGlvbnMgaW4gbmdGb3JtIGFyZSB0cmlnZ2VyZWQgd2hlbiBhbnkgb2YgdGhlIGFzc29jaWF0ZWQgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkLlxyXG4gKiBUaGVzZSBjbGFzc2VzIGFyZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLCBgLm5nLWludmFsaWRgIGFuZCBgLm5nLXZhbGlkYCBhcyB3ZWxsIGFzIGFueVxyXG4gKiBvdGhlciB2YWxpZGF0aW9ucyB0aGF0IGFyZSBwZXJmb3JtZWQgd2l0aGluIHRoZSBmb3JtLiBBbmltYXRpb25zIGluIG5nRm9ybSBhcmUgc2ltaWxhciB0byBob3dcclxuICogdGhleSB3b3JrIGluIG5nQ2xhc3MgYW5kIGFuaW1hdGlvbnMgY2FuIGJlIGhvb2tlZCBpbnRvIHVzaW5nIENTUyB0cmFuc2l0aW9ucywga2V5ZnJhbWVzIGFzIHdlbGxcclxuICogYXMgSlMgYW5pbWF0aW9ucy5cclxuICpcclxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGEgc2ltcGxlIHdheSB0byB1dGlsaXplIENTUyB0cmFuc2l0aW9ucyB0byBzdHlsZSBhIGZvcm0gZWxlbWVudFxyXG4gKiB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGFzIGludmFsaWQgYWZ0ZXIgaXQgaGFzIGJlZW4gdmFsaWRhdGVkOlxyXG4gKlxyXG4gKiA8cHJlPlxyXG4gKiAvL2JlIHN1cmUgdG8gaW5jbHVkZSBuZ0FuaW1hdGUgYXMgYSBtb2R1bGUgdG8gaG9vayBpbnRvIG1vcmVcclxuICogLy9hZHZhbmNlZCBhbmltYXRpb25zXHJcbiAqIC5teS1mb3JtIHtcclxuICogICB0cmFuc2l0aW9uOjAuNXMgbGluZWFyIGFsbDtcclxuICogICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuICogfVxyXG4gKiAubXktZm9ybS5uZy1pbnZhbGlkIHtcclxuICogICBiYWNrZ3JvdW5kOiByZWQ7XHJcbiAqICAgY29sb3I6d2hpdGU7XHJcbiAqIH1cclxuICogPC9wcmU+XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZSBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiIG1vZHVsZT1cImZvcm1FeGFtcGxlXCI+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZm9ybUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAuY29udHJvbGxlcignRm9ybUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLnVzZXJUeXBlID0gJ2d1ZXN0JztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxzdHlsZT5cclxuICAgICAgICAubXktZm9ybSB7XHJcbiAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLm15LWZvcm0ubmctaW52YWxpZCB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgPC9zdHlsZT5cclxuICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRm9ybUNvbnRyb2xsZXJcIiBjbGFzcz1cIm15LWZvcm1cIj5cclxuICAgICAgICAgdXNlclR5cGU6IDxpbnB1dCBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVzZXJUeXBlXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlJlcXVpcmVkITwvc3Bhbj48YnI+XHJcbiAgICAgICAgIDx0dD51c2VyVHlwZSA9IHt7dXNlclR5cGV9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxicj5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHVzZXJUeXBlID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyVHlwZScpKTtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2d1ZXN0Jyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgdXNlclR5cGUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VzZXJUeXBlJykpO1xyXG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICAgICAgdmFyIHVzZXJJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXJUeXBlJykpO1xyXG5cclxuICAgICAgICAgIHVzZXJJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgdXNlcklucHV0LnNlbmRLZXlzKCcnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0VxdWFsKCd1c2VyVHlwZSA9Jyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkIHNjb3BlLCB1bmRlciB0aGlzIG5hbWUuXHJcbiAqL1xyXG52YXIgZm9ybURpcmVjdGl2ZUZhY3RvcnkgPSBmdW5jdGlvbihpc05nRm9ybSkge1xyXG4gIHJldHVybiBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpIHtcclxuICAgIHZhciBmb3JtRGlyZWN0aXZlID0ge1xyXG4gICAgICBuYW1lOiAnZm9ybScsXHJcbiAgICAgIHJlc3RyaWN0OiBpc05nRm9ybSA/ICdFQUMnIDogJ0UnLFxyXG4gICAgICBjb250cm9sbGVyOiBGb3JtQ29udHJvbGxlcixcclxuICAgICAgY29tcGlsZTogZnVuY3Rpb24gbmdGb3JtQ29tcGlsZShmb3JtRWxlbWVudCkge1xyXG4gICAgICAgIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcclxuICAgICAgICBmb3JtRWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUykuYWRkQ2xhc3MoVkFMSURfQ0xBU1MpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcHJlOiBmdW5jdGlvbiBuZ0Zvcm1QcmVMaW5rKHNjb3BlLCBmb3JtRWxlbWVudCwgYXR0ciwgY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAvLyBpZiBgYWN0aW9uYCBhdHRyIGlzIG5vdCBwcmVzZW50IG9uIHRoZSBmb3JtLCBwcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvbiAoc3VibWlzc2lvbilcclxuICAgICAgICAgICAgaWYgKCEoJ2FjdGlvbicgaW4gYXR0cikpIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBjYW4ndCB1c2UganEgZXZlbnRzIGJlY2F1c2UgaWYgYSBmb3JtIGlzIGRlc3Ryb3llZCBkdXJpbmcgc3VibWlzc2lvbiB0aGUgZGVmYXVsdFxyXG4gICAgICAgICAgICAgIC8vIGFjdGlvbiBpcyBub3QgcHJldmVudGVkLiBzZWUgIzEyMzhcclxuICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgIC8vIElFIDkgaXMgbm90IGFmZmVjdGVkIGJlY2F1c2UgaXQgZG9lc24ndCBmaXJlIGEgc3VibWl0IGV2ZW50IGFuZCB0cnkgdG8gZG8gYSBmdWxsXHJcbiAgICAgICAgICAgICAgLy8gcGFnZSByZWxvYWQgaWYgdGhlIGZvcm0gd2FzIGRlc3Ryb3llZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBmb3JtIHZpYSBhIGNsaWNrIGhhbmRsZXJcclxuICAgICAgICAgICAgICAvLyBvbiBhIGJ1dHRvbiBpbiB0aGUgZm9ybS4gTG9va3MgbGlrZSBhbiBJRTkgc3BlY2lmaWMgYnVnLlxyXG4gICAgICAgICAgICAgIHZhciBoYW5kbGVGb3JtU3VibWlzc2lvbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJGNvbW1pdFZpZXdWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRTdWJtaXR0ZWQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lckZuKGZvcm1FbGVtZW50WzBdLCAnc3VibWl0JywgaGFuZGxlRm9ybVN1Ym1pc3Npb24pO1xyXG5cclxuICAgICAgICAgICAgICAvLyB1bnJlZ2lzdGVyIHRoZSBwcmV2ZW50RGVmYXVsdCBsaXN0ZW5lciBzbyB0aGF0IHdlIGRvbid0IG5vdCBsZWFrIG1lbW9yeSBidXQgaW4gYVxyXG4gICAgICAgICAgICAgIC8vIHdheSB0aGF0IHdpbGwgYWNoaWV2ZSB0aGUgcHJldmVudGlvbiBvZiB0aGUgZGVmYXVsdCBhY3Rpb24uXHJcbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGZvcm1FbGVtZW50WzBdLCAnc3VibWl0JywgaGFuZGxlRm9ybVN1Ym1pc3Npb24pO1xyXG4gICAgICAgICAgICAgICAgfSwgMCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcGFyZW50Rm9ybUN0cmwgPSBjb250cm9sbGVyLiQkcGFyZW50Rm9ybSxcclxuICAgICAgICAgICAgICAgIGFsaWFzID0gY29udHJvbGxlci4kbmFtZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhbGlhcykge1xyXG4gICAgICAgICAgICAgIHNldHRlcihzY29wZSwgbnVsbCwgYWxpYXMsIGNvbnRyb2xsZXIsIGFsaWFzKTtcclxuICAgICAgICAgICAgICBhdHRyLiRvYnNlcnZlKGF0dHIubmFtZSA/ICduYW1lJyA6ICduZ0Zvcm0nLCBmdW5jdGlvbihuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFsaWFzID09PSBuZXdWYWx1ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBudWxsLCBhbGlhcywgdW5kZWZpbmVkLCBhbGlhcyk7XHJcbiAgICAgICAgICAgICAgICBhbGlhcyA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBudWxsLCBhbGlhcywgY29udHJvbGxlciwgYWxpYXMpO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50Rm9ybUN0cmwuJCRyZW5hbWVDb250cm9sKGNvbnRyb2xsZXIsIGFsaWFzKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBwYXJlbnRGb3JtQ3RybC4kcmVtb3ZlQ29udHJvbChjb250cm9sbGVyKTtcclxuICAgICAgICAgICAgICBpZiAoYWxpYXMpIHtcclxuICAgICAgICAgICAgICAgIHNldHRlcihzY29wZSwgbnVsbCwgYWxpYXMsIHVuZGVmaW5lZCwgYWxpYXMpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBleHRlbmQoY29udHJvbGxlciwgbnVsbEZvcm1DdHJsKTsgLy9zdG9wIHByb3BhZ2F0aW5nIGNoaWxkIGRlc3RydWN0aW9uIGhhbmRsZXJzIHVwd2FyZHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZm9ybURpcmVjdGl2ZTtcclxuICB9XTtcclxufTtcclxuXHJcbnZhciBmb3JtRGlyZWN0aXZlID0gZm9ybURpcmVjdGl2ZUZhY3RvcnkoKTtcclxudmFyIG5nRm9ybURpcmVjdGl2ZSA9IGZvcm1EaXJlY3RpdmVGYWN0b3J5KHRydWUpO1xyXG5cclxuLyogZ2xvYmFsIFZBTElEX0NMQVNTOiBmYWxzZSxcclxuICBJTlZBTElEX0NMQVNTOiBmYWxzZSxcclxuICBQUklTVElORV9DTEFTUzogZmFsc2UsXHJcbiAgRElSVFlfQ0xBU1M6IGZhbHNlLFxyXG4gIFVOVE9VQ0hFRF9DTEFTUzogZmFsc2UsXHJcbiAgVE9VQ0hFRF9DTEFTUzogZmFsc2UsXHJcbiAgJG5nTW9kZWxNaW5FcnI6IGZhbHNlLFxyXG4qL1xyXG5cclxuLy8gUmVnZXggY29kZSBpcyBvYnRhaW5lZCBmcm9tIFNPOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMTQzMDcwL2phdmFzY3JpcHQtcmVnZXgtaXNvLWRhdGV0aW1lI2Fuc3dlci0zMTQzMjMxXHJcbnZhciBJU09fREFURV9SRUdFWFAgPSAvXFxkezR9LVswMV1cXGQtWzAtM11cXGRUWzAtMl1cXGQ6WzAtNV1cXGQ6WzAtNV1cXGRcXC5cXGQrKFsrLV1bMC0yXVxcZDpbMC01XVxcZHxaKS87XHJcbnZhciBVUkxfUkVHRVhQID0gL14oZnRwfGh0dHB8aHR0cHMpOlxcL1xcLyhcXHcrOnswLDF9XFx3KkApPyhcXFMrKSg6WzAtOV0rKT8oXFwvfFxcLyhbXFx3IyE6Lj8rPSYlQCFcXC1cXC9dKSk/JC87XHJcbnZhciBFTUFJTF9SRUdFWFAgPSAvXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaTtcclxudmFyIE5VTUJFUl9SRUdFWFAgPSAvXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKVxccyokLztcclxudmFyIERBVEVfUkVHRVhQID0gL14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KSQvO1xyXG52YXIgREFURVRJTUVMT0NBTF9SRUdFWFAgPSAvXihcXGR7NH0pLShcXGRcXGQpLShcXGRcXGQpVChcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvO1xyXG52YXIgV0VFS19SRUdFWFAgPSAvXihcXGR7NH0pLVcoXFxkXFxkKSQvO1xyXG52YXIgTU9OVEhfUkVHRVhQID0gL14oXFxkezR9KS0oXFxkXFxkKSQvO1xyXG52YXIgVElNRV9SRUdFWFAgPSAvXihcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvO1xyXG5cclxudmFyIGlucHV0VHlwZSA9IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbdGV4dF1cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFN0YW5kYXJkIEhUTUwgdGV4dCBpbnB1dCB3aXRoIGFuZ3VsYXIgZGF0YSBiaW5kaW5nLCBpbmhlcml0ZWQgYnkgbW9zdCBvZiB0aGUgYGlucHV0YCBlbGVtZW50cy5cclxuICAgKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxyXG4gICAqICAgIG1pbmxlbmd0aC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXHJcbiAgICogICAgYW55IGxlbmd0aC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXHJcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxyXG4gICAqICAgIGFzIGluIHRoZSBuZ1BhdHRlcm4gZGlyZWN0aXZlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHZhbHVlIGRvZXMgbm90IG1hdGNoXHJcbiAgICogICAgYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhciBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXHJcbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cclxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHN0cmluZyB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgXHJcbiAgICogICAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYG5ldyBSZWdFeHAoJ15hYmMkJylgLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtib29sZWFuPX0gW25nVHJpbT10cnVlXSBJZiBzZXQgdG8gZmFsc2UgQW5ndWxhciB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxyXG4gICAqICAgIFRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQgZm9yIGlucHV0W3R5cGU9cGFzc3dvcmRdIGNvbnRyb2xzLCB3aGljaCB3aWxsIG5ldmVyIHRyaW0gdGhlXHJcbiAgICogICAgaW5wdXQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidGV4dC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ0ZXh0SW5wdXRFeGFtcGxlXCI+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndGV4dElucHV0RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgdGV4dDogJ2d1ZXN0JyxcclxuICAgICAgICAgICAgICAgICB3b3JkOiAvXlxccypcXHcqXFxzKiQvXHJcbiAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICAgU2luZ2xlIHdvcmQ6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS50ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nLXBhdHRlcm49XCJleGFtcGxlLndvcmRcIiByZXF1aXJlZCBuZy10cmltPVwiZmFsc2VcIj5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucGF0dGVyblwiPlxyXG4gICAgICAgICAgICAgU2luZ2xlIHdvcmQgb25seSE8L3NwYW4+XHJcblxyXG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3tleGFtcGxlLnRleHR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnRleHQnKSk7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdleGFtcGxlLnRleHQnKSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdndWVzdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3RleHQgPScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbXVsdGkgd29yZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnaGVsbG8gd29ybGQnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICd0ZXh0JzogdGV4dElucHV0VHlwZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAgICogQG5hbWUgaW5wdXRbZGF0ZV1cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIElucHV0IHdpdGggZGF0ZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxyXG4gICAgICogZGF0ZSBmb3JtYXQgKHl5eXktTU0tZGQpLCBmb3IgZXhhbXBsZTogYDIwMDktMDEtMDZgLiBTaW5jZSBtYW55XHJcbiAgICAgKiBtb2Rlcm4gYnJvd3NlcnMgZG8gbm90IHlldCBzdXBwb3J0IHRoaXMgaW5wdXQgdHlwZSwgaXQgaXMgaW1wb3J0YW50IHRvIHByb3ZpZGUgY3VlcyB0byB1c2VycyBvbiB0aGVcclxuICAgICAqIGV4cGVjdGVkIGlucHV0IGZvcm1hdCB2aWEgYSBwbGFjZWhvbGRlciBvciBsYWJlbC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBEYXRlIG9iamVjdCwgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXHJcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxyXG4gICAgICogdmFsaWQgSVNPIGRhdGUgc3RyaW5nICh5eXl5LU1NLWRkKS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0IGJlXHJcbiAgICAgKiBhIHZhbGlkIElTTyBkYXRlIHN0cmluZyAoeXl5eS1NTS1kZCkuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgIDxleGFtcGxlIG5hbWU9XCJkYXRlLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImRhdGVJbnB1dEV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkYXRlSW5wdXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMywgOSwgMjIpXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICAgICBQaWNrIGEgZGF0ZSBpbiAyMDEzOlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwieXl5eS1NTS1kZFwiIG1pbj1cIjIwMTMtMDEtMDFcIiBtYXg9XCIyMDEzLTEyLTMxXCIgcmVxdWlyZWQgLz5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5kYXRlXCI+XHJcbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XHJcbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkXCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgICA8L2Zvcm0+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRcIicpKTtcclxuICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcclxuXHJcbiAgICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcclxuICAgICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXHJcbiAgICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxyXG4gICAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xyXG4gICAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cclxuICAgICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcclxuICAgICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcclxuICAgICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcclxuICAgICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTMtMTAtMjInKTtcclxuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZXRJbnB1dCgnJyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNldElucHV0KCcyMDE1LTAxLTAxJyk7XHJcbiAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPC9leGFtcGxlPlxyXG4gICAgICovXHJcbiAgJ2RhdGUnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCdkYXRlJywgREFURV9SRUdFWFAsXHJcbiAgICAgICAgIGNyZWF0ZURhdGVQYXJzZXIoREFURV9SRUdFWFAsIFsneXl5eScsICdNTScsICdkZCddKSxcclxuICAgICAgICAgJ3l5eXktTU0tZGQnKSxcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAbmdkb2MgaW5wdXRcclxuICAgICogQG5hbWUgaW5wdXRbZGF0ZXRpbWUtbG9jYWxdXHJcbiAgICAqXHJcbiAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgKiBJbnB1dCB3aXRoIGRhdGV0aW1lIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxyXG4gICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXHJcbiAgICAqIGxvY2FsIGRhdGV0aW1lIGZvcm1hdCAoeXl5eS1NTS1kZFRISDptbTpzcyksIGZvciBleGFtcGxlOiBgMjAxMC0xMi0yOFQxNDo1NzowMGAuXHJcbiAgICAqXHJcbiAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhciB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAqXHJcbiAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcclxuICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxyXG4gICAgKiB2YWxpZCBJU08gZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcclxuICAgICogYSB2YWxpZCBJU08gZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAgKlxyXG4gICAgKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbmFtZT1cImRhdGV0aW1lbG9jYWwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZGF0ZUV4YW1wbGVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2RhdGVFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcclxuICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMCwgMTEsIDI4LCAxNCwgNTcpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgIDwvc2NyaXB0PlxyXG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICAgUGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIiBpZD1cImV4YW1wbGVJbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwieXl5eS1NTS1kZFRISDptbTpzc1wiIG1pbj1cIjIwMDEtMDEtMDFUMDA6MDA6MDBcIiBtYXg9XCIyMDEzLTEyLTMxVDAwOjAwOjAwXCIgcmVxdWlyZWQgLz5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5kYXRldGltZWxvY2FsXCI+XHJcbiAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxyXG4gICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wifX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxyXG4gICAgICA8L2Zvcm0+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wiJykpO1xyXG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2V4YW1wbGUudmFsdWUnKSk7XHJcblxyXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxyXG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXHJcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxyXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcclxuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxyXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcclxuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXHJcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xyXG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTAtMTItMjhUMTQ6NTc6MDAnKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0SW5wdXQoJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxLTAxVDIzOjU5OjAwJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcclxuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xyXG4gICAgICB9KTtcclxuICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICAgICovXHJcbiAgJ2RhdGV0aW1lLWxvY2FsJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnZGF0ZXRpbWVsb2NhbCcsIERBVEVUSU1FTE9DQUxfUkVHRVhQLFxyXG4gICAgICBjcmVhdGVEYXRlUGFyc2VyKERBVEVUSU1FTE9DQUxfUkVHRVhQLCBbJ3l5eXknLCAnTU0nLCAnZGQnLCAnSEgnLCAnbW0nLCAnc3MnLCAnc3NzJ10pLFxyXG4gICAgICAneXl5eS1NTS1kZFRISDptbTpzcy5zc3MnKSxcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbdGltZV1cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIElucHV0IHdpdGggdGltZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXHJcbiAgICogbG9jYWwgdGltZSBmb3JtYXQgKEhIOm1tOnNzKSwgZm9yIGV4YW1wbGU6IGAxNDo1NzowMGAuIE1vZGVsIG11c3QgYmUgYSBEYXRlIG9iamVjdC4gVGhpcyBiaW5kaW5nIHdpbGwgYWx3YXlzIG91dHB1dCBhXHJcbiAgICogRGF0ZSBvYmplY3QgdG8gdGhlIG1vZGVsIG9mIEphbnVhcnkgMSwgMTk3MCwgb3IgbG9jYWwgZGF0ZSBgbmV3IERhdGUoMTk3MCwgMCwgMSwgSEgsIG1tLCBzcylgLlxyXG4gICAqXHJcbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFyIHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAqXHJcbiAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xyXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxyXG4gICAqIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0IGJlIGFcclxuICAgKiB2YWxpZCBJU08gdGltZSBmb3JtYXQgKEhIOm1tOnNzKS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbmFtZT1cInRpbWUtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwidGltZUV4YW1wbGVcIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICA8c2NyaXB0PlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgndGltZUV4YW1wbGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgxOTcwLCAwLCAxLCAxNCwgNTcsIDApXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuICAgICA8L3NjcmlwdD5cclxuICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XHJcbiAgICAgICAgUGljayBhIGJldHdlZW4gOGFtIGFuZCA1cG06XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0aW1lXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkhIOm1tOnNzXCIgbWluPVwiMDg6MDA6MDBcIiBtYXg9XCIxNzowMDowMFwiIHJlcXVpcmVkIC8+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudGltZVwiPlxyXG4gICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cclxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcIkhIOm1tOnNzXCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgPC9mb3JtPlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJISDptbTpzc1wiJykpO1xyXG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2V4YW1wbGUudmFsdWUnKSk7XHJcblxyXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxyXG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXHJcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxyXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcclxuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxyXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcclxuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXHJcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xyXG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzE0OjU3OjAwJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnMjM6NTk6MDAnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICAndGltZSc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ3RpbWUnLCBUSU1FX1JFR0VYUCxcclxuICAgICAgY3JlYXRlRGF0ZVBhcnNlcihUSU1FX1JFR0VYUCwgWydISCcsICdtbScsICdzcycsICdzc3MnXSksXHJcbiAgICAgJ0hIOm1tOnNzLnNzcycpLFxyXG5cclxuICAgLyoqXHJcbiAgICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAgKiBAbmFtZSBpbnB1dFt3ZWVrXVxyXG4gICAgKlxyXG4gICAgKiBAZGVzY3JpcHRpb25cclxuICAgICogSW5wdXQgd2l0aCB3ZWVrLW9mLXRoZS15ZWFyIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uIHRvIERhdGUuIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XHJcbiAgICAqIHRoZSBIVE1MNSB3ZWVrIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcclxuICAgICogd2VlayBmb3JtYXQgKHl5eXktVyMjKSwgZm9yIGV4YW1wbGU6IGAyMDEzLVcwMmAuXHJcbiAgICAqXHJcbiAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhciB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAqXHJcbiAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcclxuICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmUgYVxyXG4gICAgKiB2YWxpZCBJU08gd2VlayBmb3JtYXQgKHl5eXktVyMjKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcclxuICAgICogYSB2YWxpZCBJU08gd2VlayBmb3JtYXQgKHl5eXktVyMjKS5cclxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAgKlxyXG4gICAgKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbmFtZT1cIndlZWstaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwid2Vla0V4YW1wbGVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxzY3JpcHQ+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCd3ZWVrRXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcclxuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDAsIDMpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cclxuICAgICAgICBQaWNrIGEgZGF0ZSBiZXR3ZWVuIGluIDIwMTM6XHJcbiAgICAgICAgPGlucHV0IGlkPVwiZXhhbXBsZUlucHV0XCIgdHlwZT1cIndlZWtcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIllZWVktVyMjXCIgbWluPVwiMjAxMi1XMzJcIiBtYXg9XCIyMDEzLVc1MlwiIHJlcXVpcmVkIC8+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3Iud2Vla1wiPlxyXG4gICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cclxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XHJcbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LVd3d1wiJykpO1xyXG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2V4YW1wbGUudmFsdWUnKSk7XHJcblxyXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxyXG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXHJcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxyXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcclxuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxyXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcclxuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXHJcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xyXG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTMtVzAxJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldElucHV0KCcnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnMjAxNS1XMDEnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gICAgKi9cclxuICAnd2Vlayc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ3dlZWsnLCBXRUVLX1JFR0VYUCwgd2Vla1BhcnNlciwgJ3l5eXktV3d3JyksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAqIEBuYW1lIGlucHV0W21vbnRoXVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogSW5wdXQgd2l0aCBtb250aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcclxuICAgKiB0aGUgSFRNTDUgbW9udGggaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxyXG4gICAqIG1vbnRoIGZvcm1hdCAoeXl5eS1NTSksIGZvciBleGFtcGxlOiBgMjAwOS0wMWAuXHJcbiAgICpcclxuICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBEYXRlIG9iamVjdCwgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICogSWYgdGhlIG1vZGVsIGlzIG5vdCBzZXQgdG8gdGhlIGZpcnN0IG9mIHRoZSBtb250aCwgdGhlIG5leHQgdmlldyB0byBtb2RlbCB1cGRhdGUgd2lsbCBzZXQgaXRcclxuICAgKiB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLlxyXG4gICAqXHJcbiAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xyXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLiBUaGlzIG11c3QgYmVcclxuICAgKiBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC4gVGhpcyBtdXN0XHJcbiAgICogYmUgYSB2YWxpZCBJU08gbW9udGggZm9ybWF0ICh5eXl5LU1NKS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbmFtZT1cIm1vbnRoLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm1vbnRoRXhhbXBsZVwiPlxyXG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgIDxzY3JpcHQ+XHJcbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdtb250aEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgyMDEzLCA5LCAxKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XSk7XHJcbiAgICAgPC9zY3JpcHQ+XHJcbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxyXG4gICAgICAgUGljayBhIG1vbnRoIGluIDIwMTM6XHJcbiAgICAgICA8aW5wdXQgaWQ9XCJleGFtcGxlSW5wdXRcIiB0eXBlPVwibW9udGhcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NXCIgbWluPVwiMjAxMy0wMVwiIG1heD1cIjIwMTMtMTJcIiByZXF1aXJlZCAvPlxyXG4gICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IubW9udGhcIj5cclxuICAgICAgICAgIE5vdCBhIHZhbGlkIG1vbnRoITwvc3Bhbj5cclxuICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwifX08L3R0Pjxici8+XHJcbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XHJcbiAgICAgPC9mb3JtPlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NXCInKSk7XHJcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcclxuXHJcbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcclxuICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXHJcbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xyXG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXHJcbiAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xyXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcclxuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XHJcbiAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy0xMCcpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRJbnB1dCgnJyk7XHJcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtMDEnKTtcclxuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XHJcbiAgICAgIH0pO1xyXG4gICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICAnbW9udGgnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCdtb250aCcsIE1PTlRIX1JFR0VYUCxcclxuICAgICBjcmVhdGVEYXRlUGFyc2VyKE1PTlRIX1JFR0VYUCwgWyd5eXl5JywgJ01NJ10pLFxyXG4gICAgICd5eXl5LU1NJyksXHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBpbnB1dFxyXG4gICAqIEBuYW1lIGlucHV0W251bWJlcl1cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRleHQgaW5wdXQgd2l0aCBudW1iZXIgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIFNldHMgdGhlIGBudW1iZXJgIHZhbGlkYXRpb25cclxuICAgKiBlcnJvciBpZiBub3QgYSB2YWxpZCBudW1iZXIuXHJcbiAgICpcclxuICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBudW1iZXIsIG90aGVyd2lzZSBBbmd1bGFyIHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xyXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXHJcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cclxuICAgKiAgICBtaW5sZW5ndGguXHJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxyXG4gICAqICAgIGFueSBsZW5ndGguXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwYXR0ZXJuIFNpbWlsYXIgdG8gYG5nUGF0dGVybmAgZXhjZXB0IHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBpcyB0aGUgYWN0dWFsIHN0cmluZ1xyXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cclxuICAgKiAgICBhcyBpbiB0aGUgbmdQYXR0ZXJuIGRpcmVjdGl2ZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB2YWx1ZSBkb2VzIG5vdCBtYXRjaFxyXG4gICAqICAgIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxyXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXHJcbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gaXMgYSBzdHJpbmcgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cCBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYFxyXG4gICAqICAgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cIm51bWJlci1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJudW1iZXJFeGFtcGxlXCI+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbnVtYmVyRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgdmFsdWU6IDEyXHJcbiAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICAgTnVtYmVyOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluPVwiMFwiIG1heD1cIjk5XCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLm51bWJlclwiPlxyXG4gICAgICAgICAgICAgTm90IHZhbGlkIG51bWJlciE8L3NwYW4+XHJcbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUnKSk7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XHJcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdleGFtcGxlLnZhbHVlJykpO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzEyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJzEyMycpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdudW1iZXInOiBudW1iZXJJbnB1dFR5cGUsXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgaW5wdXRcclxuICAgKiBAbmFtZSBpbnB1dFt1cmxdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUZXh0IGlucHV0IHdpdGggVVJMIHZhbGlkYXRpb24uIFNldHMgdGhlIGB1cmxgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBjb250ZW50IGlzIG5vdCBhXHJcbiAgICogdmFsaWQgVVJMLlxyXG4gICAqXHJcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICAgKiAqKk5vdGU6KiogYGlucHV0W3VybF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSB1cmxzIHRoYXQgaXMgZGVyaXZlZCBmcm9tIHRoZSByZWdleFxyXG4gICAqIHVzZWQgaW4gQ2hyb21pdW0uIElmIHlvdSBuZWVkIHN0cmljdGVyIHZhbGlkYXRpb24sIHlvdSBjYW4gdXNlIGBuZy1wYXR0ZXJuYCBvciBtb2RpZnlcclxuICAgKiB0aGUgYnVpbHQtaW4gdmFsaWRhdG9ycyAoc2VlIHRoZSB7QGxpbmsgZ3VpZGUvZm9ybXMgRm9ybXMgZ3VpZGV9KVxyXG4gICAqIDwvZGl2PlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxyXG4gICAqICAgIG1pbmxlbmd0aC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXHJcbiAgICogICAgYW55IGxlbmd0aC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXHJcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxyXG4gICAqICAgIGFzIGluIHRoZSBuZ1BhdHRlcm4gZGlyZWN0aXZlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHZhbHVlIGRvZXMgbm90IG1hdGNoXHJcbiAgICogICAgYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhciBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXHJcbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cclxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHN0cmluZyB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgXHJcbiAgICogICAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYG5ldyBSZWdFeHAoJ15hYmMkJylgLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidXJsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInVybEV4YW1wbGVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd1cmxFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgICAkc2NvcGUudXJsID0ge1xyXG4gICAgICAgICAgICAgICAgIHRleHQ6ICdodHRwOi8vZ29vZ2xlLmNvbSdcclxuICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgICBVUkw6IDxpbnB1dCB0eXBlPVwidXJsXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJ1cmwudGV4dFwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxyXG4gICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxyXG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci51cmxcIj5cclxuICAgICAgICAgICAgIE5vdCB2YWxpZCB1cmwhPC9zcGFuPlxyXG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3t1cmwudGV4dH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci51cmwgPSB7eyEhbXlGb3JtLiRlcnJvci51cmx9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VybC50ZXh0JykpO1xyXG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xyXG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXJsLnRleHQnKSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdodHRwOi8vZ29vZ2xlLmNvbScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3RleHQgPScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbm90IHVybCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnYm94Jyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICAndXJsJzogdXJsSW5wdXRUeXBlLFxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbZW1haWxdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUZXh0IGlucHV0IHdpdGggZW1haWwgdmFsaWRhdGlvbi4gU2V0cyB0aGUgYGVtYWlsYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiBub3QgYSB2YWxpZCBlbWFpbFxyXG4gICAqIGFkZHJlc3MuXHJcbiAgICpcclxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gICAqICoqTm90ZToqKiBgaW5wdXRbZW1haWxdYCB1c2VzIGEgcmVnZXggdG8gdmFsaWRhdGUgZW1haWwgYWRkcmVzc2VzIHRoYXQgaXMgZGVyaXZlZCBmcm9tIHRoZSByZWdleFxyXG4gICAqIHVzZWQgaW4gQ2hyb21pdW0uIElmIHlvdSBuZWVkIHN0cmljdGVyIHZhbGlkYXRpb24gKGUuZy4gcmVxdWlyaW5nIGEgdG9wLWxldmVsIGRvbWFpbiksIHlvdSBjYW5cclxuICAgKiB1c2UgYG5nLXBhdHRlcm5gIG9yIG1vZGlmeSB0aGUgYnVpbHQtaW4gdmFsaWRhdG9ycyAoc2VlIHRoZSB7QGxpbmsgZ3VpZGUvZm9ybXMgRm9ybXMgZ3VpZGV9KVxyXG4gICAqIDwvZGl2PlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXHJcbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxyXG4gICAqICAgIG1pbmxlbmd0aC5cclxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXHJcbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXHJcbiAgICogICAgYW55IGxlbmd0aC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXHJcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxyXG4gICAqICAgIGFzIGluIHRoZSBuZ1BhdHRlcm4gZGlyZWN0aXZlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHZhbHVlIGRvZXMgbm90IG1hdGNoXHJcbiAgICogICAgYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhciBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXHJcbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cclxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHN0cmluZyB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgXHJcbiAgICogICAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYG5ldyBSZWdFeHAoJ15hYmMkJylgLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZVxyXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwiZW1haWwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZW1haWxFeGFtcGxlXCI+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZW1haWxFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgICAgICAkc2NvcGUuZW1haWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgdGV4dDogJ21lQGV4YW1wbGUuY29tJ1xyXG4gICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgICAgICBFbWFpbDogPGlucHV0IHR5cGU9XCJlbWFpbFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZW1haWwudGV4dFwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5lbWFpbFwiPlxyXG4gICAgICAgICAgICAgICBOb3QgdmFsaWQgZW1haWwhPC9zcGFuPlxyXG4gICAgICAgICAgICAgPHR0PnRleHQgPSB7e2VtYWlsLnRleHR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XHJcbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLmVtYWlsID0ge3shIW15Rm9ybS4kZXJyb3IuZW1haWx9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgIDwvZmlsZT5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgICB2YXIgdGV4dCA9IGVsZW1lbnQoYnkuYmluZGluZygnZW1haWwudGV4dCcpKTtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcclxuICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2VtYWlsLnRleHQnKSk7XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdtZUBleGFtcGxlLmNvbScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9FcXVhbCgndGV4dCA9Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgZW1haWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ3h4eCcpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICA8L2V4YW1wbGU+XHJcbiAgICovXHJcbiAgJ2VtYWlsJzogZW1haWxJbnB1dFR5cGUsXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgaW5wdXRcclxuICAgKiBAbmFtZSBpbnB1dFtyYWRpb11cclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEhUTUwgcmFkaW8gYnV0dG9uLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ1ZhbHVlIEFuZ3VsYXIgZXhwcmVzc2lvbiB3aGljaCBzZXRzIHRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGRcclxuICAgKiAgICBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJyYWRpby1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJyYWRpb0V4YW1wbGVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICA8c2NyaXB0PlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdyYWRpb0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICRzY29wZS5jb2xvciA9IHtcclxuICAgICAgICAgICAgICAgICBuYW1lOiAnYmx1ZSdcclxuICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgJHNjb3BlLnNwZWNpYWxWYWx1ZSA9IHtcclxuICAgICAgICAgICAgICAgICBcImlkXCI6IFwiMTIzNDVcIixcclxuICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiZ3JlZW5cIlxyXG4gICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiB2YWx1ZT1cInJlZFwiPiAgUmVkIDxici8+XHJcbiAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwiY29sb3IubmFtZVwiIG5nLXZhbHVlPVwic3BlY2lhbFZhbHVlXCI+IEdyZWVuIDxici8+XHJcbiAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwiY29sb3IubmFtZVwiIHZhbHVlPVwiYmx1ZVwiPiBCbHVlIDxici8+XHJcbiAgICAgICAgICAgPHR0PmNvbG9yID0ge3tjb2xvci5uYW1lIHwganNvbn19PC90dD48YnIvPlxyXG4gICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgTm90ZSB0aGF0IGBuZy12YWx1ZT1cInNwZWNpYWxWYWx1ZVwiYCBzZXRzIHJhZGlvIGl0ZW0ncyB2YWx1ZSB0byBiZSB0aGUgdmFsdWUgb2YgYCRzY29wZS5zcGVjaWFsVmFsdWVgLlxyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGNoYW5nZSBzdGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgY29sb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvbG9yLm5hbWUnKSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2JsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdjb2xvci5uYW1lJykpLmdldCgwKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGNvbG9yLmdldFRleHQoKSkudG9Db250YWluKCdyZWQnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdyYWRpbyc6IHJhZGlvSW5wdXRUeXBlLFxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIGlucHV0XHJcbiAgICogQG5hbWUgaW5wdXRbY2hlY2tib3hdXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBIVE1MIGNoZWNrYm94LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICAgKiBAcGFyYW0ge2V4cHJlc3Npb249fSBuZ1RydWVWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxyXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nRmFsc2VWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIG5vdCBzZWxlY3RlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cImNoZWNrYm94LWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImNoZWNrYm94RXhhbXBsZVwiPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2NoZWNrYm94RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrYm94TW9kZWwgPSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTEgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUyIDogJ1lFUydcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgIFZhbHVlMTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tib3hNb2RlbC52YWx1ZTFcIj4gPGJyLz5cclxuICAgICAgICAgICBWYWx1ZTI6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrYm94TW9kZWwudmFsdWUyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZy10cnVlLXZhbHVlPVwiJ1lFUydcIiBuZy1mYWxzZS12YWx1ZT1cIidOTydcIj4gPGJyLz5cclxuICAgICAgICAgICA8dHQ+dmFsdWUxID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMX19PC90dD48YnIvPlxyXG4gICAgICAgICAgIDx0dD52YWx1ZTIgPSB7e2NoZWNrYm94TW9kZWwudmFsdWUyfX08L3R0Pjxici8+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHN0YXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZTEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NoZWNrYm94TW9kZWwudmFsdWUxJykpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUyID0gZWxlbWVudChieS5iaW5kaW5nKCdjaGVja2JveE1vZGVsLnZhbHVlMicpKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTEuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMi5nZXRUZXh0KCkpLnRvQ29udGFpbignWUVTJyk7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2JveE1vZGVsLnZhbHVlMScpKS5jbGljaygpO1xyXG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2JveE1vZGVsLnZhbHVlMicpKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMS5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMi5nZXRUZXh0KCkpLnRvQ29udGFpbignTk8nKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICAqL1xyXG4gICdjaGVja2JveCc6IGNoZWNrYm94SW5wdXRUeXBlLFxyXG5cclxuICAnaGlkZGVuJzogbm9vcCxcclxuICAnYnV0dG9uJzogbm9vcCxcclxuICAnc3VibWl0Jzogbm9vcCxcclxuICAncmVzZXQnOiBub29wLFxyXG4gICdmaWxlJzogbm9vcFxyXG59O1xyXG5cclxuZnVuY3Rpb24gc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCkge1xyXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpID8gdmFsdWUgOiB2YWx1ZS50b1N0cmluZygpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0ZXh0SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xyXG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICB2YXIgdHlwZSA9IGxvd2VyY2FzZShlbGVtZW50WzBdLnR5cGUpO1xyXG5cclxuICAvLyBJbiBjb21wb3NpdGlvbiBtb2RlLCB1c2VycyBhcmUgc3RpbGwgaW5wdXRpbmcgaW50ZXJtZWRpYXRlIHRleHQgYnVmZmVyLFxyXG4gIC8vIGhvbGQgdGhlIGxpc3RlbmVyIHVudGlsIGNvbXBvc2l0aW9uIGlzIGRvbmUuXHJcbiAgLy8gTW9yZSBhYm91dCBjb21wb3NpdGlvbiBldmVudHM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Db21wb3NpdGlvbkV2ZW50XHJcbiAgaWYgKCEkc25pZmZlci5hbmRyb2lkKSB7XHJcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XHJcblxyXG4gICAgZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xyXG4gICAgICBsaXN0ZW5lcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgaWYgKHRpbWVvdXQpIHtcclxuICAgICAgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKHRpbWVvdXQpO1xyXG4gICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmIChjb21wb3NpbmcpIHJldHVybjtcclxuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsKCksXHJcbiAgICAgICAgZXZlbnQgPSBldiAmJiBldi50eXBlO1xyXG5cclxuICAgIC8vIEJ5IGRlZmF1bHQgd2Ugd2lsbCB0cmltIHRoZSB2YWx1ZVxyXG4gICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBuZy10cmltIGV4aXN0cyB3ZSB3aWxsIGF2b2lkIHRyaW1taW5nXHJcbiAgICAvLyBJZiBpbnB1dCB0eXBlIGlzICdwYXNzd29yZCcsIHRoZSB2YWx1ZSBpcyBuZXZlciB0cmltbWVkXHJcbiAgICBpZiAodHlwZSAhPT0gJ3Bhc3N3b3JkJyAmJiAoIWF0dHIubmdUcmltIHx8IGF0dHIubmdUcmltICE9PSAnZmFsc2UnKSkge1xyXG4gICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGEgY29udHJvbCBpcyBzdWZmZXJpbmcgZnJvbSBiYWQgaW5wdXQgKGR1ZSB0byBuYXRpdmUgdmFsaWRhdG9ycyksIGJyb3dzZXJzIGRpc2NhcmQgaXRzXHJcbiAgICAvLyB2YWx1ZSwgc28gaXQgbWF5IGJlIG5lY2Vzc2FyeSB0byByZXZhbGlkYXRlIChieSBjYWxsaW5nICRzZXRWaWV3VmFsdWUgYWdhaW4pIGV2ZW4gaWYgdGhlXHJcbiAgICAvLyBjb250cm9sJ3MgdmFsdWUgaXMgdGhlIHNhbWUgZW1wdHkgdmFsdWUgdHdpY2UgaW4gYSByb3cuXHJcbiAgICBpZiAoY3RybC4kdmlld1ZhbHVlICE9PSB2YWx1ZSB8fCAodmFsdWUgPT09ICcnICYmIGN0cmwuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSkge1xyXG4gICAgICBjdHJsLiRzZXRWaWV3VmFsdWUodmFsdWUsIGV2ZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBpZiB0aGUgYnJvd3NlciBkb2VzIHN1cHBvcnQgXCJpbnB1dFwiIGV2ZW50LCB3ZSBhcmUgZmluZSAtIGV4Y2VwdCBvbiBJRTkgd2hpY2ggZG9lc24ndCBmaXJlIHRoZVxyXG4gIC8vIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZSwgZGVsZXRlIG9yIGN1dFxyXG4gIGlmICgkc25pZmZlci5oYXNFdmVudCgnaW5wdXQnKSkge1xyXG4gICAgZWxlbWVudC5vbignaW5wdXQnLCBsaXN0ZW5lcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhciB0aW1lb3V0O1xyXG5cclxuICAgIHZhciBkZWZlckxpc3RlbmVyID0gZnVuY3Rpb24oZXYsIGlucHV0LCBvcmlnVmFsdWUpIHtcclxuICAgICAgaWYgKCF0aW1lb3V0KSB7XHJcbiAgICAgICAgdGltZW91dCA9ICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICBpZiAoIWlucHV0IHx8IGlucHV0LnZhbHVlICE9PSBvcmlnVmFsdWUpIHtcclxuICAgICAgICAgICAgbGlzdGVuZXIoZXYpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGVsZW1lbnQub24oJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcclxuXHJcbiAgICAgIC8vIGlnbm9yZVxyXG4gICAgICAvLyAgICBjb21tYW5kICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgICAgICAgICAgIGFycm93c1xyXG4gICAgICBpZiAoa2V5ID09PSA5MSB8fCAoMTUgPCBrZXkgJiYga2V5IDwgMTkpIHx8ICgzNyA8PSBrZXkgJiYga2V5IDw9IDQwKSkgcmV0dXJuO1xyXG5cclxuICAgICAgZGVmZXJMaXN0ZW5lcihldmVudCwgdGhpcywgdGhpcy52YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBpZiB1c2VyIG1vZGlmaWVzIGlucHV0IHZhbHVlIHVzaW5nIGNvbnRleHQgbWVudSBpbiBJRSwgd2UgbmVlZCBcInBhc3RlXCIgYW5kIFwiY3V0XCIgZXZlbnRzIHRvIGNhdGNoIGl0XHJcbiAgICBpZiAoJHNuaWZmZXIuaGFzRXZlbnQoJ3Bhc3RlJykpIHtcclxuICAgICAgZWxlbWVudC5vbigncGFzdGUgY3V0JywgZGVmZXJMaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBpZiB1c2VyIHBhc3RlIGludG8gaW5wdXQgdXNpbmcgbW91c2Ugb24gb2xkZXIgYnJvd3NlclxyXG4gIC8vIG9yIGZvcm0gYXV0b2NvbXBsZXRlIG9uIG5ld2VyIGJyb3dzZXIsIHdlIG5lZWQgXCJjaGFuZ2VcIiBldmVudCB0byBjYXRjaCBpdFxyXG4gIGVsZW1lbnQub24oJ2NoYW5nZScsIGxpc3RlbmVyKTtcclxuXHJcbiAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICBlbGVtZW50LnZhbChjdHJsLiRpc0VtcHR5KGN0cmwuJHZpZXdWYWx1ZSkgPyAnJyA6IGN0cmwuJHZpZXdWYWx1ZSk7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gd2Vla1BhcnNlcihpc29XZWVrLCBleGlzdGluZ0RhdGUpIHtcclxuICBpZiAoaXNEYXRlKGlzb1dlZWspKSB7XHJcbiAgICByZXR1cm4gaXNvV2VlaztcclxuICB9XHJcblxyXG4gIGlmIChpc1N0cmluZyhpc29XZWVrKSkge1xyXG4gICAgV0VFS19SRUdFWFAubGFzdEluZGV4ID0gMDtcclxuICAgIHZhciBwYXJ0cyA9IFdFRUtfUkVHRVhQLmV4ZWMoaXNvV2Vlayk7XHJcbiAgICBpZiAocGFydHMpIHtcclxuICAgICAgdmFyIHllYXIgPSArcGFydHNbMV0sXHJcbiAgICAgICAgICB3ZWVrID0gK3BhcnRzWzJdLFxyXG4gICAgICAgICAgaG91cnMgPSAwLFxyXG4gICAgICAgICAgbWludXRlcyA9IDAsXHJcbiAgICAgICAgICBzZWNvbmRzID0gMCxcclxuICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IDAsXHJcbiAgICAgICAgICBmaXJzdFRodXJzID0gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcih5ZWFyKSxcclxuICAgICAgICAgIGFkZERheXMgPSAod2VlayAtIDEpICogNztcclxuXHJcbiAgICAgIGlmIChleGlzdGluZ0RhdGUpIHtcclxuICAgICAgICBob3VycyA9IGV4aXN0aW5nRGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgIG1pbnV0ZXMgPSBleGlzdGluZ0RhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIHNlY29uZHMgPSBleGlzdGluZ0RhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIG1pbGxpc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsIGZpcnN0VGh1cnMuZ2V0RGF0ZSgpICsgYWRkRGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gTmFOO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVEYXRlUGFyc2VyKHJlZ2V4cCwgbWFwcGluZykge1xyXG4gIHJldHVybiBmdW5jdGlvbihpc28sIGRhdGUpIHtcclxuICAgIHZhciBwYXJ0cywgbWFwO1xyXG5cclxuICAgIGlmIChpc0RhdGUoaXNvKSkge1xyXG4gICAgICByZXR1cm4gaXNvO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc1N0cmluZyhpc28pKSB7XHJcbiAgICAgIC8vIFdoZW4gYSBkYXRlIGlzIEpTT04naWZpZWQgdG8gd3JhcHMgaXRzZWxmIGluc2lkZSBvZiBhbiBleHRyYVxyXG4gICAgICAvLyBzZXQgb2YgZG91YmxlIHF1b3Rlcy4gVGhpcyBtYWtlcyB0aGUgZGF0ZSBwYXJzaW5nIGNvZGUgdW5hYmxlXHJcbiAgICAgIC8vIHRvIG1hdGNoIHRoZSBkYXRlIHN0cmluZyBhbmQgcGFyc2UgaXQgYXMgYSBkYXRlLlxyXG4gICAgICBpZiAoaXNvLmNoYXJBdCgwKSA9PSAnXCInICYmIGlzby5jaGFyQXQoaXNvLmxlbmd0aCAtIDEpID09ICdcIicpIHtcclxuICAgICAgICBpc28gPSBpc28uc3Vic3RyaW5nKDEsIGlzby5sZW5ndGggLSAxKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoSVNPX0RBVEVfUkVHRVhQLnRlc3QoaXNvKSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShpc28pO1xyXG4gICAgICB9XHJcbiAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSAwO1xyXG4gICAgICBwYXJ0cyA9IHJlZ2V4cC5leGVjKGlzbyk7XHJcblxyXG4gICAgICBpZiAocGFydHMpIHtcclxuICAgICAgICBwYXJ0cy5zaGlmdCgpO1xyXG4gICAgICAgIGlmIChkYXRlKSB7XHJcbiAgICAgICAgICBtYXAgPSB7XHJcbiAgICAgICAgICAgIHl5eXk6IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgTU06IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgIGRkOiBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgSEg6IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgbW06IGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICBzczogZGF0ZS5nZXRTZWNvbmRzKCksXHJcbiAgICAgICAgICAgIHNzczogZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAvIDEwMDBcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG1hcCA9IHsgeXl5eTogMTk3MCwgTU06IDEsIGRkOiAxLCBISDogMCwgbW06IDAsIHNzOiAwLCBzc3M6IDAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvckVhY2gocGFydHMsIGZ1bmN0aW9uKHBhcnQsIGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPCBtYXBwaW5nLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBtYXBbbWFwcGluZ1tpbmRleF1dID0gK3BhcnQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG1hcC55eXl5LCBtYXAuTU0gLSAxLCBtYXAuZGQsIG1hcC5ISCwgbWFwLm1tLCBtYXAuc3MgfHwgMCwgbWFwLnNzcyAqIDEwMDAgfHwgMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmFOO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZURhdGVJbnB1dFR5cGUodHlwZSwgcmVnZXhwLCBwYXJzZURhdGUsIGZvcm1hdCkge1xyXG4gIHJldHVybiBmdW5jdGlvbiBkeW5hbWljRGF0ZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyKSB7XHJcbiAgICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpO1xyXG4gICAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcclxuICAgIHZhciB0aW1lem9uZSA9IGN0cmwgJiYgY3RybC4kb3B0aW9ucyAmJiBjdHJsLiRvcHRpb25zLnRpbWV6b25lO1xyXG4gICAgdmFyIHByZXZpb3VzRGF0ZTtcclxuXHJcbiAgICBjdHJsLiQkcGFyc2VyTmFtZSA9IHR5cGU7XHJcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgaWYgKGN0cmwuJGlzRW1wdHkodmFsdWUpKSByZXR1cm4gbnVsbDtcclxuICAgICAgaWYgKHJlZ2V4cC50ZXN0KHZhbHVlKSkge1xyXG4gICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCByZWFkIGN0cmwuJG1vZGVsVmFsdWUsIGFzIHRoZXJlIG1pZ2h0IGJlIGEgZGlmZmVyZW50XHJcbiAgICAgICAgLy8gcGFyc2VyL2Zvcm1hdHRlciBpbiB0aGUgcHJvY2Vzc2luZyBjaGFpbiBzbyB0aGF0IHRoZSBtb2RlbFxyXG4gICAgICAgIC8vIGNvbnRhaW5zIHNvbWUgZGlmZmVyZW50IGRhdGEgZm9ybWF0IVxyXG4gICAgICAgIHZhciBwYXJzZWREYXRlID0gcGFyc2VEYXRlKHZhbHVlLCBwcmV2aW91c0RhdGUpO1xyXG4gICAgICAgIGlmICh0aW1lem9uZSA9PT0gJ1VUQycpIHtcclxuICAgICAgICAgIHBhcnNlZERhdGUuc2V0TWludXRlcyhwYXJzZWREYXRlLmdldE1pbnV0ZXMoKSAtIHBhcnNlZERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXJzZWREYXRlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgaWYgKHZhbHVlICYmICFpc0RhdGUodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgJG5nTW9kZWxNaW5FcnIoJ2RhdGVmbXQnLCAnRXhwZWN0ZWQgYHswfWAgdG8gYmUgYSBkYXRlJywgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc1ZhbGlkRGF0ZSh2YWx1ZSkpIHtcclxuICAgICAgICBwcmV2aW91c0RhdGUgPSB2YWx1ZTtcclxuICAgICAgICBpZiAocHJldmlvdXNEYXRlICYmIHRpbWV6b25lID09PSAnVVRDJykge1xyXG4gICAgICAgICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gNjAwMDAgKiBwcmV2aW91c0RhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcclxuICAgICAgICAgIHByZXZpb3VzRGF0ZSA9IG5ldyBEYXRlKHByZXZpb3VzRGF0ZS5nZXRUaW1lKCkgKyB0aW1lem9uZU9mZnNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAkZmlsdGVyKCdkYXRlJykodmFsdWUsIGZvcm1hdCwgdGltZXpvbmUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoaXNEZWZpbmVkKGF0dHIubWluKSB8fCBhdHRyLm5nTWluKSB7XHJcbiAgICAgIHZhciBtaW5WYWw7XHJcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWluID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gIWlzVmFsaWREYXRlKHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHBhcnNlRGF0ZSh2YWx1ZSkgPj0gbWluVmFsO1xyXG4gICAgICB9O1xyXG4gICAgICBhdHRyLiRvYnNlcnZlKCdtaW4nLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBtaW5WYWwgPSBwYXJzZU9ic2VydmVkRGF0ZVZhbHVlKHZhbCk7XHJcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzRGVmaW5lZChhdHRyLm1heCkgfHwgYXR0ci5uZ01heCkge1xyXG4gICAgICB2YXIgbWF4VmFsO1xyXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc1ZhbGlkRGF0ZSh2YWx1ZSkgfHwgaXNVbmRlZmluZWQobWF4VmFsKSB8fCBwYXJzZURhdGUodmFsdWUpIDw9IG1heFZhbDtcclxuICAgICAgfTtcclxuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgbWF4VmFsID0gcGFyc2VPYnNlcnZlZERhdGVWYWx1ZSh2YWwpO1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmFsaWREYXRlKHZhbHVlKSB7XHJcbiAgICAgIC8vIEludmFsaWQgRGF0ZTogZ2V0VGltZSgpIHJldHVybnMgTmFOXHJcbiAgICAgIHJldHVybiB2YWx1ZSAmJiAhKHZhbHVlLmdldFRpbWUgJiYgdmFsdWUuZ2V0VGltZSgpICE9PSB2YWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKSB7XHJcbiAgICAgIHJldHVybiBpc0RlZmluZWQodmFsKSA/IChpc0RhdGUodmFsKSA/IHZhbCA6IHBhcnNlRGF0ZSh2YWwpKSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XHJcbiAgdmFyIG5hdGl2ZVZhbGlkYXRpb24gPSBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyA9IGlzT2JqZWN0KG5vZGUudmFsaWRpdHkpO1xyXG4gIGlmIChuYXRpdmVWYWxpZGF0aW9uKSB7XHJcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgdmFyIHZhbGlkaXR5ID0gZWxlbWVudC5wcm9wKFZBTElESVRZX1NUQVRFX1BST1BFUlRZKSB8fCB7fTtcclxuICAgICAgLy8gRGV0ZWN0IGJ1ZyBpbiBGRjM1IGZvciBpbnB1dFtlbWFpbF0gKGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEwNjQ0MzApOlxyXG4gICAgICAvLyAtIGFsc28gc2V0cyB2YWxpZGl0eS5iYWRJbnB1dCAoc2hvdWxkIG9ubHkgYmUgdmFsaWRpdHkudHlwZU1pc21hdGNoKS5cclxuICAgICAgLy8gLSBzZWUgaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNlLW1haWwtc3RhdGUtKHR5cGU9ZW1haWwpXHJcbiAgICAgIC8vIC0gY2FuIGlnbm9yZSB0aGlzIGNhc2UgYXMgd2UgY2FuIHN0aWxsIHJlYWQgb3V0IHRoZSBlcnJvbmVvdXMgZW1haWwuLi5cclxuICAgICAgcmV0dXJuIHZhbGlkaXR5LmJhZElucHV0ICYmICF2YWxpZGl0eS50eXBlTWlzbWF0Y2ggPyB1bmRlZmluZWQgOiB2YWx1ZTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbnVtYmVySW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpO1xyXG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XHJcblxyXG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ251bWJlcic7XHJcbiAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAoY3RybC4kaXNFbXB0eSh2YWx1ZSkpICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAoTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9KTtcclxuXHJcbiAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAoIWN0cmwuJGlzRW1wdHkodmFsdWUpKSB7XHJcbiAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgJG5nTW9kZWxNaW5FcnIoJ251bWZtdCcsICdFeHBlY3RlZCBgezB9YCB0byBiZSBhIG51bWJlcicsIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIGlmIChpc0RlZmluZWQoYXR0ci5taW4pIHx8IGF0dHIubmdNaW4pIHtcclxuICAgIHZhciBtaW5WYWw7XHJcbiAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHZhbHVlID49IG1pblZhbDtcclxuICAgIH07XHJcblxyXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWluJywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgIGlmIChpc0RlZmluZWQodmFsKSAmJiAhaXNOdW1iZXIodmFsKSkge1xyXG4gICAgICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsLCAxMCk7XHJcbiAgICAgIH1cclxuICAgICAgbWluVmFsID0gaXNOdW1iZXIodmFsKSAmJiAhaXNOYU4odmFsKSA/IHZhbCA6IHVuZGVmaW5lZDtcclxuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXHJcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGlmIChpc0RlZmluZWQoYXR0ci5tYXgpIHx8IGF0dHIubmdNYXgpIHtcclxuICAgIHZhciBtYXhWYWw7XHJcbiAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtYXhWYWwpIHx8IHZhbHVlIDw9IG1heFZhbDtcclxuICAgIH07XHJcblxyXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgIGlmIChpc0RlZmluZWQodmFsKSAmJiAhaXNOdW1iZXIodmFsKSkge1xyXG4gICAgICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsLCAxMCk7XHJcbiAgICAgIH1cclxuICAgICAgbWF4VmFsID0gaXNOdW1iZXIodmFsKSAmJiAhaXNOYU4odmFsKSA/IHZhbCA6IHVuZGVmaW5lZDtcclxuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXHJcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVybElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XHJcbiAgLy8gTm90ZTogbm8gYmFkSW5wdXRDaGVja2VyIGhlcmUgYnkgcHVycG9zZSBhcyBgdXJsYCBpcyBvbmx5IGEgdmFsaWRhdGlvblxyXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXHJcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcclxuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcclxuXHJcbiAgY3RybC4kJHBhcnNlck5hbWUgPSAndXJsJztcclxuICBjdHJsLiR2YWxpZGF0b3JzLnVybCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG4gICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XHJcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgVVJMX1JFR0VYUC50ZXN0KHZhbHVlKTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWFpbElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XHJcbiAgLy8gTm90ZTogbm8gYmFkSW5wdXRDaGVja2VyIGhlcmUgYnkgcHVycG9zZSBhcyBgdXJsYCBpcyBvbmx5IGEgdmFsaWRhdGlvblxyXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXHJcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcclxuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcclxuXHJcbiAgY3RybC4kJHBhcnNlck5hbWUgPSAnZW1haWwnO1xyXG4gIGN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcclxuICAgIHZhciB2YWx1ZSA9IG1vZGVsVmFsdWUgfHwgdmlld1ZhbHVlO1xyXG4gICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IEVNQUlMX1JFR0VYUC50ZXN0KHZhbHVlKTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiByYWRpb0lucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xyXG4gIC8vIG1ha2UgdGhlIG5hbWUgdW5pcXVlLCBpZiBub3QgZGVmaW5lZFxyXG4gIGlmIChpc1VuZGVmaW5lZChhdHRyLm5hbWUpKSB7XHJcbiAgICBlbGVtZW50LmF0dHIoJ25hbWUnLCBuZXh0VWlkKCkpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgIGlmIChlbGVtZW50WzBdLmNoZWNrZWQpIHtcclxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGF0dHIudmFsdWUsIGV2ICYmIGV2LnR5cGUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGVsZW1lbnQub24oJ2NsaWNrJywgbGlzdGVuZXIpO1xyXG5cclxuICBjdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB2YWx1ZSA9IGF0dHIudmFsdWU7XHJcbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSAodmFsdWUgPT0gY3RybC4kdmlld1ZhbHVlKTtcclxuICB9O1xyXG5cclxuICBhdHRyLiRvYnNlcnZlKCd2YWx1ZScsIGN0cmwuJHJlbmRlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgY29udGV4dCwgbmFtZSwgZXhwcmVzc2lvbiwgZmFsbGJhY2spIHtcclxuICB2YXIgcGFyc2VGbjtcclxuICBpZiAoaXNEZWZpbmVkKGV4cHJlc3Npb24pKSB7XHJcbiAgICBwYXJzZUZuID0gJHBhcnNlKGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKCFwYXJzZUZuLmNvbnN0YW50KSB7XHJcbiAgICAgIHRocm93IG1pbkVycignbmdNb2RlbCcpKCdjb25zdGV4cHInLCAnRXhwZWN0ZWQgY29uc3RhbnQgZXhwcmVzc2lvbiBmb3IgYHswfWAsIGJ1dCBzYXcgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2B7MX1gLicsIG5hbWUsIGV4cHJlc3Npb24pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlRm4oY29udGV4dCk7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxsYmFjaztcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tib3hJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3NlciwgJGZpbHRlciwgJHBhcnNlKSB7XHJcbiAgdmFyIHRydWVWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ1RydWVWYWx1ZScsIGF0dHIubmdUcnVlVmFsdWUsIHRydWUpO1xyXG4gIHZhciBmYWxzZVZhbHVlID0gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBzY29wZSwgJ25nRmFsc2VWYWx1ZScsIGF0dHIubmdGYWxzZVZhbHVlLCBmYWxzZSk7XHJcblxyXG4gIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICBjdHJsLiRzZXRWaWV3VmFsdWUoZWxlbWVudFswXS5jaGVja2VkLCBldiAmJiBldi50eXBlKTtcclxuICB9O1xyXG5cclxuICBlbGVtZW50Lm9uKCdjbGljaycsIGxpc3RlbmVyKTtcclxuXHJcbiAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSBjdHJsLiR2aWV3VmFsdWU7XHJcbiAgfTtcclxuXHJcbiAgLy8gT3ZlcnJpZGUgdGhlIHN0YW5kYXJkIGAkaXNFbXB0eWAgYmVjYXVzZSB0aGUgJHZpZXdWYWx1ZSBvZiBhbiBlbXB0eSBjaGVja2JveCBpcyBhbHdheXMgc2V0IHRvIGBmYWxzZWBcclxuICAvLyBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIHBhcnNlciBiZWxvdywgd2hpY2ggY29tcGFyZXMgdGhlIGAkbW9kZWxWYWx1ZWAgd2l0aCBgdHJ1ZVZhbHVlYCB0byBjb252ZXJ0XHJcbiAgLy8gaXQgdG8gYSBib29sZWFuLlxyXG4gIGN0cmwuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlID09PSBmYWxzZTtcclxuICB9O1xyXG5cclxuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiBlcXVhbHModmFsdWUsIHRydWVWYWx1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlID8gdHJ1ZVZhbHVlIDogZmFsc2VWYWx1ZTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIHRleHRhcmVhXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBIVE1MIHRleHRhcmVhIGVsZW1lbnQgY29udHJvbCB3aXRoIGFuZ3VsYXIgZGF0YS1iaW5kaW5nLiBUaGUgZGF0YS1iaW5kaW5nIGFuZCB2YWxpZGF0aW9uXHJcbiAqIHByb3BlcnRpZXMgb2YgdGhpcyBlbGVtZW50IGFyZSBleGFjdGx5IHRoZSBzYW1lIGFzIHRob3NlIG9mIHRoZVxyXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOmlucHV0IGlucHV0IGVsZW1lbnR9LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXHJcbiAqICAgIG1pbmxlbmd0aC5cclxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2YgYW55XHJcbiAqICAgIGxlbmd0aC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZVxyXG4gKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAqICAgIHBhdHRlcm5zIGRlZmluZWQgYXMgc2NvcGUgZXhwcmVzc2lvbnMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFyIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgdHJpbSB0aGUgaW5wdXQuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIGlucHV0XHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBIVE1MIGlucHV0IGVsZW1lbnQgY29udHJvbC4gV2hlbiB1c2VkIHRvZ2V0aGVyIHdpdGgge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSwgaXQgcHJvdmlkZXMgZGF0YS1iaW5kaW5nLFxyXG4gKiBpbnB1dCBzdGF0ZSBjb250cm9sLCBhbmQgdmFsaWRhdGlvbi5cclxuICogSW5wdXQgY29udHJvbCBmb2xsb3dzIEhUTUw1IGlucHV0IHR5cGVzIGFuZCBwb2x5ZmlsbHMgdGhlIEhUTUw1IHZhbGlkYXRpb24gYmVoYXZpb3IgZm9yIG9sZGVyIGJyb3dzZXJzLlxyXG4gKlxyXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gKiAqKk5vdGU6KiogTm90IGV2ZXJ5IGZlYXR1cmUgb2ZmZXJlZCBpcyBhdmFpbGFibGUgZm9yIGFsbCBpbnB1dCB0eXBlcy5cclxuICogU3BlY2lmaWNhbGx5LCBkYXRhIGJpbmRpbmcgYW5kIGV2ZW50IGhhbmRsaW5nIHZpYSBgbmctbW9kZWxgIGlzIHVuc3VwcG9ydGVkIGZvciBgaW5wdXRbZmlsZV1gLlxyXG4gKiA8L2Rpdj5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cclxuICogQHBhcmFtIHtib29sZWFuPX0gbmdSZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGlmIHNldCB0byB0cnVlXHJcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXHJcbiAqICAgIG1pbmxlbmd0aC5cclxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxyXG4gKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2YgYW55XHJcbiAqICAgIGxlbmd0aC5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZVxyXG4gKiAgICBSZWdFeHAgcGF0dGVybiBleHByZXNzaW9uLiBFeHBlY3RlZCB2YWx1ZSBpcyBgL3JlZ2V4cC9gIGZvciBpbmxpbmUgcGF0dGVybnMgb3IgYHJlZ2V4cGAgZm9yXHJcbiAqICAgIHBhdHRlcm5zIGRlZmluZWQgYXMgc2NvcGUgZXhwcmVzc2lvbnMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFyIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgdHJpbSB0aGUgaW5wdXQuXHJcbiAqICAgIFRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQgZm9yIGlucHV0W3R5cGU9cGFzc3dvcmRdIGNvbnRyb2xzLCB3aGljaCB3aWxsIG5ldmVyIHRyaW0gdGhlXHJcbiAqICAgIGlucHV0LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbmFtZT1cImlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImlucHV0RXhhbXBsZVwiPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdpbnB1dEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUudXNlciA9IHtuYW1lOiAnZ3Vlc3QnLCBsYXN0OiAndmlzaXRvcid9O1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cclxuICAgICAgICAgICBVc2VyIG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiIG5nLW1vZGVsPVwidXNlci5uYW1lXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0udXNlck5hbWUuJGVycm9yLnJlcXVpcmVkXCI+XHJcbiAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+PGJyPlxyXG4gICAgICAgICAgIExhc3QgbmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImxhc3ROYW1lXCIgbmctbW9kZWw9XCJ1c2VyLmxhc3RcIlxyXG4gICAgICAgICAgICAgbmctbWlubGVuZ3RoPVwiM1wiIG5nLW1heGxlbmd0aD1cIjEwXCI+XHJcbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubGFzdE5hbWUuJGVycm9yLm1pbmxlbmd0aFwiPlxyXG4gICAgICAgICAgICAgVG9vIHNob3J0ITwvc3Bhbj5cclxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IubWF4bGVuZ3RoXCI+XHJcbiAgICAgICAgICAgICBUb28gbG9uZyE8L3NwYW4+PGJyPlxyXG4gICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgIDxocj5cclxuICAgICAgICAgPHR0PnVzZXIgPSB7e3VzZXJ9fTwvdHQ+PGJyLz5cclxuICAgICAgICAgPHR0Pm15Rm9ybS51c2VyTmFtZS4kdmFsaWQgPSB7e215Rm9ybS51c2VyTmFtZS4kdmFsaWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLnVzZXJOYW1lLiRlcnJvciA9IHt7bXlGb3JtLnVzZXJOYW1lLiRlcnJvcn19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0ubGFzdE5hbWUuJHZhbGlkID0ge3tteUZvcm0ubGFzdE5hbWUuJHZhbGlkfX08L3R0Pjxicj5cclxuICAgICAgICAgPHR0Pm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IgPSB7e215Rm9ybS5sYXN0TmFtZS4kZXJyb3J9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnI+XHJcbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5taW5sZW5ndGggPSB7eyEhbXlGb3JtLiRlcnJvci5taW5sZW5ndGh9fTwvdHQ+PGJyPlxyXG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5tYXhsZW5ndGggPSB7eyEhbXlGb3JtLiRlcnJvci5tYXhsZW5ndGh9fTwvdHQ+PGJyPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIHZhciB1c2VyID0gZWxlbWVudChieS5leGFjdEJpbmRpbmcoJ3VzZXInKSk7XHJcbiAgICAgICAgdmFyIHVzZXJOYW1lVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS51c2VyTmFtZS4kdmFsaWQnKSk7XHJcbiAgICAgICAgdmFyIGxhc3ROYW1lVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kdmFsaWQnKSk7XHJcbiAgICAgICAgdmFyIGxhc3ROYW1lRXJyb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kZXJyb3InKSk7XHJcbiAgICAgICAgdmFyIGZvcm1WYWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLiR2YWxpZCcpKTtcclxuICAgICAgICB2YXIgdXNlck5hbWVJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubmFtZScpKTtcclxuICAgICAgICB2YXIgdXNlckxhc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubGFzdCcpKTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIixcImxhc3RcIjpcInZpc2l0b3JcIn0nKTtcclxuICAgICAgICAgIGV4cGVjdCh1c2VyTmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eSB3aGVuIHJlcXVpcmVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB1c2VyTmFtZUlucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICB1c2VyTmFtZUlucHV0LnNlbmRLZXlzKCcnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibGFzdFwiOlwidmlzaXRvclwifScpO1xyXG4gICAgICAgICAgZXhwZWN0KHVzZXJOYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIHZhbGlkIGlmIGVtcHR5IHdoZW4gbWluIGxlbmd0aCBpcyBzZXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJycpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwiLFwibGFzdFwiOlwiXCJ9Jyk7XHJcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbGVzcyB0aGFuIHJlcXVpcmVkIG1pbiBsZW5ndGgnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJ3h4Jyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCJ9Jyk7XHJcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZUVycm9yLmdldFRleHQoKSkudG9Db250YWluKCdtaW5sZW5ndGgnKTtcclxuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBsb25nZXIgdGhhbiBtYXggbGVuZ3RoJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCdzb21lIHJpZGljdWxvdXNseSBsb25nIG5hbWUnKTtcclxuXHJcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIn0nKTtcclxuICAgICAgICAgIGV4cGVjdChsYXN0TmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xyXG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lRXJyb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ21heGxlbmd0aCcpO1xyXG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIGlucHV0RGlyZWN0aXZlID0gWyckYnJvd3NlcicsICckc25pZmZlcicsICckZmlsdGVyJywgJyRwYXJzZScsXHJcbiAgICBmdW5jdGlvbigkYnJvd3NlciwgJHNuaWZmZXIsICRmaWx0ZXIsICRwYXJzZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgcmVxdWlyZTogWyc/bmdNb2RlbCddLFxyXG4gICAgbGluazoge1xyXG4gICAgICBwcmU6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xyXG4gICAgICAgIGlmIChjdHJsc1swXSkge1xyXG4gICAgICAgICAgKGlucHV0VHlwZVtsb3dlcmNhc2UoYXR0ci50eXBlKV0gfHwgaW5wdXRUeXBlLnRleHQpKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsc1swXSwgJHNuaWZmZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJyb3dzZXIsICRmaWx0ZXIsICRwYXJzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG5cclxuXHJcbnZhciBDT05TVEFOVF9WQUxVRV9SRUdFWFAgPSAvXih0cnVlfGZhbHNlfFxcZCspJC87XHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nVmFsdWVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEJpbmRzIHRoZSBnaXZlbiBleHByZXNzaW9uIHRvIHRoZSB2YWx1ZSBvZiBgPG9wdGlvbj5gIG9yIHtAbGluayBpbnB1dFtyYWRpb10gYGlucHV0W3JhZGlvXWB9LFxyXG4gKiBzbyB0aGF0IHdoZW4gdGhlIGVsZW1lbnQgaXMgc2VsZWN0ZWQsIHRoZSB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9IG9mIHRoYXQgZWxlbWVudCBpcyBzZXQgdG9cclxuICogdGhlIGJvdW5kIHZhbHVlLlxyXG4gKlxyXG4gKiBgbmdWYWx1ZWAgaXMgdXNlZnVsIHdoZW4gZHluYW1pY2FsbHkgZ2VuZXJhdGluZyBsaXN0cyBvZiByYWRpbyBidXR0b25zIHVzaW5nXHJcbiAqIHtAbGluayBuZ1JlcGVhdCBgbmdSZXBlYXRgfSwgYXMgc2hvd24gYmVsb3cuXHJcbiAqXHJcbiAqIExpa2V3aXNlLCBgbmdWYWx1ZWAgY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgYDxvcHRpb24+YCBlbGVtZW50cyBmb3JcclxuICogdGhlIHtAbGluayBzZWxlY3QgYHNlbGVjdGB9IGVsZW1lbnQuIEluIHRoYXQgY2FzZSBob3dldmVyLCBvbmx5IHN0cmluZ3MgYXJlIHN1cHBvcnRlZFxyXG4gKiBmb3IgdGhlIGB2YWx1ZSBgYXR0cmlidXRlLCBzbyB0aGUgcmVzdWx0aW5nIGBuZ01vZGVsYCB3aWxsIGFsd2F5cyBiZSBhIHN0cmluZy5cclxuICogU3VwcG9ydCBmb3IgYHNlbGVjdGAgbW9kZWxzIHdpdGggbm9uLXN0cmluZyB2YWx1ZXMgaXMgYXZhaWxhYmxlIHZpYSBgbmdPcHRpb25zYC5cclxuICpcclxuICogQGVsZW1lbnQgaW5wdXRcclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1ZhbHVlIGFuZ3VsYXIgZXhwcmVzc2lvbiwgd2hvc2UgdmFsdWUgd2lsbCBiZSBib3VuZCB0byB0aGUgYHZhbHVlYCBhdHRyaWJ1dGVcclxuICogICBvZiB0aGUgYGlucHV0YCBlbGVtZW50XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmdWYWx1ZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ2YWx1ZUV4YW1wbGVcIj5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndmFsdWVFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydwaXp6YScsICd1bmljb3JucycsICdyb2JvdHMnXTtcclxuICAgICAgICAgICAgICAkc2NvcGUubXkgPSB7IGZhdm9yaXRlOiAndW5pY29ybnMnIH07XHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgIDxmb3JtIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgPGgyPldoaWNoIGlzIHlvdXIgZmF2b3JpdGU/PC9oMj5cclxuICAgICAgICAgICAgPGxhYmVsIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIiBmb3I9XCJ7e25hbWV9fVwiPlxyXG4gICAgICAgICAgICAgIHt7bmFtZX19XHJcbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiXHJcbiAgICAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwibXkuZmF2b3JpdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICBuZy12YWx1ZT1cIm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICBpZD1cInt7bmFtZX19XCJcclxuICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImZhdm9yaXRlXCI+XHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICA8ZGl2PllvdSBjaG9zZSB7e215LmZhdm9yaXRlfX08L2Rpdj5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIHZhciBmYXZvcml0ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnbXkuZmF2b3JpdGUnKSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZXhwZWN0KGZhdm9yaXRlLmdldFRleHQoKSkudG9Db250YWluKCd1bmljb3JucycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGl0KCdzaG91bGQgYmluZCB0aGUgdmFsdWVzIHRvIHRoZSBpbnB1dHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdteS5mYXZvcml0ZScpKS5nZXQoMCkuY2xpY2soKTtcclxuICAgICAgICAgIGV4cGVjdChmYXZvcml0ZS5nZXRUZXh0KCkpLnRvQ29udGFpbigncGl6emEnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nVmFsdWVEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbih0cGwsIHRwbEF0dHIpIHtcclxuICAgICAgaWYgKENPTlNUQU5UX1ZBTFVFX1JFR0VYUC50ZXN0KHRwbEF0dHIubmdWYWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUNvbnN0YW50TGluayhzY29wZSwgZWxtLCBhdHRyKSB7XHJcbiAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgc2NvcGUuJGV2YWwoYXR0ci5uZ1ZhbHVlKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUxpbmsoc2NvcGUsIGVsbSwgYXR0cikge1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdWYWx1ZSwgZnVuY3Rpb24gdmFsdWVXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgdmFsdWUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0JpbmRcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQmluZGAgYXR0cmlidXRlIHRlbGxzIEFuZ3VsYXIgdG8gcmVwbGFjZSB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBzcGVjaWZpZWQgSFRNTCBlbGVtZW50XHJcbiAqIHdpdGggdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gZXhwcmVzc2lvbiwgYW5kIHRvIHVwZGF0ZSB0aGUgdGV4dCBjb250ZW50IHdoZW4gdGhlIHZhbHVlIG9mIHRoYXRcclxuICogZXhwcmVzc2lvbiBjaGFuZ2VzLlxyXG4gKlxyXG4gKiBUeXBpY2FsbHksIHlvdSBkb24ndCB1c2UgYG5nQmluZGAgZGlyZWN0bHksIGJ1dCBpbnN0ZWFkIHlvdSB1c2UgdGhlIGRvdWJsZSBjdXJseSBtYXJrdXAgbGlrZVxyXG4gKiBge3sgZXhwcmVzc2lvbiB9fWAgd2hpY2ggaXMgc2ltaWxhciBidXQgbGVzcyB2ZXJib3NlLlxyXG4gKlxyXG4gKiBJdCBpcyBwcmVmZXJhYmxlIHRvIHVzZSBgbmdCaW5kYCBpbnN0ZWFkIG9mIGB7eyBleHByZXNzaW9uIH19YCBpZiBhIHRlbXBsYXRlIGlzIG1vbWVudGFyaWx5XHJcbiAqIGRpc3BsYXllZCBieSB0aGUgYnJvd3NlciBpbiBpdHMgcmF3IHN0YXRlIGJlZm9yZSBBbmd1bGFyIGNvbXBpbGVzIGl0LiBTaW5jZSBgbmdCaW5kYCBpcyBhblxyXG4gKiBlbGVtZW50IGF0dHJpYnV0ZSwgaXQgbWFrZXMgdGhlIGJpbmRpbmdzIGludmlzaWJsZSB0byB0aGUgdXNlciB3aGlsZSB0aGUgcGFnZSBpcyBsb2FkaW5nLlxyXG4gKlxyXG4gKiBBbiBhbHRlcm5hdGl2ZSBzb2x1dGlvbiB0byB0aGlzIHByb2JsZW0gd291bGQgYmUgdXNpbmcgdGhlXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbG9hayBuZ0Nsb2FrfSBkaXJlY3RpdmUuXHJcbiAqXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmluZCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogRW50ZXIgYSBuYW1lIGluIHRoZSBMaXZlIFByZXZpZXcgdGV4dCBib3g7IHRoZSBncmVldGluZyBiZWxvdyB0aGUgdGV4dCBib3ggY2hhbmdlcyBpbnN0YW50bHkuXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICdXaGlybGVkJztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIEVudGVyIG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjxicj5cclxuICAgICAgICAgSGVsbG8gPHNwYW4gbmctYmluZD1cIm5hbWVcIj48L3NwYW4+IVxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcclxuXHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ25hbWUnKSkuZ2V0VGV4dCgpKS50b0JlKCdXaGlybGVkJyk7XHJcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3dvcmxkJyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ25hbWUnKSkuZ2V0VGV4dCgpKS50b0JlKCd3b3JsZCcpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdCaW5kRGlyZWN0aXZlID0gWyckY29tcGlsZScsIGZ1bmN0aW9uKCRjb21waWxlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQUMnLFxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcclxuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVFbGVtZW50KTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKGVsZW1lbnQsIGF0dHIubmdCaW5kKTtcclxuICAgICAgICBlbGVtZW50ID0gZWxlbWVudFswXTtcclxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0JpbmQsIGZ1bmN0aW9uIG5nQmluZFdhdGNoQWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/ICcnIDogdmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdCaW5kVGVtcGxhdGVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdCaW5kVGVtcGxhdGVgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgdGhhdCB0aGUgZWxlbWVudFxyXG4gKiB0ZXh0IGNvbnRlbnQgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggdGhlIGludGVycG9sYXRpb24gb2YgdGhlIHRlbXBsYXRlXHJcbiAqIGluIHRoZSBgbmdCaW5kVGVtcGxhdGVgIGF0dHJpYnV0ZS5cclxuICogVW5saWtlIGBuZ0JpbmRgLCB0aGUgYG5nQmluZFRlbXBsYXRlYCBjYW4gY29udGFpbiBtdWx0aXBsZSBge3tgIGB9fWBcclxuICogZXhwcmVzc2lvbnMuIFRoaXMgZGlyZWN0aXZlIGlzIG5lZWRlZCBzaW5jZSBzb21lIEhUTUwgZWxlbWVudHNcclxuICogKHN1Y2ggYXMgVElUTEUgYW5kIE9QVElPTikgY2Fubm90IGNvbnRhaW4gU1BBTiBlbGVtZW50cy5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ0JpbmRUZW1wbGF0ZSB0ZW1wbGF0ZSBvZiBmb3JtXHJcbiAqICAgPHR0Pnt7PC90dD4gPHR0PmV4cHJlc3Npb248L3R0PiA8dHQ+fX08L3R0PiB0byBldmFsLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBUcnkgaXQgaGVyZTogZW50ZXIgdGV4dCBpbiB0ZXh0IGJveCBhbmQgd2F0Y2ggdGhlIGdyZWV0aW5nIGNoYW5nZS5cclxuICAgPGV4YW1wbGUgbW9kdWxlPVwiYmluZEV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgICRzY29wZS5zYWx1dGF0aW9uID0gJ0hlbGxvJztcclxuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1dvcmxkJztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgU2FsdXRhdGlvbjogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzYWx1dGF0aW9uXCI+PGJyPlxyXG4gICAgICAgIE5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjxicj5cclxuICAgICAgICA8cHJlIG5nLWJpbmQtdGVtcGxhdGU9XCJ7e3NhbHV0YXRpb259fSB7e25hbWV9fSFcIj48L3ByZT5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWJpbmQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIHNhbHV0YXRpb25FbGVtID0gZWxlbWVudChieS5iaW5kaW5nKCdzYWx1dGF0aW9uJykpO1xyXG4gICAgICAgICB2YXIgc2FsdXRhdGlvbklucHV0ID0gZWxlbWVudChieS5tb2RlbCgnc2FsdXRhdGlvbicpKTtcclxuICAgICAgICAgdmFyIG5hbWVJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ25hbWUnKSk7XHJcblxyXG4gICAgICAgICBleHBlY3Qoc2FsdXRhdGlvbkVsZW0uZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBXb3JsZCEnKTtcclxuXHJcbiAgICAgICAgIHNhbHV0YXRpb25JbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICBzYWx1dGF0aW9uSW5wdXQuc2VuZEtleXMoJ0dyZWV0aW5ncycpO1xyXG4gICAgICAgICBuYW1lSW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd1c2VyJyk7XHJcblxyXG4gICAgICAgICBleHBlY3Qoc2FsdXRhdGlvbkVsZW0uZ2V0VGV4dCgpKS50b0JlKCdHcmVldGluZ3MgdXNlciEnKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlID0gWyckaW50ZXJwb2xhdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkaW50ZXJwb2xhdGUsICRjb21waWxlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZFRlbXBsYXRlQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcclxuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVFbGVtZW50KTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZFRlbXBsYXRlTGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7XHJcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBpbnRlcnBvbGF0ZUZuLmV4cHJlc3Npb25zKTtcclxuICAgICAgICBlbGVtZW50ID0gZWxlbWVudFswXTtcclxuICAgICAgICBhdHRyLiRvYnNlcnZlKCduZ0JpbmRUZW1wbGF0ZScsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/ICcnIDogdmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdCaW5kSHRtbFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRXZhbHVhdGVzIHRoZSBleHByZXNzaW9uIGFuZCBpbnNlcnRzIHRoZSByZXN1bHRpbmcgSFRNTCBpbnRvIHRoZSBlbGVtZW50IGluIGEgc2VjdXJlIHdheS4gQnkgZGVmYXVsdCxcclxuICogdGhlIHJlc3VsdGluZyBIVE1MIGNvbnRlbnQgd2lsbCBiZSBzYW5pdGl6ZWQgdXNpbmcgdGhlIHtAbGluayBuZ1Nhbml0aXplLiRzYW5pdGl6ZSAkc2FuaXRpemV9IHNlcnZpY2UuXHJcbiAqIFRvIHV0aWxpemUgdGhpcyBmdW5jdGlvbmFsaXR5LCBlbnN1cmUgdGhhdCBgJHNhbml0aXplYCBpcyBhdmFpbGFibGUsIGZvciBleGFtcGxlLCBieSBpbmNsdWRpbmcge0BsaW5rXHJcbiAqIG5nU2FuaXRpemV9IGluIHlvdXIgbW9kdWxlJ3MgZGVwZW5kZW5jaWVzIChub3QgaW4gY29yZSBBbmd1bGFyKS4gSW4gb3JkZXIgdG8gdXNlIHtAbGluayBuZ1Nhbml0aXplfVxyXG4gKiBpbiB5b3VyIG1vZHVsZSdzIGRlcGVuZGVuY2llcywgeW91IG5lZWQgdG8gaW5jbHVkZSBcImFuZ3VsYXItc2FuaXRpemUuanNcIiBpbiB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBZb3UgbWF5IGFsc28gYnlwYXNzIHNhbml0aXphdGlvbiBmb3IgdmFsdWVzIHlvdSBrbm93IGFyZSBzYWZlLiBUbyBkbyBzbywgYmluZCB0b1xyXG4gKiBhbiBleHBsaWNpdGx5IHRydXN0ZWQgdmFsdWUgdmlhIHtAbGluayBuZy4kc2NlI3RydXN0QXNIdG1sICRzY2UudHJ1c3RBc0h0bWx9LiAgU2VlIHRoZSBleGFtcGxlXHJcbiAqIHVuZGVyIHtAbGluayBuZy4kc2NlI3Nob3ctbWUtYW4tZXhhbXBsZS11c2luZy1zY2UtIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cclxuICpcclxuICogTm90ZTogSWYgYSBgJHNhbml0aXplYCBzZXJ2aWNlIGlzIHVuYXZhaWxhYmxlIGFuZCB0aGUgYm91bmQgdmFsdWUgaXNuJ3QgZXhwbGljaXRseSB0cnVzdGVkLCB5b3VcclxuICogd2lsbCBoYXZlIGFuIGV4Y2VwdGlvbiAoaW5zdGVhZCBvZiBhbiBleHBsb2l0LilcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCaW5kSHRtbCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRIdG1sRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgPHAgbmctYmluZC1odG1sPVwibXlIVE1MXCI+PC9wPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9maWxlPlxyXG5cclxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnYmluZEh0bWxFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXHJcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgJHNjb3BlLm15SFRNTCA9XHJcbiAgICAgICAgICAgICAgJ0kgYW0gYW4gPGNvZGU+SFRNTDwvY29kZT5zdHJpbmcgd2l0aCAnICtcclxuICAgICAgICAgICAgICAnPGEgaHJlZj1cIiNcIj5saW5rcyE8L2E+IGFuZCBvdGhlciA8ZW0+c3R1ZmY8L2VtPic7XHJcbiAgICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcblxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZC1odG1sJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ215SFRNTCcpKS5nZXRUZXh0KCkpLnRvQmUoXHJcbiAgICAgICAgICAgICAnSSBhbSBhbiBIVE1Mc3RyaW5nIHdpdGggbGlua3MhIGFuZCBvdGhlciBzdHVmZicpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdCaW5kSHRtbERpcmVjdGl2ZSA9IFsnJHNjZScsICckcGFyc2UnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkc2NlLCAkcGFyc2UsICRjb21waWxlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ0JpbmRIdG1sQ29tcGlsZSh0RWxlbWVudCwgdEF0dHJzKSB7XHJcbiAgICAgIHZhciBuZ0JpbmRIdG1sR2V0dGVyID0gJHBhcnNlKHRBdHRycy5uZ0JpbmRIdG1sKTtcclxuICAgICAgdmFyIG5nQmluZEh0bWxXYXRjaCA9ICRwYXJzZSh0QXR0cnMubmdCaW5kSHRtbCwgZnVuY3Rpb24gZ2V0U3RyaW5nVmFsdWUodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKHZhbHVlIHx8ICcnKS50b1N0cmluZygpO1xyXG4gICAgICB9KTtcclxuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModEVsZW1lbnQpO1xyXG5cclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZEh0bWxMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZEh0bWwpO1xyXG5cclxuICAgICAgICBzY29wZS4kd2F0Y2gobmdCaW5kSHRtbFdhdGNoLCBmdW5jdGlvbiBuZ0JpbmRIdG1sV2F0Y2hBY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyB3ZSByZS1ldmFsdWF0ZSB0aGUgZXhwciBiZWNhdXNlIHdlIHdhbnQgYSBUcnVzdGVkVmFsdWVIb2xkZXJUeXBlXHJcbiAgICAgICAgICAvLyBmb3IgJHNjZSwgbm90IGEgc3RyaW5nXHJcbiAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbChuZ0JpbmRIdG1sR2V0dGVyKHNjb3BlKSkgfHwgJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDaGFuZ2VcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEV2YWx1YXRlIHRoZSBnaXZlbiBleHByZXNzaW9uIHdoZW4gdGhlIHVzZXIgY2hhbmdlcyB0aGUgaW5wdXQuXHJcbiAqIFRoZSBleHByZXNzaW9uIGlzIGV2YWx1YXRlZCBpbW1lZGlhdGVseSwgdW5saWtlIHRoZSBKYXZhU2NyaXB0IG9uY2hhbmdlIGV2ZW50XHJcbiAqIHdoaWNoIG9ubHkgdHJpZ2dlcnMgYXQgdGhlIGVuZCBvZiBhIGNoYW5nZSAodXN1YWxseSwgd2hlbiB0aGUgdXNlciBsZWF2ZXMgdGhlXHJcbiAqIGZvcm0gZWxlbWVudCBvciBwcmVzc2VzIHRoZSByZXR1cm4ga2V5KS5cclxuICpcclxuICogVGhlIGBuZ0NoYW5nZWAgZXhwcmVzc2lvbiBpcyBvbmx5IGV2YWx1YXRlZCB3aGVuIGEgY2hhbmdlIGluIHRoZSBpbnB1dCB2YWx1ZSBjYXVzZXNcclxuICogYSBuZXcgdmFsdWUgdG8gYmUgY29tbWl0dGVkIHRvIHRoZSBtb2RlbC5cclxuICpcclxuICogSXQgd2lsbCBub3QgYmUgZXZhbHVhdGVkOlxyXG4gKiAqIGlmIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBgJHBhcnNlcnNgIHRyYW5zZm9ybWF0aW9uIHBpcGVsaW5lIGhhcyBub3QgY2hhbmdlZFxyXG4gKiAqIGlmIHRoZSBpbnB1dCBoYXMgY29udGludWVkIHRvIGJlIGludmFsaWQgc2luY2UgdGhlIG1vZGVsIHdpbGwgc3RheSBgbnVsbGBcclxuICogKiBpZiB0aGUgbW9kZWwgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IGFuZCBub3QgYnkgYSBjaGFuZ2UgdG8gdGhlIGlucHV0IHZhbHVlXHJcbiAqXHJcbiAqXHJcbiAqIE5vdGUsIHRoaXMgZGlyZWN0aXZlIHJlcXVpcmVzIGBuZ01vZGVsYCB0byBiZSBwcmVzZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBpbnB1dFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2hhbmdlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb24gY2hhbmdlXHJcbiAqIGluIGlucHV0IHZhbHVlLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDaGFuZ2UtZGlyZWN0aXZlXCIgbW9kdWxlPVwiY2hhbmdlRXhhbXBsZVwiPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgICA8c2NyaXB0PlxyXG4gKiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY2hhbmdlRXhhbXBsZScsIFtdKVxyXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAqICAgICAgICAgICAkc2NvcGUuY291bnRlciA9IDA7XHJcbiAqICAgICAgICAgICAkc2NvcGUuY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgICAgICAgICRzY29wZS5jb3VudGVyKys7XHJcbiAqICAgICAgICAgICB9O1xyXG4gKiAgICAgICAgIH1dKTtcclxuICogICAgIDwvc2NyaXB0PlxyXG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICogICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY29uZmlybWVkXCIgbmctY2hhbmdlPVwiY2hhbmdlKClcIiBpZD1cIm5nLWNoYW5nZS1leGFtcGxlMVwiIC8+XHJcbiAqICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbmZpcm1lZFwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUyXCIgLz5cclxuICogICAgICAgPGxhYmVsIGZvcj1cIm5nLWNoYW5nZS1leGFtcGxlMlwiPkNvbmZpcm1lZDwvbGFiZWw+PGJyIC8+XHJcbiAqICAgICAgIDx0dD5kZWJ1ZyA9IHt7Y29uZmlybWVkfX08L3R0Pjxici8+XHJcbiAqICAgICAgIDx0dD5jb3VudGVyID0ge3tjb3VudGVyfX08L3R0Pjxici8+XHJcbiAqICAgICA8L2Rpdj5cclxuICogICA8L2ZpbGU+XHJcbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgICAgdmFyIGNvdW50ZXIgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50ZXInKSk7XHJcbiAqICAgICB2YXIgZGVidWcgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvbmZpcm1lZCcpKTtcclxuICpcclxuICogICAgIGl0KCdzaG91bGQgZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gaWYgY2hhbmdpbmcgZnJvbSB2aWV3JywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9Db250YWluKCcwJyk7XHJcbiAqXHJcbiAqICAgICAgIGVsZW1lbnQoYnkuaWQoJ25nLWNoYW5nZS1leGFtcGxlMScpKS5jbGljaygpO1xyXG4gKlxyXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMScpO1xyXG4gKiAgICAgICBleHBlY3QoZGVidWcuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICogICAgIH0pO1xyXG4gKlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBub3QgZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gaWYgY2hhbmdpbmcgZnJvbSBtb2RlbCcsIGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBlbGVtZW50KGJ5LmlkKCduZy1jaGFuZ2UtZXhhbXBsZTInKSkuY2xpY2soKTtcclxuXHJcbiAqICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9Db250YWluKCcwJyk7XHJcbiAqICAgICAgIGV4cGVjdChkZWJ1Zy5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xyXG4gKiAgICAgfSk7XHJcbiAqICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdDaGFuZ2VEaXJlY3RpdmUgPSB2YWx1ZUZuKHtcclxuICByZXN0cmljdDogJ0EnLFxyXG4gIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xyXG4gICAgY3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBzY29wZS4kZXZhbChhdHRyLm5nQ2hhbmdlKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5mdW5jdGlvbiBjbGFzc0RpcmVjdGl2ZShuYW1lLCBzZWxlY3Rvcikge1xyXG4gIG5hbWUgPSAnbmdDbGFzcycgKyBuYW1lO1xyXG4gIHJldHVybiBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQUMnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIHZhciBvbGRWYWw7XHJcblxyXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyW25hbWVdLCBuZ0NsYXNzV2F0Y2hBY3Rpb24sIHRydWUpO1xyXG5cclxuICAgICAgICBhdHRyLiRvYnNlcnZlKCdjbGFzcycsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBuZ0NsYXNzV2F0Y2hBY3Rpb24oc2NvcGUuJGV2YWwoYXR0cltuYW1lXSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKG5hbWUgIT09ICduZ0NsYXNzJykge1xyXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKCckaW5kZXgnLCBmdW5jdGlvbigkaW5kZXgsIG9sZCRpbmRleCkge1xyXG4gICAgICAgICAgICAvLyBqc2hpbnQgYml0d2lzZTogZmFsc2VcclxuICAgICAgICAgICAgdmFyIG1vZCA9ICRpbmRleCAmIDE7XHJcbiAgICAgICAgICAgIGlmIChtb2QgIT09IChvbGQkaW5kZXggJiAxKSkge1xyXG4gICAgICAgICAgICAgIHZhciBjbGFzc2VzID0gYXJyYXlDbGFzc2VzKHNjb3BlLiRldmFsKGF0dHJbbmFtZV0pKTtcclxuICAgICAgICAgICAgICBtb2QgPT09IHNlbGVjdG9yID9cclxuICAgICAgICAgICAgICAgIGFkZENsYXNzZXMoY2xhc3NlcykgOlxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3NlcyhjbGFzc2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRDbGFzc2VzKGNsYXNzZXMpIHtcclxuICAgICAgICAgIHZhciBuZXdDbGFzc2VzID0gZGlnZXN0Q2xhc3NDb3VudHMoY2xhc3NlcywgMSk7XHJcbiAgICAgICAgICBhdHRyLiRhZGRDbGFzcyhuZXdDbGFzc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUNsYXNzZXMoY2xhc3Nlcykge1xyXG4gICAgICAgICAgdmFyIG5ld0NsYXNzZXMgPSBkaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLCAtMSk7XHJcbiAgICAgICAgICBhdHRyLiRyZW1vdmVDbGFzcyhuZXdDbGFzc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzZXMsIGNvdW50KSB7XHJcbiAgICAgICAgICB2YXIgY2xhc3NDb3VudHMgPSBlbGVtZW50LmRhdGEoJyRjbGFzc0NvdW50cycpIHx8IHt9O1xyXG4gICAgICAgICAgdmFyIGNsYXNzZXNUb1VwZGF0ZSA9IFtdO1xyXG4gICAgICAgICAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbihjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgaWYgKGNvdW50ID4gMCB8fCBjbGFzc0NvdW50c1tjbGFzc05hbWVdKSB7XHJcbiAgICAgICAgICAgICAgY2xhc3NDb3VudHNbY2xhc3NOYW1lXSA9IChjbGFzc0NvdW50c1tjbGFzc05hbWVdIHx8IDApICsgY291bnQ7XHJcbiAgICAgICAgICAgICAgaWYgKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gPT09ICsoY291bnQgPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgY2xhc3Nlc1RvVXBkYXRlLnB1c2goY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZWxlbWVudC5kYXRhKCckY2xhc3NDb3VudHMnLCBjbGFzc0NvdW50cyk7XHJcbiAgICAgICAgICByZXR1cm4gY2xhc3Nlc1RvVXBkYXRlLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMob2xkQ2xhc3NlcywgbmV3Q2xhc3Nlcykge1xyXG4gICAgICAgICAgdmFyIHRvQWRkID0gYXJyYXlEaWZmZXJlbmNlKG5ld0NsYXNzZXMsIG9sZENsYXNzZXMpO1xyXG4gICAgICAgICAgdmFyIHRvUmVtb3ZlID0gYXJyYXlEaWZmZXJlbmNlKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpO1xyXG4gICAgICAgICAgdG9BZGQgPSBkaWdlc3RDbGFzc0NvdW50cyh0b0FkZCwgMSk7XHJcbiAgICAgICAgICB0b1JlbW92ZSA9IGRpZ2VzdENsYXNzQ291bnRzKHRvUmVtb3ZlLCAtMSk7XHJcbiAgICAgICAgICBpZiAodG9BZGQgJiYgdG9BZGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsIHRvQWRkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0b1JlbW92ZSAmJiB0b1JlbW92ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJGFuaW1hdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCwgdG9SZW1vdmUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbmdDbGFzc1dhdGNoQWN0aW9uKG5ld1ZhbCkge1xyXG4gICAgICAgICAgaWYgKHNlbGVjdG9yID09PSB0cnVlIHx8IHNjb3BlLiRpbmRleCAlIDIgPT09IHNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdDbGFzc2VzID0gYXJyYXlDbGFzc2VzKG5ld1ZhbCB8fCBbXSk7XHJcbiAgICAgICAgICAgIGlmICghb2xkVmFsKSB7XHJcbiAgICAgICAgICAgICAgYWRkQ2xhc3NlcyhuZXdDbGFzc2VzKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghZXF1YWxzKG5ld1ZhbCxvbGRWYWwpKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG9sZENsYXNzZXMgPSBhcnJheUNsYXNzZXMob2xkVmFsKTtcclxuICAgICAgICAgICAgICB1cGRhdGVDbGFzc2VzKG9sZENsYXNzZXMsIG5ld0NsYXNzZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBvbGRWYWwgPSBzaGFsbG93Q29weShuZXdWYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBhcnJheURpZmZlcmVuY2UodG9rZW5zMSwgdG9rZW5zMikge1xyXG4gICAgICB2YXIgdmFsdWVzID0gW107XHJcblxyXG4gICAgICBvdXRlcjpcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMxLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zMVtpXTtcclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRva2VuczIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIGlmICh0b2tlbiA9PSB0b2tlbnMyW2pdKSBjb250aW51ZSBvdXRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsdWVzLnB1c2godG9rZW4pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYXJyYXlDbGFzc2VzKGNsYXNzVmFsKSB7XHJcbiAgICAgIGlmIChpc0FycmF5KGNsYXNzVmFsKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFzc1ZhbDtcclxuICAgICAgfSBlbHNlIGlmIChpc1N0cmluZyhjbGFzc1ZhbCkpIHtcclxuICAgICAgICByZXR1cm4gY2xhc3NWYWwuc3BsaXQoJyAnKTtcclxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChjbGFzc1ZhbCkpIHtcclxuICAgICAgICB2YXIgY2xhc3NlcyA9IFtdO1xyXG4gICAgICAgIGZvckVhY2goY2xhc3NWYWwsIGZ1bmN0aW9uKHYsIGspIHtcclxuICAgICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgIGNsYXNzZXMgPSBjbGFzc2VzLmNvbmNhdChrLnNwbGl0KCcgJykpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjbGFzc2VzO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjbGFzc1ZhbDtcclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDbGFzc1xyXG4gKiBAcmVzdHJpY3QgQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdDbGFzc2AgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gZHluYW1pY2FsbHkgc2V0IENTUyBjbGFzc2VzIG9uIGFuIEhUTUwgZWxlbWVudCBieSBkYXRhYmluZGluZ1xyXG4gKiBhbiBleHByZXNzaW9uIHRoYXQgcmVwcmVzZW50cyBhbGwgY2xhc3NlcyB0byBiZSBhZGRlZC5cclxuICpcclxuICogVGhlIGRpcmVjdGl2ZSBvcGVyYXRlcyBpbiB0aHJlZSBkaWZmZXJlbnQgd2F5cywgZGVwZW5kaW5nIG9uIHdoaWNoIG9mIHRocmVlIHR5cGVzIHRoZSBleHByZXNzaW9uXHJcbiAqIGV2YWx1YXRlcyB0bzpcclxuICpcclxuICogMS4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGUgc3RyaW5nIHNob3VsZCBiZSBvbmUgb3IgbW9yZSBzcGFjZS1kZWxpbWl0ZWQgY2xhc3NcclxuICogbmFtZXMuXHJcbiAqXHJcbiAqIDIuIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhbiBhcnJheSwgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBzaG91bGQgYmUgYSBzdHJpbmcgdGhhdCBpc1xyXG4gKiBvbmUgb3IgbW9yZSBzcGFjZS1kZWxpbWl0ZWQgY2xhc3MgbmFtZXMuXHJcbiAqXHJcbiAqIDMuIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhbiBvYmplY3QsIHRoZW4gZm9yIGVhY2gga2V5LXZhbHVlIHBhaXIgb2YgdGhlXHJcbiAqIG9iamVjdCB3aXRoIGEgdHJ1dGh5IHZhbHVlIHRoZSBjb3JyZXNwb25kaW5nIGtleSBpcyB1c2VkIGFzIGEgY2xhc3MgbmFtZS5cclxuICpcclxuICogVGhlIGRpcmVjdGl2ZSB3b24ndCBhZGQgZHVwbGljYXRlIGNsYXNzZXMgaWYgYSBwYXJ0aWN1bGFyIGNsYXNzIHdhcyBhbHJlYWR5IHNldC5cclxuICpcclxuICogV2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCB0aGUgcHJldmlvdXNseSBhZGRlZCBjbGFzc2VzIGFyZSByZW1vdmVkIGFuZCBvbmx5IHRoZW4gdGhlXHJcbiAqIG5ldyBjbGFzc2VzIGFyZSBhZGRlZC5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogKiphZGQqKiAtIGhhcHBlbnMganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnRzXHJcbiAqXHJcbiAqICoqcmVtb3ZlKiogLSBoYXBwZW5zIGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGUgcmVzdWx0XHJcbiAqICAgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3NcclxuICogICBuYW1lcywgYW4gYXJyYXksIG9yIGEgbWFwIG9mIGNsYXNzIG5hbWVzIHRvIGJvb2xlYW4gdmFsdWVzLiBJbiB0aGUgY2FzZSBvZiBhIG1hcCwgdGhlXHJcbiAqICAgbmFtZXMgb2YgdGhlIHByb3BlcnRpZXMgd2hvc2UgdmFsdWVzIGFyZSB0cnV0aHkgd2lsbCBiZSBhZGRlZCBhcyBjc3MgY2xhc3NlcyB0byB0aGVcclxuICogICBlbGVtZW50LlxyXG4gKlxyXG4gKiBAZXhhbXBsZSBFeGFtcGxlIHRoYXQgZGVtb25zdHJhdGVzIGJhc2ljIGJpbmRpbmdzIHZpYSBuZ0NsYXNzIGRpcmVjdGl2ZS5cclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxwIG5nLWNsYXNzPVwie3N0cmlrZTogZGVsZXRlZCwgYm9sZDogaW1wb3J0YW50LCByZWQ6IGVycm9yfVwiPk1hcCBTeW50YXggRXhhbXBsZTwvcD5cclxuICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImRlbGV0ZWRcIj4gZGVsZXRlZCAoYXBwbHkgXCJzdHJpa2VcIiBjbGFzcyk8YnI+XHJcbiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJpbXBvcnRhbnRcIj4gaW1wb3J0YW50IChhcHBseSBcImJvbGRcIiBjbGFzcyk8YnI+XHJcbiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJlcnJvclwiPiBlcnJvciAoYXBwbHkgXCJyZWRcIiBjbGFzcylcclxuICAgICAgIDxocj5cclxuICAgICAgIDxwIG5nLWNsYXNzPVwic3R5bGVcIj5Vc2luZyBTdHJpbmcgU3ludGF4PC9wPlxyXG4gICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzdHlsZVwiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCBzdHJpa2UgcmVkXCI+XHJcbiAgICAgICA8aHI+XHJcbiAgICAgICA8cCBuZy1jbGFzcz1cIltzdHlsZTEsIHN0eWxlMiwgc3R5bGUzXVwiPlVzaW5nIEFycmF5IFN5bnRheDwvcD5cclxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlMVwiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cclxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlMlwiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cclxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlM1wiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgLnN0cmlrZSB7XHJcbiAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xyXG4gICAgICAgfVxyXG4gICAgICAgLmJvbGQge1xyXG4gICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgfVxyXG4gICAgICAgLnJlZCB7XHJcbiAgICAgICAgICAgY29sb3I6IHJlZDtcclxuICAgICAgIH1cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgdmFyIHBzID0gZWxlbWVudC5hbGwoYnkuY3NzKCdwJykpO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbGV0IHlvdSB0b2dnbGUgdGhlIGNsYXNzJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ib2xkLyk7XHJcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkubm90LnRvTWF0Y2goL3JlZC8pO1xyXG5cclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnaW1wb3J0YW50JykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvYm9sZC8pO1xyXG5cclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnZXJyb3InKSkuY2xpY2soKTtcclxuICAgICAgICAgZXhwZWN0KHBzLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9yZWQvKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbGV0IHlvdSB0b2dnbGUgc3RyaW5nIGV4YW1wbGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KHBzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJycpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5jbGVhcigpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5zZW5kS2V5cygncmVkJyk7XHJcbiAgICAgICAgIGV4cGVjdChwcy5nZXQoMSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCdyZWQnKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdhcnJheSBleGFtcGxlIHNob3VsZCBoYXZlIDMgY2xhc3NlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3N0eWxlMScpKS5zZW5kS2V5cygnYm9sZCcpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTInKSkuc2VuZEtleXMoJ3N0cmlrZScpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTMnKSkuc2VuZEtleXMoJ3JlZCcpO1xyXG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnYm9sZCBzdHJpa2UgcmVkJyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuXHJcbiAgICMjIEFuaW1hdGlvbnNcclxuXHJcbiAgIFRoZSBleGFtcGxlIGJlbG93IGRlbW9uc3RyYXRlcyBob3cgdG8gcGVyZm9ybSBhbmltYXRpb25zIHVzaW5nIG5nQ2xhc3MuXHJcblxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgaWQ9XCJzZXRidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXRcIiBuZy1jbGljaz1cIm15VmFyPSdteS1jbGFzcydcIj5cclxuICAgICAgPGlucHV0IGlkPVwiY2xlYXJidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlWYXI9JydcIj5cclxuICAgICAgPGJyPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cImJhc2UtY2xhc3NcIiBuZy1jbGFzcz1cIm15VmFyXCI+U2FtcGxlIFRleHQ8L3NwYW4+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgIC5iYXNlLWNsYXNzIHtcclxuICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAuYmFzZS1jbGFzcy5teS1jbGFzcyB7XHJcbiAgICAgICAgIGNvbG9yOiByZWQ7XHJcbiAgICAgICAgIGZvbnQtc2l6ZTozZW07XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3MnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cclxuICAgICAgICAgICB0b01hdGNoKC9teS1jbGFzcy8pO1xyXG5cclxuICAgICAgICAgZWxlbWVudChieS5pZCgnc2V0YnRuJykpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJy5iYXNlLWNsYXNzJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXHJcbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcclxuXHJcbiAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2NsZWFyYnRuJykpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJy5iYXNlLWNsYXNzJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkubm90LlxyXG4gICAgICAgICAgIHRvTWF0Y2goL215LWNsYXNzLyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuXHJcblxyXG4gICAjIyBuZ0NsYXNzIGFuZCBwcmUtZXhpc3RpbmcgQ1NTMyBUcmFuc2l0aW9ucy9BbmltYXRpb25zXHJcbiAgIFRoZSBuZ0NsYXNzIGRpcmVjdGl2ZSBzdGlsbCBzdXBwb3J0cyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnMgZXZlbiBpZiB0aGV5IGRvIG5vdCBmb2xsb3cgdGhlIG5nQW5pbWF0ZSBDU1MgbmFtaW5nIHN0cnVjdHVyZS5cclxuICAgVXBvbiBhbmltYXRpb24gbmdBbmltYXRlIHdpbGwgYXBwbHkgc3VwcGxlbWVudGFyeSBDU1MgY2xhc3NlcyB0byB0cmFjayB0aGUgc3RhcnQgYW5kIGVuZCBvZiBhbiBhbmltYXRpb24sIGJ1dCB0aGlzIHdpbGwgbm90IGhpbmRlclxyXG4gICBhbnkgcHJlLWV4aXN0aW5nIENTUyB0cmFuc2l0aW9ucyBhbHJlYWR5IG9uIHRoZSBlbGVtZW50LiBUbyBnZXQgYW4gaWRlYSBvZiB3aGF0IGhhcHBlbnMgZHVyaW5nIGEgY2xhc3MtYmFzZWQgYW5pbWF0aW9uLCBiZSBzdXJlXHJcbiAgIHRvIHZpZXcgdGhlIHN0ZXAgYnkgc3RlcCBkZXRhaWxzIG9mIHtAbGluayBuZy4kYW5pbWF0ZSNhZGRDbGFzcyAkYW5pbWF0ZS5hZGRDbGFzc30gYW5kXHJcbiAgIHtAbGluayBuZy4kYW5pbWF0ZSNyZW1vdmVDbGFzcyAkYW5pbWF0ZS5yZW1vdmVDbGFzc30uXHJcbiAqL1xyXG52YXIgbmdDbGFzc0RpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCcnLCB0cnVlKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ2xhc3NPZGRcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQ2xhc3NPZGRgIGFuZCBgbmdDbGFzc0V2ZW5gIGRpcmVjdGl2ZXMgd29yayBleGFjdGx5IGFzXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxyXG4gKiBjb25qdW5jdGlvbiB3aXRoIGBuZ1JlcGVhdGAgYW5kIHRha2UgZWZmZWN0IG9ubHkgb24gb2RkIChldmVuKSByb3dzLlxyXG4gKlxyXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0uXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NPZGQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlIHJlc3VsdFxyXG4gKiAgIG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzIG5hbWVzIG9yIGFuIGFycmF5LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxvbCBuZy1pbml0PVwibmFtZXM9WydKb2huJywgJ01hcnknLCAnQ2F0ZScsICdTdXonXVwiPlxyXG4gICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIm5hbWUgaW4gbmFtZXNcIj5cclxuICAgICAgICAgICA8c3BhbiBuZy1jbGFzcy1vZGQ9XCInb2RkJ1wiIG5nLWNsYXNzLWV2ZW49XCInZXZlbidcIj5cclxuICAgICAgICAgICAgIHt7bmFtZX19XHJcbiAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L29sPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgICAgICAub2RkIHtcclxuICAgICAgICAgY29sb3I6IHJlZDtcclxuICAgICAgIH1cclxuICAgICAgIC5ldmVuIHtcclxuICAgICAgICAgY29sb3I6IGJsdWU7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3Mtb2RkIGFuZCBuZy1jbGFzcy1ldmVuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDApLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxyXG4gICAgICAgICAgIHRvTWF0Y2goL29kZC8pO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygxKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cclxuICAgICAgICAgICB0b01hdGNoKC9ldmVuLyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ0NsYXNzT2RkRGlyZWN0aXZlID0gY2xhc3NEaXJlY3RpdmUoJ09kZCcsIDApO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDbGFzc0V2ZW5cclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQ2xhc3NPZGRgIGFuZCBgbmdDbGFzc0V2ZW5gIGRpcmVjdGl2ZXMgd29yayBleGFjdGx5IGFzXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxyXG4gKiBjb25qdW5jdGlvbiB3aXRoIGBuZ1JlcGVhdGAgYW5kIHRha2UgZWZmZWN0IG9ubHkgb24gb2RkIChldmVuKSByb3dzLlxyXG4gKlxyXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cclxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0uXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NFdmVuIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuIFRoZVxyXG4gKiAgIHJlc3VsdCBvZiB0aGUgZXZhbHVhdGlvbiBjYW4gYmUgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHNwYWNlIGRlbGltaXRlZCBjbGFzcyBuYW1lcyBvciBhbiBhcnJheS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8b2wgbmctaW5pdD1cIm5hbWVzPVsnSm9obicsICdNYXJ5JywgJ0NhdGUnLCAnU3V6J11cIj5cclxuICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCI+XHJcbiAgICAgICAgICAgPHNwYW4gbmctY2xhc3Mtb2RkPVwiJ29kZCdcIiBuZy1jbGFzcy1ldmVuPVwiJ2V2ZW4nXCI+XHJcbiAgICAgICAgICAgICB7e25hbWV9fSAmbmJzcDsgJm5ic3A7ICZuYnNwO1xyXG4gICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgPC9vbD5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxyXG4gICAgICAgLm9kZCB7XHJcbiAgICAgICAgIGNvbG9yOiByZWQ7XHJcbiAgICAgICB9XHJcbiAgICAgICAuZXZlbiB7XHJcbiAgICAgICAgIGNvbG9yOiBibHVlO1xyXG4gICAgICAgfVxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsYXNzLW9kZCBhbmQgbmctY2xhc3MtZXZlbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygwKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cclxuICAgICAgICAgICB0b01hdGNoKC9vZGQvKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkucmVwZWF0ZXIoJ25hbWUgaW4gbmFtZXMnKS5yb3coMSkuY29sdW1uKCduYW1lJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXHJcbiAgICAgICAgICAgdG9NYXRjaCgvZXZlbi8pO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdDbGFzc0V2ZW5EaXJlY3RpdmUgPSBjbGFzc0RpcmVjdGl2ZSgnRXZlbicsIDEpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDbG9ha1xyXG4gKiBAcmVzdHJpY3QgQUNcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdDbG9ha2AgZGlyZWN0aXZlIGlzIHVzZWQgdG8gcHJldmVudCB0aGUgQW5ndWxhciBodG1sIHRlbXBsYXRlIGZyb20gYmVpbmcgYnJpZWZseVxyXG4gKiBkaXNwbGF5ZWQgYnkgdGhlIGJyb3dzZXIgaW4gaXRzIHJhdyAodW5jb21waWxlZCkgZm9ybSB3aGlsZSB5b3VyIGFwcGxpY2F0aW9uIGlzIGxvYWRpbmcuIFVzZSB0aGlzXHJcbiAqIGRpcmVjdGl2ZSB0byBhdm9pZCB0aGUgdW5kZXNpcmFibGUgZmxpY2tlciBlZmZlY3QgY2F1c2VkIGJ5IHRoZSBodG1sIHRlbXBsYXRlIGRpc3BsYXkuXHJcbiAqXHJcbiAqIFRoZSBkaXJlY3RpdmUgY2FuIGJlIGFwcGxpZWQgdG8gdGhlIGA8Ym9keT5gIGVsZW1lbnQsIGJ1dCB0aGUgcHJlZmVycmVkIHVzYWdlIGlzIHRvIGFwcGx5XHJcbiAqIG11bHRpcGxlIGBuZ0Nsb2FrYCBkaXJlY3RpdmVzIHRvIHNtYWxsIHBvcnRpb25zIG9mIHRoZSBwYWdlIHRvIHBlcm1pdCBwcm9ncmVzc2l2ZSByZW5kZXJpbmdcclxuICogb2YgdGhlIGJyb3dzZXIgdmlldy5cclxuICpcclxuICogYG5nQ2xvYWtgIHdvcmtzIGluIGNvb3BlcmF0aW9uIHdpdGggdGhlIGZvbGxvd2luZyBjc3MgcnVsZSBlbWJlZGRlZCB3aXRoaW4gYGFuZ3VsYXIuanNgIGFuZFxyXG4gKiBgYW5ndWxhci5taW4uanNgLlxyXG4gKiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIGh0bWwgZmlsZSAoc2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cclxuICpcclxuICogYGBgY3NzXHJcbiAqIFtuZ1xcOmNsb2FrXSwgW25nLWNsb2FrXSwgW2RhdGEtbmctY2xvYWtdLCBbeC1uZy1jbG9ha10sIC5uZy1jbG9haywgLngtbmctY2xvYWsge1xyXG4gKiAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogV2hlbiB0aGlzIGNzcyBydWxlIGlzIGxvYWRlZCBieSB0aGUgYnJvd3NlciwgYWxsIGh0bWwgZWxlbWVudHMgKGluY2x1ZGluZyB0aGVpciBjaGlsZHJlbikgdGhhdFxyXG4gKiBhcmUgdGFnZ2VkIHdpdGggdGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgYXJlIGhpZGRlbi4gV2hlbiBBbmd1bGFyIGVuY291bnRlcnMgdGhpcyBkaXJlY3RpdmVcclxuICogZHVyaW5nIHRoZSBjb21waWxhdGlvbiBvZiB0aGUgdGVtcGxhdGUgaXQgZGVsZXRlcyB0aGUgYG5nQ2xvYWtgIGVsZW1lbnQgYXR0cmlidXRlLCBtYWtpbmdcclxuICogdGhlIGNvbXBpbGVkIGVsZW1lbnQgdmlzaWJsZS5cclxuICpcclxuICogRm9yIHRoZSBiZXN0IHJlc3VsdCwgdGhlIGBhbmd1bGFyLmpzYCBzY3JpcHQgbXVzdCBiZSBsb2FkZWQgaW4gdGhlIGhlYWQgc2VjdGlvbiBvZiB0aGUgaHRtbFxyXG4gKiBkb2N1bWVudDsgYWx0ZXJuYXRpdmVseSwgdGhlIGNzcyBydWxlIGFib3ZlIG11c3QgYmUgaW5jbHVkZWQgaW4gdGhlIGV4dGVybmFsIHN0eWxlc2hlZXQgb2YgdGhlXHJcbiAqIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBMZWdhY3kgYnJvd3NlcnMsIGxpa2UgSUU3LCBkbyBub3QgcHJvdmlkZSBhdHRyaWJ1dGUgc2VsZWN0b3Igc3VwcG9ydCAoYWRkZWQgaW4gQ1NTIDIuMSkgc28gdGhleVxyXG4gKiBjYW5ub3QgbWF0Y2ggdGhlIGBbbmdcXDpjbG9ha11gIHNlbGVjdG9yLiBUbyB3b3JrIGFyb3VuZCB0aGlzIGxpbWl0YXRpb24sIHlvdSBtdXN0IGFkZCB0aGUgY3NzXHJcbiAqIGNsYXNzIGBuZy1jbG9ha2AgaW4gYWRkaXRpb24gdG8gdGhlIGBuZ0Nsb2FrYCBkaXJlY3RpdmUgYXMgc2hvd24gaW4gdGhlIGV4YW1wbGUgYmVsb3cuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxkaXYgaWQ9XCJ0ZW1wbGF0ZTFcIiBuZy1jbG9haz57eyAnaGVsbG8nIH19PC9kaXY+XHJcbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMlwiIG5nLWNsb2FrIGNsYXNzPVwibmctY2xvYWtcIj57eyAnaGVsbG8gSUU3JyB9fTwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIHJlbW92ZSB0aGUgdGVtcGxhdGUgZGlyZWN0aXZlIGFuZCBjc3MgY2xhc3MnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KCQoJyN0ZW1wbGF0ZTEnKS5nZXRBdHRyaWJ1dGUoJ25nLWNsb2FrJykpLlxyXG4gICAgICAgICAgIHRvQmVOdWxsKCk7XHJcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUyJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cclxuICAgICAgICAgICB0b0JlTnVsbCgpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqL1xyXG52YXIgbmdDbG9ha0RpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcclxuICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XHJcbiAgICBhdHRyLiRzZXQoJ25nQ2xvYWsnLCB1bmRlZmluZWQpO1xyXG4gICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbmctY2xvYWsnKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdDb250cm9sbGVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlIGF0dGFjaGVzIGEgY29udHJvbGxlciBjbGFzcyB0byB0aGUgdmlldy4gVGhpcyBpcyBhIGtleSBhc3BlY3Qgb2YgaG93IGFuZ3VsYXJcclxuICogc3VwcG9ydHMgdGhlIHByaW5jaXBsZXMgYmVoaW5kIHRoZSBNb2RlbC1WaWV3LUNvbnRyb2xsZXIgZGVzaWduIHBhdHRlcm4uXHJcbiAqXHJcbiAqIE1WQyBjb21wb25lbnRzIGluIGFuZ3VsYXI6XHJcbiAqXHJcbiAqICogTW9kZWwg4oCUIE1vZGVscyBhcmUgdGhlIHByb3BlcnRpZXMgb2YgYSBzY29wZTsgc2NvcGVzIGFyZSBhdHRhY2hlZCB0byB0aGUgRE9NIHdoZXJlIHNjb3BlIHByb3BlcnRpZXNcclxuICogICBhcmUgYWNjZXNzZWQgdGhyb3VnaCBiaW5kaW5ncy5cclxuICogKiBWaWV3IOKAlCBUaGUgdGVtcGxhdGUgKEhUTUwgd2l0aCBkYXRhIGJpbmRpbmdzKSB0aGF0IGlzIHJlbmRlcmVkIGludG8gdGhlIFZpZXcuXHJcbiAqICogQ29udHJvbGxlciDigJQgVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgYSBDb250cm9sbGVyIGNsYXNzOyB0aGUgY2xhc3MgY29udGFpbnMgYnVzaW5lc3NcclxuICogICBsb2dpYyBiZWhpbmQgdGhlIGFwcGxpY2F0aW9uIHRvIGRlY29yYXRlIHRoZSBzY29wZSB3aXRoIGZ1bmN0aW9ucyBhbmQgdmFsdWVzXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB5b3UgY2FuIGFsc28gYXR0YWNoIGNvbnRyb2xsZXJzIHRvIHRoZSBET00gYnkgZGVjbGFyaW5nIGl0IGluIGEgcm91dGUgZGVmaW5pdGlvblxyXG4gKiB2aWEgdGhlIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSAkcm91dGV9IHNlcnZpY2UuIEEgY29tbW9uIG1pc3Rha2UgaXMgdG8gZGVjbGFyZSB0aGUgY29udHJvbGxlclxyXG4gKiBhZ2FpbiB1c2luZyBgbmctY29udHJvbGxlcmAgaW4gdGhlIHRlbXBsYXRlIGl0c2VsZi4gIFRoaXMgd2lsbCBjYXVzZSB0aGUgY29udHJvbGxlciB0byBiZSBhdHRhY2hlZFxyXG4gKiBhbmQgZXhlY3V0ZWQgdHdpY2UuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAc2NvcGVcclxuICogQHByaW9yaXR5IDUwMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ29udHJvbGxlciBOYW1lIG9mIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gcmVnaXN0ZXJlZCB3aXRoIHRoZSBjdXJyZW50XHJcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyICRjb250cm9sbGVyUHJvdmlkZXJ9IG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259XHJcbiAqIHRoYXQgb24gdGhlIGN1cnJlbnQgc2NvcGUgZXZhbHVhdGVzIHRvIGEgY29uc3RydWN0b3IgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIFRoZSBjb250cm9sbGVyIGluc3RhbmNlIGNhbiBiZSBwdWJsaXNoZWQgaW50byBhIHNjb3BlIHByb3BlcnR5IGJ5IHNwZWNpZnlpbmdcclxuICogYG5nLWNvbnRyb2xsZXI9XCJhcyBwcm9wZXJ0eU5hbWVcImAuXHJcbiAqXHJcbiAqIElmIHRoZSBjdXJyZW50IGAkY29udHJvbGxlclByb3ZpZGVyYCBpcyBjb25maWd1cmVkIHRvIHVzZSBnbG9iYWxzICh2aWFcclxuICoge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIjYWxsb3dHbG9iYWxzIGAkY29udHJvbGxlclByb3ZpZGVyLmFsbG93R2xvYmFscygpYCB9KSwgdGhpcyBtYXlcclxuICogYWxzbyBiZSB0aGUgbmFtZSBvZiBhIGdsb2JhbGx5IGFjY2Vzc2libGUgY29uc3RydWN0b3IgZnVuY3Rpb24gKG5vdCByZWNvbW1lbmRlZCkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIEhlcmUgaXMgYSBzaW1wbGUgZm9ybSBmb3IgZWRpdGluZyB1c2VyIGNvbnRhY3QgaW5mb3JtYXRpb24uIEFkZGluZywgcmVtb3ZpbmcsIGNsZWFyaW5nLCBhbmRcclxuICogZ3JlZXRpbmcgYXJlIG1ldGhvZHMgZGVjbGFyZWQgb24gdGhlIGNvbnRyb2xsZXIgKHNlZSBzb3VyY2UgdGFiKS4gVGhlc2UgbWV0aG9kcyBjYW5cclxuICogZWFzaWx5IGJlIGNhbGxlZCBmcm9tIHRoZSBhbmd1bGFyIG1hcmt1cC4gQW55IGNoYW5nZXMgdG8gdGhlIGRhdGEgYXJlIGF1dG9tYXRpY2FsbHkgcmVmbGVjdGVkXHJcbiAqIGluIHRoZSBWaWV3IHdpdGhvdXQgdGhlIG5lZWQgZm9yIGEgbWFudWFsIHVwZGF0ZS5cclxuICpcclxuICogVHdvIGRpZmZlcmVudCBkZWNsYXJhdGlvbiBzdHlsZXMgYXJlIGluY2x1ZGVkIGJlbG93OlxyXG4gKlxyXG4gKiAqIG9uZSBiaW5kcyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGRpcmVjdGx5IG9udG8gdGhlIGNvbnRyb2xsZXIgdXNpbmcgYHRoaXNgOlxyXG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjEgYXMgc2V0dGluZ3NcImBcclxuICogKiBvbmUgaW5qZWN0cyBgJHNjb3BlYCBpbnRvIHRoZSBjb250cm9sbGVyOlxyXG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcImBcclxuICpcclxuICogVGhlIHNlY29uZCBvcHRpb24gaXMgbW9yZSBjb21tb24gaW4gdGhlIEFuZ3VsYXIgY29tbXVuaXR5LCBhbmQgaXMgZ2VuZXJhbGx5IHVzZWQgaW4gYm9pbGVycGxhdGVzXHJcbiAqIGFuZCBpbiB0aGlzIGd1aWRlLiBIb3dldmVyLCB0aGVyZSBhcmUgYWR2YW50YWdlcyB0byBiaW5kaW5nIHByb3BlcnRpZXMgZGlyZWN0bHkgdG8gdGhlIGNvbnRyb2xsZXJcclxuICogYW5kIGF2b2lkaW5nIHNjb3BlLlxyXG4gKlxyXG4gKiAqIFVzaW5nIGBjb250cm9sbGVyIGFzYCBtYWtlcyBpdCBvYnZpb3VzIHdoaWNoIGNvbnRyb2xsZXIgeW91IGFyZSBhY2Nlc3NpbmcgaW4gdGhlIHRlbXBsYXRlIHdoZW5cclxuICogbXVsdGlwbGUgY29udHJvbGxlcnMgYXBwbHkgdG8gYW4gZWxlbWVudC5cclxuICogKiBJZiB5b3UgYXJlIHdyaXRpbmcgeW91ciBjb250cm9sbGVycyBhcyBjbGFzc2VzIHlvdSBoYXZlIGVhc2llciBhY2Nlc3MgdG8gdGhlIHByb3BlcnRpZXMgYW5kXHJcbiAqIG1ldGhvZHMsIHdoaWNoIHdpbGwgYXBwZWFyIG9uIHRoZSBzY29wZSwgZnJvbSBpbnNpZGUgdGhlIGNvbnRyb2xsZXIgY29kZS5cclxuICogKiBTaW5jZSB0aGVyZSBpcyBhbHdheXMgYSBgLmAgaW4gdGhlIGJpbmRpbmdzLCB5b3UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBwcm90b3R5cGFsXHJcbiAqIGluaGVyaXRhbmNlIG1hc2tpbmcgcHJpbWl0aXZlcy5cclxuICpcclxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgYGNvbnRyb2xsZXIgYXNgIHN5bnRheC5cclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ29udHJvbGxlckFzXCIgbW9kdWxlPVwiY29udHJvbGxlckFzRXhhbXBsZVwiPlxyXG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgIDxkaXYgaWQ9XCJjdHJsLWFzLWV4bXBsXCIgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjEgYXMgc2V0dGluZ3NcIj5cclxuICogICAgICBOYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNldHRpbmdzLm5hbWVcIi8+XHJcbiAqICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5ncmVldCgpXCI+Z3JlZXQ8L2E+IF08YnIvPlxyXG4gKiAgICAgIENvbnRhY3Q6XHJcbiAqICAgICAgPHVsPlxyXG4gKiAgICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHNcIj5cclxuICogICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiPlxyXG4gKiAgICAgICAgICAgICA8b3B0aW9uPnBob25lPC9vcHRpb24+XHJcbiAqICAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cclxuICogICAgICAgICAgPC9zZWxlY3Q+XHJcbiAqICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29udGFjdC52YWx1ZVwiLz5cclxuICogICAgICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5jbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYT5cclxuICogICAgICAgICAgfCA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJzZXR0aW5ncy5yZW1vdmVDb250YWN0KGNvbnRhY3QpXCI+WDwvYT4gXVxyXG4gKiAgICAgICAgPC9saT5cclxuICogICAgICAgIDxsaT5bIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInNldHRpbmdzLmFkZENvbnRhY3QoKVwiPmFkZDwvYT4gXTwvbGk+XHJcbiAqICAgICA8L3VsPlxyXG4gKiAgICA8L2Rpdj5cclxuICogICA8L2ZpbGU+XHJcbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gKiAgICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbGxlckFzRXhhbXBsZScsIFtdKVxyXG4gKiAgICAgIC5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXIxJywgU2V0dGluZ3NDb250cm9sbGVyMSk7XHJcbiAqXHJcbiAqICAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjEoKSB7XHJcbiAqICAgICAgdGhpcy5uYW1lID0gXCJKb2huIFNtaXRoXCI7XHJcbiAqICAgICAgdGhpcy5jb250YWN0cyA9IFtcclxuICogICAgICAgIHt0eXBlOiAncGhvbmUnLCB2YWx1ZTogJzQwOCA1NTUgMTIxMid9LFxyXG4gKiAgICAgICAge3R5cGU6ICdlbWFpbCcsIHZhbHVlOiAnam9obi5zbWl0aEBleGFtcGxlLm9yZyd9IF07XHJcbiAqICAgIH1cclxuICpcclxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuZ3JlZXQgPSBmdW5jdGlvbigpIHtcclxuICogICAgICBhbGVydCh0aGlzLm5hbWUpO1xyXG4gKiAgICB9O1xyXG4gKlxyXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5hZGRDb250YWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgdGhpcy5jb250YWN0cy5wdXNoKHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xyXG4gKiAgICB9O1xyXG4gKlxyXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XHJcbiAqICAgICB2YXIgaW5kZXggPSB0aGlzLmNvbnRhY3RzLmluZGV4T2YoY29udGFjdFRvUmVtb3ZlKTtcclxuICogICAgICB0aGlzLmNvbnRhY3RzLnNwbGljZShpbmRleCwgMSk7XHJcbiAqICAgIH07XHJcbiAqXHJcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmNsZWFyQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHtcclxuICogICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xyXG4gKiAgICAgIGNvbnRhY3QudmFsdWUgPSAnJztcclxuICogICAgfTtcclxuICogICA8L2ZpbGU+XHJcbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBjaGVjayBjb250cm9sbGVyIGFzJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmlkKCdjdHJsLWFzLWV4bXBsJykpO1xyXG4gKiAgICAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5tb2RlbCgnc2V0dGluZ3MubmFtZScpKVxyXG4gKiAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnSm9obiBTbWl0aCcpO1xyXG4gKlxyXG4gKiAgICAgICB2YXIgZmlyc3RSZXBlYXQgPVxyXG4gKiAgICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHMnKS5yb3coMCkpO1xyXG4gKiAgICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cclxuICogICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzJykucm93KDEpKTtcclxuICpcclxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJzQwOCA1NTUgMTIxMicpO1xyXG4gKlxyXG4gKiAgICAgICBleHBlY3Qoc2Vjb25kUmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnKTtcclxuICpcclxuICogICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5saW5rVGV4dCgnY2xlYXInKSkuY2xpY2soKTtcclxuICpcclxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJycpO1xyXG4gKlxyXG4gKiAgICAgICBjb250YWluZXIuZWxlbWVudChieS5saW5rVGV4dCgnYWRkJykpLmNsaWNrKCk7XHJcbiAqXHJcbiAqICAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygyKSlcclxuICogICAgICAgICAgIC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpXHJcbiAqICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAgLnRvQmUoJ3lvdXJuYW1lQGV4YW1wbGUub3JnJyk7XHJcbiAqICAgICB9KTtcclxuICogICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgXCJhdHRhY2ggdG8gYCRzY29wZWBcIiBzdHlsZSBvZiBjb250cm9sbGVyLlxyXG4gKlxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDb250cm9sbGVyXCIgbW9kdWxlPVwiY29udHJvbGxlckV4YW1wbGVcIj5cclxuICogIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAqICAgPGRpdiBpZD1cImN0cmwtZXhtcGxcIiBuZy1jb250cm9sbGVyPVwiU2V0dGluZ3NDb250cm9sbGVyMlwiPlxyXG4gKiAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJuYW1lXCIvPlxyXG4gKiAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJncmVldCgpXCI+Z3JlZXQ8L2E+IF08YnIvPlxyXG4gKiAgICAgQ29udGFjdDpcclxuICogICAgIDx1bD5cclxuICogICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cclxuICogICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwiY29udGFjdC50eXBlXCI+XHJcbiAqICAgICAgICAgICAgPG9wdGlvbj5waG9uZTwvb3B0aW9uPlxyXG4gKiAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cclxuICogICAgICAgICA8L3NlbGVjdD5cclxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbnRhY3QudmFsdWVcIi8+XHJcbiAqICAgICAgICAgWyA8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJjbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYT5cclxuICogICAgICAgICB8IDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cInJlbW92ZUNvbnRhY3QoY29udGFjdClcIj5YPC9hPiBdXHJcbiAqICAgICAgIDwvbGk+XHJcbiAqICAgICAgIDxsaT5bIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImFkZENvbnRhY3QoKVwiPmFkZDwvYT4gXTwvbGk+XHJcbiAqICAgIDwvdWw+XHJcbiAqICAgPC9kaXY+XHJcbiAqICA8L2ZpbGU+XHJcbiAqICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XHJcbiAqICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2xsZXJFeGFtcGxlJywgW10pXHJcbiAqICAgICAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyMicsIFsnJHNjb3BlJywgU2V0dGluZ3NDb250cm9sbGVyMl0pO1xyXG4gKlxyXG4gKiAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjIoJHNjb3BlKSB7XHJcbiAqICAgICAkc2NvcGUubmFtZSA9IFwiSm9obiBTbWl0aFwiO1xyXG4gKiAgICAgJHNjb3BlLmNvbnRhY3RzID0gW1xyXG4gKiAgICAgICB7dHlwZToncGhvbmUnLCB2YWx1ZTonNDA4IDU1NSAxMjEyJ30sXHJcbiAqICAgICAgIHt0eXBlOidlbWFpbCcsIHZhbHVlOidqb2huLnNtaXRoQGV4YW1wbGUub3JnJ30gXTtcclxuICpcclxuICogICAgICRzY29wZS5ncmVldCA9IGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgICBhbGVydCgkc2NvcGUubmFtZSk7XHJcbiAqICAgICB9O1xyXG4gKlxyXG4gKiAgICAgJHNjb3BlLmFkZENvbnRhY3QgPSBmdW5jdGlvbigpIHtcclxuICogICAgICAgJHNjb3BlLmNvbnRhY3RzLnB1c2goe3R5cGU6J2VtYWlsJywgdmFsdWU6J3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xyXG4gKiAgICAgfTtcclxuICpcclxuICogICAgICRzY29wZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XHJcbiAqICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XHJcbiAqICAgICAgICRzY29wZS5jb250YWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gKiAgICAgfTtcclxuICpcclxuICogICAgICRzY29wZS5jbGVhckNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XHJcbiAqICAgICAgIGNvbnRhY3QudHlwZSA9ICdwaG9uZSc7XHJcbiAqICAgICAgIGNvbnRhY3QudmFsdWUgPSAnJztcclxuICogICAgIH07XHJcbiAqICAgfVxyXG4gKiAgPC9maWxlPlxyXG4gKiAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gKiAgICBpdCgnc2hvdWxkIGNoZWNrIGNvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcclxuICogICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5pZCgnY3RybC1leG1wbCcpKTtcclxuICpcclxuICogICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkubW9kZWwoJ25hbWUnKSlcclxuICogICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnSm9obiBTbWl0aCcpO1xyXG4gKlxyXG4gKiAgICAgIHZhciBmaXJzdFJlcGVhdCA9XHJcbiAqICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDApKTtcclxuICogICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cclxuICogICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gY29udGFjdHMnKS5yb3coMSkpO1xyXG4gKlxyXG4gKiAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcclxuICogICAgICAgICAgLnRvQmUoJzQwOCA1NTUgMTIxMicpO1xyXG4gKiAgICAgIGV4cGVjdChzZWNvbmRSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXHJcbiAqICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XHJcbiAqXHJcbiAqICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5saW5rVGV4dCgnY2xlYXInKSkuY2xpY2soKTtcclxuICpcclxuICogICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXHJcbiAqICAgICAgICAgIC50b0JlKCcnKTtcclxuICpcclxuICogICAgICBjb250YWluZXIuZWxlbWVudChieS5saW5rVGV4dCgnYWRkJykpLmNsaWNrKCk7XHJcbiAqXHJcbiAqICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDIpKVxyXG4gKiAgICAgICAgICAuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKVxyXG4gKiAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxyXG4gKiAgICAgICAgICAudG9CZSgneW91cm5hbWVAZXhhbXBsZS5vcmcnKTtcclxuICogICAgfSk7XHJcbiAqICA8L2ZpbGU+XHJcbiAqPC9leGFtcGxlPlxyXG5cclxuICovXHJcbnZhciBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUgPSBbZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBzY29wZTogdHJ1ZSxcclxuICAgIGNvbnRyb2xsZXI6ICdAJyxcclxuICAgIHByaW9yaXR5OiA1MDBcclxuICB9O1xyXG59XTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ3NwXHJcbiAqXHJcbiAqIEBlbGVtZW50IGh0bWxcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEVuYWJsZXMgW0NTUCAoQ29udGVudCBTZWN1cml0eSBQb2xpY3kpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9TZWN1cml0eS9DU1ApIHN1cHBvcnQuXHJcbiAqXHJcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHdoZW4gZGV2ZWxvcGluZyB0aGluZ3MgbGlrZSBHb29nbGUgQ2hyb21lIEV4dGVuc2lvbnMgb3IgVW5pdmVyc2FsIFdpbmRvd3MgQXBwcy5cclxuICpcclxuICogQ1NQIGZvcmJpZHMgYXBwcyB0byB1c2UgYGV2YWxgIG9yIGBGdW5jdGlvbihzdHJpbmcpYCBnZW5lcmF0ZWQgZnVuY3Rpb25zIChhbW9uZyBvdGhlciB0aGluZ3MpLlxyXG4gKiBGb3IgQW5ndWxhciB0byBiZSBDU1AgY29tcGF0aWJsZSB0aGVyZSBhcmUgb25seSB0d28gdGhpbmdzIHRoYXQgd2UgbmVlZCB0byBkbyBkaWZmZXJlbnRseTpcclxuICpcclxuICogLSBkb24ndCB1c2UgYEZ1bmN0aW9uYCBjb25zdHJ1Y3RvciB0byBnZW5lcmF0ZSBvcHRpbWl6ZWQgdmFsdWUgZ2V0dGVyc1xyXG4gKiAtIGRvbid0IGluamVjdCBjdXN0b20gc3R5bGVzaGVldCBpbnRvIHRoZSBkb2N1bWVudFxyXG4gKlxyXG4gKiBBbmd1bGFySlMgdXNlcyBgRnVuY3Rpb24oc3RyaW5nKWAgZ2VuZXJhdGVkIGZ1bmN0aW9ucyBhcyBhIHNwZWVkIG9wdGltaXphdGlvbi4gQXBwbHlpbmcgdGhlIGBuZ0NzcGBcclxuICogZGlyZWN0aXZlIHdpbGwgY2F1c2UgQW5ndWxhciB0byB1c2UgQ1NQIGNvbXBhdGliaWxpdHkgbW9kZS4gV2hlbiB0aGlzIG1vZGUgaXMgb24gQW5ndWxhckpTIHdpbGxcclxuICogZXZhbHVhdGUgYWxsIGV4cHJlc3Npb25zIHVwIHRvIDMwJSBzbG93ZXIgdGhhbiBpbiBub24tQ1NQIG1vZGUsIGJ1dCBubyBzZWN1cml0eSB2aW9sYXRpb25zIHdpbGxcclxuICogYmUgcmFpc2VkLlxyXG4gKlxyXG4gKiBDU1AgZm9yYmlkcyBKYXZhU2NyaXB0IHRvIGlubGluZSBzdHlsZXNoZWV0IHJ1bGVzLiBJbiBub24gQ1NQIG1vZGUgQW5ndWxhciBhdXRvbWF0aWNhbGx5XHJcbiAqIGluY2x1ZGVzIHNvbWUgQ1NTIHJ1bGVzIChlLmcuIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbG9hayBuZ0Nsb2FrfSkuXHJcbiAqIFRvIG1ha2UgdGhvc2UgZGlyZWN0aXZlcyB3b3JrIGluIENTUCBtb2RlLCBpbmNsdWRlIHRoZSBgYW5ndWxhci1jc3AuY3NzYCBtYW51YWxseS5cclxuICpcclxuICogQW5ndWxhciB0cmllcyB0byBhdXRvZGV0ZWN0IGlmIENTUCBpcyBhY3RpdmUgYW5kIGF1dG9tYXRpY2FsbHkgdHVybiBvbiB0aGUgQ1NQLXNhZmUgbW9kZS4gVGhpc1xyXG4gKiBhdXRvZGV0ZWN0aW9uIGhvd2V2ZXIgdHJpZ2dlcnMgYSBDU1AgZXJyb3IgdG8gYmUgbG9nZ2VkIGluIHRoZSBjb25zb2xlOlxyXG4gKlxyXG4gKiBgYGBcclxuICogUmVmdXNlZCB0byBldmFsdWF0ZSBhIHN0cmluZyBhcyBKYXZhU2NyaXB0IGJlY2F1c2UgJ3Vuc2FmZS1ldmFsJyBpcyBub3QgYW4gYWxsb3dlZCBzb3VyY2Ugb2ZcclxuICogc2NyaXB0IGluIHRoZSBmb2xsb3dpbmcgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZGlyZWN0aXZlOiBcImRlZmF1bHQtc3JjICdzZWxmJ1wiLiBOb3RlIHRoYXRcclxuICogJ3NjcmlwdC1zcmMnIHdhcyBub3QgZXhwbGljaXRseSBzZXQsIHNvICdkZWZhdWx0LXNyYycgaXMgdXNlZCBhcyBhIGZhbGxiYWNrLlxyXG4gKiBgYGBcclxuICpcclxuICogVGhpcyBlcnJvciBpcyBoYXJtbGVzcyBidXQgYW5ub3lpbmcuIFRvIHByZXZlbnQgdGhlIGVycm9yIGZyb20gc2hvd2luZyB1cCwgcHV0IHRoZSBgbmdDc3BgXHJcbiAqIGRpcmVjdGl2ZSBvbiB0aGUgcm9vdCBlbGVtZW50IG9mIHRoZSBhcHBsaWNhdGlvbiBvciBvbiB0aGUgYGFuZ3VsYXIuanNgIHNjcmlwdCB0YWcsIHdoaWNoZXZlclxyXG4gKiBhcHBlYXJzIGZpcnN0IGluIHRoZSBodG1sIGRvY3VtZW50LlxyXG4gKlxyXG4gKiAqTm90ZTogVGhpcyBkaXJlY3RpdmUgaXMgb25seSBhdmFpbGFibGUgaW4gdGhlIGBuZy1jc3BgIGFuZCBgZGF0YS1uZy1jc3BgIGF0dHJpYnV0ZSBmb3JtLipcclxuICpcclxuICogQGV4YW1wbGVcclxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byBhcHBseSB0aGUgYG5nQ3NwYCBkaXJlY3RpdmUgdG8gdGhlIGBodG1sYCB0YWcuXHJcbiAgIGBgYGh0bWxcclxuICAgICA8IWRvY3R5cGUgaHRtbD5cclxuICAgICA8aHRtbCBuZy1hcHAgbmctY3NwPlxyXG4gICAgIC4uLlxyXG4gICAgIC4uLlxyXG4gICAgIDwvaHRtbD5cclxuICAgYGBgXHJcbiAgKiBAZXhhbXBsZVxyXG4gICAgICAvLyBOb3RlOiB0aGUgc3VmZml4IGAuY3NwYCBpbiB0aGUgZXhhbXBsZSBuYW1lIHRyaWdnZXJzXHJcbiAgICAgIC8vIGNzcCBtb2RlIGluIG91ciBodHRwIHNlcnZlciFcclxuICAgICAgPGV4YW1wbGUgbmFtZT1cImV4YW1wbGUuY3NwXCIgbW9kdWxlPVwiY3NwRXhhbXBsZVwiIG5nLWNzcD1cInRydWVcIj5cclxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkNvbnRyb2xsZXIgYXMgY3RybFwiPlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjdHJsLmluYygpXCIgaWQ9XCJpbmNcIj5JbmNyZW1lbnQ8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8c3BhbiBpZD1cImNvdW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIHt7Y3RybC5jb3VudGVyfX1cclxuICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY3RybC5ldmlsKClcIiBpZD1cImV2aWxcIj5FdmlsPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJldmlsRXJyb3JcIj5cclxuICAgICAgICAgICAgICAgIHt7Y3RybC5ldmlsRXJyb3J9fVxyXG4gICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2ZpbGU+XHJcbiAgICAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjc3BFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnRlciA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIrKztcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2aWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgLy8ganNoaW50IGV2aWw6dHJ1ZVxyXG4gICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2YWwoJzErMicpO1xyXG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmlsRXJyb3IgPSBlLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgPC9maWxlPlxyXG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICAgIHZhciB1dGlsLCB3ZWJkcml2ZXI7XHJcblxyXG4gICAgICAgICAgdmFyIGluY0J0biA9IGVsZW1lbnQoYnkuaWQoJ2luYycpKTtcclxuICAgICAgICAgIHZhciBjb3VudGVyID0gZWxlbWVudChieS5pZCgnY291bnRlcicpKTtcclxuICAgICAgICAgIHZhciBldmlsQnRuID0gZWxlbWVudChieS5pZCgnZXZpbCcpKTtcclxuICAgICAgICAgIHZhciBldmlsRXJyb3IgPSBlbGVtZW50KGJ5LmlkKCdldmlsRXJyb3InKSk7XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0QW5kQ2xlYXJTZXZlcmVFcnJvcnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBicm93c2VyLm1hbmFnZSgpLmxvZ3MoKS5nZXQoJ2Jyb3dzZXInKS50aGVuKGZ1bmN0aW9uKGJyb3dzZXJMb2cpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gYnJvd3NlckxvZy5maWx0ZXIoZnVuY3Rpb24obG9nRW50cnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsb2dFbnRyeS5sZXZlbC52YWx1ZSA+IHdlYmRyaXZlci5sb2dnaW5nLkxldmVsLldBUk5JTkcudmFsdWU7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyRXJyb3JzKCkge1xyXG4gICAgICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGV4cGVjdE5vRXJyb3JzKCkge1xyXG4gICAgICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpLnRoZW4oZnVuY3Rpb24oZmlsdGVyZWRMb2cpIHtcclxuICAgICAgICAgICAgICBleHBlY3QoZmlsdGVyZWRMb2cubGVuZ3RoKS50b0VxdWFsKDApO1xyXG4gICAgICAgICAgICAgIGlmIChmaWx0ZXJlZExvZy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdicm93c2VyIGNvbnNvbGUgZXJyb3JzOiAnICsgdXRpbC5pbnNwZWN0KGZpbHRlcmVkTG9nKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBleHBlY3RFcnJvcihyZWdleCkge1xyXG4gICAgICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpLnRoZW4oZnVuY3Rpb24oZmlsdGVyZWRMb2cpIHtcclxuICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmaWx0ZXJlZExvZy5mb3JFYWNoKGZ1bmN0aW9uKGxvZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvZy5tZXNzYWdlLm1hdGNoKHJlZ2V4KSkge1xyXG4gICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdleHBlY3RlZCBhbiBlcnJvciB0aGF0IG1hdGNoZXMgJyArIHJlZ2V4KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XHJcbiAgICAgICAgICAgIHdlYmRyaXZlciA9IHJlcXVpcmUoJ3Byb3RyYWN0b3Ivbm9kZV9tb2R1bGVzL3NlbGVuaXVtLXdlYmRyaXZlcicpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gRm9yIG5vdywgd2Ugb25seSB0ZXN0IG9uIENocm9tZSxcclxuICAgICAgICAgIC8vIGFzIFNhZmFyaSBkb2VzIG5vdCBsb2FkIHRoZSBwYWdlIHdpdGggUHJvdHJhY3RvcidzIGluamVjdGVkIHNjcmlwdHMsXHJcbiAgICAgICAgICAvLyBhbmQgRmlyZWZveCB3ZWJkcml2ZXIgYWx3YXlzIGRpc2FibGVzIGNvbnRlbnQgc2VjdXJpdHkgcG9saWN5ICgjNjM1OClcclxuICAgICAgICAgIGlmIChicm93c2VyLnBhcmFtcy5icm93c2VyICE9PSAnY2hyb21lJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaXQoJ3Nob3VsZCBub3QgcmVwb3J0IGVycm9ycyB3aGVuIHRoZSBwYWdlIGlzIGxvYWRlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBjbGVhciBlcnJvcnMgc28gd2UgYXJlIG5vdCBkZXBlbmRlbnQgb24gcHJldmlvdXMgdGVzdHNcclxuICAgICAgICAgICAgY2xlYXJFcnJvcnMoKTtcclxuICAgICAgICAgICAgLy8gTmVlZCB0byByZWxvYWQgdGhlIHBhZ2UgYXMgdGhlIHBhZ2UgaXMgYWxyZWFkeSBsb2FkZWQgd2hlblxyXG4gICAgICAgICAgICAvLyB3ZSBjb21lIGhlcmVcclxuICAgICAgICAgICAgYnJvd3Nlci5kcml2ZXIuZ2V0Q3VycmVudFVybCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XHJcbiAgICAgICAgICAgICAgYnJvd3Nlci5nZXQodXJsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdE5vRXJyb3JzKCk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb25zJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9FcXVhbCgnMCcpO1xyXG4gICAgICAgICAgICBpbmNCdG4uY2xpY2soKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCcxJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdE5vRXJyb3JzKCk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpdCgnc2hvdWxkIHRocm93IGFuZCByZXBvcnQgYW4gZXJyb3Igd2hlbiB1c2luZyBcImV2YWxcIicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBldmlsQnRuLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChldmlsRXJyb3IuZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IFNlY3VyaXR5IFBvbGljeS8pO1xyXG4gICAgICAgICAgICBleHBlY3RFcnJvcigvQ29udGVudCBTZWN1cml0eSBQb2xpY3kvKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIDwvZmlsZT5cclxuICAgICAgPC9leGFtcGxlPlxyXG4gICovXHJcblxyXG4vLyBuZ0NzcCBpcyBub3QgaW1wbGVtZW50ZWQgYXMgYSBwcm9wZXIgZGlyZWN0aXZlIGFueSBtb3JlLCBiZWNhdXNlIHdlIG5lZWQgaXQgYmUgcHJvY2Vzc2VkIHdoaWxlIHdlXHJcbi8vIGJvb3RzdHJhcCB0aGUgc3lzdGVtIChiZWZvcmUgJHBhcnNlIGlzIGluc3RhbnRpYXRlZCksIGZvciB0aGlzIHJlYXNvbiB3ZSBqdXN0IGhhdmVcclxuLy8gdGhlIGNzcC5pc0FjdGl2ZSgpIGZuIHRoYXQgbG9va3MgZm9yIG5nLWNzcCBhdHRyaWJ1dGUgYW55d2hlcmUgaW4gdGhlIGN1cnJlbnQgZG9jXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0NsaWNrXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgbmdDbGljayBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciB3aGVuXHJcbiAqIGFuIGVsZW1lbnQgaXMgY2xpY2tlZC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIGNsaWNrLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnRcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIDxzcGFuPlxyXG4gICAgICAgIGNvdW50OiB7e2NvdW50fX1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWNsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMScpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG4vKlxyXG4gKiBBIGNvbGxlY3Rpb24gb2YgZGlyZWN0aXZlcyB0aGF0IGFsbG93cyBjcmVhdGlvbiBvZiBjdXN0b20gZXZlbnQgaGFuZGxlcnMgdGhhdCBhcmUgZGVmaW5lZCBhc1xyXG4gKiBhbmd1bGFyIGV4cHJlc3Npb25zIGFuZCBhcmUgY29tcGlsZWQgYW5kIGV4ZWN1dGVkIHdpdGhpbiB0aGUgY3VycmVudCBzY29wZS5cclxuICovXHJcbnZhciBuZ0V2ZW50RGlyZWN0aXZlcyA9IHt9O1xyXG5cclxuLy8gRm9yIGV2ZW50cyB0aGF0IG1pZ2h0IGZpcmUgc3luY2hyb25vdXNseSBkdXJpbmcgRE9NIG1hbmlwdWxhdGlvblxyXG4vLyB3ZSBuZWVkIHRvIGV4ZWN1dGUgdGhlaXIgZXZlbnQgaGFuZGxlcnMgYXN5bmNocm9ub3VzbHkgdXNpbmcgJGV2YWxBc3luYyxcclxuLy8gc28gdGhhdCB0aGV5IGFyZSBub3QgZXhlY3V0ZWQgaW4gYW4gaW5jb25zaXN0ZW50IHN0YXRlLlxyXG52YXIgZm9yY2VBc3luY0V2ZW50cyA9IHtcclxuICAnYmx1cic6IHRydWUsXHJcbiAgJ2ZvY3VzJzogdHJ1ZVxyXG59O1xyXG5mb3JFYWNoKFxyXG4gICdjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlJy5zcGxpdCgnICcpLFxyXG4gIGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgdmFyIGRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBldmVudE5hbWUpO1xyXG4gICAgbmdFdmVudERpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0gPSBbJyRwYXJzZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHBhcnNlLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbigkZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgLy8gV2UgZXhwb3NlIHRoZSBwb3dlcmZ1bCAkZXZlbnQgb2JqZWN0IG9uIHRoZSBzY29wZSB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byB0aGUgV2luZG93LFxyXG4gICAgICAgICAgLy8gZXRjLiB0aGF0IGlzbid0IHByb3RlY3RlZCBieSB0aGUgZmFzdCBwYXRocyBpbiAkcGFyc2UuICBXZSBleHBsaWNpdGx5IHJlcXVlc3QgYmV0dGVyXHJcbiAgICAgICAgICAvLyBjaGVja3MgYXQgdGhlIGNvc3Qgb2Ygc3BlZWQgc2luY2UgZXZlbnQgaGFuZGxlciBleHByZXNzaW9ucyBhcmUgbm90IGV4ZWN1dGVkIGFzXHJcbiAgICAgICAgICAvLyBmcmVxdWVudGx5IGFzIHJlZ3VsYXIgY2hhbmdlIGRldGVjdGlvbi5cclxuICAgICAgICAgIHZhciBmbiA9ICRwYXJzZShhdHRyW2RpcmVjdGl2ZU5hbWVdLCAvKiBpbnRlcmNlcHRvckZuICovIG51bGwsIC8qIGV4cGVuc2l2ZUNoZWNrcyAqLyB0cnVlKTtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0V2ZW50SGFuZGxlcihzY29wZSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGZuKHNjb3BlLCB7JGV2ZW50OmV2ZW50fSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBpZiAoZm9yY2VBc3luY0V2ZW50c1tldmVudE5hbWVdICYmICRyb290U2NvcGUuJCRwaGFzZSkge1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfV07XHJcbiAgfVxyXG4pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdEYmxjbGlja1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ0RibGNsaWNrYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBhIGRibGNsaWNrIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0RibGNsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogYSBkYmxjbGljay4gKFRoZSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgKVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLWRibGNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxyXG4gICAgICAgIEluY3JlbWVudCAob24gZG91YmxlIGNsaWNrKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vdXNlZG93blxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIG5nTW91c2Vkb3duIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlZG93biBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWRvd24ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBtb3VzZWRvd24uICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNlZG93bj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIGRvd24pXHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW91c2V1cFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2V1cCBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2V1cC4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxidXR0b24gbmctbW91c2V1cD1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIHVwKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW91c2VvdmVyXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZW92ZXIgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VvdmVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2VvdmVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZW92ZXI9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGlzIG92ZXIpXHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW91c2VlbnRlclxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VlbnRlciBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWVudGVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogbW91c2VlbnRlci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxidXR0b24gbmctbW91c2VlbnRlcj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgZW50ZXJzKVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgY291bnQ6IHt7Y291bnR9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ01vdXNlbGVhdmVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbGVhdmUgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VsZWF2ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIG1vdXNlbGVhdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNlbGVhdmU9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGxlYXZlcylcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdNb3VzZW1vdmVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbW92ZSBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZW1vdmUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBtb3VzZW1vdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8YnV0dG9uIG5nLW1vdXNlbW92ZT1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgbW92ZXMpXHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBjb3VudDoge3tjb3VudH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nS2V5ZG93blxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5ZG93biBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXlkb3duIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICoga2V5ZG93bi4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGAgYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGlucHV0IG5nLWtleWRvd249XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XHJcbiAgICAgIGtleSBkb3duIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdLZXl1cFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5dXAgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5dXAge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBrZXl1cC4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGAgYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxwPlR5cGluZyBpbiB0aGUgaW5wdXQgYm94IGJlbG93IHVwZGF0ZXMgdGhlIGtleSBjb3VudDwvcD5cclxuICAgICAgIDxpbnB1dCBuZy1rZXl1cD1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj4ga2V5IHVwIGNvdW50OiB7e2NvdW50fX1cclxuXHJcbiAgICAgICA8cD5UeXBpbmcgaW4gdGhlIGlucHV0IGJveCBiZWxvdyB1cGRhdGVzIHRoZSBrZXljb2RlPC9wPlxyXG4gICAgICAgPGlucHV0IG5nLWtleXVwPVwiZXZlbnQ9JGV2ZW50XCI+XHJcbiAgICAgICA8cD5ldmVudCBrZXlDb2RlOiB7eyBldmVudC5rZXlDb2RlIH19PC9wPlxyXG4gICAgICAgPHA+ZXZlbnQgYWx0S2V5OiB7eyBldmVudC5hbHRLZXkgfX08L3A+XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nS2V5cHJlc3NcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleXByZXNzIGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleXByZXNzIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICoga2V5cHJlc3MuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9XHJcbiAqIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxpbnB1dCBuZy1rZXlwcmVzcz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cclxuICAgICAga2V5IHByZXNzIGNvdW50OiB7e2NvdW50fX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdTdWJtaXRcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIEVuYWJsZXMgYmluZGluZyBhbmd1bGFyIGV4cHJlc3Npb25zIHRvIG9uc3VibWl0IGV2ZW50cy5cclxuICpcclxuICogQWRkaXRpb25hbGx5IGl0IHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiAod2hpY2ggZm9yIGZvcm0gbWVhbnMgc2VuZGluZyB0aGUgcmVxdWVzdCB0byB0aGVcclxuICogc2VydmVyIGFuZCByZWxvYWRpbmcgdGhlIGN1cnJlbnQgcGFnZSksIGJ1dCBvbmx5IGlmIHRoZSBmb3JtIGRvZXMgbm90IGNvbnRhaW4gYGFjdGlvbmAsXHJcbiAqIGBkYXRhLWFjdGlvbmAsIG9yIGB4LWFjdGlvbmAgYXR0cmlidXRlcy5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipXYXJuaW5nOioqIEJlIGNhcmVmdWwgbm90IHRvIGNhdXNlIFwiZG91YmxlLXN1Ym1pc3Npb25cIiBieSB1c2luZyBib3RoIHRoZSBgbmdDbGlja2AgYW5kXHJcbiAqIGBuZ1N1Ym1pdGAgaGFuZGxlcnMgdG9nZXRoZXIuIFNlZSB0aGVcclxuICoge0BsaW5rIGZvcm0jc3VibWl0dGluZy1hLWZvcm0tYW5kLXByZXZlbnRpbmctdGhlLWRlZmF1bHQtYWN0aW9uIGBmb3JtYCBkaXJlY3RpdmUgZG9jdW1lbnRhdGlvbn1cclxuICogZm9yIGEgZGV0YWlsZWQgZGlzY3Vzc2lvbiBvZiB3aGVuIGBuZ1N1Ym1pdGAgbWF5IGJlIHRyaWdnZXJlZC5cclxuICogPC9kaXY+XHJcbiAqXHJcbiAqIEBlbGVtZW50IGZvcm1cclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1N1Ym1pdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLlxyXG4gKiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwic3VibWl0RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3N1Ym1pdEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5saXN0ID0gW107XHJcbiAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJ2hlbGxvJztcclxuICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUudGV4dCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QucHVzaCh0aGlzLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRleHQgPSAnJztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgIDwvc2NyaXB0PlxyXG4gICAgICA8Zm9ybSBuZy1zdWJtaXQ9XCJzdWJtaXQoKVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIEVudGVyIHRleHQgYW5kIGhpdCBlbnRlcjpcclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInRleHRcIiBuYW1lPVwidGV4dFwiIC8+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiBpZD1cInN1Ym1pdFwiIHZhbHVlPVwiU3VibWl0XCIgLz5cclxuICAgICAgICA8cHJlPmxpc3Q9e3tsaXN0fX08L3ByZT5cclxuICAgICAgPC9mb3JtPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXN1Ym1pdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xyXG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3N1Ym1pdCcpKS5jbGljaygpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndGV4dCcpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJycpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICBpdCgnc2hvdWxkIGlnbm9yZSBlbXB0eSBzdHJpbmdzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0PVtdJyk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2hlbGxvJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdGb2N1c1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gZm9jdXMgZXZlbnQuXHJcbiAqXHJcbiAqIE5vdGU6IEFzIHRoZSBgZm9jdXNgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBjYWxsaW5nIGBpbnB1dC5mb2N1cygpYFxyXG4gKiBBbmd1bGFySlMgZXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gdXNpbmcgYHNjb3BlLiRldmFsQXN5bmNgIGlmIHRoZSBldmVudCBpcyBmaXJlZFxyXG4gKiBkdXJpbmcgYW4gYCRhcHBseWAgdG8gZW5zdXJlIGEgY29uc2lzdGVudCBzdGF0ZS5cclxuICpcclxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nRm9jdXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBmb2N1cy4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0JsdXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGJsdXIgZXZlbnQuXHJcbiAqXHJcbiAqIEEgW2JsdXIgZXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0V2ZW50cy9ibHVyKSBmaXJlcyB3aGVuXHJcbiAqIGFuIGVsZW1lbnQgaGFzIGxvc3QgZm9jdXMuXHJcbiAqXHJcbiAqIE5vdGU6IEFzIHRoZSBgYmx1cmAgZXZlbnQgaXMgZXhlY3V0ZWQgc3luY2hyb25vdXNseSBhbHNvIGR1cmluZyBET00gbWFuaXB1bGF0aW9uc1xyXG4gKiAoZS5nLiByZW1vdmluZyBhIGZvY3Vzc2VkIGlucHV0KSxcclxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcclxuICogZHVyaW5nIGFuIGAkYXBwbHlgIHRvIGVuc3VyZSBhIGNvbnNpc3RlbnQgc3RhdGUuXHJcbiAqXHJcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0JsdXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBibHVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICogU2VlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nQ29weVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY29weSBldmVudC5cclxuICpcclxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxyXG4gKiBAcHJpb3JpdHkgMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ29weSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXHJcbiAqIGNvcHkuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgbmctY29weT1cImNvcGllZD10cnVlXCIgbmctaW5pdD1cImNvcGllZD1mYWxzZTsgdmFsdWU9J2NvcHkgbWUnXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPlxyXG4gICAgICBjb3BpZWQ6IHt7Y29waWVkfX1cclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0N1dFxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY3V0IGV2ZW50LlxyXG4gKlxyXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXHJcbiAqIEBwcmlvcml0eSAwXHJcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDdXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxyXG4gKiBjdXQuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgbmctY3V0PVwiY3V0PXRydWVcIiBuZy1pbml0PVwiY3V0PWZhbHNlOyB2YWx1ZT0nY3V0IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cclxuICAgICAgY3V0OiB7e2N1dH19XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdQYXN0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gcGFzdGUgZXZlbnQuXHJcbiAqXHJcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcclxuICogQHByaW9yaXR5IDBcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1Bhc3RlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cclxuICogcGFzdGUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8aW5wdXQgbmctcGFzdGU9XCJwYXN0ZT10cnVlXCIgbmctaW5pdD1cInBhc3RlPWZhbHNlXCIgcGxhY2Vob2xkZXI9J3Bhc3RlIGhlcmUnPlxyXG4gICAgICBwYXN0ZWQ6IHt7cGFzdGV9fVxyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nSWZcclxuICogQHJlc3RyaWN0IEFcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdJZmAgZGlyZWN0aXZlIHJlbW92ZXMgb3IgcmVjcmVhdGVzIGEgcG9ydGlvbiBvZiB0aGUgRE9NIHRyZWUgYmFzZWQgb24gYW5cclxuICoge2V4cHJlc3Npb259LiBJZiB0aGUgZXhwcmVzc2lvbiBhc3NpZ25lZCB0byBgbmdJZmAgZXZhbHVhdGVzIHRvIGEgZmFsc2VcclxuICogdmFsdWUgdGhlbiB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSwgb3RoZXJ3aXNlIGEgY2xvbmUgb2YgdGhlXHJcbiAqIGVsZW1lbnQgaXMgcmVpbnNlcnRlZCBpbnRvIHRoZSBET00uXHJcbiAqXHJcbiAqIGBuZ0lmYCBkaWZmZXJzIGZyb20gYG5nU2hvd2AgYW5kIGBuZ0hpZGVgIGluIHRoYXQgYG5nSWZgIGNvbXBsZXRlbHkgcmVtb3ZlcyBhbmQgcmVjcmVhdGVzIHRoZVxyXG4gKiBlbGVtZW50IGluIHRoZSBET00gcmF0aGVyIHRoYW4gY2hhbmdpbmcgaXRzIHZpc2liaWxpdHkgdmlhIHRoZSBgZGlzcGxheWAgY3NzIHByb3BlcnR5LiAgQSBjb21tb25cclxuICogY2FzZSB3aGVuIHRoaXMgZGlmZmVyZW5jZSBpcyBzaWduaWZpY2FudCBpcyB3aGVuIHVzaW5nIGNzcyBzZWxlY3RvcnMgdGhhdCByZWx5IG9uIGFuIGVsZW1lbnQnc1xyXG4gKiBwb3NpdGlvbiB3aXRoaW4gdGhlIERPTSwgc3VjaCBhcyB0aGUgYDpmaXJzdC1jaGlsZGAgb3IgYDpsYXN0LWNoaWxkYCBwc2V1ZG8tY2xhc3Nlcy5cclxuICpcclxuICogTm90ZSB0aGF0IHdoZW4gYW4gZWxlbWVudCBpcyByZW1vdmVkIHVzaW5nIGBuZ0lmYCBpdHMgc2NvcGUgaXMgZGVzdHJveWVkIGFuZCBhIG5ldyBzY29wZVxyXG4gKiBpcyBjcmVhdGVkIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVzdG9yZWQuICBUaGUgc2NvcGUgY3JlYXRlZCB3aXRoaW4gYG5nSWZgIGluaGVyaXRzIGZyb21cclxuICogaXRzIHBhcmVudCBzY29wZSB1c2luZ1xyXG4gKiBbcHJvdG90eXBhbCBpbmhlcml0YW5jZV0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy93aWtpL1VuZGVyc3RhbmRpbmctU2NvcGVzI2phdmFzY3JpcHQtcHJvdG90eXBhbC1pbmhlcml0YW5jZSkuXHJcbiAqIEFuIGltcG9ydGFudCBpbXBsaWNhdGlvbiBvZiB0aGlzIGlzIGlmIGBuZ01vZGVsYCBpcyB1c2VkIHdpdGhpbiBgbmdJZmAgdG8gYmluZCB0b1xyXG4gKiBhIGphdmFzY3JpcHQgcHJpbWl0aXZlIGRlZmluZWQgaW4gdGhlIHBhcmVudCBzY29wZS4gSW4gdGhpcyBjYXNlIGFueSBtb2RpZmljYXRpb25zIG1hZGUgdG8gdGhlXHJcbiAqIHZhcmlhYmxlIHdpdGhpbiB0aGUgY2hpbGQgc2NvcGUgd2lsbCBvdmVycmlkZSAoaGlkZSkgdGhlIHZhbHVlIGluIHRoZSBwYXJlbnQgc2NvcGUuXHJcbiAqXHJcbiAqIEFsc28sIGBuZ0lmYCByZWNyZWF0ZXMgZWxlbWVudHMgdXNpbmcgdGhlaXIgY29tcGlsZWQgc3RhdGUuIEFuIGV4YW1wbGUgb2YgdGhpcyBiZWhhdmlvclxyXG4gKiBpcyBpZiBhbiBlbGVtZW50J3MgY2xhc3MgYXR0cmlidXRlIGlzIGRpcmVjdGx5IG1vZGlmaWVkIGFmdGVyIGl0J3MgY29tcGlsZWQsIHVzaW5nIHNvbWV0aGluZyBsaWtlXHJcbiAqIGpRdWVyeSdzIGAuYWRkQ2xhc3MoKWAgbWV0aG9kLCBhbmQgdGhlIGVsZW1lbnQgaXMgbGF0ZXIgcmVtb3ZlZC4gV2hlbiBgbmdJZmAgcmVjcmVhdGVzIHRoZSBlbGVtZW50XHJcbiAqIHRoZSBhZGRlZCBjbGFzcyB3aWxsIGJlIGxvc3QgYmVjYXVzZSB0aGUgb3JpZ2luYWwgY29tcGlsZWQgc3RhdGUgaXMgdXNlZCB0byByZWdlbmVyYXRlIHRoZSBlbGVtZW50LlxyXG4gKlxyXG4gKiBBZGRpdGlvbmFsbHksIHlvdSBjYW4gcHJvdmlkZSBhbmltYXRpb25zIHZpYSB0aGUgYG5nQW5pbWF0ZWAgbW9kdWxlIHRvIGFuaW1hdGUgdGhlIGBlbnRlcmBcclxuICogYW5kIGBsZWF2ZWAgZWZmZWN0cy5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogZW50ZXIgLSBoYXBwZW5zIGp1c3QgYWZ0ZXIgdGhlIGBuZ0lmYCBjb250ZW50cyBjaGFuZ2UgYW5kIGEgbmV3IERPTSBlbGVtZW50IGlzIGNyZWF0ZWQgYW5kIGluamVjdGVkIGludG8gdGhlIGBuZ0lmYCBjb250YWluZXJcclxuICogbGVhdmUgLSBoYXBwZW5zIGp1c3QgYmVmb3JlIHRoZSBgbmdJZmAgY29udGVudHMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAc2NvcGVcclxuICogQHByaW9yaXR5IDYwMFxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSWYgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGZhbHN5IHRoZW5cclxuICogICAgIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NIHRyZWUuIElmIGl0IGlzIHRydXRoeSBhIGNvcHkgb2YgdGhlIGNvbXBpbGVkXHJcbiAqICAgICBlbGVtZW50IGlzIGFkZGVkIHRvIHRoZSBET00gdHJlZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIENsaWNrIG1lOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCIgbmctaW5pdD1cImNoZWNrZWQ9dHJ1ZVwiIC8+PGJyLz5cclxuICAgICAgU2hvdyB3aGVuIGNoZWNrZWQ6XHJcbiAgICAgIDxzcGFuIG5nLWlmPVwiY2hlY2tlZFwiIGNsYXNzPVwiYW5pbWF0ZS1pZlwiPlxyXG4gICAgICAgIFRoaXMgaXMgcmVtb3ZlZCB3aGVuIHRoZSBjaGVja2JveCBpcyB1bmNoZWNrZWQuXHJcbiAgICAgIDwvc3Bhbj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAuYW5pbWF0ZS1pZiB7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtaWYubmctZW50ZXIsIC5hbmltYXRlLWlmLm5nLWxlYXZlIHtcclxuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcclxuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLFxyXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xyXG4gICAgICAgIG9wYWNpdHk6MDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtaWYubmctbGVhdmUsXHJcbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XHJcbiAgICAgICAgb3BhY2l0eToxO1xyXG4gICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nSWZEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxyXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gICAgcHJpb3JpdHk6IDYwMCxcclxuICAgIHRlcm1pbmFsOiB0cnVlLFxyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICQkdGxiOiB0cnVlLFxyXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XHJcbiAgICAgICAgdmFyIGJsb2NrLCBjaGlsZFNjb3BlLCBwcmV2aW91c0VsZW1lbnRzO1xyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJGF0dHIubmdJZiwgZnVuY3Rpb24gbmdJZldhdGNoQWN0aW9uKHZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICghY2hpbGRTY29wZSkge1xyXG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlKGZ1bmN0aW9uKGNsb25lLCBuZXdTY29wZSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IG5ld1Njb3BlO1xyXG4gICAgICAgICAgICAgICAgY2xvbmVbY2xvbmUubGVuZ3RoKytdID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnIGVuZCBuZ0lmOiAnICsgJGF0dHIubmdJZiArICcgJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBvbmx5IG5lZWQgdGhlIGZpcnN0L2xhc3Qgbm9kZSBvZiB0aGUgY2xvbmVkIG5vZGVzLlxyXG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgd2UgbmVlZCB0byBrZWVwIHRoZSByZWZlcmVuY2UgdG8gdGhlIGpxbGl0ZSB3cmFwcGVyIGFzIGl0IG1pZ2h0IGJlIGNoYW5nZWQgbGF0ZXJcclxuICAgICAgICAgICAgICAgIC8vIGJ5IGEgZGlyZWN0aXZlIHdpdGggdGVtcGxhdGVVcmwgd2hlbiBpdHMgdGVtcGxhdGUgYXJyaXZlcy5cclxuICAgICAgICAgICAgICAgIGJsb2NrID0ge1xyXG4gICAgICAgICAgICAgICAgICBjbG9uZTogY2xvbmVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgJGVsZW1lbnQucGFyZW50KCksICRlbGVtZW50KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaGlsZFNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgY2hpbGRTY29wZS4kZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChibG9jaykge1xyXG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMgPSBnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKTtcclxuICAgICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShwcmV2aW91c0VsZW1lbnRzKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgYmxvY2sgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0luY2x1ZGVcclxuICogQHJlc3RyaWN0IEVDQVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRmV0Y2hlcywgY29tcGlsZXMgYW5kIGluY2x1ZGVzIGFuIGV4dGVybmFsIEhUTUwgZnJhZ21lbnQuXHJcbiAqXHJcbiAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcmVzdHJpY3RlZCB0byB0aGUgc2FtZSBkb21haW4gYW5kIHByb3RvY29sIGFzIHRoZVxyXG4gKiBhcHBsaWNhdGlvbiBkb2N1bWVudC4gVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rICRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXHJcbiAqICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsfSBvbiBpdC4gVG8gbG9hZCB0ZW1wbGF0ZXMgZnJvbSBvdGhlciBkb21haW5zIG9yIHByb3RvY29sc1xyXG4gKiB5b3UgbWF5IGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0IHRoZW19IG9yXHJcbiAqIHtAbGluayAkc2NlI3RydXN0QXNSZXNvdXJjZVVybCB3cmFwIHRoZW19IGFzIHRydXN0ZWQgdmFsdWVzLiBSZWZlciB0byBBbmd1bGFyJ3Mge0BsaW5rXHJcbiAqIG5nLiRzY2UgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmd9LlxyXG4gKlxyXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGJyb3dzZXInc1xyXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxyXG4gKiBhbmQgW0Nyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKV0oaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8pXHJcbiAqIHBvbGljeSBtYXkgZnVydGhlciByZXN0cmljdCB3aGV0aGVyIHRoZSB0ZW1wbGF0ZSBpcyBzdWNjZXNzZnVsbHkgbG9hZGVkLlxyXG4gKiBGb3IgZXhhbXBsZSwgYG5nSW5jbHVkZWAgd29uJ3Qgd29yayBmb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzIG9uIGFsbCBicm93c2VycyBhbmQgZm9yIGBmaWxlOi8vYFxyXG4gKiBhY2Nlc3Mgb24gc29tZSBicm93c2Vycy5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogZW50ZXIgLSBhbmltYXRpb24gaXMgdXNlZCB0byBicmluZyBuZXcgY29udGVudCBpbnRvIHRoZSBicm93c2VyLlxyXG4gKiBsZWF2ZSAtIGFuaW1hdGlvbiBpcyB1c2VkIHRvIGFuaW1hdGUgZXhpc3RpbmcgY29udGVudCBhd2F5LlxyXG4gKlxyXG4gKiBUaGUgZW50ZXIgYW5kIGxlYXZlIGFuaW1hdGlvbiBvY2N1ciBjb25jdXJyZW50bHkuXHJcbiAqXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgNDAwXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ0luY2x1ZGV8c3JjIGFuZ3VsYXIgZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIFVSTC4gSWYgdGhlIHNvdXJjZSBpcyBhIHN0cmluZyBjb25zdGFudCxcclxuICogICAgICAgICAgICAgICAgIG1ha2Ugc3VyZSB5b3Ugd3JhcCBpdCBpbiAqKnNpbmdsZSoqIHF1b3RlcywgZS5nLiBgc3JjPVwiJ215UGFydGlhbFRlbXBsYXRlLmh0bWwnXCJgLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG9ubG9hZCBFeHByZXNzaW9uIHRvIGV2YWx1YXRlIHdoZW4gYSBuZXcgcGFydGlhbCBpcyBsb2FkZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gYXV0b3Njcm9sbCBXaGV0aGVyIGBuZ0luY2x1ZGVgIHNob3VsZCBjYWxsIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsXHJcbiAqICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbH0gdG8gc2Nyb2xsIHRoZSB2aWV3cG9ydCBhZnRlciB0aGUgY29udGVudCBpcyBsb2FkZWQuXHJcbiAqXHJcbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIG5vdCBzZXQsIGRpc2FibGUgc2Nyb2xsaW5nLlxyXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBzZXQgd2l0aG91dCB2YWx1ZSwgZW5hYmxlIHNjcm9sbGluZy5cclxuICogICAgICAgICAgICAgICAgICAtIE90aGVyd2lzZSBlbmFibGUgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydXRoeSB2YWx1ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICA8ZXhhbXBsZSBtb2R1bGU9XCJpbmNsdWRlRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cInRlbXBsYXRlXCIgbmctb3B0aW9ucz1cInQubmFtZSBmb3IgdCBpbiB0ZW1wbGF0ZXNcIj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+KGJsYW5rKTwvb3B0aW9uPlxyXG4gICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICB1cmwgb2YgdGhlIHRlbXBsYXRlOiA8Y29kZT57e3RlbXBsYXRlLnVybH19PC9jb2RlPlxyXG4gICAgICAgPGhyLz5cclxuICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYW5pbWF0ZVwiIG5nLWluY2x1ZGU9XCJ0ZW1wbGF0ZS51cmxcIj48L2Rpdj5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnaW5jbHVkZUV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGVzID1cclxuICAgICAgICAgICAgWyB7IG5hbWU6ICd0ZW1wbGF0ZTEuaHRtbCcsIHVybDogJ3RlbXBsYXRlMS5odG1sJ30sXHJcbiAgICAgICAgICAgICAgeyBuYW1lOiAndGVtcGxhdGUyLmh0bWwnLCB1cmw6ICd0ZW1wbGF0ZTIuaHRtbCd9IF07XHJcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUudGVtcGxhdGVzWzBdO1xyXG4gICAgICAgIH1dKTtcclxuICAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUxLmh0bWxcIj5cclxuICAgICAgQ29udGVudCBvZiB0ZW1wbGF0ZTEuaHRtbFxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInRlbXBsYXRlMi5odG1sXCI+XHJcbiAgICAgIENvbnRlbnQgb2YgdGVtcGxhdGUyLmh0bWxcclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS1jb250YWluZXIge1xyXG4gICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBoZWlnaHQ6NDBweDtcclxuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5zbGlkZS1hbmltYXRlIHtcclxuICAgICAgICBwYWRkaW5nOjEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyLCAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZSB7XHJcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xyXG5cclxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICB0b3A6MDtcclxuICAgICAgICBsZWZ0OjA7XHJcbiAgICAgICAgcmlnaHQ6MDtcclxuICAgICAgICBib3R0b206MDtcclxuICAgICAgICBkaXNwbGF5OmJsb2NrO1xyXG4gICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctZW50ZXIge1xyXG4gICAgICAgIHRvcDotNTBweDtcclxuICAgICAgfVxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xyXG4gICAgICAgIHRvcDowO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZSB7XHJcbiAgICAgICAgdG9wOjA7XHJcbiAgICAgIH1cclxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUubmctbGVhdmUtYWN0aXZlIHtcclxuICAgICAgICB0b3A6NTBweDtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgdGVtcGxhdGVTZWxlY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZW1wbGF0ZScpKTtcclxuICAgICAgdmFyIGluY2x1ZGVFbGVtID0gZWxlbWVudChieS5jc3MoJ1tuZy1pbmNsdWRlXScpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZTEuaHRtbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL0NvbnRlbnQgb2YgdGVtcGxhdGUxLmh0bWwvKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUyLmh0bWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnZmlyZWZveCcpIHtcclxuICAgICAgICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHVzaW5nIHNlbGVjdHNcclxuICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODBcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcclxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDIpLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KGluY2x1ZGVFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0ZW1wbGF0ZTIuaHRtbC8pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHRvIGJsYW5rJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT0gJ2ZpcmVmb3gnKSB7XHJcbiAgICAgICAgICAvLyBGaXJlZm94IGNhbid0IGhhbmRsZSB1c2luZyBzZWxlY3RzXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRlbXBsYXRlU2VsZWN0LmNsaWNrKCk7XHJcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgwKS5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChpbmNsdWRlRWxlbS5pc1ByZXNlbnQoKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBldmVudFxyXG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXHJcbiAqIEBldmVudFR5cGUgZW1pdCBvbiB0aGUgc2NvcGUgbmdJbmNsdWRlIHdhcyBkZWNsYXJlZCBpblxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZXF1ZXN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cclxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGV2ZW50XHJcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRMb2FkZWRcclxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBjdXJyZW50IG5nSW5jbHVkZSBzY29wZVxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRW1pdHRlZCBldmVyeSB0aW1lIHRoZSBuZ0luY2x1ZGUgY29udGVudCBpcyByZWxvYWRlZC5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gc3JjIFVSTCBvZiBjb250ZW50IHRvIGxvYWQuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZXZlbnRcclxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudEVycm9yXHJcbiAqIEBldmVudFR5cGUgZW1pdCBvbiB0aGUgc2NvcGUgbmdJbmNsdWRlIHdhcyBkZWNsYXJlZCBpblxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogRW1pdHRlZCB3aGVuIGEgdGVtcGxhdGUgSFRUUCByZXF1ZXN0IHlpZWxkcyBhbiBlcnJvbmVvdXMgcmVzcG9uc2UgKHN0YXR1cyA8IDIwMCB8fCBzdGF0dXMgPiAyOTkpXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cclxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxyXG4gKi9cclxudmFyIG5nSW5jbHVkZURpcmVjdGl2ZSA9IFsnJHRlbXBsYXRlUmVxdWVzdCcsICckYW5jaG9yU2Nyb2xsJywgJyRhbmltYXRlJywgJyRzY2UnLFxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbigkdGVtcGxhdGVSZXF1ZXN0LCAgICRhbmNob3JTY3JvbGwsICAgJGFuaW1hdGUsICAgJHNjZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0VDQScsXHJcbiAgICBwcmlvcml0eTogNDAwLFxyXG4gICAgdGVybWluYWw6IHRydWUsXHJcbiAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXHJcbiAgICBjb250cm9sbGVyOiBhbmd1bGFyLm5vb3AsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgIHZhciBzcmNFeHAgPSBhdHRyLm5nSW5jbHVkZSB8fCBhdHRyLnNyYyxcclxuICAgICAgICAgIG9ubG9hZEV4cCA9IGF0dHIub25sb2FkIHx8ICcnLFxyXG4gICAgICAgICAgYXV0b1Njcm9sbEV4cCA9IGF0dHIuYXV0b3Njcm9sbDtcclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xyXG4gICAgICAgIHZhciBjaGFuZ2VDb3VudGVyID0gMCxcclxuICAgICAgICAgICAgY3VycmVudFNjb3BlLFxyXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50O1xyXG5cclxuICAgICAgICB2YXIgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHByZXZpb3VzRWxlbWVudCkge1xyXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoY3VycmVudFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGN1cnJlbnRFbGVtZW50KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBjdXJyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLiR3YXRjaCgkc2NlLnBhcnNlQXNSZXNvdXJjZVVybChzcmNFeHApLCBmdW5jdGlvbiBuZ0luY2x1ZGVXYXRjaEFjdGlvbihzcmMpIHtcclxuICAgICAgICAgIHZhciBhZnRlckFuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApICYmICghYXV0b1Njcm9sbEV4cCB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkpIHtcclxuICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB2YXIgdGhpc0NoYW5nZUlkID0gKytjaGFuZ2VDb3VudGVyO1xyXG5cclxuICAgICAgICAgIGlmIChzcmMpIHtcclxuICAgICAgICAgICAgLy9zZXQgdGhlIDJuZCBwYXJhbSB0byB0cnVlIHRvIGlnbm9yZSB0aGUgdGVtcGxhdGUgcmVxdWVzdCBlcnJvciBzbyB0aGF0IHRoZSBpbm5lclxyXG4gICAgICAgICAgICAvL2NvbnRlbnRzIGFuZCBzY29wZSBjYW4gYmUgY2xlYW5lZCB1cC5cclxuICAgICAgICAgICAgJHRlbXBsYXRlUmVxdWVzdChzcmMsIHRydWUpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICBpZiAodGhpc0NoYW5nZUlkICE9PSBjaGFuZ2VDb3VudGVyKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgdmFyIG5ld1Njb3BlID0gc2NvcGUuJG5ldygpO1xyXG4gICAgICAgICAgICAgIGN0cmwudGVtcGxhdGUgPSByZXNwb25zZTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gTm90ZTogVGhpcyB3aWxsIGFsc28gbGluayBhbGwgY2hpbGRyZW4gb2YgbmctaW5jbHVkZSB0aGF0IHdlcmUgY29udGFpbmVkIGluIHRoZSBvcmlnaW5hbFxyXG4gICAgICAgICAgICAgIC8vIGh0bWwuIElmIHRoYXQgY29udGVudCBjb250YWlucyBjb250cm9sbGVycywgLi4uIHRoZXkgY291bGQgcG9sbHV0ZS9jaGFuZ2UgdGhlIHNjb3BlLlxyXG4gICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHVzaW5nIG5nLWluY2x1ZGUgb24gYW4gZWxlbWVudCB3aXRoIGFkZGl0aW9uYWwgY29udGVudCBkb2VzIG5vdCBtYWtlIHNlbnNlLi4uXHJcbiAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2FuJ3QgcmVtb3ZlIHRoZW0gaW4gdGhlIGNsb25lQXR0Y2hGbiBvZiAkdHJhbnNjbHVkZSBhcyB0aGF0XHJcbiAgICAgICAgICAgICAgLy8gZnVuY3Rpb24gaXMgY2FsbGVkIGJlZm9yZSBsaW5raW5nIHRoZSBjb250ZW50LCB3aGljaCB3b3VsZCBhcHBseSBjaGlsZFxyXG4gICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZXMgdG8gbm9uIGV4aXN0aW5nIGVsZW1lbnRzLlxyXG4gICAgICAgICAgICAgIHZhciBjbG9uZSA9ICR0cmFuc2NsdWRlKG5ld1Njb3BlLCBmdW5jdGlvbihjbG9uZSkge1xyXG4gICAgICAgICAgICAgICAgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO1xyXG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsICRlbGVtZW50KS50aGVuKGFmdGVyQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7XHJcbiAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjbG9uZTtcclxuXHJcbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRMb2FkZWQnLCBzcmMpO1xyXG4gICAgICAgICAgICAgIHNjb3BlLiRldmFsKG9ubG9hZEV4cCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgPT09IGNoYW5nZUNvdW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQoKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRFcnJvcicsIHNyYyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudFJlcXVlc3RlZCcsIHNyYyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XHJcbiAgICAgICAgICAgIGN0cmwudGVtcGxhdGUgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxuLy8gVGhpcyBkaXJlY3RpdmUgaXMgY2FsbGVkIGR1cmluZyB0aGUgJHRyYW5zY2x1ZGUgY2FsbCBvZiB0aGUgZmlyc3QgYG5nSW5jbHVkZWAgZGlyZWN0aXZlLlxyXG4vLyBJdCB3aWxsIHJlcGxhY2UgYW5kIGNvbXBpbGUgdGhlIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgd2l0aCB0aGUgbG9hZGVkIHRlbXBsYXRlLlxyXG4vLyBXZSBuZWVkIHRoaXMgZGlyZWN0aXZlIHNvIHRoYXQgdGhlIGVsZW1lbnQgY29udGVudCBpcyBhbHJlYWR5IGZpbGxlZCB3aGVuXHJcbi8vIHRoZSBsaW5rIGZ1bmN0aW9uIG9mIGFub3RoZXIgZGlyZWN0aXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgbmdJbmNsdWRlXHJcbi8vIGlzIGNhbGxlZC5cclxudmFyIG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlID0gWyckY29tcGlsZScsXHJcbiAgZnVuY3Rpb24oJGNvbXBpbGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUNBJyxcclxuICAgICAgcHJpb3JpdHk6IC00MDAsXHJcbiAgICAgIHJlcXVpcmU6ICduZ0luY2x1ZGUnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsKSB7XHJcbiAgICAgICAgaWYgKC9TVkcvLnRlc3QoJGVsZW1lbnRbMF0udG9TdHJpbmcoKSkpIHtcclxuICAgICAgICAgIC8vIFdlYktpdDogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNTY5OCAtLS0gU1ZHIGVsZW1lbnRzIGRvIG5vdFxyXG4gICAgICAgICAgLy8gc3VwcG9ydCBpbm5lckhUTUwsIHNvIGRldGVjdCB0aGlzIGhlcmUgYW5kIHRyeSB0byBnZW5lcmF0ZSB0aGUgY29udGVudHNcclxuICAgICAgICAgIC8vIHNwZWNpYWxseS5cclxuICAgICAgICAgICRlbGVtZW50LmVtcHR5KCk7XHJcbiAgICAgICAgICAkY29tcGlsZShqcUxpdGVCdWlsZEZyYWdtZW50KGN0cmwudGVtcGxhdGUsIGRvY3VtZW50KS5jaGlsZE5vZGVzKShzY29wZSxcclxuICAgICAgICAgICAgICBmdW5jdGlvbiBuYW1lc3BhY2VBZGFwdGVkQ2xvbmUoY2xvbmUpIHtcclxuICAgICAgICAgICAgJGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcclxuICAgICAgICAgIH0sIHtmdXR1cmVQYXJlbnRFbGVtZW50OiAkZWxlbWVudH0pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGVsZW1lbnQuaHRtbChjdHJsLnRlbXBsYXRlKTtcclxuICAgICAgICAkY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfV07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ0luaXRcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nSW5pdGAgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gZXZhbHVhdGUgYW4gZXhwcmVzc2lvbiBpbiB0aGVcclxuICogY3VycmVudCBzY29wZS5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+XHJcbiAqIFRoZSBvbmx5IGFwcHJvcHJpYXRlIHVzZSBvZiBgbmdJbml0YCBpcyBmb3IgYWxpYXNpbmcgc3BlY2lhbCBwcm9wZXJ0aWVzIG9mXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgYG5nUmVwZWF0YH0sIGFzIHNlZW4gaW4gdGhlIGRlbW8gYmVsb3cuIEJlc2lkZXMgdGhpcyBjYXNlLCB5b3VcclxuICogc2hvdWxkIHVzZSB7QGxpbmsgZ3VpZGUvY29udHJvbGxlciBjb250cm9sbGVyc30gcmF0aGVyIHRoYW4gYG5nSW5pdGBcclxuICogdG8gaW5pdGlhbGl6ZSB2YWx1ZXMgb24gYSBzY29wZS5cclxuICogPC9kaXY+XHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAqICoqTm90ZSoqOiBJZiB5b3UgaGF2ZSBhc3NpZ25tZW50IGluIGBuZ0luaXRgIGFsb25nIHdpdGgge0BsaW5rIG5nLiRmaWx0ZXIgYCRmaWx0ZXJgfSwgbWFrZVxyXG4gKiBzdXJlIHlvdSBoYXZlIHBhcmVudGhlc2lzIGZvciBjb3JyZWN0IHByZWNlZGVuY2U6XHJcbiAqIDxwcmUgY2xhc3M9XCJwcmV0dHlwcmludFwiPlxyXG4gKiBgPGRpdiBuZy1pbml0PVwidGVzdDEgPSAoZGF0YSB8IG9yZGVyQnk6J25hbWUnKVwiPjwvZGl2PmBcclxuICogPC9wcmU+XHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBAcHJpb3JpdHkgNDUwXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSW5pdCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJpbml0RXhhbXBsZVwiPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgIDxzY3JpcHQ+XHJcbiAgICAgYW5ndWxhci5tb2R1bGUoJ2luaXRFeGFtcGxlJywgW10pXHJcbiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAkc2NvcGUubGlzdCA9IFtbJ2EnLCAnYiddLCBbJ2MnLCAnZCddXTtcclxuICAgICAgIH1dKTtcclxuICAgPC9zY3JpcHQ+XHJcbiAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgPGRpdiBuZy1yZXBlYXQ9XCJpbm5lckxpc3QgaW4gbGlzdFwiIG5nLWluaXQ9XCJvdXRlckluZGV4ID0gJGluZGV4XCI+XHJcbiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInZhbHVlIGluIGlubmVyTGlzdFwiIG5nLWluaXQ9XCJpbm5lckluZGV4ID0gJGluZGV4XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImV4YW1wbGUtaW5pdFwiPmxpc3RbIHt7b3V0ZXJJbmRleH19IF1bIHt7aW5uZXJJbmRleH19IF0gPSB7e3ZhbHVlfX07PC9zcGFuPlxyXG4gICAgICAgPC9kaXY+XHJcbiAgICAgPC9kaXY+XHJcbiAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGFsaWFzIGluZGV4IHBvc2l0aW9ucycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGVtZW50LmFsbChieS5jc3MoJy5leGFtcGxlLWluaXQnKSk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMCkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDAgXSA9IGE7Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMSkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDEgXSA9IGI7Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMikuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDAgXSA9IGM7Jyk7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMykuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDEgXSA9IGQ7Jyk7XHJcbiAgICAgICB9KTtcclxuICAgICA8L2ZpbGU+XHJcbiAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ0luaXREaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XHJcbiAgcHJpb3JpdHk6IDQ1MCxcclxuICBjb21waWxlOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgc2NvcGUuJGV2YWwoYXR0cnMubmdJbml0KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdMaXN0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUZXh0IGlucHV0IHRoYXQgY29udmVydHMgYmV0d2VlbiBhIGRlbGltaXRlZCBzdHJpbmcgYW5kIGFuIGFycmF5IG9mIHN0cmluZ3MuIFRoZSBkZWZhdWx0XHJcbiAqIGRlbGltaXRlciBpcyBhIGNvbW1hIGZvbGxvd2VkIGJ5IGEgc3BhY2UgLSBlcXVpdmFsZW50IHRvIGBuZy1saXN0PVwiLCBcImAuIFlvdSBjYW4gc3BlY2lmeSBhIGN1c3RvbVxyXG4gKiBkZWxpbWl0ZXIgYXMgdGhlIHZhbHVlIG9mIHRoZSBgbmdMaXN0YCBhdHRyaWJ1dGUgLSBmb3IgZXhhbXBsZSwgYG5nLWxpc3Q9XCIgfCBcImAuXHJcbiAqXHJcbiAqIFRoZSBiZWhhdmlvdXIgb2YgdGhlIGRpcmVjdGl2ZSBpcyBhZmZlY3RlZCBieSB0aGUgdXNlIG9mIHRoZSBgbmdUcmltYCBhdHRyaWJ1dGUuXHJcbiAqICogSWYgYG5nVHJpbWAgaXMgc2V0IHRvIGBcImZhbHNlXCJgIHRoZW4gd2hpdGVzcGFjZSBhcm91bmQgYm90aCB0aGUgc2VwYXJhdG9yIGFuZCBlYWNoXHJcbiAqICAgbGlzdCBpdGVtIGlzIHJlc3BlY3RlZC4gVGhpcyBpbXBsaWVzIHRoYXQgdGhlIHVzZXIgb2YgdGhlIGRpcmVjdGl2ZSBpcyByZXNwb25zaWJsZSBmb3JcclxuICogICBkZWFsaW5nIHdpdGggd2hpdGVzcGFjZSBidXQgYWxzbyBhbGxvd3MgeW91IHRvIHVzZSB3aGl0ZXNwYWNlIGFzIGEgZGVsaW1pdGVyLCBzdWNoIGFzIGFcclxuICogICB0YWIgb3IgbmV3bGluZSBjaGFyYWN0ZXIuXHJcbiAqICogT3RoZXJ3aXNlIHdoaXRlc3BhY2UgYXJvdW5kIHRoZSBkZWxpbWl0ZXIgaXMgaWdub3JlZCB3aGVuIHNwbGl0dGluZyAoYWx0aG91Z2ggaXQgaXMgcmVzcGVjdGVkXHJcbiAqICAgd2hlbiBqb2luaW5nIHRoZSBsaXN0IGl0ZW1zIGJhY2sgdG9nZXRoZXIpIGFuZCB3aGl0ZXNwYWNlIGFyb3VuZCBlYWNoIGxpc3QgaXRlbSBpcyBzdHJpcHBlZFxyXG4gKiAgIGJlZm9yZSBpdCBpcyBhZGRlZCB0byB0aGUgbW9kZWwuXHJcbiAqXHJcbiAqICMjIyBFeGFtcGxlIHdpdGggVmFsaWRhdGlvblxyXG4gKlxyXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdMaXN0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImxpc3RFeGFtcGxlXCI+XHJcbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaXN0RXhhbXBsZScsIFtdKVxyXG4gKiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICogICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydtb3JwaGV1cycsICduZW8nLCAndHJpbml0eSddO1xyXG4gKiAgICAgICAgfV0pO1xyXG4gKiAgIDwvZmlsZT5cclxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAqICAgICAgTGlzdDogPGlucHV0IG5hbWU9XCJuYW1lc0lucHV0XCIgbmctbW9kZWw9XCJuYW1lc1wiIG5nLWxpc3QgcmVxdWlyZWQ+XHJcbiAqICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cclxuICogICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cclxuICogICAgICA8YnI+XHJcbiAqICAgICAgPHR0Pm5hbWVzID0ge3tuYW1lc319PC90dD48YnIvPlxyXG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZH19PC90dD48YnIvPlxyXG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5uYW1lc0lucHV0LiRlcnJvcn19PC90dD48YnIvPlxyXG4gKiAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XHJcbiAqICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxyXG4gKiAgICAgPC9mb3JtPlxyXG4gKiAgIDwvZmlsZT5cclxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAqICAgICB2YXIgbGlzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZXMnKSk7XHJcbiAqICAgICB2YXIgbmFtZXMgPSBlbGVtZW50KGJ5LmV4YWN0QmluZGluZygnbmFtZXMnKSk7XHJcbiAqICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCcpKTtcclxuICogICAgIHZhciBlcnJvciA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmVycm9yJykpO1xyXG4gKlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGV4cGVjdChuYW1lcy5nZXRUZXh0KCkpLnRvQ29udGFpbignW1wibW9ycGhldXNcIixcIm5lb1wiLFwidHJpbml0eVwiXScpO1xyXG4gKiAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcclxuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLnRvQmUoJ25vbmUnKTtcclxuICogICAgIH0pO1xyXG4gKlxyXG4gKiAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XHJcbiAqICAgICAgIGxpc3RJbnB1dC5jbGVhcigpO1xyXG4gKiAgICAgICBsaXN0SW5wdXQuc2VuZEtleXMoJycpO1xyXG4gKlxyXG4gKiAgICAgICBleHBlY3QobmFtZXMuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xyXG4gKiAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XHJcbiAqICAgICAgIGV4cGVjdChlcnJvci5nZXRDc3NWYWx1ZSgnZGlzcGxheScpKS5ub3QudG9CZSgnbm9uZScpO1xyXG4gKiAgICAgfSk7XHJcbiAqICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqICMjIyBFeGFtcGxlIC0gc3BsaXR0aW5nIG9uIHdoaXRlc3BhY2VcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nTGlzdC1kaXJlY3RpdmUtbmV3bGluZXNcIj5cclxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gKiAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJsaXN0XCIgbmctbGlzdD1cIiYjMTA7XCIgbmctdHJpbT1cImZhbHNlXCI+PC90ZXh0YXJlYT5cclxuICogICAgPHByZT57eyBsaXN0IHwganNvbiB9fTwvcHJlPlxyXG4gKiAgIDwvZmlsZT5cclxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAqICAgICBpdChcInNob3VsZCBzcGxpdCB0aGUgdGV4dCBieSBuZXdsaW5lc1wiLCBmdW5jdGlvbigpIHtcclxuICogICAgICAgdmFyIGxpc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ2xpc3QnKSk7XHJcbiAqICAgICAgIHZhciBvdXRwdXQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QgfCBqc29uJykpO1xyXG4gKiAgICAgICBsaXN0SW5wdXQuc2VuZEtleXMoJ2FiY1xcbmRlZlxcbmdoaScpO1xyXG4gKiAgICAgICBleHBlY3Qob3V0cHV0LmdldFRleHQoKSkudG9Db250YWluKCdbXFxuICBcImFiY1wiLFxcbiAgXCJkZWZcIixcXG4gIFwiZ2hpXCJcXG5dJyk7XHJcbiAqICAgICB9KTtcclxuICogICA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogQGVsZW1lbnQgaW5wdXRcclxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0xpc3Qgb3B0aW9uYWwgZGVsaW1pdGVyIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gc3BsaXQgdGhlIHZhbHVlLlxyXG4gKi9cclxudmFyIG5nTGlzdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgcHJpb3JpdHk6IDEwMCxcclxuICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgIC8vIFdlIHdhbnQgdG8gY29udHJvbCB3aGl0ZXNwYWNlIHRyaW1taW5nIHNvIHdlIHVzZSB0aGlzIGNvbnZvbHV0ZWQgYXBwcm9hY2hcclxuICAgICAgLy8gdG8gYWNjZXNzIHRoZSBuZ0xpc3QgYXR0cmlidXRlLCB3aGljaCBkb2Vzbid0IHByZS10cmltIHRoZSBhdHRyaWJ1dGVcclxuICAgICAgdmFyIG5nTGlzdCA9IGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyLm5nTGlzdCkgfHwgJywgJztcclxuICAgICAgdmFyIHRyaW1WYWx1ZXMgPSBhdHRyLm5nVHJpbSAhPT0gJ2ZhbHNlJztcclxuICAgICAgdmFyIHNlcGFyYXRvciA9IHRyaW1WYWx1ZXMgPyB0cmltKG5nTGlzdCkgOiBuZ0xpc3Q7XHJcblxyXG4gICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBJZiB0aGUgdmlld1ZhbHVlIGlzIGludmFsaWQgKHNheSByZXF1aXJlZCBidXQgZW1wdHkpIGl0IHdpbGwgYmUgYHVuZGVmaW5lZGBcclxuICAgICAgICBpZiAoaXNVbmRlZmluZWQodmlld1ZhbHVlKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgbGlzdCA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKHZpZXdWYWx1ZS5zcGxpdChzZXBhcmF0b3IpLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIGxpc3QucHVzaCh0cmltVmFsdWVzID8gdHJpbSh2YWx1ZSkgOiB2YWx1ZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY3RybC4kcGFyc2Vycy5wdXNoKHBhcnNlKTtcclxuICAgICAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWUuam9pbihuZ0xpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgJGlzRW1wdHkgYmVjYXVzZSBhbiBlbXB0eSBhcnJheSBtZWFucyB0aGUgaW5wdXQgaXMgZW1wdHkuXHJcbiAgICAgIGN0cmwuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAhdmFsdWUgfHwgIXZhbHVlLmxlbmd0aDtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cclxuLyogZ2xvYmFsIFZBTElEX0NMQVNTOiB0cnVlLFxyXG4gIElOVkFMSURfQ0xBU1M6IHRydWUsXHJcbiAgUFJJU1RJTkVfQ0xBU1M6IHRydWUsXHJcbiAgRElSVFlfQ0xBU1M6IHRydWUsXHJcbiAgVU5UT1VDSEVEX0NMQVNTOiB0cnVlLFxyXG4gIFRPVUNIRURfQ0xBU1M6IHRydWUsXHJcbiovXHJcblxyXG52YXIgVkFMSURfQ0xBU1MgPSAnbmctdmFsaWQnLFxyXG4gICAgSU5WQUxJRF9DTEFTUyA9ICduZy1pbnZhbGlkJyxcclxuICAgIFBSSVNUSU5FX0NMQVNTID0gJ25nLXByaXN0aW5lJyxcclxuICAgIERJUlRZX0NMQVNTID0gJ25nLWRpcnR5JyxcclxuICAgIFVOVE9VQ0hFRF9DTEFTUyA9ICduZy11bnRvdWNoZWQnLFxyXG4gICAgVE9VQ0hFRF9DTEFTUyA9ICduZy10b3VjaGVkJyxcclxuICAgIFBFTkRJTkdfQ0xBU1MgPSAnbmctcGVuZGluZyc7XHJcblxyXG5cclxudmFyICRuZ01vZGVsTWluRXJyID0gbmV3IG1pbkVycignbmdNb2RlbCcpO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyB0eXBlXHJcbiAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJcclxuICpcclxuICogQHByb3BlcnR5IHtzdHJpbmd9ICR2aWV3VmFsdWUgQWN0dWFsIHN0cmluZyB2YWx1ZSBpbiB0aGUgdmlldy5cclxuICogQHByb3BlcnR5IHsqfSAkbW9kZWxWYWx1ZSBUaGUgdmFsdWUgaW4gdGhlIG1vZGVsIHRoYXQgdGhlIGNvbnRyb2wgaXMgYm91bmQgdG8uXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHBhcnNlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXHJcbiAgICAgICB0aGUgY29udHJvbCByZWFkcyB2YWx1ZSBmcm9tIHRoZSBET00uIFRoZSBmdW5jdGlvbnMgYXJlIGNhbGxlZCBpbiBhcnJheSBvcmRlciwgZWFjaCBwYXNzaW5nXHJcbiAgICAgICBpdHMgcmV0dXJuIHZhbHVlIHRocm91Z2ggdG8gdGhlIG5leHQuIFRoZSBsYXN0IHJldHVybiB2YWx1ZSBpcyBmb3J3YXJkZWQgdG8gdGhlXHJcbiAgICAgICB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgJHZhbGlkYXRvcnNgfSBjb2xsZWN0aW9uLlxyXG5cclxuUGFyc2VycyBhcmUgdXNlZCB0byBzYW5pdGl6ZSAvIGNvbnZlcnQgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWVcclxuYCR2aWV3VmFsdWVgfS5cclxuXHJcblJldHVybmluZyBgdW5kZWZpbmVkYCBmcm9tIGEgcGFyc2VyIG1lYW5zIGEgcGFyc2UgZXJyb3Igb2NjdXJyZWQuIEluIHRoYXQgY2FzZSxcclxubm8ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYCR2YWxpZGF0b3JzYH0gd2lsbCBydW4gYW5kIHRoZSBgbmdNb2RlbGBcclxud2lsbCBiZSBzZXQgdG8gYHVuZGVmaW5lZGAgdW5sZXNzIHtAbGluayBuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnMuYWxsb3dJbnZhbGlkYH1cclxuaXMgc2V0IHRvIGB0cnVlYC4gVGhlIHBhcnNlIGVycm9yIGlzIHN0b3JlZCBpbiBgbmdNb2RlbC4kZXJyb3IucGFyc2VgLlxyXG5cclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheS48RnVuY3Rpb24+fSAkZm9ybWF0dGVycyBBcnJheSBvZiBmdW5jdGlvbnMgdG8gZXhlY3V0ZSwgYXMgYSBwaXBlbGluZSwgd2hlbmV2ZXJcclxuICAgICAgIHRoZSBtb2RlbCB2YWx1ZSBjaGFuZ2VzLiBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gcmV2ZXJzZSBhcnJheSBvcmRlciwgZWFjaCBwYXNzaW5nIHRoZSB2YWx1ZSB0aHJvdWdoIHRvIHRoZVxyXG4gICAgICAgbmV4dC4gVGhlIGxhc3QgcmV0dXJuIHZhbHVlIGlzIHVzZWQgYXMgdGhlIGFjdHVhbCBET00gdmFsdWUuXHJcbiAgICAgICBVc2VkIHRvIGZvcm1hdCAvIGNvbnZlcnQgdmFsdWVzIGZvciBkaXNwbGF5IGluIHRoZSBjb250cm9sLlxyXG4gKiBgYGBqc1xyXG4gKiBmdW5jdGlvbiBmb3JtYXR0ZXIodmFsdWUpIHtcclxuICogICBpZiAodmFsdWUpIHtcclxuICogICAgIHJldHVybiB2YWx1ZS50b1VwcGVyQ2FzZSgpO1xyXG4gKiAgIH1cclxuICogfVxyXG4gKiBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gJHZhbGlkYXRvcnMgQSBjb2xsZWN0aW9uIG9mIHZhbGlkYXRvcnMgdGhhdCBhcmUgYXBwbGllZFxyXG4gKiAgICAgIHdoZW5ldmVyIHRoZSBtb2RlbCB2YWx1ZSBjaGFuZ2VzLiBUaGUga2V5IHZhbHVlIHdpdGhpbiB0aGUgb2JqZWN0IHJlZmVycyB0byB0aGUgbmFtZSBvZiB0aGVcclxuICogICAgICB2YWxpZGF0b3Igd2hpbGUgdGhlIGZ1bmN0aW9uIHJlZmVycyB0byB0aGUgdmFsaWRhdGlvbiBvcGVyYXRpb24uIFRoZSB2YWxpZGF0aW9uIG9wZXJhdGlvbiBpc1xyXG4gKiAgICAgIHByb3ZpZGVkIHdpdGggdGhlIG1vZGVsIHZhbHVlIGFzIGFuIGFyZ3VtZW50IGFuZCBtdXN0IHJldHVybiBhIHRydWUgb3IgZmFsc2UgdmFsdWUgZGVwZW5kaW5nXHJcbiAqICAgICAgb24gdGhlIHJlc3BvbnNlIG9mIHRoYXQgdmFsaWRhdGlvbi5cclxuICpcclxuICogYGBganNcclxuICogbmdNb2RlbC4kdmFsaWRhdG9ycy52YWxpZENoYXJhY3RlcnMgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcclxuICogICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcclxuICogICByZXR1cm4gL1swLTldKy8udGVzdCh2YWx1ZSkgJiZcclxuICogICAgICAgICAgL1thLXpdKy8udGVzdCh2YWx1ZSkgJiZcclxuICogICAgICAgICAgL1tBLVpdKy8udGVzdCh2YWx1ZSkgJiZcclxuICogICAgICAgICAgL1xcVysvLnRlc3QodmFsdWUpO1xyXG4gKiB9O1xyXG4gKiBgYGBcclxuICpcclxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkYXN5bmNWYWxpZGF0b3JzIEEgY29sbGVjdGlvbiBvZiB2YWxpZGF0aW9ucyB0aGF0IGFyZSBleHBlY3RlZCB0b1xyXG4gKiAgICAgIHBlcmZvcm0gYW4gYXN5bmNocm9ub3VzIHZhbGlkYXRpb24gKGUuZy4gYSBIVFRQIHJlcXVlc3QpLiBUaGUgdmFsaWRhdGlvbiBmdW5jdGlvbiB0aGF0IGlzIHByb3ZpZGVkXHJcbiAqICAgICAgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgcHJvbWlzZSB3aGVuIGl0IGlzIHJ1biBkdXJpbmcgdGhlIG1vZGVsIHZhbGlkYXRpb24gcHJvY2Vzcy4gT25jZSB0aGUgcHJvbWlzZVxyXG4gKiAgICAgIGlzIGRlbGl2ZXJlZCB0aGVuIHRoZSB2YWxpZGF0aW9uIHN0YXR1cyB3aWxsIGJlIHNldCB0byB0cnVlIHdoZW4gZnVsZmlsbGVkIGFuZCBmYWxzZSB3aGVuIHJlamVjdGVkLlxyXG4gKiAgICAgIFdoZW4gdGhlIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzIGFyZSB0cmlnZ2VyZWQsIGVhY2ggb2YgdGhlIHZhbGlkYXRvcnMgd2lsbCBydW4gaW4gcGFyYWxsZWwgYW5kIHRoZSBtb2RlbFxyXG4gKiAgICAgIHZhbHVlIHdpbGwgb25seSBiZSB1cGRhdGVkIG9uY2UgYWxsIHZhbGlkYXRvcnMgaGF2ZSBiZWVuIGZ1bGZpbGxlZC4gQXMgbG9uZyBhcyBhbiBhc3luY2hyb25vdXMgdmFsaWRhdG9yXHJcbiAqICAgICAgaXMgdW5mdWxmaWxsZWQsIGl0cyBrZXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgY29udHJvbGxlcnMgYCRwZW5kaW5nYCBwcm9wZXJ0eS4gQWxzbywgYWxsIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzXHJcbiAqICAgICAgd2lsbCBvbmx5IHJ1biBvbmNlIGFsbCBzeW5jaHJvbm91cyB2YWxpZGF0b3JzIGhhdmUgcGFzc2VkLlxyXG4gKlxyXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IGlmICRodHRwIGlzIHVzZWQgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdGhhdCB0aGUgc2VydmVyIHJldHVybnMgYSBzdWNjZXNzIEhUVFAgcmVzcG9uc2UgY29kZVxyXG4gKiBpbiBvcmRlciB0byBmdWxmaWxsIHRoZSB2YWxpZGF0aW9uIGFuZCBhIHN0YXR1cyBsZXZlbCBvZiBgNHh4YCBpbiBvcmRlciB0byByZWplY3QgdGhlIHZhbGlkYXRpb24uXHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWVVc2VybmFtZSA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG4gKiAgIHZhciB2YWx1ZSA9IG1vZGVsVmFsdWUgfHwgdmlld1ZhbHVlO1xyXG4gKlxyXG4gKiAgIC8vIExvb2t1cCB1c2VyIGJ5IHVzZXJuYW1lXHJcbiAqICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2Vycy8nICsgdmFsdWUpLlxyXG4gKiAgICAgIHRoZW4oZnVuY3Rpb24gcmVzb2x2ZWQoKSB7XHJcbiAqICAgICAgICAvL3VzZXJuYW1lIGV4aXN0cywgdGhpcyBtZWFucyB2YWxpZGF0aW9uIGZhaWxzXHJcbiAqICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdleGlzdHMnKTtcclxuICogICAgICB9LCBmdW5jdGlvbiByZWplY3RlZCgpIHtcclxuICogICAgICAgIC8vdXNlcm5hbWUgZG9lcyBub3QgZXhpc3QsIHRoZXJlZm9yZSB0aGlzIHZhbGlkYXRpb24gcGFzc2VzXHJcbiAqICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICogICAgICB9KTtcclxuICogfTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHZpZXdDaGFuZ2VMaXN0ZW5lcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUgd2hlbmV2ZXIgdGhlXHJcbiAqICAgICB2aWV3IHZhbHVlIGhhcyBjaGFuZ2VkLiBJdCBpcyBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGFuZCBpdHMgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXHJcbiAqICAgICBUaGlzIGNhbiBiZSB1c2VkIGluIHBsYWNlIG9mIGFkZGl0aW9uYWwgJHdhdGNoZXMgYWdhaW5zdCB0aGUgbW9kZWwgdmFsdWUuXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkZXJyb3IgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgZmFpbGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkcGVuZGluZyBBbiBvYmplY3QgaGFzaCB3aXRoIGFsbCBwZW5kaW5nIHZhbGlkYXRvciBpZHMgYXMga2V5cy5cclxuICpcclxuICogQHByb3BlcnR5IHtib29sZWFufSAkdW50b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbm90IGxvc3QgZm9jdXMgeWV0LlxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR0b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbG9zdCBmb2N1cy5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkcHJpc3RpbmUgVHJ1ZSBpZiB1c2VyIGhhcyBub3QgaW50ZXJhY3RlZCB3aXRoIHRoZSBjb250cm9sIHlldC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgY29udHJvbC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkdmFsaWQgVHJ1ZSBpZiB0aGVyZSBpcyBubyBlcnJvci5cclxuICogQHByb3BlcnR5IHtib29sZWFufSAkaW52YWxpZCBUcnVlIGlmIGF0IGxlYXN0IG9uZSBlcnJvciBvbiB0aGUgY29udHJvbC5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9ICRuYW1lIFRoZSBuYW1lIGF0dHJpYnV0ZSBvZiB0aGUgY29udHJvbC5cclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIGBOZ01vZGVsQ29udHJvbGxlcmAgcHJvdmlkZXMgQVBJIGZvciB0aGUge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSBkaXJlY3RpdmUuXHJcbiAqIFRoZSBjb250cm9sbGVyIGNvbnRhaW5zIHNlcnZpY2VzIGZvciBkYXRhLWJpbmRpbmcsIHZhbGlkYXRpb24sIENTUyB1cGRhdGVzLCBhbmQgdmFsdWUgZm9ybWF0dGluZ1xyXG4gKiBhbmQgcGFyc2luZy4gSXQgcHVycG9zZWZ1bGx5IGRvZXMgbm90IGNvbnRhaW4gYW55IGxvZ2ljIHdoaWNoIGRlYWxzIHdpdGggRE9NIHJlbmRlcmluZyBvclxyXG4gKiBsaXN0ZW5pbmcgdG8gRE9NIGV2ZW50cy5cclxuICogU3VjaCBET00gcmVsYXRlZCBsb2dpYyBzaG91bGQgYmUgcHJvdmlkZWQgYnkgb3RoZXIgZGlyZWN0aXZlcyB3aGljaCBtYWtlIHVzZSBvZlxyXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIGZvciBkYXRhLWJpbmRpbmcgdG8gY29udHJvbCBlbGVtZW50cy5cclxuICogQW5ndWxhciBwcm92aWRlcyB0aGlzIERPTSBsb2dpYyBmb3IgbW9zdCB7QGxpbmsgaW5wdXQgYGlucHV0YH0gZWxlbWVudHMuXHJcbiAqIEF0IHRoZSBlbmQgb2YgdGhpcyBwYWdlIHlvdSBjYW4gZmluZCBhIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyI2N1c3RvbS1jb250cm9sLWV4YW1wbGVcclxuICogY3VzdG9tIGNvbnRyb2wgZXhhbXBsZX0gdGhhdCB1c2VzIGBuZ01vZGVsQ29udHJvbGxlcmAgdG8gYmluZCB0byBgY29udGVudGVkaXRhYmxlYCBlbGVtZW50cy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogIyMjIEN1c3RvbSBDb250cm9sIEV4YW1wbGVcclxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYE5nTW9kZWxDb250cm9sbGVyYCB3aXRoIGEgY3VzdG9tIGNvbnRyb2wgdG8gYWNoaWV2ZVxyXG4gKiBkYXRhLWJpbmRpbmcuIE5vdGljZSBob3cgZGlmZmVyZW50IGRpcmVjdGl2ZXMgKGBjb250ZW50ZWRpdGFibGVgLCBgbmctbW9kZWxgLCBhbmQgYHJlcXVpcmVkYClcclxuICogY29sbGFib3JhdGUgdG9nZXRoZXIgdG8gYWNoaWV2ZSB0aGUgZGVzaXJlZCByZXN1bHQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCBgY29udGVudGVkaXRhYmxlYCBpcyBhbiBIVE1MNSBhdHRyaWJ1dGUsIHdoaWNoIHRlbGxzIHRoZSBicm93c2VyIHRvIGxldCB0aGUgZWxlbWVudFxyXG4gKiBjb250ZW50cyBiZSBlZGl0ZWQgaW4gcGxhY2UgYnkgdGhlIHVzZXIuICBUaGlzIHdpbGwgbm90IHdvcmsgb24gb2xkZXIgYnJvd3NlcnMuXHJcbiAqXHJcbiAqIFdlIGFyZSB1c2luZyB0aGUge0BsaW5rIG5nLnNlcnZpY2U6JHNjZSAkc2NlfSBzZXJ2aWNlIGhlcmUgYW5kIGluY2x1ZGUgdGhlIHtAbGluayBuZ1Nhbml0aXplICRzYW5pdGl6ZX1cclxuICogbW9kdWxlIHRvIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIFwiYmFkXCIgY29udGVudCBsaWtlIGlubGluZSBldmVudCBsaXN0ZW5lciAoZS5nLiBgPHNwYW4gb25jbGljaz1cIi4uLlwiPmApLlxyXG4gKiBIb3dldmVyLCBhcyB3ZSBhcmUgdXNpbmcgYCRzY2VgIHRoZSBtb2RlbCBjYW4gc3RpbGwgZGVjaWRlIHRvIHByb3ZpZGUgdW5zYWZlIGNvbnRlbnQgaWYgaXQgbWFya3NcclxuICogdGhhdCBjb250ZW50IHVzaW5nIHRoZSBgJHNjZWAgc2VydmljZS5cclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cIk5nTW9kZWxDb250cm9sbGVyXCIgbW9kdWxlPVwiY3VzdG9tQ29udHJvbFwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XHJcbiAgICAgIFtjb250ZW50ZWRpdGFibGVdIHtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgICAgICBtaW4taGVpZ2h0OiAyMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAubmctaW52YWxpZCB7XHJcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmVkO1xyXG4gICAgICB9XHJcblxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tQ29udHJvbCcsIFsnbmdTYW5pdGl6ZSddKS5cclxuICAgICAgICBkaXJlY3RpdmUoJ2NvbnRlbnRlZGl0YWJsZScsIFsnJHNjZScsIGZ1bmN0aW9uKCRzY2UpIHtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsIC8vIG9ubHkgYWN0aXZhdGUgb24gZWxlbWVudCBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJywgLy8gZ2V0IGEgaG9sZCBvZiBOZ01vZGVsQ29udHJvbGxlclxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuICAgICAgICAgICAgICBpZiAoIW5nTW9kZWwpIHJldHVybjsgLy8gZG8gbm90aGluZyBpZiBubyBuZy1tb2RlbFxyXG5cclxuICAgICAgICAgICAgICAvLyBTcGVjaWZ5IGhvdyBVSSBzaG91bGQgYmUgdXBkYXRlZFxyXG4gICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5odG1sKCRzY2UuZ2V0VHJ1c3RlZEh0bWwobmdNb2RlbC4kdmlld1ZhbHVlIHx8ICcnKSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBjaGFuZ2UgZXZlbnRzIHRvIGVuYWJsZSBiaW5kaW5nXHJcbiAgICAgICAgICAgICAgZWxlbWVudC5vbignYmx1ciBrZXl1cCBjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMocmVhZCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgcmVhZCgpOyAvLyBpbml0aWFsaXplXHJcblxyXG4gICAgICAgICAgICAgIC8vIFdyaXRlIGRhdGEgdG8gdGhlIG1vZGVsXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gcmVhZCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gZWxlbWVudC5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHdlIGNsZWFyIHRoZSBjb250ZW50IGVkaXRhYmxlIHRoZSBicm93c2VyIGxlYXZlcyBhIDxicj4gYmVoaW5kXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBzdHJpcC1iciBhdHRyaWJ1dGUgaXMgcHJvdmlkZWQgdGhlbiB3ZSBzdHJpcCB0aGlzIG91dFxyXG4gICAgICAgICAgICAgICAgaWYgKCBhdHRycy5zdHJpcEJyICYmIGh0bWwgPT0gJzxicj4nICkge1xyXG4gICAgICAgICAgICAgICAgICBodG1sID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoaHRtbCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cclxuICAgICAgIDxkaXYgY29udGVudGVkaXRhYmxlXHJcbiAgICAgICAgICAgIG5hbWU9XCJteVdpZGdldFwiIG5nLW1vZGVsPVwidXNlckNvbnRlbnRcIlxyXG4gICAgICAgICAgICBzdHJpcC1icj1cInRydWVcIlxyXG4gICAgICAgICAgICByZXF1aXJlZD5DaGFuZ2UgbWUhPC9kaXY+XHJcbiAgICAgICAgPHNwYW4gbmctc2hvdz1cIm15Rm9ybS5teVdpZGdldC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+XHJcbiAgICAgICA8aHI+XHJcbiAgICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJ1c2VyQ29udGVudFwiPjwvdGV4dGFyZWE+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgIGl0KCdzaG91bGQgZGF0YS1iaW5kIGFuZCBiZWNvbWUgaW52YWxpZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PSAnc2FmYXJpJyB8fCBicm93c2VyLnBhcmFtcy5icm93c2VyID09ICdmaXJlZm94Jykge1xyXG4gICAgICAgIC8vIFNhZmFyaURyaXZlciBjYW4ndCBoYW5kbGUgY29udGVudGVkaXRhYmxlXHJcbiAgICAgICAgLy8gYW5kIEZpcmVmb3ggZHJpdmVyIGNhbid0IGNsZWFyIGNvbnRlbnRlZGl0YWJsZXMgdmVyeSB3ZWxsXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBjb250ZW50RWRpdGFibGUgPSBlbGVtZW50KGJ5LmNzcygnW2NvbnRlbnRlZGl0YWJsZV0nKSk7XHJcbiAgICAgIHZhciBjb250ZW50ID0gJ0NoYW5nZSBtZSEnO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbnRlbnRFZGl0YWJsZS5nZXRUZXh0KCkpLnRvRXF1YWwoY29udGVudCk7XHJcblxyXG4gICAgICBjb250ZW50RWRpdGFibGUuY2xlYXIoKTtcclxuICAgICAgY29udGVudEVkaXRhYmxlLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkJBQ0tfU1BBQ0UpO1xyXG4gICAgICBleHBlY3QoY29udGVudEVkaXRhYmxlLmdldFRleHQoKSkudG9FcXVhbCgnJyk7XHJcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9uZy1pbnZhbGlkLXJlcXVpcmVkLyk7XHJcbiAgICB9KTtcclxuICAgIDwvZmlsZT5cclxuICogPC9leGFtcGxlPlxyXG4gKlxyXG4gKlxyXG4gKi9cclxudmFyIE5nTW9kZWxDb250cm9sbGVyID0gWyckc2NvcGUnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCAnJGF0dHJzJywgJyRlbGVtZW50JywgJyRwYXJzZScsICckYW5pbWF0ZScsICckdGltZW91dCcsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbnRlcnBvbGF0ZScsXHJcbiAgICBmdW5jdGlvbigkc2NvcGUsICRleGNlcHRpb25IYW5kbGVyLCAkYXR0ciwgJGVsZW1lbnQsICRwYXJzZSwgJGFuaW1hdGUsICR0aW1lb3V0LCAkcm9vdFNjb3BlLCAkcSwgJGludGVycG9sYXRlKSB7XHJcbiAgdGhpcy4kdmlld1ZhbHVlID0gTnVtYmVyLk5hTjtcclxuICB0aGlzLiRtb2RlbFZhbHVlID0gTnVtYmVyLk5hTjtcclxuICB0aGlzLiQkcmF3TW9kZWxWYWx1ZSA9IHVuZGVmaW5lZDsgLy8gc3RvcmVzIHRoZSBwYXJzZWQgbW9kZWxWYWx1ZSAvIG1vZGVsIHNldCBmcm9tIHNjb3BlIHJlZ2FyZGxlc3Mgb2YgdmFsaWRpdHkuXHJcbiAgdGhpcy4kdmFsaWRhdG9ycyA9IHt9O1xyXG4gIHRoaXMuJGFzeW5jVmFsaWRhdG9ycyA9IHt9O1xyXG4gIHRoaXMuJHBhcnNlcnMgPSBbXTtcclxuICB0aGlzLiRmb3JtYXR0ZXJzID0gW107XHJcbiAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xyXG4gIHRoaXMuJHVudG91Y2hlZCA9IHRydWU7XHJcbiAgdGhpcy4kdG91Y2hlZCA9IGZhbHNlO1xyXG4gIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcclxuICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xyXG4gIHRoaXMuJHZhbGlkID0gdHJ1ZTtcclxuICB0aGlzLiRpbnZhbGlkID0gZmFsc2U7XHJcbiAgdGhpcy4kZXJyb3IgPSB7fTsgLy8ga2VlcCBpbnZhbGlkIGtleXMgaGVyZVxyXG4gIHRoaXMuJCRzdWNjZXNzID0ge307IC8vIGtlZXAgdmFsaWQga2V5cyBoZXJlXHJcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDsgLy8ga2VlcCBwZW5kaW5nIGtleXMgaGVyZVxyXG4gIHRoaXMuJG5hbWUgPSAkaW50ZXJwb2xhdGUoJGF0dHIubmFtZSB8fCAnJywgZmFsc2UpKCRzY29wZSk7XHJcblxyXG5cclxuICB2YXIgcGFyc2VkTmdNb2RlbCA9ICRwYXJzZSgkYXR0ci5uZ01vZGVsKSxcclxuICAgICAgcGFyc2VkTmdNb2RlbEFzc2lnbiA9IHBhcnNlZE5nTW9kZWwuYXNzaWduLFxyXG4gICAgICBuZ01vZGVsR2V0ID0gcGFyc2VkTmdNb2RlbCxcclxuICAgICAgbmdNb2RlbFNldCA9IHBhcnNlZE5nTW9kZWxBc3NpZ24sXHJcbiAgICAgIHBlbmRpbmdEZWJvdW5jZSA9IG51bGwsXHJcbiAgICAgIHBhcnNlclZhbGlkLFxyXG4gICAgICBjdHJsID0gdGhpcztcclxuXHJcbiAgdGhpcy4kJHNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICBjdHJsLiRvcHRpb25zID0gb3B0aW9ucztcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2V0dGVyU2V0dGVyKSB7XHJcbiAgICAgIHZhciBpbnZva2VNb2RlbEdldHRlciA9ICRwYXJzZSgkYXR0ci5uZ01vZGVsICsgJygpJyksXHJcbiAgICAgICAgICBpbnZva2VNb2RlbFNldHRlciA9ICRwYXJzZSgkYXR0ci5uZ01vZGVsICsgJygkJCRwKScpO1xyXG5cclxuICAgICAgbmdNb2RlbEdldCA9IGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgIHZhciBtb2RlbFZhbHVlID0gcGFyc2VkTmdNb2RlbCgkc2NvcGUpO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG1vZGVsVmFsdWUpKSB7XHJcbiAgICAgICAgICBtb2RlbFZhbHVlID0gaW52b2tlTW9kZWxHZXR0ZXIoJHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWU7XHJcbiAgICAgIH07XHJcbiAgICAgIG5nTW9kZWxTZXQgPSBmdW5jdGlvbigkc2NvcGUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ocGFyc2VkTmdNb2RlbCgkc2NvcGUpKSkge1xyXG4gICAgICAgICAgaW52b2tlTW9kZWxTZXR0ZXIoJHNjb3BlLCB7JCQkcDogY3RybC4kbW9kZWxWYWx1ZX0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwYXJzZWROZ01vZGVsQXNzaWduKCRzY29wZSwgY3RybC4kbW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmICghcGFyc2VkTmdNb2RlbC5hc3NpZ24pIHtcclxuICAgICAgdGhyb3cgJG5nTW9kZWxNaW5FcnIoJ25vbmFzc2lnbicsIFwiRXhwcmVzc2lvbiAnezB9JyBpcyBub24tYXNzaWduYWJsZS4gRWxlbWVudDogezF9XCIsXHJcbiAgICAgICAgICAkYXR0ci5uZ01vZGVsLCBzdGFydGluZ1RhZygkZWxlbWVudCkpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyZW5kZXJcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHVwZGF0ZWQuIEl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIHVzZXIgb2YgdGhlIG5nLW1vZGVsXHJcbiAgICogZGlyZWN0aXZlIHdpbGwgaW1wbGVtZW50IHRoaXMgbWV0aG9kLlxyXG4gICAqXHJcbiAgICogVGhlIGAkcmVuZGVyKClgIG1ldGhvZCBpcyBpbnZva2VkIGluIHRoZSBmb2xsb3dpbmcgc2l0dWF0aW9uczpcclxuICAgKlxyXG4gICAqICogYCRyb2xsYmFja1ZpZXdWYWx1ZSgpYCBpcyBjYWxsZWQuICBJZiB3ZSBhcmUgcm9sbGluZyBiYWNrIHRoZSB2aWV3IHZhbHVlIHRvIHRoZSBsYXN0XHJcbiAgICogICBjb21taXR0ZWQgdmFsdWUgdGhlbiBgJHJlbmRlcigpYCBpcyBjYWxsZWQgdG8gdXBkYXRlIHRoZSBpbnB1dCBjb250cm9sLlxyXG4gICAqICogVGhlIHZhbHVlIHJlZmVyZW5jZWQgYnkgYG5nLW1vZGVsYCBpcyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHkgYW5kIGJvdGggdGhlIGAkbW9kZWxWYWx1ZWAgYW5kXHJcbiAgICogICB0aGUgYCR2aWV3VmFsdWVgIGFyZSBkaWZmZXJlbnQgdG8gbGFzdCB0aW1lLlxyXG4gICAqXHJcbiAgICogU2luY2UgYG5nLW1vZGVsYCBkb2VzIG5vdCBkbyBhIGRlZXAgd2F0Y2gsIGAkcmVuZGVyKClgIGlzIG9ubHkgaW52b2tlZCBpZiB0aGUgdmFsdWVzIG9mXHJcbiAgICogYCRtb2RlbFZhbHVlYCBhbmQgYCR2aWV3VmFsdWVgIGFyZSBhY3R1YWxseSBkaWZmZXJlbnQgdG8gdGhlaXIgcHJldmlvdXMgdmFsdWUuIElmIGAkbW9kZWxWYWx1ZWBcclxuICAgKiBvciBgJHZpZXdWYWx1ZWAgYXJlIG9iamVjdHMgKHJhdGhlciB0aGFuIGEgc3RyaW5nIG9yIG51bWJlcikgdGhlbiBgJHJlbmRlcigpYCB3aWxsIG5vdCBiZVxyXG4gICAqIGludm9rZWQgaWYgeW91IG9ubHkgY2hhbmdlIGEgcHJvcGVydHkgb24gdGhlIG9iamVjdHMuXHJcbiAgICovXHJcbiAgdGhpcy4kcmVuZGVyID0gbm9vcDtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGlzRW1wdHlcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHZhbHVlIG9mIGFuIGlucHV0IGlzIGVtcHR5LlxyXG4gICAqXHJcbiAgICogRm9yIGluc3RhbmNlLCB0aGUgcmVxdWlyZWQgZGlyZWN0aXZlIGRvZXMgdGhpcyB0byB3b3JrIG91dCBpZiB0aGUgaW5wdXQgaGFzIGRhdGEgb3Igbm90LlxyXG4gICAqXHJcbiAgICogVGhlIGRlZmF1bHQgYCRpc0VtcHR5YCBmdW5jdGlvbiBjaGVja3Mgd2hldGhlciB0aGUgdmFsdWUgaXMgYHVuZGVmaW5lZGAsIGAnJ2AsIGBudWxsYCBvciBgTmFOYC5cclxuICAgKlxyXG4gICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBmb3IgaW5wdXQgZGlyZWN0aXZlcyB3aG9zZSBjb25jZXB0IG9mIGJlaW5nIGVtcHR5IGlzIGRpZmZlcmVudCB0byB0aGVcclxuICAgKiBkZWZhdWx0LiBUaGUgYGNoZWNrYm94SW5wdXRUeXBlYCBkaXJlY3RpdmUgZG9lcyB0aGlzIGJlY2F1c2UgaW4gaXRzIGNhc2UgYSB2YWx1ZSBvZiBgZmFsc2VgXHJcbiAgICogaW1wbGllcyBlbXB0eS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBpbnB1dCB0byBjaGVjayBmb3IgZW1wdGluZXNzLlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgXCJlbXB0eVwiLlxyXG4gICAqL1xyXG4gIHRoaXMuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlO1xyXG4gIH07XHJcblxyXG4gIHZhciBwYXJlbnRGb3JtID0gJGVsZW1lbnQuaW5oZXJpdGVkRGF0YSgnJGZvcm1Db250cm9sbGVyJykgfHwgbnVsbEZvcm1DdHJsLFxyXG4gICAgICBjdXJyZW50VmFsaWRhdGlvblJ1bklkID0gMDtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZhbGlkaXR5XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDaGFuZ2UgdGhlIHZhbGlkaXR5IHN0YXRlLCBhbmQgbm90aWZ5IHRoZSBmb3JtLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB3aXRoaW4gJHBhcnNlcnMvJGZvcm1hdHRlcnMgb3IgYSBjdXN0b20gdmFsaWRhdGlvbiBpbXBsZW1lbnRhdGlvbi5cclxuICAgKiBIb3dldmVyLCBpbiBtb3N0IGNhc2VzIGl0IHNob3VsZCBiZSBzdWZmaWNpZW50IHRvIHVzZSB0aGUgYG5nTW9kZWwuJHZhbGlkYXRvcnNgIGFuZFxyXG4gICAqIGBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnNgIGNvbGxlY3Rpb25zIHdoaWNoIHdpbGwgY2FsbCBgJHNldFZhbGlkaXR5YCBhdXRvbWF0aWNhbGx5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbGlkYXRpb25FcnJvcktleSBOYW1lIG9mIHRoZSB2YWxpZGF0b3IuIFRoZSBgdmFsaWRhdGlvbkVycm9yS2V5YCB3aWxsIGJlIGFzc2lnbmVkXHJcbiAgICogICAgICAgIHRvIGVpdGhlciBgJGVycm9yW3ZhbGlkYXRpb25FcnJvcktleV1gIG9yIGAkcGVuZGluZ1t2YWxpZGF0aW9uRXJyb3JLZXldYFxyXG4gICAqICAgICAgICAoZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYCksIHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvciBkYXRhLWJpbmRpbmcuXHJcbiAgICogICAgICAgIFRoZSBgdmFsaWRhdGlvbkVycm9yS2V5YCBzaG91bGQgYmUgaW4gY2FtZWxDYXNlIGFuZCB3aWxsIGdldCBjb252ZXJ0ZWQgaW50byBkYXNoLWNhc2VcclxuICAgKiAgICAgICAgZm9yIGNsYXNzIG5hbWUuIEV4YW1wbGU6IGBteUVycm9yYCB3aWxsIHJlc3VsdCBpbiBgbmctdmFsaWQtbXktZXJyb3JgIGFuZCBgbmctaW52YWxpZC1teS1lcnJvcmBcclxuICAgKiAgICAgICAgY2xhc3MgYW5kIGNhbiBiZSBib3VuZCB0byBhcyAgYHt7c29tZUZvcm0uc29tZUNvbnRyb2wuJGVycm9yLm15RXJyb3J9fWAgLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNWYWxpZCBXaGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIGlzIHZhbGlkICh0cnVlKSwgaW52YWxpZCAoZmFsc2UpLCBwZW5kaW5nICh1bmRlZmluZWQpLFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICBvciBza2lwcGVkIChudWxsKS4gUGVuZGluZyBpcyB1c2VkIGZvciB1bmZ1bGZpbGxlZCBgJGFzeW5jVmFsaWRhdG9yc2AuXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIFNraXBwZWQgaXMgdXNlZCBieSBBbmd1bGFyIHdoZW4gdmFsaWRhdG9ycyBkbyBub3QgcnVuIGJlY2F1c2Ugb2YgcGFyc2UgZXJyb3JzIGFuZFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIGAkYXN5bmNWYWxpZGF0b3JzYCBkbyBub3QgcnVuIGJlY2F1c2UgYW55IG9mIHRoZSBgJHZhbGlkYXRvcnNgIGZhaWxlZC5cclxuICAgKi9cclxuICBhZGRTZXRWYWxpZGl0eU1ldGhvZCh7XHJcbiAgICBjdHJsOiB0aGlzLFxyXG4gICAgJGVsZW1lbnQ6ICRlbGVtZW50LFxyXG4gICAgc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XHJcbiAgICAgIG9iamVjdFtwcm9wZXJ0eV0gPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XHJcbiAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xyXG4gICAgfSxcclxuICAgIHBhcmVudEZvcm06IHBhcmVudEZvcm0sXHJcbiAgICAkYW5pbWF0ZTogJGFuaW1hdGVcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFByaXN0aW5lXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSBgbmctZGlydHlgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzIHByaXN0aW5lXHJcbiAgICogc3RhdGUgKGBuZy1wcmlzdGluZWAgY2xhc3MpLiBBIG1vZGVsIGlzIGNvbnNpZGVyZWQgdG8gYmUgcHJpc3RpbmUgd2hlbiB0aGUgY29udHJvbFxyXG4gICAqIGhhcyBub3QgYmVlbiBjaGFuZ2VkIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cclxuICAgKi9cclxuICB0aGlzLiRzZXRQcmlzdGluZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY3RybC4kZGlydHkgPSBmYWxzZTtcclxuICAgIGN0cmwuJHByaXN0aW5lID0gdHJ1ZTtcclxuICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LCBESVJUWV9DTEFTUyk7XHJcbiAgICAkYW5pbWF0ZS5hZGRDbGFzcygkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXREaXJ0eVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgZGlydHkgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLXByaXN0aW5lYCBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0cyBkaXJ0eVxyXG4gICAqIHN0YXRlIChgbmctZGlydHlgIGNsYXNzKS4gQSBtb2RlbCBpcyBjb25zaWRlcmVkIHRvIGJlIGRpcnR5IHdoZW4gdGhlIGNvbnRyb2wgaGFzIGJlZW4gY2hhbmdlZFxyXG4gICAqIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cclxuICAgKi9cclxuICB0aGlzLiRzZXREaXJ0eSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY3RybC4kZGlydHkgPSB0cnVlO1xyXG4gICAgY3RybC4kcHJpc3RpbmUgPSBmYWxzZTtcclxuICAgICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LCBQUklTVElORV9DTEFTUyk7XHJcbiAgICAkYW5pbWF0ZS5hZGRDbGFzcygkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xyXG4gICAgcGFyZW50Rm9ybS4kc2V0RGlydHkoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VW50b3VjaGVkXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyB1bnRvdWNoZWQgc3RhdGUuXHJcbiAgICpcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLXRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXHJcbiAgICogdW50b3VjaGVkIHN0YXRlIChgbmctdW50b3VjaGVkYCBjbGFzcykuIFVwb24gY29tcGlsYXRpb24sIGEgbW9kZWwgaXMgc2V0IGFzIHVudG91Y2hlZFxyXG4gICAqIGJ5IGRlZmF1bHQsIGhvd2V2ZXIgdGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byByZXN0b3JlIHRoYXQgc3RhdGUgaWYgdGhlIG1vZGVsIGhhc1xyXG4gICAqIGFscmVhZHkgYmVlbiB0b3VjaGVkIGJ5IHRoZSB1c2VyLlxyXG4gICAqL1xyXG4gIHRoaXMuJHNldFVudG91Y2hlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY3RybC4kdG91Y2hlZCA9IGZhbHNlO1xyXG4gICAgY3RybC4kdW50b3VjaGVkID0gdHJ1ZTtcclxuICAgICRhbmltYXRlLnNldENsYXNzKCRlbGVtZW50LCBVTlRPVUNIRURfQ0xBU1MsIFRPVUNIRURfQ0xBU1MpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRUb3VjaGVkXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyB0b3VjaGVkIHN0YXRlLlxyXG4gICAqXHJcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy11bnRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXHJcbiAgICogdG91Y2hlZCBzdGF0ZSAoYG5nLXRvdWNoZWRgIGNsYXNzKS4gQSBtb2RlbCBpcyBjb25zaWRlcmVkIHRvIGJlIHRvdWNoZWQgd2hlbiB0aGUgdXNlciBoYXNcclxuICAgKiBmaXJzdCBmb2N1c2VkIHRoZSBjb250cm9sIGVsZW1lbnQgYW5kIHRoZW4gc2hpZnRlZCBmb2N1cyBhd2F5IGZyb20gdGhlIGNvbnRyb2wgKGJsdXIgZXZlbnQpLlxyXG4gICAqL1xyXG4gIHRoaXMuJHNldFRvdWNoZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGN0cmwuJHRvdWNoZWQgPSB0cnVlO1xyXG4gICAgY3RybC4kdW50b3VjaGVkID0gZmFsc2U7XHJcbiAgICAkYW5pbWF0ZS5zZXRDbGFzcygkZWxlbWVudCwgVE9VQ0hFRF9DTEFTUywgVU5UT1VDSEVEX0NMQVNTKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbmNlbCBhbiB1cGRhdGUgYW5kIHJlc2V0IHRoZSBpbnB1dCBlbGVtZW50J3MgdmFsdWUgdG8gcHJldmVudCBhbiB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAsXHJcbiAgICogd2hpY2ggbWF5IGJlIGNhdXNlZCBieSBhIHBlbmRpbmcgZGVib3VuY2VkIGV2ZW50IG9yIGJlY2F1c2UgdGhlIGlucHV0IGlzIHdhaXRpbmcgZm9yIGEgc29tZVxyXG4gICAqIGZ1dHVyZSBldmVudC5cclxuICAgKlxyXG4gICAqIElmIHlvdSBoYXZlIGFuIGlucHV0IHRoYXQgdXNlcyBgbmctbW9kZWwtb3B0aW9uc2AgdG8gc2V0IHVwIGRlYm91bmNlZCBldmVudHMgb3IgZXZlbnRzIHN1Y2hcclxuICAgKiBhcyBibHVyIHlvdSBjYW4gaGF2ZSBhIHNpdHVhdGlvbiB3aGVyZSB0aGVyZSBpcyBhIHBlcmlvZCB3aGVuIHRoZSBgJHZpZXdWYWx1ZWBcclxuICAgKiBpcyBvdXQgb2Ygc3luY2ggd2l0aCB0aGUgbmdNb2RlbCdzIGAkbW9kZWxWYWx1ZWAuXHJcbiAgICpcclxuICAgKiBJbiB0aGlzIGNhc2UsIHlvdSBjYW4gcnVuIGludG8gZGlmZmljdWx0aWVzIGlmIHlvdSB0cnkgdG8gdXBkYXRlIHRoZSBuZ01vZGVsJ3MgYCRtb2RlbFZhbHVlYFxyXG4gICAqIHByb2dyYW1tYXRpY2FsbHkgYmVmb3JlIHRoZXNlIGRlYm91bmNlZC9mdXR1cmUgZXZlbnRzIGhhdmUgcmVzb2x2ZWQvb2NjdXJyZWQsIGJlY2F1c2UgQW5ndWxhcidzXHJcbiAgICogZGlydHkgY2hlY2tpbmcgbWVjaGFuaXNtIGlzIG5vdCBhYmxlIHRvIHRlbGwgd2hldGhlciB0aGUgbW9kZWwgaGFzIGFjdHVhbGx5IGNoYW5nZWQgb3Igbm90LlxyXG4gICAqXHJcbiAgICogVGhlIGAkcm9sbGJhY2tWaWV3VmFsdWUoKWAgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIHByb2dyYW1tYXRpY2FsbHkgY2hhbmdpbmcgdGhlIG1vZGVsIG9mIGFuXHJcbiAgICogaW5wdXQgd2hpY2ggbWF5IGhhdmUgc3VjaCBldmVudHMgcGVuZGluZy4gVGhpcyBpcyBpbXBvcnRhbnQgaW4gb3JkZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlXHJcbiAgICogaW5wdXQgZmllbGQgd2lsbCBiZSB1cGRhdGVkIHdpdGggdGhlIG5ldyBtb2RlbCB2YWx1ZSBhbmQgYW55IHBlbmRpbmcgb3BlcmF0aW9ucyBhcmUgY2FuY2VsbGVkLlxyXG4gICAqXHJcbiAgICogPGV4YW1wbGUgbmFtZT1cIm5nLW1vZGVsLWNhbmNlbC11cGRhdGVcIiBtb2R1bGU9XCJjYW5jZWwtdXBkYXRlLWV4YW1wbGVcIj5cclxuICAgKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cclxuICAgKiAgICAgYW5ndWxhci5tb2R1bGUoJ2NhbmNlbC11cGRhdGUtZXhhbXBsZScsIFtdKVxyXG4gICAqXHJcbiAgICogICAgIC5jb250cm9sbGVyKCdDYW5jZWxVcGRhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgKiAgICAgICAkc2NvcGUucmVzZXRXaXRoQ2FuY2VsID0gZnVuY3Rpb24oZSkge1xyXG4gICAqICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykge1xyXG4gICAqICAgICAgICAgICAkc2NvcGUubXlGb3JtLm15SW5wdXQxLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xyXG4gICAqICAgICAgICAgICAkc2NvcGUubXlWYWx1ZSA9ICcnO1xyXG4gICAqICAgICAgICAgfVxyXG4gICAqICAgICAgIH07XHJcbiAgICogICAgICAgJHNjb3BlLnJlc2V0V2l0aG91dENhbmNlbCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgKiAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcclxuICAgKiAgICAgICAgICAgJHNjb3BlLm15VmFsdWUgPSAnJztcclxuICAgKiAgICAgICAgIH1cclxuICAgKiAgICAgICB9O1xyXG4gICAqICAgICB9XSk7XHJcbiAgICogICA8L2ZpbGU+XHJcbiAgICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJDYW5jZWxVcGRhdGVDb250cm9sbGVyXCI+XHJcbiAgICogICAgICAgPHA+VHJ5IHR5cGluZyBzb21ldGhpbmcgaW4gZWFjaCBpbnB1dC4gIFNlZSB0aGF0IHRoZSBtb2RlbCBvbmx5IHVwZGF0ZXMgd2hlbiB5b3VcclxuICAgKiAgICAgICAgICBibHVyIG9mZiB0aGUgaW5wdXQuXHJcbiAgICogICAgICAgIDwvcD5cclxuICAgKiAgICAgICAgPHA+Tm93IHNlZSB3aGF0IGhhcHBlbnMgaWYgeW91IHN0YXJ0IHR5cGluZyB0aGVuIHByZXNzIHRoZSBFc2NhcGUga2V5PC9wPlxyXG4gICAqXHJcbiAgICogICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnYmx1cicgfVwiPlxyXG4gICAqICAgICAgICAgPHA+V2l0aCAkcm9sbGJhY2tWaWV3VmFsdWUoKTwvcD5cclxuICAgKiAgICAgICAgIDxpbnB1dCBuYW1lPVwibXlJbnB1dDFcIiBuZy1tb2RlbD1cIm15VmFsdWVcIiBuZy1rZXlkb3duPVwicmVzZXRXaXRoQ2FuY2VsKCRldmVudClcIj48YnIvPlxyXG4gICAqICAgICAgICAgbXlWYWx1ZTogXCJ7eyBteVZhbHVlIH19XCJcclxuICAgKlxyXG4gICAqICAgICAgICAgPHA+V2l0aG91dCAkcm9sbGJhY2tWaWV3VmFsdWUoKTwvcD5cclxuICAgKiAgICAgICAgIDxpbnB1dCBuYW1lPVwibXlJbnB1dDJcIiBuZy1tb2RlbD1cIm15VmFsdWVcIiBuZy1rZXlkb3duPVwicmVzZXRXaXRob3V0Q2FuY2VsKCRldmVudClcIj48YnIvPlxyXG4gICAqICAgICAgICAgbXlWYWx1ZTogXCJ7eyBteVZhbHVlIH19XCJcclxuICAgKiAgICAgICA8L2Zvcm0+XHJcbiAgICogICAgIDwvZGl2PlxyXG4gICAqICAgPC9maWxlPlxyXG4gICAqIDwvZXhhbXBsZT5cclxuICAgKi9cclxuICB0aGlzLiRyb2xsYmFja1ZpZXdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHRpbWVvdXQuY2FuY2VsKHBlbmRpbmdEZWJvdW5jZSk7XHJcbiAgICBjdHJsLiR2aWV3VmFsdWUgPSBjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcclxuICAgIGN0cmwuJHJlbmRlcigpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0ZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUnVucyBlYWNoIG9mIHRoZSByZWdpc3RlcmVkIHZhbGlkYXRvcnMgKGZpcnN0IHN5bmNocm9ub3VzIHZhbGlkYXRvcnMgYW5kIHRoZW5cclxuICAgKiBhc3luY2hyb25vdXMgdmFsaWRhdG9ycykuXHJcbiAgICogSWYgdGhlIHZhbGlkaXR5IGNoYW5nZXMgdG8gaW52YWxpZCwgdGhlIG1vZGVsIHdpbGwgYmUgc2V0IHRvIGB1bmRlZmluZWRgLFxyXG4gICAqIHVubGVzcyB7QGxpbmsgbmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zLmFsbG93SW52YWxpZGB9IGlzIGB0cnVlYC5cclxuICAgKiBJZiB0aGUgdmFsaWRpdHkgY2hhbmdlcyB0byB2YWxpZCwgaXQgd2lsbCBzZXQgdGhlIG1vZGVsIHRvIHRoZSBsYXN0IGF2YWlsYWJsZSB2YWxpZFxyXG4gICAqIG1vZGVsVmFsdWUsIGkuZS4gZWl0aGVyIHRoZSBsYXN0IHBhcnNlZCB2YWx1ZSBvciB0aGUgbGFzdCB2YWx1ZSBzZXQgZnJvbSB0aGUgc2NvcGUuXHJcbiAgICovXHJcbiAgdGhpcy4kdmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIGlnbm9yZSAkdmFsaWRhdGUgYmVmb3JlIG1vZGVsIGlzIGluaXRpYWxpemVkXHJcbiAgICBpZiAoaXNOdW1iZXIoY3RybC4kbW9kZWxWYWx1ZSkgJiYgaXNOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB2aWV3VmFsdWUgPSBjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcclxuICAgIC8vIE5vdGU6IHdlIHVzZSB0aGUgJCRyYXdNb2RlbFZhbHVlIGFzICRtb2RlbFZhbHVlIG1pZ2h0IGhhdmUgYmVlblxyXG4gICAgLy8gc2V0IHRvIHVuZGVmaW5lZCBkdXJpbmcgYSB2aWV3IC0+IG1vZGVsIHVwZGF0ZSB0aGF0IGZvdW5kIHZhbGlkYXRpb25cclxuICAgIC8vIGVycm9ycy4gV2UgY2FuJ3QgcGFyc2UgdGhlIHZpZXcgaGVyZSwgc2luY2UgdGhhdCBjb3VsZCBjaGFuZ2VcclxuICAgIC8vIHRoZSBtb2RlbCBhbHRob3VnaCBuZWl0aGVyIHZpZXdWYWx1ZSBub3IgdGhlIG1vZGVsIG9uIHRoZSBzY29wZSBjaGFuZ2VkXHJcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IGN0cmwuJCRyYXdNb2RlbFZhbHVlO1xyXG5cclxuICAgIHZhciBwcmV2VmFsaWQgPSBjdHJsLiR2YWxpZDtcclxuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IGN0cmwuJG1vZGVsVmFsdWU7XHJcblxyXG4gICAgdmFyIGFsbG93SW52YWxpZCA9IGN0cmwuJG9wdGlvbnMgJiYgY3RybC4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7XHJcblxyXG4gICAgY3RybC4kJHJ1blZhbGlkYXRvcnMobW9kZWxWYWx1ZSwgdmlld1ZhbHVlLCBmdW5jdGlvbihhbGxWYWxpZCkge1xyXG4gICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gY2hhbmdlIGluIHZhbGlkaXR5LCBkb24ndCB1cGRhdGUgdGhlIG1vZGVsXHJcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgY2hhbmdpbmcgYW4gaW52YWxpZCBtb2RlbFZhbHVlIHRvIHVuZGVmaW5lZFxyXG4gICAgICBpZiAoIWFsbG93SW52YWxpZCAmJiBwcmV2VmFsaWQgIT09IGFsbFZhbGlkKSB7XHJcbiAgICAgICAgLy8gTm90ZTogRG9uJ3QgY2hlY2sgY3RybC4kdmFsaWQgaGVyZSwgYXMgd2UgY291bGQgaGF2ZVxyXG4gICAgICAgIC8vIGV4dGVybmFsIHZhbGlkYXRvcnMgKGUuZy4gY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyKSxcclxuICAgICAgICAvLyB0aGF0IGp1c3QgY2FsbCAkc2V0VmFsaWRpdHkgYW5kIG5lZWQgdGhlIG1vZGVsIHZhbHVlXHJcbiAgICAgICAgLy8gdG8gY2FsY3VsYXRlIHRoZWlyIHZhbGlkaXR5LlxyXG4gICAgICAgIGN0cmwuJG1vZGVsVmFsdWUgPSBhbGxWYWxpZCA/IG1vZGVsVmFsdWUgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmIChjdHJsLiRtb2RlbFZhbHVlICE9PSBwcmV2TW9kZWxWYWx1ZSkge1xyXG4gICAgICAgICAgY3RybC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kJHJ1blZhbGlkYXRvcnMgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUsIGRvbmVDYWxsYmFjaykge1xyXG4gICAgY3VycmVudFZhbGlkYXRpb25SdW5JZCsrO1xyXG4gICAgdmFyIGxvY2FsVmFsaWRhdGlvblJ1bklkID0gY3VycmVudFZhbGlkYXRpb25SdW5JZDtcclxuXHJcbiAgICAvLyBjaGVjayBwYXJzZXIgZXJyb3JcclxuICAgIGlmICghcHJvY2Vzc1BhcnNlRXJyb3JzKCkpIHtcclxuICAgICAgdmFsaWRhdGlvbkRvbmUoZmFsc2UpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIXByb2Nlc3NTeW5jVmFsaWRhdG9ycygpKSB7XHJcbiAgICAgIHZhbGlkYXRpb25Eb25lKGZhbHNlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXJzZUVycm9ycygpIHtcclxuICAgICAgdmFyIGVycm9yS2V5ID0gY3RybC4kJHBhcnNlck5hbWUgfHwgJ3BhcnNlJztcclxuICAgICAgaWYgKHBhcnNlclZhbGlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBzZXRWYWxpZGl0eShlcnJvcktleSwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCFwYXJzZXJWYWxpZCkge1xyXG4gICAgICAgICAgZm9yRWFjaChjdHJsLiR2YWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIG51bGwpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBmb3JFYWNoKGN0cmwuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odiwgbmFtZSkge1xyXG4gICAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZXQgdGhlIHBhcnNlIGVycm9yIGxhc3QsIHRvIHByZXZlbnQgdW5zZXR0aW5nIGl0LCBzaG91bGQgYSAkdmFsaWRhdG9ycyBrZXkgPT0gcGFyc2VyTmFtZVxyXG4gICAgICAgIHNldFZhbGlkaXR5KGVycm9yS2V5LCBwYXJzZXJWYWxpZCk7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlclZhbGlkO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHByb2Nlc3NTeW5jVmFsaWRhdG9ycygpIHtcclxuICAgICAgdmFyIHN5bmNWYWxpZGF0b3JzVmFsaWQgPSB0cnVlO1xyXG4gICAgICBmb3JFYWNoKGN0cmwuJHZhbGlkYXRvcnMsIGZ1bmN0aW9uKHZhbGlkYXRvciwgbmFtZSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB2YWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKTtcclxuICAgICAgICBzeW5jVmFsaWRhdG9yc1ZhbGlkID0gc3luY1ZhbGlkYXRvcnNWYWxpZCAmJiByZXN1bHQ7XHJcbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgcmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghc3luY1ZhbGlkYXRvcnNWYWxpZCkge1xyXG4gICAgICAgIGZvckVhY2goY3RybC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XHJcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpIHtcclxuICAgICAgdmFyIHZhbGlkYXRvclByb21pc2VzID0gW107XHJcbiAgICAgIHZhciBhbGxWYWxpZCA9IHRydWU7XHJcbiAgICAgIGZvckVhY2goY3RybC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2YWxpZGF0b3IsIG5hbWUpIHtcclxuICAgICAgICB2YXIgcHJvbWlzZSA9IHZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpO1xyXG4gICAgICAgIGlmICghaXNQcm9taXNlTGlrZShwcm9taXNlKSkge1xyXG4gICAgICAgICAgdGhyb3cgJG5nTW9kZWxNaW5FcnIoXCIkYXN5bmNWYWxpZGF0b3JzXCIsXHJcbiAgICAgICAgICAgIFwiRXhwZWN0ZWQgYXN5bmNocm9ub3VzIHZhbGlkYXRvciB0byByZXR1cm4gYSBwcm9taXNlIGJ1dCBnb3QgJ3swfScgaW5zdGVhZC5cIiwgcHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgdmFsaWRhdG9yUHJvbWlzZXMucHVzaChwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCB0cnVlKTtcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgICAgYWxsVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIGZhbHNlKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoIXZhbGlkYXRvclByb21pc2VzLmxlbmd0aCkge1xyXG4gICAgICAgIHZhbGlkYXRpb25Eb25lKHRydWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRxLmFsbCh2YWxpZGF0b3JQcm9taXNlcykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhbGlkYXRpb25Eb25lKGFsbFZhbGlkKTtcclxuICAgICAgICB9LCBub29wKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFZhbGlkaXR5KG5hbWUsIGlzVmFsaWQpIHtcclxuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSBjdXJyZW50VmFsaWRhdGlvblJ1bklkKSB7XHJcbiAgICAgICAgY3RybC4kc2V0VmFsaWRpdHkobmFtZSwgaXNWYWxpZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0aW9uRG9uZShhbGxWYWxpZCkge1xyXG4gICAgICBpZiAobG9jYWxWYWxpZGF0aW9uUnVuSWQgPT09IGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQpIHtcclxuXHJcbiAgICAgICAgZG9uZUNhbGxiYWNrKGFsbFZhbGlkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRjb21taXRWaWV3VmFsdWVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENvbW1pdCBhIHBlbmRpbmcgdXBkYXRlIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxyXG4gICAqXHJcbiAgICogVXBkYXRlcyBtYXkgYmUgcGVuZGluZyBieSBhIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBhIHNvbWUgZnV0dXJlXHJcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIHRoaXMgbWV0aG9kIGlzIHJhcmVseSBuZWVkZWQgYXMgYE5nTW9kZWxDb250cm9sbGVyYFxyXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxyXG4gICAqL1xyXG4gIHRoaXMuJGNvbW1pdFZpZXdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHZpZXdWYWx1ZSA9IGN0cmwuJHZpZXdWYWx1ZTtcclxuXHJcbiAgICAkdGltZW91dC5jYW5jZWwocGVuZGluZ0RlYm91bmNlKTtcclxuXHJcbiAgICAvLyBJZiB0aGUgdmlldyB2YWx1ZSBoYXMgbm90IGNoYW5nZWQgdGhlbiB3ZSBzaG91bGQganVzdCBleGl0LCBleGNlcHQgaW4gdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaXNcclxuICAgIC8vIGEgbmF0aXZlIHZhbGlkYXRvciBvbiB0aGUgZWxlbWVudC4gSW4gdGhpcyBjYXNlIHRoZSB2YWxpZGF0aW9uIHN0YXRlIG1heSBoYXZlIGNoYW5nZWQgZXZlbiB0aG91Z2hcclxuICAgIC8vIHRoZSB2aWV3VmFsdWUgaGFzIHN0YXllZCBlbXB0eS5cclxuICAgIGlmIChjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSA9PT0gdmlld1ZhbHVlICYmICh2aWV3VmFsdWUgIT09ICcnIHx8ICFjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY3RybC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XHJcblxyXG4gICAgLy8gY2hhbmdlIHRvIGRpcnR5XHJcbiAgICBpZiAoY3RybC4kcHJpc3RpbmUpIHtcclxuICAgICAgdGhpcy4kc2V0RGlydHkoKTtcclxuICAgIH1cclxuICAgIHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB2aWV3VmFsdWUgPSBjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcclxuICAgIHZhciBtb2RlbFZhbHVlID0gdmlld1ZhbHVlO1xyXG4gICAgcGFyc2VyVmFsaWQgPSBpc1VuZGVmaW5lZChtb2RlbFZhbHVlKSA/IHVuZGVmaW5lZCA6IHRydWU7XHJcblxyXG4gICAgaWYgKHBhcnNlclZhbGlkKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3RybC4kcGFyc2Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG1vZGVsVmFsdWUgPSBjdHJsLiRwYXJzZXJzW2ldKG1vZGVsVmFsdWUpO1xyXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgICAgcGFyc2VyVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlzTnVtYmVyKGN0cmwuJG1vZGVsVmFsdWUpICYmIGlzTmFOKGN0cmwuJG1vZGVsVmFsdWUpKSB7XHJcbiAgICAgIC8vIGN0cmwuJG1vZGVsVmFsdWUgaGFzIG5vdCBiZWVuIHRvdWNoZWQgeWV0Li4uXHJcbiAgICAgIGN0cmwuJG1vZGVsVmFsdWUgPSBuZ01vZGVsR2V0KCRzY29wZSk7XHJcbiAgICB9XHJcbiAgICB2YXIgcHJldk1vZGVsVmFsdWUgPSBjdHJsLiRtb2RlbFZhbHVlO1xyXG4gICAgdmFyIGFsbG93SW52YWxpZCA9IGN0cmwuJG9wdGlvbnMgJiYgY3RybC4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7XHJcbiAgICBjdHJsLiQkcmF3TW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XHJcblxyXG4gICAgaWYgKGFsbG93SW52YWxpZCkge1xyXG4gICAgICBjdHJsLiRtb2RlbFZhbHVlID0gbW9kZWxWYWx1ZTtcclxuICAgICAgd3JpdGVUb01vZGVsSWZOZWVkZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQYXNzIHRoZSAkJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgaGVyZSwgYmVjYXVzZSB0aGUgY2FjaGVkIHZpZXdWYWx1ZSBtaWdodCBiZSBvdXQgb2YgZGF0ZS5cclxuICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBlLmcuICRzZXRWaWV3VmFsdWUgaXMgY2FsbGVkIGZyb20gaW5zaWRlIGEgcGFyc2VyXHJcbiAgICBjdHJsLiQkcnVuVmFsaWRhdG9ycyhtb2RlbFZhbHVlLCBjdHJsLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcclxuICAgICAgaWYgKCFhbGxvd0ludmFsaWQpIHtcclxuICAgICAgICAvLyBOb3RlOiBEb24ndCBjaGVjayBjdHJsLiR2YWxpZCBoZXJlLCBhcyB3ZSBjb3VsZCBoYXZlXHJcbiAgICAgICAgLy8gZXh0ZXJuYWwgdmFsaWRhdG9ycyAoZS5nLiBjYWxjdWxhdGVkIG9uIHRoZSBzZXJ2ZXIpLFxyXG4gICAgICAgIC8vIHRoYXQganVzdCBjYWxsICRzZXRWYWxpZGl0eSBhbmQgbmVlZCB0aGUgbW9kZWwgdmFsdWVcclxuICAgICAgICAvLyB0byBjYWxjdWxhdGUgdGhlaXIgdmFsaWRpdHkuXHJcbiAgICAgICAgY3RybC4kbW9kZWxWYWx1ZSA9IGFsbFZhbGlkID8gbW9kZWxWYWx1ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB3cml0ZVRvTW9kZWxJZk5lZWRlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiB3cml0ZVRvTW9kZWxJZk5lZWRlZCgpIHtcclxuICAgICAgaWYgKGN0cmwuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XHJcbiAgICAgICAgY3RybC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB0aGlzLiQkd3JpdGVNb2RlbFRvU2NvcGUgPSBmdW5jdGlvbigpIHtcclxuICAgIG5nTW9kZWxTZXQoJHNjb3BlLCBjdHJsLiRtb2RlbFZhbHVlKTtcclxuICAgIGZvckVhY2goY3RybC4kdmlld0NoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBsaXN0ZW5lcigpO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWVcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFVwZGF0ZSB0aGUgdmlldyB2YWx1ZS5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbiBpbnB1dCBkaXJlY3RpdmUgd2FudCB0byBjaGFuZ2UgdGhlIHZpZXcgdmFsdWU7IHR5cGljYWxseSxcclxuICAgKiB0aGlzIGlzIGRvbmUgZnJvbSB3aXRoaW4gYSBET00gZXZlbnQgaGFuZGxlci5cclxuICAgKlxyXG4gICAqIEZvciBleGFtcGxlIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9IGNhbGxzIGl0IHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBpbnB1dCBjaGFuZ2VzIGFuZFxyXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6c2VsZWN0IHNlbGVjdH0gY2FsbHMgaXQgd2hlbiBhbiBvcHRpb24gaXMgc2VsZWN0ZWQuXHJcbiAgICpcclxuICAgKiBJZiB0aGUgbmV3IGB2YWx1ZWAgaXMgYW4gb2JqZWN0IChyYXRoZXIgdGhhbiBhIHN0cmluZyBvciBhIG51bWJlciksIHdlIHNob3VsZCBtYWtlIGEgY29weSBvZiB0aGVcclxuICAgKiBvYmplY3QgYmVmb3JlIHBhc3NpbmcgaXQgdG8gYCRzZXRWaWV3VmFsdWVgLiAgVGhpcyBpcyBiZWNhdXNlIGBuZ01vZGVsYCBkb2VzIG5vdCBwZXJmb3JtIGEgZGVlcFxyXG4gICAqIHdhdGNoIG9mIG9iamVjdHMsIGl0IG9ubHkgbG9va3MgZm9yIGEgY2hhbmdlIG9mIGlkZW50aXR5LiBJZiB5b3Ugb25seSBjaGFuZ2UgdGhlIHByb3BlcnR5IG9mXHJcbiAgICogdGhlIG9iamVjdCB0aGVuIG5nTW9kZWwgd2lsbCBub3QgcmVhbGlzZSB0aGF0IHRoZSBvYmplY3QgaGFzIGNoYW5nZWQgYW5kIHdpbGwgbm90IGludm9rZSB0aGVcclxuICAgKiBgJHBhcnNlcnNgIGFuZCBgJHZhbGlkYXRvcnNgIHBpcGVsaW5lcy5cclxuICAgKlxyXG4gICAqIEZvciB0aGlzIHJlYXNvbiwgeW91IHNob3VsZCBub3QgY2hhbmdlIHByb3BlcnRpZXMgb2YgdGhlIGNvcHkgb25jZSBpdCBoYXMgYmVlbiBwYXNzZWQgdG9cclxuICAgKiBgJHNldFZpZXdWYWx1ZWAuIE90aGVyd2lzZSB5b3UgbWF5IGNhdXNlIHRoZSBtb2RlbCB2YWx1ZSBvbiB0aGUgc2NvcGUgdG8gY2hhbmdlIGluY29ycmVjdGx5LlxyXG4gICAqXHJcbiAgICogV2hlbiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQsIHRoZSBuZXcgYHZhbHVlYCB3aWxsIGJlIHN0YWdlZCBmb3IgY29tbWl0dGluZyB0aHJvdWdoIHRoZSBgJHBhcnNlcnNgXHJcbiAgICogYW5kIGAkdmFsaWRhdG9yc2AgcGlwZWxpbmVzLiBJZiB0aGVyZSBhcmUgbm8gc3BlY2lhbCB7QGxpbmsgbmdNb2RlbE9wdGlvbnN9IHNwZWNpZmllZCB0aGVuIHRoZSBzdGFnZWRcclxuICAgKiB2YWx1ZSBzZW50IGRpcmVjdGx5IGZvciBwcm9jZXNzaW5nLCBmaW5hbGx5IHRvIGJlIGFwcGxpZWQgdG8gYCRtb2RlbFZhbHVlYCBhbmQgdGhlbiB0aGVcclxuICAgKiAqKmV4cHJlc3Npb24qKiBzcGVjaWZpZWQgaW4gdGhlIGBuZy1tb2RlbGAgYXR0cmlidXRlLlxyXG4gICAqXHJcbiAgICogTGFzdGx5LCBhbGwgdGhlIHJlZ2lzdGVyZWQgY2hhbmdlIGxpc3RlbmVycywgaW4gdGhlIGAkdmlld0NoYW5nZUxpc3RlbmVyc2AgbGlzdCwgYXJlIGNhbGxlZC5cclxuICAgKlxyXG4gICAqIEluIGNhc2UgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9IGRpcmVjdGl2ZSBpcyB1c2VkIHdpdGggYHVwZGF0ZU9uYFxyXG4gICAqIGFuZCB0aGUgYGRlZmF1bHRgIHRyaWdnZXIgaXMgbm90IGxpc3RlZCwgYWxsIHRob3NlIGFjdGlvbnMgd2lsbCByZW1haW4gcGVuZGluZyB1bnRpbCBvbmUgb2YgdGhlXHJcbiAgICogYHVwZGF0ZU9uYCBldmVudHMgaXMgdHJpZ2dlcmVkIG9uIHRoZSBET00gZWxlbWVudC5cclxuICAgKiBBbGwgdGhlc2UgYWN0aW9ucyB3aWxsIGJlIGRlYm91bmNlZCBpZiB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc31cclxuICAgKiBkaXJlY3RpdmUgaXMgdXNlZCB3aXRoIGEgY3VzdG9tIGRlYm91bmNlIGZvciB0aGlzIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICpcclxuICAgKiBOb3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHRyaWdnZXIgYSBgJGRpZ2VzdGAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVmFsdWUgZnJvbSB0aGUgdmlldy5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHJpZ2dlciBFdmVudCB0aGF0IHRyaWdnZXJlZCB0aGUgdXBkYXRlLlxyXG4gICAqL1xyXG4gIHRoaXMuJHNldFZpZXdWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCB0cmlnZ2VyKSB7XHJcbiAgICBjdHJsLiR2aWV3VmFsdWUgPSB2YWx1ZTtcclxuICAgIGlmICghY3RybC4kb3B0aW9ucyB8fCBjdHJsLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCkge1xyXG4gICAgICBjdHJsLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQodHJpZ2dlcik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0ID0gZnVuY3Rpb24odHJpZ2dlcikge1xyXG4gICAgdmFyIGRlYm91bmNlRGVsYXkgPSAwLFxyXG4gICAgICAgIG9wdGlvbnMgPSBjdHJsLiRvcHRpb25zLFxyXG4gICAgICAgIGRlYm91bmNlO1xyXG5cclxuICAgIGlmIChvcHRpb25zICYmIGlzRGVmaW5lZChvcHRpb25zLmRlYm91bmNlKSkge1xyXG4gICAgICBkZWJvdW5jZSA9IG9wdGlvbnMuZGVib3VuY2U7XHJcbiAgICAgIGlmIChpc051bWJlcihkZWJvdW5jZSkpIHtcclxuICAgICAgICBkZWJvdW5jZURlbGF5ID0gZGVib3VuY2U7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoZGVib3VuY2VbdHJpZ2dlcl0pKSB7XHJcbiAgICAgICAgZGVib3VuY2VEZWxheSA9IGRlYm91bmNlW3RyaWdnZXJdO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKGRlYm91bmNlWydkZWZhdWx0J10pKSB7XHJcbiAgICAgICAgZGVib3VuY2VEZWxheSA9IGRlYm91bmNlWydkZWZhdWx0J107XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAkdGltZW91dC5jYW5jZWwocGVuZGluZ0RlYm91bmNlKTtcclxuICAgIGlmIChkZWJvdW5jZURlbGF5KSB7XHJcbiAgICAgIHBlbmRpbmdEZWJvdW5jZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGN0cmwuJGNvbW1pdFZpZXdWYWx1ZSgpO1xyXG4gICAgICB9LCBkZWJvdW5jZURlbGF5KTtcclxuICAgIH0gZWxzZSBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XHJcbiAgICAgIGN0cmwuJGNvbW1pdFZpZXdWYWx1ZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICBjdHJsLiRjb21taXRWaWV3VmFsdWUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gbW9kZWwgLT4gdmFsdWVcclxuICAvLyBOb3RlOiB3ZSBjYW5ub3QgdXNlIGEgbm9ybWFsIHNjb3BlLiR3YXRjaCBhcyB3ZSB3YW50IHRvIGRldGVjdCB0aGUgZm9sbG93aW5nOlxyXG4gIC8vIDEuIHNjb3BlIHZhbHVlIGlzICdhJ1xyXG4gIC8vIDIuIHVzZXIgZW50ZXJzICdiJ1xyXG4gIC8vIDMuIG5nLWNoYW5nZSBraWNrcyBpbiBhbmQgcmV2ZXJ0cyBzY29wZSB2YWx1ZSB0byAnYSdcclxuICAvLyAgICAtPiBzY29wZSB2YWx1ZSBkaWQgbm90IGNoYW5nZSBzaW5jZSB0aGUgbGFzdCBkaWdlc3QgYXNcclxuICAvLyAgICAgICBuZy1jaGFuZ2UgZXhlY3V0ZXMgaW4gYXBwbHkgcGhhc2VcclxuICAvLyA0LiB2aWV3IHNob3VsZCBiZSBjaGFuZ2VkIGJhY2sgdG8gJ2EnXHJcbiAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiBuZ01vZGVsV2F0Y2goKSB7XHJcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IG5nTW9kZWxHZXQoJHNjb3BlKTtcclxuXHJcbiAgICAvLyBpZiBzY29wZSBtb2RlbCB2YWx1ZSBhbmQgbmdNb2RlbCB2YWx1ZSBhcmUgb3V0IG9mIHN5bmNcclxuICAgIC8vIFRPRE8ocGVyZik6IHdoeSBub3QgbW92ZSB0aGlzIHRvIHRoZSBhY3Rpb24gZm4/XHJcbiAgICBpZiAobW9kZWxWYWx1ZSAhPT0gY3RybC4kbW9kZWxWYWx1ZSkge1xyXG4gICAgICBjdHJsLiRtb2RlbFZhbHVlID0gY3RybC4kJHJhd01vZGVsVmFsdWUgPSBtb2RlbFZhbHVlO1xyXG4gICAgICBwYXJzZXJWYWxpZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgIHZhciBmb3JtYXR0ZXJzID0gY3RybC4kZm9ybWF0dGVycyxcclxuICAgICAgICAgIGlkeCA9IGZvcm1hdHRlcnMubGVuZ3RoO1xyXG5cclxuICAgICAgdmFyIHZpZXdWYWx1ZSA9IG1vZGVsVmFsdWU7XHJcbiAgICAgIHdoaWxlIChpZHgtLSkge1xyXG4gICAgICAgIHZpZXdWYWx1ZSA9IGZvcm1hdHRlcnNbaWR4XSh2aWV3VmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjdHJsLiR2aWV3VmFsdWUgIT09IHZpZXdWYWx1ZSkge1xyXG4gICAgICAgIGN0cmwuJHZpZXdWYWx1ZSA9IGN0cmwuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID0gdmlld1ZhbHVlO1xyXG4gICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG5cclxuICAgICAgICBjdHJsLiQkcnVuVmFsaWRhdG9ycyhtb2RlbFZhbHVlLCB2aWV3VmFsdWUsIG5vb3ApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1vZGVsVmFsdWU7XHJcbiAgfSk7XHJcbn1dO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW9kZWxcclxuICpcclxuICogQGVsZW1lbnQgaW5wdXRcclxuICogQHByaW9yaXR5IDFcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFRoZSBgbmdNb2RlbGAgZGlyZWN0aXZlIGJpbmRzIGFuIGBpbnB1dGAsYHNlbGVjdGAsIGB0ZXh0YXJlYWAgKG9yIGN1c3RvbSBmb3JtIGNvbnRyb2wpIHRvIGFcclxuICogcHJvcGVydHkgb24gdGhlIHNjb3BlIHVzaW5nIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIE5nTW9kZWxDb250cm9sbGVyfSxcclxuICogd2hpY2ggaXMgY3JlYXRlZCBhbmQgZXhwb3NlZCBieSB0aGlzIGRpcmVjdGl2ZS5cclxuICpcclxuICogYG5nTW9kZWxgIGlzIHJlc3BvbnNpYmxlIGZvcjpcclxuICpcclxuICogLSBCaW5kaW5nIHRoZSB2aWV3IGludG8gdGhlIG1vZGVsLCB3aGljaCBvdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYGlucHV0YCwgYHRleHRhcmVhYCBvciBgc2VsZWN0YFxyXG4gKiAgIHJlcXVpcmUuXHJcbiAqIC0gUHJvdmlkaW5nIHZhbGlkYXRpb24gYmVoYXZpb3IgKGkuZS4gcmVxdWlyZWQsIG51bWJlciwgZW1haWwsIHVybCkuXHJcbiAqIC0gS2VlcGluZyB0aGUgc3RhdGUgb2YgdGhlIGNvbnRyb2wgKHZhbGlkL2ludmFsaWQsIGRpcnR5L3ByaXN0aW5lLCB0b3VjaGVkL3VudG91Y2hlZCwgdmFsaWRhdGlvbiBlcnJvcnMpLlxyXG4gKiAtIFNldHRpbmcgcmVsYXRlZCBjc3MgY2xhc3NlcyBvbiB0aGUgZWxlbWVudCAoYG5nLXZhbGlkYCwgYG5nLWludmFsaWRgLCBgbmctZGlydHlgLCBgbmctcHJpc3RpbmVgLCBgbmctdG91Y2hlZGAsIGBuZy11bnRvdWNoZWRgKSBpbmNsdWRpbmcgYW5pbWF0aW9ucy5cclxuICogLSBSZWdpc3RlcmluZyB0aGUgY29udHJvbCB3aXRoIGl0cyBwYXJlbnQge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGZvcm19LlxyXG4gKlxyXG4gKiBOb3RlOiBgbmdNb2RlbGAgd2lsbCB0cnkgdG8gYmluZCB0byB0aGUgcHJvcGVydHkgZ2l2ZW4gYnkgZXZhbHVhdGluZyB0aGUgZXhwcmVzc2lvbiBvbiB0aGVcclxuICogY3VycmVudCBzY29wZS4gSWYgdGhlIHByb3BlcnR5IGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBvbiB0aGlzIHNjb3BlLCBpdCB3aWxsIGJlIGNyZWF0ZWRcclxuICogaW1wbGljaXRseSBhbmQgYWRkZWQgdG8gdGhlIHNjb3BlLlxyXG4gKlxyXG4gKiBGb3IgYmVzdCBwcmFjdGljZXMgb24gdXNpbmcgYG5nTW9kZWxgLCBzZWU6XHJcbiAqXHJcbiAqICAtIFtVbmRlcnN0YW5kaW5nIFNjb3Blc10oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy93aWtpL1VuZGVyc3RhbmRpbmctU2NvcGVzKVxyXG4gKlxyXG4gKiBGb3IgYmFzaWMgZXhhbXBsZXMsIGhvdyB0byB1c2UgYG5nTW9kZWxgLCBzZWU6XHJcbiAqXHJcbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W3RleHRdIHRleHR9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W2NoZWNrYm94XSBjaGVja2JveH1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbcmFkaW9dIHJhZGlvfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFtudW1iZXJdIG51bWJlcn1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbZW1haWxdIGVtYWlsfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFt1cmxdIHVybH1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbZGF0ZV0gZGF0ZX1cclxuICogICAgLSB7QGxpbmsgaW5wdXRbZGF0ZXRpbWUtbG9jYWxdIGRhdGV0aW1lLWxvY2FsfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFt0aW1lXSB0aW1lfVxyXG4gKiAgICAtIHtAbGluayBpbnB1dFttb250aF0gbW9udGh9XHJcbiAqICAgIC0ge0BsaW5rIGlucHV0W3dlZWtdIHdlZWt9XHJcbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6c2VsZWN0IHNlbGVjdH1cclxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTp0ZXh0YXJlYSB0ZXh0YXJlYX1cclxuICpcclxuICogIyBDU1MgY2xhc3Nlc1xyXG4gKiBUaGUgZm9sbG93aW5nIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZCBvbiB0aGUgYXNzb2NpYXRlZCBpbnB1dC9zZWxlY3QvdGV4dGFyZWEgZWxlbWVudFxyXG4gKiBkZXBlbmRpbmcgb24gdGhlIHZhbGlkaXR5IG9mIHRoZSBtb2RlbC5cclxuICpcclxuICogIC0gYG5nLXZhbGlkYDogdGhlIG1vZGVsIGlzIHZhbGlkXHJcbiAqICAtIGBuZy1pbnZhbGlkYDogdGhlIG1vZGVsIGlzIGludmFsaWRcclxuICogIC0gYG5nLXZhbGlkLVtrZXldYDogZm9yIGVhY2ggdmFsaWQga2V5IGFkZGVkIGJ5IGAkc2V0VmFsaWRpdHlgXHJcbiAqICAtIGBuZy1pbnZhbGlkLVtrZXldYDogZm9yIGVhY2ggaW52YWxpZCBrZXkgYWRkZWQgYnkgYCRzZXRWYWxpZGl0eWBcclxuICogIC0gYG5nLXByaXN0aW5lYDogdGhlIGNvbnRyb2wgaGFzbid0IGJlZW4gaW50ZXJhY3RlZCB3aXRoIHlldFxyXG4gKiAgLSBgbmctZGlydHlgOiB0aGUgY29udHJvbCBoYXMgYmVlbiBpbnRlcmFjdGVkIHdpdGhcclxuICogIC0gYG5nLXRvdWNoZWRgOiB0aGUgY29udHJvbCBoYXMgYmVlbiBibHVycmVkXHJcbiAqICAtIGBuZy11bnRvdWNoZWRgOiB0aGUgY29udHJvbCBoYXNuJ3QgYmVlbiBibHVycmVkXHJcbiAqICAtIGBuZy1wZW5kaW5nYDogYW55IGAkYXN5bmNWYWxpZGF0b3JzYCBhcmUgdW5mdWxmaWxsZWRcclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQgbmdBbmltYXRlIGNhbiBkZXRlY3QgZWFjaCBvZiB0aGVzZSBjbGFzc2VzIHdoZW4gYWRkZWQgYW5kIHJlbW92ZWQuXHJcbiAqXHJcbiAqICMjIEFuaW1hdGlvbiBIb29rc1xyXG4gKlxyXG4gKiBBbmltYXRpb25zIHdpdGhpbiBtb2RlbHMgYXJlIHRyaWdnZXJlZCB3aGVuIGFueSBvZiB0aGUgYXNzb2NpYXRlZCBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWRcclxuICogb24gdGhlIGlucHV0IGVsZW1lbnQgd2hpY2ggaXMgYXR0YWNoZWQgdG8gdGhlIG1vZGVsLiBUaGVzZSBjbGFzc2VzIGFyZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLFxyXG4gKiBgLm5nLWludmFsaWRgIGFuZCBgLm5nLXZhbGlkYCBhcyB3ZWxsIGFzIGFueSBvdGhlciB2YWxpZGF0aW9ucyB0aGF0IGFyZSBwZXJmb3JtZWQgb24gdGhlIG1vZGVsIGl0c2VsZi5cclxuICogVGhlIGFuaW1hdGlvbnMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdpdGhpbiBuZ01vZGVsIGFyZSBzaW1pbGFyIHRvIGhvdyB0aGV5IHdvcmsgaW4gbmdDbGFzcyBhbmRcclxuICogYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbCBhcyBKUyBhbmltYXRpb25zLlxyXG4gKlxyXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgYSBzaW1wbGUgd2F5IHRvIHV0aWxpemUgQ1NTIHRyYW5zaXRpb25zIHRvIHN0eWxlIGFuIGlucHV0IGVsZW1lbnRcclxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcclxuICpcclxuICogPHByZT5cclxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXHJcbiAqIC8vYWR2YW5jZWQgYW5pbWF0aW9uc1xyXG4gKiAubXktaW5wdXQge1xyXG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xyXG4gKiAgIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gKiB9XHJcbiAqIC5teS1pbnB1dC5uZy1pbnZhbGlkIHtcclxuICogICBiYWNrZ3JvdW5kOiByZWQ7XHJcbiAqICAgY29sb3I6d2hpdGU7XHJcbiAqIH1cclxuICogPC9wcmU+XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIDxleGFtcGxlIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIGZpeEJhc2U9XCJ0cnVlXCIgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZhbCA9ICcxJztcclxuICAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPHN0eWxlPlxyXG4gICAgICAgICAubXktaW5wdXQge1xyXG4gICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgLm15LWlucHV0Lm5nLWludmFsaWQge1xyXG4gICAgICAgICAgIGNvbG9yOndoaXRlO1xyXG4gICAgICAgICAgIGJhY2tncm91bmQ6IHJlZDtcclxuICAgICAgICAgfVxyXG4gICAgICAgPC9zdHlsZT5cclxuICAgICAgIFVwZGF0ZSBpbnB1dCB0byBzZWUgdHJhbnNpdGlvbnMgd2hlbiB2YWxpZC9pbnZhbGlkLlxyXG4gICAgICAgSW50ZWdlciBpcyBhIHZhbGlkIHZhbHVlLlxyXG4gICAgICAgPGZvcm0gbmFtZT1cInRlc3RGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInZhbFwiIG5nLXBhdHRlcm49XCIvXlxcZCskL1wiIG5hbWU9XCJhbmltXCIgY2xhc3M9XCJteS1pbnB1dFwiIC8+XHJcbiAgICAgICA8L2Zvcm0+XHJcbiAgICAgPC9maWxlPlxyXG4gKiA8L2V4YW1wbGU+XHJcbiAqXHJcbiAqICMjIEJpbmRpbmcgdG8gYSBnZXR0ZXIvc2V0dGVyXHJcbiAqXHJcbiAqIFNvbWV0aW1lcyBpdCdzIGhlbHBmdWwgdG8gYmluZCBgbmdNb2RlbGAgdG8gYSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9uLiAgQSBnZXR0ZXIvc2V0dGVyIGlzIGFcclxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggemVybyBhcmd1bWVudHMsIGFuZCBzZXRzXHJcbiAqIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggYW4gYXJndW1lbnQuIEl0J3Mgc29tZXRpbWVzIHVzZWZ1bCB0byB1c2UgdGhpc1xyXG4gKiBmb3IgbW9kZWxzIHRoYXQgaGF2ZSBhbiBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiB0aGF0J3MgZGlmZmVyZW50IHRoYW4gd2hhdCB0aGUgbW9kZWwgZXhwb3Nlc1xyXG4gKiB0byB0aGUgdmlldy5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cclxuICogKipCZXN0IFByYWN0aWNlOioqIEl0J3MgYmVzdCB0byBrZWVwIGdldHRlcnMgZmFzdCBiZWNhdXNlIEFuZ3VsYXIgaXMgbGlrZWx5IHRvIGNhbGwgdGhlbSBtb3JlXHJcbiAqIGZyZXF1ZW50bHkgdGhhbiBvdGhlciBwYXJ0cyBvZiB5b3VyIGNvZGUuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBZb3UgdXNlIHRoaXMgYmVoYXZpb3IgYnkgYWRkaW5nIGBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiYCB0byBhbiBlbGVtZW50IHRoYXRcclxuICogaGFzIGBuZy1tb2RlbGAgYXR0YWNoZWQgdG8gaXQuIFlvdSBjYW4gYWxzbyBhZGQgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCJgIHRvXHJcbiAqIGEgYDxmb3JtPmAsIHdoaWNoIHdpbGwgZW5hYmxlIHRoaXMgYmVoYXZpb3IgZm9yIGFsbCBgPGlucHV0PmBzIHdpdGhpbiBpdC4gU2VlXHJcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zYH0gZm9yIG1vcmUuXHJcbiAqXHJcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGBuZ01vZGVsYCB3aXRoIGEgZ2V0dGVyL3NldHRlcjpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWwtZ2V0dGVyLXNldHRlclwiIG1vZHVsZT1cImdldHRlclNldHRlckV4YW1wbGVcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XHJcbiAgICAgICAgICAgTmFtZTpcclxuICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCIgLz5cclxuICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWUoKVwiPjwvc3Bhbj48L3ByZT5cclxuICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XHJcbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0dGVyU2V0dGVyRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgIHZhciBfbmFtZSA9ICdCcmlhbic7XHJcbiAgICAgICAgICAgJHNjb3BlLnVzZXIgPSB7XHJcbiAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbihuZXdOYW1lKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChuZXdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgIF9uYW1lID0gbmV3TmFtZTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICByZXR1cm4gX25hbWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfTtcclxuICAgICAgICAgfV0pO1xyXG4gICAgIDwvZmlsZT5cclxuICogPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nTW9kZWxEaXJlY3RpdmUgPSBbJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICByZXF1aXJlOiBbJ25nTW9kZWwnLCAnXj9mb3JtJywgJ14/bmdNb2RlbE9wdGlvbnMnXSxcclxuICAgIGNvbnRyb2xsZXI6IE5nTW9kZWxDb250cm9sbGVyLFxyXG4gICAgLy8gUHJlbGluayBuZWVkcyB0byBydW4gYmVmb3JlIGFueSBpbnB1dCBkaXJlY3RpdmVcclxuICAgIC8vIHNvIHRoYXQgd2UgY2FuIHNldCB0aGUgTmdNb2RlbE9wdGlvbnMgaW4gTmdNb2RlbENvbnRyb2xsZXJcclxuICAgIC8vIGJlZm9yZSBhbnlvbmUgZWxzZSB1c2VzIGl0LlxyXG4gICAgcHJpb3JpdHk6IDEsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ01vZGVsQ29tcGlsZShlbGVtZW50KSB7XHJcbiAgICAgIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcclxuICAgICAgZWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUykuYWRkQ2xhc3MoVU5UT1VDSEVEX0NMQVNTKS5hZGRDbGFzcyhWQUxJRF9DTEFTUyk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHByZTogZnVuY3Rpb24gbmdNb2RlbFByZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XHJcbiAgICAgICAgICB2YXIgbW9kZWxDdHJsID0gY3RybHNbMF0sXHJcbiAgICAgICAgICAgICAgZm9ybUN0cmwgPSBjdHJsc1sxXSB8fCBudWxsRm9ybUN0cmw7XHJcblxyXG4gICAgICAgICAgbW9kZWxDdHJsLiQkc2V0T3B0aW9ucyhjdHJsc1syXSAmJiBjdHJsc1syXS4kb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgLy8gbm90aWZ5IG90aGVycywgZXNwZWNpYWxseSBwYXJlbnQgZm9ybXNcclxuICAgICAgICAgIGZvcm1DdHJsLiRhZGRDb250cm9sKG1vZGVsQ3RybCk7XHJcblxyXG4gICAgICAgICAgYXR0ci4kb2JzZXJ2ZSgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwuJG5hbWUgIT09IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgZm9ybUN0cmwuJCRyZW5hbWVDb250cm9sKG1vZGVsQ3RybCwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGZvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvc3Q6IGZ1bmN0aW9uIG5nTW9kZWxQb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcclxuICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXTtcclxuICAgICAgICAgIGlmIChtb2RlbEN0cmwuJG9wdGlvbnMgJiYgbW9kZWxDdHJsLiRvcHRpb25zLnVwZGF0ZU9uKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub24obW9kZWxDdHJsLiRvcHRpb25zLnVwZGF0ZU9uLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICAgIG1vZGVsQ3RybC4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KGV2ICYmIGV2LnR5cGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBlbGVtZW50Lm9uKCdibHVyJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgaWYgKG1vZGVsQ3RybC4kdG91Y2hlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xyXG4gICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMobW9kZWxDdHJsLiRzZXRUb3VjaGVkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkobW9kZWxDdHJsLiRzZXRUb3VjaGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxudmFyIERFRkFVTFRfUkVHRVhQID0gLyhcXHMrfF4pZGVmYXVsdChcXHMrfCQpLztcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTW9kZWxPcHRpb25zXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBBbGxvd3MgdHVuaW5nIGhvdyBtb2RlbCB1cGRhdGVzIGFyZSBkb25lLiBVc2luZyBgbmdNb2RlbE9wdGlvbnNgIHlvdSBjYW4gc3BlY2lmeSBhIGN1c3RvbSBsaXN0IG9mXHJcbiAqIGV2ZW50cyB0aGF0IHdpbGwgdHJpZ2dlciBhIG1vZGVsIHVwZGF0ZSBhbmQvb3IgYSBkZWJvdW5jaW5nIGRlbGF5IHNvIHRoYXQgdGhlIGFjdHVhbCB1cGRhdGUgb25seVxyXG4gKiB0YWtlcyBwbGFjZSB3aGVuIGEgdGltZXIgZXhwaXJlczsgdGhpcyB0aW1lciB3aWxsIGJlIHJlc2V0IGFmdGVyIGFub3RoZXIgY2hhbmdlIHRha2VzIHBsYWNlLlxyXG4gKlxyXG4gKiBHaXZlbiB0aGUgbmF0dXJlIG9mIGBuZ01vZGVsT3B0aW9uc2AsIHRoZSB2YWx1ZSBkaXNwbGF5ZWQgaW5zaWRlIGlucHV0IGZpZWxkcyBpbiB0aGUgdmlldyBtaWdodFxyXG4gKiBiZSBkaWZmZXJlbnQgdGhhbiB0aGUgdmFsdWUgaW4gdGhlIGFjdHVhbCBtb2RlbC4gVGhpcyBtZWFucyB0aGF0IGlmIHlvdSB1cGRhdGUgdGhlIG1vZGVsIHlvdVxyXG4gKiBzaG91bGQgYWxzbyBpbnZva2Uge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIgYCRyb2xsYmFja1ZpZXdWYWx1ZWB9IG9uIHRoZSByZWxldmFudCBpbnB1dCBmaWVsZCBpblxyXG4gKiBvcmRlciB0byBtYWtlIHN1cmUgaXQgaXMgc3luY2hyb25pemVkIHdpdGggdGhlIG1vZGVsIGFuZCB0aGF0IGFueSBkZWJvdW5jZWQgYWN0aW9uIGlzIGNhbmNlbGVkLlxyXG4gKlxyXG4gKiBUaGUgZWFzaWVzdCB3YXkgdG8gcmVmZXJlbmNlIHRoZSBjb250cm9sJ3Mge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIgYCRyb2xsYmFja1ZpZXdWYWx1ZWB9XHJcbiAqIG1ldGhvZCBpcyBieSBtYWtpbmcgc3VyZSB0aGUgaW5wdXQgaXMgcGxhY2VkIGluc2lkZSBhIGZvcm0gdGhhdCBoYXMgYSBgbmFtZWAgYXR0cmlidXRlLiBUaGlzIGlzXHJcbiAqIGltcG9ydGFudCBiZWNhdXNlIGBmb3JtYCBjb250cm9sbGVycyBhcmUgcHVibGlzaGVkIHRvIHRoZSByZWxhdGVkIHNjb3BlIHVuZGVyIHRoZSBuYW1lIGluIHRoZWlyXHJcbiAqIGBuYW1lYCBhdHRyaWJ1dGUuXHJcbiAqXHJcbiAqIEFueSBwZW5kaW5nIGNoYW5nZXMgd2lsbCB0YWtlIHBsYWNlIGltbWVkaWF0ZWx5IHdoZW4gYW4gZW5jbG9zaW5nIGZvcm0gaXMgc3VibWl0dGVkIHZpYSB0aGVcclxuICogYHN1Ym1pdGAgZXZlbnQuIE5vdGUgdGhhdCBgbmdDbGlja2AgZXZlbnRzIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBtb2RlbCBpcyB1cGRhdGVkLiBVc2UgYG5nU3VibWl0YFxyXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cclxuICpcclxuICogYG5nTW9kZWxPcHRpb25zYCBoYXMgYW4gZWZmZWN0IG9uIHRoZSBlbGVtZW50IGl0J3MgZGVjbGFyZWQgb24gYW5kIGl0cyBkZXNjZW5kYW50cy5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IG5nTW9kZWxPcHRpb25zIG9wdGlvbnMgdG8gYXBwbHkgdG8gdGhlIGN1cnJlbnQgbW9kZWwuIFZhbGlkIGtleXMgYXJlOlxyXG4gKiAgIC0gYHVwZGF0ZU9uYDogc3RyaW5nIHNwZWNpZnlpbmcgd2hpY2ggZXZlbnQgc2hvdWxkIHRoZSBpbnB1dCBiZSBib3VuZCB0by4gWW91IGNhbiBzZXQgc2V2ZXJhbFxyXG4gKiAgICAgZXZlbnRzIHVzaW5nIGFuIHNwYWNlIGRlbGltaXRlZCBsaXN0LiBUaGVyZSBpcyBhIHNwZWNpYWwgZXZlbnQgY2FsbGVkIGBkZWZhdWx0YCB0aGF0XHJcbiAqICAgICBtYXRjaGVzIHRoZSBkZWZhdWx0IGV2ZW50cyBiZWxvbmdpbmcgb2YgdGhlIGNvbnRyb2wuXHJcbiAqICAgLSBgZGVib3VuY2VgOiBpbnRlZ2VyIHZhbHVlIHdoaWNoIGNvbnRhaW5zIHRoZSBkZWJvdW5jZSBtb2RlbCB1cGRhdGUgdmFsdWUgaW4gbWlsbGlzZWNvbmRzLiBBXHJcbiAqICAgICB2YWx1ZSBvZiAwIHRyaWdnZXJzIGFuIGltbWVkaWF0ZSB1cGRhdGUuIElmIGFuIG9iamVjdCBpcyBzdXBwbGllZCBpbnN0ZWFkLCB5b3UgY2FuIHNwZWNpZnkgYVxyXG4gKiAgICAgY3VzdG9tIHZhbHVlIGZvciBlYWNoIGV2ZW50LiBGb3IgZXhhbXBsZTpcclxuICogICAgIGBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2RlZmF1bHQgYmx1cicsIGRlYm91bmNlOiB7J2RlZmF1bHQnOiA1MDAsICdibHVyJzogMH0gfVwiYFxyXG4gKiAgIC0gYGFsbG93SW52YWxpZGA6IGJvb2xlYW4gdmFsdWUgd2hpY2ggaW5kaWNhdGVzIHRoYXQgdGhlIG1vZGVsIGNhbiBiZSBzZXQgd2l0aCB2YWx1ZXMgdGhhdCBkaWRcclxuICogICAgIG5vdCB2YWxpZGF0ZSBjb3JyZWN0bHkgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBzZXR0aW5nIHRoZSBtb2RlbCB0byB1bmRlZmluZWQuXHJcbiAqICAgLSBgZ2V0dGVyU2V0dGVyYDogYm9vbGVhbiB2YWx1ZSB3aGljaCBkZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRvIHRyZWF0IGZ1bmN0aW9ucyBib3VuZCB0b1xyXG4gICAgICAgYG5nTW9kZWxgIGFzIGdldHRlcnMvc2V0dGVycy5cclxuICogICAtIGB0aW1lem9uZWA6IERlZmluZXMgdGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBmb3JcclxuICogICAgIGA8aW5wdXQgdHlwZT1cImRhdGVcIj5gLCBgPGlucHV0IHR5cGU9XCJ0aW1lXCI+YCwgLi4uIC4gUmlnaHQgbm93LCB0aGUgb25seSBzdXBwb3J0ZWQgdmFsdWUgaXMgYCdVVEMnYCxcclxuICogICAgIG90aGVyd2lzZSB0aGUgZGVmYXVsdCB0aW1lem9uZSBvZiB0aGUgYnJvd3NlciB3aWxsIGJlIHVzZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcblxyXG4gIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gb3ZlcnJpZGUgaW1tZWRpYXRlIHVwZGF0ZXMuIENoYW5nZXMgb24gdGhlIGlucHV0cyB3aXRoaW4gdGhlXHJcbiAgZm9ybSB3aWxsIHVwZGF0ZSB0aGUgbW9kZWwgb25seSB3aGVuIHRoZSBjb250cm9sIGxvc2VzIGZvY3VzIChibHVyIGV2ZW50KS4gSWYgYGVzY2FwZWAga2V5IGlzXHJcbiAgcHJlc3NlZCB3aGlsZSB0aGUgaW5wdXQgZmllbGQgaXMgZm9jdXNlZCwgdGhlIHZhbHVlIGlzIHJlc2V0IHRvIHRoZSB2YWx1ZSBpbiB0aGUgY3VycmVudCBtb2RlbC5cclxuXHJcbiAgPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWxPcHRpb25zLWRpcmVjdGl2ZS1ibHVyXCIgbW9kdWxlPVwib3B0aW9uc0V4YW1wbGVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XHJcbiAgICAgICAgICBOYW1lOlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcclxuICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCJcclxuICAgICAgICAgICAgICAgICBuZy1rZXl1cD1cImNhbmNlbCgkZXZlbnQpXCIgLz48YnIgLz5cclxuXHJcbiAgICAgICAgICBPdGhlciBkYXRhOlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyLmRhdGFcIiAvPjxiciAvPlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWVcIj48L3NwYW4+PC9wcmU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnb3B0aW9uc0V4YW1wbGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnVzZXIgPSB7IG5hbWU6ICdzYXknLCBkYXRhOiAnJyB9O1xyXG5cclxuICAgICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUudXNlckZvcm0udXNlck5hbWUuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfV0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgbW9kZWwgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VzZXIubmFtZScpKTtcclxuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlci5uYW1lJykpO1xyXG4gICAgICB2YXIgb3RoZXIgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLmRhdGEnKSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGFsbG93IGN1c3RvbSBldmVudHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpbnB1dC5zZW5kS2V5cygnIGhlbGxvJyk7XHJcbiAgICAgICAgaW5wdXQuY2xpY2soKTtcclxuICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0VxdWFsKCdzYXknKTtcclxuICAgICAgICBvdGhlci5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3NheSBoZWxsbycpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgJHJvbGxiYWNrVmlld1ZhbHVlIHdoZW4gbW9kZWwgY2hhbmdlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlucHV0LnNlbmRLZXlzKCcgaGVsbG8nKTtcclxuICAgICAgICBleHBlY3QoaW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCdzYXkgaGVsbG8nKTtcclxuICAgICAgICBpbnB1dC5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5FU0NBUEUpO1xyXG4gICAgICAgIGV4cGVjdChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJ3NheScpO1xyXG4gICAgICAgIG90aGVyLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5Jyk7XHJcbiAgICAgIH0pO1xyXG4gICAgPC9maWxlPlxyXG4gIDwvZXhhbXBsZT5cclxuXHJcbiAgVGhpcyBvbmUgc2hvd3MgaG93IHRvIGRlYm91bmNlIG1vZGVsIGNoYW5nZXMuIE1vZGVsIHdpbGwgYmUgdXBkYXRlZCBvbmx5IDEgc2VjIGFmdGVyIGxhc3QgY2hhbmdlLlxyXG4gIElmIHRoZSBgQ2xlYXJgIGJ1dHRvbiBpcyBwcmVzc2VkLCBhbnkgZGVib3VuY2VkIGFjdGlvbiBpcyBjYW5jZWxlZCBhbmQgdGhlIHZhbHVlIGJlY29tZXMgZW1wdHkuXHJcblxyXG4gIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZGVib3VuY2VcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cclxuICAgICAgICAgIE5hbWU6XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxyXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcclxuICAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyBkZWJvdW5jZTogMTAwMCB9XCIgLz5cclxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJ1c2VyRm9ybS51c2VyTmFtZS4kcm9sbGJhY2tWaWV3VmFsdWUoKTsgdXNlci5uYW1lPScnXCI+Q2xlYXI8L2J1dHRvbj48YnIgLz5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lXCI+PC9zcGFuPjwvcHJlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ29wdGlvbnNFeGFtcGxlJywgW10pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAgICRzY29wZS51c2VyID0geyBuYW1lOiAnc2F5JyB9O1xyXG4gICAgICAgIH1dKTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcblxyXG4gIFRoaXMgb25lIHNob3dzIGhvdyB0byBiaW5kIHRvIGdldHRlci9zZXR0ZXJzOlxyXG5cclxuICA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbE9wdGlvbnMtZGlyZWN0aXZlLWdldHRlci1zZXR0ZXJcIiBtb2R1bGU9XCJnZXR0ZXJTZXR0ZXJFeGFtcGxlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxyXG4gICAgICAgICAgTmFtZTpcclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCIgLz5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lKClcIj48L3NwYW4+PC9wcmU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxyXG4gICAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0dGVyU2V0dGVyRXhhbXBsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICB2YXIgX25hbWUgPSAnQnJpYW4nO1xyXG4gICAgICAgICAgJHNjb3BlLnVzZXIgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uKG5ld05hbWUpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQobmV3TmFtZSkgPyAoX25hbWUgPSBuZXdOYW1lKSA6IF9uYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRhdHRycycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdGhpcy4kb3B0aW9ucyA9ICRzY29wZS4kZXZhbCgkYXR0cnMubmdNb2RlbE9wdGlvbnMpO1xyXG4gICAgICAvLyBBbGxvdyBhZGRpbmcvb3ZlcnJpZGluZyBib3VuZCBldmVudHNcclxuICAgICAgaWYgKHRoaXMuJG9wdGlvbnMudXBkYXRlT24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gZXh0cmFjdCBcImRlZmF1bHRcIiBwc2V1ZG8tZXZlbnQgZnJvbSBsaXN0IG9mIGV2ZW50cyB0aGF0IGNhbiB0cmlnZ2VyIGEgbW9kZWwgdXBkYXRlXHJcbiAgICAgICAgdGhpcy4kb3B0aW9ucy51cGRhdGVPbiA9IHRyaW0odGhpcy4kb3B0aW9ucy51cGRhdGVPbi5yZXBsYWNlKERFRkFVTFRfUkVHRVhQLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHRoYXQuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgIHJldHVybiAnICc7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfV1cclxuICB9O1xyXG59O1xyXG5cclxuXHJcblxyXG4vLyBoZWxwZXIgbWV0aG9kc1xyXG5mdW5jdGlvbiBhZGRTZXRWYWxpZGl0eU1ldGhvZChjb250ZXh0KSB7XHJcbiAgdmFyIGN0cmwgPSBjb250ZXh0LmN0cmwsXHJcbiAgICAgICRlbGVtZW50ID0gY29udGV4dC4kZWxlbWVudCxcclxuICAgICAgY2xhc3NDYWNoZSA9IHt9LFxyXG4gICAgICBzZXQgPSBjb250ZXh0LnNldCxcclxuICAgICAgdW5zZXQgPSBjb250ZXh0LnVuc2V0LFxyXG4gICAgICBwYXJlbnRGb3JtID0gY29udGV4dC5wYXJlbnRGb3JtLFxyXG4gICAgICAkYW5pbWF0ZSA9IGNvbnRleHQuJGFuaW1hdGU7XHJcblxyXG4gIGNsYXNzQ2FjaGVbSU5WQUxJRF9DTEFTU10gPSAhKGNsYXNzQ2FjaGVbVkFMSURfQ0xBU1NdID0gJGVsZW1lbnQuaGFzQ2xhc3MoVkFMSURfQ0xBU1MpKTtcclxuXHJcbiAgY3RybC4kc2V0VmFsaWRpdHkgPSBzZXRWYWxpZGl0eTtcclxuXHJcbiAgZnVuY3Rpb24gc2V0VmFsaWRpdHkodmFsaWRhdGlvbkVycm9yS2V5LCBzdGF0ZSwgY29udHJvbGxlcikge1xyXG4gICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgY3JlYXRlQW5kU2V0KCckcGVuZGluZycsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1bnNldEFuZENsZWFudXAoJyRwZW5kaW5nJywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcclxuICAgIH1cclxuICAgIGlmICghaXNCb29sZWFuKHN0YXRlKSkge1xyXG4gICAgICB1bnNldChjdHJsLiRlcnJvciwgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcclxuICAgICAgdW5zZXQoY3RybC4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICB1bnNldChjdHJsLiRlcnJvciwgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcclxuICAgICAgICBzZXQoY3RybC4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0KGN0cmwuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIHVuc2V0KGN0cmwuJCRzdWNjZXNzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY3RybC4kcGVuZGluZykge1xyXG4gICAgICBjYWNoZWRUb2dnbGVDbGFzcyhQRU5ESU5HX0NMQVNTLCB0cnVlKTtcclxuICAgICAgY3RybC4kdmFsaWQgPSBjdHJsLiRpbnZhbGlkID0gdW5kZWZpbmVkO1xyXG4gICAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKCcnLCBudWxsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKFBFTkRJTkdfQ0xBU1MsIGZhbHNlKTtcclxuICAgICAgY3RybC4kdmFsaWQgPSBpc09iamVjdEVtcHR5KGN0cmwuJGVycm9yKTtcclxuICAgICAgY3RybC4kaW52YWxpZCA9ICFjdHJsLiR2YWxpZDtcclxuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcygnJywgY3RybC4kdmFsaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlLXJlYWQgdGhlIHN0YXRlIGFzIHRoZSBzZXQvdW5zZXQgbWV0aG9kcyBjb3VsZCBoYXZlXHJcbiAgICAvLyBjb21iaW5lZCBzdGF0ZSBpbiBjdHJsLiRlcnJvclt2YWxpZGF0aW9uRXJyb3JdICh1c2VkIGZvciBmb3JtcyksXHJcbiAgICAvLyB3aGVyZSBzZXR0aW5nL3Vuc2V0dGluZyBvbmx5IGluY3JlbWVudHMvZGVjcmVtZW50cyB0aGUgdmFsdWUsXHJcbiAgICAvLyBhbmQgZG9lcyBub3QgcmVwbGFjZSBpdC5cclxuICAgIHZhciBjb21iaW5lZFN0YXRlO1xyXG4gICAgaWYgKGN0cmwuJHBlbmRpbmcgJiYgY3RybC4kcGVuZGluZ1t2YWxpZGF0aW9uRXJyb3JLZXldKSB7XHJcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB1bmRlZmluZWQ7XHJcbiAgICB9IGVsc2UgaWYgKGN0cmwuJGVycm9yW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcclxuICAgICAgY29tYmluZWRTdGF0ZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmIChjdHJsLiQkc3VjY2Vzc1t2YWxpZGF0aW9uRXJyb3JLZXldKSB7XHJcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29tYmluZWRTdGF0ZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh2YWxpZGF0aW9uRXJyb3JLZXksIGNvbWJpbmVkU3RhdGUpO1xyXG4gICAgcGFyZW50Rm9ybS4kc2V0VmFsaWRpdHkodmFsaWRhdGlvbkVycm9yS2V5LCBjb21iaW5lZFN0YXRlLCBjdHJsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUFuZFNldChuYW1lLCB2YWx1ZSwgY29udHJvbGxlcikge1xyXG4gICAgaWYgKCFjdHJsW25hbWVdKSB7XHJcbiAgICAgIGN0cmxbbmFtZV0gPSB7fTtcclxuICAgIH1cclxuICAgIHNldChjdHJsW25hbWVdLCB2YWx1ZSwgY29udHJvbGxlcik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1bnNldEFuZENsZWFudXAobmFtZSwgdmFsdWUsIGNvbnRyb2xsZXIpIHtcclxuICAgIGlmIChjdHJsW25hbWVdKSB7XHJcbiAgICAgIHVuc2V0KGN0cmxbbmFtZV0sIHZhbHVlLCBjb250cm9sbGVyKTtcclxuICAgIH1cclxuICAgIGlmIChpc09iamVjdEVtcHR5KGN0cmxbbmFtZV0pKSB7XHJcbiAgICAgIGN0cmxbbmFtZV0gPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjYWNoZWRUb2dnbGVDbGFzcyhjbGFzc05hbWUsIHN3aXRjaFZhbHVlKSB7XHJcbiAgICBpZiAoc3dpdGNoVmFsdWUgJiYgIWNsYXNzQ2FjaGVbY2xhc3NOYW1lXSkge1xyXG4gICAgICAkYW5pbWF0ZS5hZGRDbGFzcygkZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgY2xhc3NDYWNoZVtjbGFzc05hbWVdID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoIXN3aXRjaFZhbHVlICYmIGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSkge1xyXG4gICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcygkZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgY2xhc3NDYWNoZVtjbGFzc05hbWVdID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0b2dnbGVWYWxpZGF0aW9uQ3NzKHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCkge1xyXG4gICAgdmFsaWRhdGlvbkVycm9yS2V5ID0gdmFsaWRhdGlvbkVycm9yS2V5ID8gJy0nICsgc25ha2VfY2FzZSh2YWxpZGF0aW9uRXJyb3JLZXksICctJykgOiAnJztcclxuXHJcbiAgICBjYWNoZWRUb2dnbGVDbGFzcyhWQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gdHJ1ZSk7XHJcbiAgICBjYWNoZWRUb2dnbGVDbGFzcyhJTlZBTElEX0NMQVNTICsgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkID09PSBmYWxzZSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpc09iamVjdEVtcHR5KG9iaikge1xyXG4gIGlmIChvYmopIHtcclxuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nTm9uQmluZGFibGVcclxuICogQHJlc3RyaWN0IEFDXHJcbiAqIEBwcmlvcml0eSAxMDAwXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nTm9uQmluZGFibGVgIGRpcmVjdGl2ZSB0ZWxscyBBbmd1bGFyIG5vdCB0byBjb21waWxlIG9yIGJpbmQgdGhlIGNvbnRlbnRzIG9mIHRoZSBjdXJyZW50XHJcbiAqIERPTSBlbGVtZW50LiBUaGlzIGlzIHVzZWZ1bCBpZiB0aGUgZWxlbWVudCBjb250YWlucyB3aGF0IGFwcGVhcnMgdG8gYmUgQW5ndWxhciBkaXJlY3RpdmVzIGFuZFxyXG4gKiBiaW5kaW5ncyBidXQgd2hpY2ggc2hvdWxkIGJlIGlnbm9yZWQgYnkgQW5ndWxhci4gVGhpcyBjb3VsZCBiZSB0aGUgY2FzZSBpZiB5b3UgaGF2ZSBhIHNpdGUgdGhhdFxyXG4gKiBkaXNwbGF5cyBzbmlwcGV0cyBvZiBjb2RlLCBmb3IgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBJbiB0aGlzIGV4YW1wbGUgdGhlcmUgYXJlIHR3byBsb2NhdGlvbnMgd2hlcmUgYSBzaW1wbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nIChge3t9fWApIGlzIHByZXNlbnQsXHJcbiAqIGJ1dCB0aGUgb25lIHdyYXBwZWQgaW4gYG5nTm9uQmluZGFibGVgIGlzIGxlZnQgYWxvbmUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8ZGl2Pk5vcm1hbDoge3sxICsgMn19PC9kaXY+XHJcbiAgICAgICAgPGRpdiBuZy1ub24tYmluZGFibGU+SWdub3JlZDoge3sxICsgMn19PC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1ub24tYmluZGFibGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnMSArIDInKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzMnKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnZGl2JykpLmxhc3QoKS5nZXRUZXh0KCkpLnRvTWF0Y2goLzEgXFwrIDIvKTtcclxuICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdOb25CaW5kYWJsZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHsgdGVybWluYWw6IHRydWUsIHByaW9yaXR5OiAxMDAwIH0pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdQbHVyYWxpemVcclxuICogQHJlc3RyaWN0IEVBXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBgbmdQbHVyYWxpemVgIGlzIGEgZGlyZWN0aXZlIHRoYXQgZGlzcGxheXMgbWVzc2FnZXMgYWNjb3JkaW5nIHRvIGVuLVVTIGxvY2FsaXphdGlvbiBydWxlcy5cclxuICogVGhlc2UgcnVsZXMgYXJlIGJ1bmRsZWQgd2l0aCBhbmd1bGFyLmpzLCBidXQgY2FuIGJlIG92ZXJyaWRkZW5cclxuICogKHNlZSB7QGxpbmsgZ3VpZGUvaTE4biBBbmd1bGFyIGkxOG59IGRldiBndWlkZSkuIFlvdSBjb25maWd1cmUgbmdQbHVyYWxpemUgZGlyZWN0aXZlXHJcbiAqIGJ5IHNwZWNpZnlpbmcgdGhlIG1hcHBpbmdzIGJldHdlZW5cclxuICogW3BsdXJhbCBjYXRlZ29yaWVzXShodHRwOi8vdW5pY29kZS5vcmcvcmVwb3MvY2xkci10bXAvdHJ1bmsvZGlmZi9zdXBwbGVtZW50YWwvbGFuZ3VhZ2VfcGx1cmFsX3J1bGVzLmh0bWwpXHJcbiAqIGFuZCB0aGUgc3RyaW5ncyB0byBiZSBkaXNwbGF5ZWQuXHJcbiAqXHJcbiAqICMgUGx1cmFsIGNhdGVnb3JpZXMgYW5kIGV4cGxpY2l0IG51bWJlciBydWxlc1xyXG4gKiBUaGVyZSBhcmUgdHdvXHJcbiAqIFtwbHVyYWwgY2F0ZWdvcmllc10oaHR0cDovL3VuaWNvZGUub3JnL3JlcG9zL2NsZHItdG1wL3RydW5rL2RpZmYvc3VwcGxlbWVudGFsL2xhbmd1YWdlX3BsdXJhbF9ydWxlcy5odG1sKVxyXG4gKiBpbiBBbmd1bGFyJ3MgZGVmYXVsdCBlbi1VUyBsb2NhbGU6IFwib25lXCIgYW5kIFwib3RoZXJcIi5cclxuICpcclxuICogV2hpbGUgYSBwbHVyYWwgY2F0ZWdvcnkgbWF5IG1hdGNoIG1hbnkgbnVtYmVycyAoZm9yIGV4YW1wbGUsIGluIGVuLVVTIGxvY2FsZSwgXCJvdGhlclwiIGNhbiBtYXRjaFxyXG4gKiBhbnkgbnVtYmVyIHRoYXQgaXMgbm90IDEpLCBhbiBleHBsaWNpdCBudW1iZXIgcnVsZSBjYW4gb25seSBtYXRjaCBvbmUgbnVtYmVyLiBGb3IgZXhhbXBsZSwgdGhlXHJcbiAqIGV4cGxpY2l0IG51bWJlciBydWxlIGZvciBcIjNcIiBtYXRjaGVzIHRoZSBudW1iZXIgMy4gVGhlcmUgYXJlIGV4YW1wbGVzIG9mIHBsdXJhbCBjYXRlZ29yaWVzXHJcbiAqIGFuZCBleHBsaWNpdCBudW1iZXIgcnVsZXMgdGhyb3VnaG91dCB0aGUgcmVzdCBvZiB0aGlzIGRvY3VtZW50YXRpb24uXHJcbiAqXHJcbiAqICMgQ29uZmlndXJpbmcgbmdQbHVyYWxpemVcclxuICogWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBieSBwcm92aWRpbmcgMiBhdHRyaWJ1dGVzOiBgY291bnRgIGFuZCBgd2hlbmAuXHJcbiAqIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIGF0dHJpYnV0ZSwgYG9mZnNldGAuXHJcbiAqXHJcbiAqIFRoZSB2YWx1ZSBvZiB0aGUgYGNvdW50YCBhdHRyaWJ1dGUgY2FuIGJlIGVpdGhlciBhIHN0cmluZyBvciBhbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvblxyXG4gKiBBbmd1bGFyIGV4cHJlc3Npb259OyB0aGVzZSBhcmUgZXZhbHVhdGVkIG9uIHRoZSBjdXJyZW50IHNjb3BlIGZvciBpdHMgYm91bmQgdmFsdWUuXHJcbiAqXHJcbiAqIFRoZSBgd2hlbmAgYXR0cmlidXRlIHNwZWNpZmllcyB0aGUgbWFwcGluZ3MgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcmllcyBhbmQgdGhlIGFjdHVhbFxyXG4gKiBzdHJpbmcgdG8gYmUgZGlzcGxheWVkLiBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBzaG91bGQgYmUgYSBKU09OIG9iamVjdC5cclxuICpcclxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0byBjb25maWd1cmUgbmdQbHVyYWxpemU6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCJcclxuICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne30gcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XHJcbiAqIDwvbmctcGx1cmFsaXplPlxyXG4gKmBgYFxyXG4gKlxyXG4gKiBJbiB0aGUgZXhhbXBsZSwgYFwiMDogTm9ib2R5IGlzIHZpZXdpbmcuXCJgIGlzIGFuIGV4cGxpY2l0IG51bWJlciBydWxlLiBJZiB5b3UgZGlkIG5vdFxyXG4gKiBzcGVjaWZ5IHRoaXMgcnVsZSwgMCB3b3VsZCBiZSBtYXRjaGVkIHRvIHRoZSBcIm90aGVyXCIgY2F0ZWdvcnkgYW5kIFwiMCBwZW9wbGUgYXJlIHZpZXdpbmdcIlxyXG4gKiB3b3VsZCBiZSBzaG93biBpbnN0ZWFkIG9mIFwiTm9ib2R5IGlzIHZpZXdpbmdcIi4gWW91IGNhbiBzcGVjaWZ5IGFuIGV4cGxpY2l0IG51bWJlciBydWxlIGZvclxyXG4gKiBvdGhlciBudW1iZXJzLCBmb3IgZXhhbXBsZSAxMiwgc28gdGhhdCBpbnN0ZWFkIG9mIHNob3dpbmcgXCIxMiBwZW9wbGUgYXJlIHZpZXdpbmdcIiwgeW91IGNhblxyXG4gKiBzaG93IFwiYSBkb3plbiBwZW9wbGUgYXJlIHZpZXdpbmdcIi5cclxuICpcclxuICogWW91IGNhbiB1c2UgYSBzZXQgb2YgY2xvc2VkIGJyYWNlcyAoYHt9YCkgYXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIG51bWJlciB0aGF0IHlvdSB3YW50IHN1YnN0aXR1dGVkXHJcbiAqIGludG8gcGx1cmFsaXplZCBzdHJpbmdzLiBJbiB0aGUgcHJldmlvdXMgZXhhbXBsZSwgQW5ndWxhciB3aWxsIHJlcGxhY2UgYHt9YCB3aXRoXHJcbiAqIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT5ge3twZXJzb25Db3VudH19YDwvc3Bhbj4uIFRoZSBjbG9zZWQgYnJhY2VzIGB7fWAgaXMgYSBwbGFjZWhvbGRlclxyXG4gKiBmb3IgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7bnVtYmVyRXhwcmVzc2lvbn19PC9zcGFuPi5cclxuICpcclxuICogIyBDb25maWd1cmluZyBuZ1BsdXJhbGl6ZSB3aXRoIG9mZnNldFxyXG4gKiBUaGUgYG9mZnNldGAgYXR0cmlidXRlIGFsbG93cyBmdXJ0aGVyIGN1c3RvbWl6YXRpb24gb2YgcGx1cmFsaXplZCB0ZXh0LCB3aGljaCBjYW4gcmVzdWx0IGluXHJcbiAqIGEgYmV0dGVyIHVzZXIgZXhwZXJpZW5jZS4gRm9yIGV4YW1wbGUsIGluc3RlYWQgb2YgdGhlIG1lc3NhZ2UgXCI0IHBlb3BsZSBhcmUgdmlld2luZyB0aGlzIGRvY3VtZW50XCIsXHJcbiAqIHlvdSBtaWdodCBkaXNwbGF5IFwiSm9obiwgS2F0ZSBhbmQgMiBvdGhlcnMgYXJlIHZpZXdpbmcgdGhpcyBkb2N1bWVudFwiLlxyXG4gKiBUaGUgb2Zmc2V0IGF0dHJpYnV0ZSBhbGxvd3MgeW91IHRvIG9mZnNldCBhIG51bWJlciBieSBhbnkgZGVzaXJlZCB2YWx1ZS5cclxuICogTGV0J3MgdGFrZSBhIGxvb2sgYXQgYW4gZXhhbXBsZTpcclxuICpcclxuICogYGBgaHRtbFxyXG4gKiA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxyXG4gKiAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcclxuICogICAgICAgICAgICAgICAgICAgICAgJzEnOiAne3twZXJzb24xfX0gaXMgdmlld2luZy4nLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcclxuICogICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyxcclxuICogICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQge30gb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XHJcbiAqIDwvbmctcGx1cmFsaXplPlxyXG4gKiBgYGBcclxuICpcclxuICogTm90aWNlIHRoYXQgd2UgYXJlIHN0aWxsIHVzaW5nIHR3byBwbHVyYWwgY2F0ZWdvcmllcyhvbmUsIG90aGVyKSwgYnV0IHdlIGFkZGVkXHJcbiAqIHRocmVlIGV4cGxpY2l0IG51bWJlciBydWxlcyAwLCAxIGFuZCAyLlxyXG4gKiBXaGVuIG9uZSBwZXJzb24sIHBlcmhhcHMgSm9obiwgdmlld3MgdGhlIGRvY3VtZW50LCBcIkpvaG4gaXMgdmlld2luZ1wiIHdpbGwgYmUgc2hvd24uXHJcbiAqIFdoZW4gdGhyZWUgcGVvcGxlIHZpZXcgdGhlIGRvY3VtZW50LCBubyBleHBsaWNpdCBudW1iZXIgcnVsZSBpcyBmb3VuZCwgc29cclxuICogYW4gb2Zmc2V0IG9mIDIgaXMgdGFrZW4gb2ZmIDMsIGFuZCBBbmd1bGFyIHVzZXMgMSB0byBkZWNpZGUgdGhlIHBsdXJhbCBjYXRlZ29yeS5cclxuICogSW4gdGhpcyBjYXNlLCBwbHVyYWwgY2F0ZWdvcnkgJ29uZScgaXMgbWF0Y2hlZCBhbmQgXCJKb2huLCBNYXJ5IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nXCJcclxuICogaXMgc2hvd24uXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB3aGVuIHlvdSBzcGVjaWZ5IG9mZnNldHMsIHlvdSBtdXN0IHByb3ZpZGUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIGZvclxyXG4gKiBudW1iZXJzIGZyb20gMCB1cCB0byBhbmQgaW5jbHVkaW5nIHRoZSBvZmZzZXQuIElmIHlvdSB1c2UgYW4gb2Zmc2V0IG9mIDMsIGZvciBleGFtcGxlLFxyXG4gKiB5b3UgbXVzdCBwcm92aWRlIGV4cGxpY2l0IG51bWJlciBydWxlcyBmb3IgMCwgMSwgMiBhbmQgMy4gWW91IG11c3QgYWxzbyBwcm92aWRlIHBsdXJhbCBzdHJpbmdzIGZvclxyXG4gKiBwbHVyYWwgY2F0ZWdvcmllcyBcIm9uZVwiIGFuZCBcIm90aGVyXCIuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfGV4cHJlc3Npb259IGNvdW50IFRoZSB2YXJpYWJsZSB0byBiZSBib3VuZCB0by5cclxuICogQHBhcmFtIHtzdHJpbmd9IHdoZW4gVGhlIG1hcHBpbmcgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcnkgdG8gaXRzIGNvcnJlc3BvbmRpbmcgc3RyaW5ncy5cclxuICogQHBhcmFtIHtudW1iZXI9fSBvZmZzZXQgT2Zmc2V0IHRvIGRlZHVjdCBmcm9tIHRoZSB0b3RhbCBudW1iZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgICA8ZXhhbXBsZSBtb2R1bGU9XCJwbHVyYWxpemVFeGFtcGxlXCI+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdwbHVyYWxpemVFeGFtcGxlJywgW10pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbjEgPSAnSWdvcic7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbjIgPSAnTWlza28nO1xyXG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb25Db3VudCA9IDE7XHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxyXG4gICAgICAgICAgUGVyc29uIDE6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb24xXCIgdmFsdWU9XCJJZ29yXCIgLz48YnIvPlxyXG4gICAgICAgICAgUGVyc29uIDI6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb24yXCIgdmFsdWU9XCJNaXNrb1wiIC8+PGJyLz5cclxuICAgICAgICAgIE51bWJlciBvZiBQZW9wbGU6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb25Db3VudFwiIHZhbHVlPVwiMVwiIC8+PGJyLz5cclxuXHJcbiAgICAgICAgICA8IS0tLSBFeGFtcGxlIHdpdGggc2ltcGxlIHBsdXJhbGl6YXRpb24gcnVsZXMgZm9yIGVuIGxvY2FsZSAtLS0+XHJcbiAgICAgICAgICBXaXRob3V0IE9mZnNldDpcclxuICAgICAgICAgIDxuZy1wbHVyYWxpemUgY291bnQ9XCJwZXJzb25Db3VudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t9IHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxyXG4gICAgICAgICAgPC9uZy1wbHVyYWxpemU+PGJyPlxyXG5cclxuICAgICAgICAgIDwhLS0tIEV4YW1wbGUgd2l0aCBvZmZzZXQgLS0tPlxyXG4gICAgICAgICAgV2l0aCBPZmZzZXQoMik6XHJcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMSc6ICd7e3BlcnNvbjF9fSBpcyB2aWV3aW5nLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCB7fSBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cclxuICAgICAgICAgIDwvbmctcGx1cmFsaXplPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2ZpbGU+XHJcbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgICBpdCgnc2hvdWxkIHNob3cgY29ycmVjdCBwbHVyYWxpemVkIHN0cmluZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHdpdGhvdXRPZmZzZXQgPSBlbGVtZW50LmFsbChieS5jc3MoJ25nLXBsdXJhbGl6ZScpKS5nZXQoMCk7XHJcbiAgICAgICAgICB2YXIgd2l0aE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgxKTtcclxuICAgICAgICAgIHZhciBjb3VudElucHV0ID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uQ291bnQnKSk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCcxIHBlcnNvbiBpcyB2aWV3aW5nLicpO1xyXG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yIGlzIHZpZXdpbmcuJyk7XHJcblxyXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMCcpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnTm9ib2R5IGlzIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ05vYm9keSBpcyB2aWV3aW5nLicpO1xyXG5cclxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcclxuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzInKTtcclxuXHJcbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xyXG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yIGFuZCBNaXNrbyBhcmUgdmlld2luZy4nKTtcclxuXHJcbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XHJcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCczJyk7XHJcblxyXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCczIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcclxuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciwgTWlza28gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyk7XHJcblxyXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xyXG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnNCcpO1xyXG5cclxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnNCBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IsIE1pc2tvIGFuZCAyIG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpdCgnc2hvdWxkIHNob3cgZGF0YS1ib3VuZCBuYW1lcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHdpdGhPZmZzZXQgPSBlbGVtZW50LmFsbChieS5jc3MoJ25nLXBsdXJhbGl6ZScpKS5nZXQoMSk7XHJcbiAgICAgICAgICB2YXIgcGVyc29uQ291bnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb25Db3VudCcpKTtcclxuICAgICAgICAgIHZhciBwZXJzb24xID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMScpKTtcclxuICAgICAgICAgIHZhciBwZXJzb24yID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMicpKTtcclxuICAgICAgICAgIHBlcnNvbkNvdW50LmNsZWFyKCk7XHJcbiAgICAgICAgICBwZXJzb25Db3VudC5zZW5kS2V5cygnNCcpO1xyXG4gICAgICAgICAgcGVyc29uMS5jbGVhcigpO1xyXG4gICAgICAgICAgcGVyc29uMS5zZW5kS2V5cygnRGknKTtcclxuICAgICAgICAgIHBlcnNvbjIuY2xlYXIoKTtcclxuICAgICAgICAgIHBlcnNvbjIuc2VuZEtleXMoJ1ZvanRhJyk7XHJcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0RpLCBWb2p0YSBhbmQgMiBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSA9IFsnJGxvY2FsZScsICckaW50ZXJwb2xhdGUnLCBmdW5jdGlvbigkbG9jYWxlLCAkaW50ZXJwb2xhdGUpIHtcclxuICB2YXIgQlJBQ0UgPSAve30vZyxcclxuICAgICAgSVNfV0hFTiA9IC9ed2hlbihNaW51cyk/KC4rKSQvO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICB2YXIgbnVtYmVyRXhwID0gYXR0ci5jb3VudCxcclxuICAgICAgICAgIHdoZW5FeHAgPSBhdHRyLiRhdHRyLndoZW4gJiYgZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIud2hlbiksIC8vIHdlIGhhdmUge3t9fSBpbiBhdHRyc1xyXG4gICAgICAgICAgb2Zmc2V0ID0gYXR0ci5vZmZzZXQgfHwgMCxcclxuICAgICAgICAgIHdoZW5zID0gc2NvcGUuJGV2YWwod2hlbkV4cCkgfHwge30sXHJcbiAgICAgICAgICB3aGVuc0V4cEZucyA9IHt9LFxyXG4gICAgICAgICAgc3RhcnRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKSxcclxuICAgICAgICAgIGVuZFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKSxcclxuICAgICAgICAgIGJyYWNlUmVwbGFjZW1lbnQgPSBzdGFydFN5bWJvbCArIG51bWJlckV4cCArICctJyArIG9mZnNldCArIGVuZFN5bWJvbCxcclxuICAgICAgICAgIHdhdGNoUmVtb3ZlciA9IGFuZ3VsYXIubm9vcCxcclxuICAgICAgICAgIGxhc3RDb3VudDtcclxuXHJcbiAgICAgIGZvckVhY2goYXR0ciwgZnVuY3Rpb24oZXhwcmVzc2lvbiwgYXR0cmlidXRlTmFtZSkge1xyXG4gICAgICAgIHZhciB0bXBNYXRjaCA9IElTX1dIRU4uZXhlYyhhdHRyaWJ1dGVOYW1lKTtcclxuICAgICAgICBpZiAodG1wTWF0Y2gpIHtcclxuICAgICAgICAgIHZhciB3aGVuS2V5ID0gKHRtcE1hdGNoWzFdID8gJy0nIDogJycpICsgbG93ZXJjYXNlKHRtcE1hdGNoWzJdKTtcclxuICAgICAgICAgIHdoZW5zW3doZW5LZXldID0gZWxlbWVudC5hdHRyKGF0dHIuJGF0dHJbYXR0cmlidXRlTmFtZV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGZvckVhY2god2hlbnMsIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGtleSkge1xyXG4gICAgICAgIHdoZW5zRXhwRm5zW2tleV0gPSAkaW50ZXJwb2xhdGUoZXhwcmVzc2lvbi5yZXBsYWNlKEJSQUNFLCBicmFjZVJlcGxhY2VtZW50KSk7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChudW1iZXJFeHAsIGZ1bmN0aW9uIG5nUGx1cmFsaXplV2F0Y2hBY3Rpb24obmV3VmFsKSB7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gcGFyc2VGbG9hdChuZXdWYWwpO1xyXG4gICAgICAgIHZhciBjb3VudElzTmFOID0gaXNOYU4oY291bnQpO1xyXG5cclxuICAgICAgICBpZiAoIWNvdW50SXNOYU4gJiYgIShjb3VudCBpbiB3aGVucykpIHtcclxuICAgICAgICAgIC8vIElmIGFuIGV4cGxpY2l0IG51bWJlciBydWxlIHN1Y2ggYXMgMSwgMiwgMy4uLiBpcyBkZWZpbmVkLCBqdXN0IHVzZSBpdC5cclxuICAgICAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgaXQgYWdhaW5zdCBwbHVyYWxpemF0aW9uIHJ1bGVzIGluICRsb2NhbGUgc2VydmljZS5cclxuICAgICAgICAgIGNvdW50ID0gJGxvY2FsZS5wbHVyYWxDYXQoY291bnQgLSBvZmZzZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgYm90aCBgY291bnRgIGFuZCBgbGFzdENvdW50YCBhcmUgTmFOLCB3ZSBkb24ndCBuZWVkIHRvIHJlLXJlZ2lzdGVyIGEgd2F0Y2guXHJcbiAgICAgICAgLy8gSW4gSlMgYE5hTiAhPT0gTmFOYCwgc28gd2UgaGF2ZSB0byBleGxpY2l0bHkgY2hlY2suXHJcbiAgICAgICAgaWYgKChjb3VudCAhPT0gbGFzdENvdW50KSAmJiAhKGNvdW50SXNOYU4gJiYgaXNOYU4obGFzdENvdW50KSkpIHtcclxuICAgICAgICAgIHdhdGNoUmVtb3ZlcigpO1xyXG4gICAgICAgICAgd2F0Y2hSZW1vdmVyID0gc2NvcGUuJHdhdGNoKHdoZW5zRXhwRm5zW2NvdW50XSwgdXBkYXRlRWxlbWVudFRleHQpO1xyXG4gICAgICAgICAgbGFzdENvdW50ID0gY291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnRUZXh0KG5ld1RleHQpIHtcclxuICAgICAgICBlbGVtZW50LnRleHQobmV3VGV4dCB8fCAnJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nUmVwZWF0XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nUmVwZWF0YCBkaXJlY3RpdmUgaW5zdGFudGlhdGVzIGEgdGVtcGxhdGUgb25jZSBwZXIgaXRlbSBmcm9tIGEgY29sbGVjdGlvbi4gRWFjaCB0ZW1wbGF0ZVxyXG4gKiBpbnN0YW5jZSBnZXRzIGl0cyBvd24gc2NvcGUsIHdoZXJlIHRoZSBnaXZlbiBsb29wIHZhcmlhYmxlIGlzIHNldCB0byB0aGUgY3VycmVudCBjb2xsZWN0aW9uIGl0ZW0sXHJcbiAqIGFuZCBgJGluZGV4YCBpcyBzZXQgdG8gdGhlIGl0ZW0gaW5kZXggb3Iga2V5LlxyXG4gKlxyXG4gKiBTcGVjaWFsIHByb3BlcnRpZXMgYXJlIGV4cG9zZWQgb24gdGhlIGxvY2FsIHNjb3BlIG9mIGVhY2ggdGVtcGxhdGUgaW5zdGFuY2UsIGluY2x1ZGluZzpcclxuICpcclxuICogfCBWYXJpYWJsZSAgfCBUeXBlICAgICAgICAgICAgfCBEZXRhaWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8LS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAqIHwgYCRpbmRleGAgIHwge0B0eXBlIG51bWJlcn0gIHwgaXRlcmF0b3Igb2Zmc2V0IG9mIHRoZSByZXBlYXRlZCBlbGVtZW50ICgwLi5sZW5ndGgtMSkgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCBgJGZpcnN0YCAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSByZXBlYXRlZCBlbGVtZW50IGlzIGZpcnN0IGluIHRoZSBpdGVyYXRvci4gICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiB8IGAkbWlkZGxlYCB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgaW4gdGhlIGl0ZXJhdG9yLiB8XHJcbiAqIHwgYCRsYXN0YCAgIHwge0B0eXBlIGJvb2xlYW59IHwgdHJ1ZSBpZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCBpcyBsYXN0IGluIHRoZSBpdGVyYXRvci4gICAgICAgICAgICAgICAgICAgICAgIHxcclxuICogfCBgJGV2ZW5gICAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSBpdGVyYXRvciBwb3NpdGlvbiBgJGluZGV4YCBpcyBldmVuIChvdGhlcndpc2UgZmFsc2UpLiAgICAgICAgICAgfFxyXG4gKiB8IGAkb2RkYCAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIG9kZCAob3RoZXJ3aXNlIGZhbHNlKS4gICAgICAgICAgICB8XHJcbiAqXHJcbiAqIENyZWF0aW5nIGFsaWFzZXMgZm9yIHRoZXNlIHByb3BlcnRpZXMgaXMgcG9zc2libGUgd2l0aCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5pdCBgbmdJbml0YH0uXHJcbiAqIFRoaXMgbWF5IGJlIHVzZWZ1bCB3aGVuLCBmb3IgaW5zdGFuY2UsIG5lc3RpbmcgbmdSZXBlYXRzLlxyXG4gKlxyXG4gKiAjIEl0ZXJhdGluZyBvdmVyIG9iamVjdCBwcm9wZXJ0aWVzXHJcbiAqXHJcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGdldCBgbmdSZXBlYXRgIHRvIGl0ZXJhdGUgb3ZlciB0aGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgdXNpbmcgdGhlIGZvbGxvd2luZ1xyXG4gKiBzeW50YXg6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIDxkaXYgbmctcmVwZWF0PVwiKGtleSwgdmFsdWUpIGluIG15T2JqXCI+IC4uLiA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFlvdSBuZWVkIHRvIGJlIGF3YXJlIHRoYXQgdGhlIEphdmFTY3JpcHQgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCBkZWZpbmUgd2hhdCBvcmRlclxyXG4gKiBpdCB3aWxsIHJldHVybiB0aGUga2V5cyBmb3IgYW4gb2JqZWN0LiBJbiBvcmRlciB0byBoYXZlIGEgZ3VhcmFudGVlZCBkZXRlcm1pbmlzdGljIG9yZGVyXHJcbiAqIGZvciB0aGUga2V5cywgQW5ndWxhciB2ZXJzaW9ucyB1cCB0byBhbmQgaW5jbHVkaW5nIDEuMyAqKnNvcnQgdGhlIGtleXMgYWxwaGFiZXRpY2FsbHkqKi5cclxuICpcclxuICogSWYgdGhpcyBpcyBub3QgZGVzaXJlZCwgdGhlIHJlY29tbWVuZGVkIHdvcmthcm91bmQgaXMgdG8gY29udmVydCB5b3VyIG9iamVjdCBpbnRvIGFuIGFycmF5XHJcbiAqIHRoYXQgaXMgc29ydGVkIGludG8gdGhlIG9yZGVyIHRoYXQgeW91IHByZWZlciBiZWZvcmUgcHJvdmlkaW5nIGl0IHRvIGBuZ1JlcGVhdGAuICBZb3UgY291bGRcclxuICogZG8gdGhpcyB3aXRoIGEgZmlsdGVyIHN1Y2ggYXMgW3RvQXJyYXlGaWx0ZXJdKGh0dHA6Ly9uZ21vZHVsZXMub3JnL21vZHVsZXMvYW5ndWxhci10b0FycmF5RmlsdGVyKVxyXG4gKiBvciBpbXBsZW1lbnQgYSBgJHdhdGNoYCBvbiB0aGUgb2JqZWN0IHlvdXJzZWxmLlxyXG4gKlxyXG4gKiBJbiB2ZXJzaW9uIDEuNCB3ZSB3aWxsIHJlbW92ZSB0aGUgc29ydGluZywgc2luY2UgaXQgc2VlbXMgdGhhdCBicm93c2VycyBnZW5lcmFsbHkgZm9sbG93IHRoZVxyXG4gKiBzdHJhdGVneSBvZiBwcm92aWRpbmcga2V5cyBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGRlZmluZWQsIGFsdGhvdWdoIHRoZXJlIGFyZSBleGNlcHRpb25zXHJcbiAqIHdoZW4ga2V5cyBhcmUgZGVsZXRlZCBhbmQgcmVpbnN0YXRlZC5cclxuICpcclxuICpcclxuICogIyBUcmFja2luZyBhbmQgRHVwbGljYXRlc1xyXG4gKlxyXG4gKiBXaGVuIHRoZSBjb250ZW50cyBvZiB0aGUgY29sbGVjdGlvbiBjaGFuZ2UsIGBuZ1JlcGVhdGAgbWFrZXMgdGhlIGNvcnJlc3BvbmRpbmcgY2hhbmdlcyB0byB0aGUgRE9NOlxyXG4gKlxyXG4gKiAqIFdoZW4gYW4gaXRlbSBpcyBhZGRlZCwgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIHRlbXBsYXRlIGlzIGFkZGVkIHRvIHRoZSBET00uXHJcbiAqICogV2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQsIGl0cyB0ZW1wbGF0ZSBpbnN0YW5jZSBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cclxuICogKiBXaGVuIGl0ZW1zIGFyZSByZW9yZGVyZWQsIHRoZWlyIHJlc3BlY3RpdmUgdGVtcGxhdGVzIGFyZSByZW9yZGVyZWQgaW4gdGhlIERPTS5cclxuICpcclxuICogQnkgZGVmYXVsdCwgYG5nUmVwZWF0YCBkb2VzIG5vdCBhbGxvdyBkdXBsaWNhdGUgaXRlbXMgaW4gYXJyYXlzLiBUaGlzIGlzIGJlY2F1c2Ugd2hlblxyXG4gKiB0aGVyZSBhcmUgZHVwbGljYXRlcywgaXQgaXMgbm90IHBvc3NpYmxlIHRvIG1haW50YWluIGEgb25lLXRvLW9uZSBtYXBwaW5nIGJldHdlZW4gY29sbGVjdGlvblxyXG4gKiBpdGVtcyBhbmQgRE9NIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiBJZiB5b3UgZG8gbmVlZCB0byByZXBlYXQgZHVwbGljYXRlIGl0ZW1zLCB5b3UgY2FuIHN1YnN0aXR1dGUgdGhlIGRlZmF1bHQgdHJhY2tpbmcgYmVoYXZpb3JcclxuICogd2l0aCB5b3VyIG93biB1c2luZyB0aGUgYHRyYWNrIGJ5YCBleHByZXNzaW9uLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSwgeW91IG1heSB0cmFjayBpdGVtcyBieSB0aGUgaW5kZXggb2YgZWFjaCBpdGVtIGluIHRoZSBjb2xsZWN0aW9uLCB1c2luZyB0aGVcclxuICogc3BlY2lhbCBzY29wZSBwcm9wZXJ0eSBgJGluZGV4YDpcclxuICogYGBgaHRtbFxyXG4gKiAgICA8ZGl2IG5nLXJlcGVhdD1cIm4gaW4gWzQyLCA0MiwgNDMsIDQzXSB0cmFjayBieSAkaW5kZXhcIj5cclxuICogICAgICB7e259fVxyXG4gKiAgICA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFlvdSBtYXkgdXNlIGFyYml0cmFyeSBleHByZXNzaW9ucyBpbiBgdHJhY2sgYnlgLCBpbmNsdWRpbmcgcmVmZXJlbmNlcyB0byBjdXN0b20gZnVuY3Rpb25zXHJcbiAqIG9uIHRoZSBzY29wZTpcclxuICogYGBgaHRtbFxyXG4gKiAgICA8ZGl2IG5nLXJlcGVhdD1cIm4gaW4gWzQyLCA0MiwgNDMsIDQzXSB0cmFjayBieSBteVRyYWNraW5nRnVuY3Rpb24obilcIj5cclxuICogICAgICB7e259fVxyXG4gKiAgICA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIElmIHlvdSBhcmUgd29ya2luZyB3aXRoIG9iamVjdHMgdGhhdCBoYXZlIGFuIGlkZW50aWZpZXIgcHJvcGVydHksIHlvdSBjYW4gdHJhY2tcclxuICogYnkgdGhlIGlkZW50aWZpZXIgaW5zdGVhZCBvZiB0aGUgd2hvbGUgb2JqZWN0LiBTaG91bGQgeW91IHJlbG9hZCB5b3VyIGRhdGEgbGF0ZXIsIGBuZ1JlcGVhdGBcclxuICogd2lsbCBub3QgaGF2ZSB0byByZWJ1aWxkIHRoZSBET00gZWxlbWVudHMgZm9yIGl0ZW1zIGl0IGhhcyBhbHJlYWR5IHJlbmRlcmVkLCBldmVuIGlmIHRoZVxyXG4gKiBKYXZhU2NyaXB0IG9iamVjdHMgaW4gdGhlIGNvbGxlY3Rpb24gaGF2ZSBiZWVuIHN1YnN0aXR1dGVkIGZvciBuZXcgb25lczpcclxuICogYGBgaHRtbFxyXG4gKiAgICA8ZGl2IG5nLXJlcGVhdD1cIm1vZGVsIGluIGNvbGxlY3Rpb24gdHJhY2sgYnkgbW9kZWwuaWRcIj5cclxuICogICAgICB7e21vZGVsLm5hbWV9fVxyXG4gKiAgICA8L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFdoZW4gbm8gYHRyYWNrIGJ5YCBleHByZXNzaW9uIGlzIHByb3ZpZGVkLCBpdCBpcyBlcXVpdmFsZW50IHRvIHRyYWNraW5nIGJ5IHRoZSBidWlsdC1pblxyXG4gKiBgJGlkYCBmdW5jdGlvbiwgd2hpY2ggdHJhY2tzIGl0ZW1zIGJ5IHRoZWlyIGlkZW50aXR5OlxyXG4gKiBgYGBodG1sXHJcbiAqICAgIDxkaXYgbmctcmVwZWF0PVwib2JqIGluIGNvbGxlY3Rpb24gdHJhY2sgYnkgJGlkKG9iailcIj5cclxuICogICAgICB7e29iai5wcm9wfX1cclxuICogICAgPC9kaXY+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAjIFNwZWNpYWwgcmVwZWF0IHN0YXJ0IGFuZCBlbmQgcG9pbnRzXHJcbiAqIFRvIHJlcGVhdCBhIHNlcmllcyBvZiBlbGVtZW50cyBpbnN0ZWFkIG9mIGp1c3Qgb25lIHBhcmVudCBlbGVtZW50LCBuZ1JlcGVhdCAoYXMgd2VsbCBhcyBvdGhlciBuZyBkaXJlY3RpdmVzKSBzdXBwb3J0cyBleHRlbmRpbmdcclxuICogdGhlIHJhbmdlIG9mIHRoZSByZXBlYXRlciBieSBkZWZpbmluZyBleHBsaWNpdCBzdGFydCBhbmQgZW5kIHBvaW50cyBieSB1c2luZyAqKm5nLXJlcGVhdC1zdGFydCoqIGFuZCAqKm5nLXJlcGVhdC1lbmQqKiByZXNwZWN0aXZlbHkuXHJcbiAqIFRoZSAqKm5nLXJlcGVhdC1zdGFydCoqIGRpcmVjdGl2ZSB3b3JrcyB0aGUgc2FtZSBhcyAqKm5nLXJlcGVhdCoqLCBidXQgd2lsbCByZXBlYXQgYWxsIHRoZSBIVE1MIGNvZGUgKGluY2x1ZGluZyB0aGUgdGFnIGl0J3MgZGVmaW5lZCBvbilcclxuICogdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgZW5kaW5nIEhUTUwgdGFnIHdoZXJlICoqbmctcmVwZWF0LWVuZCoqIGlzIHBsYWNlZC5cclxuICpcclxuICogVGhlIGV4YW1wbGUgYmVsb3cgbWFrZXMgdXNlIG9mIHRoaXMgZmVhdHVyZTpcclxuICogYGBgaHRtbFxyXG4gKiAgIDxoZWFkZXIgbmctcmVwZWF0LXN0YXJ0PVwiaXRlbSBpbiBpdGVtc1wiPlxyXG4gKiAgICAgSGVhZGVyIHt7IGl0ZW0gfX1cclxuICogICA8L2hlYWRlcj5cclxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxyXG4gKiAgICAgQm9keSB7eyBpdGVtIH19XHJcbiAqICAgPC9kaXY+XHJcbiAqICAgPGZvb3RlciBuZy1yZXBlYXQtZW5kPlxyXG4gKiAgICAgRm9vdGVyIHt7IGl0ZW0gfX1cclxuICogICA8L2Zvb3Rlcj5cclxuICogYGBgXHJcbiAqXHJcbiAqIEFuZCB3aXRoIGFuIGlucHV0IG9mIHtAdHlwZSBbJ0EnLCdCJ119IGZvciB0aGUgaXRlbXMgdmFyaWFibGUgaW4gdGhlIGV4YW1wbGUgYWJvdmUsIHRoZSBvdXRwdXQgd2lsbCBldmFsdWF0ZSB0bzpcclxuICogYGBgaHRtbFxyXG4gKiAgIDxoZWFkZXI+XHJcbiAqICAgICBIZWFkZXIgQVxyXG4gKiAgIDwvaGVhZGVyPlxyXG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XHJcbiAqICAgICBCb2R5IEFcclxuICogICA8L2Rpdj5cclxuICogICA8Zm9vdGVyPlxyXG4gKiAgICAgRm9vdGVyIEFcclxuICogICA8L2Zvb3Rlcj5cclxuICogICA8aGVhZGVyPlxyXG4gKiAgICAgSGVhZGVyIEJcclxuICogICA8L2hlYWRlcj5cclxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxyXG4gKiAgICAgQm9keSBCXHJcbiAqICAgPC9kaXY+XHJcbiAqICAgPGZvb3Rlcj5cclxuICogICAgIEZvb3RlciBCXHJcbiAqICAgPC9mb290ZXI+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGUgY3VzdG9tIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIGZvciBuZ1JlcGVhdCBhbHNvIHN1cHBvcnQgYWxsIG90aGVyIEhUTUwgZGlyZWN0aXZlIHN5bnRheCBmbGF2b3JzIHByb3ZpZGVkIGluIEFuZ3VsYXJKUyAoc3VjaFxyXG4gKiBhcyAqKmRhdGEtbmctcmVwZWF0LXN0YXJ0KiosICoqeC1uZy1yZXBlYXQtc3RhcnQqKiBhbmQgKipuZzpyZXBlYXQtc3RhcnQqKikuXHJcbiAqXHJcbiAqIEBhbmltYXRpb25zXHJcbiAqICoqLmVudGVyKiogLSB3aGVuIGEgbmV3IGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGxpc3Qgb3Igd2hlbiBhbiBpdGVtIGlzIHJldmVhbGVkIGFmdGVyIGEgZmlsdGVyXHJcbiAqXHJcbiAqICoqLmxlYXZlKiogLSB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IG9yIHdoZW4gYW4gaXRlbSBpcyBmaWx0ZXJlZCBvdXRcclxuICpcclxuICogKioubW92ZSoqIC0gd2hlbiBhbiBhZGphY2VudCBpdGVtIGlzIGZpbHRlcmVkIG91dCBjYXVzaW5nIGEgcmVvcmRlciBvciB3aGVuIHRoZSBpdGVtIGNvbnRlbnRzIGFyZSByZW9yZGVyZWRcclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgMTAwMFxyXG4gKiBAcGFyYW0ge3JlcGVhdF9leHByZXNzaW9ufSBuZ1JlcGVhdCBUaGUgZXhwcmVzc2lvbiBpbmRpY2F0aW5nIGhvdyB0byBlbnVtZXJhdGUgYSBjb2xsZWN0aW9uLiBUaGVzZVxyXG4gKiAgIGZvcm1hdHMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQ6XHJcbiAqXHJcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbmAg4oCTIHdoZXJlIHZhcmlhYmxlIGlzIHRoZSB1c2VyIGRlZmluZWQgbG9vcCB2YXJpYWJsZSBhbmQgYGV4cHJlc3Npb25gXHJcbiAqICAgICBpcyBhIHNjb3BlIGV4cHJlc3Npb24gZ2l2aW5nIHRoZSBjb2xsZWN0aW9uIHRvIGVudW1lcmF0ZS5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgYWxidW0gaW4gYXJ0aXN0LmFsYnVtc2AuXHJcbiAqXHJcbiAqICAgKiBgKGtleSwgdmFsdWUpIGluIGV4cHJlc3Npb25gIOKAkyB3aGVyZSBga2V5YCBhbmQgYHZhbHVlYCBjYW4gYmUgYW55IHVzZXIgZGVmaW5lZCBpZGVudGlmaWVycyxcclxuICogICAgIGFuZCBgZXhwcmVzc2lvbmAgaXMgdGhlIHNjb3BlIGV4cHJlc3Npb24gZ2l2aW5nIHRoZSBjb2xsZWN0aW9uIHRvIGVudW1lcmF0ZS5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgKG5hbWUsIGFnZSkgaW4geydhZGFtJzoxMCwgJ2FtYWxpZSc6MTJ9YC5cclxuICpcclxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uIHRyYWNrIGJ5IHRyYWNraW5nX2V4cHJlc3Npb25gIOKAkyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCB0cmFja2luZyBleHByZXNzaW9uXHJcbiAqICAgICB3aGljaCBjYW4gYmUgdXNlZCB0byBhc3NvY2lhdGUgdGhlIG9iamVjdHMgaW4gdGhlIGNvbGxlY3Rpb24gd2l0aCB0aGUgRE9NIGVsZW1lbnRzLiBJZiBubyB0cmFja2luZyBleHByZXNzaW9uXHJcbiAqICAgICBpcyBzcGVjaWZpZWQsIG5nLXJlcGVhdCBhc3NvY2lhdGVzIGVsZW1lbnRzIGJ5IGlkZW50aXR5LiBJdCBpcyBhbiBlcnJvciB0byBoYXZlXHJcbiAqICAgICBtb3JlIHRoYW4gb25lIHRyYWNraW5nIGV4cHJlc3Npb24gdmFsdWUgcmVzb2x2ZSB0byB0aGUgc2FtZSBrZXkuIChUaGlzIHdvdWxkIG1lYW4gdGhhdCB0d28gZGlzdGluY3Qgb2JqZWN0cyBhcmVcclxuICogICAgIG1hcHBlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudCwgd2hpY2ggaXMgbm90IHBvc3NpYmxlLikgIElmIGZpbHRlcnMgYXJlIHVzZWQgaW4gdGhlIGV4cHJlc3Npb24sIHRoZXkgc2hvdWxkIGJlXHJcbiAqICAgICBhcHBsaWVkIGJlZm9yZSB0aGUgdHJhY2tpbmcgZXhwcmVzc2lvbi5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtc2AgaXMgZXF1aXZhbGVudCB0byBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSAkaWQoaXRlbSlgLiBUaGlzIGltcGxpZXMgdGhhdCB0aGUgRE9NIGVsZW1lbnRzXHJcbiAqICAgICB3aWxsIGJlIGFzc29jaWF0ZWQgYnkgaXRlbSBpZGVudGl0eSBpbiB0aGUgYXJyYXkuXHJcbiAqXHJcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgJGlkKGl0ZW0pYC4gQSBidWlsdCBpbiBgJGlkKClgIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGFzc2lnbiBhIHVuaXF1ZVxyXG4gKiAgICAgYCQkaGFzaEtleWAgcHJvcGVydHkgdG8gZWFjaCBpdGVtIGluIHRoZSBhcnJheS4gVGhpcyBwcm9wZXJ0eSBpcyB0aGVuIHVzZWQgYXMgYSBrZXkgdG8gYXNzb2NpYXRlZCBET00gZWxlbWVudHNcclxuICogICAgIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiB0aGUgYXJyYXkgYnkgaWRlbnRpdHkuIE1vdmluZyB0aGUgc2FtZSBvYmplY3QgaW4gYXJyYXkgd291bGQgbW92ZSB0aGUgRE9NXHJcbiAqICAgICBlbGVtZW50IGluIHRoZSBzYW1lIHdheSBpbiB0aGUgRE9NLlxyXG4gKlxyXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5IGl0ZW0uaWRgIGlzIGEgdHlwaWNhbCBwYXR0ZXJuIHdoZW4gdGhlIGl0ZW1zIGNvbWUgZnJvbSB0aGUgZGF0YWJhc2UuIEluIHRoaXNcclxuICogICAgIGNhc2UgdGhlIG9iamVjdCBpZGVudGl0eSBkb2VzIG5vdCBtYXR0ZXIuIFR3byBvYmplY3RzIGFyZSBjb25zaWRlcmVkIGVxdWl2YWxlbnQgYXMgbG9uZyBhcyB0aGVpciBgaWRgXHJcbiAqICAgICBwcm9wZXJ0eSBpcyBzYW1lLlxyXG4gKlxyXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHwgZmlsdGVyOnNlYXJjaFRleHQgdHJhY2sgYnkgaXRlbS5pZGAgaXMgYSBwYXR0ZXJuIHRoYXQgbWlnaHQgYmUgdXNlZCB0byBhcHBseSBhIGZpbHRlclxyXG4gKiAgICAgdG8gaXRlbXMgaW4gY29uanVuY3Rpb24gd2l0aCBhIHRyYWNraW5nIGV4cHJlc3Npb24uXHJcbiAqXHJcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbiBhcyBhbGlhc19leHByZXNzaW9uYCDigJMgWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gb3B0aW9uYWwgYWxpYXMgZXhwcmVzc2lvbiB3aGljaCB3aWxsIHRoZW4gc3RvcmUgdGhlXHJcbiAqICAgICBpbnRlcm1lZGlhdGUgcmVzdWx0cyBvZiB0aGUgcmVwZWF0ZXIgYWZ0ZXIgdGhlIGZpbHRlcnMgaGF2ZSBiZWVuIGFwcGxpZWQuIFR5cGljYWxseSB0aGlzIGlzIHVzZWQgdG8gcmVuZGVyIGEgc3BlY2lhbCBtZXNzYWdlXHJcbiAqICAgICB3aGVuIGEgZmlsdGVyIGlzIGFjdGl2ZSBvbiB0aGUgcmVwZWF0ZXIsIGJ1dCB0aGUgZmlsdGVyZWQgcmVzdWx0IHNldCBpcyBlbXB0eS5cclxuICpcclxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB8IGZpbHRlcjp4IGFzIHJlc3VsdHNgIHdpbGwgc3RvcmUgdGhlIGZyYWdtZW50IG9mIHRoZSByZXBlYXRlZCBpdGVtcyBhcyBgcmVzdWx0c2AsIGJ1dCBvbmx5IGFmdGVyXHJcbiAqICAgICB0aGUgaXRlbXMgaGF2ZSBiZWVuIHByb2Nlc3NlZCB0aHJvdWdoIHRoZSBmaWx0ZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIFRoaXMgZXhhbXBsZSBpbml0aWFsaXplcyB0aGUgc2NvcGUgdG8gYSBsaXN0IG9mIG5hbWVzIGFuZFxyXG4gKiB0aGVuIHVzZXMgYG5nUmVwZWF0YCB0byBkaXNwbGF5IGV2ZXJ5IHBlcnNvbjpcclxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cclxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgIDxkaXYgbmctaW5pdD1cImZyaWVuZHMgPSBbXHJcbiAgICAgICAge25hbWU6J0pvaG4nLCBhZ2U6MjUsIGdlbmRlcjonYm95J30sXHJcbiAgICAgICAge25hbWU6J0plc3NpZScsIGFnZTozMCwgZ2VuZGVyOidnaXJsJ30sXHJcbiAgICAgICAge25hbWU6J0pvaGFubmEnLCBhZ2U6MjgsIGdlbmRlcjonZ2lybCd9LFxyXG4gICAgICAgIHtuYW1lOidKb3knLCBhZ2U6MTUsIGdlbmRlcjonZ2lybCd9LFxyXG4gICAgICAgIHtuYW1lOidNYXJ5JywgYWdlOjI4LCBnZW5kZXI6J2dpcmwnfSxcclxuICAgICAgICB7bmFtZTonUGV0ZXInLCBhZ2U6OTUsIGdlbmRlcjonYm95J30sXHJcbiAgICAgICAge25hbWU6J1NlYmFzdGlhbicsIGFnZTo1MCwgZ2VuZGVyOidib3knfSxcclxuICAgICAgICB7bmFtZTonRXJpa2EnLCBhZ2U6MjcsIGdlbmRlcjonZ2lybCd9LFxyXG4gICAgICAgIHtuYW1lOidQYXRyaWNrJywgYWdlOjQwLCBnZW5kZXI6J2JveSd9LFxyXG4gICAgICAgIHtuYW1lOidTYW1hbnRoYScsIGFnZTo2MCwgZ2VuZGVyOidnaXJsJ31cclxuICAgICAgXVwiPlxyXG4gICAgICAgIEkgaGF2ZSB7e2ZyaWVuZHMubGVuZ3RofX0gZnJpZW5kcy4gVGhleSBhcmU6XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiBuZy1tb2RlbD1cInFcIiBwbGFjZWhvbGRlcj1cImZpbHRlciBmcmllbmRzLi4uXCIgLz5cclxuICAgICAgICA8dWwgY2xhc3M9XCJleGFtcGxlLWFuaW1hdGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgZmlsdGVyOnEgYXMgcmVzdWx0c1wiPlxyXG4gICAgICAgICAgICBbe3skaW5kZXggKyAxfX1dIHt7ZnJpZW5kLm5hbWV9fSB3aG8gaXMge3tmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctaWY9XCJyZXN1bHRzLmxlbmd0aCA9PSAwXCI+XHJcbiAgICAgICAgICAgIDxzdHJvbmc+Tm8gcmVzdWx0cyBmb3VuZC4uLjwvc3Ryb25nPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAuZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lciB7XHJcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcclxuICAgICAgICBtYXJnaW46MDtcclxuICAgICAgICBwYWRkaW5nOjAgMTBweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtcmVwZWF0IHtcclxuICAgICAgICBsaW5lLWhlaWdodDo0MHB4O1xyXG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcclxuICAgICAgICBib3gtc2l6aW5nOmJvcmRlci1ib3g7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLFxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIsXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSB7XHJcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSxcclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXHJcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlciB7XHJcbiAgICAgICAgb3BhY2l0eTowO1xyXG4gICAgICAgIG1heC1oZWlnaHQ6MDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLFxyXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZS5uZy1tb3ZlLWFjdGl2ZSxcclxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XHJcbiAgICAgICAgb3BhY2l0eToxO1xyXG4gICAgICAgIG1heC1oZWlnaHQ6NDBweDtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgZnJpZW5kcyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmQgaW4gZnJpZW5kcycpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgcmVuZGVyIGluaXRpYWwgZGF0YSBzZXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDEwKTtcclxuICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMV0gSm9obiB3aG8gaXMgMjUgeWVhcnMgb2xkLicpO1xyXG4gICAgICAgIGV4cGVjdChmcmllbmRzLmdldCgxKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1syXSBKZXNzaWUgd2hvIGlzIDMwIHllYXJzIG9sZC4nKTtcclxuICAgICAgICBleHBlY3QoZnJpZW5kcy5sYXN0KCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMTBdIFNhbWFudGhhIHdobyBpcyA2MCB5ZWFycyBvbGQuJyk7XHJcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZnJpZW5kcy5sZW5ndGgnKSkuZ2V0VGV4dCgpKVxyXG4gICAgICAgICAgICAudG9NYXRjaChcIkkgaGF2ZSAxMCBmcmllbmRzLiBUaGV5IGFyZTpcIik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlIHJlcGVhdGVyIHdoZW4gZmlsdGVyIHByZWRpY2F0ZSBjaGFuZ2VzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMTApO1xyXG5cclxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgncScpKS5zZW5kS2V5cygnbWEnKTtcclxuXHJcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMik7XHJcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmdldCgwKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1sxXSBNYXJ5IHdobyBpcyAyOCB5ZWFycyBvbGQuJyk7XHJcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmxhc3QoKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1syXSBTYW1hbnRoYSB3aG8gaXMgNjAgeWVhcnMgb2xkLicpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgIDwvZmlsZT5cclxuICAgIDwvZXhhbXBsZT5cclxuICovXHJcbnZhciBuZ1JlcGVhdERpcmVjdGl2ZSA9IFsnJHBhcnNlJywgJyRhbmltYXRlJywgZnVuY3Rpb24oJHBhcnNlLCAkYW5pbWF0ZSkge1xyXG4gIHZhciBOR19SRU1PVkVEID0gJyQkTkdfUkVNT1ZFRCc7XHJcbiAgdmFyIG5nUmVwZWF0TWluRXJyID0gbWluRXJyKCduZ1JlcGVhdCcpO1xyXG5cclxuICB2YXIgdXBkYXRlU2NvcGUgPSBmdW5jdGlvbihzY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgYXJyYXlMZW5ndGgpIHtcclxuICAgIC8vIFRPRE8ocGVyZik6IGdlbmVyYXRlIHNldHRlcnMgdG8gc2hhdmUgb2ZmIH40MG1zIG9yIDEtMS41JVxyXG4gICAgc2NvcGVbdmFsdWVJZGVudGlmaWVyXSA9IHZhbHVlO1xyXG4gICAgaWYgKGtleUlkZW50aWZpZXIpIHNjb3BlW2tleUlkZW50aWZpZXJdID0ga2V5O1xyXG4gICAgc2NvcGUuJGluZGV4ID0gaW5kZXg7XHJcbiAgICBzY29wZS4kZmlyc3QgPSAoaW5kZXggPT09IDApO1xyXG4gICAgc2NvcGUuJGxhc3QgPSAoaW5kZXggPT09IChhcnJheUxlbmd0aCAtIDEpKTtcclxuICAgIHNjb3BlLiRtaWRkbGUgPSAhKHNjb3BlLiRmaXJzdCB8fCBzY29wZS4kbGFzdCk7XHJcbiAgICAvLyBqc2hpbnQgYml0d2lzZTogZmFsc2VcclxuICAgIHNjb3BlLiRvZGQgPSAhKHNjb3BlLiRldmVuID0gKGluZGV4JjEpID09PSAwKTtcclxuICAgIC8vIGpzaGludCBiaXR3aXNlOiB0cnVlXHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldEJsb2NrU3RhcnQgPSBmdW5jdGlvbihibG9jaykge1xyXG4gICAgcmV0dXJuIGJsb2NrLmNsb25lWzBdO1xyXG4gIH07XHJcblxyXG4gIHZhciBnZXRCbG9ja0VuZCA9IGZ1bmN0aW9uKGJsb2NrKSB7XHJcbiAgICByZXR1cm4gYmxvY2suY2xvbmVbYmxvY2suY2xvbmUubGVuZ3RoIC0gMV07XHJcbiAgfTtcclxuXHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxyXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gICAgcHJpb3JpdHk6IDEwMDAsXHJcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcclxuICAgICQkdGxiOiB0cnVlLFxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdSZXBlYXRDb21waWxlKCRlbGVtZW50LCAkYXR0cikge1xyXG4gICAgICB2YXIgZXhwcmVzc2lvbiA9ICRhdHRyLm5nUmVwZWF0O1xyXG4gICAgICB2YXIgbmdSZXBlYXRFbmRDb21tZW50ID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnIGVuZCBuZ1JlcGVhdDogJyArIGV4cHJlc3Npb24gKyAnICcpO1xyXG5cclxuICAgICAgdmFyIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKTtcclxuXHJcbiAgICAgIGlmICghbWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWV4cCcsIFwiRXhwZWN0ZWQgZXhwcmVzc2lvbiBpbiBmb3JtIG9mICdfaXRlbV8gaW4gX2NvbGxlY3Rpb25fWyB0cmFjayBieSBfaWRfXScgYnV0IGdvdCAnezB9Jy5cIixcclxuICAgICAgICAgICAgZXhwcmVzc2lvbik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBsaHMgPSBtYXRjaFsxXTtcclxuICAgICAgdmFyIHJocyA9IG1hdGNoWzJdO1xyXG4gICAgICB2YXIgYWxpYXNBcyA9IG1hdGNoWzNdO1xyXG4gICAgICB2YXIgdHJhY2tCeUV4cCA9IG1hdGNoWzRdO1xyXG5cclxuICAgICAgbWF0Y2ggPSBsaHMubWF0Y2goL14oPzooXFxzKltcXCRcXHddKyl8XFwoXFxzKihbXFwkXFx3XSspXFxzKixcXHMqKFtcXCRcXHddKylcXHMqXFwpKSQvKTtcclxuXHJcbiAgICAgIGlmICghbWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWlkZXhwJywgXCInX2l0ZW1fJyBpbiAnX2l0ZW1fIGluIF9jb2xsZWN0aW9uXycgc2hvdWxkIGJlIGFuIGlkZW50aWZpZXIgb3IgJyhfa2V5XywgX3ZhbHVlXyknIGV4cHJlc3Npb24sIGJ1dCBnb3QgJ3swfScuXCIsXHJcbiAgICAgICAgICAgIGxocyk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHZhbHVlSWRlbnRpZmllciA9IG1hdGNoWzNdIHx8IG1hdGNoWzFdO1xyXG4gICAgICB2YXIga2V5SWRlbnRpZmllciA9IG1hdGNoWzJdO1xyXG5cclxuICAgICAgaWYgKGFsaWFzQXMgJiYgKCEvXlskYS16QS1aX11bJGEtekEtWjAtOV9dKiQvLnRlc3QoYWxpYXNBcykgfHxcclxuICAgICAgICAgIC9eKG51bGx8dW5kZWZpbmVkfHRoaXN8XFwkaW5kZXh8XFwkZmlyc3R8XFwkbWlkZGxlfFxcJGxhc3R8XFwkZXZlbnxcXCRvZGR8XFwkcGFyZW50fFxcJHJvb3R8XFwkaWQpJC8udGVzdChhbGlhc0FzKSkpIHtcclxuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignYmFkaWRlbnQnLCBcImFsaWFzICd7MH0nIGlzIGludmFsaWQgLS0tIG11c3QgYmUgYSB2YWxpZCBKUyBpZGVudGlmaWVyIHdoaWNoIGlzIG5vdCBhIHJlc2VydmVkIG5hbWUuXCIsXHJcbiAgICAgICAgICBhbGlhc0FzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIHRyYWNrQnlFeHBHZXR0ZXIsIHRyYWNrQnlJZEV4cEZuLCB0cmFja0J5SWRBcnJheUZuLCB0cmFja0J5SWRPYmpGbjtcclxuICAgICAgdmFyIGhhc2hGbkxvY2FscyA9IHskaWQ6IGhhc2hLZXl9O1xyXG5cclxuICAgICAgaWYgKHRyYWNrQnlFeHApIHtcclxuICAgICAgICB0cmFja0J5RXhwR2V0dGVyID0gJHBhcnNlKHRyYWNrQnlFeHApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRyYWNrQnlJZEFycmF5Rm4gPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICByZXR1cm4gaGFzaEtleSh2YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0cmFja0J5SWRPYmpGbiA9IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdSZXBlYXRMaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xyXG5cclxuICAgICAgICBpZiAodHJhY2tCeUV4cEdldHRlcikge1xyXG4gICAgICAgICAgdHJhY2tCeUlkRXhwRm4gPSBmdW5jdGlvbihrZXksIHZhbHVlLCBpbmRleCkge1xyXG4gICAgICAgICAgICAvLyBhc3NpZ24ga2V5LCB2YWx1ZSwgYW5kICRpbmRleCB0byB0aGUgbG9jYWxzIHNvIHRoYXQgdGhleSBjYW4gYmUgdXNlZCBpbiBoYXNoIGZ1bmN0aW9uc1xyXG4gICAgICAgICAgICBpZiAoa2V5SWRlbnRpZmllcikgaGFzaEZuTG9jYWxzW2tleUlkZW50aWZpZXJdID0ga2V5O1xyXG4gICAgICAgICAgICBoYXNoRm5Mb2NhbHNbdmFsdWVJZGVudGlmaWVyXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBoYXNoRm5Mb2NhbHMuJGluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIHJldHVybiB0cmFja0J5RXhwR2V0dGVyKCRzY29wZSwgaGFzaEZuTG9jYWxzKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdG9yZSBhIGxpc3Qgb2YgZWxlbWVudHMgZnJvbSBwcmV2aW91cyBydW4uIFRoaXMgaXMgYSBoYXNoIHdoZXJlIGtleSBpcyB0aGUgaXRlbSBmcm9tIHRoZVxyXG4gICAgICAgIC8vIGl0ZXJhdG9yLCBhbmQgdGhlIHZhbHVlIGlzIG9iamVjdHMgd2l0aCBmb2xsb3dpbmcgcHJvcGVydGllcy5cclxuICAgICAgICAvLyAgIC0gc2NvcGU6IGJvdW5kIHNjb3BlXHJcbiAgICAgICAgLy8gICAtIGVsZW1lbnQ6IHByZXZpb3VzIGVsZW1lbnQuXHJcbiAgICAgICAgLy8gICAtIGluZGV4OiBwb3NpdGlvblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gV2UgYXJlIHVzaW5nIG5vLXByb3RvIG9iamVjdCBzbyB0aGF0IHdlIGRvbid0IG5lZWQgdG8gZ3VhcmQgYWdhaW5zdCBpbmhlcml0ZWQgcHJvcHMgdmlhXHJcbiAgICAgICAgLy8gaGFzT3duUHJvcGVydHkuXHJcbiAgICAgICAgdmFyIGxhc3RCbG9ja01hcCA9IGNyZWF0ZU1hcCgpO1xyXG5cclxuICAgICAgICAvL3dhdGNoIHByb3BzXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24ocmhzLCBmdW5jdGlvbiBuZ1JlcGVhdEFjdGlvbihjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICB2YXIgaW5kZXgsIGxlbmd0aCxcclxuICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSAkZWxlbWVudFswXSwgICAgIC8vIG5vZGUgdGhhdCBjbG9uZWQgbm9kZXMgc2hvdWxkIGJlIGluc2VydGVkIGFmdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplZCB0byB0aGUgY29tbWVudCBub2RlIGFuY2hvclxyXG4gICAgICAgICAgICAgIG5leHROb2RlLFxyXG4gICAgICAgICAgICAgIC8vIFNhbWUgYXMgbGFzdEJsb2NrTWFwIGJ1dCBpdCBoYXMgdGhlIGN1cnJlbnQgc3RhdGUuIEl0IHdpbGwgYmVjb21lIHRoZVxyXG4gICAgICAgICAgICAgIC8vIGxhc3RCbG9ja01hcCBvbiB0aGUgbmV4dCBpdGVyYXRpb24uXHJcbiAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwID0gY3JlYXRlTWFwKCksXHJcbiAgICAgICAgICAgICAgY29sbGVjdGlvbkxlbmd0aCxcclxuICAgICAgICAgICAgICBrZXksIHZhbHVlLCAvLyBrZXkvdmFsdWUgb2YgaXRlcmF0aW9uXHJcbiAgICAgICAgICAgICAgdHJhY2tCeUlkLFxyXG4gICAgICAgICAgICAgIHRyYWNrQnlJZEZuLFxyXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzLFxyXG4gICAgICAgICAgICAgIGJsb2NrLCAgICAgICAvLyBsYXN0IG9iamVjdCBpbmZvcm1hdGlvbiB7c2NvcGUsIGVsZW1lbnQsIGlkfVxyXG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyLFxyXG4gICAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmU7XHJcblxyXG4gICAgICAgICAgaWYgKGFsaWFzQXMpIHtcclxuICAgICAgICAgICAgJHNjb3BlW2FsaWFzQXNdID0gY29sbGVjdGlvbjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoaXNBcnJheUxpa2UoY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgY29sbGVjdGlvbktleXMgPSBjb2xsZWN0aW9uO1xyXG4gICAgICAgICAgICB0cmFja0J5SWRGbiA9IHRyYWNrQnlJZEV4cEZuIHx8IHRyYWNrQnlJZEFycmF5Rm47XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0cmFja0J5SWRGbiA9IHRyYWNrQnlJZEV4cEZuIHx8IHRyYWNrQnlJZE9iakZuO1xyXG4gICAgICAgICAgICAvLyBpZiBvYmplY3QsIGV4dHJhY3Qga2V5cywgc29ydCB0aGVtIGFuZCB1c2UgdG8gZGV0ZXJtaW5lIG9yZGVyIG9mIGl0ZXJhdGlvbiBvdmVyIG9iaiBwcm9wc1xyXG4gICAgICAgICAgICBjb2xsZWN0aW9uS2V5cyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtS2V5IGluIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICBpZiAoY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShpdGVtS2V5KSAmJiBpdGVtS2V5LmNoYXJBdCgwKSAhPSAnJCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzLnB1c2goaXRlbUtleSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzLnNvcnQoKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb2xsZWN0aW9uTGVuZ3RoID0gY29sbGVjdGlvbktleXMubGVuZ3RoO1xyXG4gICAgICAgICAgbmV4dEJsb2NrT3JkZXIgPSBuZXcgQXJyYXkoY29sbGVjdGlvbkxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgLy8gbG9jYXRlIGV4aXN0aW5nIGl0ZW1zXHJcbiAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBjb2xsZWN0aW9uTGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGtleSA9IChjb2xsZWN0aW9uID09PSBjb2xsZWN0aW9uS2V5cykgPyBpbmRleCA6IGNvbGxlY3Rpb25LZXlzW2luZGV4XTtcclxuICAgICAgICAgICAgdmFsdWUgPSBjb2xsZWN0aW9uW2tleV07XHJcbiAgICAgICAgICAgIHRyYWNrQnlJZCA9IHRyYWNrQnlJZEZuKGtleSwgdmFsdWUsIGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKGxhc3RCbG9ja01hcFt0cmFja0J5SWRdKSB7XHJcbiAgICAgICAgICAgICAgLy8gZm91bmQgcHJldmlvdXNseSBzZWVuIGJsb2NrXHJcbiAgICAgICAgICAgICAgYmxvY2sgPSBsYXN0QmxvY2tNYXBbdHJhY2tCeUlkXTtcclxuICAgICAgICAgICAgICBkZWxldGUgbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07XHJcbiAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwW3RyYWNrQnlJZF0gPSBibG9jaztcclxuICAgICAgICAgICAgICBuZXh0QmxvY2tPcmRlcltpbmRleF0gPSBibG9jaztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSkge1xyXG4gICAgICAgICAgICAgIC8vIGlmIGNvbGxpc2lvbiBkZXRlY3RlZC4gcmVzdG9yZSBsYXN0QmxvY2tNYXAgYW5kIHRocm93IGFuIGVycm9yXHJcbiAgICAgICAgICAgICAgZm9yRWFjaChuZXh0QmxvY2tPcmRlciwgZnVuY3Rpb24oYmxvY2spIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9jayAmJiBibG9jay5zY29wZSkgbGFzdEJsb2NrTWFwW2Jsb2NrLmlkXSA9IGJsb2NrO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdkdXBlcycsXHJcbiAgICAgICAgICAgICAgICAgIFwiRHVwbGljYXRlcyBpbiBhIHJlcGVhdGVyIGFyZSBub3QgYWxsb3dlZC4gVXNlICd0cmFjayBieScgZXhwcmVzc2lvbiB0byBzcGVjaWZ5IHVuaXF1ZSBrZXlzLiBSZXBlYXRlcjogezB9LCBEdXBsaWNhdGUga2V5OiB7MX0sIER1cGxpY2F0ZSB2YWx1ZTogezJ9XCIsXHJcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIHRyYWNrQnlJZCwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIG5ldyBuZXZlciBiZWZvcmUgc2VlbiBibG9ja1xyXG4gICAgICAgICAgICAgIG5leHRCbG9ja09yZGVyW2luZGV4XSA9IHtpZDogdHJhY2tCeUlkLCBzY29wZTogdW5kZWZpbmVkLCBjbG9uZTogdW5kZWZpbmVkfTtcclxuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyByZW1vdmUgbGVmdG92ZXIgaXRlbXNcclxuICAgICAgICAgIGZvciAodmFyIGJsb2NrS2V5IGluIGxhc3RCbG9ja01hcCkge1xyXG4gICAgICAgICAgICBibG9jayA9IGxhc3RCbG9ja01hcFtibG9ja0tleV07XHJcbiAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmUgPSBnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKTtcclxuICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudHNUb1JlbW92ZSk7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1RvUmVtb3ZlWzBdLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAvLyBpZiB0aGUgZWxlbWVudCB3YXMgbm90IHJlbW92ZWQgeWV0IGJlY2F1c2Ugb2YgcGVuZGluZyBhbmltYXRpb24sIG1hcmsgaXQgYXMgZGVsZXRlZFxyXG4gICAgICAgICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIGlnbm9yZSBpdCBsYXRlclxyXG4gICAgICAgICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmVbaW5kZXhdW05HX1JFTU9WRURdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmxvY2suc2NvcGUuJGRlc3Ryb3koKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyB3ZSBhcmUgbm90IHVzaW5nIGZvckVhY2ggZm9yIHBlcmYgcmVhc29ucyAodHJ5aW5nIHRvIGF2b2lkICNjYWxsKVxyXG4gICAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgY29sbGVjdGlvbkxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBrZXkgPSAoY29sbGVjdGlvbiA9PT0gY29sbGVjdGlvbktleXMpID8gaW5kZXggOiBjb2xsZWN0aW9uS2V5c1tpbmRleF07XHJcbiAgICAgICAgICAgIHZhbHVlID0gY29sbGVjdGlvbltrZXldO1xyXG4gICAgICAgICAgICBibG9jayA9IG5leHRCbG9ja09yZGVyW2luZGV4XTtcclxuXHJcbiAgICAgICAgICAgIGlmIChibG9jay5zY29wZSkge1xyXG4gICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYWxyZWFkeSBzZWVuIHRoaXMgb2JqZWN0LCB0aGVuIHdlIG5lZWQgdG8gcmV1c2UgdGhlXHJcbiAgICAgICAgICAgICAgLy8gYXNzb2NpYXRlZCBzY29wZS9lbGVtZW50XHJcblxyXG4gICAgICAgICAgICAgIG5leHROb2RlID0gcHJldmlvdXNOb2RlO1xyXG5cclxuICAgICAgICAgICAgICAvLyBza2lwIG5vZGVzIHRoYXQgYXJlIGFscmVhZHkgcGVuZGluZyByZW1vdmFsIHZpYSBsZWF2ZSBhbmltYXRpb25cclxuICAgICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHROb2RlLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgIH0gd2hpbGUgKG5leHROb2RlICYmIG5leHROb2RlW05HX1JFTU9WRURdKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGdldEJsb2NrU3RhcnQoYmxvY2spICE9IG5leHROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBpdGVtIHdoaWNoIGdvdCBtb3ZlZFxyXG4gICAgICAgICAgICAgICAgJGFuaW1hdGUubW92ZShnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKSwgbnVsbCwganFMaXRlKHByZXZpb3VzTm9kZSkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBnZXRCbG9ja0VuZChibG9jayk7XHJcbiAgICAgICAgICAgICAgdXBkYXRlU2NvcGUoYmxvY2suc2NvcGUsIGluZGV4LCB2YWx1ZUlkZW50aWZpZXIsIHZhbHVlLCBrZXlJZGVudGlmaWVyLCBrZXksIGNvbGxlY3Rpb25MZW5ndGgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIG5ldyBpdGVtIHdoaWNoIHdlIGRvbid0IGtub3cgYWJvdXRcclxuICAgICAgICAgICAgICAkdHJhbnNjbHVkZShmdW5jdGlvbiBuZ1JlcGVhdFRyYW5zY2x1ZGUoY2xvbmUsIHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBibG9jay5zY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvbmUtdnMtY3JlYXRlY29tbWVudFxyXG4gICAgICAgICAgICAgICAgdmFyIGVuZE5vZGUgPSBuZ1JlcGVhdEVuZENvbW1lbnQuY2xvbmVOb2RlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGNsb25lW2Nsb25lLmxlbmd0aCsrXSA9IGVuZE5vZGU7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhwZXJmKTogc3VwcG9ydCBuYWtlZCBwcmV2aW91c05vZGUgaW4gYGVudGVyYCB0byBhdm9pZCBjcmVhdGlvbiBvZiBqcUxpdGUgd3JhcHBlcj9cclxuICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNsb25lLCBudWxsLCBqcUxpdGUocHJldmlvdXNOb2RlKSk7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBlbmROb2RlO1xyXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2Ugb25seSBuZWVkIHRoZSBmaXJzdC9sYXN0IG5vZGUgb2YgdGhlIGNsb25lZCBub2Rlcy5cclxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHdlIG5lZWQgdG8ga2VlcCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBqcWxpdGUgd3JhcHBlciBhcyBpdCBtaWdodCBiZSBjaGFuZ2VkIGxhdGVyXHJcbiAgICAgICAgICAgICAgICAvLyBieSBhIGRpcmVjdGl2ZSB3aXRoIHRlbXBsYXRlVXJsIHdoZW4gaXRzIHRlbXBsYXRlIGFycml2ZXMuXHJcbiAgICAgICAgICAgICAgICBibG9jay5jbG9uZSA9IGNsb25lO1xyXG4gICAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwW2Jsb2NrLmlkXSA9IGJsb2NrO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlU2NvcGUoYmxvY2suc2NvcGUsIGluZGV4LCB2YWx1ZUlkZW50aWZpZXIsIHZhbHVlLCBrZXlJZGVudGlmaWVyLCBrZXksIGNvbGxlY3Rpb25MZW5ndGgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsYXN0QmxvY2tNYXAgPSBuZXh0QmxvY2tNYXA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG52YXIgTkdfSElERV9DTEFTUyA9ICduZy1oaWRlJztcclxudmFyIE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1MgPSAnbmctaGlkZS1hbmltYXRlJztcclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdTaG93XHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nU2hvd2AgZGlyZWN0aXZlIHNob3dzIG9yIGhpZGVzIHRoZSBnaXZlbiBIVE1MIGVsZW1lbnQgYmFzZWQgb24gdGhlIGV4cHJlc3Npb25cclxuICogcHJvdmlkZWQgdG8gdGhlIGBuZ1Nob3dgIGF0dHJpYnV0ZS4gVGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIGJ5IHJlbW92aW5nIG9yIGFkZGluZ1xyXG4gKiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3Mgb250byB0aGUgZWxlbWVudC4gVGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIHByZWRlZmluZWRcclxuICogaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuICFpbXBvcnRhbnQgZmxhZykuXHJcbiAqIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgaHRtbCBmaWxlIChzZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxyXG4gKlxyXG4gKiBgYGBodG1sXHJcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyB0cnV0aHkgKGVsZW1lbnQgaXMgdmlzaWJsZSkgLS0+XHJcbiAqIDxkaXYgbmctc2hvdz1cIm15VmFsdWVcIj48L2Rpdj5cclxuICpcclxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIGZhbHN5IChlbGVtZW50IGlzIGhpZGRlbikgLS0+XHJcbiAqIDxkaXYgbmctc2hvdz1cIm15VmFsdWVcIiBjbGFzcz1cIm5nLWhpZGVcIj48L2Rpdj5cclxuICogYGBgXHJcbiAqXHJcbiAqIFdoZW4gdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgZmFsc3kgdmFsdWUgdGhlbiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGNsYXNzXHJcbiAqIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gdHJ1dGh5LCB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcmVtb3ZlZFxyXG4gKiBmcm9tIHRoZSBlbGVtZW50IGNhdXNpbmcgdGhlIGVsZW1lbnQgbm90IHRvIGFwcGVhciBoaWRkZW4uXHJcbiAqXHJcbiAqICMjIFdoeSBpcyAhaW1wb3J0YW50IHVzZWQ/XHJcbiAqXHJcbiAqIFlvdSBtYXkgYmUgd29uZGVyaW5nIHdoeSAhaW1wb3J0YW50IGlzIHVzZWQgZm9yIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gVGhpcyBpcyBiZWNhdXNlIHRoZSBgLm5nLWhpZGVgIHNlbGVjdG9yXHJcbiAqIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhcyBzaW1wbGVcclxuICogYXMgY2hhbmdpbmcgdGhlIGRpc3BsYXkgc3R5bGUgb24gYSBIVE1MIGxpc3QgaXRlbSB3b3VsZCBtYWtlIGhpZGRlbiBlbGVtZW50cyBhcHBlYXIgdmlzaWJsZS5cclxuICogVGhpcyBhbHNvIGJlY29tZXMgYSBiaWdnZXIgaXNzdWUgd2hlbiBkZWFsaW5nIHdpdGggQ1NTIGZyYW1ld29ya3MuXHJcbiAqXHJcbiAqIEJ5IHVzaW5nICFpbXBvcnRhbnQsIHRoZSBzaG93IGFuZCBoaWRlIGJlaGF2aW9yIHdpbGwgd29yayBhcyBleHBlY3RlZCBkZXNwaXRlIGFueSBjbGFzaCBiZXR3ZWVuIENTUyBzZWxlY3RvclxyXG4gKiBzcGVjaWZpY2l0eSAod2hlbiAhaW1wb3J0YW50IGlzbid0IHVzZWQgd2l0aCBhbnkgY29uZmxpY3Rpbmcgc3R5bGVzKS4gSWYgYSBkZXZlbG9wZXIgY2hvb3NlcyB0byBvdmVycmlkZSB0aGVcclxuICogc3R5bGluZyB0byBjaGFuZ2UgaG93IHRvIGhpZGUgYW4gZWxlbWVudCB0aGVuIGl0IGlzIGp1c3QgYSBtYXR0ZXIgb2YgdXNpbmcgIWltcG9ydGFudCBpbiB0aGVpciBvd24gQ1NTIGNvZGUuXHJcbiAqXHJcbiAqICMjIyBPdmVycmlkaW5nIGAubmctaGlkZWBcclxuICpcclxuICogQnkgZGVmYXVsdCwgdGhlIGAubmctaGlkZWAgY2xhc3Mgd2lsbCBzdHlsZSB0aGUgZWxlbWVudCB3aXRoIGBkaXNwbGF5OiBub25lIWltcG9ydGFudGAuIElmIHlvdSB3aXNoIHRvIGNoYW5nZVxyXG4gKiB0aGUgaGlkZSBiZWhhdmlvciB3aXRoIG5nU2hvdy9uZ0hpZGUgdGhlbiB0aGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXN0YXRpbmcgdGhlIHN0eWxlcyBmb3IgdGhlIGAubmctaGlkZWBcclxuICogY2xhc3MgQ1NTLiBOb3RlIHRoYXQgdGhlIHNlbGVjdG9yIHRoYXQgbmVlZHMgdG8gYmUgdXNlZCBpcyBhY3R1YWxseSBgLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpYCB0byBjb3BlXHJcbiAqIHdpdGggZXh0cmEgYW5pbWF0aW9uIGNsYXNzZXMgdGhhdCBjYW4gYmUgYWRkZWQuXHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSkge1xyXG4gKiAgIC8mIzQyOyB0aGlzIGlzIGp1c3QgYW5vdGhlciBmb3JtIG9mIGhpZGluZyBhbiBlbGVtZW50ICYjNDI7L1xyXG4gKiAgIGRpc3BsYXk6IGJsb2NrIWltcG9ydGFudDtcclxuICogICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAqICAgdG9wOiAtOTk5OXB4O1xyXG4gKiAgIGxlZnQ6IC05OTk5cHg7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEJ5IGRlZmF1bHQgeW91IGRvbid0IG5lZWQgdG8gb3ZlcnJpZGUgaW4gQ1NTIGFueXRoaW5nIGFuZCB0aGUgYW5pbWF0aW9ucyB3aWxsIHdvcmsgYXJvdW5kIHRoZSBkaXNwbGF5IHN0eWxlLlxyXG4gKlxyXG4gKiAjIyBBIG5vdGUgYWJvdXQgYW5pbWF0aW9ucyB3aXRoIGBuZ1Nob3dgXHJcbiAqXHJcbiAqIEFuaW1hdGlvbnMgaW4gbmdTaG93L25nSGlkZSB3b3JrIHdpdGggdGhlIHNob3cgYW5kIGhpZGUgZXZlbnRzIHRoYXQgYXJlIHRyaWdnZXJlZCB3aGVuIHRoZSBkaXJlY3RpdmUgZXhwcmVzc2lvblxyXG4gKiBpcyB0cnVlIGFuZCBmYWxzZS4gVGhpcyBzeXN0ZW0gd29ya3MgbGlrZSB0aGUgYW5pbWF0aW9uIHN5c3RlbSBwcmVzZW50IHdpdGggbmdDbGFzcyBleGNlcHQgdGhhdFxyXG4gKiB5b3UgbXVzdCBhbHNvIGluY2x1ZGUgdGhlICFpbXBvcnRhbnQgZmxhZyB0byBvdmVycmlkZSB0aGUgZGlzcGxheSBwcm9wZXJ0eVxyXG4gKiBzbyB0aGF0IHlvdSBjYW4gcGVyZm9ybSBhbiBhbmltYXRpb24gd2hlbiB0aGUgZWxlbWVudCBpcyBoaWRkZW4gZHVyaW5nIHRoZSB0aW1lIG9mIHRoZSBhbmltYXRpb24uXHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAvL1xyXG4gKiAvL2Egd29ya2luZyBleGFtcGxlIGNhbiBiZSBmb3VuZCBhdCB0aGUgYm90dG9tIG9mIHRoaXMgcGFnZVxyXG4gKiAvL1xyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCwgLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUge1xyXG4gKiAgIC8mIzQyOyB0aGlzIGlzIHJlcXVpcmVkIGFzIG9mIDEuM3ggdG8gcHJvcGVybHlcclxuICogICAgICBhcHBseSBhbGwgc3R5bGluZyBpbiBhIHNob3cvaGlkZSBhbmltYXRpb24gJiM0MjsvXHJcbiAqICAgdHJhbnNpdGlvbjogMHMgbGluZWFyIGFsbDtcclxuICogfVxyXG4gKlxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZC1hY3RpdmUsXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7XHJcbiAqICAgLyYjNDI7IHRoZSB0cmFuc2l0aW9uIGlzIGRlZmluZWQgaW4gdGhlIGFjdGl2ZSBjbGFzcyAmIzQyOy9cclxuICogICB0cmFuc2l0aW9uOiAxcyBsaW5lYXIgYWxsO1xyXG4gKiB9XHJcbiAqXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUgeyAuLi4gfVxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUgeyAuLi4gfVxyXG4gKiBgYGBcclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGFzIG9mIEFuZ3VsYXJKUyB2ZXJzaW9uIDEuMy4wLWJldGEuMTEsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBkaXNwbGF5XHJcbiAqIHByb3BlcnR5IHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzLS1uZ0FuaW1hdGUgd2lsbCBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGF1dG9tYXRpY2FsbHkgZm9yIHlvdS5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogYWRkQ2xhc3M6IGAubmctaGlkZWAgLSBoYXBwZW5zIGFmdGVyIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQgdGhlIGp1c3QgYmVmb3JlIGNvbnRlbnRzIGFyZSBzZXQgdG8gdmlzaWJsZVxyXG4gKiByZW1vdmVDbGFzczogYC5uZy1oaWRlYCAtIGhhcHBlbnMgYWZ0ZXIgdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgbm9uIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU2hvdyBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5XHJcbiAqICAgICB0aGVuIHRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiByZXNwZWN0aXZlbHkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICBDbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjxici8+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgU2hvdzpcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLXNob3dcIiBuZy1zaG93PVwiY2hlY2tlZFwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRodW1icy11cFwiPjwvc3Bhbj4gSSBzaG93IHVwIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdj5cclxuICAgICAgICBIaWRlOlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGFuaW1hdGUtc2hvd1wiIG5nLWhpZGU9XCJjaGVja2VkXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGh1bWJzLWRvd25cIj48L3NwYW4+IEkgaGlkZSB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiZ2x5cGhpY29ucy5jc3NcIj5cclxuICAgICAgQGltcG9ydCB1cmwoLi4vLi4vY29tcG9uZW50cy9ib290c3RyYXAtMy4xLjEvY3NzL2Jvb3RzdHJhcC5jc3MpO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XHJcbiAgICAgIC5hbmltYXRlLXNob3cge1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtc2hvdy5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUsXHJcbiAgICAgIC5hbmltYXRlLXNob3cubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHtcclxuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IGFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgbGluZWFyIDAuNXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXNob3cubmctaGlkZSB7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6IDA7XHJcbiAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICBwYWRkaW5nOiAwIDEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5jaGVjay1lbGVtZW50IHtcclxuICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciB0aHVtYnNVcCA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmdseXBoaWNvbi10aHVtYnMtdXAnKSk7XHJcbiAgICAgIHZhciB0aHVtYnNEb3duID0gZWxlbWVudChieS5jc3MoJ3NwYW4uZ2x5cGhpY29uLXRodW1icy1kb3duJykpO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zaG93IC8gbmctaGlkZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdCh0aHVtYnNVcC5pc0Rpc3BsYXllZCgpKS50b0JlRmFsc3koKTtcclxuICAgICAgICBleHBlY3QodGh1bWJzRG93bi5pc0Rpc3BsYXllZCgpKS50b0JlVHJ1dGh5KCk7XHJcblxyXG4gICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHRodW1ic1VwLmlzRGlzcGxheWVkKCkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICBleHBlY3QodGh1bWJzRG93bi5pc0Rpc3BsYXllZCgpKS50b0JlRmFsc3koKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nU2hvd0RpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdTaG93LCBmdW5jdGlvbiBuZ1Nob3dXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIC8vIHdlJ3JlIGFkZGluZyBhIHRlbXBvcmFyeSwgYW5pbWF0aW9uLXNwZWNpZmljIGNsYXNzIGZvciBuZy1oaWRlIHNpbmNlIHRoaXMgd2F5XHJcbiAgICAgICAgLy8gd2UgY2FuIGNvbnRyb2wgd2hlbiB0aGUgZWxlbWVudCBpcyBhY3R1YWxseSBkaXNwbGF5ZWQgb24gc2NyZWVuIHdpdGhvdXQgaGF2aW5nXHJcbiAgICAgICAgLy8gdG8gaGF2ZSBhIGdsb2JhbC9ncmVlZHkgQ1NTIHNlbGVjdG9yIHRoYXQgYnJlYWtzIHdoZW4gb3RoZXIgYW5pbWF0aW9ucyBhcmUgcnVuLlxyXG4gICAgICAgIC8vIFJlYWQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzkxMDMjaXNzdWVjb21tZW50LTU4MzM1ODQ1XHJcbiAgICAgICAgJGFuaW1hdGVbdmFsdWUgPyAncmVtb3ZlQ2xhc3MnIDogJ2FkZENsYXNzJ10oZWxlbWVudCwgTkdfSElERV9DTEFTUywge1xyXG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdIaWRlXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBUaGUgYG5nSGlkZWAgZGlyZWN0aXZlIHNob3dzIG9yIGhpZGVzIHRoZSBnaXZlbiBIVE1MIGVsZW1lbnQgYmFzZWQgb24gdGhlIGV4cHJlc3Npb25cclxuICogcHJvdmlkZWQgdG8gdGhlIGBuZ0hpZGVgIGF0dHJpYnV0ZS4gVGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIGJ5IHJlbW92aW5nIG9yIGFkZGluZ1xyXG4gKiB0aGUgYG5nLWhpZGVgIENTUyBjbGFzcyBvbnRvIHRoZSBlbGVtZW50LiBUaGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcHJlZGVmaW5lZFxyXG4gKiBpbiBBbmd1bGFySlMgYW5kIHNldHMgdGhlIGRpc3BsYXkgc3R5bGUgdG8gbm9uZSAodXNpbmcgYW4gIWltcG9ydGFudCBmbGFnKS5cclxuICogRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBodG1sIGZpbGUgKHNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ3NwIG5nQ3NwfSkuXHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIHRydXRoeSAoZWxlbWVudCBpcyBoaWRkZW4pIC0tPlxyXG4gKiA8ZGl2IG5nLWhpZGU9XCJteVZhbHVlXCIgY2xhc3M9XCJuZy1oaWRlXCI+PC9kaXY+XHJcbiAqXHJcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyBmYWxzeSAoZWxlbWVudCBpcyB2aXNpYmxlKSAtLT5cclxuICogPGRpdiBuZy1oaWRlPVwibXlWYWx1ZVwiPjwvZGl2PlxyXG4gKiBgYGBcclxuICpcclxuICogV2hlbiB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUgdGhlbiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIGNsYXNzXHJcbiAqIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gZmFsc3ksIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyByZW1vdmVkXHJcbiAqIGZyb20gdGhlIGVsZW1lbnQgY2F1c2luZyB0aGUgZWxlbWVudCBub3QgdG8gYXBwZWFyIGhpZGRlbi5cclxuICpcclxuICogIyMgV2h5IGlzICFpbXBvcnRhbnQgdXNlZD9cclxuICpcclxuICogWW91IG1heSBiZSB3b25kZXJpbmcgd2h5ICFpbXBvcnRhbnQgaXMgdXNlZCBmb3IgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGAubmctaGlkZWAgc2VsZWN0b3JcclxuICogY2FuIGJlIGVhc2lseSBvdmVycmlkZGVuIGJ5IGhlYXZpZXIgc2VsZWN0b3JzLiBGb3IgZXhhbXBsZSwgc29tZXRoaW5nIGFzIHNpbXBsZVxyXG4gKiBhcyBjaGFuZ2luZyB0aGUgZGlzcGxheSBzdHlsZSBvbiBhIEhUTUwgbGlzdCBpdGVtIHdvdWxkIG1ha2UgaGlkZGVuIGVsZW1lbnRzIGFwcGVhciB2aXNpYmxlLlxyXG4gKiBUaGlzIGFsc28gYmVjb21lcyBhIGJpZ2dlciBpc3N1ZSB3aGVuIGRlYWxpbmcgd2l0aCBDU1MgZnJhbWV3b3Jrcy5cclxuICpcclxuICogQnkgdXNpbmcgIWltcG9ydGFudCwgdGhlIHNob3cgYW5kIGhpZGUgYmVoYXZpb3Igd2lsbCB3b3JrIGFzIGV4cGVjdGVkIGRlc3BpdGUgYW55IGNsYXNoIGJldHdlZW4gQ1NTIHNlbGVjdG9yXHJcbiAqIHNwZWNpZmljaXR5ICh3aGVuICFpbXBvcnRhbnQgaXNuJ3QgdXNlZCB3aXRoIGFueSBjb25mbGljdGluZyBzdHlsZXMpLiBJZiBhIGRldmVsb3BlciBjaG9vc2VzIHRvIG92ZXJyaWRlIHRoZVxyXG4gKiBzdHlsaW5nIHRvIGNoYW5nZSBob3cgdG8gaGlkZSBhbiBlbGVtZW50IHRoZW4gaXQgaXMganVzdCBhIG1hdHRlciBvZiB1c2luZyAhaW1wb3J0YW50IGluIHRoZWlyIG93biBDU1MgY29kZS5cclxuICpcclxuICogIyMjIE92ZXJyaWRpbmcgYC5uZy1oaWRlYFxyXG4gKlxyXG4gKiBCeSBkZWZhdWx0LCB0aGUgYC5uZy1oaWRlYCBjbGFzcyB3aWxsIHN0eWxlIHRoZSBlbGVtZW50IHdpdGggYGRpc3BsYXk6IG5vbmUhaW1wb3J0YW50YC4gSWYgeW91IHdpc2ggdG8gY2hhbmdlXHJcbiAqIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggbmdTaG93L25nSGlkZSB0aGVuIHRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJlc3RhdGluZyB0aGUgc3R5bGVzIGZvciB0aGUgYC5uZy1oaWRlYFxyXG4gKiBjbGFzcyBpbiBDU1M6XHJcbiAqXHJcbiAqIGBgYGNzc1xyXG4gKiAubmctaGlkZSB7XHJcbiAqICAgLyYjNDI7IHRoaXMgaXMganVzdCBhbm90aGVyIGZvcm0gb2YgaGlkaW5nIGFuIGVsZW1lbnQgJiM0MjsvXHJcbiAqICAgZGlzcGxheTogYmxvY2shaW1wb3J0YW50O1xyXG4gKiAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICogICB0b3A6IC05OTk5cHg7XHJcbiAqICAgbGVmdDogLTk5OTlweDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQnkgZGVmYXVsdCB5b3UgZG9uJ3QgbmVlZCB0byBvdmVycmlkZSBpbiBDU1MgYW55dGhpbmcgYW5kIHRoZSBhbmltYXRpb25zIHdpbGwgd29yayBhcm91bmQgdGhlIGRpc3BsYXkgc3R5bGUuXHJcbiAqXHJcbiAqICMjIEEgbm90ZSBhYm91dCBhbmltYXRpb25zIHdpdGggYG5nSGlkZWBcclxuICpcclxuICogQW5pbWF0aW9ucyBpbiBuZ1Nob3cvbmdIaWRlIHdvcmsgd2l0aCB0aGUgc2hvdyBhbmQgaGlkZSBldmVudHMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdoZW4gdGhlIGRpcmVjdGl2ZSBleHByZXNzaW9uXHJcbiAqIGlzIHRydWUgYW5kIGZhbHNlLiBUaGlzIHN5c3RlbSB3b3JrcyBsaWtlIHRoZSBhbmltYXRpb24gc3lzdGVtIHByZXNlbnQgd2l0aCBuZ0NsYXNzLCBleGNlcHQgdGhhdCB0aGUgYC5uZy1oaWRlYFxyXG4gKiBDU1MgY2xhc3MgaXMgYWRkZWQgYW5kIHJlbW92ZWQgZm9yIHlvdSBpbnN0ZWFkIG9mIHlvdXIgb3duIENTUyBjbGFzcy5cclxuICpcclxuICogYGBgY3NzXHJcbiAqIC8vXHJcbiAqIC8vYSB3b3JraW5nIGV4YW1wbGUgY2FuIGJlIGZvdW5kIGF0IHRoZSBib3R0b20gb2YgdGhpcyBwYWdlXHJcbiAqIC8vXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLCAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7XHJcbiAqICAgdHJhbnNpdGlvbjogMC41cyBsaW5lYXIgYWxsO1xyXG4gKiB9XHJcbiAqXHJcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cclxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUgeyAuLi4gfVxyXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUgeyAuLi4gfVxyXG4gKiBgYGBcclxuICpcclxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGFzIG9mIEFuZ3VsYXJKUyB2ZXJzaW9uIDEuMy4wLWJldGEuMTEsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBkaXNwbGF5XHJcbiAqIHByb3BlcnR5IHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzLS1uZ0FuaW1hdGUgd2lsbCBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGF1dG9tYXRpY2FsbHkgZm9yIHlvdS5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogcmVtb3ZlQ2xhc3M6IGAubmctaGlkZWAgLSBoYXBwZW5zIGFmdGVyIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuXHJcbiAqIGFkZENsYXNzOiBgLm5nLWhpZGVgIC0gaGFwcGVucyBhZnRlciB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBub24gdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSB0aGUgY29udGVudHMgYXJlIHNldCB0byB2aXNpYmxlXHJcbiAqXHJcbiAqIEBlbGVtZW50IEFOWVxyXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSGlkZSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5IHRoZW5cclxuICogICAgIHRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiByZXNwZWN0aXZlbHkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XHJcbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICBDbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjxici8+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgU2hvdzpcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLWhpZGVcIiBuZy1zaG93PVwiY2hlY2tlZFwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRodW1icy11cFwiPjwvc3Bhbj4gSSBzaG93IHVwIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdj5cclxuICAgICAgICBIaWRlOlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGFuaW1hdGUtaGlkZVwiIG5nLWhpZGU9XCJjaGVja2VkXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tdGh1bWJzLWRvd25cIj48L3NwYW4+IEkgaGlkZSB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwiZ2x5cGhpY29ucy5jc3NcIj5cclxuICAgICAgQGltcG9ydCB1cmwoLi4vLi4vY29tcG9uZW50cy9ib290c3RyYXAtMy4xLjEvY3NzL2Jvb3RzdHJhcC5jc3MpO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XHJcbiAgICAgIC5hbmltYXRlLWhpZGUge1xyXG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIGxpbmVhciAwLjVzO1xyXG4gICAgICAgIHRyYW5zaXRpb246IGFsbCBsaW5lYXIgMC41cztcclxuICAgICAgICBsaW5lLWhlaWdodDogMjBweDtcclxuICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLWhpZGUubmctaGlkZSB7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6IDA7XHJcbiAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICBwYWRkaW5nOiAwIDEwcHg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5jaGVjay1lbGVtZW50IHtcclxuICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIHZhciB0aHVtYnNVcCA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuLmdseXBoaWNvbi10aHVtYnMtdXAnKSk7XHJcbiAgICAgIHZhciB0aHVtYnNEb3duID0gZWxlbWVudChieS5jc3MoJ3NwYW4uZ2x5cGhpY29uLXRodW1icy1kb3duJykpO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zaG93IC8gbmctaGlkZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGV4cGVjdCh0aHVtYnNVcC5pc0Rpc3BsYXllZCgpKS50b0JlRmFsc3koKTtcclxuICAgICAgICBleHBlY3QodGh1bWJzRG93bi5pc0Rpc3BsYXllZCgpKS50b0JlVHJ1dGh5KCk7XHJcblxyXG4gICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHRodW1ic1VwLmlzRGlzcGxheWVkKCkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICBleHBlY3QodGh1bWJzRG93bi5pc0Rpc3BsYXllZCgpKS50b0JlRmFsc3koKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIG5nSGlkZURpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdIaWRlLCBmdW5jdGlvbiBuZ0hpZGVXYXRjaEFjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIC8vIFRoZSBjb21tZW50IGluc2lkZSBvZiB0aGUgbmdTaG93RGlyZWN0aXZlIGV4cGxhaW5zIHdoeSB3ZSBhZGQgYW5kXHJcbiAgICAgICAgLy8gcmVtb3ZlIGEgdGVtcG9yYXJ5IGNsYXNzIGZvciB0aGUgc2hvdy9oaWRlIGFuaW1hdGlvblxyXG4gICAgICAgICRhbmltYXRlW3ZhbHVlID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKGVsZW1lbnQsTkdfSElERV9DTEFTUywge1xyXG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV07XHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBuZ1N0eWxlXHJcbiAqIEByZXN0cmljdCBBQ1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ1N0eWxlYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzZXQgQ1NTIHN0eWxlIG9uIGFuIEhUTUwgZWxlbWVudCBjb25kaXRpb25hbGx5LlxyXG4gKlxyXG4gKiBAZWxlbWVudCBBTllcclxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1N0eWxlXHJcbiAqXHJcbiAqIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHdoaWNoIGV2YWxzIHRvIGFuXHJcbiAqIG9iamVjdCB3aG9zZSBrZXlzIGFyZSBDU1Mgc3R5bGUgbmFtZXMgYW5kIHZhbHVlcyBhcmUgY29ycmVzcG9uZGluZyB2YWx1ZXMgZm9yIHRob3NlIENTU1xyXG4gKiBrZXlzLlxyXG4gKlxyXG4gKiBTaW5jZSBzb21lIENTUyBzdHlsZSBuYW1lcyBhcmUgbm90IHZhbGlkIGtleXMgZm9yIGFuIG9iamVjdCwgdGhleSBtdXN0IGJlIHF1b3RlZC5cclxuICogU2VlIHRoZSAnYmFja2dyb3VuZC1jb2xvcicgc3R5bGUgaW4gdGhlIGV4YW1wbGUgYmVsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldCBjb2xvclwiIG5nLWNsaWNrPVwibXlTdHlsZT17Y29sb3I6J3JlZCd9XCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldCBiYWNrZ3JvdW5kXCIgbmctY2xpY2s9XCJteVN0eWxlPXsnYmFja2dyb3VuZC1jb2xvcic6J2JsdWUnfVwiPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlTdHlsZT17fVwiPlxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAgPHNwYW4gbmctc3R5bGU9XCJteVN0eWxlXCI+U2FtcGxlIFRleHQ8L3NwYW4+XHJcbiAgICAgICAgPHByZT5teVN0eWxlPXt7bXlTdHlsZX19PC9wcmU+XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cclxuICAgICAgIHNwYW4ge1xyXG4gICAgICAgICBjb2xvcjogYmxhY2s7XHJcbiAgICAgICB9XHJcbiAgICAgPC9maWxlPlxyXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAgIHZhciBjb2xvclNwYW4gPSBlbGVtZW50KGJ5LmNzcygnc3BhbicpKTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXN0eWxlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMCwgMCwgMCwgMSknKTtcclxuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2lucHV0W3ZhbHVlPVxcJ3NldCBjb2xvclxcJ10nKSkuY2xpY2soKTtcclxuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgyNTUsIDAsIDAsIDEpJyk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCdpbnB1dFt2YWx1ZT1jbGVhcl0nKSkuY2xpY2soKTtcclxuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgwLCAwLCAwLCAxKScpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdTdHlsZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyLm5nU3R5bGUsIGZ1bmN0aW9uIG5nU3R5bGVXYXRjaEFjdGlvbihuZXdTdHlsZXMsIG9sZFN0eWxlcykge1xyXG4gICAgaWYgKG9sZFN0eWxlcyAmJiAobmV3U3R5bGVzICE9PSBvbGRTdHlsZXMpKSB7XHJcbiAgICAgIGZvckVhY2gob2xkU3R5bGVzLCBmdW5jdGlvbih2YWwsIHN0eWxlKSB7IGVsZW1lbnQuY3NzKHN0eWxlLCAnJyk7fSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3U3R5bGVzKSBlbGVtZW50LmNzcyhuZXdTdHlsZXMpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nU3dpdGNoXHJcbiAqIEByZXN0cmljdCBFQVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGBuZ1N3aXRjaGAgZGlyZWN0aXZlIGlzIHVzZWQgdG8gY29uZGl0aW9uYWxseSBzd2FwIERPTSBzdHJ1Y3R1cmUgb24geW91ciB0ZW1wbGF0ZSBiYXNlZCBvbiBhIHNjb3BlIGV4cHJlc3Npb24uXHJcbiAqIEVsZW1lbnRzIHdpdGhpbiBgbmdTd2l0Y2hgIGJ1dCB3aXRob3V0IGBuZ1N3aXRjaFdoZW5gIG9yIGBuZ1N3aXRjaERlZmF1bHRgIGRpcmVjdGl2ZXMgd2lsbCBiZSBwcmVzZXJ2ZWQgYXQgdGhlIGxvY2F0aW9uXHJcbiAqIGFzIHNwZWNpZmllZCBpbiB0aGUgdGVtcGxhdGUuXHJcbiAqXHJcbiAqIFRoZSBkaXJlY3RpdmUgaXRzZWxmIHdvcmtzIHNpbWlsYXIgdG8gbmdJbmNsdWRlLCBob3dldmVyLCBpbnN0ZWFkIG9mIGRvd25sb2FkaW5nIHRlbXBsYXRlIGNvZGUgKG9yIGxvYWRpbmcgaXRcclxuICogZnJvbSB0aGUgdGVtcGxhdGUgY2FjaGUpLCBgbmdTd2l0Y2hgIHNpbXBseSBjaG9vc2VzIG9uZSBvZiB0aGUgbmVzdGVkIGVsZW1lbnRzIGFuZCBtYWtlcyBpdCB2aXNpYmxlIGJhc2VkIG9uIHdoaWNoIGVsZW1lbnRcclxuICogbWF0Y2hlcyB0aGUgdmFsdWUgb2J0YWluZWQgZnJvbSB0aGUgZXZhbHVhdGVkIGV4cHJlc3Npb24uIEluIG90aGVyIHdvcmRzLCB5b3UgZGVmaW5lIGEgY29udGFpbmVyIGVsZW1lbnRcclxuICogKHdoZXJlIHlvdSBwbGFjZSB0aGUgZGlyZWN0aXZlKSwgcGxhY2UgYW4gZXhwcmVzc2lvbiBvbiB0aGUgKipgb249XCIuLi5cImAgYXR0cmlidXRlKipcclxuICogKG9yIHRoZSAqKmBuZy1zd2l0Y2g9XCIuLi5cImAgYXR0cmlidXRlKiopLCBkZWZpbmUgYW55IGlubmVyIGVsZW1lbnRzIGluc2lkZSBvZiB0aGUgZGlyZWN0aXZlIGFuZCBwbGFjZVxyXG4gKiBhIHdoZW4gYXR0cmlidXRlIHBlciBlbGVtZW50LiBUaGUgd2hlbiBhdHRyaWJ1dGUgaXMgdXNlZCB0byBpbmZvcm0gbmdTd2l0Y2ggd2hpY2ggZWxlbWVudCB0byBkaXNwbGF5IHdoZW4gdGhlIG9uXHJcbiAqIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkLiBJZiBhIG1hdGNoaW5nIGV4cHJlc3Npb24gaXMgbm90IGZvdW5kIHZpYSBhIHdoZW4gYXR0cmlidXRlIHRoZW4gYW4gZWxlbWVudCB3aXRoIHRoZSBkZWZhdWx0XHJcbiAqIGF0dHJpYnV0ZSBpcyBkaXNwbGF5ZWQuXHJcbiAqXHJcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XHJcbiAqIEJlIGF3YXJlIHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMgdG8gbWF0Y2ggYWdhaW5zdCBjYW5ub3QgYmUgZXhwcmVzc2lvbnMuIFRoZXkgYXJlIGludGVycHJldGVkXHJcbiAqIGFzIGxpdGVyYWwgc3RyaW5nIHZhbHVlcyB0byBtYXRjaCBhZ2FpbnN0LlxyXG4gKiBGb3IgZXhhbXBsZSwgKipgbmctc3dpdGNoLXdoZW49XCJzb21lVmFsXCJgKiogd2lsbCBtYXRjaCBhZ2FpbnN0IHRoZSBzdHJpbmcgYFwic29tZVZhbFwiYCBub3QgYWdhaW5zdCB0aGVcclxuICogdmFsdWUgb2YgdGhlIGV4cHJlc3Npb24gYCRzY29wZS5zb21lVmFsYC5cclxuICogPC9kaXY+XHJcblxyXG4gKiBAYW5pbWF0aW9uc1xyXG4gKiBlbnRlciAtIGhhcHBlbnMgYWZ0ZXIgdGhlIG5nU3dpdGNoIGNvbnRlbnRzIGNoYW5nZSBhbmQgdGhlIG1hdGNoZWQgY2hpbGQgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlIHRoZSBjb250YWluZXJcclxuICogbGVhdmUgLSBoYXBwZW5zIGp1c3QgYWZ0ZXIgdGhlIG5nU3dpdGNoIGNvbnRlbnRzIGNoYW5nZSBhbmQganVzdCBiZWZvcmUgdGhlIGZvcm1lciBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cclxuICpcclxuICogQHVzYWdlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiA8QU5ZIG5nLXN3aXRjaD1cImV4cHJlc3Npb25cIj5cclxuICogICA8QU5ZIG5nLXN3aXRjaC13aGVuPVwibWF0Y2hWYWx1ZTFcIj4uLi48L0FOWT5cclxuICogICA8QU5ZIG5nLXN3aXRjaC13aGVuPVwibWF0Y2hWYWx1ZTJcIj4uLi48L0FOWT5cclxuICogICA8QU5ZIG5nLXN3aXRjaC1kZWZhdWx0Pi4uLjwvQU5ZPlxyXG4gKiA8L0FOWT5cclxuICogYGBgXHJcbiAqXHJcbiAqXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgMTIwMFxyXG4gKiBAcGFyYW0geyp9IG5nU3dpdGNofG9uIGV4cHJlc3Npb24gdG8gbWF0Y2ggYWdhaW5zdCA8dHQ+bmctc3dpdGNoLXdoZW48L3R0Pi5cclxuICogT24gY2hpbGQgZWxlbWVudHMgYWRkOlxyXG4gKlxyXG4gKiAqIGBuZ1N3aXRjaFdoZW5gOiB0aGUgY2FzZSBzdGF0ZW1lbnQgdG8gbWF0Y2ggYWdhaW5zdC4gSWYgbWF0Y2ggdGhlbiB0aGlzXHJcbiAqICAgY2FzZSB3aWxsIGJlIGRpc3BsYXllZC4gSWYgdGhlIHNhbWUgbWF0Y2ggYXBwZWFycyBtdWx0aXBsZSB0aW1lcywgYWxsIHRoZVxyXG4gKiAgIGVsZW1lbnRzIHdpbGwgYmUgZGlzcGxheWVkLlxyXG4gKiAqIGBuZ1N3aXRjaERlZmF1bHRgOiB0aGUgZGVmYXVsdCBjYXNlIHdoZW4gbm8gb3RoZXIgY2FzZSBtYXRjaC4gSWYgdGhlcmVcclxuICogICBhcmUgbXVsdGlwbGUgZGVmYXVsdCBjYXNlcywgYWxsIG9mIHRoZW0gd2lsbCBiZSBkaXNwbGF5ZWQgd2hlbiBubyBvdGhlclxyXG4gKiAgIGNhc2UgbWF0Y2guXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgPGV4YW1wbGUgbW9kdWxlPVwic3dpdGNoRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwic2VsZWN0aW9uXCIgbmctb3B0aW9ucz1cIml0ZW0gZm9yIGl0ZW0gaW4gaXRlbXNcIj5cclxuICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8dHQ+c2VsZWN0aW9uPXt7c2VsZWN0aW9ufX08L3R0PlxyXG4gICAgICAgIDxoci8+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoLWNvbnRhaW5lclwiXHJcbiAgICAgICAgICBuZy1zd2l0Y2ggb249XCJzZWxlY3Rpb25cIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLXdoZW49XCJzZXR0aW5nc1wiPlNldHRpbmdzIERpdjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cImhvbWVcIj5Ib21lIFNwYW48L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoXCIgbmctc3dpdGNoLWRlZmF1bHQ+ZGVmYXVsdDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZmlsZT5cclxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3N3aXRjaEV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbJ3NldHRpbmdzJywgJ2hvbWUnLCAnb3RoZXInXTtcclxuICAgICAgICAgICRzY29wZS5zZWxlY3Rpb24gPSAkc2NvcGUuaXRlbXNbMF07XHJcbiAgICAgICAgfV0pO1xyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XHJcbiAgICAgIC5hbmltYXRlLXN3aXRjaC1jb250YWluZXIge1xyXG4gICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XHJcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcclxuICAgICAgICBoZWlnaHQ6NDBweDtcclxuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5hbmltYXRlLXN3aXRjaCB7XHJcbiAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctYW5pbWF0ZSB7XHJcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XHJcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xyXG5cclxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICB0b3A6MDtcclxuICAgICAgICBsZWZ0OjA7XHJcbiAgICAgICAgcmlnaHQ6MDtcclxuICAgICAgICBib3R0b206MDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWxlYXZlLm5nLWxlYXZlLWFjdGl2ZSxcclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWVudGVyIHtcclxuICAgICAgICB0b3A6LTUwcHg7XHJcbiAgICAgIH1cclxuICAgICAgLmFuaW1hdGUtc3dpdGNoLm5nLWxlYXZlLFxyXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcclxuICAgICAgICB0b3A6MDtcclxuICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICB2YXIgc3dpdGNoRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCdbbmctc3dpdGNoXScpKTtcclxuICAgICAgdmFyIHNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlbGVjdGlvbicpKTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgc3RhcnQgaW4gc2V0dGluZ3MnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xyXG4gICAgICB9KTtcclxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gaG9tZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDEpLmNsaWNrKCk7XHJcbiAgICAgICAgZXhwZWN0KHN3aXRjaEVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Ib21lIFNwYW4vKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGl0KCdzaG91bGQgc2VsZWN0IGRlZmF1bHQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvZGVmYXVsdC8pO1xyXG4gICAgICB9KTtcclxuICAgIDwvZmlsZT5cclxuICA8L2V4YW1wbGU+XHJcbiAqL1xyXG52YXIgbmdTd2l0Y2hEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICByZXF1aXJlOiAnbmdTd2l0Y2gnLFxyXG5cclxuICAgIC8vIGFza3MgZm9yICRzY29wZSB0byBmb29sIHRoZSBCQyBjb250cm9sbGVyIG1vZHVsZVxyXG4gICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiBuZ1N3aXRjaENvbnRyb2xsZXIoKSB7XHJcbiAgICAgdGhpcy5jYXNlcyA9IHt9O1xyXG4gICAgfV0sXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgbmdTd2l0Y2hDb250cm9sbGVyKSB7XHJcbiAgICAgIHZhciB3YXRjaEV4cHIgPSBhdHRyLm5nU3dpdGNoIHx8IGF0dHIub24sXHJcbiAgICAgICAgICBzZWxlY3RlZFRyYW5zY2x1ZGVzID0gW10sXHJcbiAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzID0gW10sXHJcbiAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9ucyA9IFtdLFxyXG4gICAgICAgICAgc2VsZWN0ZWRTY29wZXMgPSBbXTtcclxuXHJcbiAgICAgIHZhciBzcGxpY2VGYWN0b3J5ID0gZnVuY3Rpb24oYXJyYXksIGluZGV4KSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7IGFycmF5LnNwbGljZShpbmRleCwgMSk7IH07XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS4kd2F0Y2god2F0Y2hFeHByLCBmdW5jdGlvbiBuZ1N3aXRjaFdhdGNoQWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGksIGlpO1xyXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgJGFuaW1hdGUuY2FuY2VsKHByZXZpb3VzTGVhdmVBbmltYXRpb25zW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMubGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBzZWxlY3RlZFNjb3Blcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnZXRCbG9ja05vZGVzKHNlbGVjdGVkRWxlbWVudHNbaV0uY2xvbmUpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRTY29wZXNbaV0uJGRlc3Ryb3koKTtcclxuICAgICAgICAgIHZhciBwcm9taXNlID0gcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnNbaV0gPSAkYW5pbWF0ZS5sZWF2ZShzZWxlY3RlZCk7XHJcbiAgICAgICAgICBwcm9taXNlLnRoZW4oc3BsaWNlRmFjdG9yeShwcmV2aW91c0xlYXZlQW5pbWF0aW9ucywgaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHNlbGVjdGVkU2NvcGVzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGlmICgoc2VsZWN0ZWRUcmFuc2NsdWRlcyA9IG5nU3dpdGNoQ29udHJvbGxlci5jYXNlc1snIScgKyB2YWx1ZV0gfHwgbmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWyc/J10pKSB7XHJcbiAgICAgICAgICBmb3JFYWNoKHNlbGVjdGVkVHJhbnNjbHVkZXMsIGZ1bmN0aW9uKHNlbGVjdGVkVHJhbnNjbHVkZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFRyYW5zY2x1ZGUudHJhbnNjbHVkZShmdW5jdGlvbihjYXNlRWxlbWVudCwgc2VsZWN0ZWRTY29wZSkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkU2NvcGVzLnB1c2goc2VsZWN0ZWRTY29wZSk7XHJcbiAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IHNlbGVjdGVkVHJhbnNjbHVkZS5lbGVtZW50O1xyXG4gICAgICAgICAgICAgIGNhc2VFbGVtZW50W2Nhc2VFbGVtZW50Lmxlbmd0aCsrXSA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBlbmQgbmdTd2l0Y2hXaGVuOiAnKTtcclxuICAgICAgICAgICAgICB2YXIgYmxvY2sgPSB7IGNsb25lOiBjYXNlRWxlbWVudCB9O1xyXG5cclxuICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLnB1c2goYmxvY2spO1xyXG4gICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNhc2VFbGVtZW50LCBhbmNob3IucGFyZW50KCksIGFuY2hvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbnZhciBuZ1N3aXRjaFdoZW5EaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XHJcbiAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gIHByaW9yaXR5OiAxMjAwLFxyXG4gIHJlcXVpcmU6ICdebmdTd2l0Y2gnLFxyXG4gIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwsICR0cmFuc2NsdWRlKSB7XHJcbiAgICBjdHJsLmNhc2VzWychJyArIGF0dHJzLm5nU3dpdGNoV2hlbl0gPSAoY3RybC5jYXNlc1snIScgKyBhdHRycy5uZ1N3aXRjaFdoZW5dIHx8IFtdKTtcclxuICAgIGN0cmwuY2FzZXNbJyEnICsgYXR0cnMubmdTd2l0Y2hXaGVuXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnZhciBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XHJcbiAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxyXG4gIHByaW9yaXR5OiAxMjAwLFxyXG4gIHJlcXVpcmU6ICdebmdTd2l0Y2gnLFxyXG4gIG11bHRpRWxlbWVudDogdHJ1ZSxcclxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcclxuICAgIGN0cmwuY2FzZXNbJz8nXSA9IChjdHJsLmNhc2VzWyc/J10gfHwgW10pO1xyXG4gICAgY3RybC5jYXNlc1snPyddLnB1c2goeyB0cmFuc2NsdWRlOiAkdHJhbnNjbHVkZSwgZWxlbWVudDogZWxlbWVudCB9KTtcclxuICAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIG5nVHJhbnNjbHVkZVxyXG4gKiBAcmVzdHJpY3QgRUFDXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEaXJlY3RpdmUgdGhhdCBtYXJrcyB0aGUgaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgdHJhbnNjbHVkZWQgRE9NIG9mIHRoZSBuZWFyZXN0IHBhcmVudCBkaXJlY3RpdmUgdGhhdCB1c2VzIHRyYW5zY2x1c2lvbi5cclxuICpcclxuICogQW55IGV4aXN0aW5nIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgdGhhdCB0aGlzIGRpcmVjdGl2ZSBpcyBwbGFjZWQgb24gd2lsbCBiZSByZW1vdmVkIGJlZm9yZSB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBpcyBpbnNlcnRlZC5cclxuICpcclxuICogQGVsZW1lbnQgQU5ZXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAgIDxleGFtcGxlIG1vZHVsZT1cInRyYW5zY2x1ZGVFeGFtcGxlXCI+XHJcbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0cmFuc2NsdWRlRXhhbXBsZScsIFtdKVxyXG4gICAgICAgICAgLmRpcmVjdGl2ZSgncGFuZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICBzY29wZTogeyB0aXRsZTonQCcgfSxcclxuICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogZ3JheVwiPnt7dGl0bGV9fTwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPG5nLXRyYW5zY2x1ZGU+PC9uZy10cmFuc2NsdWRlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcclxuICAgICAgICAgICAgIH07XHJcbiAgICAgICAgIH0pXHJcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJ0xvcmVtIElwc3VtJztcclxuICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdOZXF1ZSBwb3JybyBxdWlzcXVhbSBlc3QgcXVpIGRvbG9yZW0gaXBzdW0gcXVpYSBkb2xvci4uLic7XHJcbiAgICAgICAgIH1dKTtcclxuICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidGl0bGVcIj4gPGJyLz5cclxuICAgICAgICAgPHRleHRhcmVhIG5nLW1vZGVsPVwidGV4dFwiPjwvdGV4dGFyZWE+IDxici8+XHJcbiAgICAgICAgIDxwYW5lIHRpdGxlPVwie3t0aXRsZX19XCI+e3t0ZXh0fX08L3BhbmU+XHJcbiAgICAgICA8L2Rpdj5cclxuICAgICA8L2ZpbGU+XHJcbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgIGl0KCdzaG91bGQgaGF2ZSB0cmFuc2NsdWRlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHRpdGxlRWxlbWVudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RpdGxlJykpO1xyXG4gICAgICAgICAgdGl0bGVFbGVtZW50LmNsZWFyKCk7XHJcbiAgICAgICAgICB0aXRsZUVsZW1lbnQuc2VuZEtleXMoJ1RJVExFJyk7XHJcbiAgICAgICAgICB2YXIgdGV4dEVsZW1lbnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0ZXh0JykpO1xyXG4gICAgICAgICAgdGV4dEVsZW1lbnQuY2xlYXIoKTtcclxuICAgICAgICAgIHRleHRFbGVtZW50LnNlbmRLZXlzKCdURVhUJyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd0aXRsZScpKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1RJVExFJyk7XHJcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd0ZXh0JykpLmdldFRleHQoKSkudG9FcXVhbCgnVEVYVCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKlxyXG4gKi9cclxudmFyIG5nVHJhbnNjbHVkZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcclxuICByZXN0cmljdDogJ0VBQycsXHJcbiAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBjb250cm9sbGVyLCAkdHJhbnNjbHVkZSkge1xyXG4gICAgaWYgKCEkdHJhbnNjbHVkZSkge1xyXG4gICAgICB0aHJvdyBtaW5FcnIoJ25nVHJhbnNjbHVkZScpKCdvcnBoYW4nLFxyXG4gICAgICAgJ0lsbGVnYWwgdXNlIG9mIG5nVHJhbnNjbHVkZSBkaXJlY3RpdmUgaW4gdGhlIHRlbXBsYXRlISAnICtcclxuICAgICAgICdObyBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgcmVxdWlyZXMgYSB0cmFuc2NsdXNpb24gZm91bmQuICcgK1xyXG4gICAgICAgJ0VsZW1lbnQ6IHswfScsXHJcbiAgICAgICBzdGFydGluZ1RhZygkZWxlbWVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgICR0cmFuc2NsdWRlKGZ1bmN0aW9uKGNsb25lKSB7XHJcbiAgICAgICRlbGVtZW50LmVtcHR5KCk7XHJcbiAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgc2NyaXB0XHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBMb2FkIHRoZSBjb250ZW50IG9mIGEgYDxzY3JpcHQ+YCBlbGVtZW50IGludG8ge0BsaW5rIG5nLiR0ZW1wbGF0ZUNhY2hlIGAkdGVtcGxhdGVDYWNoZWB9LCBzbyB0aGF0IHRoZVxyXG4gKiB0ZW1wbGF0ZSBjYW4gYmUgdXNlZCBieSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmdJbmNsdWRlYH0sXHJcbiAqIHtAbGluayBuZ1JvdXRlLmRpcmVjdGl2ZTpuZ1ZpZXcgYG5nVmlld2B9LCBvciB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZXN9LiBUaGUgdHlwZSBvZiB0aGVcclxuICogYDxzY3JpcHQ+YCBlbGVtZW50IG11c3QgYmUgc3BlY2lmaWVkIGFzIGB0ZXh0L25nLXRlbXBsYXRlYCwgYW5kIGEgY2FjaGUgbmFtZSBmb3IgdGhlIHRlbXBsYXRlIG11c3QgYmVcclxuICogYXNzaWduZWQgdGhyb3VnaCB0aGUgZWxlbWVudCdzIGBpZGAsIHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgYXMgYSBkaXJlY3RpdmUncyBgdGVtcGxhdGVVcmxgLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBNdXN0IGJlIHNldCB0byBgJ3RleHQvbmctdGVtcGxhdGUnYC5cclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENhY2hlIG5hbWUgb2YgdGhlIHRlbXBsYXRlLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gIDxleGFtcGxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC9uZy10ZW1wbGF0ZVwiIGlkPVwiL3RwbC5odG1sXCI+XHJcbiAgICAgICAgQ29udGVudCBvZiB0aGUgdGVtcGxhdGUuXHJcbiAgICAgIDwvc2NyaXB0PlxyXG5cclxuICAgICAgPGEgbmctY2xpY2s9XCJjdXJyZW50VHBsPScvdHBsLmh0bWwnXCIgaWQ9XCJ0cGwtbGlua1wiPkxvYWQgaW5saW5lZCB0ZW1wbGF0ZTwvYT5cclxuICAgICAgPGRpdiBpZD1cInRwbC1jb250ZW50XCIgbmctaW5jbHVkZSBzcmM9XCJjdXJyZW50VHBsXCI+PC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZSBkZWZpbmVkIGluc2lkZSBzY3JpcHQgdGFnJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZWxlbWVudChieS5jc3MoJyN0cGwtbGluaycpKS5jbGljaygpO1xyXG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI3RwbC1jb250ZW50JykpLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0aGUgdGVtcGxhdGUvKTtcclxuICAgICAgfSk7XHJcbiAgICA8L2ZpbGU+XHJcbiAgPC9leGFtcGxlPlxyXG4gKi9cclxudmFyIHNjcmlwdERpcmVjdGl2ZSA9IFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgdGVybWluYWw6IHRydWUsXHJcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgIGlmIChhdHRyLnR5cGUgPT0gJ3RleHQvbmctdGVtcGxhdGUnKSB7XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlVXJsID0gYXR0ci5pZCxcclxuICAgICAgICAgICAgdGV4dCA9IGVsZW1lbnRbMF0udGV4dDtcclxuXHJcbiAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlVXJsLCB0ZXh0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxudmFyIG5nT3B0aW9uc01pbkVyciA9IG1pbkVycignbmdPcHRpb25zJyk7XHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIHNlbGVjdFxyXG4gKiBAcmVzdHJpY3QgRVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogSFRNTCBgU0VMRUNUYCBlbGVtZW50IHdpdGggYW5ndWxhciBkYXRhLWJpbmRpbmcuXHJcbiAqXHJcbiAqICMgYG5nT3B0aW9uc2BcclxuICpcclxuICogVGhlIGBuZ09wdGlvbnNgIGF0dHJpYnV0ZSBjYW4gYmUgdXNlZCB0byBkeW5hbWljYWxseSBnZW5lcmF0ZSBhIGxpc3Qgb2YgYDxvcHRpb24+YFxyXG4gKiBlbGVtZW50cyBmb3IgdGhlIGA8c2VsZWN0PmAgZWxlbWVudCB1c2luZyB0aGUgYXJyYXkgb3Igb2JqZWN0IG9idGFpbmVkIGJ5IGV2YWx1YXRpbmcgdGhlXHJcbiAqIGBuZ09wdGlvbnNgIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvbi5cclxuICpcclxuICogSW4gbWFueSBjYXNlcywgYG5nUmVwZWF0YCBjYW4gYmUgdXNlZCBvbiBgPG9wdGlvbj5gIGVsZW1lbnRzIGluc3RlYWQgb2YgYG5nT3B0aW9uc2AgdG8gYWNoaWV2ZSBhXHJcbiAqIHNpbWlsYXIgcmVzdWx0LiBIb3dldmVyLCBgbmdPcHRpb25zYCBwcm92aWRlcyBzb21lIGJlbmVmaXRzIHN1Y2ggYXMgcmVkdWNpbmcgbWVtb3J5IGFuZFxyXG4gKiBpbmNyZWFzaW5nIHNwZWVkIGJ5IG5vdCBjcmVhdGluZyBhIG5ldyBzY29wZSBmb3IgZWFjaCByZXBlYXRlZCBpbnN0YW5jZSwgYXMgd2VsbCBhcyBwcm92aWRpbmdcclxuICogbW9yZSBmbGV4aWJpbGl0eSBpbiBob3cgdGhlIGA8c2VsZWN0PmAncyBtb2RlbCBpcyBhc3NpZ25lZCB2aWEgdGhlIGBzZWxlY3RgICoqYGFzYCoqIHBhcnQgb2YgdGhlXHJcbiAqIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvbi4gYG5nT3B0aW9uc2Agc2hvdWxkIGJlIHVzZWQgd2hlbiB0aGUgYDxzZWxlY3Q+YCBtb2RlbCBuZWVkcyB0byBiZSBib3VuZFxyXG4gKiAgdG8gYSBub24tc3RyaW5nIHZhbHVlLiBUaGlzIGlzIGJlY2F1c2UgYW4gb3B0aW9uIGVsZW1lbnQgY2FuIG9ubHkgYmUgYm91bmQgdG8gc3RyaW5nIHZhbHVlcyBhdFxyXG4gKiBwcmVzZW50LlxyXG4gKlxyXG4gKiBXaGVuIGFuIGl0ZW0gaW4gdGhlIGA8c2VsZWN0PmAgbWVudSBpcyBzZWxlY3RlZCwgdGhlIGFycmF5IGVsZW1lbnQgb3Igb2JqZWN0IHByb3BlcnR5XHJcbiAqIHJlcHJlc2VudGVkIGJ5IHRoZSBzZWxlY3RlZCBvcHRpb24gd2lsbCBiZSBib3VuZCB0byB0aGUgbW9kZWwgaWRlbnRpZmllZCBieSB0aGUgYG5nTW9kZWxgXHJcbiAqIGRpcmVjdGl2ZS5cclxuICpcclxuICogT3B0aW9uYWxseSwgYSBzaW5nbGUgaGFyZC1jb2RlZCBgPG9wdGlvbj5gIGVsZW1lbnQsIHdpdGggdGhlIHZhbHVlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcsIGNhblxyXG4gKiBiZSBuZXN0ZWQgaW50byB0aGUgYDxzZWxlY3Q+YCBlbGVtZW50LiBUaGlzIGVsZW1lbnQgd2lsbCB0aGVuIHJlcHJlc2VudCB0aGUgYG51bGxgIG9yIFwibm90IHNlbGVjdGVkXCJcclxuICogb3B0aW9uLiBTZWUgZXhhbXBsZSBiZWxvdyBmb3IgZGVtb25zdHJhdGlvbi5cclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogKipOb3RlOioqIGBuZ01vZGVsYCBjb21wYXJlcyBieSByZWZlcmVuY2UsIG5vdCB2YWx1ZS4gVGhpcyBpcyBpbXBvcnRhbnQgd2hlbiBiaW5kaW5nIHRvIGFuXHJcbiAqIGFycmF5IG9mIG9iamVjdHMuIFNlZSBhbiBleGFtcGxlIFtpbiB0aGlzIGpzZmlkZGxlXShodHRwOi8vanNmaWRkbGUubmV0L3FXelRiLykuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiAjIyBgc2VsZWN0YCAqKmBhc2AqKlxyXG4gKlxyXG4gKiBVc2luZyBgc2VsZWN0YCAqKmBhc2AqKiB3aWxsIGJpbmQgdGhlIHJlc3VsdCBvZiB0aGUgYHNlbGVjdGAgZXhwcmVzc2lvbiB0byB0aGUgbW9kZWwsIGJ1dFxyXG4gKiB0aGUgdmFsdWUgb2YgdGhlIGA8c2VsZWN0PmAgYW5kIGA8b3B0aW9uPmAgaHRtbCBlbGVtZW50cyB3aWxsIGJlIGVpdGhlciB0aGUgaW5kZXggKGZvciBhcnJheSBkYXRhIHNvdXJjZXMpXHJcbiAqIG9yIHByb3BlcnR5IG5hbWUgKGZvciBvYmplY3QgZGF0YSBzb3VyY2VzKSBvZiB0aGUgdmFsdWUgd2l0aGluIHRoZSBjb2xsZWN0aW9uLiBJZiBhICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb25cclxuICogaXMgdXNlZCwgdGhlIHJlc3VsdCBvZiB0aGF0IGV4cHJlc3Npb24gd2lsbCBiZSBzZXQgYXMgdGhlIHZhbHVlIG9mIHRoZSBgb3B0aW9uYCBhbmQgYHNlbGVjdGAgZWxlbWVudHMuXHJcbiAqXHJcbiAqXHJcbiAqICMjIyBgc2VsZWN0YCAqKmBhc2AqKiBhbmQgKipgdHJhY2sgYnlgKipcclxuICpcclxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICogRG8gbm90IHVzZSBgc2VsZWN0YCAqKmBhc2AqKiBhbmQgKipgdHJhY2sgYnlgKiogaW4gdGhlIHNhbWUgZXhwcmVzc2lvbi4gVGhleSBhcmUgbm90IGRlc2lnbmVkIHRvIHdvcmsgdG9nZXRoZXIuXHJcbiAqIDwvZGl2PlxyXG4gKlxyXG4gKiBDb25zaWRlciB0aGUgZm9sbG93aW5nIGV4YW1wbGU6XHJcbiAqXHJcbiAqIGBgYGh0bWxcclxuICogPHNlbGVjdCBuZy1vcHRpb25zPVwiaXRlbS5zdWJJdGVtIGFzIGl0ZW0ubGFiZWwgZm9yIGl0ZW0gaW4gdmFsdWVzIHRyYWNrIGJ5IGl0ZW0uaWRcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiAkc2NvcGUudmFsdWVzID0gW3tcclxuICogICBpZDogMSxcclxuICogICBsYWJlbDogJ2FMYWJlbCcsXHJcbiAqICAgc3ViSXRlbTogeyBuYW1lOiAnYVN1Ykl0ZW0nIH1cclxuICogfSwge1xyXG4gKiAgIGlkOiAyLFxyXG4gKiAgIGxhYmVsOiAnYkxhYmVsJyxcclxuICogICBzdWJJdGVtOiB7IG5hbWU6ICdiU3ViSXRlbScgfVxyXG4gKiB9XTtcclxuICpcclxuICogJHNjb3BlLnNlbGVjdGVkID0geyBuYW1lOiAnYVN1Ykl0ZW0nIH07XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBXaXRoIHRoZSBwdXJwb3NlIG9mIHByZXNlcnZpbmcgdGhlIHNlbGVjdGlvbiwgdGhlICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnRcclxuICogb2YgdGhlIGRhdGEgc291cmNlICh0byBgaXRlbWAgaW4gdGhpcyBleGFtcGxlKS4gVG8gY2FsY3VsYXRlIHdoZXRoZXIgYW4gZWxlbWVudCBpcyBzZWxlY3RlZCwgd2UgZG8gdGhlXHJcbiAqIGZvbGxvd2luZzpcclxuICpcclxuICogMS4gQXBwbHkgKipgdHJhY2sgYnlgKiogdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBhcnJheS4gSW4gdGhlIGV4YW1wbGU6IGBbMSwgMl1gXHJcbiAqIDIuIEFwcGx5ICoqYHRyYWNrIGJ5YCoqIHRvIHRoZSBhbHJlYWR5IHNlbGVjdGVkIHZhbHVlIGluIGBuZ01vZGVsYC5cclxuICogICAgSW4gdGhlIGV4YW1wbGU6IHRoaXMgaXMgbm90IHBvc3NpYmxlIGFzICoqYHRyYWNrIGJ5YCoqIHJlZmVycyB0byBgaXRlbS5pZGAsIGJ1dCB0aGUgc2VsZWN0ZWRcclxuICogICAgdmFsdWUgZnJvbSBgbmdNb2RlbGAgaXMgYHtuYW1lOiAnYVN1Ykl0ZW0nfWAsIHNvIHRoZSAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uIGlzIGFwcGxpZWQgdG9cclxuICogICAgYSB3cm9uZyBvYmplY3QsIHRoZSBzZWxlY3RlZCBlbGVtZW50IGNhbid0IGJlIGZvdW5kLCBgPHNlbGVjdD5gIGlzIGFsd2F5cyByZXNldCB0byB0aGUgXCJub3RcclxuICogICAgc2VsZWN0ZWRcIiBvcHRpb24uXHJcbiAqXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cclxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFRoZSBjb250cm9sIGlzIGNvbnNpZGVyZWQgdmFsaWQgb25seSBpZiB2YWx1ZSBpcyBlbnRlcmVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cclxuICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcclxuICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXHJcbiAqIEBwYXJhbSB7Y29tcHJlaGVuc2lvbl9leHByZXNzaW9uPX0gbmdPcHRpb25zIGluIG9uZSBvZiB0aGUgZm9sbG93aW5nIGZvcm1zOlxyXG4gKlxyXG4gKiAgICogZm9yIGFycmF5IGRhdGEgc291cmNlczpcclxuICogICAgICogYGxhYmVsYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXHJcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxyXG4gKiAgICAgKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxyXG4gKiAgICAgKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YCAqKmB0cmFjayBieWAqKiBgdHJhY2tleHByYFxyXG4gKiAgICAgKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWAgfCBvcmRlckJ5OmBvcmRlcmV4cHJgICoqYHRyYWNrIGJ5YCoqIGB0cmFja2V4cHJgXHJcbiAqICAgICAgICAoZm9yIGluY2x1ZGluZyBhIGZpbHRlciB3aXRoIGB0cmFjayBieWApXHJcbiAqICAgKiBmb3Igb2JqZWN0IGRhdGEgc291cmNlczpcclxuICogICAgICogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcclxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcclxuICogICAgICogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgICoqYGZvciAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXHJcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYFxyXG4gKiAgICAgICAgICoqYGZvcmAgYChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcclxuICpcclxuICogV2hlcmU6XHJcbiAqXHJcbiAqICAgKiBgYXJyYXlgIC8gYG9iamVjdGA6IGFuIGV4cHJlc3Npb24gd2hpY2ggZXZhbHVhdGVzIHRvIGFuIGFycmF5IC8gb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cclxuICogICAqIGB2YWx1ZWA6IGxvY2FsIHZhcmlhYmxlIHdoaWNoIHdpbGwgcmVmZXIgdG8gZWFjaCBpdGVtIGluIHRoZSBgYXJyYXlgIG9yIGVhY2ggcHJvcGVydHkgdmFsdWVcclxuICogICAgICBvZiBgb2JqZWN0YCBkdXJpbmcgaXRlcmF0aW9uLlxyXG4gKiAgICogYGtleWA6IGxvY2FsIHZhcmlhYmxlIHdoaWNoIHdpbGwgcmVmZXIgdG8gYSBwcm9wZXJ0eSBuYW1lIGluIGBvYmplY3RgIGR1cmluZyBpdGVyYXRpb24uXHJcbiAqICAgKiBgbGFiZWxgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIHRoZSBsYWJlbCBmb3IgYDxvcHRpb24+YCBlbGVtZW50LiBUaGVcclxuICogICAgIGBleHByZXNzaW9uYCB3aWxsIG1vc3QgbGlrZWx5IHJlZmVyIHRvIHRoZSBgdmFsdWVgIHZhcmlhYmxlIChlLmcuIGB2YWx1ZS5wcm9wZXJ0eU5hbWVgKS5cclxuICogICAqIGBzZWxlY3RgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIGJvdW5kIHRvIHRoZSBtb2RlbCBvZiB0aGUgcGFyZW50IGA8c2VsZWN0PmBcclxuICogICAgICBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkLCBgc2VsZWN0YCBleHByZXNzaW9uIHdpbGwgZGVmYXVsdCB0byBgdmFsdWVgLlxyXG4gKiAgICogYGdyb3VwYDogVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZSB1c2VkIHRvIGdyb3VwIG9wdGlvbnMgdXNpbmcgdGhlIGA8b3B0Z3JvdXA+YFxyXG4gKiAgICAgIERPTSBlbGVtZW50LlxyXG4gKiAgICogYHRyYWNrZXhwcmA6IFVzZWQgd2hlbiB3b3JraW5nIHdpdGggYW4gYXJyYXkgb2Ygb2JqZWN0cy4gVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZVxyXG4gKiAgICAgIHVzZWQgdG8gaWRlbnRpZnkgdGhlIG9iamVjdHMgaW4gdGhlIGFycmF5LiBUaGUgYHRyYWNrZXhwcmAgd2lsbCBtb3N0IGxpa2VseSByZWZlciB0byB0aGVcclxuICogICAgIGB2YWx1ZWAgdmFyaWFibGUgKGUuZy4gYHZhbHVlLnByb3BlcnR5TmFtZWApLiBXaXRoIHRoaXMgdGhlIHNlbGVjdGlvbiBpcyBwcmVzZXJ2ZWRcclxuICogICAgICBldmVuIHdoZW4gdGhlIG9wdGlvbnMgYXJlIHJlY3JlYXRlZCAoZS5nLiByZWxvYWRlZCBmcm9tIHRoZSBzZXJ2ZXIpLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gICAgPGV4YW1wbGUgbW9kdWxlPVwic2VsZWN0RXhhbXBsZVwiPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3NlbGVjdEV4YW1wbGUnLCBbXSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jb2xvcnMgPSBbXHJcbiAgICAgICAgICAgICAge25hbWU6J2JsYWNrJywgc2hhZGU6J2RhcmsnfSxcclxuICAgICAgICAgICAgICB7bmFtZTond2hpdGUnLCBzaGFkZTonbGlnaHQnfSxcclxuICAgICAgICAgICAgICB7bmFtZToncmVkJywgc2hhZGU6J2RhcmsnfSxcclxuICAgICAgICAgICAgICB7bmFtZTonYmx1ZScsIHNoYWRlOidkYXJrJ30sXHJcbiAgICAgICAgICAgICAge25hbWU6J3llbGxvdycsIHNoYWRlOidsaWdodCd9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICRzY29wZS5teUNvbG9yID0gJHNjb3BlLmNvbG9yc1syXTsgLy8gcmVkXHJcbiAgICAgICAgICB9XSk7XHJcbiAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbG9yIGluIGNvbG9yc1wiPlxyXG4gICAgICAgICAgICAgIE5hbWU6IDxpbnB1dCBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIj5cclxuICAgICAgICAgICAgICBbPGEgaHJlZiBuZy1jbGljaz1cImNvbG9ycy5zcGxpY2UoJGluZGV4LCAxKVwiPlg8L2E+XVxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgWzxhIGhyZWYgbmctY2xpY2s9XCJjb2xvcnMucHVzaCh7fSlcIj5hZGQ8L2E+XVxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICBDb2xvciAobnVsbCBub3QgYWxsb3dlZCk6XHJcbiAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGZvciBjb2xvciBpbiBjb2xvcnNcIj48L3NlbGVjdD48YnI+XHJcblxyXG4gICAgICAgICAgQ29sb3IgKG51bGwgYWxsb3dlZCk6XHJcbiAgICAgICAgICA8c3BhbiAgY2xhc3M9XCJudWxsYWJsZVwiPlxyXG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+LS0gY2hvb3NlIGNvbG9yIC0tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgPC9zcGFuPjxici8+XHJcblxyXG4gICAgICAgICAgQ29sb3IgZ3JvdXBlZCBieSBzaGFkZTpcclxuICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZ3JvdXAgYnkgY29sb3Iuc2hhZGUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxyXG4gICAgICAgICAgPC9zZWxlY3Q+PGJyLz5cclxuXHJcblxyXG4gICAgICAgICAgU2VsZWN0IDxhIGhyZWYgbmctY2xpY2s9XCJteUNvbG9yID0geyBuYW1lOidub3QgaW4gbGlzdCcsIHNoYWRlOiAnb3RoZXInIH1cIj5ib2d1czwvYT4uPGJyPlxyXG4gICAgICAgICAgPGhyLz5cclxuICAgICAgICAgIEN1cnJlbnRseSBzZWxlY3RlZDoge3sge3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9IH19XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyOnNvbGlkIDFweCBibGFjazsgaGVpZ2h0OjIwcHhcIlxyXG4gICAgICAgICAgICAgICBuZy1zdHlsZT1cInsnYmFja2dyb3VuZC1jb2xvcic6bXlDb2xvci5uYW1lfVwiPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxyXG4gICAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLW9wdGlvbnMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdyZWQnKTtcclxuICAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnbXlDb2xvcicpKS5maXJzdCgpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkuY3NzKCdzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdIG9wdGlvbicpKS5maXJzdCgpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgnYmxhY2snKTtcclxuICAgICAgICAgICBlbGVtZW50KGJ5LmNzcygnLm51bGxhYmxlIHNlbGVjdFtuZy1tb2RlbD1cIm15Q29sb3JcIl0nKSkuY2xpY2soKTtcclxuICAgICAgICAgICBlbGVtZW50LmFsbChieS5jc3MoJy5udWxsYWJsZSBzZWxlY3RbbmctbW9kZWw9XCJteUNvbG9yXCJdIG9wdGlvbicpKS5maXJzdCgpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygne3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9JykpLmdldFRleHQoKSkudG9NYXRjaCgnbnVsbCcpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgPC9maWxlPlxyXG4gICAgPC9leGFtcGxlPlxyXG4gKi9cclxuXHJcbnZhciBuZ09wdGlvbnNEaXJlY3RpdmUgPSB2YWx1ZUZuKHtcclxuICByZXN0cmljdDogJ0EnLFxyXG4gIHRlcm1pbmFsOiB0cnVlXHJcbn0pO1xyXG5cclxuLy8ganNoaW50IG1heGxlbjogZmFsc2VcclxudmFyIHNlbGVjdERpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCAnJHBhcnNlJywgZnVuY3Rpb24oJGNvbXBpbGUsICAgJHBhcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLzAwMDAxMTExMTExMTExMDAwMDAwMDAwMDAyMjIyMjIyMjIyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMzMzMzMzMzMzMzAwMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0NDQ0NDQ0MDAwMDAwMDAwNTU1NTU1NTU1NTU1NTU1MDAwMDAwMDY2NjY2NjY2NjY2NjY2NjAwMDAwMDAwMDAwMDAwMDc3Nzc3Nzc3NzcwMDAwMDAwMDAwMDAwMDAwMDAwODg4ODg4ODg4OFxyXG4gIHZhciBOR19PUFRJT05TX1JFR0VYUCA9IC9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC8sXHJcbiAgICAgIG51bGxNb2RlbEN0cmwgPSB7JHNldFZpZXdWYWx1ZTogbm9vcH07XHJcbi8vIGpzaGludCBtYXhsZW46IDEwMFxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgIHJlcXVpcmU6IFsnc2VsZWN0JywgJz9uZ01vZGVsJ10sXHJcbiAgICBjb250cm9sbGVyOiBbJyRlbGVtZW50JywgJyRzY29wZScsICckYXR0cnMnLCBmdW5jdGlvbigkZWxlbWVudCwgJHNjb3BlLCAkYXR0cnMpIHtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgb3B0aW9uc01hcCA9IHt9LFxyXG4gICAgICAgICAgbmdNb2RlbEN0cmwgPSBudWxsTW9kZWxDdHJsLFxyXG4gICAgICAgICAgbnVsbE9wdGlvbixcclxuICAgICAgICAgIHVua25vd25PcHRpb247XHJcblxyXG5cclxuICAgICAgc2VsZi5kYXRhYm91bmQgPSAkYXR0cnMubmdNb2RlbDtcclxuXHJcblxyXG4gICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbihuZ01vZGVsQ3RybF8sIG51bGxPcHRpb25fLCB1bmtub3duT3B0aW9uXykge1xyXG4gICAgICAgIG5nTW9kZWxDdHJsID0gbmdNb2RlbEN0cmxfO1xyXG4gICAgICAgIG51bGxPcHRpb24gPSBudWxsT3B0aW9uXztcclxuICAgICAgICB1bmtub3duT3B0aW9uID0gdW5rbm93bk9wdGlvbl87XHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgc2VsZi5hZGRPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KHZhbHVlLCAnXCJvcHRpb24gdmFsdWVcIicpO1xyXG4gICAgICAgIG9wdGlvbnNNYXBbdmFsdWVdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgICRlbGVtZW50LnZhbCh2YWx1ZSk7XHJcbiAgICAgICAgICBpZiAodW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgdW5rbm93bk9wdGlvbi5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM4MTQ1OVxyXG4gICAgICAgIC8vIEFkZGluZyBhbiA8b3B0aW9uIHNlbGVjdGVkPVwic2VsZWN0ZWRcIj4gZWxlbWVudCB0byBhIDxzZWxlY3QgcmVxdWlyZWQ9XCJyZXF1aXJlZFwiPiBzaG91bGRcclxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHNlbGVjdCB0aGUgbmV3IGVsZW1lbnRcclxuICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50WzBdLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgZWxlbWVudFswXS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuXHJcbiAgICAgIHNlbGYucmVtb3ZlT3B0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNPcHRpb24odmFsdWUpKSB7XHJcbiAgICAgICAgICBkZWxldGUgb3B0aW9uc01hcFt2YWx1ZV07XHJcbiAgICAgICAgICBpZiAobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJVbmtub3duT3B0aW9uKHZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgc2VsZi5yZW5kZXJVbmtub3duT3B0aW9uID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgdmFyIHVua25vd25WYWwgPSAnPyAnICsgaGFzaEtleSh2YWwpICsgJyA/JztcclxuICAgICAgICB1bmtub3duT3B0aW9uLnZhbCh1bmtub3duVmFsKTtcclxuICAgICAgICAkZWxlbWVudC5wcmVwZW5kKHVua25vd25PcHRpb24pO1xyXG4gICAgICAgICRlbGVtZW50LnZhbCh1bmtub3duVmFsKTtcclxuICAgICAgICB1bmtub3duT3B0aW9uLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7IC8vIG5lZWRlZCBmb3IgSUVcclxuICAgICAgfTtcclxuXHJcblxyXG4gICAgICBzZWxmLmhhc09wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnNNYXAuaGFzT3duUHJvcGVydHkodmFsdWUpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBkaXNhYmxlIHVua25vd24gb3B0aW9uIHNvIHRoYXQgd2UgZG9uJ3QgZG8gd29yayB3aGVuIHRoZSB3aG9sZSBzZWxlY3QgaXMgYmVpbmcgZGVzdHJveWVkXHJcbiAgICAgICAgc2VsZi5yZW5kZXJVbmtub3duT3B0aW9uID0gbm9vcDtcclxuICAgICAgfSk7XHJcbiAgICB9XSxcclxuXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcclxuICAgICAgLy8gaWYgbmdNb2RlbCBpcyBub3QgZGVmaW5lZCwgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZ1xyXG4gICAgICBpZiAoIWN0cmxzWzFdKSByZXR1cm47XHJcblxyXG4gICAgICB2YXIgc2VsZWN0Q3RybCA9IGN0cmxzWzBdLFxyXG4gICAgICAgICAgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXSxcclxuICAgICAgICAgIG11bHRpcGxlID0gYXR0ci5tdWx0aXBsZSxcclxuICAgICAgICAgIG9wdGlvbnNFeHAgPSBhdHRyLm5nT3B0aW9ucyxcclxuICAgICAgICAgIG51bGxPcHRpb24gPSBmYWxzZSwgLy8gaWYgZmFsc2UsIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBzZWxlY3QgaXQgKHVzZWQgYnkgbmdPcHRpb25zKVxyXG4gICAgICAgICAgZW1wdHlPcHRpb24sXHJcbiAgICAgICAgICByZW5kZXJTY2hlZHVsZWQgPSBmYWxzZSxcclxuICAgICAgICAgIC8vIHdlIGNhbid0IGp1c3QganFMaXRlKCc8b3B0aW9uPicpIHNpbmNlIGpxTGl0ZSBpcyBub3Qgc21hcnQgZW5vdWdoXHJcbiAgICAgICAgICAvLyB0byBjcmVhdGUgaXQgaW4gPHNlbGVjdD4gYW5kIElFIGJhcmZzIG90aGVyd2lzZS5cclxuICAgICAgICAgIG9wdGlvblRlbXBsYXRlID0ganFMaXRlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKSxcclxuICAgICAgICAgIG9wdEdyb3VwVGVtcGxhdGUgPWpxTGl0ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRncm91cCcpKSxcclxuICAgICAgICAgIHVua25vd25PcHRpb24gPSBvcHRpb25UZW1wbGF0ZS5jbG9uZSgpO1xyXG5cclxuICAgICAgLy8gZmluZCBcIm51bGxcIiBvcHRpb25cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGNoaWxkcmVuID0gZWxlbWVudC5jaGlsZHJlbigpLCBpaSA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICBpZiAoY2hpbGRyZW5baV0udmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICBlbXB0eU9wdGlvbiA9IG51bGxPcHRpb24gPSBjaGlsZHJlbi5lcShpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgc2VsZWN0Q3RybC5pbml0KG5nTW9kZWxDdHJsLCBudWxsT3B0aW9uLCB1bmtub3duT3B0aW9uKTtcclxuXHJcbiAgICAgIC8vIHJlcXVpcmVkIHZhbGlkYXRvclxyXG4gICAgICBpZiAobXVsdGlwbGUpIHtcclxuICAgICAgICBuZ01vZGVsQ3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICByZXR1cm4gIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAob3B0aW9uc0V4cCkgc2V0dXBBc09wdGlvbnMoc2NvcGUsIGVsZW1lbnQsIG5nTW9kZWxDdHJsKTtcclxuICAgICAgZWxzZSBpZiAobXVsdGlwbGUpIHNldHVwQXNNdWx0aXBsZShzY29wZSwgZWxlbWVudCwgbmdNb2RlbEN0cmwpO1xyXG4gICAgICBlbHNlIHNldHVwQXNTaW5nbGUoc2NvcGUsIGVsZW1lbnQsIG5nTW9kZWxDdHJsLCBzZWxlY3RDdHJsKTtcclxuXHJcblxyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldHVwQXNTaW5nbGUoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIG5nTW9kZWxDdHJsLCBzZWxlY3RDdHJsKSB7XHJcbiAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHZpZXdWYWx1ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XHJcblxyXG4gICAgICAgICAgaWYgKHNlbGVjdEN0cmwuaGFzT3B0aW9uKHZpZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKHVua25vd25PcHRpb24ucGFyZW50KCkpIHVua25vd25PcHRpb24ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQudmFsKHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh2aWV3VmFsdWUgPT09ICcnKSBlbXB0eU9wdGlvbi5wcm9wKCdzZWxlY3RlZCcsIHRydWUpOyAvLyB0byBtYWtlIElFOSBoYXBweVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZpZXdWYWx1ZSkgJiYgZW1wdHlPcHRpb24pIHtcclxuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LnZhbCgnJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5yZW5kZXJVbmtub3duT3B0aW9uKHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHVua25vd25PcHRpb24ucGFyZW50KCkpIHVua25vd25PcHRpb24ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoc2VsZWN0RWxlbWVudC52YWwoKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0dXBBc011bHRpcGxlKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBjdHJsKSB7XHJcbiAgICAgICAgdmFyIGxhc3RWaWV3O1xyXG4gICAgICAgIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGl0ZW1zID0gbmV3IEhhc2hNYXAoY3RybC4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgIGZvckVhY2goc2VsZWN0RWxlbWVudC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24ob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGlzRGVmaW5lZChpdGVtcy5nZXQob3B0aW9uLnZhbHVlKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyB3ZSBoYXZlIHRvIGRvIGl0IG9uIGVhY2ggd2F0Y2ggc2luY2UgbmdNb2RlbCB3YXRjaGVzIHJlZmVyZW5jZSwgYnV0XHJcbiAgICAgICAgLy8gd2UgbmVlZCB0byB3b3JrIG9mIGFuIGFycmF5LCBzbyB3ZSBuZWVkIHRvIHNlZSBpZiBhbnl0aGluZyB3YXMgaW5zZXJ0ZWQvcmVtb3ZlZFxyXG4gICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBzZWxlY3RNdWx0aXBsZVdhdGNoKCkge1xyXG4gICAgICAgICAgaWYgKCFlcXVhbHMobGFzdFZpZXcsIGN0cmwuJHZpZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgbGFzdFZpZXcgPSBzaGFsbG93Q29weShjdHJsLiR2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgICBjdHJsLiRyZW5kZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2VsZWN0RWxlbWVudC5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBmb3JFYWNoKHNlbGVjdEVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xyXG4gICAgICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5LnB1c2gob3B0aW9uLnZhbHVlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdHJsLiRzZXRWaWV3VmFsdWUoYXJyYXkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldHVwQXNPcHRpb25zKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBjdHJsKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoO1xyXG5cclxuICAgICAgICBpZiAoIShtYXRjaCA9IG9wdGlvbnNFeHAubWF0Y2goTkdfT1BUSU9OU19SRUdFWFApKSkge1xyXG4gICAgICAgICAgdGhyb3cgbmdPcHRpb25zTWluRXJyKCdpZXhwJyxcclxuICAgICAgICAgICAgXCJFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgXCIgK1xyXG4gICAgICAgICAgICBcIidfc2VsZWN0XyAoYXMgX2xhYmVsXyk/IGZvciAoX2tleV8sKT9fdmFsdWVfIGluIF9jb2xsZWN0aW9uXydcIiArXHJcbiAgICAgICAgICAgIFwiIGJ1dCBnb3QgJ3swfScuIEVsZW1lbnQ6IHsxfVwiLFxyXG4gICAgICAgICAgICBvcHRpb25zRXhwLCBzdGFydGluZ1RhZyhzZWxlY3RFbGVtZW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGlzcGxheUZuID0gJHBhcnNlKG1hdGNoWzJdIHx8IG1hdGNoWzFdKSxcclxuICAgICAgICAgICAgdmFsdWVOYW1lID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNl0sXHJcbiAgICAgICAgICAgIHNlbGVjdEFzID0gLyBhcyAvLnRlc3QobWF0Y2hbMF0pICYmIG1hdGNoWzFdLFxyXG4gICAgICAgICAgICBzZWxlY3RBc0ZuID0gc2VsZWN0QXMgPyAkcGFyc2Uoc2VsZWN0QXMpIDogbnVsbCxcclxuICAgICAgICAgICAga2V5TmFtZSA9IG1hdGNoWzVdLFxyXG4gICAgICAgICAgICBncm91cEJ5Rm4gPSAkcGFyc2UobWF0Y2hbM10gfHwgJycpLFxyXG4gICAgICAgICAgICB2YWx1ZUZuID0gJHBhcnNlKG1hdGNoWzJdID8gbWF0Y2hbMV0gOiB2YWx1ZU5hbWUpLFxyXG4gICAgICAgICAgICB2YWx1ZXNGbiA9ICRwYXJzZShtYXRjaFs3XSksXHJcbiAgICAgICAgICAgIHRyYWNrID0gbWF0Y2hbOF0sXHJcbiAgICAgICAgICAgIHRyYWNrRm4gPSB0cmFjayA/ICRwYXJzZShtYXRjaFs4XSkgOiBudWxsLFxyXG4gICAgICAgICAgICB0cmFja0tleXNDYWNoZSA9IHt9LFxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGFuIGFycmF5IG9mIGFycmF5IG9mIGV4aXN0aW5nIG9wdGlvbiBncm91cHMgaW4gRE9NLlxyXG4gICAgICAgICAgICAvLyBXZSB0cnkgdG8gcmV1c2UgdGhlc2UgaWYgcG9zc2libGVcclxuICAgICAgICAgICAgLy8gLSBvcHRpb25Hcm91cHNDYWNoZVswXSBpcyB0aGUgb3B0aW9ucyB3aXRoIG5vIG9wdGlvbiBncm91cFxyXG4gICAgICAgICAgICAvLyAtIG9wdGlvbkdyb3Vwc0NhY2hlWz9dWzBdIGlzIHRoZSBwYXJlbnQ6IGVpdGhlciB0aGUgU0VMRUNUIG9yIE9QVEdST1VQIGVsZW1lbnRcclxuICAgICAgICAgICAgb3B0aW9uR3JvdXBzQ2FjaGUgPSBbW3tlbGVtZW50OiBzZWxlY3RFbGVtZW50LCBsYWJlbDonJ31dXSxcclxuICAgICAgICAgICAgLy9yZS11c2FibGUgb2JqZWN0IHRvIHJlcHJlc2VudCBvcHRpb24ncyBsb2NhbHNcclxuICAgICAgICAgICAgbG9jYWxzID0ge307XHJcblxyXG4gICAgICAgIGlmIChudWxsT3B0aW9uKSB7XHJcbiAgICAgICAgICAvLyBjb21waWxlIHRoZSBlbGVtZW50IHNpbmNlIHRoZXJlIG1pZ2h0IGJlIGJpbmRpbmdzIGluIGl0XHJcbiAgICAgICAgICAkY29tcGlsZShudWxsT3B0aW9uKShzY29wZSk7XHJcblxyXG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjbGFzcywgd2hpY2ggaXMgYWRkZWQgYXV0b21hdGljYWxseSBiZWNhdXNlIHdlIHJlY29tcGlsZSB0aGUgZWxlbWVudCBhbmQgaXRcclxuICAgICAgICAgIC8vIGJlY29tZXMgdGhlIGNvbXBpbGF0aW9uIHJvb3RcclxuICAgICAgICAgIG51bGxPcHRpb24ucmVtb3ZlQ2xhc3MoJ25nLXNjb3BlJyk7XHJcblxyXG4gICAgICAgICAgLy8gd2UgbmVlZCB0byByZW1vdmUgaXQgYmVmb3JlIGNhbGxpbmcgc2VsZWN0RWxlbWVudC5lbXB0eSgpIGJlY2F1c2Ugb3RoZXJ3aXNlIElFIHdpbGxcclxuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbGFiZWwgZnJvbSB0aGUgZWxlbWVudC4gd3RmP1xyXG4gICAgICAgICAgbnVsbE9wdGlvbi5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIGNvbnRlbnRzLCB3ZSdsbCBhZGQgd2hhdCdzIG5lZWRlZCBiYXNlZCBvbiB0aGUgbW9kZWxcclxuICAgICAgICBzZWxlY3RFbGVtZW50LmVtcHR5KCk7XHJcblxyXG4gICAgICAgIHNlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsIHNlbGVjdGlvbkNoYW5nZWQpO1xyXG5cclxuICAgICAgICBjdHJsLiRyZW5kZXIgPSByZW5kZXI7XHJcblxyXG4gICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24odmFsdWVzRm4sIHNjaGVkdWxlUmVuZGVyaW5nKTtcclxuICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGdldExhYmVscywgc2NoZWR1bGVSZW5kZXJpbmcpO1xyXG5cclxuICAgICAgICBpZiAobXVsdGlwbGUpIHtcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7IHJldHVybiBjdHJsLiRtb2RlbFZhbHVlOyB9LCBzY2hlZHVsZVJlbmRlcmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FsbEV4cHJlc3Npb24oZXhwckZuLCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICBsb2NhbHNbdmFsdWVOYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgaWYgKGtleU5hbWUpIGxvY2Fsc1trZXlOYW1lXSA9IGtleTtcclxuICAgICAgICAgIHJldHVybiBleHByRm4oc2NvcGUsIGxvY2Fscyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3Rpb25DaGFuZ2VkKCkge1xyXG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHZhbHVlc0ZuKHNjb3BlKSB8fCBbXTtcclxuICAgICAgICAgICAgdmFyIHZpZXdWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgdmlld1ZhbHVlID0gW107XHJcbiAgICAgICAgICAgICAgZm9yRWFjaChzZWxlY3RFbGVtZW50LnZhbCgpLCBmdW5jdGlvbihzZWxlY3RlZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZEtleSA9IHRyYWNrRm4gPyB0cmFja0tleXNDYWNoZVtzZWxlY3RlZEtleV0gOiBzZWxlY3RlZEtleTtcclxuICAgICAgICAgICAgICAgIHZpZXdWYWx1ZS5wdXNoKGdldFZpZXdWYWx1ZShzZWxlY3RlZEtleSwgY29sbGVjdGlvbltzZWxlY3RlZEtleV0pKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRLZXkgPSB0cmFja0ZuID8gdHJhY2tLZXlzQ2FjaGVbc2VsZWN0RWxlbWVudC52YWwoKV0gOiBzZWxlY3RFbGVtZW50LnZhbCgpO1xyXG4gICAgICAgICAgICAgIHZpZXdWYWx1ZSA9IGdldFZpZXdWYWx1ZShzZWxlY3RlZEtleSwgY29sbGVjdGlvbltzZWxlY3RlZEtleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZSh2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgICByZW5kZXIoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Vmlld1ZhbHVlKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgIGlmIChrZXkgPT09ICc/Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHZpZXdWYWx1ZUZuID0gc2VsZWN0QXNGbiA/IHNlbGVjdEFzRm4gOiB2YWx1ZUZuO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb24odmlld1ZhbHVlRm4sIGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0TGFiZWxzKCkge1xyXG4gICAgICAgICAgdmFyIHZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKTtcclxuICAgICAgICAgIHZhciB0b0Rpc3BsYXk7XHJcbiAgICAgICAgICBpZiAodmFsdWVzICYmIGlzQXJyYXkodmFsdWVzKSkge1xyXG4gICAgICAgICAgICB0b0Rpc3BsYXkgPSBuZXcgQXJyYXkodmFsdWVzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHZhbHVlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgdG9EaXNwbGF5W2ldID0gY2FsbEV4cHJlc3Npb24oZGlzcGxheUZuLCBpLCB2YWx1ZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0b0Rpc3BsYXk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlcykge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBBZGQgYSB0ZXN0IGZvciB0aGlzIGNhc2VcclxuICAgICAgICAgICAgdG9EaXNwbGF5ID0ge307XHJcbiAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gdmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgdG9EaXNwbGF5W3Byb3BdID0gY2FsbEV4cHJlc3Npb24oZGlzcGxheUZuLCBwcm9wLCB2YWx1ZXNbcHJvcF0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHRvRGlzcGxheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUlzU2VsZWN0ZWRGbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAgIHZhciBzZWxlY3RlZFNldDtcclxuICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBpZiAodHJhY2tGbiAmJiBpc0FycmF5KHZpZXdWYWx1ZSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTZXQgPSBuZXcgSGFzaE1hcChbXSk7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgdHJhY2tJbmRleCA9IDA7IHRyYWNrSW5kZXggPCB2aWV3VmFsdWUubGVuZ3RoOyB0cmFja0luZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIC8vIHRyYWNraW5nIGJ5IGtleVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTZXQucHV0KGNhbGxFeHByZXNzaW9uKHRyYWNrRm4sIG51bGwsIHZpZXdWYWx1ZVt0cmFja0luZGV4XSksIHRydWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZWxlY3RlZFNldCA9IG5ldyBIYXNoTWFwKHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBpZiAodHJhY2tGbikge1xyXG4gICAgICAgICAgICB2aWV3VmFsdWUgPSBjYWxsRXhwcmVzc2lvbih0cmFja0ZuLCBudWxsLCB2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBpc1NlbGVjdGVkKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGNvbXBhcmVWYWx1ZUZuO1xyXG4gICAgICAgICAgICBpZiAodHJhY2tGbikge1xyXG4gICAgICAgICAgICAgIGNvbXBhcmVWYWx1ZUZuID0gdHJhY2tGbjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RBc0ZuKSB7XHJcbiAgICAgICAgICAgICAgY29tcGFyZVZhbHVlRm4gPSBzZWxlY3RBc0ZuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbXBhcmVWYWx1ZUZuID0gdmFsdWVGbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChzZWxlY3RlZFNldC5yZW1vdmUoY2FsbEV4cHJlc3Npb24oY29tcGFyZVZhbHVlRm4sIGtleSwgdmFsdWUpKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHZpZXdWYWx1ZSA9PT0gY2FsbEV4cHJlc3Npb24oY29tcGFyZVZhbHVlRm4sIGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2NoZWR1bGVSZW5kZXJpbmcoKSB7XHJcbiAgICAgICAgICBpZiAoIXJlbmRlclNjaGVkdWxlZCkge1xyXG4gICAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QocmVuZGVyKTtcclxuICAgICAgICAgICAgcmVuZGVyU2NoZWR1bGVkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbmV3IGxhYmVsTWFwIGlzIGNyZWF0ZWQgd2l0aCBlYWNoIHJlbmRlci5cclxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgZWFjaCBleGlzdGluZyBvcHRpb24gd2l0aCBhZGRlZD1mYWxzZSxcclxuICAgICAgICAgKiBhbmQgZWFjaCBuZXcgb3B0aW9uIHdpdGggYWRkZWQ9dHJ1ZS5cclxuICAgICAgICAgKiAtIExhYmVscyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhpcyBtZXRob2QgdHdpY2UsXHJcbiAgICAgICAgICogKG9uY2Ugd2l0aCBhZGRlZD10cnVlIGFuZCBvbmNlIHdpdGggYWRkZWQ9ZmFsc2UpIHdpbGwgZW5kIHVwIHdpdGggYSB2YWx1ZSBvZiAwLCBhbmRcclxuICAgICAgICAgKiB3aWxsIGNhdXNlIG5vIGNoYW5nZSB0byBoYXBwZW4gdG8gdGhlIGNvcnJlc3BvbmRpbmcgb3B0aW9uLlxyXG4gICAgICAgICAqIC0gTGFiZWxzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGlzIG1ldGhvZCBvbmx5IG9uY2Ugd2l0aCBhZGRlZD1mYWxzZSB3aWxsIGVuZCB1cCB3aXRoIGFcclxuICAgICAgICAgKiB2YWx1ZSBvZiAtMSBhbmQgd2lsbCBldmVudHVhbGx5IGJlIHBhc3NlZCB0byBzZWxlY3RDdHJsLnJlbW92ZU9wdGlvbigpXHJcbiAgICAgICAgICogLSBMYWJlbHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoaXMgbWV0aG9kIG9ubHkgb25jZSB3aXRoIGFkZGVkPXRydWUgd2lsbCBlbmQgdXAgd2l0aCBhXHJcbiAgICAgICAgICogdmFsdWUgb2YgMSBhbmQgd2lsbCBldmVudHVhbGx5IGJlIHBhc3NlZCB0byBzZWxlY3RDdHJsLmFkZE9wdGlvbigpXHJcbiAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVMYWJlbE1hcChsYWJlbE1hcCwgbGFiZWwsIGFkZGVkKSB7XHJcbiAgICAgICAgICBsYWJlbE1hcFtsYWJlbF0gPSBsYWJlbE1hcFtsYWJlbF0gfHwgMDtcclxuICAgICAgICAgIGxhYmVsTWFwW2xhYmVsXSArPSAoYWRkZWQgPyAxIDogLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgICAgICAgcmVuZGVyU2NoZWR1bGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgLy8gVGVtcG9yYXJ5IGxvY2F0aW9uIGZvciB0aGUgb3B0aW9uIGdyb3VwcyBiZWZvcmUgd2UgcmVuZGVyIHRoZW1cclxuICAgICAgICAgIHZhciBvcHRpb25Hcm91cHMgPSB7Jyc6W119LFxyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZXMgPSBbJyddLFxyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZSxcclxuICAgICAgICAgICAgICBvcHRpb25Hcm91cCxcclxuICAgICAgICAgICAgICBvcHRpb24sXHJcbiAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQsIGV4aXN0aW5nT3B0aW9ucywgZXhpc3RpbmdPcHRpb24sXHJcbiAgICAgICAgICAgICAgdmlld1ZhbHVlID0gY3RybC4kdmlld1ZhbHVlLFxyXG4gICAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKSB8fCBbXSxcclxuICAgICAgICAgICAgICBrZXlzID0ga2V5TmFtZSA/IHNvcnRlZEtleXModmFsdWVzKSA6IHZhbHVlcyxcclxuICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgZ3JvdXBMZW5ndGgsIGxlbmd0aCxcclxuICAgICAgICAgICAgICBncm91cEluZGV4LCBpbmRleCxcclxuICAgICAgICAgICAgICBsYWJlbE1hcCA9IHt9LFxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkLFxyXG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSBjcmVhdGVJc1NlbGVjdGVkRm4odmlld1ZhbHVlKSxcclxuICAgICAgICAgICAgICBhbnlTZWxlY3RlZCA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgIGxhc3RFbGVtZW50LFxyXG4gICAgICAgICAgICAgIGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgbGFiZWwsXHJcbiAgICAgICAgICAgICAgb3B0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgdHJhY2tLZXlzQ2FjaGUgPSB7fTtcclxuXHJcbiAgICAgICAgICAvLyBXZSBub3cgYnVpbGQgdXAgdGhlIGxpc3Qgb2Ygb3B0aW9ucyB3ZSBuZWVkICh3ZSBtZXJnZSBsYXRlcilcclxuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBsZW5ndGggPSBrZXlzLmxlbmd0aCwgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAga2V5ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIGlmIChrZXlOYW1lKSB7XHJcbiAgICAgICAgICAgICAga2V5ID0ga2V5c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICckJykgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZXNba2V5XTtcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZSA9IGNhbGxFeHByZXNzaW9uKGdyb3VwQnlGbiwga2V5LCB2YWx1ZSkgfHwgJyc7XHJcbiAgICAgICAgICAgIGlmICghKG9wdGlvbkdyb3VwID0gb3B0aW9uR3JvdXBzW29wdGlvbkdyb3VwTmFtZV0pKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9uR3JvdXAgPSBvcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXSA9IFtdO1xyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3VwTmFtZXMucHVzaChvcHRpb25Hcm91cE5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZCA9IGlzU2VsZWN0ZWQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIGFueVNlbGVjdGVkID0gYW55U2VsZWN0ZWQgfHwgc2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICBsYWJlbCA9IGNhbGxFeHByZXNzaW9uKGRpc3BsYXlGbiwga2V5LCB2YWx1ZSk7IC8vIHdoYXQgd2lsbCBiZSBzZWVuIGJ5IHRoZSB1c2VyXHJcblxyXG4gICAgICAgICAgICAvLyBkb2luZyBkaXNwbGF5Rm4oc2NvcGUsIGxvY2FscykgfHwgJycgb3ZlcndyaXRlcyB6ZXJvIHZhbHVlc1xyXG4gICAgICAgICAgICBsYWJlbCA9IGlzRGVmaW5lZChsYWJlbCkgPyBsYWJlbCA6ICcnO1xyXG4gICAgICAgICAgICBvcHRpb25JZCA9IHRyYWNrRm4gPyB0cmFja0ZuKHNjb3BlLCBsb2NhbHMpIDogKGtleU5hbWUgPyBrZXlzW2luZGV4XSA6IGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKHRyYWNrRm4pIHtcclxuICAgICAgICAgICAgICB0cmFja0tleXNDYWNoZVtvcHRpb25JZF0gPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3VwLnB1c2goe1xyXG4gICAgICAgICAgICAgIC8vIGVpdGhlciB0aGUgaW5kZXggaW50byBhcnJheSBvciBrZXkgZnJvbSBvYmplY3RcclxuICAgICAgICAgICAgICBpZDogb3B0aW9uSWQsXHJcbiAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsLFxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZCAgICAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGJlIHNlbGVjdGVkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCFtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBpZiAobnVsbE9wdGlvbiB8fCB2aWV3VmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAvLyBpbnNlcnQgbnVsbCBvcHRpb24gaWYgd2UgaGF2ZSBhIHBsYWNlaG9sZGVyLCBvciB0aGUgbW9kZWwgaXMgbnVsbFxyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3Vwc1snJ10udW5zaGlmdCh7aWQ6JycsIGxhYmVsOicnLCBzZWxlY3RlZDohYW55U2VsZWN0ZWR9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghYW55U2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAvLyBvcHRpb24gY291bGQgbm90IGJlIGZvdW5kLCB3ZSBoYXZlIHRvIGluc2VydCB0aGUgdW5kZWZpbmVkIGl0ZW1cclxuICAgICAgICAgICAgICBvcHRpb25Hcm91cHNbJyddLnVuc2hpZnQoe2lkOic/JywgbGFiZWw6JycsIHNlbGVjdGVkOnRydWV9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIE5vdyB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgbGlzdCBvZiBET00gbm9kZXMgdG8gbWF0Y2ggdGhlIG9wdGlvbkdyb3VwcyB3ZSBjb21wdXRlZCBhYm92ZVxyXG4gICAgICAgICAgZm9yIChncm91cEluZGV4ID0gMCwgZ3JvdXBMZW5ndGggPSBvcHRpb25Hcm91cE5hbWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgZ3JvdXBJbmRleCA8IGdyb3VwTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICBncm91cEluZGV4KyspIHtcclxuICAgICAgICAgICAgLy8gY3VycmVudCBvcHRpb24gZ3JvdXAgbmFtZSBvciAnJyBpZiBubyBncm91cFxyXG4gICAgICAgICAgICBvcHRpb25Hcm91cE5hbWUgPSBvcHRpb25Hcm91cE5hbWVzW2dyb3VwSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgLy8gbGlzdCBvZiBvcHRpb25zIGZvciB0aGF0IGdyb3VwLiAoZmlyc3QgaXRlbSBoYXMgdGhlIHBhcmVudClcclxuICAgICAgICAgICAgb3B0aW9uR3JvdXAgPSBvcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25Hcm91cHNDYWNoZS5sZW5ndGggPD0gZ3JvdXBJbmRleCkge1xyXG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZ3JvdyB0aGUgb3B0aW9uR3JvdXBzXHJcbiAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBvcHRHcm91cFRlbXBsYXRlLmNsb25lKCkuYXR0cignbGFiZWwnLCBvcHRpb25Hcm91cE5hbWUpLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IG9wdGlvbkdyb3VwLmxhYmVsXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMgPSBbZXhpc3RpbmdQYXJlbnRdO1xyXG4gICAgICAgICAgICAgIG9wdGlvbkdyb3Vwc0NhY2hlLnB1c2goZXhpc3RpbmdPcHRpb25zKTtcclxuICAgICAgICAgICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZChleGlzdGluZ1BhcmVudC5lbGVtZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMgPSBvcHRpb25Hcm91cHNDYWNoZVtncm91cEluZGV4XTtcclxuICAgICAgICAgICAgICBleGlzdGluZ1BhcmVudCA9IGV4aXN0aW5nT3B0aW9uc1swXTsgIC8vIGVpdGhlciBTRUxFQ1QgKG5vIGdyb3VwKSBvciBPUFRHUk9VUCBlbGVtZW50XHJcblxyXG4gICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgT1BUR1JPVVAgbGFiZWwgaWYgbm90IHRoZSBzYW1lLlxyXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ1BhcmVudC5sYWJlbCAhPSBvcHRpb25Hcm91cE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nUGFyZW50LmVsZW1lbnQuYXR0cignbGFiZWwnLCBleGlzdGluZ1BhcmVudC5sYWJlbCA9IG9wdGlvbkdyb3VwTmFtZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsYXN0RWxlbWVudCA9IG51bGw7ICAvLyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nXHJcbiAgICAgICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvcHRpb25Hcm91cC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9uID0gb3B0aW9uR3JvdXBbaW5kZXhdO1xyXG4gICAgICAgICAgICAgIGlmICgoZXhpc3RpbmdPcHRpb24gPSBleGlzdGluZ09wdGlvbnNbaW5kZXggKyAxXSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJldXNlIGVsZW1lbnRzXHJcbiAgICAgICAgICAgICAgICBsYXN0RWxlbWVudCA9IGV4aXN0aW5nT3B0aW9uLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdPcHRpb24ubGFiZWwgIT09IG9wdGlvbi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICB1cGRhdGVMYWJlbE1hcChsYWJlbE1hcCwgZXhpc3RpbmdPcHRpb24ubGFiZWwsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgdXBkYXRlTGFiZWxNYXAobGFiZWxNYXAsIG9wdGlvbi5sYWJlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnRleHQoZXhpc3RpbmdPcHRpb24ubGFiZWwgPSBvcHRpb24ubGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC5wcm9wKCdsYWJlbCcsIGV4aXN0aW5nT3B0aW9uLmxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ09wdGlvbi5pZCAhPT0gb3B0aW9uLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LnZhbChleGlzdGluZ09wdGlvbi5pZCA9IG9wdGlvbi5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBsYXN0RWxlbWVudC5wcm9wKCdzZWxlY3RlZCcpIHByb3ZpZGVkIGJ5IGpRdWVyeSBoYXMgc2lkZS1lZmZlY3RzXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEVsZW1lbnRbMF0uc2VsZWN0ZWQgIT09IG9wdGlvbi5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC5wcm9wKCdzZWxlY3RlZCcsIChleGlzdGluZ09wdGlvbi5zZWxlY3RlZCA9IG9wdGlvbi5zZWxlY3RlZCkpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobXNpZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlZSAjNzY5MlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBzZWxlY3RlZCBpdGVtIHdvdWxkbid0IHZpc3VhbGx5IHVwZGF0ZSBvbiBJRSB3aXRob3V0IHRoaXMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGVzdGVkIG9uIFdpbjc6IElFOSwgSUUxMCBhbmQgSUUxMS4gRnV0dXJlIElFcyBzaG91bGQgYmUgdGVzdGVkIGFzIHdlbGxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudC5wcm9wKCdzZWxlY3RlZCcsIGV4aXN0aW5nT3B0aW9uLnNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBncm93IGVsZW1lbnRzXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgaXQncyBhIG51bGwgb3B0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmlkID09PSAnJyAmJiBudWxsT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIHB1dCBiYWNrIHRoZSBwcmUtY29tcGlsZWQgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICBlbGVtZW50ID0gbnVsbE9wdGlvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSh2MS40LjIpIEJ1ZzogV2Ugc2hvdWxkIGJlIGFibGUgdG8gY2hhaW4gdGhlIG1ldGhvZCBjYWxscywgYnV0XHJcbiAgICAgICAgICAgICAgICAgIC8vIGluIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnkgb24gc29tZSBicm93c2VyIHRoZSAudGV4dCgpIHJldHVybnMgYSBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgLy8gcmF0aGVyIHRoZW4gdGhlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgIChlbGVtZW50ID0gb3B0aW9uVGVtcGxhdGUuY2xvbmUoKSlcclxuICAgICAgICAgICAgICAgICAgICAgIC52YWwob3B0aW9uLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnByb3AoJ3NlbGVjdGVkJywgb3B0aW9uLnNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NlbGVjdGVkJywgb3B0aW9uLnNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnByb3AoJ2xhYmVsJywgb3B0aW9uLmxhYmVsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRleHQob3B0aW9uLmxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleGlzdGluZ09wdGlvbnMucHVzaChleGlzdGluZ09wdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBvcHRpb24ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG9wdGlvbi5pZCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogb3B0aW9uLnNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUxhYmVsTWFwKGxhYmVsTWFwLCBvcHRpb24ubGFiZWwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmFmdGVyKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQYXJlbnQuZWxlbWVudC5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXN0RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgZXhjZXNzaXZlIE9QVElPTnMgaW4gYSBncm91cFxyXG4gICAgICAgICAgICBpbmRleCsrOyAvLyBpbmNyZW1lbnQgc2luY2UgdGhlIGV4aXN0aW5nT3B0aW9uc1swXSBpcyBwYXJlbnQgZWxlbWVudCBub3QgT1BUSU9OXHJcbiAgICAgICAgICAgIHdoaWxlIChleGlzdGluZ09wdGlvbnMubGVuZ3RoID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICBvcHRpb24gPSBleGlzdGluZ09wdGlvbnMucG9wKCk7XHJcbiAgICAgICAgICAgICAgdXBkYXRlTGFiZWxNYXAobGFiZWxNYXAsIG9wdGlvbi5sYWJlbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIG9wdGlvbi5lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyByZW1vdmUgYW55IGV4Y2Vzc2l2ZSBPUFRHUk9VUHMgZnJvbSBzZWxlY3RcclxuICAgICAgICAgIHdoaWxlIChvcHRpb25Hcm91cHNDYWNoZS5sZW5ndGggPiBncm91cEluZGV4KSB7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbGwgdGhlIGxhYmVscyBpbiB0aGUgb3B0aW9uIGdyb3VwXHJcbiAgICAgICAgICAgIG9wdGlvbkdyb3VwID0gb3B0aW9uR3JvdXBzQ2FjaGUucG9wKCk7XHJcbiAgICAgICAgICAgIGZvciAoaW5kZXggPSAxOyBpbmRleCA8IG9wdGlvbkdyb3VwLmxlbmd0aDsgKytpbmRleCkge1xyXG4gICAgICAgICAgICAgIHVwZGF0ZUxhYmVsTWFwKGxhYmVsTWFwLCBvcHRpb25Hcm91cFtpbmRleF0ubGFiZWwsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcHRpb25Hcm91cFswXS5lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZm9yRWFjaChsYWJlbE1hcCwgZnVuY3Rpb24oY291bnQsIGxhYmVsKSB7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICBzZWxlY3RDdHJsLmFkZE9wdGlvbihsYWJlbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5yZW1vdmVPcHRpb24obGFiZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59XTtcclxuXHJcbnZhciBvcHRpb25EaXJlY3RpdmUgPSBbJyRpbnRlcnBvbGF0ZScsIGZ1bmN0aW9uKCRpbnRlcnBvbGF0ZSkge1xyXG4gIHZhciBudWxsU2VsZWN0Q3RybCA9IHtcclxuICAgIGFkZE9wdGlvbjogbm9vcCxcclxuICAgIHJlbW92ZU9wdGlvbjogbm9vcFxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgcHJpb3JpdHk6IDEwMCxcclxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgaWYgKGlzVW5kZWZpbmVkKGF0dHIudmFsdWUpKSB7XHJcbiAgICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUoZWxlbWVudC50ZXh0KCksIHRydWUpO1xyXG4gICAgICAgIGlmICghaW50ZXJwb2xhdGVGbikge1xyXG4gICAgICAgICAgYXR0ci4kc2V0KCd2YWx1ZScsIGVsZW1lbnQudGV4dCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgIHZhciBzZWxlY3RDdHJsTmFtZSA9ICckc2VsZWN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHBhcmVudCA9IGVsZW1lbnQucGFyZW50KCksXHJcbiAgICAgICAgICAgIHNlbGVjdEN0cmwgPSBwYXJlbnQuZGF0YShzZWxlY3RDdHJsTmFtZSkgfHxcclxuICAgICAgICAgICAgICBwYXJlbnQucGFyZW50KCkuZGF0YShzZWxlY3RDdHJsTmFtZSk7IC8vIGluIGNhc2Ugd2UgYXJlIGluIG9wdGdyb3VwXHJcblxyXG4gICAgICAgIGlmICghc2VsZWN0Q3RybCB8fCAhc2VsZWN0Q3RybC5kYXRhYm91bmQpIHtcclxuICAgICAgICAgIHNlbGVjdEN0cmwgPSBudWxsU2VsZWN0Q3RybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbnRlcnBvbGF0ZUZuKSB7XHJcbiAgICAgICAgICBzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVXYXRjaEFjdGlvbihuZXdWYWwsIG9sZFZhbCkge1xyXG4gICAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgbmV3VmFsKTtcclxuICAgICAgICAgICAgaWYgKG9sZFZhbCAhPT0gbmV3VmFsKSB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0Q3RybC5yZW1vdmVPcHRpb24ob2xkVmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxlY3RDdHJsLmFkZE9wdGlvbihuZXdWYWwsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlbGVjdEN0cmwuYWRkT3B0aW9uKGF0dHIudmFsdWUsIGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNlbGVjdEN0cmwucmVtb3ZlT3B0aW9uKGF0dHIudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dO1xyXG5cclxudmFyIHN0eWxlRGlyZWN0aXZlID0gdmFsdWVGbih7XHJcbiAgcmVzdHJpY3Q6ICdFJyxcclxuICB0ZXJtaW5hbDogZmFsc2VcclxufSk7XHJcblxyXG52YXIgcmVxdWlyZWREaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xyXG4gICAgICBhdHRyLnJlcXVpcmVkID0gdHJ1ZTsgLy8gZm9yY2UgdHJ1dGh5IGluIGNhc2Ugd2UgYXJlIG9uIG5vbiBpbnB1dCBlbGVtZW50XHJcblxyXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLnJlcXVpcmVkID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuICFhdHRyLnJlcXVpcmVkIHx8ICFjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhdHRyLiRvYnNlcnZlKCdyZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxudmFyIHBhdHRlcm5EaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xyXG5cclxuICAgICAgdmFyIHJlZ2V4cCwgcGF0dGVybkV4cCA9IGF0dHIubmdQYXR0ZXJuIHx8IGF0dHIucGF0dGVybjtcclxuICAgICAgYXR0ci4kb2JzZXJ2ZSgncGF0dGVybicsIGZ1bmN0aW9uKHJlZ2V4KSB7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHJlZ2V4KSAmJiByZWdleC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICByZWdleCA9IG5ldyBSZWdFeHAoJ14nICsgcmVnZXggKyAnJCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlZ2V4ICYmICFyZWdleC50ZXN0KSB7XHJcbiAgICAgICAgICB0aHJvdyBtaW5FcnIoJ25nUGF0dGVybicpKCdub3JlZ2V4cCcsXHJcbiAgICAgICAgICAgICdFeHBlY3RlZCB7MH0gdG8gYmUgYSBSZWdFeHAgYnV0IHdhcyB7MX0uIEVsZW1lbnQ6IHsyfScsIHBhdHRlcm5FeHAsXHJcbiAgICAgICAgICAgIHJlZ2V4LCBzdGFydGluZ1RhZyhlbG0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlZ2V4cCA9IHJlZ2V4IHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucGF0dGVybiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IGlzVW5kZWZpbmVkKHJlZ2V4cCkgfHwgcmVnZXhwLnRlc3QodmFsdWUpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxudmFyIG1heGxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcclxuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XHJcblxyXG4gICAgICB2YXIgbWF4bGVuZ3RoID0gLTE7XHJcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21heGxlbmd0aCcsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGludFZhbCA9IGludCh2YWx1ZSk7XHJcbiAgICAgICAgbWF4bGVuZ3RoID0gaXNOYU4oaW50VmFsKSA/IC0xIDogaW50VmFsO1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heGxlbmd0aCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAobWF4bGVuZ3RoIDwgMCkgfHwgY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8ICh2aWV3VmFsdWUubGVuZ3RoIDw9IG1heGxlbmd0aCk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcbnZhciBtaW5sZW5ndGhEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xyXG5cclxuICAgICAgdmFyIG1pbmxlbmd0aCA9IDA7XHJcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21pbmxlbmd0aCcsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgbWlubGVuZ3RoID0gaW50KHZhbHVlKSB8fCAwO1xyXG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbmxlbmd0aCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgdmlld1ZhbHVlLmxlbmd0aCA+PSBtaW5sZW5ndGg7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcbiAgaWYgKHdpbmRvdy5hbmd1bGFyLmJvb3RzdHJhcCkge1xyXG4gICAgLy9Bbmd1bGFySlMgaXMgYWxyZWFkeSBsb2FkZWQsIHNvIHdlIGNhbiByZXR1cm4gaGVyZS4uLlxyXG4gICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IFRyaWVkIHRvIGxvYWQgYW5ndWxhciBtb3JlIHRoYW4gb25jZS4nKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vdHJ5IHRvIGJpbmQgdG8ganF1ZXJ5IG5vdyBzbyB0aGF0IG9uZSBjYW4gd3JpdGUganFMaXRlKGRvY3VtZW50KS5yZWFkeSgpXHJcbiAgLy9idXQgd2Ugd2lsbCByZWJpbmQgb24gYm9vdHN0cmFwIGFnYWluLlxyXG4gIGJpbmRKUXVlcnkoKTtcclxuXHJcbiAgcHVibGlzaEV4dGVybmFsQVBJKGFuZ3VsYXIpO1xyXG5cclxuICBqcUxpdGUoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhckluaXQoZG9jdW1lbnQsIGJvb3RzdHJhcCk7XHJcbiAgfSk7XHJcblxyXG59KSh3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbiF3aW5kb3cuYW5ndWxhci4kJGNzcCgpICYmIHdpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoJ2hlYWQnKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+QGNoYXJzZXQgXCJVVEYtOFwiO1tuZ1xcXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO308L3N0eWxlPicpO1xyXG4vKipcclxuICogQGxpY2Vuc2UgQW5ndWxhckpTIHYxLjMuMTRcclxuICogKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcclxuICogTGljZW5zZTogTUlUXHJcbiAqL1xyXG4oZnVuY3Rpb24od2luZG93LCBhbmd1bGFyLCB1bmRlZmluZWQpIHsndXNlIHN0cmljdCc7XHJcblxyXG52YXIgJHNhbml0aXplTWluRXJyID0gYW5ndWxhci4kJG1pbkVycignJHNhbml0aXplJyk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIG1vZHVsZVxyXG4gKiBAbmFtZSBuZ1Nhbml0aXplXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKlxyXG4gKiAjIG5nU2FuaXRpemVcclxuICpcclxuICogVGhlIGBuZ1Nhbml0aXplYCBtb2R1bGUgcHJvdmlkZXMgZnVuY3Rpb25hbGl0eSB0byBzYW5pdGl6ZSBIVE1MLlxyXG4gKlxyXG4gKlxyXG4gKiA8ZGl2IGRvYy1tb2R1bGUtY29tcG9uZW50cz1cIm5nU2FuaXRpemVcIj48L2Rpdj5cclxuICpcclxuICogU2VlIHtAbGluayBuZ1Nhbml0aXplLiRzYW5pdGl6ZSBgJHNhbml0aXplYH0gZm9yIHVzYWdlLlxyXG4gKi9cclxuXHJcbi8qXHJcbiAqIEhUTUwgUGFyc2VyIEJ5IE1pc2tvIEhldmVyeSAobWlza29AaGV2ZXJ5LmNvbSlcclxuICogYmFzZWQgb246ICBIVE1MIFBhcnNlciBCeSBKb2huIFJlc2lnIChlam9obi5vcmcpXHJcbiAqIE9yaWdpbmFsIGNvZGUgYnkgRXJpayBBcnZpZHNzb24sIE1vemlsbGEgUHVibGljIExpY2Vuc2VcclxuICogaHR0cDovL2VyaWsuZWFlLm5ldC9zaW1wbGVodG1scGFyc2VyL3NpbXBsZWh0bWxwYXJzZXIuanNcclxuICpcclxuICogLy8gVXNlIGxpa2Ugc286XHJcbiAqIGh0bWxQYXJzZXIoaHRtbFN0cmluZywge1xyXG4gKiAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMsIHVuYXJ5KSB7fSxcclxuICogICAgIGVuZDogZnVuY3Rpb24odGFnKSB7fSxcclxuICogICAgIGNoYXJzOiBmdW5jdGlvbih0ZXh0KSB7fSxcclxuICogICAgIGNvbW1lbnQ6IGZ1bmN0aW9uKHRleHQpIHt9XHJcbiAqIH0pO1xyXG4gKlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQG5nZG9jIHNlcnZpY2VcclxuICogQG5hbWUgJHNhbml0aXplXHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiAgIFRoZSBpbnB1dCBpcyBzYW5pdGl6ZWQgYnkgcGFyc2luZyB0aGUgSFRNTCBpbnRvIHRva2Vucy4gQWxsIHNhZmUgdG9rZW5zIChmcm9tIGEgd2hpdGVsaXN0KSBhcmVcclxuICogICB0aGVuIHNlcmlhbGl6ZWQgYmFjayB0byBwcm9wZXJseSBlc2NhcGVkIGh0bWwgc3RyaW5nLiBUaGlzIG1lYW5zIHRoYXQgbm8gdW5zYWZlIGlucHV0IGNhbiBtYWtlXHJcbiAqICAgaXQgaW50byB0aGUgcmV0dXJuZWQgc3RyaW5nLCBob3dldmVyLCBzaW5jZSBvdXIgcGFyc2VyIGlzIG1vcmUgc3RyaWN0IHRoYW4gYSB0eXBpY2FsIGJyb3dzZXJcclxuICogICBwYXJzZXIsIGl0J3MgcG9zc2libGUgdGhhdCBzb21lIG9ic2N1cmUgaW5wdXQsIHdoaWNoIHdvdWxkIGJlIHJlY29nbml6ZWQgYXMgdmFsaWQgSFRNTCBieSBhXHJcbiAqICAgYnJvd3Nlciwgd29uJ3QgbWFrZSBpdCB0aHJvdWdoIHRoZSBzYW5pdGl6ZXIuIFRoZSBpbnB1dCBtYXkgYWxzbyBjb250YWluIFNWRyBtYXJrdXAuXHJcbiAqICAgVGhlIHdoaXRlbGlzdCBpcyBjb25maWd1cmVkIHVzaW5nIHRoZSBmdW5jdGlvbnMgYGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0YCBhbmRcclxuICogICBgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0YCBvZiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciBgJGNvbXBpbGVQcm92aWRlcmB9LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbCBIVE1MIGlucHV0LlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBTYW5pdGl6ZWQgSFRNTC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwic2FuaXRpemVFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cclxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICA8c2NyaXB0PlxyXG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnc2FuaXRpemVFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXHJcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHNjZScsIGZ1bmN0aW9uKCRzY29wZSwgJHNjZSkge1xyXG4gICAgICAgICAgICAgJHNjb3BlLnNuaXBwZXQgPVxyXG4gICAgICAgICAgICAgICAnPHAgc3R5bGU9XCJjb2xvcjpibHVlXCI+YW4gaHRtbFxcbicgK1xyXG4gICAgICAgICAgICAgICAnPGVtIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD1cXCdQV04zRCFcXCdcIj5jbGljayBoZXJlPC9lbT5cXG4nICtcclxuICAgICAgICAgICAgICAgJ3NuaXBwZXQ8L3A+JztcclxuICAgICAgICAgICAgICRzY29wZS5kZWxpYmVyYXRlbHlUcnVzdERhbmdlcm91c1NuaXBwZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoJHNjb3BlLnNuaXBwZXQpO1xyXG4gICAgICAgICAgICAgfTtcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgPC9zY3JpcHQ+XHJcbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cclxuICAgICAgICBTbmlwcGV0OiA8dGV4dGFyZWEgbmctbW9kZWw9XCJzbmlwcGV0XCIgY29scz1cIjYwXCIgcm93cz1cIjNcIj48L3RleHRhcmVhPlxyXG4gICAgICAgPHRhYmxlPlxyXG4gICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgPHRkPkRpcmVjdGl2ZTwvdGQ+XHJcbiAgICAgICAgICAgPHRkPkhvdzwvdGQ+XHJcbiAgICAgICAgICAgPHRkPlNvdXJjZTwvdGQ+XHJcbiAgICAgICAgICAgPHRkPlJlbmRlcmVkPC90ZD5cclxuICAgICAgICAgPC90cj5cclxuICAgICAgICAgPHRyIGlkPVwiYmluZC1odG1sLXdpdGgtc2FuaXRpemVcIj5cclxuICAgICAgICAgICA8dGQ+bmctYmluZC1odG1sPC90ZD5cclxuICAgICAgICAgICA8dGQ+QXV0b21hdGljYWxseSB1c2VzICRzYW5pdGl6ZTwvdGQ+XHJcbiAgICAgICAgICAgPHRkPjxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0XCImZ3Q7PGJyLz4mbHQ7L2RpdiZndDs8L3ByZT48L3RkPlxyXG4gICAgICAgICAgIDx0ZD48ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRcIj48L2Rpdj48L3RkPlxyXG4gICAgICAgICA8L3RyPlxyXG4gICAgICAgICA8dHIgaWQ9XCJiaW5kLWh0bWwtd2l0aC10cnVzdFwiPlxyXG4gICAgICAgICAgIDx0ZD5uZy1iaW5kLWh0bWw8L3RkPlxyXG4gICAgICAgICAgIDx0ZD5CeXBhc3MgJHNhbml0aXplIGJ5IGV4cGxpY2l0bHkgdHJ1c3RpbmcgdGhlIGRhbmdlcm91cyB2YWx1ZTwvdGQ+XHJcbiAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgIDxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJkZWxpYmVyYXRlbHlUcnVzdERhbmdlcm91c1NuaXBwZXQoKVwiJmd0O1xyXG4mbHQ7L2RpdiZndDs8L3ByZT5cclxuICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgIDx0ZD48ZGl2IG5nLWJpbmQtaHRtbD1cImRlbGliZXJhdGVseVRydXN0RGFuZ2Vyb3VzU25pcHBldCgpXCI+PC9kaXY+PC90ZD5cclxuICAgICAgICAgPC90cj5cclxuICAgICAgICAgPHRyIGlkPVwiYmluZC1kZWZhdWx0XCI+XHJcbiAgICAgICAgICAgPHRkPm5nLWJpbmQ8L3RkPlxyXG4gICAgICAgICAgIDx0ZD5BdXRvbWF0aWNhbGx5IGVzY2FwZXM8L3RkPlxyXG4gICAgICAgICAgIDx0ZD48cHJlPiZsdDtkaXYgbmctYmluZD1cInNuaXBwZXRcIiZndDs8YnIvPiZsdDsvZGl2Jmd0OzwvcHJlPjwvdGQ+XHJcbiAgICAgICAgICAgPHRkPjxkaXYgbmctYmluZD1cInNuaXBwZXRcIj48L2Rpdj48L3RkPlxyXG4gICAgICAgICA8L3RyPlxyXG4gICAgICAgPC90YWJsZT5cclxuICAgICAgIDwvZGl2PlxyXG4gICA8L2ZpbGU+XHJcbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICBpdCgnc2hvdWxkIHNhbml0aXplIHRoZSBodG1sIHNuaXBwZXQgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1odG1sLXdpdGgtc2FuaXRpemUgZGl2JykpLmdldElubmVySHRtbCgpKS5cclxuICAgICAgICAgdG9CZSgnPHA+YW4gaHRtbFxcbjxlbT5jbGljayBoZXJlPC9lbT5cXG5zbmlwcGV0PC9wPicpO1xyXG4gICAgIH0pO1xyXG5cclxuICAgICBpdCgnc2hvdWxkIGlubGluZSByYXcgc25pcHBldCBpZiBib3VuZCB0byBhIHRydXN0ZWQgdmFsdWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtaHRtbC13aXRoLXRydXN0IGRpdicpKS5nZXRJbm5lckh0bWwoKSkuXHJcbiAgICAgICAgIHRvQmUoXCI8cCBzdHlsZT1cXFwiY29sb3I6Ymx1ZVxcXCI+YW4gaHRtbFxcblwiICtcclxuICAgICAgICAgICAgICBcIjxlbSBvbm1vdXNlb3Zlcj1cXFwidGhpcy50ZXh0Q29udGVudD0nUFdOM0QhJ1xcXCI+Y2xpY2sgaGVyZTwvZW0+XFxuXCIgK1xyXG4gICAgICAgICAgICAgIFwic25pcHBldDwvcD5cIik7XHJcbiAgICAgfSk7XHJcblxyXG4gICAgIGl0KCdzaG91bGQgZXNjYXBlIHNuaXBwZXQgd2l0aG91dCBhbnkgZmlsdGVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWRlZmF1bHQgZGl2JykpLmdldElubmVySHRtbCgpKS5cclxuICAgICAgICAgdG9CZShcIiZsdDtwIHN0eWxlPVxcXCJjb2xvcjpibHVlXFxcIiZndDthbiBodG1sXFxuXCIgK1xyXG4gICAgICAgICAgICAgIFwiJmx0O2VtIG9ubW91c2VvdmVyPVxcXCJ0aGlzLnRleHRDb250ZW50PSdQV04zRCEnXFxcIiZndDtjbGljayBoZXJlJmx0Oy9lbSZndDtcXG5cIiArXHJcbiAgICAgICAgICAgICAgXCJzbmlwcGV0Jmx0Oy9wJmd0O1wiKTtcclxuICAgICB9KTtcclxuXHJcbiAgICAgaXQoJ3Nob3VsZCB1cGRhdGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuY2xlYXIoKTtcclxuICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuc2VuZEtleXMoJ25ldyA8YiBvbmNsaWNrPVwiYWxlcnQoMSlcIj50ZXh0PC9iPicpO1xyXG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1odG1sLXdpdGgtc2FuaXRpemUgZGl2JykpLmdldElubmVySHRtbCgpKS5cclxuICAgICAgICAgdG9CZSgnbmV3IDxiPnRleHQ8L2I+Jyk7XHJcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC10cnVzdCBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLnRvQmUoXHJcbiAgICAgICAgICduZXcgPGIgb25jbGljaz1cImFsZXJ0KDEpXCI+dGV4dDwvYj4nKTtcclxuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtZGVmYXVsdCBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLnRvQmUoXHJcbiAgICAgICAgIFwibmV3ICZsdDtiIG9uY2xpY2s9XFxcImFsZXJ0KDEpXFxcIiZndDt0ZXh0Jmx0Oy9iJmd0O1wiKTtcclxuICAgICB9KTtcclxuICAgPC9maWxlPlxyXG4gICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5mdW5jdGlvbiAkU2FuaXRpemVQcm92aWRlcigpIHtcclxuICB0aGlzLiRnZXQgPSBbJyQkc2FuaXRpemVVcmknLCBmdW5jdGlvbigkJHNhbml0aXplVXJpKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oaHRtbCkge1xyXG4gICAgICB2YXIgYnVmID0gW107XHJcbiAgICAgIGh0bWxQYXJzZXIoaHRtbCwgaHRtbFNhbml0aXplV3JpdGVyKGJ1ZiwgZnVuY3Rpb24odXJpLCBpc0ltYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuICEvXnVuc2FmZS8udGVzdCgkJHNhbml0aXplVXJpKHVyaSwgaXNJbWFnZSkpO1xyXG4gICAgICB9KSk7XHJcbiAgICAgIHJldHVybiBidWYuam9pbignJyk7XHJcbiAgICB9O1xyXG4gIH1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzYW5pdGl6ZVRleHQoY2hhcnMpIHtcclxuICB2YXIgYnVmID0gW107XHJcbiAgdmFyIHdyaXRlciA9IGh0bWxTYW5pdGl6ZVdyaXRlcihidWYsIGFuZ3VsYXIubm9vcCk7XHJcbiAgd3JpdGVyLmNoYXJzKGNoYXJzKTtcclxuICByZXR1cm4gYnVmLmpvaW4oJycpO1xyXG59XHJcblxyXG5cclxuLy8gUmVndWxhciBFeHByZXNzaW9ucyBmb3IgcGFyc2luZyB0YWdzIGFuZCBhdHRyaWJ1dGVzXHJcbnZhciBTVEFSVF9UQUdfUkVHRVhQID1cclxuICAgICAgIC9ePCgoPzpbYS16QS1aXSlbXFx3Oi1dKikoKD86XFxzK1tcXHc6LV0rKD86XFxzKj1cXHMqKD86KD86XCJbXlwiXSpcIil8KD86J1teJ10qJyl8W14+XFxzXSspKT8pKilcXHMqKFxcLz8pXFxzKig+PykvLFxyXG4gIEVORF9UQUdfUkVHRVhQID0gL148XFwvXFxzKihbXFx3Oi1dKylbXj5dKj4vLFxyXG4gIEFUVFJfUkVHRVhQID0gLyhbXFx3Oi1dKykoPzpcXHMqPVxccyooPzooPzpcIigoPzpbXlwiXSkqKVwiKXwoPzonKCg/OlteJ10pKiknKXwoW14+XFxzXSspKSk/L2csXHJcbiAgQkVHSU5fVEFHX1JFR0VYUCA9IC9ePC8sXHJcbiAgQkVHSU5HX0VORF9UQUdFX1JFR0VYUCA9IC9ePFxcLy8sXHJcbiAgQ09NTUVOVF9SRUdFWFAgPSAvPCEtLSguKj8pLS0+L2csXHJcbiAgRE9DVFlQRV9SRUdFWFAgPSAvPCFET0NUWVBFKFtePl0qPyk+L2ksXHJcbiAgQ0RBVEFfUkVHRVhQID0gLzwhXFxbQ0RBVEFcXFsoLio/KV1dPi9nLFxyXG4gIFNVUlJPR0FURV9QQUlSX1JFR0VYUCA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdL2csXHJcbiAgLy8gTWF0Y2ggZXZlcnl0aGluZyBvdXRzaWRlIG9mIG5vcm1hbCBjaGFycyBhbmQgXCIgKHF1b3RlIGNoYXJhY3RlcilcclxuICBOT05fQUxQSEFOVU1FUklDX1JFR0VYUCA9IC8oW15cXCMtfnwgfCFdKS9nO1xyXG5cclxuXHJcbi8vIEdvb2Qgc291cmNlIG9mIGluZm8gYWJvdXQgZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXNcclxuLy8gaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy9PdmVydmlldy5odG1sI3NlbWFudGljc1xyXG4vLyBodHRwOi8vc2ltb24uaHRtbDUub3JnL2h0bWwtZWxlbWVudHNcclxuXHJcbi8vIFNhZmUgVm9pZCBFbGVtZW50cyAtIEhUTUw1XHJcbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCN2b2lkLWVsZW1lbnRzXHJcbnZhciB2b2lkRWxlbWVudHMgPSBtYWtlTWFwKFwiYXJlYSxicixjb2wsaHIsaW1nLHdiclwiKTtcclxuXHJcbi8vIEVsZW1lbnRzIHRoYXQgeW91IGNhbiwgaW50ZW50aW9uYWxseSwgbGVhdmUgb3BlbiAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpXHJcbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCNvcHRpb25hbC10YWdzXHJcbnZhciBvcHRpb25hbEVuZFRhZ0Jsb2NrRWxlbWVudHMgPSBtYWtlTWFwKFwiY29sZ3JvdXAsZGQsZHQsbGkscCx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCx0clwiKSxcclxuICAgIG9wdGlvbmFsRW5kVGFnSW5saW5lRWxlbWVudHMgPSBtYWtlTWFwKFwicnAscnRcIiksXHJcbiAgICBvcHRpb25hbEVuZFRhZ0VsZW1lbnRzID0gYW5ndWxhci5leHRlbmQoe30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbEVuZFRhZ0Jsb2NrRWxlbWVudHMpO1xyXG5cclxuLy8gU2FmZSBCbG9jayBFbGVtZW50cyAtIEhUTUw1XHJcbnZhciBibG9ja0VsZW1lbnRzID0gYW5ndWxhci5leHRlbmQoe30sIG9wdGlvbmFsRW5kVGFnQmxvY2tFbGVtZW50cywgbWFrZU1hcChcImFkZHJlc3MsYXJ0aWNsZSxcIiArXHJcbiAgICAgICAgXCJhc2lkZSxibG9ja3F1b3RlLGNhcHRpb24sY2VudGVyLGRlbCxkaXIsZGl2LGRsLGZpZ3VyZSxmaWdjYXB0aW9uLGZvb3RlcixoMSxoMixoMyxoNCxoNSxcIiArXHJcbiAgICAgICAgXCJoNixoZWFkZXIsaGdyb3VwLGhyLGlucyxtYXAsbWVudSxuYXYsb2wscHJlLHNjcmlwdCxzZWN0aW9uLHRhYmxlLHVsXCIpKTtcclxuXHJcbi8vIElubGluZSBFbGVtZW50cyAtIEhUTUw1XHJcbnZhciBpbmxpbmVFbGVtZW50cyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBvcHRpb25hbEVuZFRhZ0lubGluZUVsZW1lbnRzLCBtYWtlTWFwKFwiYSxhYmJyLGFjcm9ueW0sYixcIiArXHJcbiAgICAgICAgXCJiZGksYmRvLGJpZyxicixjaXRlLGNvZGUsZGVsLGRmbixlbSxmb250LGksaW1nLGlucyxrYmQsbGFiZWwsbWFwLG1hcmsscSxydWJ5LHJwLHJ0LHMsXCIgK1xyXG4gICAgICAgIFwic2FtcCxzbWFsbCxzcGFuLHN0cmlrZSxzdHJvbmcsc3ViLHN1cCx0aW1lLHR0LHUsdmFyXCIpKTtcclxuXHJcbi8vIFNWRyBFbGVtZW50c1xyXG4vLyBodHRwczovL3dpa2kud2hhdHdnLm9yZy93aWtpL1Nhbml0aXphdGlvbl9ydWxlcyNzdmdfRWxlbWVudHNcclxudmFyIHN2Z0VsZW1lbnRzID0gbWFrZU1hcChcImFuaW1hdGUsYW5pbWF0ZUNvbG9yLGFuaW1hdGVNb3Rpb24sYW5pbWF0ZVRyYW5zZm9ybSxjaXJjbGUsZGVmcyxcIiArXHJcbiAgICAgICAgXCJkZXNjLGVsbGlwc2UsZm9udC1mYWNlLGZvbnQtZmFjZS1uYW1lLGZvbnQtZmFjZS1zcmMsZyxnbHlwaCxoa2VybixpbWFnZSxsaW5lYXJHcmFkaWVudCxcIiArXHJcbiAgICAgICAgXCJsaW5lLG1hcmtlcixtZXRhZGF0YSxtaXNzaW5nLWdseXBoLG1wYXRoLHBhdGgscG9seWdvbixwb2x5bGluZSxyYWRpYWxHcmFkaWVudCxyZWN0LHNldCxcIiArXHJcbiAgICAgICAgXCJzdG9wLHN2Zyxzd2l0Y2gsdGV4dCx0aXRsZSx0c3Bhbix1c2VcIik7XHJcblxyXG4vLyBTcGVjaWFsIEVsZW1lbnRzIChjYW4gY29udGFpbiBhbnl0aGluZylcclxudmFyIHNwZWNpYWxFbGVtZW50cyA9IG1ha2VNYXAoXCJzY3JpcHQsc3R5bGVcIik7XHJcblxyXG52YXIgdmFsaWRFbGVtZW50cyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWRFbGVtZW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0VsZW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUVsZW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsRW5kVGFnRWxlbWVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ZnRWxlbWVudHMpO1xyXG5cclxuLy9BdHRyaWJ1dGVzIHRoYXQgaGF2ZSBocmVmIGFuZCBoZW5jZSBuZWVkIHRvIGJlIHNhbml0aXplZFxyXG52YXIgdXJpQXR0cnMgPSBtYWtlTWFwKFwiYmFja2dyb3VuZCxjaXRlLGhyZWYsbG9uZ2Rlc2Msc3JjLHVzZW1hcCx4bGluazpocmVmXCIpO1xyXG5cclxudmFyIGh0bWxBdHRycyA9IG1ha2VNYXAoJ2FiYnIsYWxpZ24sYWx0LGF4aXMsYmdjb2xvcixib3JkZXIsY2VsbHBhZGRpbmcsY2VsbHNwYWNpbmcsY2xhc3MsY2xlYXIsJyArXHJcbiAgICAnY29sb3IsY29scyxjb2xzcGFuLGNvbXBhY3QsY29vcmRzLGRpcixmYWNlLGhlYWRlcnMsaGVpZ2h0LGhyZWZsYW5nLGhzcGFjZSwnICtcclxuICAgICdpc21hcCxsYW5nLGxhbmd1YWdlLG5vaHJlZixub3dyYXAscmVsLHJldixyb3dzLHJvd3NwYW4scnVsZXMsJyArXHJcbiAgICAnc2NvcGUsc2Nyb2xsaW5nLHNoYXBlLHNpemUsc3BhbixzdGFydCxzdW1tYXJ5LHRhcmdldCx0aXRsZSx0eXBlLCcgK1xyXG4gICAgJ3ZhbGlnbix2YWx1ZSx2c3BhY2Usd2lkdGgnKTtcclxuXHJcbi8vIFNWRyBhdHRyaWJ1dGVzICh3aXRob3V0IFwiaWRcIiBhbmQgXCJuYW1lXCIgYXR0cmlidXRlcylcclxuLy8gaHR0cHM6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9TYW5pdGl6YXRpb25fcnVsZXMjc3ZnX0F0dHJpYnV0ZXNcclxudmFyIHN2Z0F0dHJzID0gbWFrZU1hcCgnYWNjZW50LWhlaWdodCxhY2N1bXVsYXRlLGFkZGl0aXZlLGFscGhhYmV0aWMsYXJhYmljLWZvcm0sYXNjZW50LCcgK1xyXG4gICAgJ2F0dHJpYnV0ZU5hbWUsYXR0cmlidXRlVHlwZSxiYXNlUHJvZmlsZSxiYm94LGJlZ2luLGJ5LGNhbGNNb2RlLGNhcC1oZWlnaHQsY2xhc3MsY29sb3IsJyArXHJcbiAgICAnY29sb3ItcmVuZGVyaW5nLGNvbnRlbnQsY3gsY3ksZCxkeCxkeSxkZXNjZW50LGRpc3BsYXksZHVyLGVuZCxmaWxsLGZpbGwtcnVsZSxmb250LWZhbWlseSwnICtcclxuICAgICdmb250LXNpemUsZm9udC1zdHJldGNoLGZvbnQtc3R5bGUsZm9udC12YXJpYW50LGZvbnQtd2VpZ2h0LGZyb20sZngsZnksZzEsZzIsZ2x5cGgtbmFtZSwnICtcclxuICAgICdncmFkaWVudFVuaXRzLGhhbmdpbmcsaGVpZ2h0LGhvcml6LWFkdi14LGhvcml6LW9yaWdpbi14LGlkZW9ncmFwaGljLGssa2V5UG9pbnRzLCcgK1xyXG4gICAgJ2tleVNwbGluZXMsa2V5VGltZXMsbGFuZyxtYXJrZXItZW5kLG1hcmtlci1taWQsbWFya2VyLXN0YXJ0LG1hcmtlckhlaWdodCxtYXJrZXJVbml0cywnICtcclxuICAgICdtYXJrZXJXaWR0aCxtYXRoZW1hdGljYWwsbWF4LG1pbixvZmZzZXQsb3BhY2l0eSxvcmllbnQsb3JpZ2luLG92ZXJsaW5lLXBvc2l0aW9uLCcgK1xyXG4gICAgJ292ZXJsaW5lLXRoaWNrbmVzcyxwYW5vc2UtMSxwYXRoLHBhdGhMZW5ndGgscG9pbnRzLHByZXNlcnZlQXNwZWN0UmF0aW8scixyZWZYLHJlZlksJyArXHJcbiAgICAncmVwZWF0Q291bnQscmVwZWF0RHVyLHJlcXVpcmVkRXh0ZW5zaW9ucyxyZXF1aXJlZEZlYXR1cmVzLHJlc3RhcnQscm90YXRlLHJ4LHJ5LHNsb3BlLHN0ZW1oLCcgK1xyXG4gICAgJ3N0ZW12LHN0b3AtY29sb3Isc3RvcC1vcGFjaXR5LHN0cmlrZXRocm91Z2gtcG9zaXRpb24sc3RyaWtldGhyb3VnaC10aGlja25lc3Msc3Ryb2tlLCcgK1xyXG4gICAgJ3N0cm9rZS1kYXNoYXJyYXksc3Ryb2tlLWRhc2hvZmZzZXQsc3Ryb2tlLWxpbmVjYXAsc3Ryb2tlLWxpbmVqb2luLHN0cm9rZS1taXRlcmxpbWl0LCcgK1xyXG4gICAgJ3N0cm9rZS1vcGFjaXR5LHN0cm9rZS13aWR0aCxzeXN0ZW1MYW5ndWFnZSx0YXJnZXQsdGV4dC1hbmNob3IsdG8sdHJhbnNmb3JtLHR5cGUsdTEsdTIsJyArXHJcbiAgICAndW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLXJhbmdlLHVuaXRzLXBlci1lbSx2YWx1ZXMsdmVyc2lvbiwnICtcclxuICAgICd2aWV3Qm94LHZpc2liaWxpdHksd2lkdGgsd2lkdGhzLHgseC1oZWlnaHQseDEseDIseGxpbms6YWN0dWF0ZSx4bGluazphcmNyb2xlLHhsaW5rOnJvbGUsJyArXHJcbiAgICAneGxpbms6c2hvdyx4bGluazp0aXRsZSx4bGluazp0eXBlLHhtbDpiYXNlLHhtbDpsYW5nLHhtbDpzcGFjZSx4bWxucyx4bWxuczp4bGluayx5LHkxLHkyLCcgK1xyXG4gICAgJ3pvb21BbmRQYW4nKTtcclxuXHJcbnZhciB2YWxpZEF0dHJzID0gYW5ndWxhci5leHRlbmQoe30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJpQXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ZnQXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEF0dHJzKTtcclxuXHJcbmZ1bmN0aW9uIG1ha2VNYXAoc3RyKSB7XHJcbiAgdmFyIG9iaiA9IHt9LCBpdGVtcyA9IHN0ci5zcGxpdCgnLCcpLCBpO1xyXG4gIGZvciAoaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykgb2JqW2l0ZW1zW2ldXSA9IHRydWU7XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBodG1sUGFyc2VyKGh0bWxTdHJpbmcsIHtcclxuICogICAgIHN0YXJ0OiBmdW5jdGlvbih0YWcsIGF0dHJzLCB1bmFyeSkge30sXHJcbiAqICAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge30sXHJcbiAqICAgICBjaGFyczogZnVuY3Rpb24odGV4dCkge30sXHJcbiAqICAgICBjb21tZW50OiBmdW5jdGlvbih0ZXh0KSB7fVxyXG4gKiB9KTtcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGh0bWwgc3RyaW5nXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBodG1sUGFyc2VyKGh0bWwsIGhhbmRsZXIpIHtcclxuICBpZiAodHlwZW9mIGh0bWwgIT09ICdzdHJpbmcnKSB7XHJcbiAgICBpZiAoaHRtbCA9PT0gbnVsbCB8fCB0eXBlb2YgaHRtbCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgaHRtbCA9ICcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaHRtbCA9ICcnICsgaHRtbDtcclxuICAgIH1cclxuICB9XHJcbiAgdmFyIGluZGV4LCBjaGFycywgbWF0Y2gsIHN0YWNrID0gW10sIGxhc3QgPSBodG1sLCB0ZXh0O1xyXG4gIHN0YWNrLmxhc3QgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOyB9O1xyXG5cclxuICB3aGlsZSAoaHRtbCkge1xyXG4gICAgdGV4dCA9ICcnO1xyXG4gICAgY2hhcnMgPSB0cnVlO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgaW4gYSBzY3JpcHQgb3Igc3R5bGUgZWxlbWVudFxyXG4gICAgaWYgKCFzdGFjay5sYXN0KCkgfHwgIXNwZWNpYWxFbGVtZW50c1tzdGFjay5sYXN0KCldKSB7XHJcblxyXG4gICAgICAvLyBDb21tZW50XHJcbiAgICAgIGlmIChodG1sLmluZGV4T2YoXCI8IS0tXCIpID09PSAwKSB7XHJcbiAgICAgICAgLy8gY29tbWVudHMgY29udGFpbmluZyAtLSBhcmUgbm90IGFsbG93ZWQgdW5sZXNzIHRoZXkgdGVybWluYXRlIHRoZSBjb21tZW50XHJcbiAgICAgICAgaW5kZXggPSBodG1sLmluZGV4T2YoXCItLVwiLCA0KTtcclxuXHJcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaHRtbC5sYXN0SW5kZXhPZihcIi0tPlwiLCBpbmRleCkgPT09IGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoaGFuZGxlci5jb21tZW50KSBoYW5kbGVyLmNvbW1lbnQoaHRtbC5zdWJzdHJpbmcoNCwgaW5kZXgpKTtcclxuICAgICAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhpbmRleCArIDMpO1xyXG4gICAgICAgICAgY2hhcnMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIC8vIERPQ1RZUEVcclxuICAgICAgfSBlbHNlIGlmIChET0NUWVBFX1JFR0VYUC50ZXN0KGh0bWwpKSB7XHJcbiAgICAgICAgbWF0Y2ggPSBodG1sLm1hdGNoKERPQ1RZUEVfUkVHRVhQKTtcclxuXHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKG1hdGNoWzBdLCAnJyk7XHJcbiAgICAgICAgICBjaGFycyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgLy8gZW5kIHRhZ1xyXG4gICAgICB9IGVsc2UgaWYgKEJFR0lOR19FTkRfVEFHRV9SRUdFWFAudGVzdChodG1sKSkge1xyXG4gICAgICAgIG1hdGNoID0gaHRtbC5tYXRjaChFTkRfVEFHX1JFR0VYUCk7XHJcblxyXG4gICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XHJcbiAgICAgICAgICBtYXRjaFswXS5yZXBsYWNlKEVORF9UQUdfUkVHRVhQLCBwYXJzZUVuZFRhZyk7XHJcbiAgICAgICAgICBjaGFycyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIC8vIHN0YXJ0IHRhZ1xyXG4gICAgICB9IGVsc2UgaWYgKEJFR0lOX1RBR19SRUdFWFAudGVzdChodG1sKSkge1xyXG4gICAgICAgIG1hdGNoID0gaHRtbC5tYXRjaChTVEFSVF9UQUdfUkVHRVhQKTtcclxuXHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAvLyBXZSBvbmx5IGhhdmUgYSB2YWxpZCBzdGFydC10YWcgaWYgdGhlcmUgaXMgYSAnPicuXHJcbiAgICAgICAgICBpZiAobWF0Y2hbNF0pIHtcclxuICAgICAgICAgICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2UoU1RBUlRfVEFHX1JFR0VYUCwgcGFyc2VTdGFydFRhZyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjaGFycyA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBubyBlbmRpbmcgdGFnIGZvdW5kIC0tLSB0aGlzIHBpZWNlIHNob3VsZCBiZSBlbmNvZGVkIGFzIGFuIGVudGl0eS5cclxuICAgICAgICAgIHRleHQgKz0gJzwnO1xyXG4gICAgICAgICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNoYXJzKSB7XHJcbiAgICAgICAgaW5kZXggPSBodG1sLmluZGV4T2YoXCI8XCIpO1xyXG5cclxuICAgICAgICB0ZXh0ICs9IGluZGV4IDwgMCA/IGh0bWwgOiBodG1sLnN1YnN0cmluZygwLCBpbmRleCk7XHJcbiAgICAgICAgaHRtbCA9IGluZGV4IDwgMCA/IFwiXCIgOiBodG1sLnN1YnN0cmluZyhpbmRleCk7XHJcblxyXG4gICAgICAgIGlmIChoYW5kbGVyLmNoYXJzKSBoYW5kbGVyLmNoYXJzKGRlY29kZUVudGl0aWVzKHRleHQpKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElFIHZlcnNpb25zIDkgYW5kIDEwIGRvIG5vdCB1bmRlcnN0YW5kIHRoZSByZWdleCAnW15dJywgc28gdXNpbmcgYSB3b3JrYXJvdW5kIHdpdGggW1xcV1xcd10uXHJcbiAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UobmV3IFJlZ0V4cChcIihbXFxcXFdcXFxcd10qKTxcXFxccypcXFxcL1xcXFxzKlwiICsgc3RhY2subGFzdCgpICsgXCJbXj5dKj5cIiwgJ2knKSxcclxuICAgICAgICBmdW5jdGlvbihhbGwsIHRleHQpIHtcclxuICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoQ09NTUVOVF9SRUdFWFAsIFwiJDFcIikucmVwbGFjZShDREFUQV9SRUdFWFAsIFwiJDFcIik7XHJcblxyXG4gICAgICAgICAgaWYgKGhhbmRsZXIuY2hhcnMpIGhhbmRsZXIuY2hhcnMoZGVjb2RlRW50aXRpZXModGV4dCkpO1xyXG5cclxuICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHBhcnNlRW5kVGFnKFwiXCIsIHN0YWNrLmxhc3QoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGh0bWwgPT0gbGFzdCkge1xyXG4gICAgICB0aHJvdyAkc2FuaXRpemVNaW5FcnIoJ2JhZHBhcnNlJywgXCJUaGUgc2FuaXRpemVyIHdhcyB1bmFibGUgdG8gcGFyc2UgdGhlIGZvbGxvd2luZyBibG9jayBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9mIGh0bWw6IHswfVwiLCBodG1sKTtcclxuICAgIH1cclxuICAgIGxhc3QgPSBodG1sO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xlYW4gdXAgYW55IHJlbWFpbmluZyB0YWdzXHJcbiAgcGFyc2VFbmRUYWcoKTtcclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VTdGFydFRhZyh0YWcsIHRhZ05hbWUsIHJlc3QsIHVuYXJ5KSB7XHJcbiAgICB0YWdOYW1lID0gYW5ndWxhci5sb3dlcmNhc2UodGFnTmFtZSk7XHJcbiAgICBpZiAoYmxvY2tFbGVtZW50c1t0YWdOYW1lXSkge1xyXG4gICAgICB3aGlsZSAoc3RhY2subGFzdCgpICYmIGlubGluZUVsZW1lbnRzW3N0YWNrLmxhc3QoKV0pIHtcclxuICAgICAgICBwYXJzZUVuZFRhZyhcIlwiLCBzdGFjay5sYXN0KCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wdGlvbmFsRW5kVGFnRWxlbWVudHNbdGFnTmFtZV0gJiYgc3RhY2subGFzdCgpID09IHRhZ05hbWUpIHtcclxuICAgICAgcGFyc2VFbmRUYWcoXCJcIiwgdGFnTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5hcnkgPSB2b2lkRWxlbWVudHNbdGFnTmFtZV0gfHwgISF1bmFyeTtcclxuXHJcbiAgICBpZiAoIXVuYXJ5KVxyXG4gICAgICBzdGFjay5wdXNoKHRhZ05hbWUpO1xyXG5cclxuICAgIHZhciBhdHRycyA9IHt9O1xyXG5cclxuICAgIHJlc3QucmVwbGFjZShBVFRSX1JFR0VYUCxcclxuICAgICAgZnVuY3Rpb24obWF0Y2gsIG5hbWUsIGRvdWJsZVF1b3RlZFZhbHVlLCBzaW5nbGVRdW90ZWRWYWx1ZSwgdW5xdW90ZWRWYWx1ZSkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGRvdWJsZVF1b3RlZFZhbHVlXHJcbiAgICAgICAgICB8fCBzaW5nbGVRdW90ZWRWYWx1ZVxyXG4gICAgICAgICAgfHwgdW5xdW90ZWRWYWx1ZVxyXG4gICAgICAgICAgfHwgJyc7XHJcblxyXG4gICAgICAgIGF0dHJzW25hbWVdID0gZGVjb2RlRW50aXRpZXModmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoaGFuZGxlci5zdGFydCkgaGFuZGxlci5zdGFydCh0YWdOYW1lLCBhdHRycywgdW5hcnkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VFbmRUYWcodGFnLCB0YWdOYW1lKSB7XHJcbiAgICB2YXIgcG9zID0gMCwgaTtcclxuICAgIHRhZ05hbWUgPSBhbmd1bGFyLmxvd2VyY2FzZSh0YWdOYW1lKTtcclxuICAgIGlmICh0YWdOYW1lKVxyXG4gICAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IG9wZW5lZCB0YWcgb2YgdGhlIHNhbWUgdHlwZVxyXG4gICAgICBmb3IgKHBvcyA9IHN0YWNrLmxlbmd0aCAtIDE7IHBvcyA+PSAwOyBwb3MtLSlcclxuICAgICAgICBpZiAoc3RhY2tbcG9zXSA9PSB0YWdOYW1lKVxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgaWYgKHBvcyA+PSAwKSB7XHJcbiAgICAgIC8vIENsb3NlIGFsbCB0aGUgb3BlbiBlbGVtZW50cywgdXAgdGhlIHN0YWNrXHJcbiAgICAgIGZvciAoaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gcG9zOyBpLS0pXHJcbiAgICAgICAgaWYgKGhhbmRsZXIuZW5kKSBoYW5kbGVyLmVuZChzdGFja1tpXSk7XHJcblxyXG4gICAgICAvLyBSZW1vdmUgdGhlIG9wZW4gZWxlbWVudHMgZnJvbSB0aGUgc3RhY2tcclxuICAgICAgc3RhY2subGVuZ3RoID0gcG9zO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxudmFyIGhpZGRlblByZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xyXG4vKipcclxuICogZGVjb2RlcyBhbGwgZW50aXRpZXMgaW50byByZWd1bGFyIHN0cmluZ1xyXG4gKiBAcGFyYW0gdmFsdWVcclxuICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgd2l0aCBkZWNvZGVkIGVudGl0aWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVjb2RlRW50aXRpZXModmFsdWUpIHtcclxuICBpZiAoIXZhbHVlKSB7IHJldHVybiAnJzsgfVxyXG5cclxuICBoaWRkZW5QcmUuaW5uZXJIVE1MID0gdmFsdWUucmVwbGFjZSgvPC9nLFwiJmx0O1wiKTtcclxuICAvLyBpbm5lclRleHQgZGVwZW5kcyBvbiBzdHlsaW5nIGFzIGl0IGRvZXNuJ3QgZGlzcGxheSBoaWRkZW4gZWxlbWVudHMuXHJcbiAgLy8gVGhlcmVmb3JlLCBpdCdzIGJldHRlciB0byB1c2UgdGV4dENvbnRlbnQgbm90IHRvIGNhdXNlIHVubmVjZXNzYXJ5IHJlZmxvd3MuXHJcbiAgcmV0dXJuIGhpZGRlblByZS50ZXh0Q29udGVudDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEVzY2FwZXMgYWxsIHBvdGVudGlhbGx5IGRhbmdlcm91cyBjaGFyYWN0ZXJzLCBzbyB0aGF0IHRoZVxyXG4gKiByZXN1bHRpbmcgc3RyaW5nIGNhbiBiZSBzYWZlbHkgaW5zZXJ0ZWQgaW50byBhdHRyaWJ1dGUgb3JcclxuICogZWxlbWVudCB0ZXh0LlxyXG4gKiBAcGFyYW0gdmFsdWVcclxuICogQHJldHVybnMge3N0cmluZ30gZXNjYXBlZCB0ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVFbnRpdGllcyh2YWx1ZSkge1xyXG4gIHJldHVybiB2YWx1ZS5cclxuICAgIHJlcGxhY2UoLyYvZywgJyZhbXA7JykuXHJcbiAgICByZXBsYWNlKFNVUlJPR0FURV9QQUlSX1JFR0VYUCwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgdmFyIGhpID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcclxuICAgICAgdmFyIGxvdyA9IHZhbHVlLmNoYXJDb2RlQXQoMSk7XHJcbiAgICAgIHJldHVybiAnJiMnICsgKCgoaGkgLSAweEQ4MDApICogMHg0MDApICsgKGxvdyAtIDB4REMwMCkgKyAweDEwMDAwKSArICc7JztcclxuICAgIH0pLlxyXG4gICAgcmVwbGFjZShOT05fQUxQSEFOVU1FUklDX1JFR0VYUCwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgcmV0dXJuICcmIycgKyB2YWx1ZS5jaGFyQ29kZUF0KDApICsgJzsnO1xyXG4gICAgfSkuXHJcbiAgICByZXBsYWNlKC88L2csICcmbHQ7JykuXHJcbiAgICByZXBsYWNlKC8+L2csICcmZ3Q7Jyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBjcmVhdGUgYW4gSFRNTC9YTUwgd3JpdGVyIHdoaWNoIHdyaXRlcyB0byBidWZmZXJcclxuICogQHBhcmFtIHtBcnJheX0gYnVmIHVzZSBidWYuamFpbignJykgdG8gZ2V0IG91dCBzYW5pdGl6ZWQgaHRtbCBzdHJpbmdcclxuICogQHJldHVybnMge29iamVjdH0gaW4gdGhlIGZvcm0gb2Yge1xyXG4gKiAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMsIHVuYXJ5KSB7fSxcclxuICogICAgIGVuZDogZnVuY3Rpb24odGFnKSB7fSxcclxuICogICAgIGNoYXJzOiBmdW5jdGlvbih0ZXh0KSB7fSxcclxuICogICAgIGNvbW1lbnQ6IGZ1bmN0aW9uKHRleHQpIHt9XHJcbiAqIH1cclxuICovXHJcbmZ1bmN0aW9uIGh0bWxTYW5pdGl6ZVdyaXRlcihidWYsIHVyaVZhbGlkYXRvcikge1xyXG4gIHZhciBpZ25vcmUgPSBmYWxzZTtcclxuICB2YXIgb3V0ID0gYW5ndWxhci5iaW5kKGJ1ZiwgYnVmLnB1c2gpO1xyXG4gIHJldHVybiB7XHJcbiAgICBzdGFydDogZnVuY3Rpb24odGFnLCBhdHRycywgdW5hcnkpIHtcclxuICAgICAgdGFnID0gYW5ndWxhci5sb3dlcmNhc2UodGFnKTtcclxuICAgICAgaWYgKCFpZ25vcmUgJiYgc3BlY2lhbEVsZW1lbnRzW3RhZ10pIHtcclxuICAgICAgICBpZ25vcmUgPSB0YWc7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFpZ25vcmUgJiYgdmFsaWRFbGVtZW50c1t0YWddID09PSB0cnVlKSB7XHJcbiAgICAgICAgb3V0KCc8Jyk7XHJcbiAgICAgICAgb3V0KHRhZyk7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGF0dHJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICB2YXIgbGtleT1hbmd1bGFyLmxvd2VyY2FzZShrZXkpO1xyXG4gICAgICAgICAgdmFyIGlzSW1hZ2UgPSAodGFnID09PSAnaW1nJyAmJiBsa2V5ID09PSAnc3JjJykgfHwgKGxrZXkgPT09ICdiYWNrZ3JvdW5kJyk7XHJcbiAgICAgICAgICBpZiAodmFsaWRBdHRyc1tsa2V5XSA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICAodXJpQXR0cnNbbGtleV0gIT09IHRydWUgfHwgdXJpVmFsaWRhdG9yKHZhbHVlLCBpc0ltYWdlKSkpIHtcclxuICAgICAgICAgICAgb3V0KCcgJyk7XHJcbiAgICAgICAgICAgIG91dChrZXkpO1xyXG4gICAgICAgICAgICBvdXQoJz1cIicpO1xyXG4gICAgICAgICAgICBvdXQoZW5jb2RlRW50aXRpZXModmFsdWUpKTtcclxuICAgICAgICAgICAgb3V0KCdcIicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG91dCh1bmFyeSA/ICcvPicgOiAnPicpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZW5kOiBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB0YWcgPSBhbmd1bGFyLmxvd2VyY2FzZSh0YWcpO1xyXG4gICAgICAgIGlmICghaWdub3JlICYmIHZhbGlkRWxlbWVudHNbdGFnXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgb3V0KCc8LycpO1xyXG4gICAgICAgICAgb3V0KHRhZyk7XHJcbiAgICAgICAgICBvdXQoJz4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhZyA9PSBpZ25vcmUpIHtcclxuICAgICAgICAgIGlnbm9yZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIGNoYXJzOiBmdW5jdGlvbihjaGFycykge1xyXG4gICAgICAgIGlmICghaWdub3JlKSB7XHJcbiAgICAgICAgICBvdXQoZW5jb2RlRW50aXRpZXMoY2hhcnMpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5cclxuLy8gZGVmaW5lIG5nU2FuaXRpemUgbW9kdWxlIGFuZCByZWdpc3RlciAkc2FuaXRpemUgc2VydmljZVxyXG5hbmd1bGFyLm1vZHVsZSgnbmdTYW5pdGl6ZScsIFtdKS5wcm92aWRlcignJHNhbml0aXplJywgJFNhbml0aXplUHJvdmlkZXIpO1xyXG5cclxuLyogZ2xvYmFsIHNhbml0aXplVGV4dDogZmFsc2UgKi9cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZmlsdGVyXHJcbiAqIEBuYW1lIGxpbmt5XHJcbiAqIEBraW5kIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBGaW5kcyBsaW5rcyBpbiB0ZXh0IGlucHV0IGFuZCB0dXJucyB0aGVtIGludG8gaHRtbCBsaW5rcy4gU3VwcG9ydHMgaHR0cC9odHRwcy9mdHAvbWFpbHRvIGFuZFxyXG4gKiBwbGFpbiBlbWFpbCBhZGRyZXNzIGxpbmtzLlxyXG4gKlxyXG4gKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nU2FuaXRpemUgYG5nU2FuaXRpemVgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBJbnB1dCB0ZXh0LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0IFdpbmRvdyAoX2JsYW5rfF9zZWxmfF9wYXJlbnR8X3RvcCkgb3IgbmFtZWQgZnJhbWUgdG8gb3BlbiBsaW5rcyBpbi5cclxuICogQHJldHVybnMge3N0cmluZ30gSHRtbC1saW5raWZpZWQgdGV4dC5cclxuICpcclxuICogQHVzYWdlXHJcbiAgIDxzcGFuIG5nLWJpbmQtaHRtbD1cImxpbmt5X2V4cHJlc3Npb24gfCBsaW5reVwiPjwvc3Bhbj5cclxuICpcclxuICogQGV4YW1wbGVcclxuICAgPGV4YW1wbGUgbW9kdWxlPVwibGlua3lFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cclxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2xpbmt5RXhhbXBsZScsIFsnbmdTYW5pdGl6ZSddKVxyXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAkc2NvcGUuc25pcHBldCA9XHJcbiAgICAgICAgICAgICAgICdQcmV0dHkgdGV4dCB3aXRoIHNvbWUgbGlua3M6XFxuJytcclxuICAgICAgICAgICAgICAgJ2h0dHA6Ly9hbmd1bGFyanMub3JnLyxcXG4nK1xyXG4gICAgICAgICAgICAgICAnbWFpbHRvOnVzQHNvbWV3aGVyZS5vcmcsXFxuJytcclxuICAgICAgICAgICAgICAgJ2Fub3RoZXJAc29tZXdoZXJlLm9yZyxcXG4nK1xyXG4gICAgICAgICAgICAgICAnYW5kIG9uZSBtb3JlOiBmdHA6Ly8xMjcuMC4wLjEvLic7XHJcbiAgICAgICAgICAgICAkc2NvcGUuc25pcHBldFdpdGhUYXJnZXQgPSAnaHR0cDovL2FuZ3VsYXJqcy5vcmcvJztcclxuICAgICAgICAgICB9XSk7XHJcbiAgICAgICA8L3NjcmlwdD5cclxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XHJcbiAgICAgICBTbmlwcGV0OiA8dGV4dGFyZWEgbmctbW9kZWw9XCJzbmlwcGV0XCIgY29scz1cIjYwXCIgcm93cz1cIjNcIj48L3RleHRhcmVhPlxyXG4gICAgICAgPHRhYmxlPlxyXG4gICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgPHRkPkZpbHRlcjwvdGQ+XHJcbiAgICAgICAgICAgPHRkPlNvdXJjZTwvdGQ+XHJcbiAgICAgICAgICAgPHRkPlJlbmRlcmVkPC90ZD5cclxuICAgICAgICAgPC90cj5cclxuICAgICAgICAgPHRyIGlkPVwibGlua3ktZmlsdGVyXCI+XHJcbiAgICAgICAgICAgPHRkPmxpbmt5IGZpbHRlcjwvdGQ+XHJcbiAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgPHByZT4mbHQ7ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXQgfCBsaW5reVwiJmd0Ozxicj4mbHQ7L2RpdiZndDs8L3ByZT5cclxuICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgIDxkaXYgbmctYmluZC1odG1sPVwic25pcHBldCB8IGxpbmt5XCI+PC9kaXY+XHJcbiAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgPC90cj5cclxuICAgICAgICAgPHRyIGlkPVwibGlua3ktdGFyZ2V0XCI+XHJcbiAgICAgICAgICA8dGQ+bGlua3kgdGFyZ2V0PC90ZD5cclxuICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgPHByZT4mbHQ7ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRXaXRoVGFyZ2V0IHwgbGlua3k6J19ibGFuaydcIiZndDs8YnI+Jmx0Oy9kaXYmZ3Q7PC9wcmU+XHJcbiAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICA8ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRXaXRoVGFyZ2V0IHwgbGlua3k6J19ibGFuaydcIj48L2Rpdj5cclxuICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgIDx0ciBpZD1cImVzY2FwZWQtaHRtbFwiPlxyXG4gICAgICAgICAgIDx0ZD5ubyBmaWx0ZXI8L3RkPlxyXG4gICAgICAgICAgIDx0ZD48cHJlPiZsdDtkaXYgbmctYmluZD1cInNuaXBwZXRcIiZndDs8YnI+Jmx0Oy9kaXYmZ3Q7PC9wcmU+PC90ZD5cclxuICAgICAgICAgICA8dGQ+PGRpdiBuZy1iaW5kPVwic25pcHBldFwiPjwvZGl2PjwvdGQ+XHJcbiAgICAgICAgIDwvdHI+XHJcbiAgICAgICA8L3RhYmxlPlxyXG4gICAgIDwvZmlsZT5cclxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICBpdCgnc2hvdWxkIGxpbmtpZnkgdGhlIHNuaXBwZXQgd2l0aCB1cmxzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5reS1maWx0ZXInKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0IHwgbGlua3knKSkuZ2V0VGV4dCgpKS5cclxuICAgICAgICAgICAgIHRvQmUoJ1ByZXR0eSB0ZXh0IHdpdGggc29tZSBsaW5rczogaHR0cDovL2FuZ3VsYXJqcy5vcmcvLCB1c0Bzb21ld2hlcmUub3JnLCAnICtcclxuICAgICAgICAgICAgICAgICAgJ2Fub3RoZXJAc29tZXdoZXJlLm9yZywgYW5kIG9uZSBtb3JlOiBmdHA6Ly8xMjcuMC4wLjEvLicpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcjbGlua3ktZmlsdGVyIGEnKSkuY291bnQoKSkudG9FcXVhbCg0KTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgbm90IGxpbmtpZnkgc25pcHBldCB3aXRob3V0IHRoZSBsaW5reSBmaWx0ZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2VzY2FwZWQtaHRtbCcpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQnKSkuZ2V0VGV4dCgpKS5cclxuICAgICAgICAgICAgIHRvQmUoJ1ByZXR0eSB0ZXh0IHdpdGggc29tZSBsaW5rczogaHR0cDovL2FuZ3VsYXJqcy5vcmcvLCBtYWlsdG86dXNAc29tZXdoZXJlLm9yZywgJyArXHJcbiAgICAgICAgICAgICAgICAgICdhbm90aGVyQHNvbWV3aGVyZS5vcmcsIGFuZCBvbmUgbW9yZTogZnRwOi8vMTI3LjAuMC4xLy4nKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnI2VzY2FwZWQtaHRtbCBhJykpLmNvdW50KCkpLnRvRXF1YWwoMCk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzbmlwcGV0JykpLmNsZWFyKCk7XHJcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuc2VuZEtleXMoJ25ldyBodHRwOi8vbGluay4nKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmt5LWZpbHRlcicpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQgfCBsaW5reScpKS5nZXRUZXh0KCkpLlxyXG4gICAgICAgICAgICAgdG9CZSgnbmV3IGh0dHA6Ly9saW5rLicpO1xyXG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcjbGlua3ktZmlsdGVyIGEnKSkuY291bnQoKSkudG9FcXVhbCgxKTtcclxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2VzY2FwZWQtaHRtbCcpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQnKSkuZ2V0VGV4dCgpKVxyXG4gICAgICAgICAgICAgLnRvQmUoJ25ldyBodHRwOi8vbGluay4nKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIGl0KCdzaG91bGQgd29yayB3aXRoIHRoZSB0YXJnZXQgcHJvcGVydHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGlua3ktdGFyZ2V0JykpLlxyXG4gICAgICAgICAgICBlbGVtZW50KGJ5LmJpbmRpbmcoXCJzbmlwcGV0V2l0aFRhcmdldCB8IGxpbmt5OidfYmxhbmsnXCIpKS5nZXRUZXh0KCkpLlxyXG4gICAgICAgICAgICB0b0JlKCdodHRwOi8vYW5ndWxhcmpzLm9yZy8nKTtcclxuICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNsaW5reS10YXJnZXQgYScpKS5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpKS50b0VxdWFsKCdfYmxhbmsnKTtcclxuICAgICAgIH0pO1xyXG4gICAgIDwvZmlsZT5cclxuICAgPC9leGFtcGxlPlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ25nU2FuaXRpemUnKS5maWx0ZXIoJ2xpbmt5JywgWyckc2FuaXRpemUnLCBmdW5jdGlvbigkc2FuaXRpemUpIHtcclxuICB2YXIgTElOS1lfVVJMX1JFR0VYUCA9XHJcbiAgICAgICAgLygoZnRwfGh0dHBzPyk6XFwvXFwvfCh3d3dcXC4pfChtYWlsdG86KT9bQS1aYS16MC05Ll8lKy1dK0ApXFxTKlteXFxzLjssKCl7fTw+XCLigJ3igJldLyxcclxuICAgICAgTUFJTFRPX1JFR0VYUCA9IC9ebWFpbHRvOi87XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbih0ZXh0LCB0YXJnZXQpIHtcclxuICAgIGlmICghdGV4dCkgcmV0dXJuIHRleHQ7XHJcbiAgICB2YXIgbWF0Y2g7XHJcbiAgICB2YXIgcmF3ID0gdGV4dDtcclxuICAgIHZhciBodG1sID0gW107XHJcbiAgICB2YXIgdXJsO1xyXG4gICAgdmFyIGk7XHJcbiAgICB3aGlsZSAoKG1hdGNoID0gcmF3Lm1hdGNoKExJTktZX1VSTF9SRUdFWFApKSkge1xyXG4gICAgICAvLyBXZSBjYW4gbm90IGVuZCBpbiB0aGVzZSBhcyB0aGV5IGFyZSBzb21ldGltZXMgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgc2VudGVuY2VcclxuICAgICAgdXJsID0gbWF0Y2hbMF07XHJcbiAgICAgIC8vIGlmIHdlIGRpZCBub3QgbWF0Y2ggZnRwL2h0dHAvd3d3L21haWx0byB0aGVuIGFzc3VtZSBtYWlsdG9cclxuICAgICAgaWYgKCFtYXRjaFsyXSAmJiAhbWF0Y2hbNF0pIHtcclxuICAgICAgICB1cmwgPSAobWF0Y2hbM10gPyAnaHR0cDovLycgOiAnbWFpbHRvOicpICsgdXJsO1xyXG4gICAgICB9XHJcbiAgICAgIGkgPSBtYXRjaC5pbmRleDtcclxuICAgICAgYWRkVGV4dChyYXcuc3Vic3RyKDAsIGkpKTtcclxuICAgICAgYWRkTGluayh1cmwsIG1hdGNoWzBdLnJlcGxhY2UoTUFJTFRPX1JFR0VYUCwgJycpKTtcclxuICAgICAgcmF3ID0gcmF3LnN1YnN0cmluZyhpICsgbWF0Y2hbMF0ubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIGFkZFRleHQocmF3KTtcclxuICAgIHJldHVybiAkc2FuaXRpemUoaHRtbC5qb2luKCcnKSk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkVGV4dCh0ZXh0KSB7XHJcbiAgICAgIGlmICghdGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBodG1sLnB1c2goc2FuaXRpemVUZXh0KHRleHQpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRMaW5rKHVybCwgdGV4dCkge1xyXG4gICAgICBodG1sLnB1c2goJzxhICcpO1xyXG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGFyZ2V0KSkge1xyXG4gICAgICAgIGh0bWwucHVzaCgndGFyZ2V0PVwiJyxcclxuICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgICAnXCIgJyk7XHJcbiAgICAgIH1cclxuICAgICAgaHRtbC5wdXNoKCdocmVmPVwiJyxcclxuICAgICAgICAgICAgICAgIHVybC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JyksXHJcbiAgICAgICAgICAgICAgICAnXCI+Jyk7XHJcbiAgICAgIGFkZFRleHQodGV4dCk7XHJcbiAgICAgIGh0bWwucHVzaCgnPC9hPicpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcblxyXG59KSh3aW5kb3csIHdpbmRvdy5hbmd1bGFyKTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKFwiZGVtb0FwcFwiLCBbXCJ0cmVlR3JpZFwiXSlcclxuLmNvbnRyb2xsZXIoJ2RlbW9Db250cm9sbGVyJywgW1xyXG4gICAgICAgICckc2NvcGUnLFxyXG4gICAgICAgICckcm9vdFNjb3BlJyxcclxuICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnRyZWVEYXRhID0gW3tcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwi0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjFwiLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCLQp9C10LvRj9Cx0LjQvdGB0LpcIixcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IDExNjk0MzIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwi0JrRg9GA0YfQsMyB0YLQvtCy0YHQutC40LlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAxODE1MDBcclxuICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwi0KLRgNCw0LrRgtC+0YDQvtC30LDQstC+zIHQtNGB0LrQuNC5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogMjU2MDAwXHJcbiAgICAgICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcItCc0LDQs9C90LjRgtC+0LPQvtGA0YHQulwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogNDE0ODk3LFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwi0JfQu9Cw0YLQvtGD0YHRglwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogMTcwOTIwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCLQodCy0LXRgNC00LvQvtCy0YHQutCw0Y8g0L7QsdC70LDRgdGC0YxcIixcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwi0JXQutCw0YLQtdGA0LjQvdCx0YPRgNCzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAxNDEyMzQ2LFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwi0JrQsNC80LXQvdGB0Lot0KPRgNCw0LvRjNGB0LrQuNC5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAxNzE0ODMsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9XTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNvbERlZnMgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJuYW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIwMFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImFtb3VudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICBdKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=